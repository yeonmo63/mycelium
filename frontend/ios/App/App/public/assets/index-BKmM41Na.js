function sJ(a,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in a)){const i=Object.getOwnPropertyDescriptor(r,n);i&&Object.defineProperty(a,n,i.get?i:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var Ag=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function EA(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var AS={exports:{}},zm={};var qI;function lJ(){if(qI)return zm;qI=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,n,i){var l=null;if(i!==void 0&&(l=""+i),n.key!==void 0&&(l=""+n.key),"key"in n){i={};for(var o in n)o!=="key"&&(i[o]=n[o])}else i=n;return n=i.ref,{$$typeof:a,type:r,key:l,ref:n!==void 0?n:null,props:i}}return zm.Fragment=e,zm.jsx=t,zm.jsxs=t,zm}var XI;function oJ(){return XI||(XI=1,AS.exports=lJ()),AS.exports}var s=oJ(),TS={exports:{}},$a={};var ZI;function cJ(){if(ZI)return $a;ZI=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),f=Symbol.iterator;function p(K){return K===null||typeof K!="object"?null:(K=f&&K[f]||K["@@iterator"],typeof K=="function"?K:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function j(K,ae,ce){this.props=K,this.context=ae,this.refs=w,this.updater=ce||g}j.prototype.isReactComponent={},j.prototype.setState=function(K,ae){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ae,"setState")},j.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function k(){}k.prototype=j.prototype;function T(K,ae,ce){this.props=K,this.context=ae,this.refs=w,this.updater=ce||g}var E=T.prototype=new k;E.constructor=T,b(E,j.prototype),E.isPureReactComponent=!0;var I=Array.isArray;function R(){}var P={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function G(K,ae,ce){var de=ce.ref;return{$$typeof:a,type:K,key:ae,ref:de!==void 0?de:null,props:ce}}function X(K,ae){return G(K.type,ae,K.props)}function U(K){return typeof K=="object"&&K!==null&&K.$$typeof===a}function te(K){var ae={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(ce){return ae[ce]})}var Z=/\/+/g;function J(K,ae){return typeof K=="object"&&K!==null&&K.key!=null?te(""+K.key):ae.toString(36)}function B(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(R,R):(K.status="pending",K.then(function(ae){K.status==="pending"&&(K.status="fulfilled",K.value=ae)},function(ae){K.status==="pending"&&(K.status="rejected",K.reason=ae)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function W(K,ae,ce,de,he){var pe=typeof K;(pe==="undefined"||pe==="boolean")&&(K=null);var Re=!1;if(K===null)Re=!0;else switch(pe){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(K.$$typeof){case a:case e:Re=!0;break;case u:return Re=K._init,W(Re(K._payload),ae,ce,de,he)}}if(Re)return he=he(K),Re=de===""?"."+J(K,0):de,I(he)?(ce="",Re!=null&&(ce=Re.replace(Z,"$&/")+"/"),W(he,ae,ce,"",function(Le){return Le})):he!=null&&(U(he)&&(he=X(he,ce+(he.key==null||K&&K.key===he.key?"":(""+he.key).replace(Z,"$&/")+"/")+Re)),ae.push(he)),1;Re=0;var Te=de===""?".":de+":";if(I(K))for(var ke=0;ke<K.length;ke++)de=K[ke],pe=Te+J(de,ke),Re+=W(de,ae,ce,pe,he);else if(ke=p(K),typeof ke=="function")for(K=ke.call(K),ke=0;!(de=K.next()).done;)de=de.value,pe=Te+J(de,ke++),Re+=W(de,ae,ce,pe,he);else if(pe==="object"){if(typeof K.then=="function")return W(B(K),ae,ce,de,he);throw ae=String(K),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return Re}function $(K,ae,ce){if(K==null)return K;var de=[],he=0;return W(K,de,"","",function(pe){return ae.call(ce,pe,he++)}),de}function Q(K){if(K._status===-1){var ae=K._result;ae=ae(),ae.then(function(ce){(K._status===0||K._status===-1)&&(K._status=1,K._result=ce)},function(ce){(K._status===0||K._status===-1)&&(K._status=2,K._result=ce)}),K._status===-1&&(K._status=0,K._result=ae)}if(K._status===1)return K._result.default;throw K._result}var ne=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},re={map:$,forEach:function(K,ae,ce){$(K,function(){ae.apply(this,arguments)},ce)},count:function(K){var ae=0;return $(K,function(){ae++}),ae},toArray:function(K){return $(K,function(ae){return ae})||[]},only:function(K){if(!U(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return $a.Activity=h,$a.Children=re,$a.Component=j,$a.Fragment=t,$a.Profiler=n,$a.PureComponent=T,$a.StrictMode=r,$a.Suspense=c,$a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,$a.__COMPILER_RUNTIME={__proto__:null,c:function(K){return P.H.useMemoCache(K)}},$a.cache=function(K){return function(){return K.apply(null,arguments)}},$a.cacheSignal=function(){return null},$a.cloneElement=function(K,ae,ce){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var de=b({},K.props),he=K.key;if(ae!=null)for(pe in ae.key!==void 0&&(he=""+ae.key),ae)!H.call(ae,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&ae.ref===void 0||(de[pe]=ae[pe]);var pe=arguments.length-2;if(pe===1)de.children=ce;else if(1<pe){for(var Re=Array(pe),Te=0;Te<pe;Te++)Re[Te]=arguments[Te+2];de.children=Re}return G(K.type,he,de)},$a.createContext=function(K){return K={$$typeof:l,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:i,_context:K},K},$a.createElement=function(K,ae,ce){var de,he={},pe=null;if(ae!=null)for(de in ae.key!==void 0&&(pe=""+ae.key),ae)H.call(ae,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(he[de]=ae[de]);var Re=arguments.length-2;if(Re===1)he.children=ce;else if(1<Re){for(var Te=Array(Re),ke=0;ke<Re;ke++)Te[ke]=arguments[ke+2];he.children=Te}if(K&&K.defaultProps)for(de in Re=K.defaultProps,Re)he[de]===void 0&&(he[de]=Re[de]);return G(K,pe,he)},$a.createRef=function(){return{current:null}},$a.forwardRef=function(K){return{$$typeof:o,render:K}},$a.isValidElement=U,$a.lazy=function(K){return{$$typeof:u,_payload:{_status:-1,_result:K},_init:Q}},$a.memo=function(K,ae){return{$$typeof:d,type:K,compare:ae===void 0?null:ae}},$a.startTransition=function(K){var ae=P.T,ce={};P.T=ce;try{var de=K(),he=P.S;he!==null&&he(ce,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(R,ne)}catch(pe){ne(pe)}finally{ae!==null&&ce.types!==null&&(ae.types=ce.types),P.T=ae}},$a.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},$a.use=function(K){return P.H.use(K)},$a.useActionState=function(K,ae,ce){return P.H.useActionState(K,ae,ce)},$a.useCallback=function(K,ae){return P.H.useCallback(K,ae)},$a.useContext=function(K){return P.H.useContext(K)},$a.useDebugValue=function(){},$a.useDeferredValue=function(K,ae){return P.H.useDeferredValue(K,ae)},$a.useEffect=function(K,ae){return P.H.useEffect(K,ae)},$a.useEffectEvent=function(K){return P.H.useEffectEvent(K)},$a.useId=function(){return P.H.useId()},$a.useImperativeHandle=function(K,ae,ce){return P.H.useImperativeHandle(K,ae,ce)},$a.useInsertionEffect=function(K,ae){return P.H.useInsertionEffect(K,ae)},$a.useLayoutEffect=function(K,ae){return P.H.useLayoutEffect(K,ae)},$a.useMemo=function(K,ae){return P.H.useMemo(K,ae)},$a.useOptimistic=function(K,ae){return P.H.useOptimistic(K,ae)},$a.useReducer=function(K,ae,ce){return P.H.useReducer(K,ae,ce)},$a.useRef=function(K){return P.H.useRef(K)},$a.useState=function(K){return P.H.useState(K)},$a.useSyncExternalStore=function(K,ae,ce){return P.H.useSyncExternalStore(K,ae,ce)},$a.useTransition=function(){return P.H.useTransition()},$a.version="19.2.3",$a}var KI;function DA(){return KI||(KI=1,TS.exports=cJ()),TS.exports}var F=DA();const or=EA(F),dJ=sJ({__proto__:null,default:or},[F]);var MS={exports:{}},Bm={},ES={exports:{}},DS={};var QI;function uJ(){return QI||(QI=1,(function(a){function e(W,$){var Q=W.length;W.push($);e:for(;0<Q;){var ne=Q-1>>>1,re=W[ne];if(0<n(re,$))W[ne]=$,W[Q]=re,Q=ne;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var $=W[0],Q=W.pop();if(Q!==$){W[0]=Q;e:for(var ne=0,re=W.length,K=re>>>1;ne<K;){var ae=2*(ne+1)-1,ce=W[ae],de=ae+1,he=W[de];if(0>n(ce,Q))de<re&&0>n(he,ce)?(W[ne]=he,W[de]=Q,ne=de):(W[ne]=ce,W[ae]=Q,ne=ae);else if(de<re&&0>n(he,Q))W[ne]=he,W[de]=Q,ne=de;else break e}}return $}function n(W,$){var Q=W.sortIndex-$.sortIndex;return Q!==0?Q:W.id-$.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;a.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();a.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,f=3,p=!1,g=!1,b=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function E(W){for(var $=t(d);$!==null;){if($.callback===null)r(d);else if($.startTime<=W)r(d),$.sortIndex=$.expirationTime,e(c,$);else break;$=t(d)}}function I(W){if(b=!1,E(W),!g)if(t(c)!==null)g=!0,R||(R=!0,te());else{var $=t(d);$!==null&&B(I,$.startTime-W)}}var R=!1,P=-1,H=5,G=-1;function X(){return w?!0:!(a.unstable_now()-G<H)}function U(){if(w=!1,R){var W=a.unstable_now();G=W;var $=!0;try{e:{g=!1,b&&(b=!1,k(P),P=-1),p=!0;var Q=f;try{t:{for(E(W),h=t(c);h!==null&&!(h.expirationTime>W&&X());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,f=h.priorityLevel;var re=ne(h.expirationTime<=W);if(W=a.unstable_now(),typeof re=="function"){h.callback=re,E(W),$=!0;break t}h===t(c)&&r(c),E(W)}else r(c);h=t(c)}if(h!==null)$=!0;else{var K=t(d);K!==null&&B(I,K.startTime-W),$=!1}}break e}finally{h=null,f=Q,p=!1}$=void 0}}finally{$?te():R=!1}}}var te;if(typeof T=="function")te=function(){T(U)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,J=Z.port2;Z.port1.onmessage=U,te=function(){J.postMessage(null)}}else te=function(){j(U,0)};function B(W,$){P=j(function(){W(a.unstable_now())},$)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(W){W.callback=null},a.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<W?Math.floor(1e3/W):5},a.unstable_getCurrentPriorityLevel=function(){return f},a.unstable_next=function(W){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var Q=f;f=$;try{return W()}finally{f=Q}},a.unstable_requestPaint=function(){w=!0},a.unstable_runWithPriority=function(W,$){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Q=f;f=W;try{return $()}finally{f=Q}},a.unstable_scheduleCallback=function(W,$,Q){var ne=a.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ne+Q:ne):Q=ne,W){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Q+re,W={id:u++,callback:$,priorityLevel:W,startTime:Q,expirationTime:re,sortIndex:-1},Q>ne?(W.sortIndex=Q,e(d,W),t(c)===null&&W===t(d)&&(b?(k(P),P=-1):b=!0,B(I,Q-ne))):(W.sortIndex=re,e(c,W),g||p||(g=!0,R||(R=!0,te()))),W},a.unstable_shouldYield=X,a.unstable_wrapCallback=function(W){var $=f;return function(){var Q=f;f=$;try{return W.apply(this,arguments)}finally{f=Q}}}})(DS)),DS}var JI;function hJ(){return JI||(JI=1,ES.exports=uJ()),ES.exports}var IS={exports:{}},ts={};var e8;function fJ(){if(e8)return ts;e8=1;var a=DA();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)d+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},n=Symbol.for("react.portal");function i(c,d,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:h==null?null:""+h,children:c,containerInfo:d,implementation:u}}var l=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ts.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ts.createPortal=function(c,d){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return i(c,d,null,u)},ts.flushSync=function(c){var d=l.T,u=r.p;try{if(l.T=null,r.p=2,c)return c()}finally{l.T=d,r.p=u,r.d.f()}},ts.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(c,d))},ts.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},ts.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var u=d.as,h=o(u,d.crossOrigin),f=typeof d.integrity=="string"?d.integrity:void 0,p=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;u==="style"?r.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:h,integrity:f,fetchPriority:p}):u==="script"&&r.d.X(c,{crossOrigin:h,integrity:f,fetchPriority:p,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ts.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var u=o(d.as,d.crossOrigin);r.d.M(c,{crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(c)},ts.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var u=d.as,h=o(u,d.crossOrigin);r.d.L(c,u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ts.preloadModule=function(c,d){if(typeof c=="string")if(d){var u=o(d.as,d.crossOrigin);r.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(c)},ts.requestFormReset=function(c){r.d.r(c)},ts.unstable_batchedUpdates=function(c,d){return c(d)},ts.useFormState=function(c,d,u){return l.H.useFormState(c,d,u)},ts.useFormStatus=function(){return l.H.useHostTransitionStatus()},ts.version="19.2.3",ts}var t8;function WV(){if(t8)return IS.exports;t8=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),IS.exports=fJ(),IS.exports}var a8;function pJ(){if(a8)return Bm;a8=1;var a=hJ(),e=DA(),t=WV();function r(x){var v="https://react.dev/errors/"+x;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)v+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+x+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(x){return!(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)}function i(x){var v=x,S=x;if(x.alternate)for(;v.return;)v=v.return;else{x=v;do v=x,(v.flags&4098)!==0&&(S=v.return),x=v.return;while(x)}return v.tag===3?S:null}function l(x){if(x.tag===13){var v=x.memoizedState;if(v===null&&(x=x.alternate,x!==null&&(v=x.memoizedState)),v!==null)return v.dehydrated}return null}function o(x){if(x.tag===31){var v=x.memoizedState;if(v===null&&(x=x.alternate,x!==null&&(v=x.memoizedState)),v!==null)return v.dehydrated}return null}function c(x){if(i(x)!==x)throw Error(r(188))}function d(x){var v=x.alternate;if(!v){if(v=i(x),v===null)throw Error(r(188));return v!==x?null:x}for(var S=x,D=v;;){var V=S.return;if(V===null)break;var q=V.alternate;if(q===null){if(D=V.return,D!==null){S=D;continue}break}if(V.child===q.child){for(q=V.child;q;){if(q===S)return c(V),x;if(q===D)return c(V),v;q=q.sibling}throw Error(r(188))}if(S.return!==D.return)S=V,D=q;else{for(var le=!1,xe=V.child;xe;){if(xe===S){le=!0,S=V,D=q;break}if(xe===D){le=!0,D=V,S=q;break}xe=xe.sibling}if(!le){for(xe=q.child;xe;){if(xe===S){le=!0,S=q,D=V;break}if(xe===D){le=!0,D=q,S=V;break}xe=xe.sibling}if(!le)throw Error(r(189))}}if(S.alternate!==D)throw Error(r(190))}if(S.tag!==3)throw Error(r(188));return S.stateNode.current===S?x:v}function u(x){var v=x.tag;if(v===5||v===26||v===27||v===6)return x;for(x=x.child;x!==null;){if(v=u(x),v!==null)return v;x=x.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),T=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),X=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function te(x){return x===null||typeof x!="object"?null:(x=U&&x[U]||x["@@iterator"],typeof x=="function"?x:null)}var Z=Symbol.for("react.client.reference");function J(x){if(x==null)return null;if(typeof x=="function")return x.$$typeof===Z?null:x.displayName||x.name||null;if(typeof x=="string")return x;switch(x){case b:return"Fragment";case j:return"Profiler";case w:return"StrictMode";case I:return"Suspense";case R:return"SuspenseList";case G:return"Activity"}if(typeof x=="object")switch(x.$$typeof){case g:return"Portal";case T:return x.displayName||"Context";case k:return(x._context.displayName||"Context")+".Consumer";case E:var v=x.render;return x=x.displayName,x||(x=v.displayName||v.name||"",x=x!==""?"ForwardRef("+x+")":"ForwardRef"),x;case P:return v=x.displayName||null,v!==null?v:J(x.type)||"Memo";case H:v=x._payload,x=x._init;try{return J(x(v))}catch{}}return null}var B=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},ne=[],re=-1;function K(x){return{current:x}}function ae(x){0>re||(x.current=ne[re],ne[re]=null,re--)}function ce(x,v){re++,ne[re]=x.current,x.current=v}var de=K(null),he=K(null),pe=K(null),Re=K(null);function Te(x,v){switch(ce(pe,v),ce(he,x),ce(de,null),v.nodeType){case 9:case 11:x=(x=v.documentElement)&&(x=x.namespaceURI)?gI(x):0;break;default:if(x=v.tagName,v=v.namespaceURI)v=gI(v),x=vI(v,x);else switch(x){case"svg":x=1;break;case"math":x=2;break;default:x=0}}ae(de),ce(de,x)}function ke(){ae(de),ae(he),ae(pe)}function Le(x){x.memoizedState!==null&&ce(Re,x);var v=de.current,S=vI(v,x.type);v!==S&&(ce(he,x),ce(de,S))}function Ne(x){he.current===x&&(ae(de),ae(he)),Re.current===x&&(ae(Re),Rm._currentValue=Q)}var _e,Oe;function De(x){if(_e===void 0)try{throw Error()}catch(S){var v=S.stack.trim().match(/\n( *(at )?)/);_e=v&&v[1]||"",Oe=-1<S.stack.indexOf(`
    at`)?" (<anonymous>)":-1<S.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_e+x+Oe}var Ge=!1;function Ee(x,v){if(!x||Ge)return"";Ge=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var D={DetermineComponentFrameRoot:function(){try{if(v){var bt=function(){throw Error()};if(Object.defineProperty(bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(bt,[])}catch(ot){var at=ot}Reflect.construct(x,[],bt)}else{try{bt.call()}catch(ot){at=ot}x.call(bt.prototype)}}else{try{throw Error()}catch(ot){at=ot}(bt=x())&&typeof bt.catch=="function"&&bt.catch(function(){})}}catch(ot){if(ot&&at&&typeof ot.stack=="string")return[ot.stack,at.stack]}return[null,null]}};D.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var V=Object.getOwnPropertyDescriptor(D.DetermineComponentFrameRoot,"name");V&&V.configurable&&Object.defineProperty(D.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var q=D.DetermineComponentFrameRoot(),le=q[0],xe=q[1];if(le&&xe){var Me=le.split(`
`),Je=xe.split(`
`);for(V=D=0;D<Me.length&&!Me[D].includes("DetermineComponentFrameRoot");)D++;for(;V<Je.length&&!Je[V].includes("DetermineComponentFrameRoot");)V++;if(D===Me.length||V===Je.length)for(D=Me.length-1,V=Je.length-1;1<=D&&0<=V&&Me[D]!==Je[V];)V--;for(;1<=D&&0<=V;D--,V--)if(Me[D]!==Je[V]){if(D!==1||V!==1)do if(D--,V--,0>V||Me[D]!==Je[V]){var ft=`
`+Me[D].replace(" at new "," at ");return x.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",x.displayName)),ft}while(1<=D&&0<=V);break}}}finally{Ge=!1,Error.prepareStackTrace=S}return(S=x?x.displayName||x.name:"")?De(S):""}function rt(x,v){switch(x.tag){case 26:case 27:case 5:return De(x.type);case 16:return De("Lazy");case 13:return x.child!==v&&v!==null?De("Suspense Fallback"):De("Suspense");case 19:return De("SuspenseList");case 0:case 15:return Ee(x.type,!1);case 11:return Ee(x.type.render,!1);case 1:return Ee(x.type,!0);case 31:return De("Activity");default:return""}}function dt(x){try{var v="",S=null;do v+=rt(x,S),S=x,x=x.return;while(x);return v}catch(D){return`
Error generating stack: `+D.message+`
`+D.stack}}var wt=Object.prototype.hasOwnProperty,vt=a.unstable_scheduleCallback,$e=a.unstable_cancelCallback,na=a.unstable_shouldYield,xt=a.unstable_requestPaint,Bt=a.unstable_now,_a=a.unstable_getCurrentPriorityLevel,Nt=a.unstable_ImmediatePriority,La=a.unstable_UserBlockingPriority,oa=a.unstable_NormalPriority,Sa=a.unstable_LowPriority,zt=a.unstable_IdlePriority,je=a.log,He=a.unstable_setDisableYieldValue,it=null,Ye=null;function Ot(x){if(typeof je=="function"&&He(x),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(it,x)}catch{}}var st=Math.clz32?Math.clz32:xs,Jt=Math.log,Ar=Math.LN2;function xs(x){return x>>>=0,x===0?32:31-(Jt(x)/Ar|0)|0}var Lt=256,Xa=262144,xi=4194304;function Zi(x){var v=x&42;if(v!==0)return v;switch(x&-x){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return x&261888;case 262144:case 524288:case 1048576:case 2097152:return x&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return x&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return x}}function Js(x,v,S){var D=x.pendingLanes;if(D===0)return 0;var V=0,q=x.suspendedLanes,le=x.pingedLanes;x=x.warmLanes;var xe=D&134217727;return xe!==0?(D=xe&~q,D!==0?V=Zi(D):(le&=xe,le!==0?V=Zi(le):S||(S=xe&~x,S!==0&&(V=Zi(S))))):(xe=D&~q,xe!==0?V=Zi(xe):le!==0?V=Zi(le):S||(S=D&~x,S!==0&&(V=Zi(S)))),V===0?0:v!==0&&v!==V&&(v&q)===0&&(q=V&-V,S=v&-v,q>=S||q===32&&(S&4194048)!==0)?v:V}function Nn(x,v){return(x.pendingLanes&~(x.suspendedLanes&~x.pingedLanes)&v)===0}function Vo(x,v){switch(x){case 1:case 2:case 4:case 8:case 64:return v+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dn(){var x=xi;return xi<<=1,(xi&62914560)===0&&(xi=4194304),x}function Cn(x){for(var v=[],S=0;31>S;S++)v.push(x);return v}function ti(x,v){x.pendingLanes|=v,v!==268435456&&(x.suspendedLanes=0,x.pingedLanes=0,x.warmLanes=0)}function Si(x,v,S,D,V,q){var le=x.pendingLanes;x.pendingLanes=S,x.suspendedLanes=0,x.pingedLanes=0,x.warmLanes=0,x.expiredLanes&=S,x.entangledLanes&=S,x.errorRecoveryDisabledLanes&=S,x.shellSuspendCounter=0;var xe=x.entanglements,Me=x.expirationTimes,Je=x.hiddenUpdates;for(S=le&~S;0<S;){var ft=31-st(S),bt=1<<ft;xe[ft]=0,Me[ft]=-1;var at=Je[ft];if(at!==null)for(Je[ft]=null,ft=0;ft<at.length;ft++){var ot=at[ft];ot!==null&&(ot.lane&=-536870913)}S&=~bt}D!==0&&uo(x,D,0),q!==0&&V===0&&x.tag!==0&&(x.suspendedLanes|=q&~(le&~v))}function uo(x,v,S){x.pendingLanes|=v,x.suspendedLanes&=~v;var D=31-st(v);x.entangledLanes|=v,x.entanglements[D]=x.entanglements[D]|1073741824|S&261930}function Se(x,v){var S=x.entangledLanes|=v;for(x=x.entanglements;S;){var D=31-st(S),V=1<<D;V&v|x[D]&v&&(x[D]|=v),S&=~V}}function ze(x,v){var S=v&-v;return S=(S&42)!==0?1:Ze(S),(S&(x.suspendedLanes|v))!==0?0:S}function Ze(x){switch(x){case 2:x=1;break;case 8:x=4;break;case 32:x=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:x=128;break;case 268435456:x=134217728;break;default:x=0}return x}function yt(x){return x&=-x,2<x?8<x?(x&134217727)!==0?32:268435456:8:2}function St(){var x=$.p;return x!==0?x:(x=window.event,x===void 0?32:VI(x.type))}function ut(x,v){var S=$.p;try{return $.p=x,v()}finally{$.p=S}}var Ft=Math.random().toString(36).slice(2),It="__reactFiber$"+Ft,Et="__reactProps$"+Ft,Gt="__reactContainer$"+Ft,ua="__reactEvents$"+Ft,da="__reactListeners$"+Ft,Aa="__reactHandles$"+Ft,ir="__reactResources$"+Ft,jr="__reactMarker$"+Ft;function mr(x){delete x[It],delete x[Et],delete x[ua],delete x[da],delete x[Aa]}function Qa(x){var v=x[It];if(v)return v;for(var S=x.parentNode;S;){if(v=S[Gt]||S[It]){if(S=v.alternate,v.child!==null||S!==null&&S.child!==null)for(x=SI(x);x!==null;){if(S=x[It])return S;x=SI(x)}return v}x=S,S=x.parentNode}return null}function Vt(x){if(x=x[It]||x[Gt]){var v=x.tag;if(v===5||v===6||v===13||v===31||v===26||v===27||v===3)return x}return null}function Hr(x){var v=x.tag;if(v===5||v===26||v===27||v===6)return x.stateNode;throw Error(r(33))}function Sr(x){var v=x[ir];return v||(v=x[ir]={hoistableStyles:new Map,hoistableScripts:new Map}),v}function Ir(x){x[jr]=!0}var pt=new Set,ai={};function lr(x,v){jn(x,v),jn(x+"Capture",v)}function jn(x,v){for(ai[x]=v,x=0;x<v.length;x++)pt.add(v[x])}var mi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ar={},Ga={};function qt(x){return wt.call(Ga,x)?!0:wt.call(ar,x)?!1:mi.test(x)?Ga[x]=!0:(ar[x]=!0,!1)}function pa(x,v,S){if(qt(v))if(S===null)x.removeAttribute(v);else{switch(typeof S){case"undefined":case"function":case"symbol":x.removeAttribute(v);return;case"boolean":var D=v.toLowerCase().slice(0,5);if(D!=="data-"&&D!=="aria-"){x.removeAttribute(v);return}}x.setAttribute(v,""+S)}}function ki(x,v,S){if(S===null)x.removeAttribute(v);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":x.removeAttribute(v);return}x.setAttribute(v,""+S)}}function gn(x,v,S,D){if(D===null)x.removeAttribute(S);else{switch(typeof D){case"undefined":case"function":case"symbol":case"boolean":x.removeAttribute(S);return}x.setAttributeNS(v,S,""+D)}}function ma(x){switch(typeof x){case"bigint":case"boolean":case"number":case"string":case"undefined":return x;case"object":return x;default:return""}}function An(x){var v=x.type;return(x=x.nodeName)&&x.toLowerCase()==="input"&&(v==="checkbox"||v==="radio")}function Fc(x,v,S){var D=Object.getOwnPropertyDescriptor(x.constructor.prototype,v);if(!x.hasOwnProperty(v)&&typeof D<"u"&&typeof D.get=="function"&&typeof D.set=="function"){var V=D.get,q=D.set;return Object.defineProperty(x,v,{configurable:!0,get:function(){return V.call(this)},set:function(le){S=""+le,q.call(this,le)}}),Object.defineProperty(x,v,{enumerable:D.enumerable}),{getValue:function(){return S},setValue:function(le){S=""+le},stopTracking:function(){x._valueTracker=null,delete x[v]}}}}function Pr(x){if(!x._valueTracker){var v=An(x)?"checked":"value";x._valueTracker=Fc(x,v,""+x[v])}}function Ds(x){if(!x)return!1;var v=x._valueTracker;if(!v)return!0;var S=v.getValue(),D="";return x&&(D=An(x)?x.checked?"true":"false":x.value),x=D,x!==S?(v.setValue(x),!0):!1}function kr(x){if(x=x||(typeof document<"u"?document:void 0),typeof x>"u")return null;try{return x.activeElement||x.body}catch{return x.body}}var Is=/[\n"\\]/g;function Va(x){return x.replace(Is,function(v){return"\\"+v.charCodeAt(0).toString(16)+" "})}function rn(x,v,S,D,V,q,le,xe){x.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?x.type=le:x.removeAttribute("type"),v!=null?le==="number"?(v===0&&x.value===""||x.value!=v)&&(x.value=""+ma(v)):x.value!==""+ma(v)&&(x.value=""+ma(v)):le!=="submit"&&le!=="reset"||x.removeAttribute("value"),v!=null?ye(x,le,ma(v)):S!=null?ye(x,le,ma(S)):D!=null&&x.removeAttribute("value"),V==null&&q!=null&&(x.defaultChecked=!!q),V!=null&&(x.checked=V&&typeof V!="function"&&typeof V!="symbol"),xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"?x.name=""+ma(xe):x.removeAttribute("name")}function qe(x,v,S,D,V,q,le,xe){if(q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(x.type=q),v!=null||S!=null){if(!(q!=="submit"&&q!=="reset"||v!=null)){Pr(x);return}S=S!=null?""+ma(S):"",v=v!=null?""+ma(v):S,xe||v===x.value||(x.value=v),x.defaultValue=v}D=D??V,D=typeof D!="function"&&typeof D!="symbol"&&!!D,x.checked=xe?x.checked:!!D,x.defaultChecked=!!D,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(x.name=le),Pr(x)}function ye(x,v,S){v==="number"&&kr(x.ownerDocument)===x||x.defaultValue===""+S||(x.defaultValue=""+S)}function ia(x,v,S,D){if(x=x.options,v){v={};for(var V=0;V<S.length;V++)v["$"+S[V]]=!0;for(S=0;S<x.length;S++)V=v.hasOwnProperty("$"+x[S].value),x[S].selected!==V&&(x[S].selected=V),V&&D&&(x[S].defaultSelected=!0)}else{for(S=""+ma(S),v=null,V=0;V<x.length;V++){if(x[V].value===S){x[V].selected=!0,D&&(x[V].defaultSelected=!0);return}v!==null||x[V].disabled||(v=x[V])}v!==null&&(v.selected=!0)}}function vn(x,v,S){if(v!=null&&(v=""+ma(v),v!==x.value&&(x.value=v),S==null)){x.defaultValue!==v&&(x.defaultValue=v);return}x.defaultValue=S!=null?""+ma(S):""}function ri(x,v,S,D){if(v==null){if(D!=null){if(S!=null)throw Error(r(92));if(B(D)){if(1<D.length)throw Error(r(93));D=D[0]}S=D}S==null&&(S=""),v=S}S=ma(v),x.defaultValue=S,D=x.textContent,D===S&&D!==""&&D!==null&&(x.value=D),Pr(x)}function ho(x,v){if(v){var S=x.firstChild;if(S&&S===x.lastChild&&S.nodeType===3){S.nodeValue=v;return}}x.textContent=v}var Rh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Oa(x,v,S){var D=v.indexOf("--")===0;S==null||typeof S=="boolean"||S===""?D?x.setProperty(v,""):v==="float"?x.cssFloat="":x[v]="":D?x.setProperty(v,S):typeof S!="number"||S===0||Rh.has(v)?v==="float"?x.cssFloat=S:x[v]=(""+S).trim():x[v]=S+"px"}function ga(x,v,S){if(v!=null&&typeof v!="object")throw Error(r(62));if(x=x.style,S!=null){for(var D in S)!S.hasOwnProperty(D)||v!=null&&v.hasOwnProperty(D)||(D.indexOf("--")===0?x.setProperty(D,""):D==="float"?x.cssFloat="":x[D]="");for(var V in v)D=v[V],v.hasOwnProperty(V)&&S[V]!==D&&Oa(x,V,D)}else for(var q in v)v.hasOwnProperty(q)&&Oa(x,q,v[q])}function Ur(x){if(x.indexOf("-")===-1)return!1;switch(x){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var H0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ms(x){return zi.test(""+x)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":x}function gi(){}var Ki=null;function qd(x){return x=x.target||x.srcElement||window,x.correspondingUseElement&&(x=x.correspondingUseElement),x.nodeType===3?x.parentNode:x}var Xr=null,Rr=null;function Tn(x){var v=Vt(x);if(v&&(x=v.stateNode)){var S=x[Et]||null;e:switch(x=v.stateNode,v.type){case"input":if(rn(x,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name),v=S.name,S.type==="radio"&&v!=null){for(S=x;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll('input[name="'+Va(""+v)+'"][type="radio"]'),v=0;v<S.length;v++){var D=S[v];if(D!==x&&D.form===x.form){var V=D[Et]||null;if(!V)throw Error(r(90));rn(D,V.value,V.defaultValue,V.defaultValue,V.checked,V.defaultChecked,V.type,V.name)}}for(v=0;v<S.length;v++)D=S[v],D.form===x.form&&Ds(D)}break e;case"textarea":vn(x,S.value,S.defaultValue);break e;case"select":v=S.value,v!=null&&ia(x,!!S.multiple,v,!1)}}}var va=!1;function Ho(x,v,S){if(va)return x(v,S);va=!0;try{var D=x(v);return D}finally{if(va=!1,(Xr!==null||Rr!==null)&&(_1(),Xr&&(v=Xr,x=Rr,Rr=Xr=null,Tn(v),x)))for(v=0;v<x.length;v++)Tn(x[v])}}function Da(x,v){var S=x.stateNode;if(S===null)return null;var D=S[Et]||null;if(D===null)return null;S=D[v];e:switch(v){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(D=!D.disabled)||(x=x.type,D=!(x==="button"||x==="input"||x==="select"||x==="textarea")),x=!D;break e;default:x=!1}if(x)return null;if(S&&typeof S!="function")throw Error(r(231,v,typeof S));return S}var gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lh=!1;if(gr)try{var ni={};Object.defineProperty(ni,"passive",{get:function(){Lh=!0}}),window.addEventListener("test",ni,ni),window.removeEventListener("test",ni,ni)}catch{Lh=!1}var gs=null,Rs=null,Uo=null;function Ls(){if(Uo)return Uo;var x,v=Rs,S=v.length,D,V="value"in gs?gs.value:gs.textContent,q=V.length;for(x=0;x<S&&v[x]===V[x];x++);var le=S-x;for(D=1;D<=le&&v[S-D]===V[q-D];D++);return Uo=V.slice(x,1<D?1-D:void 0)}function Os(x){var v=x.keyCode;return"charCode"in x?(x=x.charCode,x===0&&v===13&&(x=13)):x=v,x===10&&(x=13),32<=x||x===13?x:0}function el(){return!0}function Oh(){return!1}function un(x){function v(S,D,V,q,le){this._reactName=S,this._targetInst=V,this.type=D,this.nativeEvent=q,this.target=le,this.currentTarget=null;for(var xe in x)x.hasOwnProperty(xe)&&(S=x[xe],this[xe]=S?S(q):q[xe]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?el:Oh,this.isPropagationStopped=Oh,this}return h(v.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=el)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=el)},persist:function(){},isPersistent:el}),v}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(x){return x.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vn=un(vs),tl=h({},vs,{view:0,detail:0}),Vc=un(tl),Go,Ph,Hc,Xd=h({},tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rl,button:0,buttons:0,relatedTarget:function(x){return x.relatedTarget===void 0?x.fromElement===x.srcElement?x.toElement:x.fromElement:x.relatedTarget},movementX:function(x){return"movementX"in x?x.movementX:(x!==Hc&&(Hc&&x.type==="mousemove"?(Go=x.screenX-Hc.screenX,Ph=x.screenY-Hc.screenY):Ph=Go=0,Hc=x),Go)},movementY:function(x){return"movementY"in x?x.movementY:Ph}}),wr=un(Xd),Zd=h({},Xd,{dataTransfer:0}),Uc=un(Zd),bs=h({},tl,{relatedTarget:0}),Wo=un(bs),nt=h({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),Wa=un(nt),Hn=h({},vs,{clipboardData:function(x){return"clipboardData"in x?x.clipboardData:window.clipboardData}}),al=un(Hn),Kd=h({},vs,{data:0}),Qd=un(Kd),zh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nn(x){var v=this.nativeEvent;return v.getModifierState?v.getModifierState(x):(x=Mn[x])?!!v[x]:!1}function rl(){return nn}var sn=h({},tl,{key:function(x){if(x.key){var v=zh[x.key]||x.key;if(v!=="Unidentified")return v}return x.type==="keypress"?(x=Os(x),x===13?"Enter":String.fromCharCode(x)):x.type==="keydown"||x.type==="keyup"?Bh[x.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rl,charCode:function(x){return x.type==="keypress"?Os(x):0},keyCode:function(x){return x.type==="keydown"||x.type==="keyup"?x.keyCode:0},which:function(x){return x.type==="keypress"?Os(x):x.type==="keydown"||x.type==="keyup"?x.keyCode:0}}),fo=un(sn),El=h({},Xd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cr=un(El),ba=h({},tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rl}),Fh=un(ba),_r=h({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),nl=un(_r),Dl=h({},Xd,{deltaX:function(x){return"deltaX"in x?x.deltaX:"wheelDeltaX"in x?-x.wheelDeltaX:0},deltaY:function(x){return"deltaY"in x?x.deltaY:"wheelDeltaY"in x?-x.wheelDeltaY:"wheelDelta"in x?-x.wheelDelta:0},deltaZ:0,deltaMode:0}),Jd=un(Dl),Qi=h({},vs,{newState:0,oldState:0}),eu=un(Qi),U0=[9,13,27,32],po=gr&&"CompositionEvent"in window,il=null;gr&&"documentMode"in document&&(il=document.documentMode);var G0=gr&&"TextEvent"in window&&!il,tu=gr&&(!po||il&&8<il&&11>=il),sl=" ",au=!1;function Vh(x,v){switch(x){case"keyup":return U0.indexOf(v.keyCode)!==-1;case"keydown":return v.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yo(x){return x=x.detail,typeof x=="object"&&"data"in x?x.data:null}var xo=!1;function ll(x,v){switch(x){case"compositionend":return Yo(v);case"keypress":return v.which!==32?null:(au=!0,sl);case"textInput":return x=v.data,x===sl&&au?null:x;default:return null}}function ru(x,v){if(xo)return x==="compositionend"||!po&&Vh(x,v)?(x=Ls(),Uo=Rs=gs=null,xo=!1,x):null;switch(x){case"paste":return null;case"keypress":if(!(v.ctrlKey||v.altKey||v.metaKey)||v.ctrlKey&&v.altKey){if(v.char&&1<v.char.length)return v.char;if(v.which)return String.fromCharCode(v.which)}return null;case"compositionend":return tu&&v.locale!=="ko"?null:v.data;default:return null}}var Bi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gc(x){var v=x&&x.nodeName&&x.nodeName.toLowerCase();return v==="input"?!!Bi[x.type]:v==="textarea"}function Ji(x,v,S,D){Xr?Rr?Rr.push(D):Rr=[D]:Xr=D,v=T1(v,"onChange"),0<v.length&&(S=new Vn("onChange","change",null,S,D),x.push({event:S,listeners:v}))}var $o=null,mo=null;function im(x){uI(x,0)}function Wc(x){var v=Hr(x);if(Ds(v))return x}function Ci(x,v){if(x==="change")return v}var Ps=!1;if(gr){var Gr;if(gr){var zs="oninput"in document;if(!zs){var Za=document.createElement("div");Za.setAttribute("oninput","return;"),zs=typeof Za.oninput=="function"}Gr=zs}else Gr=!1;Ps=Gr&&(!document.documentMode||9<document.documentMode)}function Yc(){$o&&($o.detachEvent("onpropertychange",ue),mo=$o=null)}function ue(x){if(x.propertyName==="value"&&Wc(mo)){var v=[];Ji(v,mo,x,qd(x)),Ho(im,v)}}function m(x,v,S){x==="focusin"?(Yc(),$o=v,mo=S,$o.attachEvent("onpropertychange",ue)):x==="focusout"&&Yc()}function y(x){if(x==="selectionchange"||x==="keyup"||x==="keydown")return Wc(mo)}function N(x,v){if(x==="click")return Wc(v)}function C(x,v){if(x==="input"||x==="change")return Wc(v)}function M(x,v){return x===v&&(x!==0||1/x===1/v)||x!==x&&v!==v}var L=typeof Object.is=="function"?Object.is:M;function _(x,v){if(L(x,v))return!0;if(typeof x!="object"||x===null||typeof v!="object"||v===null)return!1;var S=Object.keys(x),D=Object.keys(v);if(S.length!==D.length)return!1;for(D=0;D<S.length;D++){var V=S[D];if(!wt.call(v,V)||!L(x[V],v[V]))return!1}return!0}function A(x){for(;x&&x.firstChild;)x=x.firstChild;return x}function O(x,v){var S=A(x);x=0;for(var D;S;){if(S.nodeType===3){if(D=x+S.textContent.length,x<=v&&D>=v)return{node:S,offset:v-x};x=D}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=A(S)}}function z(x,v){return x&&v?x===v?!0:x&&x.nodeType===3?!1:v&&v.nodeType===3?z(x,v.parentNode):"contains"in x?x.contains(v):x.compareDocumentPosition?!!(x.compareDocumentPosition(v)&16):!1:!1}function Y(x){x=x!=null&&x.ownerDocument!=null&&x.ownerDocument.defaultView!=null?x.ownerDocument.defaultView:window;for(var v=kr(x.document);v instanceof x.HTMLIFrameElement;){try{var S=typeof v.contentWindow.location.href=="string"}catch{S=!1}if(S)x=v.contentWindow;else break;v=kr(x.document)}return v}function ee(x){var v=x&&x.nodeName&&x.nodeName.toLowerCase();return v&&(v==="input"&&(x.type==="text"||x.type==="search"||x.type==="tel"||x.type==="url"||x.type==="password")||v==="textarea"||x.contentEditable==="true")}var ie=gr&&"documentMode"in document&&11>=document.documentMode,oe=null,fe=null,ge=null,me=!1;function ve(x,v,S){var D=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;me||oe==null||oe!==kr(D)||(D=oe,"selectionStart"in D&&ee(D)?D={start:D.selectionStart,end:D.selectionEnd}:(D=(D.ownerDocument&&D.ownerDocument.defaultView||window).getSelection(),D={anchorNode:D.anchorNode,anchorOffset:D.anchorOffset,focusNode:D.focusNode,focusOffset:D.focusOffset}),ge&&_(ge,D)||(ge=D,D=T1(fe,"onSelect"),0<D.length&&(v=new Vn("onSelect","select",null,v,S),x.push({event:v,listeners:D}),v.target=oe)))}function we(x,v){var S={};return S[x.toLowerCase()]=v.toLowerCase(),S["Webkit"+x]="webkit"+v,S["Moz"+x]="moz"+v,S}var be={animationend:we("Animation","AnimationEnd"),animationiteration:we("Animation","AnimationIteration"),animationstart:we("Animation","AnimationStart"),transitionrun:we("Transition","TransitionRun"),transitionstart:we("Transition","TransitionStart"),transitioncancel:we("Transition","TransitionCancel"),transitionend:we("Transition","TransitionEnd")},Ae={},Ce={};gr&&(Ce=document.createElement("div").style,"AnimationEvent"in window||(delete be.animationend.animation,delete be.animationiteration.animation,delete be.animationstart.animation),"TransitionEvent"in window||delete be.transitionend.transition);function Ue(x){if(Ae[x])return Ae[x];if(!be[x])return x;var v=be[x],S;for(S in v)if(v.hasOwnProperty(S)&&S in Ce)return Ae[x]=v[S];return x}var Xe=Ue("animationend"),Ve=Ue("animationiteration"),tt=Ue("animationstart"),mt=Ue("transitionrun"),Mt=Ue("transitionstart"),Dt=Ue("transitioncancel"),_t=Ue("transitionend"),Zt=new Map,Ut="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ut.push("scrollEnd");function Ct(x,v){Zt.set(x,v),lr(v,[x])}var ea=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var v=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(v))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},Pa=[],sr=0,Na=0;function Ya(){for(var x=sr,v=Na=sr=0;v<x;){var S=Pa[v];Pa[v++]=null;var D=Pa[v];Pa[v++]=null;var V=Pa[v];Pa[v++]=null;var q=Pa[v];if(Pa[v++]=null,D!==null&&V!==null){var le=D.pending;le===null?V.next=V:(V.next=le.next,le.next=V),D.pending=V}q!==0&&qo(S,V,q)}}function Zr(x,v,S,D){Pa[sr++]=x,Pa[sr++]=v,Pa[sr++]=S,Pa[sr++]=D,Na|=D,x.lanes|=D,x=x.alternate,x!==null&&(x.lanes|=D)}function es(x,v,S,D){return Zr(x,v,S,D),nu(x)}function zr(x,v){return Zr(x,null,null,v),nu(x)}function qo(x,v,S){x.lanes|=S;var D=x.alternate;D!==null&&(D.lanes|=S);for(var V=!1,q=x.return;q!==null;)q.childLanes|=S,D=q.alternate,D!==null&&(D.childLanes|=S),q.tag===22&&(x=q.stateNode,x===null||x._visibility&1||(V=!0)),x=q,q=q.return;return x.tag===3?(q=x.stateNode,V&&v!==null&&(V=31-st(S),x=q.hiddenUpdates,D=x[V],D===null?x[V]=[v]:D.push(v),v.lane=S|536870912),q):null}function nu(x){if(50<Cm)throw Cm=0,Qj=null,Error(r(185));for(var v=x.return;v!==null;)x=v,v=x.return;return x.tag===3?x.stateNode:null}var W0={};function UK(x,v,S,D){this.tag=x,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ol(x,v,S,D){return new UK(x,v,S,D)}function GN(x){return x=x.prototype,!(!x||!x.isReactComponent)}function $c(x,v){var S=x.alternate;return S===null?(S=ol(x.tag,v,x.key,x.mode),S.elementType=x.elementType,S.type=x.type,S.stateNode=x.stateNode,S.alternate=x,x.alternate=S):(S.pendingProps=v,S.type=x.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=x.flags&65011712,S.childLanes=x.childLanes,S.lanes=x.lanes,S.child=x.child,S.memoizedProps=x.memoizedProps,S.memoizedState=x.memoizedState,S.updateQueue=x.updateQueue,v=x.dependencies,S.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},S.sibling=x.sibling,S.index=x.index,S.ref=x.ref,S.refCleanup=x.refCleanup,S}function $6(x,v){x.flags&=65011714;var S=x.alternate;return S===null?(x.childLanes=0,x.lanes=v,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=S.childLanes,x.lanes=S.lanes,x.child=S.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=S.memoizedProps,x.memoizedState=S.memoizedState,x.updateQueue=S.updateQueue,x.type=S.type,v=S.dependencies,x.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),x}function Yb(x,v,S,D,V,q){var le=0;if(D=x,typeof x=="function")GN(x)&&(le=1);else if(typeof x=="string")le=qQ(x,S,de.current)?26:x==="html"||x==="head"||x==="body"?27:5;else e:switch(x){case G:return x=ol(31,S,v,V),x.elementType=G,x.lanes=q,x;case b:return Hh(S.children,V,q,v);case w:le=8,V|=24;break;case j:return x=ol(12,S,v,V|2),x.elementType=j,x.lanes=q,x;case I:return x=ol(13,S,v,V),x.elementType=I,x.lanes=q,x;case R:return x=ol(19,S,v,V),x.elementType=R,x.lanes=q,x;default:if(typeof x=="object"&&x!==null)switch(x.$$typeof){case T:le=10;break e;case k:le=9;break e;case E:le=11;break e;case P:le=14;break e;case H:le=16,D=null;break e}le=29,S=Error(r(130,x===null?"null":typeof x,"")),D=null}return v=ol(le,S,v,V),v.elementType=x,v.type=D,v.lanes=q,v}function Hh(x,v,S,D){return x=ol(7,x,D,v),x.lanes=S,x}function WN(x,v,S){return x=ol(6,x,null,v),x.lanes=S,x}function q6(x){var v=ol(18,null,null,0);return v.stateNode=x,v}function YN(x,v,S){return v=ol(4,x.children!==null?x.children:[],x.key,v),v.lanes=S,v.stateNode={containerInfo:x.containerInfo,pendingChildren:null,implementation:x.implementation},v}var X6=new WeakMap;function Il(x,v){if(typeof x=="object"&&x!==null){var S=X6.get(x);return S!==void 0?S:(v={value:x,source:v,stack:dt(v)},X6.set(x,v),v)}return{value:x,source:v,stack:dt(v)}}var Y0=[],$0=0,$b=null,sm=0,Rl=[],Ll=0,iu=null,Xo=1,Zo="";function qc(x,v){Y0[$0++]=sm,Y0[$0++]=$b,$b=x,sm=v}function Z6(x,v,S){Rl[Ll++]=Xo,Rl[Ll++]=Zo,Rl[Ll++]=iu,iu=x;var D=Xo;x=Zo;var V=32-st(D)-1;D&=~(1<<V),S+=1;var q=32-st(v)+V;if(30<q){var le=V-V%5;q=(D&(1<<le)-1).toString(32),D>>=le,V-=le,Xo=1<<32-st(v)+V|S<<V|D,Zo=q+x}else Xo=1<<q|S<<V|D,Zo=x}function $N(x){x.return!==null&&(qc(x,1),Z6(x,1,0))}function qN(x){for(;x===$b;)$b=Y0[--$0],Y0[$0]=null,sm=Y0[--$0],Y0[$0]=null;for(;x===iu;)iu=Rl[--Ll],Rl[Ll]=null,Zo=Rl[--Ll],Rl[Ll]=null,Xo=Rl[--Ll],Rl[Ll]=null}function K6(x,v){Rl[Ll++]=Xo,Rl[Ll++]=Zo,Rl[Ll++]=iu,Xo=v.id,Zo=v.overflow,iu=x}var Fi=null,pn=null,Nr=!1,su=null,Ol=!1,XN=Error(r(519));function lu(x){var v=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw lm(Il(v,x)),XN}function Q6(x){var v=x.stateNode,S=x.type,D=x.memoizedProps;switch(v[It]=x,v[Et]=D,S){case"dialog":ur("cancel",v),ur("close",v);break;case"iframe":case"object":case"embed":ur("load",v);break;case"video":case"audio":for(S=0;S<Tm.length;S++)ur(Tm[S],v);break;case"source":ur("error",v);break;case"img":case"image":case"link":ur("error",v),ur("load",v);break;case"details":ur("toggle",v);break;case"input":ur("invalid",v),qe(v,D.value,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name,!0);break;case"select":ur("invalid",v);break;case"textarea":ur("invalid",v),ri(v,D.value,D.defaultValue,D.children)}S=D.children,typeof S!="string"&&typeof S!="number"&&typeof S!="bigint"||v.textContent===""+S||D.suppressHydrationWarning===!0||xI(v.textContent,S)?(D.popover!=null&&(ur("beforetoggle",v),ur("toggle",v)),D.onScroll!=null&&ur("scroll",v),D.onScrollEnd!=null&&ur("scrollend",v),D.onClick!=null&&(v.onclick=gi),v=!0):v=!1,v||lu(x,!0)}function J6(x){for(Fi=x.return;Fi;)switch(Fi.tag){case 5:case 31:case 13:Ol=!1;return;case 27:case 3:Ol=!0;return;default:Fi=Fi.return}}function q0(x){if(x!==Fi)return!1;if(!Nr)return J6(x),Nr=!0,!1;var v=x.tag,S;if((S=v!==3&&v!==27)&&((S=v===5)&&(S=x.type,S=!(S!=="form"&&S!=="button")||fS(x.type,x.memoizedProps)),S=!S),S&&pn&&lu(x),J6(x),v===13){if(x=x.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));pn=jI(x)}else if(v===31){if(x=x.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));pn=jI(x)}else v===27?(v=pn,wu(x.type)?(x=vS,vS=null,pn=x):pn=v):pn=Fi?zl(x.stateNode.nextSibling):null;return!0}function Uh(){pn=Fi=null,Nr=!1}function ZN(){var x=su;return x!==null&&(Hs===null?Hs=x:Hs.push.apply(Hs,x),su=null),x}function lm(x){su===null?su=[x]:su.push(x)}var KN=K(null),Gh=null,Xc=null;function ou(x,v,S){ce(KN,v._currentValue),v._currentValue=S}function Zc(x){x._currentValue=KN.current,ae(KN)}function QN(x,v,S){for(;x!==null;){var D=x.alternate;if((x.childLanes&v)!==v?(x.childLanes|=v,D!==null&&(D.childLanes|=v)):D!==null&&(D.childLanes&v)!==v&&(D.childLanes|=v),x===S)break;x=x.return}}function JN(x,v,S,D){var V=x.child;for(V!==null&&(V.return=x);V!==null;){var q=V.dependencies;if(q!==null){var le=V.child;q=q.firstContext;e:for(;q!==null;){var xe=q;q=V;for(var Me=0;Me<v.length;Me++)if(xe.context===v[Me]){q.lanes|=S,xe=q.alternate,xe!==null&&(xe.lanes|=S),QN(q.return,S,x),D||(le=null);break e}q=xe.next}}else if(V.tag===18){if(le=V.return,le===null)throw Error(r(341));le.lanes|=S,q=le.alternate,q!==null&&(q.lanes|=S),QN(le,S,x),le=null}else le=V.child;if(le!==null)le.return=V;else for(le=V;le!==null;){if(le===x){le=null;break}if(V=le.sibling,V!==null){V.return=le.return,le=V;break}le=le.return}V=le}}function X0(x,v,S,D){x=null;for(var V=v,q=!1;V!==null;){if(!q){if((V.flags&524288)!==0)q=!0;else if((V.flags&262144)!==0)break}if(V.tag===10){var le=V.alternate;if(le===null)throw Error(r(387));if(le=le.memoizedProps,le!==null){var xe=V.type;L(V.pendingProps.value,le.value)||(x!==null?x.push(xe):x=[xe])}}else if(V===Re.current){if(le=V.alternate,le===null)throw Error(r(387));le.memoizedState.memoizedState!==V.memoizedState.memoizedState&&(x!==null?x.push(Rm):x=[Rm])}V=V.return}x!==null&&JN(v,x,S,D),v.flags|=262144}function qb(x){for(x=x.firstContext;x!==null;){if(!L(x.context._currentValue,x.memoizedValue))return!0;x=x.next}return!1}function Wh(x){Gh=x,Xc=null,x=x.dependencies,x!==null&&(x.firstContext=null)}function Vi(x){return eE(Gh,x)}function Xb(x,v){return Gh===null&&Wh(x),eE(x,v)}function eE(x,v){var S=v._currentValue;if(v={context:v,memoizedValue:S,next:null},Xc===null){if(x===null)throw Error(r(308));Xc=v,x.dependencies={lanes:0,firstContext:v},x.flags|=524288}else Xc=Xc.next=v;return S}var GK=typeof AbortController<"u"?AbortController:function(){var x=[],v=this.signal={aborted:!1,addEventListener:function(S,D){x.push(D)}};this.abort=function(){v.aborted=!0,x.forEach(function(S){return S()})}},WK=a.unstable_scheduleCallback,YK=a.unstable_NormalPriority,ii={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ej(){return{controller:new GK,data:new Map,refCount:0}}function om(x){x.refCount--,x.refCount===0&&WK(YK,function(){x.controller.abort()})}var cm=null,tj=0,Z0=0,K0=null;function $K(x,v){if(cm===null){var S=cm=[];tj=0,Z0=nS(),K0={status:"pending",value:void 0,then:function(D){S.push(D)}}}return tj++,v.then(tE,tE),v}function tE(){if(--tj===0&&cm!==null){K0!==null&&(K0.status="fulfilled");var x=cm;cm=null,Z0=0,K0=null;for(var v=0;v<x.length;v++)(0,x[v])()}}function qK(x,v){var S=[],D={status:"pending",value:null,reason:null,then:function(V){S.push(V)}};return x.then(function(){D.status="fulfilled",D.value=v;for(var V=0;V<S.length;V++)(0,S[V])(v)},function(V){for(D.status="rejected",D.reason=V,V=0;V<S.length;V++)(0,S[V])(void 0)}),D}var aE=W.S;W.S=function(x,v){BD=Bt(),typeof v=="object"&&v!==null&&typeof v.then=="function"&&$K(x,v),aE!==null&&aE(x,v)};var Yh=K(null);function aj(){var x=Yh.current;return x!==null?x:ln.pooledCache}function Zb(x,v){v===null?ce(Yh,Yh.current):ce(Yh,v.pool)}function rE(){var x=aj();return x===null?null:{parent:ii._currentValue,pool:x}}var Q0=Error(r(460)),rj=Error(r(474)),Kb=Error(r(542)),Qb={then:function(){}};function nE(x){return x=x.status,x==="fulfilled"||x==="rejected"}function iE(x,v,S){switch(S=x[S],S===void 0?x.push(v):S!==v&&(v.then(gi,gi),v=S),v.status){case"fulfilled":return v.value;case"rejected":throw x=v.reason,lE(x),x;default:if(typeof v.status=="string")v.then(gi,gi);else{if(x=ln,x!==null&&100<x.shellSuspendCounter)throw Error(r(482));x=v,x.status="pending",x.then(function(D){if(v.status==="pending"){var V=v;V.status="fulfilled",V.value=D}},function(D){if(v.status==="pending"){var V=v;V.status="rejected",V.reason=D}})}switch(v.status){case"fulfilled":return v.value;case"rejected":throw x=v.reason,lE(x),x}throw qh=v,Q0}}function $h(x){try{var v=x._init;return v(x._payload)}catch(S){throw S!==null&&typeof S=="object"&&typeof S.then=="function"?(qh=S,Q0):S}}var qh=null;function sE(){if(qh===null)throw Error(r(459));var x=qh;return qh=null,x}function lE(x){if(x===Q0||x===Kb)throw Error(r(483))}var J0=null,dm=0;function Jb(x){var v=dm;return dm+=1,J0===null&&(J0=[]),iE(J0,x,v)}function um(x,v){v=v.props.ref,x.ref=v!==void 0?v:null}function e1(x,v){throw v.$$typeof===f?Error(r(525)):(x=Object.prototype.toString.call(v),Error(r(31,x==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":x)))}function oE(x){function v(We,Pe){if(x){var Qe=We.deletions;Qe===null?(We.deletions=[Pe],We.flags|=16):Qe.push(Pe)}}function S(We,Pe){if(!x)return null;for(;Pe!==null;)v(We,Pe),Pe=Pe.sibling;return null}function D(We){for(var Pe=new Map;We!==null;)We.key!==null?Pe.set(We.key,We):Pe.set(We.index,We),We=We.sibling;return Pe}function V(We,Pe){return We=$c(We,Pe),We.index=0,We.sibling=null,We}function q(We,Pe,Qe){return We.index=Qe,x?(Qe=We.alternate,Qe!==null?(Qe=Qe.index,Qe<Pe?(We.flags|=67108866,Pe):Qe):(We.flags|=67108866,Pe)):(We.flags|=1048576,Pe)}function le(We){return x&&We.alternate===null&&(We.flags|=67108866),We}function xe(We,Pe,Qe,gt){return Pe===null||Pe.tag!==6?(Pe=WN(Qe,We.mode,gt),Pe.return=We,Pe):(Pe=V(Pe,Qe),Pe.return=We,Pe)}function Me(We,Pe,Qe,gt){var ka=Qe.type;return ka===b?ft(We,Pe,Qe.props.children,gt,Qe.key):Pe!==null&&(Pe.elementType===ka||typeof ka=="object"&&ka!==null&&ka.$$typeof===H&&$h(ka)===Pe.type)?(Pe=V(Pe,Qe.props),um(Pe,Qe),Pe.return=We,Pe):(Pe=Yb(Qe.type,Qe.key,Qe.props,null,We.mode,gt),um(Pe,Qe),Pe.return=We,Pe)}function Je(We,Pe,Qe,gt){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==Qe.containerInfo||Pe.stateNode.implementation!==Qe.implementation?(Pe=YN(Qe,We.mode,gt),Pe.return=We,Pe):(Pe=V(Pe,Qe.children||[]),Pe.return=We,Pe)}function ft(We,Pe,Qe,gt,ka){return Pe===null||Pe.tag!==7?(Pe=Hh(Qe,We.mode,gt,ka),Pe.return=We,Pe):(Pe=V(Pe,Qe),Pe.return=We,Pe)}function bt(We,Pe,Qe){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Pe=WN(""+Pe,We.mode,Qe),Pe.return=We,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case p:return Qe=Yb(Pe.type,Pe.key,Pe.props,null,We.mode,Qe),um(Qe,Pe),Qe.return=We,Qe;case g:return Pe=YN(Pe,We.mode,Qe),Pe.return=We,Pe;case H:return Pe=$h(Pe),bt(We,Pe,Qe)}if(B(Pe)||te(Pe))return Pe=Hh(Pe,We.mode,Qe,null),Pe.return=We,Pe;if(typeof Pe.then=="function")return bt(We,Jb(Pe),Qe);if(Pe.$$typeof===T)return bt(We,Xb(We,Pe),Qe);e1(We,Pe)}return null}function at(We,Pe,Qe,gt){var ka=Pe!==null?Pe.key:null;if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return ka!==null?null:xe(We,Pe,""+Qe,gt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case p:return Qe.key===ka?Me(We,Pe,Qe,gt):null;case g:return Qe.key===ka?Je(We,Pe,Qe,gt):null;case H:return Qe=$h(Qe),at(We,Pe,Qe,gt)}if(B(Qe)||te(Qe))return ka!==null?null:ft(We,Pe,Qe,gt,null);if(typeof Qe.then=="function")return at(We,Pe,Jb(Qe),gt);if(Qe.$$typeof===T)return at(We,Pe,Xb(We,Qe),gt);e1(We,Qe)}return null}function ot(We,Pe,Qe,gt,ka){if(typeof gt=="string"&&gt!==""||typeof gt=="number"||typeof gt=="bigint")return We=We.get(Qe)||null,xe(Pe,We,""+gt,ka);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case p:return We=We.get(gt.key===null?Qe:gt.key)||null,Me(Pe,We,gt,ka);case g:return We=We.get(gt.key===null?Qe:gt.key)||null,Je(Pe,We,gt,ka);case H:return gt=$h(gt),ot(We,Pe,Qe,gt,ka)}if(B(gt)||te(gt))return We=We.get(Qe)||null,ft(Pe,We,gt,ka,null);if(typeof gt.then=="function")return ot(We,Pe,Qe,Jb(gt),ka);if(gt.$$typeof===T)return ot(We,Pe,Qe,Xb(Pe,gt),ka);e1(Pe,gt)}return null}function ca(We,Pe,Qe,gt){for(var ka=null,Tr=null,xa=Pe,rr=Pe=0,br=null;xa!==null&&rr<Qe.length;rr++){xa.index>rr?(br=xa,xa=null):br=xa.sibling;var Mr=at(We,xa,Qe[rr],gt);if(Mr===null){xa===null&&(xa=br);break}x&&xa&&Mr.alternate===null&&v(We,xa),Pe=q(Mr,Pe,rr),Tr===null?ka=Mr:Tr.sibling=Mr,Tr=Mr,xa=br}if(rr===Qe.length)return S(We,xa),Nr&&qc(We,rr),ka;if(xa===null){for(;rr<Qe.length;rr++)xa=bt(We,Qe[rr],gt),xa!==null&&(Pe=q(xa,Pe,rr),Tr===null?ka=xa:Tr.sibling=xa,Tr=xa);return Nr&&qc(We,rr),ka}for(xa=D(xa);rr<Qe.length;rr++)br=ot(xa,We,rr,Qe[rr],gt),br!==null&&(x&&br.alternate!==null&&xa.delete(br.key===null?rr:br.key),Pe=q(br,Pe,rr),Tr===null?ka=br:Tr.sibling=br,Tr=br);return x&&xa.forEach(function(ku){return v(We,ku)}),Nr&&qc(We,rr),ka}function Ma(We,Pe,Qe,gt){if(Qe==null)throw Error(r(151));for(var ka=null,Tr=null,xa=Pe,rr=Pe=0,br=null,Mr=Qe.next();xa!==null&&!Mr.done;rr++,Mr=Qe.next()){xa.index>rr?(br=xa,xa=null):br=xa.sibling;var ku=at(We,xa,Mr.value,gt);if(ku===null){xa===null&&(xa=br);break}x&&xa&&ku.alternate===null&&v(We,xa),Pe=q(ku,Pe,rr),Tr===null?ka=ku:Tr.sibling=ku,Tr=ku,xa=br}if(Mr.done)return S(We,xa),Nr&&qc(We,rr),ka;if(xa===null){for(;!Mr.done;rr++,Mr=Qe.next())Mr=bt(We,Mr.value,gt),Mr!==null&&(Pe=q(Mr,Pe,rr),Tr===null?ka=Mr:Tr.sibling=Mr,Tr=Mr);return Nr&&qc(We,rr),ka}for(xa=D(xa);!Mr.done;rr++,Mr=Qe.next())Mr=ot(xa,We,rr,Mr.value,gt),Mr!==null&&(x&&Mr.alternate!==null&&xa.delete(Mr.key===null?rr:Mr.key),Pe=q(Mr,Pe,rr),Tr===null?ka=Mr:Tr.sibling=Mr,Tr=Mr);return x&&xa.forEach(function(iJ){return v(We,iJ)}),Nr&&qc(We,rr),ka}function Jr(We,Pe,Qe,gt){if(typeof Qe=="object"&&Qe!==null&&Qe.type===b&&Qe.key===null&&(Qe=Qe.props.children),typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case p:e:{for(var ka=Qe.key;Pe!==null;){if(Pe.key===ka){if(ka=Qe.type,ka===b){if(Pe.tag===7){S(We,Pe.sibling),gt=V(Pe,Qe.props.children),gt.return=We,We=gt;break e}}else if(Pe.elementType===ka||typeof ka=="object"&&ka!==null&&ka.$$typeof===H&&$h(ka)===Pe.type){S(We,Pe.sibling),gt=V(Pe,Qe.props),um(gt,Qe),gt.return=We,We=gt;break e}S(We,Pe);break}else v(We,Pe);Pe=Pe.sibling}Qe.type===b?(gt=Hh(Qe.props.children,We.mode,gt,Qe.key),gt.return=We,We=gt):(gt=Yb(Qe.type,Qe.key,Qe.props,null,We.mode,gt),um(gt,Qe),gt.return=We,We=gt)}return le(We);case g:e:{for(ka=Qe.key;Pe!==null;){if(Pe.key===ka)if(Pe.tag===4&&Pe.stateNode.containerInfo===Qe.containerInfo&&Pe.stateNode.implementation===Qe.implementation){S(We,Pe.sibling),gt=V(Pe,Qe.children||[]),gt.return=We,We=gt;break e}else{S(We,Pe);break}else v(We,Pe);Pe=Pe.sibling}gt=YN(Qe,We.mode,gt),gt.return=We,We=gt}return le(We);case H:return Qe=$h(Qe),Jr(We,Pe,Qe,gt)}if(B(Qe))return ca(We,Pe,Qe,gt);if(te(Qe)){if(ka=te(Qe),typeof ka!="function")throw Error(r(150));return Qe=ka.call(Qe),Ma(We,Pe,Qe,gt)}if(typeof Qe.then=="function")return Jr(We,Pe,Jb(Qe),gt);if(Qe.$$typeof===T)return Jr(We,Pe,Xb(We,Qe),gt);e1(We,Qe)}return typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint"?(Qe=""+Qe,Pe!==null&&Pe.tag===6?(S(We,Pe.sibling),gt=V(Pe,Qe),gt.return=We,We=gt):(S(We,Pe),gt=WN(Qe,We.mode,gt),gt.return=We,We=gt),le(We)):S(We,Pe)}return function(We,Pe,Qe,gt){try{dm=0;var ka=Jr(We,Pe,Qe,gt);return J0=null,ka}catch(xa){if(xa===Q0||xa===Kb)throw xa;var Tr=ol(29,xa,null,We.mode);return Tr.lanes=gt,Tr.return=We,Tr}}}var Xh=oE(!0),cE=oE(!1),cu=!1;function nj(x){x.updateQueue={baseState:x.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ij(x,v){x=x.updateQueue,v.updateQueue===x&&(v.updateQueue={baseState:x.baseState,firstBaseUpdate:x.firstBaseUpdate,lastBaseUpdate:x.lastBaseUpdate,shared:x.shared,callbacks:null})}function du(x){return{lane:x,tag:0,payload:null,callback:null,next:null}}function uu(x,v,S){var D=x.updateQueue;if(D===null)return null;if(D=D.shared,(Lr&2)!==0){var V=D.pending;return V===null?v.next=v:(v.next=V.next,V.next=v),D.pending=v,v=nu(x),qo(x,null,S),v}return Zr(x,D,v,S),nu(x)}function hm(x,v,S){if(v=v.updateQueue,v!==null&&(v=v.shared,(S&4194048)!==0)){var D=v.lanes;D&=x.pendingLanes,S|=D,v.lanes=S,Se(x,S)}}function sj(x,v){var S=x.updateQueue,D=x.alternate;if(D!==null&&(D=D.updateQueue,S===D)){var V=null,q=null;if(S=S.firstBaseUpdate,S!==null){do{var le={lane:S.lane,tag:S.tag,payload:S.payload,callback:null,next:null};q===null?V=q=le:q=q.next=le,S=S.next}while(S!==null);q===null?V=q=v:q=q.next=v}else V=q=v;S={baseState:D.baseState,firstBaseUpdate:V,lastBaseUpdate:q,shared:D.shared,callbacks:D.callbacks},x.updateQueue=S;return}x=S.lastBaseUpdate,x===null?S.firstBaseUpdate=v:x.next=v,S.lastBaseUpdate=v}var lj=!1;function fm(){if(lj){var x=K0;if(x!==null)throw x}}function pm(x,v,S,D){lj=!1;var V=x.updateQueue;cu=!1;var q=V.firstBaseUpdate,le=V.lastBaseUpdate,xe=V.shared.pending;if(xe!==null){V.shared.pending=null;var Me=xe,Je=Me.next;Me.next=null,le===null?q=Je:le.next=Je,le=Me;var ft=x.alternate;ft!==null&&(ft=ft.updateQueue,xe=ft.lastBaseUpdate,xe!==le&&(xe===null?ft.firstBaseUpdate=Je:xe.next=Je,ft.lastBaseUpdate=Me))}if(q!==null){var bt=V.baseState;le=0,ft=Je=Me=null,xe=q;do{var at=xe.lane&-536870913,ot=at!==xe.lane;if(ot?(vr&at)===at:(D&at)===at){at!==0&&at===Z0&&(lj=!0),ft!==null&&(ft=ft.next={lane:0,tag:xe.tag,payload:xe.payload,callback:null,next:null});e:{var ca=x,Ma=xe;at=v;var Jr=S;switch(Ma.tag){case 1:if(ca=Ma.payload,typeof ca=="function"){bt=ca.call(Jr,bt,at);break e}bt=ca;break e;case 3:ca.flags=ca.flags&-65537|128;case 0:if(ca=Ma.payload,at=typeof ca=="function"?ca.call(Jr,bt,at):ca,at==null)break e;bt=h({},bt,at);break e;case 2:cu=!0}}at=xe.callback,at!==null&&(x.flags|=64,ot&&(x.flags|=8192),ot=V.callbacks,ot===null?V.callbacks=[at]:ot.push(at))}else ot={lane:at,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},ft===null?(Je=ft=ot,Me=bt):ft=ft.next=ot,le|=at;if(xe=xe.next,xe===null){if(xe=V.shared.pending,xe===null)break;ot=xe,xe=ot.next,ot.next=null,V.lastBaseUpdate=ot,V.shared.pending=null}}while(!0);ft===null&&(Me=bt),V.baseState=Me,V.firstBaseUpdate=Je,V.lastBaseUpdate=ft,q===null&&(V.shared.lanes=0),mu|=le,x.lanes=le,x.memoizedState=bt}}function dE(x,v){if(typeof x!="function")throw Error(r(191,x));x.call(v)}function uE(x,v){var S=x.callbacks;if(S!==null)for(x.callbacks=null,x=0;x<S.length;x++)dE(S[x],v)}var ep=K(null),t1=K(0);function hE(x,v){x=id,ce(t1,x),ce(ep,v),id=x|v.baseLanes}function oj(){ce(t1,id),ce(ep,ep.current)}function cj(){id=t1.current,ae(ep),ae(t1)}var cl=K(null),Pl=null;function hu(x){var v=x.alternate;ce(Un,Un.current&1),ce(cl,x),Pl===null&&(v===null||ep.current!==null||v.memoizedState!==null)&&(Pl=x)}function dj(x){ce(Un,Un.current),ce(cl,x),Pl===null&&(Pl=x)}function fE(x){x.tag===22?(ce(Un,Un.current),ce(cl,x),Pl===null&&(Pl=x)):fu()}function fu(){ce(Un,Un.current),ce(cl,cl.current)}function dl(x){ae(cl),Pl===x&&(Pl=null),ae(Un)}var Un=K(0);function a1(x){for(var v=x;v!==null;){if(v.tag===13){var S=v.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||mS(S)||gS(S)))return v}else if(v.tag===19&&(v.memoizedProps.revealOrder==="forwards"||v.memoizedProps.revealOrder==="backwards"||v.memoizedProps.revealOrder==="unstable_legacy-backwards"||v.memoizedProps.revealOrder==="together")){if((v.flags&128)!==0)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===x)break;for(;v.sibling===null;){if(v.return===null||v.return===x)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var Kc=0,Ja=null,Kr=null,si=null,r1=!1,tp=!1,Zh=!1,n1=0,xm=0,ap=null,XK=0;function En(){throw Error(r(321))}function uj(x,v){if(v===null)return!1;for(var S=0;S<v.length&&S<x.length;S++)if(!L(x[S],v[S]))return!1;return!0}function hj(x,v,S,D,V,q){return Kc=q,Ja=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,W.H=x===null||x.memoizedState===null?ZE:Cj,Zh=!1,q=S(D,V),Zh=!1,tp&&(q=xE(v,S,D,V)),pE(x),q}function pE(x){W.H=vm;var v=Kr!==null&&Kr.next!==null;if(Kc=0,si=Kr=Ja=null,r1=!1,xm=0,ap=null,v)throw Error(r(300));x===null||li||(x=x.dependencies,x!==null&&qb(x)&&(li=!0))}function xE(x,v,S,D){Ja=x;var V=0;do{if(tp&&(ap=null),xm=0,tp=!1,25<=V)throw Error(r(301));if(V+=1,si=Kr=null,x.updateQueue!=null){var q=x.updateQueue;q.lastEffect=null,q.events=null,q.stores=null,q.memoCache!=null&&(q.memoCache.index=0)}W.H=KE,q=v(S,D)}while(tp);return q}function ZK(){var x=W.H,v=x.useState()[0];return v=typeof v.then=="function"?mm(v):v,x=x.useState()[0],(Kr!==null?Kr.memoizedState:null)!==x&&(Ja.flags|=1024),v}function fj(){var x=n1!==0;return n1=0,x}function pj(x,v,S){v.updateQueue=x.updateQueue,v.flags&=-2053,x.lanes&=~S}function xj(x){if(r1){for(x=x.memoizedState;x!==null;){var v=x.queue;v!==null&&(v.pending=null),x=x.next}r1=!1}Kc=0,si=Kr=Ja=null,tp=!1,xm=n1=0,ap=null}function ys(){var x={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return si===null?Ja.memoizedState=si=x:si=si.next=x,si}function Gn(){if(Kr===null){var x=Ja.alternate;x=x!==null?x.memoizedState:null}else x=Kr.next;var v=si===null?Ja.memoizedState:si.next;if(v!==null)si=v,Kr=x;else{if(x===null)throw Ja.alternate===null?Error(r(467)):Error(r(310));Kr=x,x={memoizedState:Kr.memoizedState,baseState:Kr.baseState,baseQueue:Kr.baseQueue,queue:Kr.queue,next:null},si===null?Ja.memoizedState=si=x:si=si.next=x}return si}function i1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mm(x){var v=xm;return xm+=1,ap===null&&(ap=[]),x=iE(ap,x,v),v=Ja,(si===null?v.memoizedState:si.next)===null&&(v=v.alternate,W.H=v===null||v.memoizedState===null?ZE:Cj),x}function s1(x){if(x!==null&&typeof x=="object"){if(typeof x.then=="function")return mm(x);if(x.$$typeof===T)return Vi(x)}throw Error(r(438,String(x)))}function mj(x){var v=null,S=Ja.updateQueue;if(S!==null&&(v=S.memoCache),v==null){var D=Ja.alternate;D!==null&&(D=D.updateQueue,D!==null&&(D=D.memoCache,D!=null&&(v={data:D.data.map(function(V){return V.slice()}),index:0})))}if(v==null&&(v={data:[],index:0}),S===null&&(S=i1(),Ja.updateQueue=S),S.memoCache=v,S=v.data[v.index],S===void 0)for(S=v.data[v.index]=Array(x),D=0;D<x;D++)S[D]=X;return v.index++,S}function Qc(x,v){return typeof v=="function"?v(x):v}function l1(x){var v=Gn();return gj(v,Kr,x)}function gj(x,v,S){var D=x.queue;if(D===null)throw Error(r(311));D.lastRenderedReducer=S;var V=x.baseQueue,q=D.pending;if(q!==null){if(V!==null){var le=V.next;V.next=q.next,q.next=le}v.baseQueue=V=q,D.pending=null}if(q=x.baseState,V===null)x.memoizedState=q;else{v=V.next;var xe=le=null,Me=null,Je=v,ft=!1;do{var bt=Je.lane&-536870913;if(bt!==Je.lane?(vr&bt)===bt:(Kc&bt)===bt){var at=Je.revertLane;if(at===0)Me!==null&&(Me=Me.next={lane:0,revertLane:0,gesture:null,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),bt===Z0&&(ft=!0);else if((Kc&at)===at){Je=Je.next,at===Z0&&(ft=!0);continue}else bt={lane:0,revertLane:Je.revertLane,gesture:null,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Me===null?(xe=Me=bt,le=q):Me=Me.next=bt,Ja.lanes|=at,mu|=at;bt=Je.action,Zh&&S(q,bt),q=Je.hasEagerState?Je.eagerState:S(q,bt)}else at={lane:bt,revertLane:Je.revertLane,gesture:Je.gesture,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Me===null?(xe=Me=at,le=q):Me=Me.next=at,Ja.lanes|=bt,mu|=bt;Je=Je.next}while(Je!==null&&Je!==v);if(Me===null?le=q:Me.next=xe,!L(q,x.memoizedState)&&(li=!0,ft&&(S=K0,S!==null)))throw S;x.memoizedState=q,x.baseState=le,x.baseQueue=Me,D.lastRenderedState=q}return V===null&&(D.lanes=0),[x.memoizedState,D.dispatch]}function vj(x){var v=Gn(),S=v.queue;if(S===null)throw Error(r(311));S.lastRenderedReducer=x;var D=S.dispatch,V=S.pending,q=v.memoizedState;if(V!==null){S.pending=null;var le=V=V.next;do q=x(q,le.action),le=le.next;while(le!==V);L(q,v.memoizedState)||(li=!0),v.memoizedState=q,v.baseQueue===null&&(v.baseState=q),S.lastRenderedState=q}return[q,D]}function mE(x,v,S){var D=Ja,V=Gn(),q=Nr;if(q){if(S===void 0)throw Error(r(407));S=S()}else S=v();var le=!L((Kr||V).memoizedState,S);if(le&&(V.memoizedState=S,li=!0),V=V.queue,wj(bE.bind(null,D,V,x),[x]),V.getSnapshot!==v||le||si!==null&&si.memoizedState.tag&1){if(D.flags|=2048,rp(9,{destroy:void 0},vE.bind(null,D,V,S,v),null),ln===null)throw Error(r(349));q||(Kc&127)!==0||gE(D,v,S)}return S}function gE(x,v,S){x.flags|=16384,x={getSnapshot:v,value:S},v=Ja.updateQueue,v===null?(v=i1(),Ja.updateQueue=v,v.stores=[x]):(S=v.stores,S===null?v.stores=[x]:S.push(x))}function vE(x,v,S,D){v.value=S,v.getSnapshot=D,yE(v)&&wE(x)}function bE(x,v,S){return S(function(){yE(v)&&wE(x)})}function yE(x){var v=x.getSnapshot;x=x.value;try{var S=v();return!L(x,S)}catch{return!0}}function wE(x){var v=zr(x,2);v!==null&&Us(v,x,2)}function bj(x){var v=ys();if(typeof x=="function"){var S=x;if(x=S(),Zh){Ot(!0);try{S()}finally{Ot(!1)}}}return v.memoizedState=v.baseState=x,v.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qc,lastRenderedState:x},v}function _E(x,v,S,D){return x.baseState=S,gj(x,Kr,typeof D=="function"?D:Qc)}function KK(x,v,S,D,V){if(d1(x))throw Error(r(485));if(x=v.action,x!==null){var q={payload:V,action:x,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){q.listeners.push(le)}};W.T!==null?S(!0):q.isTransition=!1,D(q),S=v.pending,S===null?(q.next=v.pending=q,NE(v,q)):(q.next=S.next,v.pending=S.next=q)}}function NE(x,v){var S=v.action,D=v.payload,V=x.state;if(v.isTransition){var q=W.T,le={};W.T=le;try{var xe=S(V,D),Me=W.S;Me!==null&&Me(le,xe),jE(x,v,xe)}catch(Je){yj(x,v,Je)}finally{q!==null&&le.types!==null&&(q.types=le.types),W.T=q}}else try{q=S(V,D),jE(x,v,q)}catch(Je){yj(x,v,Je)}}function jE(x,v,S){S!==null&&typeof S=="object"&&typeof S.then=="function"?S.then(function(D){SE(x,v,D)},function(D){return yj(x,v,D)}):SE(x,v,S)}function SE(x,v,S){v.status="fulfilled",v.value=S,kE(v),x.state=S,v=x.pending,v!==null&&(S=v.next,S===v?x.pending=null:(S=S.next,v.next=S,NE(x,S)))}function yj(x,v,S){var D=x.pending;if(x.pending=null,D!==null){D=D.next;do v.status="rejected",v.reason=S,kE(v),v=v.next;while(v!==D)}x.action=null}function kE(x){x=x.listeners;for(var v=0;v<x.length;v++)(0,x[v])()}function CE(x,v){return v}function AE(x,v){if(Nr){var S=ln.formState;if(S!==null){e:{var D=Ja;if(Nr){if(pn){t:{for(var V=pn,q=Ol;V.nodeType!==8;){if(!q){V=null;break t}if(V=zl(V.nextSibling),V===null){V=null;break t}}q=V.data,V=q==="F!"||q==="F"?V:null}if(V){pn=zl(V.nextSibling),D=V.data==="F!";break e}}lu(D)}D=!1}D&&(v=S[0])}}return S=ys(),S.memoizedState=S.baseState=v,D={pending:null,lanes:0,dispatch:null,lastRenderedReducer:CE,lastRenderedState:v},S.queue=D,S=$E.bind(null,Ja,D),D.dispatch=S,D=bj(!1),q=kj.bind(null,Ja,!1,D.queue),D=ys(),V={state:v,dispatch:null,action:x,pending:null},D.queue=V,S=KK.bind(null,Ja,V,q,S),V.dispatch=S,D.memoizedState=x,[v,S,!1]}function TE(x){var v=Gn();return ME(v,Kr,x)}function ME(x,v,S){if(v=gj(x,v,CE)[0],x=l1(Qc)[0],typeof v=="object"&&v!==null&&typeof v.then=="function")try{var D=mm(v)}catch(le){throw le===Q0?Kb:le}else D=v;v=Gn();var V=v.queue,q=V.dispatch;return S!==v.memoizedState&&(Ja.flags|=2048,rp(9,{destroy:void 0},QK.bind(null,V,S),null)),[D,q,x]}function QK(x,v){x.action=v}function EE(x){var v=Gn(),S=Kr;if(S!==null)return ME(v,S,x);Gn(),v=v.memoizedState,S=Gn();var D=S.queue.dispatch;return S.memoizedState=x,[v,D,!1]}function rp(x,v,S,D){return x={tag:x,create:S,deps:D,inst:v,next:null},v=Ja.updateQueue,v===null&&(v=i1(),Ja.updateQueue=v),S=v.lastEffect,S===null?v.lastEffect=x.next=x:(D=S.next,S.next=x,x.next=D,v.lastEffect=x),x}function DE(){return Gn().memoizedState}function o1(x,v,S,D){var V=ys();Ja.flags|=x,V.memoizedState=rp(1|v,{destroy:void 0},S,D===void 0?null:D)}function c1(x,v,S,D){var V=Gn();D=D===void 0?null:D;var q=V.memoizedState.inst;Kr!==null&&D!==null&&uj(D,Kr.memoizedState.deps)?V.memoizedState=rp(v,q,S,D):(Ja.flags|=x,V.memoizedState=rp(1|v,q,S,D))}function IE(x,v){o1(8390656,8,x,v)}function wj(x,v){c1(2048,8,x,v)}function JK(x){Ja.flags|=4;var v=Ja.updateQueue;if(v===null)v=i1(),Ja.updateQueue=v,v.events=[x];else{var S=v.events;S===null?v.events=[x]:S.push(x)}}function RE(x){var v=Gn().memoizedState;return JK({ref:v,nextImpl:x}),function(){if((Lr&2)!==0)throw Error(r(440));return v.impl.apply(void 0,arguments)}}function LE(x,v){return c1(4,2,x,v)}function OE(x,v){return c1(4,4,x,v)}function PE(x,v){if(typeof v=="function"){x=x();var S=v(x);return function(){typeof S=="function"?S():v(null)}}if(v!=null)return x=x(),v.current=x,function(){v.current=null}}function zE(x,v,S){S=S!=null?S.concat([x]):null,c1(4,4,PE.bind(null,v,x),S)}function _j(){}function BE(x,v){var S=Gn();v=v===void 0?null:v;var D=S.memoizedState;return v!==null&&uj(v,D[1])?D[0]:(S.memoizedState=[x,v],x)}function FE(x,v){var S=Gn();v=v===void 0?null:v;var D=S.memoizedState;if(v!==null&&uj(v,D[1]))return D[0];if(D=x(),Zh){Ot(!0);try{x()}finally{Ot(!1)}}return S.memoizedState=[D,v],D}function Nj(x,v,S){return S===void 0||(Kc&1073741824)!==0&&(vr&261930)===0?x.memoizedState=v:(x.memoizedState=S,x=VD(),Ja.lanes|=x,mu|=x,S)}function VE(x,v,S,D){return L(S,v)?S:ep.current!==null?(x=Nj(x,S,D),L(x,v)||(li=!0),x):(Kc&42)===0||(Kc&1073741824)!==0&&(vr&261930)===0?(li=!0,x.memoizedState=S):(x=VD(),Ja.lanes|=x,mu|=x,v)}function HE(x,v,S,D,V){var q=$.p;$.p=q!==0&&8>q?q:8;var le=W.T,xe={};W.T=xe,kj(x,!1,v,S);try{var Me=V(),Je=W.S;if(Je!==null&&Je(xe,Me),Me!==null&&typeof Me=="object"&&typeof Me.then=="function"){var ft=qK(Me,D);gm(x,v,ft,fl(x))}else gm(x,v,D,fl(x))}catch(bt){gm(x,v,{then:function(){},status:"rejected",reason:bt},fl())}finally{$.p=q,le!==null&&xe.types!==null&&(le.types=xe.types),W.T=le}}function eQ(){}function jj(x,v,S,D){if(x.tag!==5)throw Error(r(476));var V=UE(x).queue;HE(x,V,v,Q,S===null?eQ:function(){return GE(x),S(D)})}function UE(x){var v=x.memoizedState;if(v!==null)return v;v={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qc,lastRenderedState:Q},next:null};var S={};return v.next={memoizedState:S,baseState:S,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qc,lastRenderedState:S},next:null},x.memoizedState=v,x=x.alternate,x!==null&&(x.memoizedState=v),v}function GE(x){var v=UE(x);v.next===null&&(v=x.alternate.memoizedState),gm(x,v.next.queue,{},fl())}function Sj(){return Vi(Rm)}function WE(){return Gn().memoizedState}function YE(){return Gn().memoizedState}function tQ(x){for(var v=x.return;v!==null;){switch(v.tag){case 24:case 3:var S=fl();x=du(S);var D=uu(v,x,S);D!==null&&(Us(D,v,S),hm(D,v,S)),v={cache:ej()},x.payload=v;return}v=v.return}}function aQ(x,v,S){var D=fl();S={lane:D,revertLane:0,gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},d1(x)?qE(v,S):(S=es(x,v,S,D),S!==null&&(Us(S,x,D),XE(S,v,D)))}function $E(x,v,S){var D=fl();gm(x,v,S,D)}function gm(x,v,S,D){var V={lane:D,revertLane:0,gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null};if(d1(x))qE(v,V);else{var q=x.alternate;if(x.lanes===0&&(q===null||q.lanes===0)&&(q=v.lastRenderedReducer,q!==null))try{var le=v.lastRenderedState,xe=q(le,S);if(V.hasEagerState=!0,V.eagerState=xe,L(xe,le))return Zr(x,v,V,0),ln===null&&Ya(),!1}catch{}if(S=es(x,v,V,D),S!==null)return Us(S,x,D),XE(S,v,D),!0}return!1}function kj(x,v,S,D){if(D={lane:2,revertLane:nS(),gesture:null,action:D,hasEagerState:!1,eagerState:null,next:null},d1(x)){if(v)throw Error(r(479))}else v=es(x,S,D,2),v!==null&&Us(v,x,2)}function d1(x){var v=x.alternate;return x===Ja||v!==null&&v===Ja}function qE(x,v){tp=r1=!0;var S=x.pending;S===null?v.next=v:(v.next=S.next,S.next=v),x.pending=v}function XE(x,v,S){if((S&4194048)!==0){var D=v.lanes;D&=x.pendingLanes,S|=D,v.lanes=S,Se(x,S)}}var vm={readContext:Vi,use:s1,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En,useHostTransitionStatus:En,useFormState:En,useActionState:En,useOptimistic:En,useMemoCache:En,useCacheRefresh:En};vm.useEffectEvent=En;var ZE={readContext:Vi,use:s1,useCallback:function(x,v){return ys().memoizedState=[x,v===void 0?null:v],x},useContext:Vi,useEffect:IE,useImperativeHandle:function(x,v,S){S=S!=null?S.concat([x]):null,o1(4194308,4,PE.bind(null,v,x),S)},useLayoutEffect:function(x,v){return o1(4194308,4,x,v)},useInsertionEffect:function(x,v){o1(4,2,x,v)},useMemo:function(x,v){var S=ys();v=v===void 0?null:v;var D=x();if(Zh){Ot(!0);try{x()}finally{Ot(!1)}}return S.memoizedState=[D,v],D},useReducer:function(x,v,S){var D=ys();if(S!==void 0){var V=S(v);if(Zh){Ot(!0);try{S(v)}finally{Ot(!1)}}}else V=v;return D.memoizedState=D.baseState=V,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:x,lastRenderedState:V},D.queue=x,x=x.dispatch=aQ.bind(null,Ja,x),[D.memoizedState,x]},useRef:function(x){var v=ys();return x={current:x},v.memoizedState=x},useState:function(x){x=bj(x);var v=x.queue,S=$E.bind(null,Ja,v);return v.dispatch=S,[x.memoizedState,S]},useDebugValue:_j,useDeferredValue:function(x,v){var S=ys();return Nj(S,x,v)},useTransition:function(){var x=bj(!1);return x=HE.bind(null,Ja,x.queue,!0,!1),ys().memoizedState=x,[!1,x]},useSyncExternalStore:function(x,v,S){var D=Ja,V=ys();if(Nr){if(S===void 0)throw Error(r(407));S=S()}else{if(S=v(),ln===null)throw Error(r(349));(vr&127)!==0||gE(D,v,S)}V.memoizedState=S;var q={value:S,getSnapshot:v};return V.queue=q,IE(bE.bind(null,D,q,x),[x]),D.flags|=2048,rp(9,{destroy:void 0},vE.bind(null,D,q,S,v),null),S},useId:function(){var x=ys(),v=ln.identifierPrefix;if(Nr){var S=Zo,D=Xo;S=(D&~(1<<32-st(D)-1)).toString(32)+S,v="_"+v+"R_"+S,S=n1++,0<S&&(v+="H"+S.toString(32)),v+="_"}else S=XK++,v="_"+v+"r_"+S.toString(32)+"_";return x.memoizedState=v},useHostTransitionStatus:Sj,useFormState:AE,useActionState:AE,useOptimistic:function(x){var v=ys();v.memoizedState=v.baseState=x;var S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return v.queue=S,v=kj.bind(null,Ja,!0,S),S.dispatch=v,[x,v]},useMemoCache:mj,useCacheRefresh:function(){return ys().memoizedState=tQ.bind(null,Ja)},useEffectEvent:function(x){var v=ys(),S={impl:x};return v.memoizedState=S,function(){if((Lr&2)!==0)throw Error(r(440));return S.impl.apply(void 0,arguments)}}},Cj={readContext:Vi,use:s1,useCallback:BE,useContext:Vi,useEffect:wj,useImperativeHandle:zE,useInsertionEffect:LE,useLayoutEffect:OE,useMemo:FE,useReducer:l1,useRef:DE,useState:function(){return l1(Qc)},useDebugValue:_j,useDeferredValue:function(x,v){var S=Gn();return VE(S,Kr.memoizedState,x,v)},useTransition:function(){var x=l1(Qc)[0],v=Gn().memoizedState;return[typeof x=="boolean"?x:mm(x),v]},useSyncExternalStore:mE,useId:WE,useHostTransitionStatus:Sj,useFormState:TE,useActionState:TE,useOptimistic:function(x,v){var S=Gn();return _E(S,Kr,x,v)},useMemoCache:mj,useCacheRefresh:YE};Cj.useEffectEvent=RE;var KE={readContext:Vi,use:s1,useCallback:BE,useContext:Vi,useEffect:wj,useImperativeHandle:zE,useInsertionEffect:LE,useLayoutEffect:OE,useMemo:FE,useReducer:vj,useRef:DE,useState:function(){return vj(Qc)},useDebugValue:_j,useDeferredValue:function(x,v){var S=Gn();return Kr===null?Nj(S,x,v):VE(S,Kr.memoizedState,x,v)},useTransition:function(){var x=vj(Qc)[0],v=Gn().memoizedState;return[typeof x=="boolean"?x:mm(x),v]},useSyncExternalStore:mE,useId:WE,useHostTransitionStatus:Sj,useFormState:EE,useActionState:EE,useOptimistic:function(x,v){var S=Gn();return Kr!==null?_E(S,Kr,x,v):(S.baseState=x,[x,S.queue.dispatch])},useMemoCache:mj,useCacheRefresh:YE};KE.useEffectEvent=RE;function Aj(x,v,S,D){v=x.memoizedState,S=S(D,v),S=S==null?v:h({},v,S),x.memoizedState=S,x.lanes===0&&(x.updateQueue.baseState=S)}var Tj={enqueueSetState:function(x,v,S){x=x._reactInternals;var D=fl(),V=du(D);V.payload=v,S!=null&&(V.callback=S),v=uu(x,V,D),v!==null&&(Us(v,x,D),hm(v,x,D))},enqueueReplaceState:function(x,v,S){x=x._reactInternals;var D=fl(),V=du(D);V.tag=1,V.payload=v,S!=null&&(V.callback=S),v=uu(x,V,D),v!==null&&(Us(v,x,D),hm(v,x,D))},enqueueForceUpdate:function(x,v){x=x._reactInternals;var S=fl(),D=du(S);D.tag=2,v!=null&&(D.callback=v),v=uu(x,D,S),v!==null&&(Us(v,x,S),hm(v,x,S))}};function QE(x,v,S,D,V,q,le){return x=x.stateNode,typeof x.shouldComponentUpdate=="function"?x.shouldComponentUpdate(D,q,le):v.prototype&&v.prototype.isPureReactComponent?!_(S,D)||!_(V,q):!0}function JE(x,v,S,D){x=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(S,D),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(S,D),v.state!==x&&Tj.enqueueReplaceState(v,v.state,null)}function Kh(x,v){var S=v;if("ref"in v){S={};for(var D in v)D!=="ref"&&(S[D]=v[D])}if(x=x.defaultProps){S===v&&(S=h({},S));for(var V in x)S[V]===void 0&&(S[V]=x[V])}return S}function eD(x){ea(x)}function tD(x){console.error(x)}function aD(x){ea(x)}function u1(x,v){try{var S=x.onUncaughtError;S(v.value,{componentStack:v.stack})}catch(D){setTimeout(function(){throw D})}}function rD(x,v,S){try{var D=x.onCaughtError;D(S.value,{componentStack:S.stack,errorBoundary:v.tag===1?v.stateNode:null})}catch(V){setTimeout(function(){throw V})}}function Mj(x,v,S){return S=du(S),S.tag=3,S.payload={element:null},S.callback=function(){u1(x,v)},S}function nD(x){return x=du(x),x.tag=3,x}function iD(x,v,S,D){var V=S.type.getDerivedStateFromError;if(typeof V=="function"){var q=D.value;x.payload=function(){return V(q)},x.callback=function(){rD(v,S,D)}}var le=S.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(x.callback=function(){rD(v,S,D),typeof V!="function"&&(gu===null?gu=new Set([this]):gu.add(this));var xe=D.stack;this.componentDidCatch(D.value,{componentStack:xe!==null?xe:""})})}function rQ(x,v,S,D,V){if(S.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){if(v=S.alternate,v!==null&&X0(v,S,V,!0),S=cl.current,S!==null){switch(S.tag){case 31:case 13:return Pl===null?N1():S.alternate===null&&Dn===0&&(Dn=3),S.flags&=-257,S.flags|=65536,S.lanes=V,D===Qb?S.flags|=16384:(v=S.updateQueue,v===null?S.updateQueue=new Set([D]):v.add(D),tS(x,D,V)),!1;case 22:return S.flags|=65536,D===Qb?S.flags|=16384:(v=S.updateQueue,v===null?(v={transitions:null,markerInstances:null,retryQueue:new Set([D])},S.updateQueue=v):(S=v.retryQueue,S===null?v.retryQueue=new Set([D]):S.add(D)),tS(x,D,V)),!1}throw Error(r(435,S.tag))}return tS(x,D,V),N1(),!1}if(Nr)return v=cl.current,v!==null?((v.flags&65536)===0&&(v.flags|=256),v.flags|=65536,v.lanes=V,D!==XN&&(x=Error(r(422),{cause:D}),lm(Il(x,S)))):(D!==XN&&(v=Error(r(423),{cause:D}),lm(Il(v,S))),x=x.current.alternate,x.flags|=65536,V&=-V,x.lanes|=V,D=Il(D,S),V=Mj(x.stateNode,D,V),sj(x,V),Dn!==4&&(Dn=2)),!1;var q=Error(r(520),{cause:D});if(q=Il(q,S),km===null?km=[q]:km.push(q),Dn!==4&&(Dn=2),v===null)return!0;D=Il(D,S),S=v;do{switch(S.tag){case 3:return S.flags|=65536,x=V&-V,S.lanes|=x,x=Mj(S.stateNode,D,x),sj(S,x),!1;case 1:if(v=S.type,q=S.stateNode,(S.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(gu===null||!gu.has(q))))return S.flags|=65536,V&=-V,S.lanes|=V,V=nD(V),iD(V,x,S,D),sj(S,V),!1}S=S.return}while(S!==null);return!1}var Ej=Error(r(461)),li=!1;function Hi(x,v,S,D){v.child=x===null?cE(v,null,S,D):Xh(v,x.child,S,D)}function sD(x,v,S,D,V){S=S.render;var q=v.ref;if("ref"in D){var le={};for(var xe in D)xe!=="ref"&&(le[xe]=D[xe])}else le=D;return Wh(v),D=hj(x,v,S,le,q,V),xe=fj(),x!==null&&!li?(pj(x,v,V),Jc(x,v,V)):(Nr&&xe&&$N(v),v.flags|=1,Hi(x,v,D,V),v.child)}function lD(x,v,S,D,V){if(x===null){var q=S.type;return typeof q=="function"&&!GN(q)&&q.defaultProps===void 0&&S.compare===null?(v.tag=15,v.type=q,oD(x,v,q,D,V)):(x=Yb(S.type,null,D,v,v.mode,V),x.ref=v.ref,x.return=v,v.child=x)}if(q=x.child,!Bj(x,V)){var le=q.memoizedProps;if(S=S.compare,S=S!==null?S:_,S(le,D)&&x.ref===v.ref)return Jc(x,v,V)}return v.flags|=1,x=$c(q,D),x.ref=v.ref,x.return=v,v.child=x}function oD(x,v,S,D,V){if(x!==null){var q=x.memoizedProps;if(_(q,D)&&x.ref===v.ref)if(li=!1,v.pendingProps=D=q,Bj(x,V))(x.flags&131072)!==0&&(li=!0);else return v.lanes=x.lanes,Jc(x,v,V)}return Dj(x,v,S,D,V)}function cD(x,v,S,D){var V=D.children,q=x!==null?x.memoizedState:null;if(x===null&&v.stateNode===null&&(v.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),D.mode==="hidden"){if((v.flags&128)!==0){if(q=q!==null?q.baseLanes|S:S,x!==null){for(D=v.child=x.child,V=0;D!==null;)V=V|D.lanes|D.childLanes,D=D.sibling;D=V&~q}else D=0,v.child=null;return dD(x,v,q,S,D)}if((S&536870912)!==0)v.memoizedState={baseLanes:0,cachePool:null},x!==null&&Zb(v,q!==null?q.cachePool:null),q!==null?hE(v,q):oj(),fE(v);else return D=v.lanes=536870912,dD(x,v,q!==null?q.baseLanes|S:S,S,D)}else q!==null?(Zb(v,q.cachePool),hE(v,q),fu(),v.memoizedState=null):(x!==null&&Zb(v,null),oj(),fu());return Hi(x,v,V,S),v.child}function bm(x,v){return x!==null&&x.tag===22||v.stateNode!==null||(v.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.sibling}function dD(x,v,S,D,V){var q=aj();return q=q===null?null:{parent:ii._currentValue,pool:q},v.memoizedState={baseLanes:S,cachePool:q},x!==null&&Zb(v,null),oj(),fE(v),x!==null&&X0(x,v,D,!0),v.childLanes=V,null}function h1(x,v){return v=p1({mode:v.mode,children:v.children},x.mode),v.ref=x.ref,x.child=v,v.return=x,v}function uD(x,v,S){return Xh(v,x.child,null,S),x=h1(v,v.pendingProps),x.flags|=2,dl(v),v.memoizedState=null,x}function nQ(x,v,S){var D=v.pendingProps,V=(v.flags&128)!==0;if(v.flags&=-129,x===null){if(Nr){if(D.mode==="hidden")return x=h1(v,D),v.lanes=536870912,bm(null,x);if(dj(v),(x=pn)?(x=NI(x,Ol),x=x!==null&&x.data==="&"?x:null,x!==null&&(v.memoizedState={dehydrated:x,treeContext:iu!==null?{id:Xo,overflow:Zo}:null,retryLane:536870912,hydrationErrors:null},S=q6(x),S.return=v,v.child=S,Fi=v,pn=null)):x=null,x===null)throw lu(v);return v.lanes=536870912,null}return h1(v,D)}var q=x.memoizedState;if(q!==null){var le=q.dehydrated;if(dj(v),V)if(v.flags&256)v.flags&=-257,v=uD(x,v,S);else if(v.memoizedState!==null)v.child=x.child,v.flags|=128,v=null;else throw Error(r(558));else if(li||X0(x,v,S,!1),V=(S&x.childLanes)!==0,li||V){if(D=ln,D!==null&&(le=ze(D,S),le!==0&&le!==q.retryLane))throw q.retryLane=le,zr(x,le),Us(D,x,le),Ej;N1(),v=uD(x,v,S)}else x=q.treeContext,pn=zl(le.nextSibling),Fi=v,Nr=!0,su=null,Ol=!1,x!==null&&K6(v,x),v=h1(v,D),v.flags|=4096;return v}return x=$c(x.child,{mode:D.mode,children:D.children}),x.ref=v.ref,v.child=x,x.return=v,x}function f1(x,v){var S=v.ref;if(S===null)x!==null&&x.ref!==null&&(v.flags|=4194816);else{if(typeof S!="function"&&typeof S!="object")throw Error(r(284));(x===null||x.ref!==S)&&(v.flags|=4194816)}}function Dj(x,v,S,D,V){return Wh(v),S=hj(x,v,S,D,void 0,V),D=fj(),x!==null&&!li?(pj(x,v,V),Jc(x,v,V)):(Nr&&D&&$N(v),v.flags|=1,Hi(x,v,S,V),v.child)}function hD(x,v,S,D,V,q){return Wh(v),v.updateQueue=null,S=xE(v,D,S,V),pE(x),D=fj(),x!==null&&!li?(pj(x,v,q),Jc(x,v,q)):(Nr&&D&&$N(v),v.flags|=1,Hi(x,v,S,q),v.child)}function fD(x,v,S,D,V){if(Wh(v),v.stateNode===null){var q=W0,le=S.contextType;typeof le=="object"&&le!==null&&(q=Vi(le)),q=new S(D,q),v.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,q.updater=Tj,v.stateNode=q,q._reactInternals=v,q=v.stateNode,q.props=D,q.state=v.memoizedState,q.refs={},nj(v),le=S.contextType,q.context=typeof le=="object"&&le!==null?Vi(le):W0,q.state=v.memoizedState,le=S.getDerivedStateFromProps,typeof le=="function"&&(Aj(v,S,le,D),q.state=v.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(le=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),le!==q.state&&Tj.enqueueReplaceState(q,q.state,null),pm(v,D,q,V),fm(),q.state=v.memoizedState),typeof q.componentDidMount=="function"&&(v.flags|=4194308),D=!0}else if(x===null){q=v.stateNode;var xe=v.memoizedProps,Me=Kh(S,xe);q.props=Me;var Je=q.context,ft=S.contextType;le=W0,typeof ft=="object"&&ft!==null&&(le=Vi(ft));var bt=S.getDerivedStateFromProps;ft=typeof bt=="function"||typeof q.getSnapshotBeforeUpdate=="function",xe=v.pendingProps!==xe,ft||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(xe||Je!==le)&&JE(v,q,D,le),cu=!1;var at=v.memoizedState;q.state=at,pm(v,D,q,V),fm(),Je=v.memoizedState,xe||at!==Je||cu?(typeof bt=="function"&&(Aj(v,S,bt,D),Je=v.memoizedState),(Me=cu||QE(v,S,Me,D,at,Je,le))?(ft||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(v.flags|=4194308)):(typeof q.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=D,v.memoizedState=Je),q.props=D,q.state=Je,q.context=le,D=Me):(typeof q.componentDidMount=="function"&&(v.flags|=4194308),D=!1)}else{q=v.stateNode,ij(x,v),le=v.memoizedProps,ft=Kh(S,le),q.props=ft,bt=v.pendingProps,at=q.context,Je=S.contextType,Me=W0,typeof Je=="object"&&Je!==null&&(Me=Vi(Je)),xe=S.getDerivedStateFromProps,(Je=typeof xe=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(le!==bt||at!==Me)&&JE(v,q,D,Me),cu=!1,at=v.memoizedState,q.state=at,pm(v,D,q,V),fm();var ot=v.memoizedState;le!==bt||at!==ot||cu||x!==null&&x.dependencies!==null&&qb(x.dependencies)?(typeof xe=="function"&&(Aj(v,S,xe,D),ot=v.memoizedState),(ft=cu||QE(v,S,ft,D,at,ot,Me)||x!==null&&x.dependencies!==null&&qb(x.dependencies))?(Je||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(D,ot,Me),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(D,ot,Me)),typeof q.componentDidUpdate=="function"&&(v.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof q.componentDidUpdate!="function"||le===x.memoizedProps&&at===x.memoizedState||(v.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||le===x.memoizedProps&&at===x.memoizedState||(v.flags|=1024),v.memoizedProps=D,v.memoizedState=ot),q.props=D,q.state=ot,q.context=Me,D=ft):(typeof q.componentDidUpdate!="function"||le===x.memoizedProps&&at===x.memoizedState||(v.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||le===x.memoizedProps&&at===x.memoizedState||(v.flags|=1024),D=!1)}return q=D,f1(x,v),D=(v.flags&128)!==0,q||D?(q=v.stateNode,S=D&&typeof S.getDerivedStateFromError!="function"?null:q.render(),v.flags|=1,x!==null&&D?(v.child=Xh(v,x.child,null,V),v.child=Xh(v,null,S,V)):Hi(x,v,S,V),v.memoizedState=q.state,x=v.child):x=Jc(x,v,V),x}function pD(x,v,S,D){return Uh(),v.flags|=256,Hi(x,v,S,D),v.child}var Ij={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rj(x){return{baseLanes:x,cachePool:rE()}}function Lj(x,v,S){return x=x!==null?x.childLanes&~S:0,v&&(x|=hl),x}function xD(x,v,S){var D=v.pendingProps,V=!1,q=(v.flags&128)!==0,le;if((le=q)||(le=x!==null&&x.memoizedState===null?!1:(Un.current&2)!==0),le&&(V=!0,v.flags&=-129),le=(v.flags&32)!==0,v.flags&=-33,x===null){if(Nr){if(V?hu(v):fu(),(x=pn)?(x=NI(x,Ol),x=x!==null&&x.data!=="&"?x:null,x!==null&&(v.memoizedState={dehydrated:x,treeContext:iu!==null?{id:Xo,overflow:Zo}:null,retryLane:536870912,hydrationErrors:null},S=q6(x),S.return=v,v.child=S,Fi=v,pn=null)):x=null,x===null)throw lu(v);return gS(x)?v.lanes=32:v.lanes=536870912,null}var xe=D.children;return D=D.fallback,V?(fu(),V=v.mode,xe=p1({mode:"hidden",children:xe},V),D=Hh(D,V,S,null),xe.return=v,D.return=v,xe.sibling=D,v.child=xe,D=v.child,D.memoizedState=Rj(S),D.childLanes=Lj(x,le,S),v.memoizedState=Ij,bm(null,D)):(hu(v),Oj(v,xe))}var Me=x.memoizedState;if(Me!==null&&(xe=Me.dehydrated,xe!==null)){if(q)v.flags&256?(hu(v),v.flags&=-257,v=Pj(x,v,S)):v.memoizedState!==null?(fu(),v.child=x.child,v.flags|=128,v=null):(fu(),xe=D.fallback,V=v.mode,D=p1({mode:"visible",children:D.children},V),xe=Hh(xe,V,S,null),xe.flags|=2,D.return=v,xe.return=v,D.sibling=xe,v.child=D,Xh(v,x.child,null,S),D=v.child,D.memoizedState=Rj(S),D.childLanes=Lj(x,le,S),v.memoizedState=Ij,v=bm(null,D));else if(hu(v),gS(xe)){if(le=xe.nextSibling&&xe.nextSibling.dataset,le)var Je=le.dgst;le=Je,D=Error(r(419)),D.stack="",D.digest=le,lm({value:D,source:null,stack:null}),v=Pj(x,v,S)}else if(li||X0(x,v,S,!1),le=(S&x.childLanes)!==0,li||le){if(le=ln,le!==null&&(D=ze(le,S),D!==0&&D!==Me.retryLane))throw Me.retryLane=D,zr(x,D),Us(le,x,D),Ej;mS(xe)||N1(),v=Pj(x,v,S)}else mS(xe)?(v.flags|=192,v.child=x.child,v=null):(x=Me.treeContext,pn=zl(xe.nextSibling),Fi=v,Nr=!0,su=null,Ol=!1,x!==null&&K6(v,x),v=Oj(v,D.children),v.flags|=4096);return v}return V?(fu(),xe=D.fallback,V=v.mode,Me=x.child,Je=Me.sibling,D=$c(Me,{mode:"hidden",children:D.children}),D.subtreeFlags=Me.subtreeFlags&65011712,Je!==null?xe=$c(Je,xe):(xe=Hh(xe,V,S,null),xe.flags|=2),xe.return=v,D.return=v,D.sibling=xe,v.child=D,bm(null,D),D=v.child,xe=x.child.memoizedState,xe===null?xe=Rj(S):(V=xe.cachePool,V!==null?(Me=ii._currentValue,V=V.parent!==Me?{parent:Me,pool:Me}:V):V=rE(),xe={baseLanes:xe.baseLanes|S,cachePool:V}),D.memoizedState=xe,D.childLanes=Lj(x,le,S),v.memoizedState=Ij,bm(x.child,D)):(hu(v),S=x.child,x=S.sibling,S=$c(S,{mode:"visible",children:D.children}),S.return=v,S.sibling=null,x!==null&&(le=v.deletions,le===null?(v.deletions=[x],v.flags|=16):le.push(x)),v.child=S,v.memoizedState=null,S)}function Oj(x,v){return v=p1({mode:"visible",children:v},x.mode),v.return=x,x.child=v}function p1(x,v){return x=ol(22,x,null,v),x.lanes=0,x}function Pj(x,v,S){return Xh(v,x.child,null,S),x=Oj(v,v.pendingProps.children),x.flags|=2,v.memoizedState=null,x}function mD(x,v,S){x.lanes|=v;var D=x.alternate;D!==null&&(D.lanes|=v),QN(x.return,v,S)}function zj(x,v,S,D,V,q){var le=x.memoizedState;le===null?x.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:D,tail:S,tailMode:V,treeForkCount:q}:(le.isBackwards=v,le.rendering=null,le.renderingStartTime=0,le.last=D,le.tail=S,le.tailMode=V,le.treeForkCount=q)}function gD(x,v,S){var D=v.pendingProps,V=D.revealOrder,q=D.tail;D=D.children;var le=Un.current,xe=(le&2)!==0;if(xe?(le=le&1|2,v.flags|=128):le&=1,ce(Un,le),Hi(x,v,D,S),D=Nr?sm:0,!xe&&x!==null&&(x.flags&128)!==0)e:for(x=v.child;x!==null;){if(x.tag===13)x.memoizedState!==null&&mD(x,S,v);else if(x.tag===19)mD(x,S,v);else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===v)break e;for(;x.sibling===null;){if(x.return===null||x.return===v)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}switch(V){case"forwards":for(S=v.child,V=null;S!==null;)x=S.alternate,x!==null&&a1(x)===null&&(V=S),S=S.sibling;S=V,S===null?(V=v.child,v.child=null):(V=S.sibling,S.sibling=null),zj(v,!1,V,S,q,D);break;case"backwards":case"unstable_legacy-backwards":for(S=null,V=v.child,v.child=null;V!==null;){if(x=V.alternate,x!==null&&a1(x)===null){v.child=V;break}x=V.sibling,V.sibling=S,S=V,V=x}zj(v,!0,S,null,q,D);break;case"together":zj(v,!1,null,null,void 0,D);break;default:v.memoizedState=null}return v.child}function Jc(x,v,S){if(x!==null&&(v.dependencies=x.dependencies),mu|=v.lanes,(S&v.childLanes)===0)if(x!==null){if(X0(x,v,S,!1),(S&v.childLanes)===0)return null}else return null;if(x!==null&&v.child!==x.child)throw Error(r(153));if(v.child!==null){for(x=v.child,S=$c(x,x.pendingProps),v.child=S,S.return=v;x.sibling!==null;)x=x.sibling,S=S.sibling=$c(x,x.pendingProps),S.return=v;S.sibling=null}return v.child}function Bj(x,v){return(x.lanes&v)!==0?!0:(x=x.dependencies,!!(x!==null&&qb(x)))}function iQ(x,v,S){switch(v.tag){case 3:Te(v,v.stateNode.containerInfo),ou(v,ii,x.memoizedState.cache),Uh();break;case 27:case 5:Le(v);break;case 4:Te(v,v.stateNode.containerInfo);break;case 10:ou(v,v.type,v.memoizedProps.value);break;case 31:if(v.memoizedState!==null)return v.flags|=128,dj(v),null;break;case 13:var D=v.memoizedState;if(D!==null)return D.dehydrated!==null?(hu(v),v.flags|=128,null):(S&v.child.childLanes)!==0?xD(x,v,S):(hu(v),x=Jc(x,v,S),x!==null?x.sibling:null);hu(v);break;case 19:var V=(x.flags&128)!==0;if(D=(S&v.childLanes)!==0,D||(X0(x,v,S,!1),D=(S&v.childLanes)!==0),V){if(D)return gD(x,v,S);v.flags|=128}if(V=v.memoizedState,V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),ce(Un,Un.current),D)break;return null;case 22:return v.lanes=0,cD(x,v,S,v.pendingProps);case 24:ou(v,ii,x.memoizedState.cache)}return Jc(x,v,S)}function vD(x,v,S){if(x!==null)if(x.memoizedProps!==v.pendingProps)li=!0;else{if(!Bj(x,S)&&(v.flags&128)===0)return li=!1,iQ(x,v,S);li=(x.flags&131072)!==0}else li=!1,Nr&&(v.flags&1048576)!==0&&Z6(v,sm,v.index);switch(v.lanes=0,v.tag){case 16:e:{var D=v.pendingProps;if(x=$h(v.elementType),v.type=x,typeof x=="function")GN(x)?(D=Kh(x,D),v.tag=1,v=fD(null,v,x,D,S)):(v.tag=0,v=Dj(null,v,x,D,S));else{if(x!=null){var V=x.$$typeof;if(V===E){v.tag=11,v=sD(null,v,x,D,S);break e}else if(V===P){v.tag=14,v=lD(null,v,x,D,S);break e}}throw v=J(x)||x,Error(r(306,v,""))}}return v;case 0:return Dj(x,v,v.type,v.pendingProps,S);case 1:return D=v.type,V=Kh(D,v.pendingProps),fD(x,v,D,V,S);case 3:e:{if(Te(v,v.stateNode.containerInfo),x===null)throw Error(r(387));D=v.pendingProps;var q=v.memoizedState;V=q.element,ij(x,v),pm(v,D,null,S);var le=v.memoizedState;if(D=le.cache,ou(v,ii,D),D!==q.cache&&JN(v,[ii],S,!0),fm(),D=le.element,q.isDehydrated)if(q={element:D,isDehydrated:!1,cache:le.cache},v.updateQueue.baseState=q,v.memoizedState=q,v.flags&256){v=pD(x,v,D,S);break e}else if(D!==V){V=Il(Error(r(424)),v),lm(V),v=pD(x,v,D,S);break e}else for(x=v.stateNode.containerInfo,x.nodeType===9?x=x.body:x=x.nodeName==="HTML"?x.ownerDocument.body:x,pn=zl(x.firstChild),Fi=v,Nr=!0,su=null,Ol=!0,S=cE(v,null,D,S),v.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(Uh(),D===V){v=Jc(x,v,S);break e}Hi(x,v,D,S)}v=v.child}return v;case 26:return f1(x,v),x===null?(S=TI(v.type,null,v.pendingProps,null))?v.memoizedState=S:Nr||(S=v.type,x=v.pendingProps,D=M1(pe.current).createElement(S),D[It]=v,D[Et]=x,Ui(D,S,x),Ir(D),v.stateNode=D):v.memoizedState=TI(v.type,x.memoizedProps,v.pendingProps,x.memoizedState),null;case 27:return Le(v),x===null&&Nr&&(D=v.stateNode=kI(v.type,v.pendingProps,pe.current),Fi=v,Ol=!0,V=pn,wu(v.type)?(vS=V,pn=zl(D.firstChild)):pn=V),Hi(x,v,v.pendingProps.children,S),f1(x,v),x===null&&(v.flags|=4194304),v.child;case 5:return x===null&&Nr&&((V=D=pn)&&(D=LQ(D,v.type,v.pendingProps,Ol),D!==null?(v.stateNode=D,Fi=v,pn=zl(D.firstChild),Ol=!1,V=!0):V=!1),V||lu(v)),Le(v),V=v.type,q=v.pendingProps,le=x!==null?x.memoizedProps:null,D=q.children,fS(V,q)?D=null:le!==null&&fS(V,le)&&(v.flags|=32),v.memoizedState!==null&&(V=hj(x,v,ZK,null,null,S),Rm._currentValue=V),f1(x,v),Hi(x,v,D,S),v.child;case 6:return x===null&&Nr&&((x=S=pn)&&(S=OQ(S,v.pendingProps,Ol),S!==null?(v.stateNode=S,Fi=v,pn=null,x=!0):x=!1),x||lu(v)),null;case 13:return xD(x,v,S);case 4:return Te(v,v.stateNode.containerInfo),D=v.pendingProps,x===null?v.child=Xh(v,null,D,S):Hi(x,v,D,S),v.child;case 11:return sD(x,v,v.type,v.pendingProps,S);case 7:return Hi(x,v,v.pendingProps,S),v.child;case 8:return Hi(x,v,v.pendingProps.children,S),v.child;case 12:return Hi(x,v,v.pendingProps.children,S),v.child;case 10:return D=v.pendingProps,ou(v,v.type,D.value),Hi(x,v,D.children,S),v.child;case 9:return V=v.type._context,D=v.pendingProps.children,Wh(v),V=Vi(V),D=D(V),v.flags|=1,Hi(x,v,D,S),v.child;case 14:return lD(x,v,v.type,v.pendingProps,S);case 15:return oD(x,v,v.type,v.pendingProps,S);case 19:return gD(x,v,S);case 31:return nQ(x,v,S);case 22:return cD(x,v,S,v.pendingProps);case 24:return Wh(v),D=Vi(ii),x===null?(V=aj(),V===null&&(V=ln,q=ej(),V.pooledCache=q,q.refCount++,q!==null&&(V.pooledCacheLanes|=S),V=q),v.memoizedState={parent:D,cache:V},nj(v),ou(v,ii,V)):((x.lanes&S)!==0&&(ij(x,v),pm(v,null,null,S),fm()),V=x.memoizedState,q=v.memoizedState,V.parent!==D?(V={parent:D,cache:D},v.memoizedState=V,v.lanes===0&&(v.memoizedState=v.updateQueue.baseState=V),ou(v,ii,D)):(D=q.cache,ou(v,ii,D),D!==V.cache&&JN(v,[ii],S,!0))),Hi(x,v,v.pendingProps.children,S),v.child;case 29:throw v.pendingProps}throw Error(r(156,v.tag))}function ed(x){x.flags|=4}function Fj(x,v,S,D,V){if((v=(x.mode&32)!==0)&&(v=!1),v){if(x.flags|=16777216,(V&335544128)===V)if(x.stateNode.complete)x.flags|=8192;else if(WD())x.flags|=8192;else throw qh=Qb,rj}else x.flags&=-16777217}function bD(x,v){if(v.type!=="stylesheet"||(v.state.loading&4)!==0)x.flags&=-16777217;else if(x.flags|=16777216,!RI(v))if(WD())x.flags|=8192;else throw qh=Qb,rj}function x1(x,v){v!==null&&(x.flags|=4),x.flags&16384&&(v=x.tag!==22?dn():536870912,x.lanes|=v,lp|=v)}function ym(x,v){if(!Nr)switch(x.tailMode){case"hidden":v=x.tail;for(var S=null;v!==null;)v.alternate!==null&&(S=v),v=v.sibling;S===null?x.tail=null:S.sibling=null;break;case"collapsed":S=x.tail;for(var D=null;S!==null;)S.alternate!==null&&(D=S),S=S.sibling;D===null?v||x.tail===null?x.tail=null:x.tail.sibling=null:D.sibling=null}}function xn(x){var v=x.alternate!==null&&x.alternate.child===x.child,S=0,D=0;if(v)for(var V=x.child;V!==null;)S|=V.lanes|V.childLanes,D|=V.subtreeFlags&65011712,D|=V.flags&65011712,V.return=x,V=V.sibling;else for(V=x.child;V!==null;)S|=V.lanes|V.childLanes,D|=V.subtreeFlags,D|=V.flags,V.return=x,V=V.sibling;return x.subtreeFlags|=D,x.childLanes=S,v}function sQ(x,v,S){var D=v.pendingProps;switch(qN(v),v.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(v),null;case 1:return xn(v),null;case 3:return S=v.stateNode,D=null,x!==null&&(D=x.memoizedState.cache),v.memoizedState.cache!==D&&(v.flags|=2048),Zc(ii),ke(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(x===null||x.child===null)&&(q0(v)?ed(v):x===null||x.memoizedState.isDehydrated&&(v.flags&256)===0||(v.flags|=1024,ZN())),xn(v),null;case 26:var V=v.type,q=v.memoizedState;return x===null?(ed(v),q!==null?(xn(v),bD(v,q)):(xn(v),Fj(v,V,null,D,S))):q?q!==x.memoizedState?(ed(v),xn(v),bD(v,q)):(xn(v),v.flags&=-16777217):(x=x.memoizedProps,x!==D&&ed(v),xn(v),Fj(v,V,x,D,S)),null;case 27:if(Ne(v),S=pe.current,V=v.type,x!==null&&v.stateNode!=null)x.memoizedProps!==D&&ed(v);else{if(!D){if(v.stateNode===null)throw Error(r(166));return xn(v),null}x=de.current,q0(v)?Q6(v):(x=kI(V,D,S),v.stateNode=x,ed(v))}return xn(v),null;case 5:if(Ne(v),V=v.type,x!==null&&v.stateNode!=null)x.memoizedProps!==D&&ed(v);else{if(!D){if(v.stateNode===null)throw Error(r(166));return xn(v),null}if(q=de.current,q0(v))Q6(v);else{var le=M1(pe.current);switch(q){case 1:q=le.createElementNS("http://www.w3.org/2000/svg",V);break;case 2:q=le.createElementNS("http://www.w3.org/1998/Math/MathML",V);break;default:switch(V){case"svg":q=le.createElementNS("http://www.w3.org/2000/svg",V);break;case"math":q=le.createElementNS("http://www.w3.org/1998/Math/MathML",V);break;case"script":q=le.createElement("div"),q.innerHTML="<script><\/script>",q=q.removeChild(q.firstChild);break;case"select":q=typeof D.is=="string"?le.createElement("select",{is:D.is}):le.createElement("select"),D.multiple?q.multiple=!0:D.size&&(q.size=D.size);break;default:q=typeof D.is=="string"?le.createElement(V,{is:D.is}):le.createElement(V)}}q[It]=v,q[Et]=D;e:for(le=v.child;le!==null;){if(le.tag===5||le.tag===6)q.appendChild(le.stateNode);else if(le.tag!==4&&le.tag!==27&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===v)break e;for(;le.sibling===null;){if(le.return===null||le.return===v)break e;le=le.return}le.sibling.return=le.return,le=le.sibling}v.stateNode=q;e:switch(Ui(q,V,D),V){case"button":case"input":case"select":case"textarea":D=!!D.autoFocus;break e;case"img":D=!0;break e;default:D=!1}D&&ed(v)}}return xn(v),Fj(v,v.type,x===null?null:x.memoizedProps,v.pendingProps,S),null;case 6:if(x&&v.stateNode!=null)x.memoizedProps!==D&&ed(v);else{if(typeof D!="string"&&v.stateNode===null)throw Error(r(166));if(x=pe.current,q0(v)){if(x=v.stateNode,S=v.memoizedProps,D=null,V=Fi,V!==null)switch(V.tag){case 27:case 5:D=V.memoizedProps}x[It]=v,x=!!(x.nodeValue===S||D!==null&&D.suppressHydrationWarning===!0||xI(x.nodeValue,S)),x||lu(v,!0)}else x=M1(x).createTextNode(D),x[It]=v,v.stateNode=x}return xn(v),null;case 31:if(S=v.memoizedState,x===null||x.memoizedState!==null){if(D=q0(v),S!==null){if(x===null){if(!D)throw Error(r(318));if(x=v.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(557));x[It]=v}else Uh(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;xn(v),x=!1}else S=ZN(),x!==null&&x.memoizedState!==null&&(x.memoizedState.hydrationErrors=S),x=!0;if(!x)return v.flags&256?(dl(v),v):(dl(v),null);if((v.flags&128)!==0)throw Error(r(558))}return xn(v),null;case 13:if(D=v.memoizedState,x===null||x.memoizedState!==null&&x.memoizedState.dehydrated!==null){if(V=q0(v),D!==null&&D.dehydrated!==null){if(x===null){if(!V)throw Error(r(318));if(V=v.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(r(317));V[It]=v}else Uh(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;xn(v),V=!1}else V=ZN(),x!==null&&x.memoizedState!==null&&(x.memoizedState.hydrationErrors=V),V=!0;if(!V)return v.flags&256?(dl(v),v):(dl(v),null)}return dl(v),(v.flags&128)!==0?(v.lanes=S,v):(S=D!==null,x=x!==null&&x.memoizedState!==null,S&&(D=v.child,V=null,D.alternate!==null&&D.alternate.memoizedState!==null&&D.alternate.memoizedState.cachePool!==null&&(V=D.alternate.memoizedState.cachePool.pool),q=null,D.memoizedState!==null&&D.memoizedState.cachePool!==null&&(q=D.memoizedState.cachePool.pool),q!==V&&(D.flags|=2048)),S!==x&&S&&(v.child.flags|=8192),x1(v,v.updateQueue),xn(v),null);case 4:return ke(),x===null&&oS(v.stateNode.containerInfo),xn(v),null;case 10:return Zc(v.type),xn(v),null;case 19:if(ae(Un),D=v.memoizedState,D===null)return xn(v),null;if(V=(v.flags&128)!==0,q=D.rendering,q===null)if(V)ym(D,!1);else{if(Dn!==0||x!==null&&(x.flags&128)!==0)for(x=v.child;x!==null;){if(q=a1(x),q!==null){for(v.flags|=128,ym(D,!1),x=q.updateQueue,v.updateQueue=x,x1(v,x),v.subtreeFlags=0,x=S,S=v.child;S!==null;)$6(S,x),S=S.sibling;return ce(Un,Un.current&1|2),Nr&&qc(v,D.treeForkCount),v.child}x=x.sibling}D.tail!==null&&Bt()>y1&&(v.flags|=128,V=!0,ym(D,!1),v.lanes=4194304)}else{if(!V)if(x=a1(q),x!==null){if(v.flags|=128,V=!0,x=x.updateQueue,v.updateQueue=x,x1(v,x),ym(D,!0),D.tail===null&&D.tailMode==="hidden"&&!q.alternate&&!Nr)return xn(v),null}else 2*Bt()-D.renderingStartTime>y1&&S!==536870912&&(v.flags|=128,V=!0,ym(D,!1),v.lanes=4194304);D.isBackwards?(q.sibling=v.child,v.child=q):(x=D.last,x!==null?x.sibling=q:v.child=q,D.last=q)}return D.tail!==null?(x=D.tail,D.rendering=x,D.tail=x.sibling,D.renderingStartTime=Bt(),x.sibling=null,S=Un.current,ce(Un,V?S&1|2:S&1),Nr&&qc(v,D.treeForkCount),x):(xn(v),null);case 22:case 23:return dl(v),cj(),D=v.memoizedState!==null,x!==null?x.memoizedState!==null!==D&&(v.flags|=8192):D&&(v.flags|=8192),D?(S&536870912)!==0&&(v.flags&128)===0&&(xn(v),v.subtreeFlags&6&&(v.flags|=8192)):xn(v),S=v.updateQueue,S!==null&&x1(v,S.retryQueue),S=null,x!==null&&x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(S=x.memoizedState.cachePool.pool),D=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(D=v.memoizedState.cachePool.pool),D!==S&&(v.flags|=2048),x!==null&&ae(Yh),null;case 24:return S=null,x!==null&&(S=x.memoizedState.cache),v.memoizedState.cache!==S&&(v.flags|=2048),Zc(ii),xn(v),null;case 25:return null;case 30:return null}throw Error(r(156,v.tag))}function lQ(x,v){switch(qN(v),v.tag){case 1:return x=v.flags,x&65536?(v.flags=x&-65537|128,v):null;case 3:return Zc(ii),ke(),x=v.flags,(x&65536)!==0&&(x&128)===0?(v.flags=x&-65537|128,v):null;case 26:case 27:case 5:return Ne(v),null;case 31:if(v.memoizedState!==null){if(dl(v),v.alternate===null)throw Error(r(340));Uh()}return x=v.flags,x&65536?(v.flags=x&-65537|128,v):null;case 13:if(dl(v),x=v.memoizedState,x!==null&&x.dehydrated!==null){if(v.alternate===null)throw Error(r(340));Uh()}return x=v.flags,x&65536?(v.flags=x&-65537|128,v):null;case 19:return ae(Un),null;case 4:return ke(),null;case 10:return Zc(v.type),null;case 22:case 23:return dl(v),cj(),x!==null&&ae(Yh),x=v.flags,x&65536?(v.flags=x&-65537|128,v):null;case 24:return Zc(ii),null;case 25:return null;default:return null}}function yD(x,v){switch(qN(v),v.tag){case 3:Zc(ii),ke();break;case 26:case 27:case 5:Ne(v);break;case 4:ke();break;case 31:v.memoizedState!==null&&dl(v);break;case 13:dl(v);break;case 19:ae(Un);break;case 10:Zc(v.type);break;case 22:case 23:dl(v),cj(),x!==null&&ae(Yh);break;case 24:Zc(ii)}}function wm(x,v){try{var S=v.updateQueue,D=S!==null?S.lastEffect:null;if(D!==null){var V=D.next;S=V;do{if((S.tag&x)===x){D=void 0;var q=S.create,le=S.inst;D=q(),le.destroy=D}S=S.next}while(S!==V)}}catch(xe){Yr(v,v.return,xe)}}function pu(x,v,S){try{var D=v.updateQueue,V=D!==null?D.lastEffect:null;if(V!==null){var q=V.next;D=q;do{if((D.tag&x)===x){var le=D.inst,xe=le.destroy;if(xe!==void 0){le.destroy=void 0,V=v;var Me=S,Je=xe;try{Je()}catch(ft){Yr(V,Me,ft)}}}D=D.next}while(D!==q)}}catch(ft){Yr(v,v.return,ft)}}function wD(x){var v=x.updateQueue;if(v!==null){var S=x.stateNode;try{uE(v,S)}catch(D){Yr(x,x.return,D)}}}function _D(x,v,S){S.props=Kh(x.type,x.memoizedProps),S.state=x.memoizedState;try{S.componentWillUnmount()}catch(D){Yr(x,v,D)}}function _m(x,v){try{var S=x.ref;if(S!==null){switch(x.tag){case 26:case 27:case 5:var D=x.stateNode;break;case 30:D=x.stateNode;break;default:D=x.stateNode}typeof S=="function"?x.refCleanup=S(D):S.current=D}}catch(V){Yr(x,v,V)}}function Ko(x,v){var S=x.ref,D=x.refCleanup;if(S!==null)if(typeof D=="function")try{D()}catch(V){Yr(x,v,V)}finally{x.refCleanup=null,x=x.alternate,x!=null&&(x.refCleanup=null)}else if(typeof S=="function")try{S(null)}catch(V){Yr(x,v,V)}else S.current=null}function ND(x){var v=x.type,S=x.memoizedProps,D=x.stateNode;try{e:switch(v){case"button":case"input":case"select":case"textarea":S.autoFocus&&D.focus();break e;case"img":S.src?D.src=S.src:S.srcSet&&(D.srcset=S.srcSet)}}catch(V){Yr(x,x.return,V)}}function Vj(x,v,S){try{var D=x.stateNode;TQ(D,x.type,S,v),D[Et]=v}catch(V){Yr(x,x.return,V)}}function jD(x){return x.tag===5||x.tag===3||x.tag===26||x.tag===27&&wu(x.type)||x.tag===4}function Hj(x){e:for(;;){for(;x.sibling===null;){if(x.return===null||jD(x.return))return null;x=x.return}for(x.sibling.return=x.return,x=x.sibling;x.tag!==5&&x.tag!==6&&x.tag!==18;){if(x.tag===27&&wu(x.type)||x.flags&2||x.child===null||x.tag===4)continue e;x.child.return=x,x=x.child}if(!(x.flags&2))return x.stateNode}}function Uj(x,v,S){var D=x.tag;if(D===5||D===6)x=x.stateNode,v?(S.nodeType===9?S.body:S.nodeName==="HTML"?S.ownerDocument.body:S).insertBefore(x,v):(v=S.nodeType===9?S.body:S.nodeName==="HTML"?S.ownerDocument.body:S,v.appendChild(x),S=S._reactRootContainer,S!=null||v.onclick!==null||(v.onclick=gi));else if(D!==4&&(D===27&&wu(x.type)&&(S=x.stateNode,v=null),x=x.child,x!==null))for(Uj(x,v,S),x=x.sibling;x!==null;)Uj(x,v,S),x=x.sibling}function m1(x,v,S){var D=x.tag;if(D===5||D===6)x=x.stateNode,v?S.insertBefore(x,v):S.appendChild(x);else if(D!==4&&(D===27&&wu(x.type)&&(S=x.stateNode),x=x.child,x!==null))for(m1(x,v,S),x=x.sibling;x!==null;)m1(x,v,S),x=x.sibling}function SD(x){var v=x.stateNode,S=x.memoizedProps;try{for(var D=x.type,V=v.attributes;V.length;)v.removeAttributeNode(V[0]);Ui(v,D,S),v[It]=x,v[Et]=S}catch(q){Yr(x,x.return,q)}}var td=!1,oi=!1,Gj=!1,kD=typeof WeakSet=="function"?WeakSet:Set,Ai=null;function oQ(x,v){if(x=x.containerInfo,uS=P1,x=Y(x),ee(x)){if("selectionStart"in x)var S={start:x.selectionStart,end:x.selectionEnd};else e:{S=(S=x.ownerDocument)&&S.defaultView||window;var D=S.getSelection&&S.getSelection();if(D&&D.rangeCount!==0){S=D.anchorNode;var V=D.anchorOffset,q=D.focusNode;D=D.focusOffset;try{S.nodeType,q.nodeType}catch{S=null;break e}var le=0,xe=-1,Me=-1,Je=0,ft=0,bt=x,at=null;t:for(;;){for(var ot;bt!==S||V!==0&&bt.nodeType!==3||(xe=le+V),bt!==q||D!==0&&bt.nodeType!==3||(Me=le+D),bt.nodeType===3&&(le+=bt.nodeValue.length),(ot=bt.firstChild)!==null;)at=bt,bt=ot;for(;;){if(bt===x)break t;if(at===S&&++Je===V&&(xe=le),at===q&&++ft===D&&(Me=le),(ot=bt.nextSibling)!==null)break;bt=at,at=bt.parentNode}bt=ot}S=xe===-1||Me===-1?null:{start:xe,end:Me}}else S=null}S=S||{start:0,end:0}}else S=null;for(hS={focusedElem:x,selectionRange:S},P1=!1,Ai=v;Ai!==null;)if(v=Ai,x=v.child,(v.subtreeFlags&1028)!==0&&x!==null)x.return=v,Ai=x;else for(;Ai!==null;){switch(v=Ai,q=v.alternate,x=v.flags,v.tag){case 0:if((x&4)!==0&&(x=v.updateQueue,x=x!==null?x.events:null,x!==null))for(S=0;S<x.length;S++)V=x[S],V.ref.impl=V.nextImpl;break;case 11:case 15:break;case 1:if((x&1024)!==0&&q!==null){x=void 0,S=v,V=q.memoizedProps,q=q.memoizedState,D=S.stateNode;try{var ca=Kh(S.type,V);x=D.getSnapshotBeforeUpdate(ca,q),D.__reactInternalSnapshotBeforeUpdate=x}catch(Ma){Yr(S,S.return,Ma)}}break;case 3:if((x&1024)!==0){if(x=v.stateNode.containerInfo,S=x.nodeType,S===9)xS(x);else if(S===1)switch(x.nodeName){case"HEAD":case"HTML":case"BODY":xS(x);break;default:x.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((x&1024)!==0)throw Error(r(163))}if(x=v.sibling,x!==null){x.return=v.return,Ai=x;break}Ai=v.return}}function CD(x,v,S){var D=S.flags;switch(S.tag){case 0:case 11:case 15:rd(x,S),D&4&&wm(5,S);break;case 1:if(rd(x,S),D&4)if(x=S.stateNode,v===null)try{x.componentDidMount()}catch(le){Yr(S,S.return,le)}else{var V=Kh(S.type,v.memoizedProps);v=v.memoizedState;try{x.componentDidUpdate(V,v,x.__reactInternalSnapshotBeforeUpdate)}catch(le){Yr(S,S.return,le)}}D&64&&wD(S),D&512&&_m(S,S.return);break;case 3:if(rd(x,S),D&64&&(x=S.updateQueue,x!==null)){if(v=null,S.child!==null)switch(S.child.tag){case 27:case 5:v=S.child.stateNode;break;case 1:v=S.child.stateNode}try{uE(x,v)}catch(le){Yr(S,S.return,le)}}break;case 27:v===null&&D&4&&SD(S);case 26:case 5:rd(x,S),v===null&&D&4&&ND(S),D&512&&_m(S,S.return);break;case 12:rd(x,S);break;case 31:rd(x,S),D&4&&MD(x,S);break;case 13:rd(x,S),D&4&&ED(x,S),D&64&&(x=S.memoizedState,x!==null&&(x=x.dehydrated,x!==null&&(S=gQ.bind(null,S),PQ(x,S))));break;case 22:if(D=S.memoizedState!==null||td,!D){v=v!==null&&v.memoizedState!==null||oi,V=td;var q=oi;td=D,(oi=v)&&!q?nd(x,S,(S.subtreeFlags&8772)!==0):rd(x,S),td=V,oi=q}break;case 30:break;default:rd(x,S)}}function AD(x){var v=x.alternate;v!==null&&(x.alternate=null,AD(v)),x.child=null,x.deletions=null,x.sibling=null,x.tag===5&&(v=x.stateNode,v!==null&&mr(v)),x.stateNode=null,x.return=null,x.dependencies=null,x.memoizedProps=null,x.memoizedState=null,x.pendingProps=null,x.stateNode=null,x.updateQueue=null}var bn=null,Bs=!1;function ad(x,v,S){for(S=S.child;S!==null;)TD(x,v,S),S=S.sibling}function TD(x,v,S){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(it,S)}catch{}switch(S.tag){case 26:oi||Ko(S,v),ad(x,v,S),S.memoizedState?S.memoizedState.count--:S.stateNode&&(S=S.stateNode,S.parentNode.removeChild(S));break;case 27:oi||Ko(S,v);var D=bn,V=Bs;wu(S.type)&&(bn=S.stateNode,Bs=!1),ad(x,v,S),Em(S.stateNode),bn=D,Bs=V;break;case 5:oi||Ko(S,v);case 6:if(D=bn,V=Bs,bn=null,ad(x,v,S),bn=D,Bs=V,bn!==null)if(Bs)try{(bn.nodeType===9?bn.body:bn.nodeName==="HTML"?bn.ownerDocument.body:bn).removeChild(S.stateNode)}catch(q){Yr(S,v,q)}else try{bn.removeChild(S.stateNode)}catch(q){Yr(S,v,q)}break;case 18:bn!==null&&(Bs?(x=bn,wI(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,S.stateNode),xp(x)):wI(bn,S.stateNode));break;case 4:D=bn,V=Bs,bn=S.stateNode.containerInfo,Bs=!0,ad(x,v,S),bn=D,Bs=V;break;case 0:case 11:case 14:case 15:pu(2,S,v),oi||pu(4,S,v),ad(x,v,S);break;case 1:oi||(Ko(S,v),D=S.stateNode,typeof D.componentWillUnmount=="function"&&_D(S,v,D)),ad(x,v,S);break;case 21:ad(x,v,S);break;case 22:oi=(D=oi)||S.memoizedState!==null,ad(x,v,S),oi=D;break;default:ad(x,v,S)}}function MD(x,v){if(v.memoizedState===null&&(x=v.alternate,x!==null&&(x=x.memoizedState,x!==null))){x=x.dehydrated;try{xp(x)}catch(S){Yr(v,v.return,S)}}}function ED(x,v){if(v.memoizedState===null&&(x=v.alternate,x!==null&&(x=x.memoizedState,x!==null&&(x=x.dehydrated,x!==null))))try{xp(x)}catch(S){Yr(v,v.return,S)}}function cQ(x){switch(x.tag){case 31:case 13:case 19:var v=x.stateNode;return v===null&&(v=x.stateNode=new kD),v;case 22:return x=x.stateNode,v=x._retryCache,v===null&&(v=x._retryCache=new kD),v;default:throw Error(r(435,x.tag))}}function g1(x,v){var S=cQ(x);v.forEach(function(D){if(!S.has(D)){S.add(D);var V=vQ.bind(null,x,D);D.then(V,V)}})}function Fs(x,v){var S=v.deletions;if(S!==null)for(var D=0;D<S.length;D++){var V=S[D],q=x,le=v,xe=le;e:for(;xe!==null;){switch(xe.tag){case 27:if(wu(xe.type)){bn=xe.stateNode,Bs=!1;break e}break;case 5:bn=xe.stateNode,Bs=!1;break e;case 3:case 4:bn=xe.stateNode.containerInfo,Bs=!0;break e}xe=xe.return}if(bn===null)throw Error(r(160));TD(q,le,V),bn=null,Bs=!1,q=V.alternate,q!==null&&(q.return=null),V.return=null}if(v.subtreeFlags&13886)for(v=v.child;v!==null;)DD(v,x),v=v.sibling}var go=null;function DD(x,v){var S=x.alternate,D=x.flags;switch(x.tag){case 0:case 11:case 14:case 15:Fs(v,x),Vs(x),D&4&&(pu(3,x,x.return),wm(3,x),pu(5,x,x.return));break;case 1:Fs(v,x),Vs(x),D&512&&(oi||S===null||Ko(S,S.return)),D&64&&td&&(x=x.updateQueue,x!==null&&(D=x.callbacks,D!==null&&(S=x.shared.hiddenCallbacks,x.shared.hiddenCallbacks=S===null?D:S.concat(D))));break;case 26:var V=go;if(Fs(v,x),Vs(x),D&512&&(oi||S===null||Ko(S,S.return)),D&4){var q=S!==null?S.memoizedState:null;if(D=x.memoizedState,S===null)if(D===null)if(x.stateNode===null){e:{D=x.type,S=x.memoizedProps,V=V.ownerDocument||V;t:switch(D){case"title":q=V.getElementsByTagName("title")[0],(!q||q[jr]||q[It]||q.namespaceURI==="http://www.w3.org/2000/svg"||q.hasAttribute("itemprop"))&&(q=V.createElement(D),V.head.insertBefore(q,V.querySelector("head > title"))),Ui(q,D,S),q[It]=x,Ir(q),D=q;break e;case"link":var le=DI("link","href",V).get(D+(S.href||""));if(le){for(var xe=0;xe<le.length;xe++)if(q=le[xe],q.getAttribute("href")===(S.href==null||S.href===""?null:S.href)&&q.getAttribute("rel")===(S.rel==null?null:S.rel)&&q.getAttribute("title")===(S.title==null?null:S.title)&&q.getAttribute("crossorigin")===(S.crossOrigin==null?null:S.crossOrigin)){le.splice(xe,1);break t}}q=V.createElement(D),Ui(q,D,S),V.head.appendChild(q);break;case"meta":if(le=DI("meta","content",V).get(D+(S.content||""))){for(xe=0;xe<le.length;xe++)if(q=le[xe],q.getAttribute("content")===(S.content==null?null:""+S.content)&&q.getAttribute("name")===(S.name==null?null:S.name)&&q.getAttribute("property")===(S.property==null?null:S.property)&&q.getAttribute("http-equiv")===(S.httpEquiv==null?null:S.httpEquiv)&&q.getAttribute("charset")===(S.charSet==null?null:S.charSet)){le.splice(xe,1);break t}}q=V.createElement(D),Ui(q,D,S),V.head.appendChild(q);break;default:throw Error(r(468,D))}q[It]=x,Ir(q),D=q}x.stateNode=D}else II(V,x.type,x.stateNode);else x.stateNode=EI(V,D,x.memoizedProps);else q!==D?(q===null?S.stateNode!==null&&(S=S.stateNode,S.parentNode.removeChild(S)):q.count--,D===null?II(V,x.type,x.stateNode):EI(V,D,x.memoizedProps)):D===null&&x.stateNode!==null&&Vj(x,x.memoizedProps,S.memoizedProps)}break;case 27:Fs(v,x),Vs(x),D&512&&(oi||S===null||Ko(S,S.return)),S!==null&&D&4&&Vj(x,x.memoizedProps,S.memoizedProps);break;case 5:if(Fs(v,x),Vs(x),D&512&&(oi||S===null||Ko(S,S.return)),x.flags&32){V=x.stateNode;try{ho(V,"")}catch(ca){Yr(x,x.return,ca)}}D&4&&x.stateNode!=null&&(V=x.memoizedProps,Vj(x,V,S!==null?S.memoizedProps:V)),D&1024&&(Gj=!0);break;case 6:if(Fs(v,x),Vs(x),D&4){if(x.stateNode===null)throw Error(r(162));D=x.memoizedProps,S=x.stateNode;try{S.nodeValue=D}catch(ca){Yr(x,x.return,ca)}}break;case 3:if(I1=null,V=go,go=E1(v.containerInfo),Fs(v,x),go=V,Vs(x),D&4&&S!==null&&S.memoizedState.isDehydrated)try{xp(v.containerInfo)}catch(ca){Yr(x,x.return,ca)}Gj&&(Gj=!1,ID(x));break;case 4:D=go,go=E1(x.stateNode.containerInfo),Fs(v,x),Vs(x),go=D;break;case 12:Fs(v,x),Vs(x);break;case 31:Fs(v,x),Vs(x),D&4&&(D=x.updateQueue,D!==null&&(x.updateQueue=null,g1(x,D)));break;case 13:Fs(v,x),Vs(x),x.child.flags&8192&&x.memoizedState!==null!=(S!==null&&S.memoizedState!==null)&&(b1=Bt()),D&4&&(D=x.updateQueue,D!==null&&(x.updateQueue=null,g1(x,D)));break;case 22:V=x.memoizedState!==null;var Me=S!==null&&S.memoizedState!==null,Je=td,ft=oi;if(td=Je||V,oi=ft||Me,Fs(v,x),oi=ft,td=Je,Vs(x),D&8192)e:for(v=x.stateNode,v._visibility=V?v._visibility&-2:v._visibility|1,V&&(S===null||Me||td||oi||Qh(x)),S=null,v=x;;){if(v.tag===5||v.tag===26){if(S===null){Me=S=v;try{if(q=Me.stateNode,V)le=q.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{xe=Me.stateNode;var bt=Me.memoizedProps.style,at=bt!=null&&bt.hasOwnProperty("display")?bt.display:null;xe.style.display=at==null||typeof at=="boolean"?"":(""+at).trim()}}catch(ca){Yr(Me,Me.return,ca)}}}else if(v.tag===6){if(S===null){Me=v;try{Me.stateNode.nodeValue=V?"":Me.memoizedProps}catch(ca){Yr(Me,Me.return,ca)}}}else if(v.tag===18){if(S===null){Me=v;try{var ot=Me.stateNode;V?_I(ot,!0):_I(Me.stateNode,!1)}catch(ca){Yr(Me,Me.return,ca)}}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===x)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===x)break e;for(;v.sibling===null;){if(v.return===null||v.return===x)break e;S===v&&(S=null),v=v.return}S===v&&(S=null),v.sibling.return=v.return,v=v.sibling}D&4&&(D=x.updateQueue,D!==null&&(S=D.retryQueue,S!==null&&(D.retryQueue=null,g1(x,S))));break;case 19:Fs(v,x),Vs(x),D&4&&(D=x.updateQueue,D!==null&&(x.updateQueue=null,g1(x,D)));break;case 30:break;case 21:break;default:Fs(v,x),Vs(x)}}function Vs(x){var v=x.flags;if(v&2){try{for(var S,D=x.return;D!==null;){if(jD(D)){S=D;break}D=D.return}if(S==null)throw Error(r(160));switch(S.tag){case 27:var V=S.stateNode,q=Hj(x);m1(x,q,V);break;case 5:var le=S.stateNode;S.flags&32&&(ho(le,""),S.flags&=-33);var xe=Hj(x);m1(x,xe,le);break;case 3:case 4:var Me=S.stateNode.containerInfo,Je=Hj(x);Uj(x,Je,Me);break;default:throw Error(r(161))}}catch(ft){Yr(x,x.return,ft)}x.flags&=-3}v&4096&&(x.flags&=-4097)}function ID(x){if(x.subtreeFlags&1024)for(x=x.child;x!==null;){var v=x;ID(v),v.tag===5&&v.flags&1024&&v.stateNode.reset(),x=x.sibling}}function rd(x,v){if(v.subtreeFlags&8772)for(v=v.child;v!==null;)CD(x,v.alternate,v),v=v.sibling}function Qh(x){for(x=x.child;x!==null;){var v=x;switch(v.tag){case 0:case 11:case 14:case 15:pu(4,v,v.return),Qh(v);break;case 1:Ko(v,v.return);var S=v.stateNode;typeof S.componentWillUnmount=="function"&&_D(v,v.return,S),Qh(v);break;case 27:Em(v.stateNode);case 26:case 5:Ko(v,v.return),Qh(v);break;case 22:v.memoizedState===null&&Qh(v);break;case 30:Qh(v);break;default:Qh(v)}x=x.sibling}}function nd(x,v,S){for(S=S&&(v.subtreeFlags&8772)!==0,v=v.child;v!==null;){var D=v.alternate,V=x,q=v,le=q.flags;switch(q.tag){case 0:case 11:case 15:nd(V,q,S),wm(4,q);break;case 1:if(nd(V,q,S),D=q,V=D.stateNode,typeof V.componentDidMount=="function")try{V.componentDidMount()}catch(Je){Yr(D,D.return,Je)}if(D=q,V=D.updateQueue,V!==null){var xe=D.stateNode;try{var Me=V.shared.hiddenCallbacks;if(Me!==null)for(V.shared.hiddenCallbacks=null,V=0;V<Me.length;V++)dE(Me[V],xe)}catch(Je){Yr(D,D.return,Je)}}S&&le&64&&wD(q),_m(q,q.return);break;case 27:SD(q);case 26:case 5:nd(V,q,S),S&&D===null&&le&4&&ND(q),_m(q,q.return);break;case 12:nd(V,q,S);break;case 31:nd(V,q,S),S&&le&4&&MD(V,q);break;case 13:nd(V,q,S),S&&le&4&&ED(V,q);break;case 22:q.memoizedState===null&&nd(V,q,S),_m(q,q.return);break;case 30:break;default:nd(V,q,S)}v=v.sibling}}function Wj(x,v){var S=null;x!==null&&x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(S=x.memoizedState.cachePool.pool),x=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(x=v.memoizedState.cachePool.pool),x!==S&&(x!=null&&x.refCount++,S!=null&&om(S))}function Yj(x,v){x=null,v.alternate!==null&&(x=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==x&&(v.refCount++,x!=null&&om(x))}function vo(x,v,S,D){if(v.subtreeFlags&10256)for(v=v.child;v!==null;)RD(x,v,S,D),v=v.sibling}function RD(x,v,S,D){var V=v.flags;switch(v.tag){case 0:case 11:case 15:vo(x,v,S,D),V&2048&&wm(9,v);break;case 1:vo(x,v,S,D);break;case 3:vo(x,v,S,D),V&2048&&(x=null,v.alternate!==null&&(x=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==x&&(v.refCount++,x!=null&&om(x)));break;case 12:if(V&2048){vo(x,v,S,D),x=v.stateNode;try{var q=v.memoizedProps,le=q.id,xe=q.onPostCommit;typeof xe=="function"&&xe(le,v.alternate===null?"mount":"update",x.passiveEffectDuration,-0)}catch(Me){Yr(v,v.return,Me)}}else vo(x,v,S,D);break;case 31:vo(x,v,S,D);break;case 13:vo(x,v,S,D);break;case 23:break;case 22:q=v.stateNode,le=v.alternate,v.memoizedState!==null?q._visibility&2?vo(x,v,S,D):Nm(x,v):q._visibility&2?vo(x,v,S,D):(q._visibility|=2,np(x,v,S,D,(v.subtreeFlags&10256)!==0||!1)),V&2048&&Wj(le,v);break;case 24:vo(x,v,S,D),V&2048&&Yj(v.alternate,v);break;default:vo(x,v,S,D)}}function np(x,v,S,D,V){for(V=V&&((v.subtreeFlags&10256)!==0||!1),v=v.child;v!==null;){var q=x,le=v,xe=S,Me=D,Je=le.flags;switch(le.tag){case 0:case 11:case 15:np(q,le,xe,Me,V),wm(8,le);break;case 23:break;case 22:var ft=le.stateNode;le.memoizedState!==null?ft._visibility&2?np(q,le,xe,Me,V):Nm(q,le):(ft._visibility|=2,np(q,le,xe,Me,V)),V&&Je&2048&&Wj(le.alternate,le);break;case 24:np(q,le,xe,Me,V),V&&Je&2048&&Yj(le.alternate,le);break;default:np(q,le,xe,Me,V)}v=v.sibling}}function Nm(x,v){if(v.subtreeFlags&10256)for(v=v.child;v!==null;){var S=x,D=v,V=D.flags;switch(D.tag){case 22:Nm(S,D),V&2048&&Wj(D.alternate,D);break;case 24:Nm(S,D),V&2048&&Yj(D.alternate,D);break;default:Nm(S,D)}v=v.sibling}}var jm=8192;function ip(x,v,S){if(x.subtreeFlags&jm)for(x=x.child;x!==null;)LD(x,v,S),x=x.sibling}function LD(x,v,S){switch(x.tag){case 26:ip(x,v,S),x.flags&jm&&x.memoizedState!==null&&XQ(S,go,x.memoizedState,x.memoizedProps);break;case 5:ip(x,v,S);break;case 3:case 4:var D=go;go=E1(x.stateNode.containerInfo),ip(x,v,S),go=D;break;case 22:x.memoizedState===null&&(D=x.alternate,D!==null&&D.memoizedState!==null?(D=jm,jm=16777216,ip(x,v,S),jm=D):ip(x,v,S));break;default:ip(x,v,S)}}function OD(x){var v=x.alternate;if(v!==null&&(x=v.child,x!==null)){v.child=null;do v=x.sibling,x.sibling=null,x=v;while(x!==null)}}function Sm(x){var v=x.deletions;if((x.flags&16)!==0){if(v!==null)for(var S=0;S<v.length;S++){var D=v[S];Ai=D,zD(D,x)}OD(x)}if(x.subtreeFlags&10256)for(x=x.child;x!==null;)PD(x),x=x.sibling}function PD(x){switch(x.tag){case 0:case 11:case 15:Sm(x),x.flags&2048&&pu(9,x,x.return);break;case 3:Sm(x);break;case 12:Sm(x);break;case 22:var v=x.stateNode;x.memoizedState!==null&&v._visibility&2&&(x.return===null||x.return.tag!==13)?(v._visibility&=-3,v1(x)):Sm(x);break;default:Sm(x)}}function v1(x){var v=x.deletions;if((x.flags&16)!==0){if(v!==null)for(var S=0;S<v.length;S++){var D=v[S];Ai=D,zD(D,x)}OD(x)}for(x=x.child;x!==null;){switch(v=x,v.tag){case 0:case 11:case 15:pu(8,v,v.return),v1(v);break;case 22:S=v.stateNode,S._visibility&2&&(S._visibility&=-3,v1(v));break;default:v1(v)}x=x.sibling}}function zD(x,v){for(;Ai!==null;){var S=Ai;switch(S.tag){case 0:case 11:case 15:pu(8,S,v);break;case 23:case 22:if(S.memoizedState!==null&&S.memoizedState.cachePool!==null){var D=S.memoizedState.cachePool.pool;D!=null&&D.refCount++}break;case 24:om(S.memoizedState.cache)}if(D=S.child,D!==null)D.return=S,Ai=D;else e:for(S=x;Ai!==null;){D=Ai;var V=D.sibling,q=D.return;if(AD(D),D===S){Ai=null;break e}if(V!==null){V.return=q,Ai=V;break e}Ai=q}}}var dQ={getCacheForType:function(x){var v=Vi(ii),S=v.data.get(x);return S===void 0&&(S=x(),v.data.set(x,S)),S},cacheSignal:function(){return Vi(ii).controller.signal}},uQ=typeof WeakMap=="function"?WeakMap:Map,Lr=0,ln=null,dr=null,vr=0,Wr=0,ul=null,xu=!1,sp=!1,$j=!1,id=0,Dn=0,mu=0,Jh=0,qj=0,hl=0,lp=0,km=null,Hs=null,Xj=!1,b1=0,BD=0,y1=1/0,w1=null,gu=null,vi=0,vu=null,op=null,sd=0,Zj=0,Kj=null,FD=null,Cm=0,Qj=null;function fl(){return(Lr&2)!==0&&vr!==0?vr&-vr:W.T!==null?nS():St()}function VD(){if(hl===0)if((vr&536870912)===0||Nr){var x=Xa;Xa<<=1,(Xa&3932160)===0&&(Xa=262144),hl=x}else hl=536870912;return x=cl.current,x!==null&&(x.flags|=32),hl}function Us(x,v,S){(x===ln&&(Wr===2||Wr===9)||x.cancelPendingCommit!==null)&&(cp(x,0),bu(x,vr,hl,!1)),ti(x,S),((Lr&2)===0||x!==ln)&&(x===ln&&((Lr&2)===0&&(Jh|=S),Dn===4&&bu(x,vr,hl,!1)),Qo(x))}function HD(x,v,S){if((Lr&6)!==0)throw Error(r(327));var D=!S&&(v&127)===0&&(v&x.expiredLanes)===0||Nn(x,v),V=D?pQ(x,v):eS(x,v,!0),q=D;do{if(V===0){sp&&!D&&bu(x,v,0,!1);break}else{if(S=x.current.alternate,q&&!hQ(S)){V=eS(x,v,!1),q=!1;continue}if(V===2){if(q=v,x.errorRecoveryDisabledLanes&q)var le=0;else le=x.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){v=le;e:{var xe=x;V=km;var Me=xe.current.memoizedState.isDehydrated;if(Me&&(cp(xe,le).flags|=256),le=eS(xe,le,!1),le!==2){if($j&&!Me){xe.errorRecoveryDisabledLanes|=q,Jh|=q,V=4;break e}q=Hs,Hs=V,q!==null&&(Hs===null?Hs=q:Hs.push.apply(Hs,q))}V=le}if(q=!1,V!==2)continue}}if(V===1){cp(x,0),bu(x,v,0,!0);break}e:{switch(D=x,q=V,q){case 0:case 1:throw Error(r(345));case 4:if((v&4194048)!==v)break;case 6:bu(D,v,hl,!xu);break e;case 2:Hs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((v&62914560)===v&&(V=b1+300-Bt(),10<V)){if(bu(D,v,hl,!xu),Js(D,0,!0)!==0)break e;sd=v,D.timeoutHandle=bI(UD.bind(null,D,S,Hs,w1,Xj,v,hl,Jh,lp,xu,q,"Throttled",-0,0),V);break e}UD(D,S,Hs,w1,Xj,v,hl,Jh,lp,xu,q,null,-0,0)}}break}while(!0);Qo(x)}function UD(x,v,S,D,V,q,le,xe,Me,Je,ft,bt,at,ot){if(x.timeoutHandle=-1,bt=v.subtreeFlags,bt&8192||(bt&16785408)===16785408){bt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:gi},LD(v,q,bt);var ca=(q&62914560)===q?b1-Bt():(q&4194048)===q?BD-Bt():0;if(ca=ZQ(bt,ca),ca!==null){sd=q,x.cancelPendingCommit=ca(KD.bind(null,x,v,q,S,D,V,le,xe,Me,ft,bt,null,at,ot)),bu(x,q,le,!Je);return}}KD(x,v,q,S,D,V,le,xe,Me)}function hQ(x){for(var v=x;;){var S=v.tag;if((S===0||S===11||S===15)&&v.flags&16384&&(S=v.updateQueue,S!==null&&(S=S.stores,S!==null)))for(var D=0;D<S.length;D++){var V=S[D],q=V.getSnapshot;V=V.value;try{if(!L(q(),V))return!1}catch{return!1}}if(S=v.child,v.subtreeFlags&16384&&S!==null)S.return=v,v=S;else{if(v===x)break;for(;v.sibling===null;){if(v.return===null||v.return===x)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function bu(x,v,S,D){v&=~qj,v&=~Jh,x.suspendedLanes|=v,x.pingedLanes&=~v,D&&(x.warmLanes|=v),D=x.expirationTimes;for(var V=v;0<V;){var q=31-st(V),le=1<<q;D[q]=-1,V&=~le}S!==0&&uo(x,S,v)}function _1(){return(Lr&6)===0?(Am(0),!1):!0}function Jj(){if(dr!==null){if(Wr===0)var x=dr.return;else x=dr,Xc=Gh=null,xj(x),J0=null,dm=0,x=dr;for(;x!==null;)yD(x.alternate,x),x=x.return;dr=null}}function cp(x,v){var S=x.timeoutHandle;S!==-1&&(x.timeoutHandle=-1,DQ(S)),S=x.cancelPendingCommit,S!==null&&(x.cancelPendingCommit=null,S()),sd=0,Jj(),ln=x,dr=S=$c(x.current,null),vr=v,Wr=0,ul=null,xu=!1,sp=Nn(x,v),$j=!1,lp=hl=qj=Jh=mu=Dn=0,Hs=km=null,Xj=!1,(v&8)!==0&&(v|=v&32);var D=x.entangledLanes;if(D!==0)for(x=x.entanglements,D&=v;0<D;){var V=31-st(D),q=1<<V;v|=x[V],D&=~q}return id=v,Ya(),S}function GD(x,v){Ja=null,W.H=vm,v===Q0||v===Kb?(v=sE(),Wr=3):v===rj?(v=sE(),Wr=4):Wr=v===Ej?8:v!==null&&typeof v=="object"&&typeof v.then=="function"?6:1,ul=v,dr===null&&(Dn=1,u1(x,Il(v,x.current)))}function WD(){var x=cl.current;return x===null?!0:(vr&4194048)===vr?Pl===null:(vr&62914560)===vr||(vr&536870912)!==0?x===Pl:!1}function YD(){var x=W.H;return W.H=vm,x===null?vm:x}function $D(){var x=W.A;return W.A=dQ,x}function N1(){Dn=4,xu||(vr&4194048)!==vr&&cl.current!==null||(sp=!0),(mu&134217727)===0&&(Jh&134217727)===0||ln===null||bu(ln,vr,hl,!1)}function eS(x,v,S){var D=Lr;Lr|=2;var V=YD(),q=$D();(ln!==x||vr!==v)&&(w1=null,cp(x,v)),v=!1;var le=Dn;e:do try{if(Wr!==0&&dr!==null){var xe=dr,Me=ul;switch(Wr){case 8:Jj(),le=6;break e;case 3:case 2:case 9:case 6:cl.current===null&&(v=!0);var Je=Wr;if(Wr=0,ul=null,dp(x,xe,Me,Je),S&&sp){le=0;break e}break;default:Je=Wr,Wr=0,ul=null,dp(x,xe,Me,Je)}}fQ(),le=Dn;break}catch(ft){GD(x,ft)}while(!0);return v&&x.shellSuspendCounter++,Xc=Gh=null,Lr=D,W.H=V,W.A=q,dr===null&&(ln=null,vr=0,Ya()),le}function fQ(){for(;dr!==null;)qD(dr)}function pQ(x,v){var S=Lr;Lr|=2;var D=YD(),V=$D();ln!==x||vr!==v?(w1=null,y1=Bt()+500,cp(x,v)):sp=Nn(x,v);e:do try{if(Wr!==0&&dr!==null){v=dr;var q=ul;t:switch(Wr){case 1:Wr=0,ul=null,dp(x,v,q,1);break;case 2:case 9:if(nE(q)){Wr=0,ul=null,XD(v);break}v=function(){Wr!==2&&Wr!==9||ln!==x||(Wr=7),Qo(x)},q.then(v,v);break e;case 3:Wr=7;break e;case 4:Wr=5;break e;case 7:nE(q)?(Wr=0,ul=null,XD(v)):(Wr=0,ul=null,dp(x,v,q,7));break;case 5:var le=null;switch(dr.tag){case 26:le=dr.memoizedState;case 5:case 27:var xe=dr;if(le?RI(le):xe.stateNode.complete){Wr=0,ul=null;var Me=xe.sibling;if(Me!==null)dr=Me;else{var Je=xe.return;Je!==null?(dr=Je,j1(Je)):dr=null}break t}}Wr=0,ul=null,dp(x,v,q,5);break;case 6:Wr=0,ul=null,dp(x,v,q,6);break;case 8:Jj(),Dn=6;break e;default:throw Error(r(462))}}xQ();break}catch(ft){GD(x,ft)}while(!0);return Xc=Gh=null,W.H=D,W.A=V,Lr=S,dr!==null?0:(ln=null,vr=0,Ya(),Dn)}function xQ(){for(;dr!==null&&!na();)qD(dr)}function qD(x){var v=vD(x.alternate,x,id);x.memoizedProps=x.pendingProps,v===null?j1(x):dr=v}function XD(x){var v=x,S=v.alternate;switch(v.tag){case 15:case 0:v=hD(S,v,v.pendingProps,v.type,void 0,vr);break;case 11:v=hD(S,v,v.pendingProps,v.type.render,v.ref,vr);break;case 5:xj(v);default:yD(S,v),v=dr=$6(v,id),v=vD(S,v,id)}x.memoizedProps=x.pendingProps,v===null?j1(x):dr=v}function dp(x,v,S,D){Xc=Gh=null,xj(v),J0=null,dm=0;var V=v.return;try{if(rQ(x,V,v,S,vr)){Dn=1,u1(x,Il(S,x.current)),dr=null;return}}catch(q){if(V!==null)throw dr=V,q;Dn=1,u1(x,Il(S,x.current)),dr=null;return}v.flags&32768?(Nr||D===1?x=!0:sp||(vr&536870912)!==0?x=!1:(xu=x=!0,(D===2||D===9||D===3||D===6)&&(D=cl.current,D!==null&&D.tag===13&&(D.flags|=16384))),ZD(v,x)):j1(v)}function j1(x){var v=x;do{if((v.flags&32768)!==0){ZD(v,xu);return}x=v.return;var S=sQ(v.alternate,v,id);if(S!==null){dr=S;return}if(v=v.sibling,v!==null){dr=v;return}dr=v=x}while(v!==null);Dn===0&&(Dn=5)}function ZD(x,v){do{var S=lQ(x.alternate,x);if(S!==null){S.flags&=32767,dr=S;return}if(S=x.return,S!==null&&(S.flags|=32768,S.subtreeFlags=0,S.deletions=null),!v&&(x=x.sibling,x!==null)){dr=x;return}dr=x=S}while(x!==null);Dn=6,dr=null}function KD(x,v,S,D,V,q,le,xe,Me){x.cancelPendingCommit=null;do S1();while(vi!==0);if((Lr&6)!==0)throw Error(r(327));if(v!==null){if(v===x.current)throw Error(r(177));if(q=v.lanes|v.childLanes,q|=Na,Si(x,S,q,le,xe,Me),x===ln&&(dr=ln=null,vr=0),op=v,vu=x,sd=S,Zj=q,Kj=V,FD=D,(v.subtreeFlags&10256)!==0||(v.flags&10256)!==0?(x.callbackNode=null,x.callbackPriority=0,bQ(oa,function(){return aI(),null})):(x.callbackNode=null,x.callbackPriority=0),D=(v.flags&13878)!==0,(v.subtreeFlags&13878)!==0||D){D=W.T,W.T=null,V=$.p,$.p=2,le=Lr,Lr|=4;try{oQ(x,v,S)}finally{Lr=le,$.p=V,W.T=D}}vi=1,QD(),JD(),eI()}}function QD(){if(vi===1){vi=0;var x=vu,v=op,S=(v.flags&13878)!==0;if((v.subtreeFlags&13878)!==0||S){S=W.T,W.T=null;var D=$.p;$.p=2;var V=Lr;Lr|=4;try{DD(v,x);var q=hS,le=Y(x.containerInfo),xe=q.focusedElem,Me=q.selectionRange;if(le!==xe&&xe&&xe.ownerDocument&&z(xe.ownerDocument.documentElement,xe)){if(Me!==null&&ee(xe)){var Je=Me.start,ft=Me.end;if(ft===void 0&&(ft=Je),"selectionStart"in xe)xe.selectionStart=Je,xe.selectionEnd=Math.min(ft,xe.value.length);else{var bt=xe.ownerDocument||document,at=bt&&bt.defaultView||window;if(at.getSelection){var ot=at.getSelection(),ca=xe.textContent.length,Ma=Math.min(Me.start,ca),Jr=Me.end===void 0?Ma:Math.min(Me.end,ca);!ot.extend&&Ma>Jr&&(le=Jr,Jr=Ma,Ma=le);var We=O(xe,Ma),Pe=O(xe,Jr);if(We&&Pe&&(ot.rangeCount!==1||ot.anchorNode!==We.node||ot.anchorOffset!==We.offset||ot.focusNode!==Pe.node||ot.focusOffset!==Pe.offset)){var Qe=bt.createRange();Qe.setStart(We.node,We.offset),ot.removeAllRanges(),Ma>Jr?(ot.addRange(Qe),ot.extend(Pe.node,Pe.offset)):(Qe.setEnd(Pe.node,Pe.offset),ot.addRange(Qe))}}}}for(bt=[],ot=xe;ot=ot.parentNode;)ot.nodeType===1&&bt.push({element:ot,left:ot.scrollLeft,top:ot.scrollTop});for(typeof xe.focus=="function"&&xe.focus(),xe=0;xe<bt.length;xe++){var gt=bt[xe];gt.element.scrollLeft=gt.left,gt.element.scrollTop=gt.top}}P1=!!uS,hS=uS=null}finally{Lr=V,$.p=D,W.T=S}}x.current=v,vi=2}}function JD(){if(vi===2){vi=0;var x=vu,v=op,S=(v.flags&8772)!==0;if((v.subtreeFlags&8772)!==0||S){S=W.T,W.T=null;var D=$.p;$.p=2;var V=Lr;Lr|=4;try{CD(x,v.alternate,v)}finally{Lr=V,$.p=D,W.T=S}}vi=3}}function eI(){if(vi===4||vi===3){vi=0,xt();var x=vu,v=op,S=sd,D=FD;(v.subtreeFlags&10256)!==0||(v.flags&10256)!==0?vi=5:(vi=0,op=vu=null,tI(x,x.pendingLanes));var V=x.pendingLanes;if(V===0&&(gu=null),yt(S),v=v.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(it,v,void 0,(v.current.flags&128)===128)}catch{}if(D!==null){v=W.T,V=$.p,$.p=2,W.T=null;try{for(var q=x.onRecoverableError,le=0;le<D.length;le++){var xe=D[le];q(xe.value,{componentStack:xe.stack})}}finally{W.T=v,$.p=V}}(sd&3)!==0&&S1(),Qo(x),V=x.pendingLanes,(S&261930)!==0&&(V&42)!==0?x===Qj?Cm++:(Cm=0,Qj=x):Cm=0,Am(0)}}function tI(x,v){(x.pooledCacheLanes&=v)===0&&(v=x.pooledCache,v!=null&&(x.pooledCache=null,om(v)))}function S1(){return QD(),JD(),eI(),aI()}function aI(){if(vi!==5)return!1;var x=vu,v=Zj;Zj=0;var S=yt(sd),D=W.T,V=$.p;try{$.p=32>S?32:S,W.T=null,S=Kj,Kj=null;var q=vu,le=sd;if(vi=0,op=vu=null,sd=0,(Lr&6)!==0)throw Error(r(331));var xe=Lr;if(Lr|=4,PD(q.current),RD(q,q.current,le,S),Lr=xe,Am(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(it,q)}catch{}return!0}finally{$.p=V,W.T=D,tI(x,v)}}function rI(x,v,S){v=Il(S,v),v=Mj(x.stateNode,v,2),x=uu(x,v,2),x!==null&&(ti(x,2),Qo(x))}function Yr(x,v,S){if(x.tag===3)rI(x,x,S);else for(;v!==null;){if(v.tag===3){rI(v,x,S);break}else if(v.tag===1){var D=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(gu===null||!gu.has(D))){x=Il(S,x),S=nD(2),D=uu(v,S,2),D!==null&&(iD(S,D,v,x),ti(D,2),Qo(D));break}}v=v.return}}function tS(x,v,S){var D=x.pingCache;if(D===null){D=x.pingCache=new uQ;var V=new Set;D.set(v,V)}else V=D.get(v),V===void 0&&(V=new Set,D.set(v,V));V.has(S)||($j=!0,V.add(S),x=mQ.bind(null,x,v,S),v.then(x,x))}function mQ(x,v,S){var D=x.pingCache;D!==null&&D.delete(v),x.pingedLanes|=x.suspendedLanes&S,x.warmLanes&=~S,ln===x&&(vr&S)===S&&(Dn===4||Dn===3&&(vr&62914560)===vr&&300>Bt()-b1?(Lr&2)===0&&cp(x,0):qj|=S,lp===vr&&(lp=0)),Qo(x)}function nI(x,v){v===0&&(v=dn()),x=zr(x,v),x!==null&&(ti(x,v),Qo(x))}function gQ(x){var v=x.memoizedState,S=0;v!==null&&(S=v.retryLane),nI(x,S)}function vQ(x,v){var S=0;switch(x.tag){case 31:case 13:var D=x.stateNode,V=x.memoizedState;V!==null&&(S=V.retryLane);break;case 19:D=x.stateNode;break;case 22:D=x.stateNode._retryCache;break;default:throw Error(r(314))}D!==null&&D.delete(v),nI(x,S)}function bQ(x,v){return vt(x,v)}var k1=null,up=null,aS=!1,C1=!1,rS=!1,yu=0;function Qo(x){x!==up&&x.next===null&&(up===null?k1=up=x:up=up.next=x),C1=!0,aS||(aS=!0,wQ())}function Am(x,v){if(!rS&&C1){rS=!0;do for(var S=!1,D=k1;D!==null;){if(x!==0){var V=D.pendingLanes;if(V===0)var q=0;else{var le=D.suspendedLanes,xe=D.pingedLanes;q=(1<<31-st(42|x)+1)-1,q&=V&~(le&~xe),q=q&201326741?q&201326741|1:q?q|2:0}q!==0&&(S=!0,oI(D,q))}else q=vr,q=Js(D,D===ln?q:0,D.cancelPendingCommit!==null||D.timeoutHandle!==-1),(q&3)===0||Nn(D,q)||(S=!0,oI(D,q));D=D.next}while(S);rS=!1}}function yQ(){iI()}function iI(){C1=aS=!1;var x=0;yu!==0&&EQ()&&(x=yu);for(var v=Bt(),S=null,D=k1;D!==null;){var V=D.next,q=sI(D,v);q===0?(D.next=null,S===null?k1=V:S.next=V,V===null&&(up=S)):(S=D,(x!==0||(q&3)!==0)&&(C1=!0)),D=V}vi!==0&&vi!==5||Am(x),yu!==0&&(yu=0)}function sI(x,v){for(var S=x.suspendedLanes,D=x.pingedLanes,V=x.expirationTimes,q=x.pendingLanes&-62914561;0<q;){var le=31-st(q),xe=1<<le,Me=V[le];Me===-1?((xe&S)===0||(xe&D)!==0)&&(V[le]=Vo(xe,v)):Me<=v&&(x.expiredLanes|=xe),q&=~xe}if(v=ln,S=vr,S=Js(x,x===v?S:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),D=x.callbackNode,S===0||x===v&&(Wr===2||Wr===9)||x.cancelPendingCommit!==null)return D!==null&&D!==null&&$e(D),x.callbackNode=null,x.callbackPriority=0;if((S&3)===0||Nn(x,S)){if(v=S&-S,v===x.callbackPriority)return v;switch(D!==null&&$e(D),yt(S)){case 2:case 8:S=La;break;case 32:S=oa;break;case 268435456:S=zt;break;default:S=oa}return D=lI.bind(null,x),S=vt(S,D),x.callbackPriority=v,x.callbackNode=S,v}return D!==null&&D!==null&&$e(D),x.callbackPriority=2,x.callbackNode=null,2}function lI(x,v){if(vi!==0&&vi!==5)return x.callbackNode=null,x.callbackPriority=0,null;var S=x.callbackNode;if(S1()&&x.callbackNode!==S)return null;var D=vr;return D=Js(x,x===ln?D:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),D===0?null:(HD(x,D,v),sI(x,Bt()),x.callbackNode!=null&&x.callbackNode===S?lI.bind(null,x):null)}function oI(x,v){if(S1())return null;HD(x,v,!0)}function wQ(){IQ(function(){(Lr&6)!==0?vt(Nt,yQ):iI()})}function nS(){if(yu===0){var x=Z0;x===0&&(x=Lt,Lt<<=1,(Lt&261888)===0&&(Lt=256)),yu=x}return yu}function cI(x){return x==null||typeof x=="symbol"||typeof x=="boolean"?null:typeof x=="function"?x:ms(""+x)}function dI(x,v){var S=v.ownerDocument.createElement("input");return S.name=v.name,S.value=v.value,x.id&&S.setAttribute("form",x.id),v.parentNode.insertBefore(S,v),x=new FormData(x),S.parentNode.removeChild(S),x}function _Q(x,v,S,D,V){if(v==="submit"&&S&&S.stateNode===V){var q=cI((V[Et]||null).action),le=D.submitter;le&&(v=(v=le[Et]||null)?cI(v.formAction):le.getAttribute("formAction"),v!==null&&(q=v,le=null));var xe=new Vn("action","action",null,D,V);x.push({event:xe,listeners:[{instance:null,listener:function(){if(D.defaultPrevented){if(yu!==0){var Me=le?dI(V,le):new FormData(V);jj(S,{pending:!0,data:Me,method:V.method,action:q},null,Me)}}else typeof q=="function"&&(xe.preventDefault(),Me=le?dI(V,le):new FormData(V),jj(S,{pending:!0,data:Me,method:V.method,action:q},q,Me))},currentTarget:V}]})}}for(var iS=0;iS<Ut.length;iS++){var sS=Ut[iS],NQ=sS.toLowerCase(),jQ=sS[0].toUpperCase()+sS.slice(1);Ct(NQ,"on"+jQ)}Ct(Xe,"onAnimationEnd"),Ct(Ve,"onAnimationIteration"),Ct(tt,"onAnimationStart"),Ct("dblclick","onDoubleClick"),Ct("focusin","onFocus"),Ct("focusout","onBlur"),Ct(mt,"onTransitionRun"),Ct(Mt,"onTransitionStart"),Ct(Dt,"onTransitionCancel"),Ct(_t,"onTransitionEnd"),jn("onMouseEnter",["mouseout","mouseover"]),jn("onMouseLeave",["mouseout","mouseover"]),jn("onPointerEnter",["pointerout","pointerover"]),jn("onPointerLeave",["pointerout","pointerover"]),lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),lr("onBeforeInput",["compositionend","keypress","textInput","paste"]),lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SQ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tm));function uI(x,v){v=(v&4)!==0;for(var S=0;S<x.length;S++){var D=x[S],V=D.event;D=D.listeners;e:{var q=void 0;if(v)for(var le=D.length-1;0<=le;le--){var xe=D[le],Me=xe.instance,Je=xe.currentTarget;if(xe=xe.listener,Me!==q&&V.isPropagationStopped())break e;q=xe,V.currentTarget=Je;try{q(V)}catch(ft){ea(ft)}V.currentTarget=null,q=Me}else for(le=0;le<D.length;le++){if(xe=D[le],Me=xe.instance,Je=xe.currentTarget,xe=xe.listener,Me!==q&&V.isPropagationStopped())break e;q=xe,V.currentTarget=Je;try{q(V)}catch(ft){ea(ft)}V.currentTarget=null,q=Me}}}}function ur(x,v){var S=v[ua];S===void 0&&(S=v[ua]=new Set);var D=x+"__bubble";S.has(D)||(hI(v,x,2,!1),S.add(D))}function lS(x,v,S){var D=0;v&&(D|=4),hI(S,x,D,v)}var A1="_reactListening"+Math.random().toString(36).slice(2);function oS(x){if(!x[A1]){x[A1]=!0,pt.forEach(function(S){S!=="selectionchange"&&(SQ.has(S)||lS(S,!1,x),lS(S,!0,x))});var v=x.nodeType===9?x:x.ownerDocument;v===null||v[A1]||(v[A1]=!0,lS("selectionchange",!1,v))}}function hI(x,v,S,D){switch(VI(v)){case 2:var V=JQ;break;case 8:V=eJ;break;default:V=NS}S=V.bind(null,v,S,x),V=void 0,!Lh||v!=="touchstart"&&v!=="touchmove"&&v!=="wheel"||(V=!0),D?V!==void 0?x.addEventListener(v,S,{capture:!0,passive:V}):x.addEventListener(v,S,!0):V!==void 0?x.addEventListener(v,S,{passive:V}):x.addEventListener(v,S,!1)}function cS(x,v,S,D,V){var q=D;if((v&1)===0&&(v&2)===0&&D!==null)e:for(;;){if(D===null)return;var le=D.tag;if(le===3||le===4){var xe=D.stateNode.containerInfo;if(xe===V)break;if(le===4)for(le=D.return;le!==null;){var Me=le.tag;if((Me===3||Me===4)&&le.stateNode.containerInfo===V)return;le=le.return}for(;xe!==null;){if(le=Qa(xe),le===null)return;if(Me=le.tag,Me===5||Me===6||Me===26||Me===27){D=q=le;continue e}xe=xe.parentNode}}D=D.return}Ho(function(){var Je=q,ft=qd(S),bt=[];e:{var at=Zt.get(x);if(at!==void 0){var ot=Vn,ca=x;switch(x){case"keypress":if(Os(S)===0)break e;case"keydown":case"keyup":ot=fo;break;case"focusin":ca="focus",ot=Wo;break;case"focusout":ca="blur",ot=Wo;break;case"beforeblur":case"afterblur":ot=Wo;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=wr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=Uc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=Fh;break;case Xe:case Ve:case tt:ot=Wa;break;case _t:ot=nl;break;case"scroll":case"scrollend":ot=Vc;break;case"wheel":ot=Jd;break;case"copy":case"cut":case"paste":ot=al;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=Cr;break;case"toggle":case"beforetoggle":ot=eu}var Ma=(v&4)!==0,Jr=!Ma&&(x==="scroll"||x==="scrollend"),We=Ma?at!==null?at+"Capture":null:at;Ma=[];for(var Pe=Je,Qe;Pe!==null;){var gt=Pe;if(Qe=gt.stateNode,gt=gt.tag,gt!==5&&gt!==26&&gt!==27||Qe===null||We===null||(gt=Da(Pe,We),gt!=null&&Ma.push(Mm(Pe,gt,Qe))),Jr)break;Pe=Pe.return}0<Ma.length&&(at=new ot(at,ca,null,S,ft),bt.push({event:at,listeners:Ma}))}}if((v&7)===0){e:{if(at=x==="mouseover"||x==="pointerover",ot=x==="mouseout"||x==="pointerout",at&&S!==Ki&&(ca=S.relatedTarget||S.fromElement)&&(Qa(ca)||ca[Gt]))break e;if((ot||at)&&(at=ft.window===ft?ft:(at=ft.ownerDocument)?at.defaultView||at.parentWindow:window,ot?(ca=S.relatedTarget||S.toElement,ot=Je,ca=ca?Qa(ca):null,ca!==null&&(Jr=i(ca),Ma=ca.tag,ca!==Jr||Ma!==5&&Ma!==27&&Ma!==6)&&(ca=null)):(ot=null,ca=Je),ot!==ca)){if(Ma=wr,gt="onMouseLeave",We="onMouseEnter",Pe="mouse",(x==="pointerout"||x==="pointerover")&&(Ma=Cr,gt="onPointerLeave",We="onPointerEnter",Pe="pointer"),Jr=ot==null?at:Hr(ot),Qe=ca==null?at:Hr(ca),at=new Ma(gt,Pe+"leave",ot,S,ft),at.target=Jr,at.relatedTarget=Qe,gt=null,Qa(ft)===Je&&(Ma=new Ma(We,Pe+"enter",ca,S,ft),Ma.target=Qe,Ma.relatedTarget=Jr,gt=Ma),Jr=gt,ot&&ca)t:{for(Ma=kQ,We=ot,Pe=ca,Qe=0,gt=We;gt;gt=Ma(gt))Qe++;gt=0;for(var ka=Pe;ka;ka=Ma(ka))gt++;for(;0<Qe-gt;)We=Ma(We),Qe--;for(;0<gt-Qe;)Pe=Ma(Pe),gt--;for(;Qe--;){if(We===Pe||Pe!==null&&We===Pe.alternate){Ma=We;break t}We=Ma(We),Pe=Ma(Pe)}Ma=null}else Ma=null;ot!==null&&fI(bt,at,ot,Ma,!1),ca!==null&&Jr!==null&&fI(bt,Jr,ca,Ma,!0)}}e:{if(at=Je?Hr(Je):window,ot=at.nodeName&&at.nodeName.toLowerCase(),ot==="select"||ot==="input"&&at.type==="file")var Tr=Ci;else if(Gc(at))if(Ps)Tr=C;else{Tr=y;var xa=m}else ot=at.nodeName,!ot||ot.toLowerCase()!=="input"||at.type!=="checkbox"&&at.type!=="radio"?Je&&Ur(Je.elementType)&&(Tr=Ci):Tr=N;if(Tr&&(Tr=Tr(x,Je))){Ji(bt,Tr,S,ft);break e}xa&&xa(x,at,Je),x==="focusout"&&Je&&at.type==="number"&&Je.memoizedProps.value!=null&&ye(at,"number",at.value)}switch(xa=Je?Hr(Je):window,x){case"focusin":(Gc(xa)||xa.contentEditable==="true")&&(oe=xa,fe=Je,ge=null);break;case"focusout":ge=fe=oe=null;break;case"mousedown":me=!0;break;case"contextmenu":case"mouseup":case"dragend":me=!1,ve(bt,S,ft);break;case"selectionchange":if(ie)break;case"keydown":case"keyup":ve(bt,S,ft)}var rr;if(po)e:{switch(x){case"compositionstart":var br="onCompositionStart";break e;case"compositionend":br="onCompositionEnd";break e;case"compositionupdate":br="onCompositionUpdate";break e}br=void 0}else xo?Vh(x,S)&&(br="onCompositionEnd"):x==="keydown"&&S.keyCode===229&&(br="onCompositionStart");br&&(tu&&S.locale!=="ko"&&(xo||br!=="onCompositionStart"?br==="onCompositionEnd"&&xo&&(rr=Ls()):(gs=ft,Rs="value"in gs?gs.value:gs.textContent,xo=!0)),xa=T1(Je,br),0<xa.length&&(br=new Qd(br,x,null,S,ft),bt.push({event:br,listeners:xa}),rr?br.data=rr:(rr=Yo(S),rr!==null&&(br.data=rr)))),(rr=G0?ll(x,S):ru(x,S))&&(br=T1(Je,"onBeforeInput"),0<br.length&&(xa=new Qd("onBeforeInput","beforeinput",null,S,ft),bt.push({event:xa,listeners:br}),xa.data=rr)),_Q(bt,x,Je,S,ft)}uI(bt,v)})}function Mm(x,v,S){return{instance:x,listener:v,currentTarget:S}}function T1(x,v){for(var S=v+"Capture",D=[];x!==null;){var V=x,q=V.stateNode;if(V=V.tag,V!==5&&V!==26&&V!==27||q===null||(V=Da(x,S),V!=null&&D.unshift(Mm(x,V,q)),V=Da(x,v),V!=null&&D.push(Mm(x,V,q))),x.tag===3)return D;x=x.return}return[]}function kQ(x){if(x===null)return null;do x=x.return;while(x&&x.tag!==5&&x.tag!==27);return x||null}function fI(x,v,S,D,V){for(var q=v._reactName,le=[];S!==null&&S!==D;){var xe=S,Me=xe.alternate,Je=xe.stateNode;if(xe=xe.tag,Me!==null&&Me===D)break;xe!==5&&xe!==26&&xe!==27||Je===null||(Me=Je,V?(Je=Da(S,q),Je!=null&&le.unshift(Mm(S,Je,Me))):V||(Je=Da(S,q),Je!=null&&le.push(Mm(S,Je,Me)))),S=S.return}le.length!==0&&x.push({event:v,listeners:le})}var CQ=/\r\n?/g,AQ=/\u0000|\uFFFD/g;function pI(x){return(typeof x=="string"?x:""+x).replace(CQ,`
`).replace(AQ,"")}function xI(x,v){return v=pI(v),pI(x)===v}function Qr(x,v,S,D,V,q){switch(S){case"children":typeof D=="string"?v==="body"||v==="textarea"&&D===""||ho(x,D):(typeof D=="number"||typeof D=="bigint")&&v!=="body"&&ho(x,""+D);break;case"className":ki(x,"class",D);break;case"tabIndex":ki(x,"tabindex",D);break;case"dir":case"role":case"viewBox":case"width":case"height":ki(x,S,D);break;case"style":ga(x,D,q);break;case"data":if(v!=="object"){ki(x,"data",D);break}case"src":case"href":if(D===""&&(v!=="a"||S!=="href")){x.removeAttribute(S);break}if(D==null||typeof D=="function"||typeof D=="symbol"||typeof D=="boolean"){x.removeAttribute(S);break}D=ms(""+D),x.setAttribute(S,D);break;case"action":case"formAction":if(typeof D=="function"){x.setAttribute(S,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof q=="function"&&(S==="formAction"?(v!=="input"&&Qr(x,v,"name",V.name,V,null),Qr(x,v,"formEncType",V.formEncType,V,null),Qr(x,v,"formMethod",V.formMethod,V,null),Qr(x,v,"formTarget",V.formTarget,V,null)):(Qr(x,v,"encType",V.encType,V,null),Qr(x,v,"method",V.method,V,null),Qr(x,v,"target",V.target,V,null)));if(D==null||typeof D=="symbol"||typeof D=="boolean"){x.removeAttribute(S);break}D=ms(""+D),x.setAttribute(S,D);break;case"onClick":D!=null&&(x.onclick=gi);break;case"onScroll":D!=null&&ur("scroll",x);break;case"onScrollEnd":D!=null&&ur("scrollend",x);break;case"dangerouslySetInnerHTML":if(D!=null){if(typeof D!="object"||!("__html"in D))throw Error(r(61));if(S=D.__html,S!=null){if(V.children!=null)throw Error(r(60));x.innerHTML=S}}break;case"multiple":x.multiple=D&&typeof D!="function"&&typeof D!="symbol";break;case"muted":x.muted=D&&typeof D!="function"&&typeof D!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(D==null||typeof D=="function"||typeof D=="boolean"||typeof D=="symbol"){x.removeAttribute("xlink:href");break}S=ms(""+D),x.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",S);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":D!=null&&typeof D!="function"&&typeof D!="symbol"?x.setAttribute(S,""+D):x.removeAttribute(S);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":D&&typeof D!="function"&&typeof D!="symbol"?x.setAttribute(S,""):x.removeAttribute(S);break;case"capture":case"download":D===!0?x.setAttribute(S,""):D!==!1&&D!=null&&typeof D!="function"&&typeof D!="symbol"?x.setAttribute(S,D):x.removeAttribute(S);break;case"cols":case"rows":case"size":case"span":D!=null&&typeof D!="function"&&typeof D!="symbol"&&!isNaN(D)&&1<=D?x.setAttribute(S,D):x.removeAttribute(S);break;case"rowSpan":case"start":D==null||typeof D=="function"||typeof D=="symbol"||isNaN(D)?x.removeAttribute(S):x.setAttribute(S,D);break;case"popover":ur("beforetoggle",x),ur("toggle",x),pa(x,"popover",D);break;case"xlinkActuate":gn(x,"http://www.w3.org/1999/xlink","xlink:actuate",D);break;case"xlinkArcrole":gn(x,"http://www.w3.org/1999/xlink","xlink:arcrole",D);break;case"xlinkRole":gn(x,"http://www.w3.org/1999/xlink","xlink:role",D);break;case"xlinkShow":gn(x,"http://www.w3.org/1999/xlink","xlink:show",D);break;case"xlinkTitle":gn(x,"http://www.w3.org/1999/xlink","xlink:title",D);break;case"xlinkType":gn(x,"http://www.w3.org/1999/xlink","xlink:type",D);break;case"xmlBase":gn(x,"http://www.w3.org/XML/1998/namespace","xml:base",D);break;case"xmlLang":gn(x,"http://www.w3.org/XML/1998/namespace","xml:lang",D);break;case"xmlSpace":gn(x,"http://www.w3.org/XML/1998/namespace","xml:space",D);break;case"is":pa(x,"is",D);break;case"innerText":case"textContent":break;default:(!(2<S.length)||S[0]!=="o"&&S[0]!=="O"||S[1]!=="n"&&S[1]!=="N")&&(S=H0.get(S)||S,pa(x,S,D))}}function dS(x,v,S,D,V,q){switch(S){case"style":ga(x,D,q);break;case"dangerouslySetInnerHTML":if(D!=null){if(typeof D!="object"||!("__html"in D))throw Error(r(61));if(S=D.__html,S!=null){if(V.children!=null)throw Error(r(60));x.innerHTML=S}}break;case"children":typeof D=="string"?ho(x,D):(typeof D=="number"||typeof D=="bigint")&&ho(x,""+D);break;case"onScroll":D!=null&&ur("scroll",x);break;case"onScrollEnd":D!=null&&ur("scrollend",x);break;case"onClick":D!=null&&(x.onclick=gi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ai.hasOwnProperty(S))e:{if(S[0]==="o"&&S[1]==="n"&&(V=S.endsWith("Capture"),v=S.slice(2,V?S.length-7:void 0),q=x[Et]||null,q=q!=null?q[S]:null,typeof q=="function"&&x.removeEventListener(v,q,V),typeof D=="function")){typeof q!="function"&&q!==null&&(S in x?x[S]=null:x.hasAttribute(S)&&x.removeAttribute(S)),x.addEventListener(v,D,V);break e}S in x?x[S]=D:D===!0?x.setAttribute(S,""):pa(x,S,D)}}}function Ui(x,v,S){switch(v){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ur("error",x),ur("load",x);var D=!1,V=!1,q;for(q in S)if(S.hasOwnProperty(q)){var le=S[q];if(le!=null)switch(q){case"src":D=!0;break;case"srcSet":V=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,v));default:Qr(x,v,q,le,S,null)}}V&&Qr(x,v,"srcSet",S.srcSet,S,null),D&&Qr(x,v,"src",S.src,S,null);return;case"input":ur("invalid",x);var xe=q=le=V=null,Me=null,Je=null;for(D in S)if(S.hasOwnProperty(D)){var ft=S[D];if(ft!=null)switch(D){case"name":V=ft;break;case"type":le=ft;break;case"checked":Me=ft;break;case"defaultChecked":Je=ft;break;case"value":q=ft;break;case"defaultValue":xe=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(r(137,v));break;default:Qr(x,v,D,ft,S,null)}}qe(x,q,xe,Me,Je,le,V,!1);return;case"select":ur("invalid",x),D=le=q=null;for(V in S)if(S.hasOwnProperty(V)&&(xe=S[V],xe!=null))switch(V){case"value":q=xe;break;case"defaultValue":le=xe;break;case"multiple":D=xe;default:Qr(x,v,V,xe,S,null)}v=q,S=le,x.multiple=!!D,v!=null?ia(x,!!D,v,!1):S!=null&&ia(x,!!D,S,!0);return;case"textarea":ur("invalid",x),q=V=D=null;for(le in S)if(S.hasOwnProperty(le)&&(xe=S[le],xe!=null))switch(le){case"value":D=xe;break;case"defaultValue":V=xe;break;case"children":q=xe;break;case"dangerouslySetInnerHTML":if(xe!=null)throw Error(r(91));break;default:Qr(x,v,le,xe,S,null)}ri(x,D,V,q);return;case"option":for(Me in S)S.hasOwnProperty(Me)&&(D=S[Me],D!=null)&&(Me==="selected"?x.selected=D&&typeof D!="function"&&typeof D!="symbol":Qr(x,v,Me,D,S,null));return;case"dialog":ur("beforetoggle",x),ur("toggle",x),ur("cancel",x),ur("close",x);break;case"iframe":case"object":ur("load",x);break;case"video":case"audio":for(D=0;D<Tm.length;D++)ur(Tm[D],x);break;case"image":ur("error",x),ur("load",x);break;case"details":ur("toggle",x);break;case"embed":case"source":case"link":ur("error",x),ur("load",x);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Je in S)if(S.hasOwnProperty(Je)&&(D=S[Je],D!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,v));default:Qr(x,v,Je,D,S,null)}return;default:if(Ur(v)){for(ft in S)S.hasOwnProperty(ft)&&(D=S[ft],D!==void 0&&dS(x,v,ft,D,S,void 0));return}}for(xe in S)S.hasOwnProperty(xe)&&(D=S[xe],D!=null&&Qr(x,v,xe,D,S,null))}function TQ(x,v,S,D){switch(v){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var V=null,q=null,le=null,xe=null,Me=null,Je=null,ft=null;for(ot in S){var bt=S[ot];if(S.hasOwnProperty(ot)&&bt!=null)switch(ot){case"checked":break;case"value":break;case"defaultValue":Me=bt;default:D.hasOwnProperty(ot)||Qr(x,v,ot,null,D,bt)}}for(var at in D){var ot=D[at];if(bt=S[at],D.hasOwnProperty(at)&&(ot!=null||bt!=null))switch(at){case"type":q=ot;break;case"name":V=ot;break;case"checked":Je=ot;break;case"defaultChecked":ft=ot;break;case"value":le=ot;break;case"defaultValue":xe=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(r(137,v));break;default:ot!==bt&&Qr(x,v,at,ot,D,bt)}}rn(x,le,xe,Me,Je,ft,q,V);return;case"select":ot=le=xe=at=null;for(q in S)if(Me=S[q],S.hasOwnProperty(q)&&Me!=null)switch(q){case"value":break;case"multiple":ot=Me;default:D.hasOwnProperty(q)||Qr(x,v,q,null,D,Me)}for(V in D)if(q=D[V],Me=S[V],D.hasOwnProperty(V)&&(q!=null||Me!=null))switch(V){case"value":at=q;break;case"defaultValue":xe=q;break;case"multiple":le=q;default:q!==Me&&Qr(x,v,V,q,D,Me)}v=xe,S=le,D=ot,at!=null?ia(x,!!S,at,!1):!!D!=!!S&&(v!=null?ia(x,!!S,v,!0):ia(x,!!S,S?[]:"",!1));return;case"textarea":ot=at=null;for(xe in S)if(V=S[xe],S.hasOwnProperty(xe)&&V!=null&&!D.hasOwnProperty(xe))switch(xe){case"value":break;case"children":break;default:Qr(x,v,xe,null,D,V)}for(le in D)if(V=D[le],q=S[le],D.hasOwnProperty(le)&&(V!=null||q!=null))switch(le){case"value":at=V;break;case"defaultValue":ot=V;break;case"children":break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(91));break;default:V!==q&&Qr(x,v,le,V,D,q)}vn(x,at,ot);return;case"option":for(var ca in S)at=S[ca],S.hasOwnProperty(ca)&&at!=null&&!D.hasOwnProperty(ca)&&(ca==="selected"?x.selected=!1:Qr(x,v,ca,null,D,at));for(Me in D)at=D[Me],ot=S[Me],D.hasOwnProperty(Me)&&at!==ot&&(at!=null||ot!=null)&&(Me==="selected"?x.selected=at&&typeof at!="function"&&typeof at!="symbol":Qr(x,v,Me,at,D,ot));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ma in S)at=S[Ma],S.hasOwnProperty(Ma)&&at!=null&&!D.hasOwnProperty(Ma)&&Qr(x,v,Ma,null,D,at);for(Je in D)if(at=D[Je],ot=S[Je],D.hasOwnProperty(Je)&&at!==ot&&(at!=null||ot!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(r(137,v));break;default:Qr(x,v,Je,at,D,ot)}return;default:if(Ur(v)){for(var Jr in S)at=S[Jr],S.hasOwnProperty(Jr)&&at!==void 0&&!D.hasOwnProperty(Jr)&&dS(x,v,Jr,void 0,D,at);for(ft in D)at=D[ft],ot=S[ft],!D.hasOwnProperty(ft)||at===ot||at===void 0&&ot===void 0||dS(x,v,ft,at,D,ot);return}}for(var We in S)at=S[We],S.hasOwnProperty(We)&&at!=null&&!D.hasOwnProperty(We)&&Qr(x,v,We,null,D,at);for(bt in D)at=D[bt],ot=S[bt],!D.hasOwnProperty(bt)||at===ot||at==null&&ot==null||Qr(x,v,bt,at,D,ot)}function mI(x){switch(x){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function MQ(){if(typeof performance.getEntriesByType=="function"){for(var x=0,v=0,S=performance.getEntriesByType("resource"),D=0;D<S.length;D++){var V=S[D],q=V.transferSize,le=V.initiatorType,xe=V.duration;if(q&&xe&&mI(le)){for(le=0,xe=V.responseEnd,D+=1;D<S.length;D++){var Me=S[D],Je=Me.startTime;if(Je>xe)break;var ft=Me.transferSize,bt=Me.initiatorType;ft&&mI(bt)&&(Me=Me.responseEnd,le+=ft*(Me<xe?1:(xe-Je)/(Me-Je)))}if(--D,v+=8*(q+le)/(V.duration/1e3),x++,10<x)break}}if(0<x)return v/x/1e6}return navigator.connection&&(x=navigator.connection.downlink,typeof x=="number")?x:5}var uS=null,hS=null;function M1(x){return x.nodeType===9?x:x.ownerDocument}function gI(x){switch(x){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vI(x,v){if(x===0)switch(v){case"svg":return 1;case"math":return 2;default:return 0}return x===1&&v==="foreignObject"?0:x}function fS(x,v){return x==="textarea"||x==="noscript"||typeof v.children=="string"||typeof v.children=="number"||typeof v.children=="bigint"||typeof v.dangerouslySetInnerHTML=="object"&&v.dangerouslySetInnerHTML!==null&&v.dangerouslySetInnerHTML.__html!=null}var pS=null;function EQ(){var x=window.event;return x&&x.type==="popstate"?x===pS?!1:(pS=x,!0):(pS=null,!1)}var bI=typeof setTimeout=="function"?setTimeout:void 0,DQ=typeof clearTimeout=="function"?clearTimeout:void 0,yI=typeof Promise=="function"?Promise:void 0,IQ=typeof queueMicrotask=="function"?queueMicrotask:typeof yI<"u"?function(x){return yI.resolve(null).then(x).catch(RQ)}:bI;function RQ(x){setTimeout(function(){throw x})}function wu(x){return x==="head"}function wI(x,v){var S=v,D=0;do{var V=S.nextSibling;if(x.removeChild(S),V&&V.nodeType===8)if(S=V.data,S==="/$"||S==="/&"){if(D===0){x.removeChild(V),xp(v);return}D--}else if(S==="$"||S==="$?"||S==="$~"||S==="$!"||S==="&")D++;else if(S==="html")Em(x.ownerDocument.documentElement);else if(S==="head"){S=x.ownerDocument.head,Em(S);for(var q=S.firstChild;q;){var le=q.nextSibling,xe=q.nodeName;q[jr]||xe==="SCRIPT"||xe==="STYLE"||xe==="LINK"&&q.rel.toLowerCase()==="stylesheet"||S.removeChild(q),q=le}}else S==="body"&&Em(x.ownerDocument.body);S=V}while(S);xp(v)}function _I(x,v){var S=x;x=0;do{var D=S.nextSibling;if(S.nodeType===1?v?(S._stashedDisplay=S.style.display,S.style.display="none"):(S.style.display=S._stashedDisplay||"",S.getAttribute("style")===""&&S.removeAttribute("style")):S.nodeType===3&&(v?(S._stashedText=S.nodeValue,S.nodeValue=""):S.nodeValue=S._stashedText||""),D&&D.nodeType===8)if(S=D.data,S==="/$"){if(x===0)break;x--}else S!=="$"&&S!=="$?"&&S!=="$~"&&S!=="$!"||x++;S=D}while(S)}function xS(x){var v=x.firstChild;for(v&&v.nodeType===10&&(v=v.nextSibling);v;){var S=v;switch(v=v.nextSibling,S.nodeName){case"HTML":case"HEAD":case"BODY":xS(S),mr(S);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(S.rel.toLowerCase()==="stylesheet")continue}x.removeChild(S)}}function LQ(x,v,S,D){for(;x.nodeType===1;){var V=S;if(x.nodeName.toLowerCase()!==v.toLowerCase()){if(!D&&(x.nodeName!=="INPUT"||x.type!=="hidden"))break}else if(D){if(!x[jr])switch(v){case"meta":if(!x.hasAttribute("itemprop"))break;return x;case"link":if(q=x.getAttribute("rel"),q==="stylesheet"&&x.hasAttribute("data-precedence"))break;if(q!==V.rel||x.getAttribute("href")!==(V.href==null||V.href===""?null:V.href)||x.getAttribute("crossorigin")!==(V.crossOrigin==null?null:V.crossOrigin)||x.getAttribute("title")!==(V.title==null?null:V.title))break;return x;case"style":if(x.hasAttribute("data-precedence"))break;return x;case"script":if(q=x.getAttribute("src"),(q!==(V.src==null?null:V.src)||x.getAttribute("type")!==(V.type==null?null:V.type)||x.getAttribute("crossorigin")!==(V.crossOrigin==null?null:V.crossOrigin))&&q&&x.hasAttribute("async")&&!x.hasAttribute("itemprop"))break;return x;default:return x}}else if(v==="input"&&x.type==="hidden"){var q=V.name==null?null:""+V.name;if(V.type==="hidden"&&x.getAttribute("name")===q)return x}else return x;if(x=zl(x.nextSibling),x===null)break}return null}function OQ(x,v,S){if(v==="")return null;for(;x.nodeType!==3;)if((x.nodeType!==1||x.nodeName!=="INPUT"||x.type!=="hidden")&&!S||(x=zl(x.nextSibling),x===null))return null;return x}function NI(x,v){for(;x.nodeType!==8;)if((x.nodeType!==1||x.nodeName!=="INPUT"||x.type!=="hidden")&&!v||(x=zl(x.nextSibling),x===null))return null;return x}function mS(x){return x.data==="$?"||x.data==="$~"}function gS(x){return x.data==="$!"||x.data==="$?"&&x.ownerDocument.readyState!=="loading"}function PQ(x,v){var S=x.ownerDocument;if(x.data==="$~")x._reactRetry=v;else if(x.data!=="$?"||S.readyState!=="loading")v();else{var D=function(){v(),S.removeEventListener("DOMContentLoaded",D)};S.addEventListener("DOMContentLoaded",D),x._reactRetry=D}}function zl(x){for(;x!=null;x=x.nextSibling){var v=x.nodeType;if(v===1||v===3)break;if(v===8){if(v=x.data,v==="$"||v==="$!"||v==="$?"||v==="$~"||v==="&"||v==="F!"||v==="F")break;if(v==="/$"||v==="/&")return null}}return x}var vS=null;function jI(x){x=x.nextSibling;for(var v=0;x;){if(x.nodeType===8){var S=x.data;if(S==="/$"||S==="/&"){if(v===0)return zl(x.nextSibling);v--}else S!=="$"&&S!=="$!"&&S!=="$?"&&S!=="$~"&&S!=="&"||v++}x=x.nextSibling}return null}function SI(x){x=x.previousSibling;for(var v=0;x;){if(x.nodeType===8){var S=x.data;if(S==="$"||S==="$!"||S==="$?"||S==="$~"||S==="&"){if(v===0)return x;v--}else S!=="/$"&&S!=="/&"||v++}x=x.previousSibling}return null}function kI(x,v,S){switch(v=M1(S),x){case"html":if(x=v.documentElement,!x)throw Error(r(452));return x;case"head":if(x=v.head,!x)throw Error(r(453));return x;case"body":if(x=v.body,!x)throw Error(r(454));return x;default:throw Error(r(451))}}function Em(x){for(var v=x.attributes;v.length;)x.removeAttributeNode(v[0]);mr(x)}var Bl=new Map,CI=new Set;function E1(x){return typeof x.getRootNode=="function"?x.getRootNode():x.nodeType===9?x:x.ownerDocument}var ld=$.d;$.d={f:zQ,r:BQ,D:FQ,C:VQ,L:HQ,m:UQ,X:WQ,S:GQ,M:YQ};function zQ(){var x=ld.f(),v=_1();return x||v}function BQ(x){var v=Vt(x);v!==null&&v.tag===5&&v.type==="form"?GE(v):ld.r(x)}var hp=typeof document>"u"?null:document;function AI(x,v,S){var D=hp;if(D&&typeof v=="string"&&v){var V=Va(v);V='link[rel="'+x+'"][href="'+V+'"]',typeof S=="string"&&(V+='[crossorigin="'+S+'"]'),CI.has(V)||(CI.add(V),x={rel:x,crossOrigin:S,href:v},D.querySelector(V)===null&&(v=D.createElement("link"),Ui(v,"link",x),Ir(v),D.head.appendChild(v)))}}function FQ(x){ld.D(x),AI("dns-prefetch",x,null)}function VQ(x,v){ld.C(x,v),AI("preconnect",x,v)}function HQ(x,v,S){ld.L(x,v,S);var D=hp;if(D&&x&&v){var V='link[rel="preload"][as="'+Va(v)+'"]';v==="image"&&S&&S.imageSrcSet?(V+='[imagesrcset="'+Va(S.imageSrcSet)+'"]',typeof S.imageSizes=="string"&&(V+='[imagesizes="'+Va(S.imageSizes)+'"]')):V+='[href="'+Va(x)+'"]';var q=V;switch(v){case"style":q=fp(x);break;case"script":q=pp(x)}Bl.has(q)||(x=h({rel:"preload",href:v==="image"&&S&&S.imageSrcSet?void 0:x,as:v},S),Bl.set(q,x),D.querySelector(V)!==null||v==="style"&&D.querySelector(Dm(q))||v==="script"&&D.querySelector(Im(q))||(v=D.createElement("link"),Ui(v,"link",x),Ir(v),D.head.appendChild(v)))}}function UQ(x,v){ld.m(x,v);var S=hp;if(S&&x){var D=v&&typeof v.as=="string"?v.as:"script",V='link[rel="modulepreload"][as="'+Va(D)+'"][href="'+Va(x)+'"]',q=V;switch(D){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":q=pp(x)}if(!Bl.has(q)&&(x=h({rel:"modulepreload",href:x},v),Bl.set(q,x),S.querySelector(V)===null)){switch(D){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(S.querySelector(Im(q)))return}D=S.createElement("link"),Ui(D,"link",x),Ir(D),S.head.appendChild(D)}}}function GQ(x,v,S){ld.S(x,v,S);var D=hp;if(D&&x){var V=Sr(D).hoistableStyles,q=fp(x);v=v||"default";var le=V.get(q);if(!le){var xe={loading:0,preload:null};if(le=D.querySelector(Dm(q)))xe.loading=5;else{x=h({rel:"stylesheet",href:x,"data-precedence":v},S),(S=Bl.get(q))&&bS(x,S);var Me=le=D.createElement("link");Ir(Me),Ui(Me,"link",x),Me._p=new Promise(function(Je,ft){Me.onload=Je,Me.onerror=ft}),Me.addEventListener("load",function(){xe.loading|=1}),Me.addEventListener("error",function(){xe.loading|=2}),xe.loading|=4,D1(le,v,D)}le={type:"stylesheet",instance:le,count:1,state:xe},V.set(q,le)}}}function WQ(x,v){ld.X(x,v);var S=hp;if(S&&x){var D=Sr(S).hoistableScripts,V=pp(x),q=D.get(V);q||(q=S.querySelector(Im(V)),q||(x=h({src:x,async:!0},v),(v=Bl.get(V))&&yS(x,v),q=S.createElement("script"),Ir(q),Ui(q,"link",x),S.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},D.set(V,q))}}function YQ(x,v){ld.M(x,v);var S=hp;if(S&&x){var D=Sr(S).hoistableScripts,V=pp(x),q=D.get(V);q||(q=S.querySelector(Im(V)),q||(x=h({src:x,async:!0,type:"module"},v),(v=Bl.get(V))&&yS(x,v),q=S.createElement("script"),Ir(q),Ui(q,"link",x),S.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},D.set(V,q))}}function TI(x,v,S,D){var V=(V=pe.current)?E1(V):null;if(!V)throw Error(r(446));switch(x){case"meta":case"title":return null;case"style":return typeof S.precedence=="string"&&typeof S.href=="string"?(v=fp(S.href),S=Sr(V).hoistableStyles,D=S.get(v),D||(D={type:"style",instance:null,count:0,state:null},S.set(v,D)),D):{type:"void",instance:null,count:0,state:null};case"link":if(S.rel==="stylesheet"&&typeof S.href=="string"&&typeof S.precedence=="string"){x=fp(S.href);var q=Sr(V).hoistableStyles,le=q.get(x);if(le||(V=V.ownerDocument||V,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},q.set(x,le),(q=V.querySelector(Dm(x)))&&!q._p&&(le.instance=q,le.state.loading=5),Bl.has(x)||(S={rel:"preload",as:"style",href:S.href,crossOrigin:S.crossOrigin,integrity:S.integrity,media:S.media,hrefLang:S.hrefLang,referrerPolicy:S.referrerPolicy},Bl.set(x,S),q||$Q(V,x,S,le.state))),v&&D===null)throw Error(r(528,""));return le}if(v&&D!==null)throw Error(r(529,""));return null;case"script":return v=S.async,S=S.src,typeof S=="string"&&v&&typeof v!="function"&&typeof v!="symbol"?(v=pp(S),S=Sr(V).hoistableScripts,D=S.get(v),D||(D={type:"script",instance:null,count:0,state:null},S.set(v,D)),D):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,x))}}function fp(x){return'href="'+Va(x)+'"'}function Dm(x){return'link[rel="stylesheet"]['+x+"]"}function MI(x){return h({},x,{"data-precedence":x.precedence,precedence:null})}function $Q(x,v,S,D){x.querySelector('link[rel="preload"][as="style"]['+v+"]")?D.loading=1:(v=x.createElement("link"),D.preload=v,v.addEventListener("load",function(){return D.loading|=1}),v.addEventListener("error",function(){return D.loading|=2}),Ui(v,"link",S),Ir(v),x.head.appendChild(v))}function pp(x){return'[src="'+Va(x)+'"]'}function Im(x){return"script[async]"+x}function EI(x,v,S){if(v.count++,v.instance===null)switch(v.type){case"style":var D=x.querySelector('style[data-href~="'+Va(S.href)+'"]');if(D)return v.instance=D,Ir(D),D;var V=h({},S,{"data-href":S.href,"data-precedence":S.precedence,href:null,precedence:null});return D=(x.ownerDocument||x).createElement("style"),Ir(D),Ui(D,"style",V),D1(D,S.precedence,x),v.instance=D;case"stylesheet":V=fp(S.href);var q=x.querySelector(Dm(V));if(q)return v.state.loading|=4,v.instance=q,Ir(q),q;D=MI(S),(V=Bl.get(V))&&bS(D,V),q=(x.ownerDocument||x).createElement("link"),Ir(q);var le=q;return le._p=new Promise(function(xe,Me){le.onload=xe,le.onerror=Me}),Ui(q,"link",D),v.state.loading|=4,D1(q,S.precedence,x),v.instance=q;case"script":return q=pp(S.src),(V=x.querySelector(Im(q)))?(v.instance=V,Ir(V),V):(D=S,(V=Bl.get(q))&&(D=h({},S),yS(D,V)),x=x.ownerDocument||x,V=x.createElement("script"),Ir(V),Ui(V,"link",D),x.head.appendChild(V),v.instance=V);case"void":return null;default:throw Error(r(443,v.type))}else v.type==="stylesheet"&&(v.state.loading&4)===0&&(D=v.instance,v.state.loading|=4,D1(D,S.precedence,x));return v.instance}function D1(x,v,S){for(var D=S.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),V=D.length?D[D.length-1]:null,q=V,le=0;le<D.length;le++){var xe=D[le];if(xe.dataset.precedence===v)q=xe;else if(q!==V)break}q?q.parentNode.insertBefore(x,q.nextSibling):(v=S.nodeType===9?S.head:S,v.insertBefore(x,v.firstChild))}function bS(x,v){x.crossOrigin==null&&(x.crossOrigin=v.crossOrigin),x.referrerPolicy==null&&(x.referrerPolicy=v.referrerPolicy),x.title==null&&(x.title=v.title)}function yS(x,v){x.crossOrigin==null&&(x.crossOrigin=v.crossOrigin),x.referrerPolicy==null&&(x.referrerPolicy=v.referrerPolicy),x.integrity==null&&(x.integrity=v.integrity)}var I1=null;function DI(x,v,S){if(I1===null){var D=new Map,V=I1=new Map;V.set(S,D)}else V=I1,D=V.get(S),D||(D=new Map,V.set(S,D));if(D.has(x))return D;for(D.set(x,null),S=S.getElementsByTagName(x),V=0;V<S.length;V++){var q=S[V];if(!(q[jr]||q[It]||x==="link"&&q.getAttribute("rel")==="stylesheet")&&q.namespaceURI!=="http://www.w3.org/2000/svg"){var le=q.getAttribute(v)||"";le=x+le;var xe=D.get(le);xe?xe.push(q):D.set(le,[q])}}return D}function II(x,v,S){x=x.ownerDocument||x,x.head.insertBefore(S,v==="title"?x.querySelector("head > title"):null)}function qQ(x,v,S){if(S===1||v.itemProp!=null)return!1;switch(x){case"meta":case"title":return!0;case"style":if(typeof v.precedence!="string"||typeof v.href!="string"||v.href==="")break;return!0;case"link":if(typeof v.rel!="string"||typeof v.href!="string"||v.href===""||v.onLoad||v.onError)break;return v.rel==="stylesheet"?(x=v.disabled,typeof v.precedence=="string"&&x==null):!0;case"script":if(v.async&&typeof v.async!="function"&&typeof v.async!="symbol"&&!v.onLoad&&!v.onError&&v.src&&typeof v.src=="string")return!0}return!1}function RI(x){return!(x.type==="stylesheet"&&(x.state.loading&3)===0)}function XQ(x,v,S,D){if(S.type==="stylesheet"&&(typeof D.media!="string"||matchMedia(D.media).matches!==!1)&&(S.state.loading&4)===0){if(S.instance===null){var V=fp(D.href),q=v.querySelector(Dm(V));if(q){v=q._p,v!==null&&typeof v=="object"&&typeof v.then=="function"&&(x.count++,x=R1.bind(x),v.then(x,x)),S.state.loading|=4,S.instance=q,Ir(q);return}q=v.ownerDocument||v,D=MI(D),(V=Bl.get(V))&&bS(D,V),q=q.createElement("link"),Ir(q);var le=q;le._p=new Promise(function(xe,Me){le.onload=xe,le.onerror=Me}),Ui(q,"link",D),S.instance=q}x.stylesheets===null&&(x.stylesheets=new Map),x.stylesheets.set(S,v),(v=S.state.preload)&&(S.state.loading&3)===0&&(x.count++,S=R1.bind(x),v.addEventListener("load",S),v.addEventListener("error",S))}}var wS=0;function ZQ(x,v){return x.stylesheets&&x.count===0&&O1(x,x.stylesheets),0<x.count||0<x.imgCount?function(S){var D=setTimeout(function(){if(x.stylesheets&&O1(x,x.stylesheets),x.unsuspend){var q=x.unsuspend;x.unsuspend=null,q()}},6e4+v);0<x.imgBytes&&wS===0&&(wS=62500*MQ());var V=setTimeout(function(){if(x.waitingForImages=!1,x.count===0&&(x.stylesheets&&O1(x,x.stylesheets),x.unsuspend)){var q=x.unsuspend;x.unsuspend=null,q()}},(x.imgBytes>wS?50:800)+v);return x.unsuspend=S,function(){x.unsuspend=null,clearTimeout(D),clearTimeout(V)}}:null}function R1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)O1(this,this.stylesheets);else if(this.unsuspend){var x=this.unsuspend;this.unsuspend=null,x()}}}var L1=null;function O1(x,v){x.stylesheets=null,x.unsuspend!==null&&(x.count++,L1=new Map,v.forEach(KQ,x),L1=null,R1.call(x))}function KQ(x,v){if(!(v.state.loading&4)){var S=L1.get(x);if(S)var D=S.get(null);else{S=new Map,L1.set(x,S);for(var V=x.querySelectorAll("link[data-precedence],style[data-precedence]"),q=0;q<V.length;q++){var le=V[q];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(S.set(le.dataset.precedence,le),D=le)}D&&S.set(null,D)}V=v.instance,le=V.getAttribute("data-precedence"),q=S.get(le)||D,q===D&&S.set(null,V),S.set(le,V),this.count++,D=R1.bind(this),V.addEventListener("load",D),V.addEventListener("error",D),q?q.parentNode.insertBefore(V,q.nextSibling):(x=x.nodeType===9?x.head:x,x.insertBefore(V,x.firstChild)),v.state.loading|=4}}var Rm={$$typeof:T,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function QQ(x,v,S,D,V,q,le,xe,Me){this.tag=1,this.containerInfo=x,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Cn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cn(0),this.hiddenUpdates=Cn(null),this.identifierPrefix=D,this.onUncaughtError=V,this.onCaughtError=q,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Me,this.incompleteTransitions=new Map}function LI(x,v,S,D,V,q,le,xe,Me,Je,ft,bt){return x=new QQ(x,v,S,le,Me,Je,ft,bt,xe),v=1,q===!0&&(v|=24),q=ol(3,null,null,v),x.current=q,q.stateNode=x,v=ej(),v.refCount++,x.pooledCache=v,v.refCount++,q.memoizedState={element:D,isDehydrated:S,cache:v},nj(q),x}function OI(x){return x?(x=W0,x):W0}function PI(x,v,S,D,V,q){V=OI(V),D.context===null?D.context=V:D.pendingContext=V,D=du(v),D.payload={element:S},q=q===void 0?null:q,q!==null&&(D.callback=q),S=uu(x,D,v),S!==null&&(Us(S,x,v),hm(S,x,v))}function zI(x,v){if(x=x.memoizedState,x!==null&&x.dehydrated!==null){var S=x.retryLane;x.retryLane=S!==0&&S<v?S:v}}function _S(x,v){zI(x,v),(x=x.alternate)&&zI(x,v)}function BI(x){if(x.tag===13||x.tag===31){var v=zr(x,67108864);v!==null&&Us(v,x,67108864),_S(x,67108864)}}function FI(x){if(x.tag===13||x.tag===31){var v=fl();v=Ze(v);var S=zr(x,v);S!==null&&Us(S,x,v),_S(x,v)}}var P1=!0;function JQ(x,v,S,D){var V=W.T;W.T=null;var q=$.p;try{$.p=2,NS(x,v,S,D)}finally{$.p=q,W.T=V}}function eJ(x,v,S,D){var V=W.T;W.T=null;var q=$.p;try{$.p=8,NS(x,v,S,D)}finally{$.p=q,W.T=V}}function NS(x,v,S,D){if(P1){var V=jS(D);if(V===null)cS(x,v,D,z1,S),HI(x,D);else if(aJ(V,x,v,S,D))D.stopPropagation();else if(HI(x,D),v&4&&-1<tJ.indexOf(x)){for(;V!==null;){var q=Vt(V);if(q!==null)switch(q.tag){case 3:if(q=q.stateNode,q.current.memoizedState.isDehydrated){var le=Zi(q.pendingLanes);if(le!==0){var xe=q;for(xe.pendingLanes|=2,xe.entangledLanes|=2;le;){var Me=1<<31-st(le);xe.entanglements[1]|=Me,le&=~Me}Qo(q),(Lr&6)===0&&(y1=Bt()+500,Am(0))}}break;case 31:case 13:xe=zr(q,2),xe!==null&&Us(xe,q,2),_1(),_S(q,2)}if(q=jS(D),q===null&&cS(x,v,D,z1,S),q===V)break;V=q}V!==null&&D.stopPropagation()}else cS(x,v,D,null,S)}}function jS(x){return x=qd(x),SS(x)}var z1=null;function SS(x){if(z1=null,x=Qa(x),x!==null){var v=i(x);if(v===null)x=null;else{var S=v.tag;if(S===13){if(x=l(v),x!==null)return x;x=null}else if(S===31){if(x=o(v),x!==null)return x;x=null}else if(S===3){if(v.stateNode.current.memoizedState.isDehydrated)return v.tag===3?v.stateNode.containerInfo:null;x=null}else v!==x&&(x=null)}}return z1=x,null}function VI(x){switch(x){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_a()){case Nt:return 2;case La:return 8;case oa:case Sa:return 32;case zt:return 268435456;default:return 32}default:return 32}}var kS=!1,_u=null,Nu=null,ju=null,Lm=new Map,Om=new Map,Su=[],tJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function HI(x,v){switch(x){case"focusin":case"focusout":_u=null;break;case"dragenter":case"dragleave":Nu=null;break;case"mouseover":case"mouseout":ju=null;break;case"pointerover":case"pointerout":Lm.delete(v.pointerId);break;case"gotpointercapture":case"lostpointercapture":Om.delete(v.pointerId)}}function Pm(x,v,S,D,V,q){return x===null||x.nativeEvent!==q?(x={blockedOn:v,domEventName:S,eventSystemFlags:D,nativeEvent:q,targetContainers:[V]},v!==null&&(v=Vt(v),v!==null&&BI(v)),x):(x.eventSystemFlags|=D,v=x.targetContainers,V!==null&&v.indexOf(V)===-1&&v.push(V),x)}function aJ(x,v,S,D,V){switch(v){case"focusin":return _u=Pm(_u,x,v,S,D,V),!0;case"dragenter":return Nu=Pm(Nu,x,v,S,D,V),!0;case"mouseover":return ju=Pm(ju,x,v,S,D,V),!0;case"pointerover":var q=V.pointerId;return Lm.set(q,Pm(Lm.get(q)||null,x,v,S,D,V)),!0;case"gotpointercapture":return q=V.pointerId,Om.set(q,Pm(Om.get(q)||null,x,v,S,D,V)),!0}return!1}function UI(x){var v=Qa(x.target);if(v!==null){var S=i(v);if(S!==null){if(v=S.tag,v===13){if(v=l(S),v!==null){x.blockedOn=v,ut(x.priority,function(){FI(S)});return}}else if(v===31){if(v=o(S),v!==null){x.blockedOn=v,ut(x.priority,function(){FI(S)});return}}else if(v===3&&S.stateNode.current.memoizedState.isDehydrated){x.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}x.blockedOn=null}function B1(x){if(x.blockedOn!==null)return!1;for(var v=x.targetContainers;0<v.length;){var S=jS(x.nativeEvent);if(S===null){S=x.nativeEvent;var D=new S.constructor(S.type,S);Ki=D,S.target.dispatchEvent(D),Ki=null}else return v=Vt(S),v!==null&&BI(v),x.blockedOn=S,!1;v.shift()}return!0}function GI(x,v,S){B1(x)&&S.delete(v)}function rJ(){kS=!1,_u!==null&&B1(_u)&&(_u=null),Nu!==null&&B1(Nu)&&(Nu=null),ju!==null&&B1(ju)&&(ju=null),Lm.forEach(GI),Om.forEach(GI)}function F1(x,v){x.blockedOn===v&&(x.blockedOn=null,kS||(kS=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,rJ)))}var V1=null;function WI(x){V1!==x&&(V1=x,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){V1===x&&(V1=null);for(var v=0;v<x.length;v+=3){var S=x[v],D=x[v+1],V=x[v+2];if(typeof D!="function"){if(SS(D||S)===null)continue;break}var q=Vt(S);q!==null&&(x.splice(v,3),v-=3,jj(q,{pending:!0,data:V,method:S.method,action:D},D,V))}}))}function xp(x){function v(Me){return F1(Me,x)}_u!==null&&F1(_u,x),Nu!==null&&F1(Nu,x),ju!==null&&F1(ju,x),Lm.forEach(v),Om.forEach(v);for(var S=0;S<Su.length;S++){var D=Su[S];D.blockedOn===x&&(D.blockedOn=null)}for(;0<Su.length&&(S=Su[0],S.blockedOn===null);)UI(S),S.blockedOn===null&&Su.shift();if(S=(x.ownerDocument||x).$$reactFormReplay,S!=null)for(D=0;D<S.length;D+=3){var V=S[D],q=S[D+1],le=V[Et]||null;if(typeof q=="function")le||WI(S);else if(le){var xe=null;if(q&&q.hasAttribute("formAction")){if(V=q,le=q[Et]||null)xe=le.formAction;else if(SS(V)!==null)continue}else xe=le.action;typeof xe=="function"?S[D+1]=xe:(S.splice(D,3),D-=3),WI(S)}}}function YI(){function x(q){q.canIntercept&&q.info==="react-transition"&&q.intercept({handler:function(){return new Promise(function(le){return V=le})},focusReset:"manual",scroll:"manual"})}function v(){V!==null&&(V(),V=null),D||setTimeout(S,20)}function S(){if(!D&&!navigation.transition){var q=navigation.currentEntry;q&&q.url!=null&&navigation.navigate(q.url,{state:q.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var D=!1,V=null;return navigation.addEventListener("navigate",x),navigation.addEventListener("navigatesuccess",v),navigation.addEventListener("navigateerror",v),setTimeout(S,100),function(){D=!0,navigation.removeEventListener("navigate",x),navigation.removeEventListener("navigatesuccess",v),navigation.removeEventListener("navigateerror",v),V!==null&&(V(),V=null)}}}function CS(x){this._internalRoot=x}H1.prototype.render=CS.prototype.render=function(x){var v=this._internalRoot;if(v===null)throw Error(r(409));var S=v.current,D=fl();PI(S,D,x,v,null,null)},H1.prototype.unmount=CS.prototype.unmount=function(){var x=this._internalRoot;if(x!==null){this._internalRoot=null;var v=x.containerInfo;PI(x.current,2,null,x,null,null),_1(),v[Gt]=null}};function H1(x){this._internalRoot=x}H1.prototype.unstable_scheduleHydration=function(x){if(x){var v=St();x={blockedOn:null,target:x,priority:v};for(var S=0;S<Su.length&&v!==0&&v<Su[S].priority;S++);Su.splice(S,0,x),S===0&&UI(x)}};var $I=e.version;if($I!=="19.2.3")throw Error(r(527,$I,"19.2.3"));$.findDOMNode=function(x){var v=x._reactInternals;if(v===void 0)throw typeof x.render=="function"?Error(r(188)):(x=Object.keys(x).join(","),Error(r(268,x)));return x=d(v),x=x!==null?u(x):null,x=x===null?null:x.stateNode,x};var nJ={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var U1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!U1.isDisabled&&U1.supportsFiber)try{it=U1.inject(nJ),Ye=U1}catch{}}return Bm.createRoot=function(x,v){if(!n(x))throw Error(r(299));var S=!1,D="",V=eD,q=tD,le=aD;return v!=null&&(v.unstable_strictMode===!0&&(S=!0),v.identifierPrefix!==void 0&&(D=v.identifierPrefix),v.onUncaughtError!==void 0&&(V=v.onUncaughtError),v.onCaughtError!==void 0&&(q=v.onCaughtError),v.onRecoverableError!==void 0&&(le=v.onRecoverableError)),v=LI(x,1,!1,null,null,S,D,null,V,q,le,YI),x[Gt]=v.current,oS(x),new CS(v)},Bm.hydrateRoot=function(x,v,S){if(!n(x))throw Error(r(299));var D=!1,V="",q=eD,le=tD,xe=aD,Me=null;return S!=null&&(S.unstable_strictMode===!0&&(D=!0),S.identifierPrefix!==void 0&&(V=S.identifierPrefix),S.onUncaughtError!==void 0&&(q=S.onUncaughtError),S.onCaughtError!==void 0&&(le=S.onCaughtError),S.onRecoverableError!==void 0&&(xe=S.onRecoverableError),S.formState!==void 0&&(Me=S.formState)),v=LI(x,1,!0,v,S??null,D,V,Me,q,le,xe,YI),v.context=OI(null),S=v.current,D=fl(),D=Ze(D),V=du(D),V.callback=null,uu(S,V,D),S=D,v.current.lanes=S,ti(v,S),Qo(v),x[Gt]=v.current,oS(x),new H1(v)},Bm.version="19.2.3",Bm}var r8;function xJ(){if(r8)return MS.exports;r8=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),MS.exports=pJ(),MS.exports}var mJ=xJ();var YV=a=>{throw TypeError(a)},gJ=(a,e,t)=>e.has(a)||YV("Cannot "+t),RS=(a,e,t)=>(gJ(a,e,"read from private field"),t?t.call(a):e.get(a)),vJ=(a,e,t)=>e.has(a)?YV("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t),n8="popstate";function bJ(a={}){function e(r,n){let{pathname:i,search:l,hash:o}=r.location;return vv("",{pathname:i,search:l,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function t(r,n){return typeof n=="string"?n:Tc(n)}return wJ(e,t,null,a)}function er(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function Zn(a,e){if(!a){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yJ(){return Math.random().toString(36).substring(2,10)}function i8(a,e){return{usr:a.state,key:a.key,idx:e}}function vv(a,e,t=null,r){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof e=="string"?Ch(e):e,state:t,key:e&&e.key||r||yJ()}}function Tc({pathname:a="/",search:e="",hash:t=""}){return e&&e!=="?"&&(a+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(a+=t.charAt(0)==="#"?t:"#"+t),a}function Ch(a){let e={};if(a){let t=a.indexOf("#");t>=0&&(e.hash=a.substring(t),a=a.substring(0,t));let r=a.indexOf("?");r>=0&&(e.search=a.substring(r),a=a.substring(0,r)),a&&(e.pathname=a)}return e}function wJ(a,e,t,r={}){let{window:n=document.defaultView,v5Compat:i=!1}=r,l=n.history,o="POP",c=null,d=u();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function u(){return(l.state||{idx:null}).idx}function h(){o="POP";let w=u(),j=w==null?null:w-d;d=w,c&&c({action:o,location:b.location,delta:j})}function f(w,j){o="PUSH";let k=vv(b.location,w,j);d=u()+1;let T=i8(k,d),E=b.createHref(k);try{l.pushState(T,"",E)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;n.location.assign(E)}i&&c&&c({action:o,location:b.location,delta:1})}function p(w,j){o="REPLACE";let k=vv(b.location,w,j);d=u();let T=i8(k,d),E=b.createHref(k);l.replaceState(T,"",E),i&&c&&c({action:o,location:b.location,delta:0})}function g(w){return $V(w)}let b={get action(){return o},get location(){return a(n,l)},listen(w){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(n8,h),c=w,()=>{n.removeEventListener(n8,h),c=null}},createHref(w){return e(n,w)},createURL:g,encodeLocation(w){let j=g(w);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:f,replace:p,go(w){return l.go(w)}};return b}function $V(a,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),er(t,"No window.location.(origin|href) available to create URL");let r=typeof a=="string"?a:Tc(a);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}var Tg,s8=class{constructor(a){if(vJ(this,Tg,new Map),a)for(let[e,t]of a)this.set(e,t)}get(a){if(RS(this,Tg).has(a))return RS(this,Tg).get(a);if(a.defaultValue!==void 0)return a.defaultValue;throw new Error("No value found for context")}set(a,e){RS(this,Tg).set(a,e)}};Tg=new WeakMap;var _J=new Set(["lazy","caseSensitive","path","id","index","children"]);function NJ(a){return _J.has(a)}var jJ=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function SJ(a){return jJ.has(a)}function kJ(a){return a.index===!0}function bv(a,e,t=[],r={},n=!1){return a.map((i,l)=>{let o=[...t,String(l)],c=typeof i.id=="string"?i.id:o.join("-");if(er(i.index!==!0||!i.children,"Cannot specify children on an index route"),er(n||!r[c],`Found a route id collision on id "${c}".  Route id's must be globally unique within Data Router usages`),kJ(i)){let d={...i,id:c};return r[c]=l8(d,e(d)),d}else{let d={...i,id:c,children:void 0};return r[c]=l8(d,e(d)),i.children&&(d.children=bv(i.children,e,o,r,n)),d}})}function l8(a,e){return Object.assign(a,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...a.lazy,...e.lazy}}:{}})}function Uu(a,e,t="/"){return Mg(a,e,t,!1)}function Mg(a,e,t,r){let n=typeof e=="string"?Ch(e):e,i=ro(n.pathname||"/",t);if(i==null)return null;let l=qV(a);AJ(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=BJ(i);o=PJ(l[c],d,r)}return o}function CJ(a,e){let{route:t,pathname:r,params:n}=a;return{id:t.id,pathname:r,params:n,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function qV(a,e=[],t=[],r="",n=!1){let i=(l,o,c=n,d)=>{let u={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(r)&&c)return;er(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length)}let h=wc([r,u.relativePath]),f=t.concat(u);l.children&&l.children.length>0&&(er(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),qV(l.children,e,f,h,c)),!(l.path==null&&!l.index)&&e.push({path:h,score:LJ(h,l.index),routesMeta:f})};return a.forEach((l,o)=>{if(l.path===""||!l.path?.includes("?"))i(l,o);else for(let c of XV(l.path))i(l,o,!0,c)}),e}function XV(a){let e=a.split("/");if(e.length===0)return[];let[t,...r]=e,n=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return n?[i,""]:[i];let l=XV(r.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),n&&o.push(...l),o.map(c=>a.startsWith("/")&&c===""?"/":c)}function AJ(a){a.sort((e,t)=>e.score!==t.score?t.score-e.score:OJ(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var TJ=/^:[\w-]+$/,MJ=3,EJ=2,DJ=1,IJ=10,RJ=-2,o8=a=>a==="*";function LJ(a,e){let t=a.split("/"),r=t.length;return t.some(o8)&&(r+=RJ),e&&(r+=EJ),t.filter(n=>!o8(n)).reduce((n,i)=>n+(TJ.test(i)?MJ:i===""?DJ:IJ),r)}function OJ(a,e){return a.length===e.length&&a.slice(0,-1).every((r,n)=>r===e[n])?a[a.length-1]-e[e.length-1]:0}function PJ(a,e,t=!1){let{routesMeta:r}=a,n={},i="/",l=[];for(let o=0;o<r.length;++o){let c=r[o],d=o===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=r2({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h&&d&&t&&!r[r.length-1].route.index&&(h=r2({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(n,h.params),l.push({params:n,pathname:wc([i,h.pathname]),pathnameBase:HJ(wc([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=wc([i,h.pathnameBase]))}return l}function r2(a,e){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[t,r]=zJ(a.path,a.caseSensitive,a.end),n=e.match(t);if(!n)return null;let i=n[0],l=i.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:r.reduce((d,{paramName:u,isOptional:h},f)=>{if(u==="*"){let g=o[f]||"";l=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=o[f];return h&&!p?d[u]=void 0:d[u]=(p||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:a}}function zJ(a,e=!1,t=!0){Zn(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let r=[],n="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(r.push({paramName:"*"}),n+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":a!==""&&a!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),r]}function BJ(a){try{return a.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zn(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),a}}function ro(a,e){if(e==="/")return a;if(!a.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=a.charAt(t);return r&&r!=="/"?null:a.slice(t)||"/"}function FJ({basename:a,pathname:e}){return e==="/"?a:wc([a,e])}var ZV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IA=a=>ZV.test(a);function VJ(a,e="/"){let{pathname:t,search:r="",hash:n=""}=typeof a=="string"?Ch(a):a,i;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?i=c8(t.substring(1),"/"):i=c8(t,e)):i=e,{pathname:i,search:UJ(r),hash:GJ(n)}}function c8(a,e){let t=e.replace(/\/+$/,"").split("/");return a.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function LS(a,e,t,r){return`Cannot include a '${a}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function KV(a){return a.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function I_(a){let e=KV(a);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function R_(a,e,t,r=!1){let n;typeof a=="string"?n=Ch(a):(n={...a},er(!n.pathname||!n.pathname.includes("?"),LS("?","pathname","search",n)),er(!n.pathname||!n.pathname.includes("#"),LS("#","pathname","hash",n)),er(!n.search||!n.search.includes("#"),LS("#","search","hash",n)));let i=a===""||n.pathname==="",l=i?"/":n.pathname,o;if(l==null)o=t;else{let h=e.length-1;if(!r&&l.startsWith("..")){let f=l.split("/");for(;f[0]==="..";)f.shift(),h-=1;n.pathname=f.join("/")}o=h>=0?e[h]:"/"}let c=VJ(n,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var wc=a=>a.join("/").replace(/\/\/+/g,"/"),HJ=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),UJ=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,GJ=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a,pb=class{constructor(a,e,t,r=!1){this.status=a,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function yv(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}function xb(a){return a.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var QV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function JV(a,e){let t=a;if(typeof t!="string"||!ZV.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,n=!1;if(QV)try{let i=new URL(window.location.href),l=t.startsWith("//")?new URL(i.protocol+t):new URL(t),o=ro(l.pathname,e);l.origin===i.origin&&o!=null?t=o+l.search+l.hash:n=!0}catch{Zn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:n,to:t}}var Wu=Symbol("Uninstrumented");function WJ(a,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};a.forEach(n=>n({id:e.id,index:e.index,path:e.path,instrument(i){let l=Object.keys(t);for(let o of l)i[o]&&t[o].push(i[o])}}));let r={};if(typeof e.lazy=="function"&&t.lazy.length>0){let n=Xp(t.lazy,e.lazy,()=>{});n&&(r.lazy=n)}if(typeof e.lazy=="object"){let n=e.lazy;["middleware","loader","action"].forEach(i=>{let l=n[i],o=t[`lazy.${i}`];if(typeof l=="function"&&o.length>0){let c=Xp(o,l,()=>{});c&&(r.lazy=Object.assign(r.lazy||{},{[i]:c}))}})}return["loader","action"].forEach(n=>{let i=e[n];if(typeof i=="function"&&t[n].length>0){let l=i[Wu]??i,o=Xp(t[n],l,(...c)=>d8(c[0]));o&&(n==="loader"&&l.hydrate===!0&&(o.hydrate=!0),o[Wu]=l,r[n]=o)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(r.middleware=e.middleware.map(n=>{let i=n[Wu]??n,l=Xp(t.middleware,i,(...o)=>d8(o[0]));return l?(l[Wu]=i,l):n})),r}function YJ(a,e){let t={navigate:[],fetch:[]};if(e.forEach(r=>r({instrument(n){let i=Object.keys(n);for(let l of i)n[l]&&t[l].push(n[l])}})),t.navigate.length>0){let r=a.navigate[Wu]??a.navigate,n=Xp(t.navigate,r,(...i)=>{let[l,o]=i;return{to:typeof l=="number"||typeof l=="string"?l:l?Tc(l):".",...u8(a,o??{})}});n&&(n[Wu]=r,a.navigate=n)}if(t.fetch.length>0){let r=a.fetch[Wu]??a.fetch,n=Xp(t.fetch,r,(...i)=>{let[l,,o,c]=i;return{href:o??".",fetcherKey:l,...u8(a,c??{})}});n&&(n[Wu]=r,a.fetch=n)}return a}function Xp(a,e,t){return a.length===0?null:async(...r)=>{let n=await eH(a,t(...r),()=>e(...r),a.length-1);if(n.type==="error")throw n.value;return n.value}}async function eH(a,e,t,r){let n=a[r],i;if(n){let l,o=async()=>(l?console.error("You cannot call instrumented handlers more than once"):l=eH(a,e,t,r-1),i=await l,er(i,"Expected a result"),i.type==="error"&&i.value instanceof Error?{status:"error",error:i.value}:{status:"success",error:void 0});try{await n(o,e)}catch(c){console.error("An instrumentation function threw an error:",c)}l||await o(),await l}else try{i={type:"success",value:await t()}}catch(l){i={type:"error",value:l}}return i||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function d8(a){let{request:e,context:t,params:r,unstable_pattern:n}=a;return{request:$J(e),params:{...r},unstable_pattern:n,context:qJ(t)}}function u8(a,e){return{currentUrl:Tc(a.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function $J(a){return{method:a.method,url:a.url,headers:{get:(...e)=>a.headers.get(...e)}}}function qJ(a){if(ZJ(a)){let e={...a};return Object.freeze(e),e}else return{get:e=>a.get(e)}}var XJ=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ZJ(a){if(a===null||typeof a!="object")return!1;const e=Object.getPrototypeOf(a);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===XJ}var tH=["POST","PUT","PATCH","DELETE"],KJ=new Set(tH),QJ=["GET",...tH],JJ=new Set(QJ),aH=new Set([301,302,303,307,308]),eee=new Set([307,308]),OS={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},tee={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Fm={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},aee=a=>({hasErrorBoundary:!!a.hasErrorBoundary}),rH="remix-router-transitions",nH=Symbol("ResetLoaderData");function ree(a){const e=a.window?a.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";er(a.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=a.hydrationRouteProperties||[],n=a.mapRouteProperties||aee,i=n;if(a.unstable_instrumentations){let Se=a.unstable_instrumentations;i=ze=>({...n(ze),...WJ(Se.map(Ze=>Ze.route).filter(Boolean),ze)})}let l={},o=bv(a.routes,i,void 0,l),c,d=a.basename||"/";d.startsWith("/")||(d=`/${d}`);let u=a.dataStrategy||oee,h={...a.future},f=null,p=new Set,g=null,b=null,w=null,j=a.hydrationData!=null,k=Uu(o,a.history.location,d),T=!1,E=null,I;if(k==null&&!a.patchRoutesOnNavigation){let Se=$l(404,{pathname:a.history.location.pathname}),{matches:ze,route:Ze}=G1(o);I=!0,k=ze,E={[Ze.id]:Se}}else if(k&&!a.hydrationData&&dn(k,o,a.history.location.pathname).active&&(k=null),k)if(k.some(Se=>Se.route.lazy))I=!1;else if(!k.some(Se=>RA(Se.route)))I=!0;else{let Se=a.hydrationData?a.hydrationData.loaderData:null,ze=a.hydrationData?a.hydrationData.errors:null;if(ze){let Ze=k.findIndex(yt=>ze[yt.route.id]!==void 0);I=k.slice(0,Ze+1).every(yt=>!OC(yt.route,Se,ze))}else I=k.every(Ze=>!OC(Ze.route,Se,ze))}else{I=!1,k=[];let Se=dn(null,o,a.history.location.pathname);Se.active&&Se.matches&&(T=!0,k=Se.matches)}let R,P={historyAction:a.history.action,location:a.history.location,matches:k,initialized:I,navigation:OS,restoreScrollPosition:a.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:a.hydrationData&&a.hydrationData.loaderData||{},actionData:a.hydrationData&&a.hydrationData.actionData||null,errors:a.hydrationData&&a.hydrationData.errors||E,fetchers:new Map,blockers:new Map},H="POP",G=null,X=!1,U,te=!1,Z=new Map,J=null,B=!1,W=!1,$=new Set,Q=new Map,ne=0,re=-1,K=new Map,ae=new Set,ce=new Map,de=new Map,he=new Set,pe=new Map,Re,Te=null;function ke(){if(f=a.history.listen(({action:Se,location:ze,delta:Ze})=>{if(Re){Re(),Re=void 0;return}Zn(pe.size===0||Ze!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let yt=Xa({currentLocation:P.location,nextLocation:ze,historyAction:Se});if(yt&&Ze!=null){let St=new Promise(ut=>{Re=ut});a.history.go(Ze*-1),Lt(yt,{state:"blocked",location:ze,proceed(){Lt(yt,{state:"proceeding",proceed:void 0,reset:void 0,location:ze}),St.then(()=>a.history.go(Ze))},reset(){let ut=new Map(P.blockers);ut.set(yt,Fm),_e({blockers:ut})}}),G?.resolve(),G=null;return}return Ee(Se,ze)}),t){kee(e,Z);let Se=()=>Cee(e,Z);e.addEventListener("pagehide",Se),J=()=>e.removeEventListener("pagehide",Se)}return P.initialized||Ee("POP",P.location,{initialHydration:!0}),R}function Le(){f&&f(),J&&J(),p.clear(),U&&U.abort(),P.fetchers.forEach((Se,ze)=>He(ze)),P.blockers.forEach((Se,ze)=>xs(ze))}function Ne(Se){return p.add(Se),()=>p.delete(Se)}function _e(Se,ze={}){Se.matches&&(Se.matches=Se.matches.map(St=>{let ut=l[St.route.id],Ft=St.route;return Ft.element!==ut.element||Ft.errorElement!==ut.errorElement||Ft.hydrateFallbackElement!==ut.hydrateFallbackElement?{...St,route:ut}:St})),P={...P,...Se};let Ze=[],yt=[];P.fetchers.forEach((St,ut)=>{St.state==="idle"&&(he.has(ut)?Ze.push(ut):yt.push(ut))}),he.forEach(St=>{!P.fetchers.has(St)&&!Q.has(St)&&Ze.push(St)}),[...p].forEach(St=>St(P,{deletedFetchers:Ze,newErrors:Se.errors??null,viewTransitionOpts:ze.viewTransitionOpts,flushSync:ze.flushSync===!0})),Ze.forEach(St=>He(St)),yt.forEach(St=>P.fetchers.delete(St))}function Oe(Se,ze,{flushSync:Ze}={}){let yt=P.actionData!=null&&P.navigation.formMethod!=null&&ns(P.navigation.formMethod)&&P.navigation.state==="loading"&&Se.state?._isRedirect!==!0,St;ze.actionData?Object.keys(ze.actionData).length>0?St=ze.actionData:St=null:yt?St=P.actionData:St=null;let ut=ze.loaderData?w8(P.loaderData,ze.loaderData,ze.matches||[],ze.errors):P.loaderData,Ft=P.blockers;Ft.size>0&&(Ft=new Map(Ft),Ft.forEach((ua,da)=>Ft.set(da,Fm)));let It=B?!1:Vo(Se,ze.matches||P.matches),Et=X===!0||P.navigation.formMethod!=null&&ns(P.navigation.formMethod)&&Se.state?._isRedirect!==!0;c&&(o=c,c=void 0),B||H==="POP"||(H==="PUSH"?a.history.push(Se,Se.state):H==="REPLACE"&&a.history.replace(Se,Se.state));let Gt;if(H==="POP"){let ua=Z.get(P.location.pathname);ua&&ua.has(Se.pathname)?Gt={currentLocation:P.location,nextLocation:Se}:Z.has(Se.pathname)&&(Gt={currentLocation:Se,nextLocation:P.location})}else if(te){let ua=Z.get(P.location.pathname);ua?ua.add(Se.pathname):(ua=new Set([Se.pathname]),Z.set(P.location.pathname,ua)),Gt={currentLocation:P.location,nextLocation:Se}}_e({...ze,actionData:St,loaderData:ut,historyAction:H,location:Se,initialized:!0,navigation:OS,revalidation:"idle",restoreScrollPosition:It,preventScrollReset:Et,blockers:Ft},{viewTransitionOpts:Gt,flushSync:Ze===!0}),H="POP",X=!1,te=!1,B=!1,W=!1,G?.resolve(),G=null,Te?.resolve(),Te=null}async function De(Se,ze){if(G?.resolve(),G=null,typeof Se=="number"){G||(G=S8());let ir=G.promise;return a.history.go(Se),ir}let Ze=LC(P.location,P.matches,d,Se,ze?.fromRouteId,ze?.relative),{path:yt,submission:St,error:ut}=h8(!1,Ze,ze),Ft=P.location,It=vv(P.location,yt,ze&&ze.state);It={...It,...a.history.encodeLocation(It)};let Et=ze&&ze.replace!=null?ze.replace:void 0,Gt="PUSH";Et===!0?Gt="REPLACE":Et===!1||St!=null&&ns(St.formMethod)&&St.formAction===P.location.pathname+P.location.search&&(Gt="REPLACE");let ua=ze&&"preventScrollReset"in ze?ze.preventScrollReset===!0:void 0,da=(ze&&ze.flushSync)===!0,Aa=Xa({currentLocation:Ft,nextLocation:It,historyAction:Gt});if(Aa){Lt(Aa,{state:"blocked",location:It,proceed(){Lt(Aa,{state:"proceeding",proceed:void 0,reset:void 0,location:It}),De(Se,ze)},reset(){let ir=new Map(P.blockers);ir.set(Aa,Fm),_e({blockers:ir})}});return}await Ee(Gt,It,{submission:St,pendingError:ut,preventScrollReset:ua,replace:ze&&ze.replace,enableViewTransition:ze&&ze.viewTransition,flushSync:da,callSiteDefaultShouldRevalidate:ze&&ze.unstable_defaultShouldRevalidate})}function Ge(){Te||(Te=S8()),La(),_e({revalidation:"loading"});let Se=Te.promise;return P.navigation.state==="submitting"?Se:P.navigation.state==="idle"?(Ee(P.historyAction,P.location,{startUninterruptedRevalidation:!0}),Se):(Ee(H||P.historyAction,P.navigation.location,{overrideNavigation:P.navigation,enableViewTransition:te===!0}),Se)}async function Ee(Se,ze,Ze){U&&U.abort(),U=null,H=Se,B=(Ze&&Ze.startUninterruptedRevalidation)===!0,Nn(P.location,P.matches),X=(Ze&&Ze.preventScrollReset)===!0,te=(Ze&&Ze.enableViewTransition)===!0;let yt=c||o,St=Ze&&Ze.overrideNavigation,ut=Ze?.initialHydration&&P.matches&&P.matches.length>0&&!T?P.matches:Uu(yt,ze,d),Ft=(Ze&&Ze.flushSync)===!0;if(ut&&P.initialized&&!W&&mee(P.location,ze)&&!(Ze&&Ze.submission&&ns(Ze.submission.formMethod))){Oe(ze,{matches:ut},{flushSync:Ft});return}let It=dn(ut,yt,ze.pathname);if(It.active&&It.matches&&(ut=It.matches),!ut){let{error:mr,notFoundMatches:Qa,route:Vt}=xi(ze.pathname);Oe(ze,{matches:Qa,loaderData:{},errors:{[Vt.id]:mr}},{flushSync:Ft});return}U=new AbortController;let Et=Gp(a.history,ze,U.signal,Ze&&Ze.submission),Gt=a.getContext?await a.getContext():new s8,ua;if(Ze&&Ze.pendingError)ua=[Gu(ut).route.id,{type:"error",error:Ze.pendingError}];else if(Ze&&Ze.submission&&ns(Ze.submission.formMethod)){let mr=await rt(Et,ze,Ze.submission,ut,Gt,It.active,Ze&&Ze.initialHydration===!0,{replace:Ze.replace,flushSync:Ft});if(mr.shortCircuited)return;if(mr.pendingActionResult){let[Qa,Vt]=mr.pendingActionResult;if(bl(Vt)&&yv(Vt.error)&&Vt.error.status===404){U=null,Oe(ze,{matches:mr.matches,loaderData:{},errors:{[Qa]:Vt.error}});return}}ut=mr.matches||ut,ua=mr.pendingActionResult,St=PS(ze,Ze.submission),Ft=!1,It.active=!1,Et=Gp(a.history,Et.url,Et.signal)}let{shortCircuited:da,matches:Aa,loaderData:ir,errors:jr}=await dt(Et,ze,ut,Gt,It.active,St,Ze&&Ze.submission,Ze&&Ze.fetcherSubmission,Ze&&Ze.replace,Ze&&Ze.initialHydration===!0,Ft,ua,Ze&&Ze.callSiteDefaultShouldRevalidate);da||(U=null,Oe(ze,{matches:Aa||ut,..._8(ua),loaderData:ir,errors:jr}))}async function rt(Se,ze,Ze,yt,St,ut,Ft,It={}){La();let Et=jee(ze,Ze);if(_e({navigation:Et},{flushSync:It.flushSync===!0}),ut){let da=await Cn(yt,ze.pathname,Se.signal);if(da.type==="aborted")return{shortCircuited:!0};if(da.type==="error"){if(da.partialMatches.length===0){let{matches:ir,route:jr}=G1(o);return{matches:ir,pendingActionResult:[jr.id,{type:"error",error:da.error}]}}let Aa=Gu(da.partialMatches).route.id;return{matches:da.partialMatches,pendingActionResult:[Aa,{type:"error",error:da.error}]}}else if(da.matches)yt=da.matches;else{let{notFoundMatches:Aa,error:ir,route:jr}=xi(ze.pathname);return{matches:Aa,pendingActionResult:[jr.id,{type:"error",error:ir}]}}}let Gt,ua=jw(yt,ze);if(!ua.route.action&&!ua.route.lazy)Gt={type:"error",error:$l(405,{method:Se.method,pathname:ze.pathname,routeId:ua.route.id})};else{let da=ix(i,l,Se,yt,ua,Ft?[]:r,St),Aa=await _a(Se,da,St,null);if(Gt=Aa[ua.route.id],!Gt){for(let ir of yt)if(Aa[ir.route.id]){Gt=Aa[ir.route.id];break}}if(Se.signal.aborted)return{shortCircuited:!0}}if(Wf(Gt)){let da;return It&&It.replace!=null?da=It.replace:da=v8(Gt.response.headers.get("Location"),new URL(Se.url),d,a.history)===P.location.pathname+P.location.search,await Bt(Se,Gt,!0,{submission:Ze,replace:da}),{shortCircuited:!0}}if(bl(Gt)){let da=Gu(yt,ua.route.id);return(It&&It.replace)!==!0&&(H="PUSH"),{matches:yt,pendingActionResult:[da.route.id,Gt,ua.route.id]}}return{matches:yt,pendingActionResult:[ua.route.id,Gt]}}async function dt(Se,ze,Ze,yt,St,ut,Ft,It,Et,Gt,ua,da,Aa){let ir=ut||PS(ze,Ft),jr=Ft||It||j8(ir),mr=!B&&!Gt;if(St){if(mr){let pa=wt(da);_e({navigation:ir,...pa!==void 0?{actionData:pa}:{}},{flushSync:ua})}let qt=await Cn(Ze,ze.pathname,Se.signal);if(qt.type==="aborted")return{shortCircuited:!0};if(qt.type==="error"){if(qt.partialMatches.length===0){let{matches:ki,route:gn}=G1(o);return{matches:ki,loaderData:{},errors:{[gn.id]:qt.error}}}let pa=Gu(qt.partialMatches).route.id;return{matches:qt.partialMatches,loaderData:{},errors:{[pa]:qt.error}}}else if(qt.matches)Ze=qt.matches;else{let{error:pa,notFoundMatches:ki,route:gn}=xi(ze.pathname);return{matches:ki,loaderData:{},errors:{[gn.id]:pa}}}}let Qa=c||o,{dsMatches:Vt,revalidatingFetchers:Hr}=f8(Se,yt,i,l,a.history,P,Ze,jr,ze,Gt?[]:r,Gt===!0,W,$,he,ce,ae,Qa,d,a.patchRoutesOnNavigation!=null,da,Aa);if(re=++ne,!a.dataStrategy&&!Vt.some(qt=>qt.shouldLoad)&&!Vt.some(qt=>qt.route.middleware&&qt.route.middleware.length>0)&&Hr.length===0){let qt=st();return Oe(ze,{matches:Ze,loaderData:{},errors:da&&bl(da[1])?{[da[0]]:da[1].error}:null,..._8(da),...qt?{fetchers:new Map(P.fetchers)}:{}},{flushSync:ua}),{shortCircuited:!0}}if(mr){let qt={};if(!St){qt.navigation=ir;let pa=wt(da);pa!==void 0&&(qt.actionData=pa)}Hr.length>0&&(qt.fetchers=vt(Hr)),_e(qt,{flushSync:ua})}Hr.forEach(qt=>{Ye(qt.key),qt.controller&&Q.set(qt.key,qt.controller)});let Sr=()=>Hr.forEach(qt=>Ye(qt.key));U&&U.signal.addEventListener("abort",Sr);let{loaderResults:Ir,fetcherResults:pt}=await Nt(Vt,Hr,Se,yt);if(Se.signal.aborted)return{shortCircuited:!0};U&&U.signal.removeEventListener("abort",Sr),Hr.forEach(qt=>Q.delete(qt.key));let ai=W1(Ir);if(ai)return await Bt(Se,ai.result,!0,{replace:Et}),{shortCircuited:!0};if(ai=W1(pt),ai)return ae.add(ai.key),await Bt(Se,ai.result,!0,{replace:Et}),{shortCircuited:!0};let{loaderData:lr,errors:jn}=y8(P,Ze,Ir,da,Hr,pt);Gt&&P.errors&&(jn={...P.errors,...jn});let mi=st(),ar=Jt(re),Ga=mi||ar||Hr.length>0;return{matches:Ze,loaderData:lr,errors:jn,...Ga?{fetchers:new Map(P.fetchers)}:{}}}function wt(Se){if(Se&&!bl(Se[1]))return{[Se[0]]:Se[1].data};if(P.actionData)return Object.keys(P.actionData).length===0?null:P.actionData}function vt(Se){return Se.forEach(ze=>{let Ze=P.fetchers.get(ze.key),yt=Vm(void 0,Ze?Ze.data:void 0);P.fetchers.set(ze.key,yt)}),new Map(P.fetchers)}async function $e(Se,ze,Ze,yt){Ye(Se);let St=(yt&&yt.flushSync)===!0,ut=c||o,Ft=LC(P.location,P.matches,d,Ze,ze,yt?.relative),It=Uu(ut,Ft,d),Et=dn(It,ut,Ft);if(Et.active&&Et.matches&&(It=Et.matches),!It){Sa(Se,ze,$l(404,{pathname:Ft}),{flushSync:St});return}let{path:Gt,submission:ua,error:da}=h8(!0,Ft,yt);if(da){Sa(Se,ze,da,{flushSync:St});return}let Aa=a.getContext?await a.getContext():new s8,ir=(yt&&yt.preventScrollReset)===!0;if(ua&&ns(ua.formMethod)){await na(Se,ze,Gt,It,Aa,Et.active,St,ir,ua,yt&&yt.unstable_defaultShouldRevalidate);return}ce.set(Se,{routeId:ze,path:Gt}),await xt(Se,ze,Gt,It,Aa,Et.active,St,ir,ua)}async function na(Se,ze,Ze,yt,St,ut,Ft,It,Et,Gt){La(),ce.delete(Se);let ua=P.fetchers.get(Se);oa(Se,See(Et,ua),{flushSync:Ft});let da=new AbortController,Aa=Gp(a.history,Ze,da.signal,Et);if(ut){let ma=await Cn(yt,new URL(Aa.url).pathname,Aa.signal,Se);if(ma.type==="aborted")return;if(ma.type==="error"){Sa(Se,ze,ma.error,{flushSync:Ft});return}else if(ma.matches)yt=ma.matches;else{Sa(Se,ze,$l(404,{pathname:Ze}),{flushSync:Ft});return}}let ir=jw(yt,Ze);if(!ir.route.action&&!ir.route.lazy){let ma=$l(405,{method:Et.formMethod,pathname:Ze,routeId:ze});Sa(Se,ze,ma,{flushSync:Ft});return}Q.set(Se,da);let jr=ne,mr=ix(i,l,Aa,yt,ir,r,St),Qa=await _a(Aa,mr,St,Se),Vt=Qa[ir.route.id];if(!Vt){for(let ma of mr)if(Qa[ma.route.id]){Vt=Qa[ma.route.id];break}}if(Aa.signal.aborted){Q.get(Se)===da&&Q.delete(Se);return}if(he.has(Se)){if(Wf(Vt)||bl(Vt)){oa(Se,xd(void 0));return}}else{if(Wf(Vt))if(Q.delete(Se),re>jr){oa(Se,xd(void 0));return}else return ae.add(Se),oa(Se,Vm(Et)),Bt(Aa,Vt,!1,{fetcherSubmission:Et,preventScrollReset:It});if(bl(Vt)){Sa(Se,ze,Vt.error);return}}let Hr=P.navigation.location||P.location,Sr=Gp(a.history,Hr,da.signal),Ir=c||o,pt=P.navigation.state!=="idle"?Uu(Ir,P.navigation.location,d):P.matches;er(pt,"Didn't find any matches after fetcher action");let ai=++ne;K.set(Se,ai);let lr=Vm(Et,Vt.data);P.fetchers.set(Se,lr);let{dsMatches:jn,revalidatingFetchers:mi}=f8(Sr,St,i,l,a.history,P,pt,Et,Hr,r,!1,W,$,he,ce,ae,Ir,d,a.patchRoutesOnNavigation!=null,[ir.route.id,Vt],Gt);mi.filter(ma=>ma.key!==Se).forEach(ma=>{let An=ma.key,Fc=P.fetchers.get(An),Pr=Vm(void 0,Fc?Fc.data:void 0);P.fetchers.set(An,Pr),Ye(An),ma.controller&&Q.set(An,ma.controller)}),_e({fetchers:new Map(P.fetchers)});let ar=()=>mi.forEach(ma=>Ye(ma.key));da.signal.addEventListener("abort",ar);let{loaderResults:Ga,fetcherResults:qt}=await Nt(jn,mi,Sr,St);if(da.signal.aborted)return;if(da.signal.removeEventListener("abort",ar),K.delete(Se),Q.delete(Se),mi.forEach(ma=>Q.delete(ma.key)),P.fetchers.has(Se)){let ma=xd(Vt.data);P.fetchers.set(Se,ma)}let pa=W1(Ga);if(pa)return Bt(Sr,pa.result,!1,{preventScrollReset:It});if(pa=W1(qt),pa)return ae.add(pa.key),Bt(Sr,pa.result,!1,{preventScrollReset:It});let{loaderData:ki,errors:gn}=y8(P,pt,Ga,void 0,mi,qt);Jt(ai),P.navigation.state==="loading"&&ai>re?(er(H,"Expected pending action"),U&&U.abort(),Oe(P.navigation.location,{matches:pt,loaderData:ki,errors:gn,fetchers:new Map(P.fetchers)})):(_e({errors:gn,loaderData:w8(P.loaderData,ki,pt,gn),fetchers:new Map(P.fetchers)}),W=!1)}async function xt(Se,ze,Ze,yt,St,ut,Ft,It,Et){let Gt=P.fetchers.get(Se);oa(Se,Vm(Et,Gt?Gt.data:void 0),{flushSync:Ft});let ua=new AbortController,da=Gp(a.history,Ze,ua.signal);if(ut){let Vt=await Cn(yt,new URL(da.url).pathname,da.signal,Se);if(Vt.type==="aborted")return;if(Vt.type==="error"){Sa(Se,ze,Vt.error,{flushSync:Ft});return}else if(Vt.matches)yt=Vt.matches;else{Sa(Se,ze,$l(404,{pathname:Ze}),{flushSync:Ft});return}}let Aa=jw(yt,Ze);Q.set(Se,ua);let ir=ne,jr=ix(i,l,da,yt,Aa,r,St),Qa=(await _a(da,jr,St,Se))[Aa.route.id];if(Q.get(Se)===ua&&Q.delete(Se),!da.signal.aborted){if(he.has(Se)){oa(Se,xd(void 0));return}if(Wf(Qa))if(re>ir){oa(Se,xd(void 0));return}else{ae.add(Se),await Bt(da,Qa,!1,{preventScrollReset:It});return}if(bl(Qa)){Sa(Se,ze,Qa.error);return}oa(Se,xd(Qa.data))}}async function Bt(Se,ze,Ze,{submission:yt,fetcherSubmission:St,preventScrollReset:ut,replace:Ft}={}){Ze||(G?.resolve(),G=null),ze.response.headers.has("X-Remix-Revalidate")&&(W=!0);let It=ze.response.headers.get("Location");er(It,"Expected a Location header on the redirect Response"),It=v8(It,new URL(Se.url),d,a.history);let Et=vv(P.location,It,{_isRedirect:!0});if(t){let jr=!1;if(ze.response.headers.has("X-Remix-Reload-Document"))jr=!0;else if(IA(It)){const mr=$V(It,!0);jr=mr.origin!==e.location.origin||ro(mr.pathname,d)==null}if(jr){Ft?e.location.replace(It):e.location.assign(It);return}}U=null;let Gt=Ft===!0||ze.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:ua,formAction:da,formEncType:Aa}=P.navigation;!yt&&!St&&ua&&da&&Aa&&(yt=j8(P.navigation));let ir=yt||St;if(eee.has(ze.response.status)&&ir&&ns(ir.formMethod))await Ee(Gt,Et,{submission:{...ir,formAction:It},preventScrollReset:ut||X,enableViewTransition:Ze?te:void 0});else{let jr=PS(Et,yt);await Ee(Gt,Et,{overrideNavigation:jr,fetcherSubmission:St,preventScrollReset:ut||X,enableViewTransition:Ze?te:void 0})}}async function _a(Se,ze,Ze,yt){let St,ut={};try{St=await dee(u,Se,ze,yt,Ze,!1)}catch(Ft){return ze.filter(It=>It.shouldLoad).forEach(It=>{ut[It.route.id]={type:"error",error:Ft}}),ut}if(Se.signal.aborted)return ut;if(!ns(Se.method))for(let Ft of ze){if(St[Ft.route.id]?.type==="error")break;!St.hasOwnProperty(Ft.route.id)&&!P.loaderData.hasOwnProperty(Ft.route.id)&&(!P.errors||!P.errors.hasOwnProperty(Ft.route.id))&&Ft.shouldCallHandler()&&(St[Ft.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${Ft.route.id}`)})}for(let[Ft,It]of Object.entries(St))if(yee(It)){let Et=It.result;ut[Ft]={type:"redirect",response:pee(Et,Se,Ft,ze,d)}}else ut[Ft]=await fee(It);return ut}async function Nt(Se,ze,Ze,yt){let St=_a(Ze,Se,yt,null),ut=Promise.all(ze.map(async Et=>{if(Et.matches&&Et.match&&Et.request&&Et.controller){let ua=(await _a(Et.request,Et.matches,yt,Et.key))[Et.match.route.id];return{[Et.key]:ua}}else return Promise.resolve({[Et.key]:{type:"error",error:$l(404,{pathname:Et.path})}})})),Ft=await St,It=(await ut).reduce((Et,Gt)=>Object.assign(Et,Gt),{});return{loaderResults:Ft,fetcherResults:It}}function La(){W=!0,ce.forEach((Se,ze)=>{Q.has(ze)&&$.add(ze),Ye(ze)})}function oa(Se,ze,Ze={}){P.fetchers.set(Se,ze),_e({fetchers:new Map(P.fetchers)},{flushSync:(Ze&&Ze.flushSync)===!0})}function Sa(Se,ze,Ze,yt={}){let St=Gu(P.matches,ze);He(Se),_e({errors:{[St.route.id]:Ze},fetchers:new Map(P.fetchers)},{flushSync:(yt&&yt.flushSync)===!0})}function zt(Se){return de.set(Se,(de.get(Se)||0)+1),he.has(Se)&&he.delete(Se),P.fetchers.get(Se)||tee}function je(Se,ze){Ye(Se,ze?.reason),oa(Se,xd(null))}function He(Se){let ze=P.fetchers.get(Se);Q.has(Se)&&!(ze&&ze.state==="loading"&&K.has(Se))&&Ye(Se),ce.delete(Se),K.delete(Se),ae.delete(Se),he.delete(Se),$.delete(Se),P.fetchers.delete(Se)}function it(Se){let ze=(de.get(Se)||0)-1;ze<=0?(de.delete(Se),he.add(Se)):de.set(Se,ze),_e({fetchers:new Map(P.fetchers)})}function Ye(Se,ze){let Ze=Q.get(Se);Ze&&(Ze.abort(ze),Q.delete(Se))}function Ot(Se){for(let ze of Se){let Ze=zt(ze),yt=xd(Ze.data);P.fetchers.set(ze,yt)}}function st(){let Se=[],ze=!1;for(let Ze of ae){let yt=P.fetchers.get(Ze);er(yt,`Expected fetcher: ${Ze}`),yt.state==="loading"&&(ae.delete(Ze),Se.push(Ze),ze=!0)}return Ot(Se),ze}function Jt(Se){let ze=[];for(let[Ze,yt]of K)if(yt<Se){let St=P.fetchers.get(Ze);er(St,`Expected fetcher: ${Ze}`),St.state==="loading"&&(Ye(Ze),K.delete(Ze),ze.push(Ze))}return Ot(ze),ze.length>0}function Ar(Se,ze){let Ze=P.blockers.get(Se)||Fm;return pe.get(Se)!==ze&&pe.set(Se,ze),Ze}function xs(Se){P.blockers.delete(Se),pe.delete(Se)}function Lt(Se,ze){let Ze=P.blockers.get(Se)||Fm;er(Ze.state==="unblocked"&&ze.state==="blocked"||Ze.state==="blocked"&&ze.state==="blocked"||Ze.state==="blocked"&&ze.state==="proceeding"||Ze.state==="blocked"&&ze.state==="unblocked"||Ze.state==="proceeding"&&ze.state==="unblocked",`Invalid blocker state transition: ${Ze.state} -> ${ze.state}`);let yt=new Map(P.blockers);yt.set(Se,ze),_e({blockers:yt})}function Xa({currentLocation:Se,nextLocation:ze,historyAction:Ze}){if(pe.size===0)return;pe.size>1&&Zn(!1,"A router only supports one blocker at a time");let yt=Array.from(pe.entries()),[St,ut]=yt[yt.length-1],Ft=P.blockers.get(St);if(!(Ft&&Ft.state==="proceeding")&&ut({currentLocation:Se,nextLocation:ze,historyAction:Ze}))return St}function xi(Se){let ze=$l(404,{pathname:Se}),Ze=c||o,{matches:yt,route:St}=G1(Ze);return{notFoundMatches:yt,route:St,error:ze}}function Zi(Se,ze,Ze){if(g=Se,w=ze,b=Ze||null,!j&&P.navigation===OS){j=!0;let yt=Vo(P.location,P.matches);yt!=null&&_e({restoreScrollPosition:yt})}return()=>{g=null,w=null,b=null}}function Js(Se,ze){return b&&b(Se,ze.map(yt=>CJ(yt,P.loaderData)))||Se.key}function Nn(Se,ze){if(g&&w){let Ze=Js(Se,ze);g[Ze]=w()}}function Vo(Se,ze){if(g){let Ze=Js(Se,ze),yt=g[Ze];if(typeof yt=="number")return yt}return null}function dn(Se,ze,Ze){if(a.patchRoutesOnNavigation)if(Se){if(Object.keys(Se[0].params).length>0)return{active:!0,matches:Mg(ze,Ze,d,!0)}}else return{active:!0,matches:Mg(ze,Ze,d,!0)||[]};return{active:!1,matches:null}}async function Cn(Se,ze,Ze,yt){if(!a.patchRoutesOnNavigation)return{type:"success",matches:Se};let St=Se;for(;;){let ut=c==null,Ft=c||o,It=l;try{await a.patchRoutesOnNavigation({signal:Ze,path:ze,matches:St,fetcherKey:yt,patch:(ua,da)=>{Ze.aborted||p8(ua,da,Ft,It,i,!1)}})}catch(ua){return{type:"error",error:ua,partialMatches:St}}finally{ut&&!Ze.aborted&&(o=[...o])}if(Ze.aborted)return{type:"aborted"};let Et=Uu(Ft,ze,d),Gt=null;if(Et){if(Object.keys(Et[0].params).length===0)return{type:"success",matches:Et};if(Gt=Mg(Ft,ze,d,!0),!(Gt&&St.length<Gt.length&&ti(St,Gt.slice(0,St.length))))return{type:"success",matches:Et}}if(Gt||(Gt=Mg(Ft,ze,d,!0)),!Gt||ti(St,Gt))return{type:"success",matches:null};St=Gt}}function ti(Se,ze){return Se.length===ze.length&&Se.every((Ze,yt)=>Ze.route.id===ze[yt].route.id)}function Si(Se){l={},c=bv(Se,i,void 0,l)}function uo(Se,ze,Ze=!1){let yt=c==null;p8(Se,ze,c||o,l,i,Ze),yt&&(o=[...o],_e({}))}return R={get basename(){return d},get future(){return h},get state(){return P},get routes(){return o},get window(){return e},initialize:ke,subscribe:Ne,enableScrollRestoration:Zi,navigate:De,fetch:$e,revalidate:Ge,createHref:Se=>a.history.createHref(Se),encodeLocation:Se=>a.history.encodeLocation(Se),getFetcher:zt,resetFetcher:je,deleteFetcher:it,dispose:Le,getBlocker:Ar,deleteBlocker:xs,patchRoutes:uo,_internalFetchControllers:Q,_internalSetRoutes:Si,_internalSetStateDoNotUseOrYouWillBreakYourApp(Se){_e(Se)}},a.unstable_instrumentations&&(R=YJ(R,a.unstable_instrumentations.map(Se=>Se.router).filter(Boolean))),R}function nee(a){return a!=null&&("formData"in a&&a.formData!=null||"body"in a&&a.body!==void 0)}function LC(a,e,t,r,n,i){let l,o;if(n){l=[];for(let d of e)if(l.push(d),d.route.id===n){o=d;break}}else l=e,o=e[e.length-1];let c=R_(r||".",I_(l),ro(a.pathname,t)||a.pathname,i==="path");if(r==null&&(c.search=a.search,c.hash=a.hash),(r==null||r===""||r===".")&&o){let d=OA(c.search);if(o.route.index&&!d)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!o.route.index&&d){let u=new URLSearchParams(c.search),h=u.getAll("index");u.delete("index"),h.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();c.search=f?`?${f}`:""}}return t!=="/"&&(c.pathname=FJ({basename:t,pathname:c.pathname})),Tc(c)}function h8(a,e,t){if(!t||!nee(t))return{path:e};if(t.formMethod&&!Nee(t.formMethod))return{path:e,error:$l(405,{method:t.formMethod})};let r=()=>({path:e,error:$l(400,{type:"invalid-body"})}),i=(t.formMethod||"get").toUpperCase(),l=dH(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!ns(i))return r();let h=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((f,[p,g])=>`${f}${p}=${g}
`,""):String(t.body);return{path:e,submission:{formMethod:i,formAction:l,formEncType:t.formEncType,formData:void 0,json:void 0,text:h}}}else if(t.formEncType==="application/json"){if(!ns(i))return r();try{let h=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:i,formAction:l,formEncType:t.formEncType,formData:void 0,json:h,text:void 0}}}catch{return r()}}}er(typeof FormData=="function","FormData is not available in this environment");let o,c;if(t.formData)o=zC(t.formData),c=t.formData;else if(t.body instanceof FormData)o=zC(t.body),c=t.body;else if(t.body instanceof URLSearchParams)o=t.body,c=b8(o);else if(t.body==null)o=new URLSearchParams,c=new FormData;else try{o=new URLSearchParams(t.body),c=b8(o)}catch{return r()}let d={formMethod:i,formAction:l,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(ns(d.formMethod))return{path:e,submission:d};let u=Ch(e);return a&&u.search&&OA(u.search)&&o.append("index",""),u.search=`?${o}`,{path:Tc(u),submission:d}}function f8(a,e,t,r,n,i,l,o,c,d,u,h,f,p,g,b,w,j,k,T,E){let I=T?bl(T[1])?T[1].error:T[1].data:void 0,R=n.createURL(i.location),P=n.createURL(c),H;if(u&&i.errors){let B=Object.keys(i.errors)[0];H=l.findIndex(W=>W.route.id===B)}else if(T&&bl(T[1])){let B=T[0];H=l.findIndex(W=>W.route.id===B)-1}let G=T?T[1].statusCode:void 0,X=G&&G>=400,U={currentUrl:R,currentParams:i.matches[0]?.params||{},nextUrl:P,nextParams:l[0].params,...o,actionResult:I,actionStatus:G},te=xb(l),Z=l.map((B,W)=>{let{route:$}=B,Q=null;if(H!=null&&W>H?Q=!1:$.lazy?Q=!0:RA($)?u?Q=OC($,i.loaderData,i.errors):iee(i.loaderData,i.matches[W],B)&&(Q=!0):Q=!1,Q!==null)return PC(t,r,a,te,B,d,e,Q);let ne=!1;typeof E=="boolean"?ne=E:X?ne=!1:(h||R.pathname+R.search===P.pathname+P.search||R.search!==P.search||see(i.matches[W],B))&&(ne=!0);let re={...U,defaultShouldRevalidate:ne},K=Jg(B,re);return PC(t,r,a,te,B,d,e,K,re,E)}),J=[];return g.forEach((B,W)=>{if(u||!l.some(de=>de.route.id===B.routeId)||p.has(W))return;let $=i.fetchers.get(W),Q=$&&$.state!=="idle"&&$.data===void 0,ne=Uu(w,B.path,j);if(!ne){if(k&&Q)return;J.push({key:W,routeId:B.routeId,path:B.path,matches:null,match:null,request:null,controller:null});return}if(b.has(W))return;let re=jw(ne,B.path),K=new AbortController,ae=Gp(n,B.path,K.signal),ce=null;if(f.has(W))f.delete(W),ce=ix(t,r,ae,ne,re,d,e);else if(Q)h&&(ce=ix(t,r,ae,ne,re,d,e));else{let de;typeof E=="boolean"?de=E:X?de=!1:de=h;let he={...U,defaultShouldRevalidate:de};Jg(re,he)&&(ce=ix(t,r,ae,ne,re,d,e,he))}ce&&J.push({key:W,routeId:B.routeId,path:B.path,matches:ce,match:re,request:ae,controller:K})}),{dsMatches:Z,revalidatingFetchers:J}}function RA(a){return a.loader!=null||a.middleware!=null&&a.middleware.length>0}function OC(a,e,t){if(a.lazy)return!0;if(!RA(a))return!1;let r=e!=null&&a.id in e,n=t!=null&&t[a.id]!==void 0;return!r&&n?!1:typeof a.loader=="function"&&a.loader.hydrate===!0?!0:!r&&!n}function iee(a,e,t){let r=!e||t.route.id!==e.route.id,n=!a.hasOwnProperty(t.route.id);return r||n}function see(a,e){let t=a.route.path;return a.pathname!==e.pathname||t!=null&&t.endsWith("*")&&a.params["*"]!==e.params["*"]}function Jg(a,e){if(a.route.shouldRevalidate){let t=a.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function p8(a,e,t,r,n,i){let l;if(a){let d=r[a];er(d,`No route found to patch children into: routeId = ${a}`),d.children||(d.children=[]),l=d.children}else l=t;let o=[],c=[];if(e.forEach(d=>{let u=l.find(h=>iH(d,h));u?c.push({existingRoute:u,newRoute:d}):o.push(d)}),o.length>0){let d=bv(o,n,[a||"_","patch",String(l?.length||"0")],r);l.push(...d)}if(i&&c.length>0)for(let d=0;d<c.length;d++){let{existingRoute:u,newRoute:h}=c[d],f=u,[p]=bv([h],n,[],{},!0);Object.assign(f,{element:p.element?p.element:f.element,errorElement:p.errorElement?p.errorElement:f.errorElement,hydrateFallbackElement:p.hydrateFallbackElement?p.hydrateFallbackElement:f.hydrateFallbackElement})}}function iH(a,e){return"id"in a&&"id"in e&&a.id===e.id?!0:a.index===e.index&&a.path===e.path&&a.caseSensitive===e.caseSensitive?(!a.children||a.children.length===0)&&(!e.children||e.children.length===0)?!0:a.children.every((t,r)=>e.children?.some(n=>iH(t,n))):!1}var x8=new WeakMap,sH=({key:a,route:e,manifest:t,mapRouteProperties:r})=>{let n=t[e.id];if(er(n,"No route found in manifest"),!n.lazy||typeof n.lazy!="object")return;let i=n.lazy[a];if(!i)return;let l=x8.get(n);l||(l={},x8.set(n,l));let o=l[a];if(o)return o;let c=(async()=>{let d=NJ(a),h=n[a]!==void 0&&a!=="hasErrorBoundary";if(d)Zn(!d,"Route property "+a+" is not a supported lazy route property. This property will be ignored."),l[a]=Promise.resolve();else if(h)Zn(!1,`Route "${n.id}" has a static property "${a}" defined. The lazy property will be ignored.`);else{let f=await i();f!=null&&(Object.assign(n,{[a]:f}),Object.assign(n,r(n)))}typeof n.lazy=="object"&&(n.lazy[a]=void 0,Object.values(n.lazy).every(f=>f===void 0)&&(n.lazy=void 0))})();return l[a]=c,c},m8=new WeakMap;function lee(a,e,t,r,n){let i=t[a.id];if(er(i,"No route found in manifest"),!a.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof a.lazy=="function"){let u=m8.get(i);if(u)return{lazyRoutePromise:u,lazyHandlerPromise:u};let h=(async()=>{er(typeof a.lazy=="function","No lazy route function found");let f=await a.lazy(),p={};for(let g in f){let b=f[g];if(b===void 0)continue;let w=SJ(g),k=i[g]!==void 0&&g!=="hasErrorBoundary";w?Zn(!w,"Route property "+g+" is not a supported property to be returned from a lazy route function. This property will be ignored."):k?Zn(!k,`Route "${i.id}" has a static property "${g}" defined but its lazy function is also returning a value for this property. The lazy route property "${g}" will be ignored.`):p[g]=b}Object.assign(i,p),Object.assign(i,{...r(i),lazy:void 0})})();return m8.set(i,h),h.catch(()=>{}),{lazyRoutePromise:h,lazyHandlerPromise:h}}let l=Object.keys(a.lazy),o=[],c;for(let u of l){if(n&&n.includes(u))continue;let h=sH({key:u,route:a,manifest:t,mapRouteProperties:r});h&&(o.push(h),u===e&&(c=h))}let d=o.length>0?Promise.all(o).then(()=>{}):void 0;return d?.catch(()=>{}),c?.catch(()=>{}),{lazyRoutePromise:d,lazyHandlerPromise:c}}async function g8(a){let e=a.matches.filter(n=>n.shouldLoad),t={};return(await Promise.all(e.map(n=>n.resolve()))).forEach((n,i)=>{t[e[i].route.id]=n}),t}async function oee(a){return a.matches.some(e=>e.route.middleware)?lH(a,()=>g8(a)):g8(a)}function lH(a,e){return cee(a,e,r=>{if(_ee(r))throw r;return r},vee,t);function t(r,n,i){if(i)return Promise.resolve(Object.assign(i.value,{[n]:{type:"error",result:r}}));{let{matches:l}=a,o=Math.min(Math.max(l.findIndex(d=>d.route.id===n),0),Math.max(l.findIndex(d=>d.shouldCallHandler()),0)),c=Gu(l,l[o].route.id).route.id;return Promise.resolve({[c]:{type:"error",result:r}})}}}async function cee(a,e,t,r,n){let{matches:i,request:l,params:o,context:c,unstable_pattern:d}=a,u=i.flatMap(f=>f.route.middleware?f.route.middleware.map(p=>[f.route.id,p]):[]);return await oH({request:l,params:o,context:c,unstable_pattern:d},u,e,t,r,n)}async function oH(a,e,t,r,n,i,l=0){let{request:o}=a;if(o.signal.aborted)throw o.signal.reason??new Error(`Request aborted: ${o.method} ${o.url}`);let c=e[l];if(!c)return await t();let[d,u]=c,h,f=async()=>{if(h)throw new Error("You may only call `next()` once per middleware");try{return h={value:await oH(a,e,t,r,n,i,l+1)},h.value}catch(p){return h={value:await i(p,d,h)},h.value}};try{let p=await u(a,f),g=p!=null?r(p):void 0;return n(g)?g:h?g??h.value:(h={value:await f()},h.value)}catch(p){return await i(p,d,h)}}function cH(a,e,t,r,n){let i=sH({key:"middleware",route:r.route,manifest:e,mapRouteProperties:a}),l=lee(r.route,ns(t.method)?"action":"loader",e,a,n);return{middleware:i,route:l.lazyRoutePromise,handler:l.lazyHandlerPromise}}function PC(a,e,t,r,n,i,l,o,c=null,d){let u=!1,h=cH(a,e,t,n,i);return{...n,_lazyPromises:h,shouldLoad:o,shouldRevalidateArgs:c,shouldCallHandler(f){return u=!0,c?typeof d=="boolean"?Jg(n,{...c,defaultShouldRevalidate:d}):typeof f=="boolean"?Jg(n,{...c,defaultShouldRevalidate:f}):Jg(n,c):o},resolve(f){let{lazy:p,loader:g,middleware:b}=n.route,w=u||o||f&&!ns(t.method)&&(p||g),j=b&&b.length>0&&!g&&!p;return w&&(ns(t.method)||!j)?uee({request:t,unstable_pattern:r,match:n,lazyHandlerPromise:h?.handler,lazyRoutePromise:h?.route,handlerOverride:f,scopedContext:l}):Promise.resolve({type:"data",result:void 0})}}}function ix(a,e,t,r,n,i,l,o=null){return r.map(c=>c.route.id!==n.route.id?{...c,shouldLoad:!1,shouldRevalidateArgs:o,shouldCallHandler:()=>!1,_lazyPromises:cH(a,e,t,c,i),resolve:()=>Promise.resolve({type:"data",result:void 0})}:PC(a,e,t,xb(r),c,i,l,!0,o))}async function dee(a,e,t,r,n,i){t.some(d=>d._lazyPromises?.middleware)&&await Promise.all(t.map(d=>d._lazyPromises?.middleware));let l={request:e,unstable_pattern:xb(t),params:t[0].params,context:n,matches:t},c=await a({...l,fetcherKey:r,runClientMiddleware:d=>{let u=l;return lH(u,()=>d({...u,fetcherKey:r,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(d=>[d._lazyPromises?.handler,d._lazyPromises?.route]))}catch{}return c}async function uee({request:a,unstable_pattern:e,match:t,lazyHandlerPromise:r,lazyRoutePromise:n,handlerOverride:i,scopedContext:l}){let o,c,d=ns(a.method),u=d?"action":"loader",h=f=>{let p,g=new Promise((j,k)=>p=k);c=()=>p(),a.signal.addEventListener("abort",c);let b=j=>typeof f!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${u}" [routeId: ${t.route.id}]`)):f({request:a,unstable_pattern:e,params:t.params,context:l},...j!==void 0?[j]:[]),w=(async()=>{try{return{type:"data",result:await(i?i(k=>b(k)):b())}}catch(j){return{type:"error",result:j}}})();return Promise.race([w,g])};try{let f=d?t.route.action:t.route.loader;if(r||n)if(f){let p,[g]=await Promise.all([h(f).catch(b=>{p=b}),r,n]);if(p!==void 0)throw p;o=g}else{await r;let p=d?t.route.action:t.route.loader;if(p)[o]=await Promise.all([h(p),n]);else if(u==="action"){let g=new URL(a.url),b=g.pathname+g.search;throw $l(405,{method:a.method,pathname:b,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(f)o=await h(f);else{let p=new URL(a.url),g=p.pathname+p.search;throw $l(404,{pathname:g})}}catch(f){return{type:"error",result:f}}finally{c&&a.signal.removeEventListener("abort",c)}return o}async function hee(a){let e=a.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?a.body==null?null:a.json():a.text()}async function fee(a){let{result:e,type:t}=a;if(LA(e)){let r;try{r=await hee(e)}catch(n){return{type:"error",error:n}}return t==="error"?{type:"error",error:new pb(e.status,e.statusText,r),statusCode:e.status,headers:e.headers}:{type:"data",data:r,statusCode:e.status,headers:e.headers}}return t==="error"?N8(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:gee(e),statusCode:yv(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:yv(e)?e.status:void 0}:N8(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function pee(a,e,t,r,n){let i=a.headers.get("Location");if(er(i,"Redirects returned/thrown from loaders/actions must have a Location header"),!IA(i)){let l=r.slice(0,r.findIndex(o=>o.route.id===t)+1);i=LC(new URL(e.url),l,n,i),a.headers.set("Location",i)}return a}function v8(a,e,t,r){let n=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(IA(a)){let i=a,l=i.startsWith("//")?new URL(e.protocol+i):new URL(i);if(n.includes(l.protocol))throw new Error("Invalid redirect location");let o=ro(l.pathname,t)!=null;if(l.origin===e.origin&&o)return l.pathname+l.search+l.hash}try{let i=r.createURL(a);if(n.includes(i.protocol))throw new Error("Invalid redirect location")}catch{}return a}function Gp(a,e,t,r){let n=a.createURL(dH(e)).toString(),i={signal:t};if(r&&ns(r.formMethod)){let{formMethod:l,formEncType:o}=r;i.method=l.toUpperCase(),o==="application/json"?(i.headers=new Headers({"Content-Type":o}),i.body=JSON.stringify(r.json)):o==="text/plain"?i.body=r.text:o==="application/x-www-form-urlencoded"&&r.formData?i.body=zC(r.formData):i.body=r.formData}return new Request(n,i)}function zC(a){let e=new URLSearchParams;for(let[t,r]of a.entries())e.append(t,typeof r=="string"?r:r.name);return e}function b8(a){let e=new FormData;for(let[t,r]of a.entries())e.append(t,r);return e}function xee(a,e,t,r=!1,n=!1){let i={},l=null,o,c=!1,d={},u=t&&bl(t[1])?t[1].error:void 0;return a.forEach(h=>{if(!(h.route.id in e))return;let f=h.route.id,p=e[f];if(er(!Wf(p),"Cannot handle redirect results in processLoaderData"),bl(p)){let g=p.error;if(u!==void 0&&(g=u,u=void 0),l=l||{},n)l[f]=g;else{let b=Gu(a,f);l[b.route.id]==null&&(l[b.route.id]=g)}r||(i[f]=nH),c||(c=!0,o=yv(p.error)?p.error.status:500),p.headers&&(d[f]=p.headers)}else i[f]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(o=p.statusCode),p.headers&&(d[f]=p.headers)}),u!==void 0&&t&&(l={[t[0]]:u},t[2]&&(i[t[2]]=void 0)),{loaderData:i,errors:l,statusCode:o||200,loaderHeaders:d}}function y8(a,e,t,r,n,i){let{loaderData:l,errors:o}=xee(e,t,r);return n.filter(c=>!c.matches||c.matches.some(d=>d.shouldLoad)).forEach(c=>{let{key:d,match:u,controller:h}=c;if(h&&h.signal.aborted)return;let f=i[d];if(er(f,"Did not find corresponding fetcher result"),bl(f)){let p=Gu(a.matches,u?.route.id);o&&o[p.route.id]||(o={...o,[p.route.id]:f.error}),a.fetchers.delete(d)}else if(Wf(f))er(!1,"Unhandled fetcher revalidation redirect");else{let p=xd(f.data);a.fetchers.set(d,p)}}),{loaderData:l,errors:o}}function w8(a,e,t,r){let n=Object.entries(e).filter(([,i])=>i!==nH).reduce((i,[l,o])=>(i[l]=o,i),{});for(let i of t){let l=i.route.id;if(!e.hasOwnProperty(l)&&a.hasOwnProperty(l)&&i.route.loader&&(n[l]=a[l]),r&&r.hasOwnProperty(l))break}return n}function _8(a){return a?bl(a[1])?{actionData:{}}:{actionData:{[a[0]]:a[1].data}}:{}}function Gu(a,e){return(e?a.slice(0,a.findIndex(r=>r.route.id===e)+1):[...a]).reverse().find(r=>r.route.hasErrorBoundary===!0)||a[0]}function G1(a){let e=a.length===1?a[0]:a.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function $l(a,{pathname:e,routeId:t,method:r,type:n,message:i}={}){let l="Unknown Server Error",o="Unknown @remix-run/router error";return a===400?(l="Bad Request",r&&e&&t?o=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:n==="invalid-body"&&(o="Unable to encode submission body")):a===403?(l="Forbidden",o=`Route "${t}" does not match URL "${e}"`):a===404?(l="Not Found",o=`No route matches URL "${e}"`):a===405&&(l="Method Not Allowed",r&&e&&t?o=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(o=`Invalid request method "${r.toUpperCase()}"`)),new pb(a||500,l,new Error(o),!0)}function W1(a){let e=Object.entries(a);for(let t=e.length-1;t>=0;t--){let[r,n]=e[t];if(Wf(n))return{key:r,result:n}}}function dH(a){let e=typeof a=="string"?Ch(a):a;return Tc({...e,hash:""})}function mee(a,e){return a.pathname!==e.pathname||a.search!==e.search?!1:a.hash===""?e.hash!=="":a.hash===e.hash?!0:e.hash!==""}function gee(a){return new pb(a.init?.status??500,a.init?.statusText??"Internal Server Error",a.data)}function vee(a){return a!=null&&typeof a=="object"&&Object.entries(a).every(([e,t])=>typeof e=="string"&&bee(t))}function bee(a){return a!=null&&typeof a=="object"&&"type"in a&&"result"in a&&(a.type==="data"||a.type==="error")}function yee(a){return LA(a.result)&&aH.has(a.result.status)}function bl(a){return a.type==="error"}function Wf(a){return(a&&a.type)==="redirect"}function N8(a){return typeof a=="object"&&a!=null&&"type"in a&&"data"in a&&"init"in a&&a.type==="DataWithResponseInit"}function LA(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.headers=="object"&&typeof a.body<"u"}function wee(a){return aH.has(a)}function _ee(a){return LA(a)&&wee(a.status)&&a.headers.has("Location")}function Nee(a){return JJ.has(a.toUpperCase())}function ns(a){return KJ.has(a.toUpperCase())}function OA(a){return new URLSearchParams(a).getAll("index").some(e=>e==="")}function jw(a,e){let t=typeof e=="string"?Ch(e).search:e.search;if(a[a.length-1].route.index&&OA(t||""))return a[a.length-1];let r=KV(a);return r[r.length-1]}function j8(a){let{formMethod:e,formAction:t,formEncType:r,text:n,formData:i,json:l}=a;if(!(!e||!t||!r)){if(n!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:n};if(i!=null)return{formMethod:e,formAction:t,formEncType:r,formData:i,json:void 0,text:void 0};if(l!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:l,text:void 0}}}function PS(a,e){return e?{state:"loading",location:a,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:a,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function jee(a,e){return{state:"submitting",location:a,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Vm(a,e){return a?{state:"loading",formMethod:a.formMethod,formAction:a.formAction,formEncType:a.formEncType,formData:a.formData,json:a.json,text:a.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function See(a,e){return{state:"submitting",formMethod:a.formMethod,formAction:a.formAction,formEncType:a.formEncType,formData:a.formData,json:a.json,text:a.text,data:e?e.data:void 0}}function xd(a){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:a}}function kee(a,e){try{let t=a.sessionStorage.getItem(rH);if(t){let r=JSON.parse(t);for(let[n,i]of Object.entries(r||{}))i&&Array.isArray(i)&&e.set(n,new Set(i||[]))}}catch{}}function Cee(a,e){if(e.size>0){let t={};for(let[r,n]of e)t[r]=[...n];try{a.sessionStorage.setItem(rH,JSON.stringify(t))}catch(r){Zn(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function S8(){let a,e,t=new Promise((r,n)=>{a=async i=>{r(i);try{await t}catch{}},e=async i=>{n(i);try{await t}catch{}}});return{promise:t,resolve:a,reject:e}}var T0=F.createContext(null);T0.displayName="DataRouter";var mb=F.createContext(null);mb.displayName="DataRouterState";var uH=F.createContext(!1);function Aee(){return F.useContext(uH)}var PA=F.createContext({isTransitioning:!1});PA.displayName="ViewTransition";var hH=F.createContext(new Map);hH.displayName="Fetchers";var Tee=F.createContext(null);Tee.displayName="Await";var Al=F.createContext(null);Al.displayName="Navigation";var L_=F.createContext(null);L_.displayName="Location";var Oo=F.createContext({outlet:null,matches:[],isDataRoute:!1});Oo.displayName="Route";var zA=F.createContext(null);zA.displayName="RouteError";var fH="REACT_ROUTER_ERROR",Mee="REDIRECT",Eee="ROUTE_ERROR_RESPONSE";function Dee(a){if(a.startsWith(`${fH}:${Mee}:{`))try{let e=JSON.parse(a.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Iee(a){if(a.startsWith(`${fH}:${Eee}:{`))try{let e=JSON.parse(a.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new pb(e.status,e.statusText,e.data)}catch{}}function Ree(a,{relative:e}={}){er(Vx(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=F.useContext(Al),{hash:n,pathname:i,search:l}=gb(a,{relative:e}),o=i;return t!=="/"&&(o=i==="/"?t:wc([t,i])),r.createHref({pathname:o,search:l,hash:n})}function Vx(){return F.useContext(L_)!=null}function Pc(){return er(Vx(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(L_).location}var pH="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xH(a){F.useContext(Al).static||F.useLayoutEffect(a)}function an(){let{isDataRoute:a}=F.useContext(Oo);return a?Xee():Lee()}function Lee(){er(Vx(),"useNavigate() may be used only in the context of a <Router> component.");let a=F.useContext(T0),{basename:e,navigator:t}=F.useContext(Al),{matches:r}=F.useContext(Oo),{pathname:n}=Pc(),i=JSON.stringify(I_(r)),l=F.useRef(!1);return xH(()=>{l.current=!0}),F.useCallback((c,d={})=>{if(Zn(l.current,pH),!l.current)return;if(typeof c=="number"){t.go(c);return}let u=R_(c,JSON.parse(i),n,d.relative==="path");a==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:wc([e,u.pathname])),(d.replace?t.replace:t.push)(u,d.state,d)},[e,t,i,n,a])}var Oee=F.createContext(null);function Pee(a){let e=F.useContext(Oo).outlet;return F.useMemo(()=>e&&F.createElement(Oee.Provider,{value:a},e),[e,a])}function gb(a,{relative:e}={}){let{matches:t}=F.useContext(Oo),{pathname:r}=Pc(),n=JSON.stringify(I_(t));return F.useMemo(()=>R_(a,JSON.parse(n),r,e==="path"),[a,n,r,e])}function zee(a,e,t,r,n){er(Vx(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=F.useContext(Al),{matches:l}=F.useContext(Oo),o=l[l.length-1],c=o?o.params:{},d=o?o.pathname:"/",u=o?o.pathnameBase:"/",h=o&&o.route;{let k=h&&h.path||"";gH(d,!h||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let f=Pc(),p;p=f;let g=p.pathname||"/",b=g;if(u!=="/"){let k=u.replace(/^\//,"").split("/");b="/"+g.replace(/^\//,"").split("/").slice(k.length).join("/")}let w=Uu(a,{pathname:b});return Zn(h||w!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Zn(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Uee(w&&w.map(k=>Object.assign({},k,{params:Object.assign({},c,k.params),pathname:wc([u,i.encodeLocation?i.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:wc([u,i.encodeLocation?i.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),l,t,r,n)}function Bee(){let a=qee(),e=yv(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),t=a instanceof Error?a.stack:null,r="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",a),l=F.createElement(F.Fragment,null,F.createElement("p",null," Hey developer "),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:i},"ErrorBoundary")," or"," ",F.createElement("code",{style:i},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:n},t):null,l)}var Fee=F.createElement(Bee,null),mH=class extends F.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,e){return e.location!==a.location||e.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:e.error,location:e.location,revalidation:a.revalidation||e.revalidation}}componentDidCatch(a,e){this.props.onError?this.props.onError(a,e):console.error("React Router caught the following error during render",a)}render(){let a=this.state.error;if(this.context&&typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){const t=Iee(a.digest);t&&(a=t)}let e=a!==void 0?F.createElement(Oo.Provider,{value:this.props.routeContext},F.createElement(zA.Provider,{value:a,children:this.props.component})):this.props.children;return this.context?F.createElement(Vee,{error:a},e):e}};mH.contextType=uH;var zS=new WeakMap;function Vee({children:a,error:e}){let{basename:t}=F.useContext(Al);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=Dee(e.digest);if(r){let n=zS.get(e);if(n)throw n;let i=JV(r.location,t);if(QV&&!zS.get(e))if(i.isExternal||r.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:r.replace}));throw zS.set(e,l),l}return F.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return a}function Hee({routeContext:a,match:e,children:t}){let r=F.useContext(T0);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(Oo.Provider,{value:a},t)}function Uee(a,e=[],t=null,r=null,n=null){if(a==null){if(!t)return null;if(t.errors)a=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)a=t.matches;else return null}let i=a,l=t?.errors;if(l!=null){let u=i.findIndex(h=>h.route.id&&l?.[h.route.id]!==void 0);er(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,c=-1;if(t)for(let u=0;u<i.length;u++){let h=i[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:p}=t,g=h.route.loader&&!f.hasOwnProperty(h.route.id)&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let d=t&&r?(u,h)=>{r(u,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:xb(t.matches),errorInfo:h})}:void 0;return i.reduceRight((u,h,f)=>{let p,g=!1,b=null,w=null;t&&(p=l&&h.route.id?l[h.route.id]:void 0,b=h.route.errorElement||Fee,o&&(c<0&&f===0?(gH("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,w=null):c===f&&(g=!0,w=h.route.hydrateFallbackElement||null)));let j=e.concat(i.slice(0,f+1)),k=()=>{let T;return p?T=b:g?T=w:h.route.Component?T=F.createElement(h.route.Component,null):h.route.element?T=h.route.element:T=u,F.createElement(Hee,{match:h,routeContext:{outlet:u,matches:j,isDataRoute:t!=null},children:T})};return t&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?F.createElement(mH,{location:t.location,revalidation:t.revalidation,component:b,error:p,children:k(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:d}):k()},null)}function BA(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Gee(a){let e=F.useContext(T0);return er(e,BA(a)),e}function Wee(a){let e=F.useContext(mb);return er(e,BA(a)),e}function Yee(a){let e=F.useContext(Oo);return er(e,BA(a)),e}function FA(a){let e=Yee(a),t=e.matches[e.matches.length-1];return er(t.route.id,`${a} can only be used on routes that contain a unique "id"`),t.route.id}function $ee(){return FA("useRouteId")}function qee(){let a=F.useContext(zA),e=Wee("useRouteError"),t=FA("useRouteError");return a!==void 0?a:e.errors?.[t]}function Xee(){let{router:a}=Gee("useNavigate"),e=FA("useNavigate"),t=F.useRef(!1);return xH(()=>{t.current=!0}),F.useCallback(async(n,i={})=>{Zn(t.current,pH),t.current&&(typeof n=="number"?await a.navigate(n):await a.navigate(n,{fromRouteId:e,...i}))},[a,e])}var k8={};function gH(a,e,t){!e&&!k8[a]&&(k8[a]=!0,Zn(!1,t))}var C8={};function A8(a,e){!a&&!C8[e]&&(C8[e]=!0,console.warn(e))}var Zee="useOptimistic",T8=dJ[Zee],Kee=()=>{};function Qee(a){return T8?T8(a):[a,Kee]}function Jee(a){let e={hasErrorBoundary:a.hasErrorBoundary||a.ErrorBoundary!=null||a.errorElement!=null};return a.Component&&(a.element&&Zn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:F.createElement(a.Component),Component:void 0})),a.HydrateFallback&&(a.hydrateFallbackElement&&Zn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:F.createElement(a.HydrateFallback),HydrateFallback:void 0})),a.ErrorBoundary&&(a.errorElement&&Zn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:F.createElement(a.ErrorBoundary),ErrorBoundary:void 0})),e}var ete=["HydrateFallback","hydrateFallbackElement"],tte=class{constructor(){this.status="pending",this.promise=new Promise((a,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",a(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function ate({router:a,flushSync:e,onError:t,unstable_useTransitions:r}){r=Aee()||r;let[i,l]=F.useState(a.state),[o,c]=Qee(i),[d,u]=F.useState(),[h,f]=F.useState({isTransitioning:!1}),[p,g]=F.useState(),[b,w]=F.useState(),[j,k]=F.useState(),T=F.useRef(new Map),E=F.useCallback((H,{deletedFetchers:G,newErrors:X,flushSync:U,viewTransitionOpts:te})=>{X&&t&&Object.values(X).forEach(J=>t(J,{location:H.location,params:H.matches[0]?.params??{},unstable_pattern:xb(H.matches)})),H.fetchers.forEach((J,B)=>{J.data!==void 0&&T.current.set(B,J.data)}),G.forEach(J=>T.current.delete(J)),A8(U===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let Z=a.window!=null&&a.window.document!=null&&typeof a.window.document.startViewTransition=="function";if(A8(te==null||Z,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!te||!Z){e&&U?e(()=>l(H)):r===!1?l(H):F.startTransition(()=>{r===!0&&c(J=>M8(J,H)),l(H)});return}if(e&&U){e(()=>{b&&(p?.resolve(),b.skipTransition()),f({isTransitioning:!0,flushSync:!0,currentLocation:te.currentLocation,nextLocation:te.nextLocation})});let J=a.window.document.startViewTransition(()=>{e(()=>l(H))});J.finished.finally(()=>{e(()=>{g(void 0),w(void 0),u(void 0),f({isTransitioning:!1})})}),e(()=>w(J));return}b?(p?.resolve(),b.skipTransition(),k({state:H,currentLocation:te.currentLocation,nextLocation:te.nextLocation})):(u(H),f({isTransitioning:!0,flushSync:!1,currentLocation:te.currentLocation,nextLocation:te.nextLocation}))},[a.window,e,b,p,r,c,t]);F.useLayoutEffect(()=>a.subscribe(E),[a,E]),F.useEffect(()=>{h.isTransitioning&&!h.flushSync&&g(new tte)},[h]),F.useEffect(()=>{if(p&&d&&a.window){let H=d,G=p.promise,X=a.window.document.startViewTransition(async()=>{r===!1?l(H):F.startTransition(()=>{r===!0&&c(U=>M8(U,H)),l(H)}),await G});X.finished.finally(()=>{g(void 0),w(void 0),u(void 0),f({isTransitioning:!1})}),w(X)}},[d,p,a.window,r,c]),F.useEffect(()=>{p&&d&&o.location.key===d.location.key&&p.resolve()},[p,b,o.location,d]),F.useEffect(()=>{!h.isTransitioning&&j&&(u(j.state),f({isTransitioning:!0,flushSync:!1,currentLocation:j.currentLocation,nextLocation:j.nextLocation}),k(void 0))},[h.isTransitioning,j]);let I=F.useMemo(()=>({createHref:a.createHref,encodeLocation:a.encodeLocation,go:H=>a.navigate(H),push:(H,G,X)=>a.navigate(H,{state:G,preventScrollReset:X?.preventScrollReset}),replace:(H,G,X)=>a.navigate(H,{replace:!0,state:G,preventScrollReset:X?.preventScrollReset})}),[a]),R=a.basename||"/",P=F.useMemo(()=>({router:a,navigator:I,static:!1,basename:R,onError:t}),[a,I,R,t]);return F.createElement(F.Fragment,null,F.createElement(T0.Provider,{value:P},F.createElement(mb.Provider,{value:o},F.createElement(hH.Provider,{value:T.current},F.createElement(PA.Provider,{value:h},F.createElement(ite,{basename:R,location:o.location,navigationType:o.historyAction,navigator:I,unstable_useTransitions:r},F.createElement(rte,{routes:a.routes,future:a.future,state:o,onError:t})))))),null)}function M8(a,e){return{...a,navigation:e.navigation.state!=="idle"?e.navigation:a.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:a.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:a.actionData,fetchers:e.fetchers}}var rte=F.memo(nte);function nte({routes:a,future:e,state:t,onError:r}){return zee(a,void 0,t,r,e)}function Ef({to:a,replace:e,state:t,relative:r}){er(Vx(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=F.useContext(Al);Zn(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=F.useContext(Oo),{pathname:l}=Pc(),o=an(),c=R_(a,I_(i),l,r==="path"),d=JSON.stringify(c);return F.useEffect(()=>{o(JSON.parse(d),{replace:e,state:t,relative:r})},[o,d,r,e,t]),null}function xx(a){return Pee(a.context)}function ha(a){er(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ite({basename:a="/",children:e=null,location:t,navigationType:r="POP",navigator:n,static:i=!1,unstable_useTransitions:l}){er(!Vx(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=a.replace(/^\/*/,"/"),c=F.useMemo(()=>({basename:o,navigator:n,static:i,unstable_useTransitions:l,future:{}}),[o,n,i,l]);typeof t=="string"&&(t=Ch(t));let{pathname:d="/",search:u="",hash:h="",state:f=null,key:p="default"}=t,g=F.useMemo(()=>{let b=ro(d,o);return b==null?null:{location:{pathname:b,search:u,hash:h,state:f,key:p},navigationType:r}},[o,d,u,h,f,p,r]);return Zn(g!=null,`<Router basename="${o}"> is not able to match the URL "${d}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:F.createElement(Al.Provider,{value:c},F.createElement(L_.Provider,{children:e,value:g}))}function BC(a,e=[]){let t=[];return F.Children.forEach(a,(r,n)=>{if(!F.isValidElement(r))return;let i=[...e,n];if(r.type===F.Fragment){t.push.apply(t,BC(r.props.children,i));return}er(r.type===ha,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),er(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=BC(r.props.children,i)),t.push(l)}),t}var ste=BC,Sw="get",kw="application/x-www-form-urlencoded";function O_(a){return typeof HTMLElement<"u"&&a instanceof HTMLElement}function lte(a){return O_(a)&&a.tagName.toLowerCase()==="button"}function ote(a){return O_(a)&&a.tagName.toLowerCase()==="form"}function cte(a){return O_(a)&&a.tagName.toLowerCase()==="input"}function dte(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function ute(a,e){return a.button===0&&(!e||e==="_self")&&!dte(a)}var Y1=null;function hte(){if(Y1===null)try{new FormData(document.createElement("form"),0),Y1=!1}catch{Y1=!0}return Y1}var fte=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function BS(a){return a!=null&&!fte.has(a)?(Zn(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kw}"`),null):a}function pte(a,e){let t,r,n,i,l;if(ote(a)){let o=a.getAttribute("action");r=o?ro(o,e):null,t=a.getAttribute("method")||Sw,n=BS(a.getAttribute("enctype"))||kw,i=new FormData(a)}else if(lte(a)||cte(a)&&(a.type==="submit"||a.type==="image")){let o=a.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=a.getAttribute("formaction")||o.getAttribute("action");if(r=c?ro(c,e):null,t=a.getAttribute("formmethod")||o.getAttribute("method")||Sw,n=BS(a.getAttribute("formenctype"))||BS(o.getAttribute("enctype"))||kw,i=new FormData(o,a),!hte()){let{name:d,type:u,value:h}=a;if(u==="image"){let f=d?`${d}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else d&&i.append(d,h)}}else{if(O_(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Sw,r=null,n=kw,l=a}return i&&n==="text/plain"&&(l=i,i=void 0),{action:r,method:t.toLowerCase(),encType:n,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function VA(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function xte(a,e,t,r){let n=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return t?n.pathname.endsWith("/")?n.pathname=`${n.pathname}_.${r}`:n.pathname=`${n.pathname}.${r}`:n.pathname==="/"?n.pathname=`_root.${r}`:e&&ro(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function mte(a,e){if(a.id in e)return e[a.id];try{let t=await import(a.module);return e[a.id]=t,t}catch(t){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gte(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function vte(a,e,t){let r=await Promise.all(a.map(async n=>{let i=e.routes[n.route.id];if(i){let l=await mte(i,t);return l.links?l.links():[]}return[]}));return _te(r.flat(1).filter(gte).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function E8(a,e,t,r,n,i){let l=(c,d)=>t[d]?c.route.id!==t[d].route.id:!0,o=(c,d)=>t[d].pathname!==c.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==c.params["*"];return i==="assets"?e.filter((c,d)=>l(c,d)||o(c,d)):i==="data"?e.filter((c,d)=>{let u=r.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(l(c,d)||o(c,d))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function bte(a,e,{includeHydrateFallback:t}={}){return yte(a.map(r=>{let n=e.routes[r.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),t&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function yte(a){return[...new Set(a)]}function wte(a){let e={},t=Object.keys(a).sort();for(let r of t)e[r]=a[r];return e}function _te(a,e){let t=new Set;return new Set(e),a.reduce((r,n)=>{let i=JSON.stringify(wte(n));return t.has(i)||(t.add(i),r.push({key:i,link:n})),r},[])}function vH(){let a=F.useContext(T0);return VA(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function Nte(){let a=F.useContext(mb);return VA(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var HA=F.createContext(void 0);HA.displayName="FrameworkContext";function bH(){let a=F.useContext(HA);return VA(a,"You must render this element inside a <HydratedRouter> element"),a}function jte(a,e){let t=F.useContext(HA),[r,n]=F.useState(!1),[i,l]=F.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=e,f=F.useRef(null);F.useEffect(()=>{if(a==="render"&&l(!0),a==="viewport"){let b=j=>{j.forEach(k=>{l(k.isIntersecting)})},w=new IntersectionObserver(b,{threshold:.5});return f.current&&w.observe(f.current),()=>{w.disconnect()}}},[a]),F.useEffect(()=>{if(r){let b=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(b)}}},[r]);let p=()=>{n(!0)},g=()=>{n(!1),l(!1)};return t?a!=="intent"?[i,f,{}]:[i,f,{onFocus:Hm(o,p),onBlur:Hm(c,g),onMouseEnter:Hm(d,p),onMouseLeave:Hm(u,g),onTouchStart:Hm(h,p)}]:[!1,f,{}]}function Hm(a,e){return t=>{a&&a(t),t.defaultPrevented||e(t)}}function Ste({page:a,...e}){let{router:t}=vH(),r=F.useMemo(()=>Uu(t.routes,a,t.basename),[t.routes,a,t.basename]);return r?F.createElement(Cte,{page:a,matches:r,...e}):null}function kte(a){let{manifest:e,routeModules:t}=bH(),[r,n]=F.useState([]);return F.useEffect(()=>{let i=!1;return vte(a,e,t).then(l=>{i||n(l)}),()=>{i=!0}},[a,e,t]),r}function Cte({page:a,matches:e,...t}){let r=Pc(),{future:n,manifest:i,routeModules:l}=bH(),{basename:o}=vH(),{loaderData:c,matches:d}=Nte(),u=F.useMemo(()=>E8(a,e,d,i,r,"data"),[a,e,d,i,r]),h=F.useMemo(()=>E8(a,e,d,i,r,"assets"),[a,e,d,i,r]),f=F.useMemo(()=>{if(a===r.pathname+r.search+r.hash)return[];let b=new Set,w=!1;if(e.forEach(k=>{let T=i.routes[k.route.id];!T||!T.hasLoader||(!u.some(E=>E.route.id===k.route.id)&&k.route.id in c&&l[k.route.id]?.shouldRevalidate||T.hasClientLoader?w=!0:b.add(k.route.id))}),b.size===0)return[];let j=xte(a,o,n.unstable_trailingSlashAwareDataRequests,"data");return w&&b.size>0&&j.searchParams.set("_routes",e.filter(k=>b.has(k.route.id)).map(k=>k.route.id).join(",")),[j.pathname+j.search]},[o,n.unstable_trailingSlashAwareDataRequests,c,r,i,u,e,a,l]),p=F.useMemo(()=>bte(h,i),[h,i]),g=kte(h);return F.createElement(F.Fragment,null,f.map(b=>F.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...t})),p.map(b=>F.createElement("link",{key:b,rel:"modulepreload",href:b,...t})),g.map(({key:b,link:w})=>F.createElement("link",{key:b,nonce:t.nonce,...w,crossOrigin:w.crossOrigin??t.crossOrigin})))}function Ate(...a){return e=>{a.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Tte=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Tte&&(window.__reactRouterVersion="7.13.0")}catch{}function Mte(a,e){return ree({basename:e?.basename,getContext:e?.getContext,future:e?.future,history:bJ({window:e?.window}),hydrationData:Ete(),routes:a,mapRouteProperties:Jee,hydrationRouteProperties:ete,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window,unstable_instrumentations:e?.unstable_instrumentations}).initialize()}function Ete(){let a=window?.__staticRouterHydrationData;return a&&a.errors&&(a={...a,errors:Dte(a.errors)}),a}function Dte(a){if(!a)return null;let e=Object.entries(a),t={};for(let[r,n]of e)if(n&&n.__type==="RouteErrorResponse")t[r]=new pb(n.status,n.statusText,n.data,n.internal===!0);else if(n&&n.__type==="Error"){if(n.__subType){let i=window[n.__subType];if(typeof i=="function")try{let l=new i(n.message);l.stack="",t[r]=l}catch{}}if(t[r]==null){let i=new Error(n.message);i.stack="",t[r]=i}}else t[r]=n;return t}var yH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wH=F.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:n,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:f,...p},g){let{basename:b,unstable_useTransitions:w}=F.useContext(Al),j=typeof d=="string"&&yH.test(d),k=JV(d,b);d=k.to;let T=Ree(d,{relative:n}),[E,I,R]=jte(r,p),P=Lte(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:n,viewTransition:h,unstable_defaultShouldRevalidate:f,unstable_useTransitions:w});function H(X){e&&e(X),X.defaultPrevented||P(X)}let G=F.createElement("a",{...p,...R,href:k.absoluteURL||T,onClick:k.isExternal||i?e:H,ref:Ate(g,I),target:c,"data-discover":!j&&t==="render"?"true":void 0});return E&&!j?F.createElement(F.Fragment,null,G,F.createElement(Ste,{page:T})):G});wH.displayName="Link";var UA=F.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:n=!1,style:i,to:l,viewTransition:o,children:c,...d},u){let h=gb(l,{relative:d.relative}),f=Pc(),p=F.useContext(mb),{navigator:g,basename:b}=F.useContext(Al),w=p!=null&&Fte(h)&&o===!0,j=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,k=f.pathname,T=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(k=k.toLowerCase(),T=T?T.toLowerCase():null,j=j.toLowerCase()),T&&b&&(T=ro(T,b)||T);const E=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let I=k===j||!n&&k.startsWith(j)&&k.charAt(E)==="/",R=T!=null&&(T===j||!n&&T.startsWith(j)&&T.charAt(j.length)==="/"),P={isActive:I,isPending:R,isTransitioning:w},H=I?e:void 0,G;typeof r=="function"?G=r(P):G=[r,I?"active":null,R?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let X=typeof i=="function"?i(P):i;return F.createElement(wH,{...d,"aria-current":H,className:G,ref:u,style:X,to:l,viewTransition:o},typeof c=="function"?c(P):c)});UA.displayName="NavLink";var Ite=F.forwardRef(({discover:a="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:n,state:i,method:l=Sw,action:o,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:f,...p},g)=>{let{unstable_useTransitions:b}=F.useContext(Al),w=zte(),j=Bte(o,{relative:d}),k=l.toLowerCase()==="get"?"get":"post",T=typeof o=="string"&&yH.test(o),E=I=>{if(c&&c(I),I.defaultPrevented)return;I.preventDefault();let R=I.nativeEvent.submitter,P=R?.getAttribute("formmethod")||l,H=()=>w(R||I.currentTarget,{fetcherKey:e,method:P,navigate:t,replace:n,state:i,relative:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:f});b&&t!==!1?F.startTransition(()=>H()):H()};return F.createElement("form",{ref:g,method:k,action:j,onSubmit:r?c:E,...p,"data-discover":!T&&a==="render"?"true":void 0})});Ite.displayName="Form";function Rte(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _H(a){let e=F.useContext(T0);return er(e,Rte(a)),e}function Lte(a,{target:e,replace:t,state:r,preventScrollReset:n,relative:i,viewTransition:l,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let d=an(),u=Pc(),h=gb(a,{relative:i});return F.useCallback(f=>{if(ute(f,e)){f.preventDefault();let p=t!==void 0?t:Tc(u)===Tc(h),g=()=>d(a,{replace:p,state:r,preventScrollReset:n,relative:i,viewTransition:l,unstable_defaultShouldRevalidate:o});c?F.startTransition(()=>g()):g()}},[u,d,h,t,r,e,a,n,i,l,o,c])}var Ote=0,Pte=()=>`__${String(++Ote)}__`;function zte(){let{router:a}=_H("useSubmit"),{basename:e}=F.useContext(Al),t=$ee(),r=a.fetch,n=a.navigate;return F.useCallback(async(i,l={})=>{let{action:o,method:c,encType:d,formData:u,body:h}=pte(i,e);if(l.navigate===!1){let f=l.fetcherKey||Pte();await r(f,t,l.action||o,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:u,body:h,formMethod:l.method||c,formEncType:l.encType||d,flushSync:l.flushSync})}else await n(l.action||o,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:u,body:h,formMethod:l.method||c,formEncType:l.encType||d,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,n,e,t])}function Bte(a,{relative:e}={}){let{basename:t}=F.useContext(Al),r=F.useContext(Oo);er(r,"useFormAction must be used inside a RouteContext");let[n]=r.matches.slice(-1),i={...gb(a||".",{relative:e})},l=Pc();if(a==null){i.search=l.search;let o=new URLSearchParams(i.search),c=o.getAll("index");if(c.some(u=>u==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let u=o.toString();i.search=u?`?${u}`:""}}return(!a||a===".")&&n.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:wc([t,i.pathname])),Tc(i)}function Fte(a,{relative:e}={}){let t=F.useContext(PA);er(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=_H("useViewTransitionState"),n=gb(a,{relative:e});if(!t.isTransitioning)return!1;let i=ro(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=ro(t.nextLocation.pathname,r)||t.nextLocation.pathname;return r2(n.pathname,l)!=null||r2(n.pathname,i)!=null}var GA=WV();function Vte(a){return F.createElement(ate,{flushSync:GA.flushSync,...a})}const NH=F.createContext(),wa=()=>F.useContext(NH),Hte=({children:a})=>{const[e,t]=F.useState([]),r=F.useCallback(f=>{t(p=>p.filter(g=>g.id!==f))},[]),[n,i]=F.useState(null),l=F.useCallback(()=>{const f=document.querySelectorAll("#local-modal-root");return f.length>0?f[f.length-1]:document.body},[]),o=F.useCallback((f,p)=>new Promise(g=>{const b=Date.now()+Math.random();i(l()),t(w=>[...w,{id:b,type:"alert",title:f,message:p,onConfirm:()=>{g(!0),r(b)}}])}),[r,l]),c=F.useCallback((f,p)=>new Promise(g=>{const b=Date.now()+Math.random();i(l()),t(w=>[...w,{id:b,type:"confirm",title:f,message:p,onConfirm:()=>{g(!0),r(b)},onCancel:()=>{g(!1),r(b)}}])}),[r,l]),d=F.useCallback((f,p,g=[])=>new Promise(b=>{const w=Date.now()+Math.random();i(l()),t(j=>[...j,{id:w,type:"choice",title:f,message:p,options:g,onSelect:k=>{b(k),r(w)}}])}),[r,l]),u=F.useCallback(()=>new Promise(f=>{const p=Date.now()+Math.random();i(l()),t(g=>[...g,{id:p,type:"password",title:" ",message:"  .",onConfirm:b=>{f(b),r(p)},onCancel:()=>{f(null),r(p)}}])}),[r,l]);F.useEffect(()=>{i(l())},[l]);const h=or.useMemo(()=>({showConfirm:c,showChoice:d,showAlert:o,promptAdminPassword:u}),[c,d,o,u]);return s.jsxs(NH.Provider,{value:h,children:[a,n&&GA.createPortal(s.jsx("div",{id:"modal-root",children:e.map((f,p)=>s.jsx(Ute,{modal:f,index:p},f.id))}),n)]})},Ute=({modal:a,index:e})=>{const[t,r]=F.useState(""),n=or.useRef(null);F.useEffect(()=>{const l=o=>{if(o.key!=="Tab")return;const c=n.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),d=c[0],u=c[c.length-1];o.shiftKey?document.activeElement===d&&(u.focus(),o.preventDefault()):document.activeElement===u&&(d.focus(),o.preventDefault())};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[]);const i=()=>{a.type==="password"?a.onConfirm(t):a.onConfirm()};return s.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 pointer-events-auto",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/70 backdrop-blur-sm animate-in fade-in duration-200",style:{zIndex:9999+e}}),s.jsxs("div",{ref:n,className:"bg-slate-900 border border-slate-700 rounded-3xl p-8 max-w-md w-full shadow-2xl relative animate-in zoom-in-95 duration-200 slide-in-from-bottom-4",style:{zIndex:1e4+e},children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/10 blur-[40px] rounded-full pointer-events-none"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2 relative z-10",children:a.title}),s.jsx("p",{className:"text-slate-300 mb-6 leading-relaxed relative z-10 whitespace-pre-line break-all",children:a.message}),a.type==="password"&&s.jsx("div",{className:"mb-8 relative z-10",children:s.jsx("input",{type:"password",autoFocus:!0,value:t,onChange:l=>r(l.target.value),onKeyDown:l=>{l.key==="Enter"&&i(),l.key==="Escape"&&a.onCancel()},className:"w-full h-12 bg-slate-950 border border-slate-700 rounded-xl px-4 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all font-mono tracking-widest",placeholder:"Password"})}),s.jsx("div",{className:"flex gap-3 justify-end relative z-10",children:a.type==="choice"?s.jsx("div",{className:"flex flex-wrap gap-2 justify-end w-full",children:a.options.map((l,o)=>s.jsx("button",{onClick:()=>a.onSelect(l.value),className:`px-5 py-2.5 rounded-xl font-bold transition-all active:scale-[0.98] ${l.primary?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg shadow-indigo-500/20 hover:brightness-110":l.danger?"bg-rose-600/20 text-rose-500 border border-rose-500/50 hover:bg-rose-600 hover:text-white":"bg-slate-800 text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:l.label},o))}):s.jsxs(s.Fragment,{children:[(a.type==="confirm"||a.type==="password")&&s.jsx("button",{onClick:a.onCancel,className:"px-5 py-2.5 rounded-xl text-slate-400 font-bold hover:bg-slate-800 hover:text-white transition-colors",children:""}),s.jsx("button",{onClick:i,className:"px-6 py-2.5 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold shadow-lg shadow-indigo-500/20 hover:brightness-110 active:scale-[0.98] transition-all",children:""})]})})]})]})};var Cw={exports:{}},Gte=Cw.exports,D8;function Wte(){return D8||(D8=1,(function(a,e){((t,r)=>{a.exports=r()})(Gte,function(){var t=function(_,A){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(O,z){O.__proto__=z}:function(O,z){for(var Y in z)Object.prototype.hasOwnProperty.call(z,Y)&&(O[Y]=z[Y])}))(_,A)},r=function(){return(r=Object.assign||function(_){for(var A,O=1,z=arguments.length;O<z;O++)for(var Y in A=arguments[O])Object.prototype.hasOwnProperty.call(A,Y)&&(_[Y]=A[Y]);return _}).apply(this,arguments)};function n(_,A,O){for(var z,Y=0,ee=A.length;Y<ee;Y++)!z&&Y in A||((z=z||Array.prototype.slice.call(A,0,Y))[Y]=A[Y]);return _.concat(z||Array.prototype.slice.call(A))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ag,l=Object.keys,o=Array.isArray;function c(_,A){return typeof A=="object"&&l(A).forEach(function(O){_[O]=A[O]}),_}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var d=Object.getPrototypeOf,u={}.hasOwnProperty;function h(_,A){return u.call(_,A)}function f(_,A){typeof A=="function"&&(A=A(d(_))),(typeof Reflect>"u"?l:Reflect.ownKeys)(A).forEach(function(O){g(_,O,A[O])})}var p=Object.defineProperty;function g(_,A,O,z){p(_,A,c(O&&h(O,"get")&&typeof O.get=="function"?{get:O.get,set:O.set,configurable:!0}:{value:O,configurable:!0,writable:!0},z))}function b(_){return{from:function(A){return _.prototype=Object.create(A.prototype),g(_.prototype,"constructor",_),{extend:f.bind(null,_.prototype)}}}}var w=Object.getOwnPropertyDescriptor,j=[].slice;function k(_,A,O){return j.call(_,A,O)}function T(_,A){return A(_)}function E(_){if(!_)throw new Error("Assertion Failed")}function I(_){i.setImmediate?setImmediate(_):setTimeout(_,0)}function R(_,A){if(typeof A=="string"&&h(_,A))return _[A];if(!A)return _;if(typeof A!="string"){for(var O=[],z=0,Y=A.length;z<Y;++z){var ee=R(_,A[z]);O.push(ee)}return O}var ie,oe=A.indexOf(".");return oe===-1||(ie=_[A.substr(0,oe)])==null?void 0:R(ie,A.substr(oe+1))}function P(_,A,O){if(_&&A!==void 0&&!("isFrozen"in Object&&Object.isFrozen(_)))if(typeof A!="string"&&"length"in A){E(typeof O!="string"&&"length"in O);for(var z=0,Y=A.length;z<Y;++z)P(_,A[z],O[z])}else{var ee,ie,oe=A.indexOf(".");oe!==-1?(ee=A.substr(0,oe),(oe=A.substr(oe+1))===""?O===void 0?o(_)&&!isNaN(parseInt(ee))?_.splice(ee,1):delete _[ee]:_[ee]=O:P(ie=(ie=_[ee])&&h(_,ee)?ie:_[ee]={},oe,O)):O===void 0?o(_)&&!isNaN(parseInt(A))?_.splice(A,1):delete _[A]:_[A]=O}}function H(_){var A,O={};for(A in _)h(_,A)&&(O[A]=_[A]);return O}var G=[].concat;function X(_){return G.apply([],_)}var ae="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(X([8,16,32,64].map(function(_){return["Int","Uint","Float"].map(function(A){return A+_+"Array"})}))).filter(function(_){return i[_]}),U=new Set(ae.map(function(_){return i[_]})),te=null;function Z(_){return te=new WeakMap,_=(function A(O){if(!O||typeof O!="object")return O;var z=te.get(O);if(z)return z;if(o(O)){z=[],te.set(O,z);for(var Y=0,ee=O.length;Y<ee;++Y)z.push(A(O[Y]))}else if(U.has(O.constructor))z=O;else{var ie,oe=d(O);for(ie in z=oe===Object.prototype?{}:Object.create(oe),te.set(O,z),O)h(O,ie)&&(z[ie]=A(O[ie]))}return z})(_),te=null,_}var J={}.toString;function B(_){return J.call(_).slice(8,-1)}var W=typeof Symbol<"u"?Symbol.iterator:"@@iterator",$=typeof W=="symbol"?function(_){var A;return _!=null&&(A=_[W])&&A.apply(_)}:function(){return null};function Q(_,A){A=_.indexOf(A),0<=A&&_.splice(A,1)}var ne={};function re(_){var A,O,z,Y;if(arguments.length===1){if(o(_))return _.slice();if(this===ne&&typeof _=="string")return[_];if(Y=$(_))for(O=[];!(z=Y.next()).done;)O.push(z.value);else{if(_==null)return[_];if(typeof(A=_.length)!="number")return[_];for(O=new Array(A);A--;)O[A]=_[A]}}else for(A=arguments.length,O=new Array(A);A--;)O[A]=arguments[A];return O}var K=typeof Symbol<"u"?function(_){return _[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ae=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Nt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ae),ce={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function de(_,A){this.name=_,this.message=A}function he(_,A){return _+". Errors: "+Object.keys(A).map(function(O){return A[O].toString()}).filter(function(O,z,Y){return Y.indexOf(O)===z}).join(`
`)}function pe(_,A,O,z){this.failures=A,this.failedKeys=z,this.successCount=O,this.message=he(_,A)}function Re(_,A){this.name="BulkError",this.failures=Object.keys(A).map(function(O){return A[O]}),this.failuresByPos=A,this.message=he(_,this.failures)}b(de).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(pe).from(de),b(Re).from(de);var Te=Nt.reduce(function(_,A){return _[A]=A+"Error",_},{}),ke=de,Le=Nt.reduce(function(_,A){var O=A+"Error";function z(Y,ee){this.name=O,Y?typeof Y=="string"?(this.message="".concat(Y).concat(ee?`
 `+ee:""),this.inner=ee||null):typeof Y=="object"&&(this.message="".concat(Y.name," ").concat(Y.message),this.inner=Y):(this.message=ce[A]||O,this.inner=null)}return b(z).from(ke),_[A]=z,_},{}),Ne=(Le.Syntax=SyntaxError,Le.Type=TypeError,Le.Range=RangeError,ae.reduce(function(_,A){return _[A+"Error"]=Le[A],_},{}));ae=Nt.reduce(function(_,A){return["Syntax","Type","Range"].indexOf(A)===-1&&(_[A+"Error"]=Le[A]),_},{});function _e(){}function Oe(_){return _}function De(_,A){return _==null||_===Oe?A:function(O){return A(_(O))}}function Ge(_,A){return function(){_.apply(this,arguments),A.apply(this,arguments)}}function Ee(_,A){return _===_e?A:function(){var O=_.apply(this,arguments),z=(O!==void 0&&(arguments[0]=O),this.onsuccess),Y=this.onerror,ee=(this.onsuccess=null,this.onerror=null,A.apply(this,arguments));return z&&(this.onsuccess=this.onsuccess?Ge(z,this.onsuccess):z),Y&&(this.onerror=this.onerror?Ge(Y,this.onerror):Y),ee!==void 0?ee:O}}function rt(_,A){return _===_e?A:function(){_.apply(this,arguments);var O=this.onsuccess,z=this.onerror;this.onsuccess=this.onerror=null,A.apply(this,arguments),O&&(this.onsuccess=this.onsuccess?Ge(O,this.onsuccess):O),z&&(this.onerror=this.onerror?Ge(z,this.onerror):z)}}function dt(_,A){return _===_e?A:function(Y){var z=_.apply(this,arguments),Y=(c(Y,z),this.onsuccess),ee=this.onerror,ie=(this.onsuccess=null,this.onerror=null,A.apply(this,arguments));return Y&&(this.onsuccess=this.onsuccess?Ge(Y,this.onsuccess):Y),ee&&(this.onerror=this.onerror?Ge(ee,this.onerror):ee),z===void 0?ie===void 0?void 0:ie:c(z,ie)}}function wt(_,A){return _===_e?A:function(){return A.apply(this,arguments)!==!1&&_.apply(this,arguments)}}function vt(_,A){return _===_e?A:function(){var O=_.apply(this,arguments);if(O&&typeof O.then=="function"){for(var z=this,Y=arguments.length,ee=new Array(Y);Y--;)ee[Y]=arguments[Y];return O.then(function(){return A.apply(z,ee)})}return A.apply(this,arguments)}}ae.ModifyError=pe,ae.DexieError=de,ae.BulkError=Re;var $e=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function na(_){$e=_}var xt={},Bt=100,_a=typeof Promise>"u"?[]:(Nt=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[_a=crypto.subtle.digest("SHA-512",new Uint8Array([0])),d(_a),Nt]:[Nt,d(Nt),Nt]),Nt=_a[0],Za=_a[1],Za=Za&&Za.then,La=Nt&&Nt.constructor,oa=!!_a[2],Sa=function(_,A){Jt.push([_,A]),je&&(queueMicrotask(dn),je=!1)},zt=!0,je=!0,He=[],it=[],Ye=Oe,Ot={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:_e,pgp:!1,env:{},finalize:_e},st=Ot,Jt=[],Ar=0,xs=[];function Lt(_){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var A=this._PSD=st;if(typeof _!="function"){if(_!==xt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Zi(this,this._value)}else this._state=null,this._value=null,++A.ref,(function O(z,Y){try{Y(function(ee){if(z._state===null){if(ee===z)throw new TypeError("A promise cannot be resolved with itself.");var ie=z._lib&&Cn();ee&&typeof ee.then=="function"?O(z,function(oe,fe){ee instanceof Lt?ee._then(oe,fe):ee.then(oe,fe)}):(z._state=!0,z._value=ee,Js(z)),ie&&ti()}},Zi.bind(null,z))}catch(ee){Zi(z,ee)}})(this,_)}var Xa={get:function(){var _=st,A=ut;function O(z,Y){var ee=this,ie=!_.global&&(_!==st||A!==ut),oe=ie&&!Gt(),fe=new Lt(function(ge,me){Nn(ee,new xi(mr(z,_,ie,oe),mr(Y,_,ie,oe),ge,me,_))});return this._consoleTask&&(fe._consoleTask=this._consoleTask),fe}return O.prototype=xt,O},set:function(_){g(this,"then",_&&_.prototype===xt?Xa:{get:function(){return _},set:Xa.set})}};function xi(_,A,O,z,Y){this.onFulfilled=typeof _=="function"?_:null,this.onRejected=typeof A=="function"?A:null,this.resolve=O,this.reject=z,this.psd=Y}function Zi(_,A){var O,z;it.push(A),_._state===null&&(O=_._lib&&Cn(),A=Ye(A),_._state=!1,_._value=A,z=_,He.some(function(Y){return Y._value===z._value})||He.push(z),Js(_),O)&&ti()}function Js(_){var A=_._listeners;_._listeners=[];for(var O=0,z=A.length;O<z;++O)Nn(_,A[O]);var Y=_._PSD;--Y.ref||Y.finalize(),Ar===0&&(++Ar,Sa(function(){--Ar==0&&Si()},[]))}function Nn(_,A){if(_._state===null)_._listeners.push(A);else{var O=_._state?A.onFulfilled:A.onRejected;if(O===null)return(_._state?A.resolve:A.reject)(_._value);++A.psd.ref,++Ar,Sa(Vo,[O,_,A])}}function Vo(_,A,O){try{var z,Y=A._value;!A._state&&it.length&&(it=[]),z=$e&&A._consoleTask?A._consoleTask.run(function(){return _(Y)}):_(Y),A._state||it.indexOf(Y)!==-1||(ee=>{for(var ie=He.length;ie;)if(He[--ie]._value===ee._value)return He.splice(ie,1)})(A),O.resolve(z)}catch(ee){O.reject(ee)}finally{--Ar==0&&Si(),--O.psd.ref||O.psd.finalize()}}function dn(){jr(Ot,function(){Cn()&&ti()})}function Cn(){var _=zt;return je=zt=!1,_}function ti(){var _,A,O;do for(;0<Jt.length;)for(_=Jt,Jt=[],O=_.length,A=0;A<O;++A){var z=_[A];z[0].apply(null,z[1])}while(0<Jt.length);je=zt=!0}function Si(){for(var _=He,A=(He=[],_.forEach(function(z){z._PSD.onunhandled.call(null,z._value,z)}),xs.slice(0)),O=A.length;O;)A[--O]()}function uo(_){return new Lt(xt,!1,_)}function Se(_,A){var O=st;return function(){var z=Cn(),Y=st;try{return Aa(O,!0),_.apply(this,arguments)}catch(ee){A&&A(ee)}finally{Aa(Y,!1),z&&ti()}}}f(Lt.prototype,{then:Xa,_then:function(_,A){Nn(this,new xi(null,null,_,A,st))},catch:function(_){var A,O;return arguments.length===1?this.then(null,_):(A=_,O=arguments[1],typeof A=="function"?this.then(null,function(z){return(z instanceof A?O:uo)(z)}):this.then(null,function(z){return(z&&z.name===A?O:uo)(z)}))},finally:function(_){return this.then(function(A){return Lt.resolve(_()).then(function(){return A})},function(A){return Lt.resolve(_()).then(function(){return uo(A)})})},timeout:function(_,A){var O=this;return _<1/0?new Lt(function(z,Y){var ee=setTimeout(function(){return Y(new Le.Timeout(A))},_);O.then(z,Y).finally(clearTimeout.bind(null,ee))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&g(Lt.prototype,Symbol.toStringTag,"Dexie.Promise"),Ot.env=ir(),f(Lt,{all:function(){var _=re.apply(null,arguments).map(ua);return new Lt(function(A,O){_.length===0&&A([]);var z=_.length;_.forEach(function(Y,ee){return Lt.resolve(Y).then(function(ie){_[ee]=ie,--z||A(_)},O)})})},resolve:function(_){return _ instanceof Lt?_:_&&typeof _.then=="function"?new Lt(function(A,O){_.then(A,O)}):new Lt(xt,!0,_)},reject:uo,race:function(){var _=re.apply(null,arguments).map(ua);return new Lt(function(A,O){_.map(function(z){return Lt.resolve(z).then(A,O)})})},PSD:{get:function(){return st},set:function(_){return st=_}},totalEchoes:{get:function(){return ut}},newPSD:It,usePSD:jr,scheduler:{get:function(){return Sa},set:function(_){Sa=_}},rejectionMapper:{get:function(){return Ye},set:function(_){Ye=_}},follow:function(_,A){return new Lt(function(O,z){return It(function(Y,ee){var ie=st;ie.unhandleds=[],ie.onunhandled=ee,ie.finalize=Ge(function(){var oe,fe=this;oe=function(){fe.unhandleds.length===0?Y():ee(fe.unhandleds[0])},xs.push(function ge(){oe(),xs.splice(xs.indexOf(ge),1)}),++Ar,Sa(function(){--Ar==0&&Si()},[])},ie.finalize),_()},A,O,z)})}}),La&&(La.allSettled&&g(Lt,"allSettled",function(){var _=re.apply(null,arguments).map(ua);return new Lt(function(A){_.length===0&&A([]);var O=_.length,z=new Array(O);_.forEach(function(Y,ee){return Lt.resolve(Y).then(function(ie){return z[ee]={status:"fulfilled",value:ie}},function(ie){return z[ee]={status:"rejected",reason:ie}}).then(function(){return--O||A(z)})})})}),La.any&&typeof AggregateError<"u"&&g(Lt,"any",function(){var _=re.apply(null,arguments).map(ua);return new Lt(function(A,O){_.length===0&&O(new AggregateError([]));var z=_.length,Y=new Array(z);_.forEach(function(ee,ie){return Lt.resolve(ee).then(function(oe){return A(oe)},function(oe){Y[ie]=oe,--z||O(new AggregateError(Y))})})})}),La.withResolvers)&&(Lt.withResolvers=La.withResolvers);var ze={awaits:0,echoes:0,id:0},Ze=0,yt=[],St=0,ut=0,Ft=0;function It(_,ie,O,z){var Y=st,ee=Object.create(Y),ie=(ee.parent=Y,ee.ref=0,ee.global=!1,ee.id=++Ft,Ot.env,ee.env=oa?{Promise:Lt,PromiseProp:{value:Lt,configurable:!0,writable:!0},all:Lt.all,race:Lt.race,allSettled:Lt.allSettled,any:Lt.any,resolve:Lt.resolve,reject:Lt.reject}:{},ie&&c(ee,ie),++Y.ref,ee.finalize=function(){--this.parent.ref||this.parent.finalize()},jr(ee,_,O,z));return ee.ref===0&&ee.finalize(),ie}function Et(){return ze.id||(ze.id=++Ze),++ze.awaits,ze.echoes+=Bt,ze.id}function Gt(){return!!ze.awaits&&(--ze.awaits==0&&(ze.id=0),ze.echoes=ze.awaits*Bt,!0)}function ua(_){return ze.echoes&&_&&_.constructor===La?(Et(),_.then(function(A){return Gt(),A},function(A){return Gt(),Vt(A)})):_}function da(){var _=yt[yt.length-1];yt.pop(),Aa(_,!1)}function Aa(_,A){var O,z,Y=st;(A?!ze.echoes||St++&&_===st:!St||--St&&_===st)||queueMicrotask(A?(function(ee){++ut,ze.echoes&&--ze.echoes!=0||(ze.echoes=ze.awaits=ze.id=0),yt.push(st),Aa(ee,!0)}).bind(null,_):da),_!==st&&(st=_,Y===Ot&&(Ot.env=ir()),oa)&&(O=Ot.env.Promise,z=_.env,Y.global||_.global)&&(Object.defineProperty(i,"Promise",z.PromiseProp),O.all=z.all,O.race=z.race,O.resolve=z.resolve,O.reject=z.reject,z.allSettled&&(O.allSettled=z.allSettled),z.any)&&(O.any=z.any)}function ir(){var _=i.Promise;return oa?{Promise:_,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:_.all,race:_.race,allSettled:_.allSettled,any:_.any,resolve:_.resolve,reject:_.reject}:{}}function jr(_,A,O,z,Y){var ee=st;try{return Aa(_,!0),A(O,z,Y)}finally{Aa(ee,!1)}}function mr(_,A,O,z){return typeof _!="function"?_:function(){var Y=st;O&&Et(),Aa(A,!0);try{return _.apply(this,arguments)}finally{Aa(Y,!1),z&&queueMicrotask(Gt)}}}function Qa(_){Promise===La&&ze.echoes===0?St===0?_():enqueueNativeMicroTask(_):setTimeout(_,0)}(""+Za).indexOf("[native code]")===-1&&(Et=Gt=_e);var Vt=Lt.reject,Hr="",Sr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ir="String expected.",pt=[],ai="__dbnames",lr="readonly",jn="readwrite";function mi(_,A){return _?A?function(){return _.apply(this,arguments)&&A.apply(this,arguments)}:_:A}var ar={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ga(_){return typeof _!="string"||/\./.test(_)?function(A){return A}:function(A){return A[_]===void 0&&_ in A&&delete(A=Z(A))[_],A}}function qt(){throw Le.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function pa(_,A){try{var O=ki(_),z=ki(A);if(O!==z)return O==="Array"?1:z==="Array"?-1:O==="binary"?1:z==="binary"?-1:O==="string"?1:z==="string"?-1:O==="Date"?1:z!=="Date"?NaN:-1;switch(O){case"number":case"Date":case"string":return A<_?1:_<A?-1:0;case"binary":for(var Y=gn(_),ee=gn(A),ie=Y.length,oe=ee.length,fe=ie<oe?ie:oe,ge=0;ge<fe;++ge)if(Y[ge]!==ee[ge])return Y[ge]<ee[ge]?-1:1;return ie===oe?0:ie<oe?-1:1;case"Array":for(var me=_,ve=A,we=me.length,be=ve.length,Ae=we<be?we:be,Ce=0;Ce<Ae;++Ce){var Ue=pa(me[Ce],ve[Ce]);if(Ue!==0)return Ue}return we===be?0:we<be?-1:1}}catch{}return NaN}function ki(_){var A=typeof _;return A=="object"&&(ArrayBuffer.isView(_)||(A=B(_))==="ArrayBuffer")?"binary":A}function gn(_){return _ instanceof Uint8Array?_:ArrayBuffer.isView(_)?new Uint8Array(_.buffer,_.byteOffset,_.byteLength):new Uint8Array(_)}function ma(_,A,O){var z=_.schema.yProps;return z?(A&&0<O.numFailures&&(A=A.filter(function(Y,ee){return!O.failures[ee]})),Promise.all(z.map(function(Y){return Y=Y.updatesTable,A?_.db.table(Y).where("k").anyOf(A).delete():_.db.table(Y).clear()})).then(function(){return O})):O}Fc.prototype.execute=function(_){var A=this["@@propmod"];if(A.add!==void 0){var O=A.add;if(o(O))return n(n([],o(_)?_:[],!0),O).sort();if(typeof O=="number")return(Number(_)||0)+O;if(typeof O=="bigint")try{return BigInt(_)+O}catch{return BigInt(0)+O}throw new TypeError("Invalid term ".concat(O))}if(A.remove!==void 0){var z=A.remove;if(o(z))return o(_)?_.filter(function(Y){return!z.includes(Y)}).sort():[];if(typeof z=="number")return Number(_)-z;if(typeof z=="bigint")try{return BigInt(_)-z}catch{return BigInt(0)-z}throw new TypeError("Invalid subtrahend ".concat(z))}return O=(O=A.replacePrefix)==null?void 0:O[0],O&&typeof _=="string"&&_.startsWith(O)?A.replacePrefix[1]+_.substring(O.length):_};var An=Fc;function Fc(_){this["@@propmod"]=_}function Pr(_,A){for(var O=l(A),z=O.length,Y=!1,ee=0;ee<z;++ee){var ie=O[ee],oe=A[ie],fe=R(_,ie);oe instanceof An?(P(_,ie,oe.execute(fe)),Y=!0):fe!==oe&&(P(_,ie,oe),Y=!0)}return Y}kr.prototype._trans=function(_,A,O){var z=this._tx||st.trans,Y=this.name,ee=$e&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(_==="readonly"?"read":"write"," ").concat(this.name));function ie(ge,me,ve){if(ve.schema[Y])return A(ve.idbtrans,ve);throw new Le.NotFound("Table "+Y+" not part of transaction")}var oe=Cn();try{var fe=z&&z.db._novip===this.db._novip?z===st.trans?z._promise(_,ie,O):It(function(){return z._promise(_,ie,O)},{trans:z,transless:st.transless||st}):(function ge(me,ve,we,be){if(me.idbdb&&(me._state.openComplete||st.letThrough||me._vip)){var Ae=me._createTransaction(ve,we,me._dbSchema);try{Ae.create(),me._state.PR1398_maxLoop=3}catch(Ce){return Ce.name===Te.InvalidState&&me.isOpen()&&0<--me._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),me.close({disableAutoOpen:!1}),me.open().then(function(){return ge(me,ve,we,be)})):Vt(Ce)}return Ae._promise(ve,function(Ce,Ue){return It(function(){return st.trans=Ae,be(Ce,Ue,Ae)})}).then(function(Ce){if(ve==="readwrite")try{Ae.idbtrans.commit()}catch{}return ve==="readonly"?Ce:Ae._completion.then(function(){return Ce})})}if(me._state.openComplete)return Vt(new Le.DatabaseClosed(me._state.dbOpenError));if(!me._state.isBeingOpened){if(!me._state.autoOpen)return Vt(new Le.DatabaseClosed);me.open().catch(_e)}return me._state.dbReadyPromise.then(function(){return ge(me,ve,we,be)})})(this.db,_,[this.name],ie);return ee&&(fe._consoleTask=ee,fe=fe.catch(function(ge){return console.trace(ge),Vt(ge)})),fe}finally{oe&&ti()}},kr.prototype.get=function(_,A){var O=this;return _&&_.constructor===Object?this.where(_).first(A):_==null?Vt(new Le.Type("Invalid argument to Table.get()")):this._trans("readonly",function(z){return O.core.get({trans:z,key:_}).then(function(Y){return O.hook.reading.fire(Y)})}).then(A)},kr.prototype.where=function(_){if(typeof _=="string")return new this.db.WhereClause(this,_);if(o(_))return new this.db.WhereClause(this,"[".concat(_.join("+"),"]"));var A=l(_);if(A.length===1)return this.where(A[0]).equals(_[A[0]]);var O=this.schema.indexes.concat(this.schema.primKey).filter(function(oe){if(oe.compound&&A.every(function(ge){return 0<=oe.keyPath.indexOf(ge)})){for(var fe=0;fe<A.length;++fe)if(A.indexOf(oe.keyPath[fe])===-1)return!1;return!0}return!1}).sort(function(oe,fe){return oe.keyPath.length-fe.keyPath.length})[0];if(O&&this.db._maxKey!==Hr)return ie=O.keyPath.slice(0,A.length),this.where(ie).equals(ie.map(function(oe){return _[oe]}));!O&&$e&&console.warn("The query ".concat(JSON.stringify(_)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(A.join("+"),"]"));var z=this.schema.idxByName;function Y(oe,fe){return pa(oe,fe)===0}var ie=A.reduce(function(me,fe){var ge=me[0],me=me[1],ve=z[fe],we=_[fe];return[ge||ve,ge||!ve?mi(me,ve&&ve.multi?function(be){return be=R(be,fe),o(be)&&be.some(function(Ae){return Y(we,Ae)})}:function(be){return Y(we,R(be,fe))}):me]},[null,null]),ee=ie[0],ie=ie[1];return ee?this.where(ee.name).equals(_[ee.keyPath]).filter(ie):O?this.filter(ie):this.where(A).equals("")},kr.prototype.filter=function(_){return this.toCollection().and(_)},kr.prototype.count=function(_){return this.toCollection().count(_)},kr.prototype.offset=function(_){return this.toCollection().offset(_)},kr.prototype.limit=function(_){return this.toCollection().limit(_)},kr.prototype.each=function(_){return this.toCollection().each(_)},kr.prototype.toArray=function(_){return this.toCollection().toArray(_)},kr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},kr.prototype.orderBy=function(_){return new this.db.Collection(new this.db.WhereClause(this,o(_)?"[".concat(_.join("+"),"]"):_))},kr.prototype.reverse=function(){return this.toCollection().reverse()},kr.prototype.mapToClass=function(_){for(var A=this.db,O=this.name,z=((this.schema.mappedClass=_).prototype instanceof qt&&(_=(ie=>{var oe=me,fe=ie;if(typeof fe!="function"&&fe!==null)throw new TypeError("Class extends value "+String(fe)+" is not a constructor or null");function ge(){this.constructor=oe}function me(){return ie!==null&&ie.apply(this,arguments)||this}return t(oe,fe),oe.prototype=fe===null?Object.create(fe):(ge.prototype=fe.prototype,new ge),Object.defineProperty(me.prototype,"db",{get:function(){return A},enumerable:!1,configurable:!0}),me.prototype.table=function(){return O},me})(_)),new Set),Y=_.prototype;Y;Y=d(Y))Object.getOwnPropertyNames(Y).forEach(function(ie){return z.add(ie)});function ee(ie){if(!ie)return ie;var oe,fe=Object.create(_.prototype);for(oe in ie)if(!z.has(oe))try{fe[oe]=ie[oe]}catch{}return fe}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=ee,this.hook("reading",ee),_},kr.prototype.defineClass=function(){return this.mapToClass(function(_){c(this,_)})},kr.prototype.add=function(_,A){var O=this,z=this.schema.primKey,Y=z.auto,ee=z.keyPath,ie=_;return ee&&Y&&(ie=Ga(ee)(_)),this._trans("readwrite",function(oe){return O.core.mutate({trans:oe,type:"add",keys:A!=null?[A]:null,values:[ie]})}).then(function(oe){return oe.numFailures?Lt.reject(oe.failures[0]):oe.lastResult}).then(function(oe){if(ee)try{P(_,ee,oe)}catch{}return oe})},kr.prototype.upsert=function(_,A){var O=this,z=this.schema.primKey.keyPath;return this._trans("readwrite",function(Y){return O.core.get({trans:Y,key:_}).then(function(ee){var ie=ee??{};return Pr(ie,A),z&&P(ie,z,_),O.core.mutate({trans:Y,type:"put",values:[ie],keys:[_],upsert:!0,updates:{keys:[_],changeSpecs:[A]}}).then(function(oe){return oe.numFailures?Lt.reject(oe.failures[0]):!!ee})})})},kr.prototype.update=function(_,A){return typeof _!="object"||o(_)?this.where(":id").equals(_).modify(A):(_=R(_,this.schema.primKey.keyPath))===void 0?Vt(new Le.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(_).modify(A)},kr.prototype.put=function(_,A){var O=this,z=this.schema.primKey,Y=z.auto,ee=z.keyPath,ie=_;return ee&&Y&&(ie=Ga(ee)(_)),this._trans("readwrite",function(oe){return O.core.mutate({trans:oe,type:"put",values:[ie],keys:A!=null?[A]:null})}).then(function(oe){return oe.numFailures?Lt.reject(oe.failures[0]):oe.lastResult}).then(function(oe){if(ee)try{P(_,ee,oe)}catch{}return oe})},kr.prototype.delete=function(_){var A=this;return this._trans("readwrite",function(O){return A.core.mutate({trans:O,type:"delete",keys:[_]}).then(function(z){return ma(A,[_],z)}).then(function(z){return z.numFailures?Lt.reject(z.failures[0]):void 0})})},kr.prototype.clear=function(){var _=this;return this._trans("readwrite",function(A){return _.core.mutate({trans:A,type:"deleteRange",range:ar}).then(function(O){return ma(_,null,O)})}).then(function(A){return A.numFailures?Lt.reject(A.failures[0]):void 0})},kr.prototype.bulkGet=function(_){var A=this;return this._trans("readonly",function(O){return A.core.getMany({keys:_,trans:O}).then(function(z){return z.map(function(Y){return A.hook.reading.fire(Y)})})})},kr.prototype.bulkAdd=function(_,A,O){var z=this,Y=Array.isArray(A)?A:void 0,ee=(O=O||(Y?void 0:A))?O.allKeys:void 0;return this._trans("readwrite",function(ie){var oe=z.schema.primKey,ge=oe.auto,oe=oe.keyPath;if(oe&&Y)throw new Le.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(Y&&Y.length!==_.length)throw new Le.InvalidArgument("Arguments objects and keys must have the same length");var fe=_.length,ge=oe&&ge?_.map(Ga(oe)):_;return z.core.mutate({trans:ie,type:"add",keys:Y,values:ge,wantResults:ee}).then(function(me){var ve=me.numFailures,we=me.failures;if(ve===0)return ee?me.results:me.lastResult;throw new Re("".concat(z.name,".bulkAdd(): ").concat(ve," of ").concat(fe," operations failed"),we)})})},kr.prototype.bulkPut=function(_,A,O){var z=this,Y=Array.isArray(A)?A:void 0,ee=(O=O||(Y?void 0:A))?O.allKeys:void 0;return this._trans("readwrite",function(ie){var oe=z.schema.primKey,ge=oe.auto,oe=oe.keyPath;if(oe&&Y)throw new Le.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(Y&&Y.length!==_.length)throw new Le.InvalidArgument("Arguments objects and keys must have the same length");var fe=_.length,ge=oe&&ge?_.map(Ga(oe)):_;return z.core.mutate({trans:ie,type:"put",keys:Y,values:ge,wantResults:ee}).then(function(me){var ve=me.numFailures,we=me.failures;if(ve===0)return ee?me.results:me.lastResult;throw new Re("".concat(z.name,".bulkPut(): ").concat(ve," of ").concat(fe," operations failed"),we)})})},kr.prototype.bulkUpdate=function(_){var A=this,O=this.core,z=_.map(function(ie){return ie.key}),Y=_.map(function(ie){return ie.changes}),ee=[];return this._trans("readwrite",function(ie){return O.getMany({trans:ie,keys:z,cache:"clone"}).then(function(oe){var fe=[],ge=[],me=(_.forEach(function(ve,we){var be=ve.key,Ae=ve.changes,Ce=oe[we];if(Ce){for(var Ue=0,Xe=Object.keys(Ae);Ue<Xe.length;Ue++){var Ve=Xe[Ue],tt=Ae[Ve];if(Ve===A.schema.primKey.keyPath){if(pa(tt,be)!==0)throw new Le.Constraint("Cannot update primary key in bulkUpdate()")}else P(Ce,Ve,tt)}ee.push(we),fe.push(be),ge.push(Ce)}}),fe.length);return O.mutate({trans:ie,type:"put",keys:fe,values:ge,updates:{keys:z,changeSpecs:Y}}).then(function(ve){var we=ve.numFailures,be=ve.failures;if(we===0)return me;for(var Ae=0,Ce=Object.keys(be);Ae<Ce.length;Ae++){var Ue,Xe=Ce[Ae],Ve=ee[Number(Xe)];Ve!=null&&(Ue=be[Xe],delete be[Xe],be[Ve]=Ue)}throw new Re("".concat(A.name,".bulkUpdate(): ").concat(we," of ").concat(me," operations failed"),be)})})})},kr.prototype.bulkDelete=function(_){var A=this,O=_.length;return this._trans("readwrite",function(z){return A.core.mutate({trans:z,type:"delete",keys:_}).then(function(Y){return ma(A,_,Y)})}).then(function(z){var Y=z.numFailures,ee=z.failures;if(Y===0)return z.lastResult;throw new Re("".concat(A.name,".bulkDelete(): ").concat(Y," of ").concat(O," operations failed"),ee)})};var Ds=kr;function kr(){}function Is(_){function A(ie,oe){if(oe){for(var fe=arguments.length,ge=new Array(fe-1);--fe;)ge[fe-1]=arguments[fe];return O[ie].subscribe.apply(null,ge),_}if(typeof ie=="string")return O[ie]}var O={};A.addEventType=ee;for(var z=1,Y=arguments.length;z<Y;++z)ee(arguments[z]);return A;function ee(ie,oe,fe){var ge,me;if(typeof ie!="object")return oe=oe||wt,me={subscribers:[],fire:fe=fe||_e,subscribe:function(ve){me.subscribers.indexOf(ve)===-1&&(me.subscribers.push(ve),me.fire=oe(me.fire,ve))},unsubscribe:function(ve){me.subscribers=me.subscribers.filter(function(we){return we!==ve}),me.fire=me.subscribers.reduce(oe,fe)}},O[ie]=A[ie]=me;l(ge=ie).forEach(function(ve){var we=ge[ve];if(o(we))ee(ve,ge[ve][0],ge[ve][1]);else{if(we!=="asap")throw new Le.InvalidArgument("Invalid event config");var be=ee(ve,Oe,function(){for(var Ae=arguments.length,Ce=new Array(Ae);Ae--;)Ce[Ae]=arguments[Ae];be.subscribers.forEach(function(Ue){I(function(){Ue.apply(null,Ce)})})})}})}}function Va(_,A){return b(A).from({prototype:_}),A}function rn(_,A){return!(_.filter||_.algorithm||_.or)&&(A?_.justLimit:!_.replayFilter)}function qe(_,A){_.filter=mi(_.filter,A)}function ye(_,A,O){var z=_.replayFilter;_.replayFilter=z?function(){return mi(z(),A())}:A,_.justLimit=O&&!z}function ia(_,A){if(_.isPrimKey)return A.primaryKey;var O=A.getIndexByKeyPath(_.index);if(O)return O;throw new Le.Schema("KeyPath "+_.index+" on object store "+A.name+" is not indexed")}function vn(_,A,O){var z=ia(_,A.schema);return A.openCursor({trans:O,values:!_.keysOnly,reverse:_.dir==="prev",unique:!!_.unique,query:{index:z,range:_.range}})}function ri(_,A,O,z){var Y,ee,ie=_.replayFilter?mi(_.filter,_.replayFilter()):_.filter;return _.or?(Y={},ee=function(oe,fe,ge){var me,ve;ie&&!ie(fe,ge,function(we){return fe.stop(we)},function(we){return fe.fail(we)})||((ve=""+(me=fe.primaryKey))=="[object ArrayBuffer]"&&(ve=""+new Uint8Array(me)),h(Y,ve))||(Y[ve]=!0,A(oe,fe,ge))},Promise.all([_.or._iterate(ee,O),ho(vn(_,z,O),_.algorithm,ee,!_.keysOnly&&_.valueMapper)])):ho(vn(_,z,O),mi(_.algorithm,ie),A,!_.keysOnly&&_.valueMapper)}function ho(_,A,O,z){var Y=Se(z?function(ee,ie,oe){return O(z(ee),ie,oe)}:O);return _.then(function(ee){if(ee)return ee.start(function(){var ie=function(){return ee.continue()};A&&!A(ee,function(oe){return ie=oe},function(oe){ee.stop(oe),ie=_e},function(oe){ee.fail(oe),ie=_e})||Y(ee.value,ee,function(oe){return ie=oe}),ie()})})}Oa.prototype._read=function(_,A){var O=this._ctx;return O.error?O.table._trans(null,Vt.bind(null,O.error)):O.table._trans("readonly",_).then(A)},Oa.prototype._write=function(_){var A=this._ctx;return A.error?A.table._trans(null,Vt.bind(null,A.error)):A.table._trans("readwrite",_,"locked")},Oa.prototype._addAlgorithm=function(_){var A=this._ctx;A.algorithm=mi(A.algorithm,_)},Oa.prototype._iterate=function(_,A){return ri(this._ctx,_,A,this._ctx.table.core)},Oa.prototype.clone=function(_){var A=Object.create(this.constructor.prototype),O=Object.create(this._ctx);return _&&c(O,_),A._ctx=O,A},Oa.prototype.raw=function(){return this._ctx.valueMapper=null,this},Oa.prototype.each=function(_){var A=this._ctx;return this._read(function(O){return ri(A,_,O,A.table.core)})},Oa.prototype.count=function(_){var A=this;return this._read(function(O){var z,Y=A._ctx,ee=Y.table.core;return rn(Y,!0)?ee.count({trans:O,query:{index:ia(Y,ee.schema),range:Y.range}}).then(function(ie){return Math.min(ie,Y.limit)}):(z=0,ri(Y,function(){return++z,!1},O,ee).then(function(){return z}))}).then(_)},Oa.prototype.sortBy=function(_,A){var O=_.split(".").reverse(),z=O[0],Y=O.length-1;function ee(fe,ge){return ge?ee(fe[O[ge]],ge-1):fe[z]}var ie=this._ctx.dir==="next"?1:-1;function oe(fe,ge){return pa(ee(fe,Y),ee(ge,Y))*ie}return this.toArray(function(fe){return fe.sort(oe)}).then(A)},Oa.prototype.toArray=function(_){var A=this;return this._read(function(O){var z,Y,ee,ie=A._ctx;return ie.dir==="next"&&rn(ie,!0)&&0<ie.limit?(z=ie.valueMapper,Y=ia(ie,ie.table.core.schema),ie.table.core.query({trans:O,limit:ie.limit,values:!0,query:{index:Y,range:ie.range}}).then(function(oe){return oe=oe.result,z?oe.map(z):oe})):(ee=[],ri(ie,function(oe){return ee.push(oe)},O,ie.table.core).then(function(){return ee}))},_)},Oa.prototype.offset=function(_){var A=this._ctx;return _<=0||(A.offset+=_,rn(A)?ye(A,function(){var O=_;return function(z,Y){return O===0||(O===1?--O:Y(function(){z.advance(O),O=0}),!1)}}):ye(A,function(){var O=_;return function(){return--O<0}})),this},Oa.prototype.limit=function(_){return this._ctx.limit=Math.min(this._ctx.limit,_),ye(this._ctx,function(){var A=_;return function(O,z,Y){return--A<=0&&z(Y),0<=A}},!0),this},Oa.prototype.until=function(_,A){return qe(this._ctx,function(O,z,Y){return!_(O.value)||(z(Y),A)}),this},Oa.prototype.first=function(_){return this.limit(1).toArray(function(A){return A[0]}).then(_)},Oa.prototype.last=function(_){return this.reverse().first(_)},Oa.prototype.filter=function(_){var A;return qe(this._ctx,function(O){return _(O.value)}),(A=this._ctx).isMatch=mi(A.isMatch,_),this},Oa.prototype.and=function(_){return this.filter(_)},Oa.prototype.or=function(_){return new this.db.WhereClause(this._ctx.table,_,this)},Oa.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Oa.prototype.desc=function(){return this.reverse()},Oa.prototype.eachKey=function(_){var A=this._ctx;return A.keysOnly=!A.isMatch,this.each(function(O,z){_(z.key,z)})},Oa.prototype.eachUniqueKey=function(_){return this._ctx.unique="unique",this.eachKey(_)},Oa.prototype.eachPrimaryKey=function(_){var A=this._ctx;return A.keysOnly=!A.isMatch,this.each(function(O,z){_(z.primaryKey,z)})},Oa.prototype.keys=function(_){var A=this._ctx,O=(A.keysOnly=!A.isMatch,[]);return this.each(function(z,Y){O.push(Y.key)}).then(function(){return O}).then(_)},Oa.prototype.primaryKeys=function(_){var A=this._ctx;if(A.dir==="next"&&rn(A,!0)&&0<A.limit)return this._read(function(z){var Y=ia(A,A.table.core.schema);return A.table.core.query({trans:z,values:!1,limit:A.limit,query:{index:Y,range:A.range}})}).then(function(z){return z.result}).then(_);A.keysOnly=!A.isMatch;var O=[];return this.each(function(z,Y){O.push(Y.primaryKey)}).then(function(){return O}).then(_)},Oa.prototype.uniqueKeys=function(_){return this._ctx.unique="unique",this.keys(_)},Oa.prototype.firstKey=function(_){return this.limit(1).keys(function(A){return A[0]}).then(_)},Oa.prototype.lastKey=function(_){return this.reverse().firstKey(_)},Oa.prototype.distinct=function(){var _,A=this._ctx,A=A.index&&A.table.schema.idxByName[A.index];return A&&A.multi&&(_={},qe(this._ctx,function(z){var z=z.primaryKey.toString(),Y=h(_,z);return _[z]=!0,!Y})),this},Oa.prototype.modify=function(_){var A=this,O=this._ctx;return this._write(function(z){function Y(Ce,Ue){var Xe=Ue.failures;we+=Ce-Ue.numFailures;for(var Ve=0,tt=l(Xe);Ve<tt.length;Ve++){var mt=tt[Ve];ve.push(Xe[mt])}}var ee=typeof _=="function"?_:function(Ce){return Pr(Ce,_)},ie=O.table.core,me=ie.schema.primaryKey,oe=me.outbound,fe=me.extractKey,ge=200,me=A.db._options.modifyChunkSize,ve=(me&&(ge=typeof me=="object"?me[ie.name]||me["*"]||200:me),[]),we=0,be=[],Ae=_===ga;return A.clone().primaryKeys().then(function(Ce){function Ue(Ve){var tt=Math.min(ge,Ce.length-Ve),mt=Ce.slice(Ve,Ve+tt);return(Ae?Promise.resolve([]):ie.getMany({trans:z,keys:mt,cache:"immutable"})).then(function(Mt){var Dt=[],_t=[],Zt=oe?[]:null,Ut=Ae?mt:[];if(!Ae)for(var Ct=0;Ct<tt;++Ct){var ea=Mt[Ct],Pa={value:Z(ea),primKey:Ce[Ve+Ct]};ee.call(Pa,Pa.value,Pa)!==!1&&(Pa.value==null?Ut.push(Ce[Ve+Ct]):oe||pa(fe(ea),fe(Pa.value))===0?(_t.push(Pa.value),oe&&Zt.push(Ce[Ve+Ct])):(Ut.push(Ce[Ve+Ct]),Dt.push(Pa.value)))}return Promise.resolve(0<Dt.length&&ie.mutate({trans:z,type:"add",values:Dt}).then(function(sr){for(var Na in sr.failures)Ut.splice(parseInt(Na),1);Y(Dt.length,sr)})).then(function(){return(0<_t.length||Xe&&typeof _=="object")&&ie.mutate({trans:z,type:"put",keys:Zt,values:_t,criteria:Xe,changeSpec:typeof _!="function"&&_,isAdditionalChunk:0<Ve}).then(function(sr){return Y(_t.length,sr)})}).then(function(){return(0<Ut.length||Xe&&Ae)&&ie.mutate({trans:z,type:"delete",keys:Ut,criteria:Xe,isAdditionalChunk:0<Ve}).then(function(sr){return ma(O.table,Ut,sr)}).then(function(sr){return Y(Ut.length,sr)})}).then(function(){return Ce.length>Ve+tt&&Ue(Ve+ge)})})}var Xe=rn(O)&&O.limit===1/0&&(typeof _!="function"||Ae)&&{index:O.index,range:O.range};return Ue(0).then(function(){if(0<ve.length)throw new pe("Error modifying one or more objects",ve,we,be);return Ce.length})})})},Oa.prototype.delete=function(){var _=this._ctx,A=_.range;return!rn(_)||_.table.schema.yProps||!_.isPrimKey&&A.type!==3?this.modify(ga):this._write(function(O){var z=_.table.core.schema.primaryKey,Y=A;return _.table.core.count({trans:O,query:{index:z,range:Y}}).then(function(ee){return _.table.core.mutate({trans:O,type:"deleteRange",range:Y}).then(function(fe){var oe=fe.failures,fe=fe.numFailures;if(fe)throw new pe("Could not delete some values",Object.keys(oe).map(function(ge){return oe[ge]}),ee-fe);return ee-fe})})})};var Rh=Oa;function Oa(){}var ga=function(_,A){return A.value=null};function Ur(_,A){return _<A?-1:_===A?0:1}function H0(_,A){return A<_?-1:_===A?0:1}function zi(_,A,O){return _=_ instanceof Xr?new _.Collection(_):_,_._ctx.error=new(O||TypeError)(A),_}function ms(_){return new _.Collection(_,function(){return qd("")}).limit(0)}function gi(be,A,O,z){var Y,ee,ie,oe,fe,ge,me,ve=O.length;if(!O.every(function(Ce){return typeof Ce=="string"}))return zi(be,Ir);function we(Ce){Y=Ce==="next"?function(Xe){return Xe.toUpperCase()}:function(Xe){return Xe.toLowerCase()},ee=Ce==="next"?function(Xe){return Xe.toLowerCase()}:function(Xe){return Xe.toUpperCase()},ie=Ce==="next"?Ur:H0;var Ue=O.map(function(Xe){return{lower:ee(Xe),upper:Y(Xe)}}).sort(function(Xe,Ve){return ie(Xe.lower,Ve.lower)});oe=Ue.map(function(Xe){return Xe.upper}),fe=Ue.map(function(Xe){return Xe.lower}),me=(ge=Ce)==="next"?"":z}we("next");var be=new be.Collection(be,function(){return Ki(oe[0],fe[ve-1]+z)}),Ae=(be._ondirectionchange=function(Ce){we(Ce)},0);return be._addAlgorithm(function(Ce,Ue,Xe){var Ve=Ce.key;if(typeof Ve=="string"){var tt=ee(Ve);if(A(tt,fe,Ae))return!0;for(var mt=null,Mt=Ae;Mt<ve;++Mt){var Dt=((_t,Zt,Ut,Ct,ea,Pa)=>{for(var sr=Math.min(_t.length,Ct.length),Na=-1,Ya=0;Ya<sr;++Ya){var Zr=Zt[Ya];if(Zr!==Ct[Ya])return ea(_t[Ya],Ut[Ya])<0?_t.substr(0,Ya)+Ut[Ya]+Ut.substr(Ya+1):ea(_t[Ya],Ct[Ya])<0?_t.substr(0,Ya)+Ct[Ya]+Ut.substr(Ya+1):0<=Na?_t.substr(0,Na)+Zt[Na]+Ut.substr(Na+1):null;ea(_t[Ya],Zr)<0&&(Na=Ya)}return sr<Ct.length&&Pa==="next"?_t+Ut.substr(_t.length):sr<_t.length&&Pa==="prev"?_t.substr(0,Ut.length):Na<0?null:_t.substr(0,Na)+Ct[Na]+Ut.substr(Na+1)})(Ve,tt,oe[Mt],fe[Mt],ie,ge);Dt===null&&mt===null?Ae=Mt+1:(mt===null||0<ie(mt,Dt))&&(mt=Dt)}Ue(mt!==null?function(){Ce.continue(mt+me)}:Xe)}return!1}),be}function Ki(_,A,O,z){return{type:2,lower:_,upper:A,lowerOpen:O,upperOpen:z}}function qd(_){return{type:1,lower:_,upper:_}}Object.defineProperty(Rr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Rr.prototype.between=function(_,A,O,z){O=O!==!1,z=z===!0;try{return 0<this._cmp(_,A)||this._cmp(_,A)===0&&(O||z)&&(!O||!z)?ms(this):new this.Collection(this,function(){return Ki(_,A,!O,!z)})}catch{return zi(this,Sr)}},Rr.prototype.equals=function(_){return _==null?zi(this,Sr):new this.Collection(this,function(){return qd(_)})},Rr.prototype.above=function(_){return _==null?zi(this,Sr):new this.Collection(this,function(){return Ki(_,void 0,!0)})},Rr.prototype.aboveOrEqual=function(_){return _==null?zi(this,Sr):new this.Collection(this,function(){return Ki(_,void 0,!1)})},Rr.prototype.below=function(_){return _==null?zi(this,Sr):new this.Collection(this,function(){return Ki(void 0,_,!1,!0)})},Rr.prototype.belowOrEqual=function(_){return _==null?zi(this,Sr):new this.Collection(this,function(){return Ki(void 0,_)})},Rr.prototype.startsWith=function(_){return typeof _!="string"?zi(this,Ir):this.between(_,_+Hr,!0,!0)},Rr.prototype.startsWithIgnoreCase=function(_){return _===""?this.startsWith(_):gi(this,function(A,O){return A.indexOf(O[0])===0},[_],Hr)},Rr.prototype.equalsIgnoreCase=function(_){return gi(this,function(A,O){return A===O[0]},[_],"")},Rr.prototype.anyOfIgnoreCase=function(){var _=re.apply(ne,arguments);return _.length===0?ms(this):gi(this,function(A,O){return O.indexOf(A)!==-1},_,"")},Rr.prototype.startsWithAnyOfIgnoreCase=function(){var _=re.apply(ne,arguments);return _.length===0?ms(this):gi(this,function(A,O){return O.some(function(z){return A.indexOf(z)===0})},_,Hr)},Rr.prototype.anyOf=function(){var _,A,O=this,z=re.apply(ne,arguments),Y=this._cmp;try{z.sort(Y)}catch{return zi(this,Sr)}return z.length===0?ms(this):((_=new this.Collection(this,function(){return Ki(z[0],z[z.length-1])}))._ondirectionchange=function(ee){Y=ee==="next"?O._ascending:O._descending,z.sort(Y)},A=0,_._addAlgorithm(function(ee,ie,oe){for(var fe=ee.key;0<Y(fe,z[A]);)if(++A===z.length)return ie(oe),!1;return Y(fe,z[A])===0||(ie(function(){ee.continue(z[A])}),!1)}),_)},Rr.prototype.notEqual=function(_){return this.inAnyRange([[-1/0,_],[_,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Rr.prototype.noneOf=function(){var _=re.apply(ne,arguments);if(_.length===0)return new this.Collection(this);try{_.sort(this._ascending)}catch{return zi(this,Sr)}var A=_.reduce(function(O,z){return O?O.concat([[O[O.length-1][1],z]]):[[-1/0,z]]},null);return A.push([_[_.length-1],this.db._maxKey]),this.inAnyRange(A,{includeLowers:!1,includeUppers:!1})},Rr.prototype.inAnyRange=function(_,Xe){var O=this,z=this._cmp,Y=this._ascending,ee=this._descending,ie=this._min,oe=this._max;if(_.length===0)return ms(this);if(!_.every(function(Ve){return Ve[0]!==void 0&&Ve[1]!==void 0&&Y(Ve[0],Ve[1])<=0}))return zi(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Le.InvalidArgument);var fe=!Xe||Xe.includeLowers!==!1,ge=Xe&&Xe.includeUppers===!0,me,ve=Y;function we(Ve,tt){return ve(Ve[0],tt[0])}try{(me=_.reduce(function(Ve,tt){for(var mt=0,Mt=Ve.length;mt<Mt;++mt){var Dt=Ve[mt];if(z(tt[0],Dt[1])<0&&0<z(tt[1],Dt[0])){Dt[0]=ie(Dt[0],tt[0]),Dt[1]=oe(Dt[1],tt[1]);break}}return mt===Mt&&Ve.push(tt),Ve},[])).sort(we)}catch{return zi(this,Sr)}var be=0,Ae=ge?function(Ve){return 0<Y(Ve,me[be][1])}:function(Ve){return 0<=Y(Ve,me[be][1])},Ce=fe?function(Ve){return 0<ee(Ve,me[be][0])}:function(Ve){return 0<=ee(Ve,me[be][0])},Ue=Ae,Xe=new this.Collection(this,function(){return Ki(me[0][0],me[me.length-1][1],!fe,!ge)});return Xe._ondirectionchange=function(Ve){ve=Ve==="next"?(Ue=Ae,Y):(Ue=Ce,ee),me.sort(we)},Xe._addAlgorithm(function(Ve,tt,mt){for(var Mt,Dt=Ve.key;Ue(Dt);)if(++be===me.length)return tt(mt),!1;return!Ae(Mt=Dt)&&!Ce(Mt)||(O._cmp(Dt,me[be][1])===0||O._cmp(Dt,me[be][0])===0||tt(function(){ve===Y?Ve.continue(me[be][0]):Ve.continue(me[be][1])}),!1)}),Xe},Rr.prototype.startsWithAnyOf=function(){var _=re.apply(ne,arguments);return _.every(function(A){return typeof A=="string"})?_.length===0?ms(this):this.inAnyRange(_.map(function(A){return[A,A+Hr]})):zi(this,"startsWithAnyOf() only works with strings")};var Xr=Rr;function Rr(){}function Tn(_){return Se(function(A){return va(A),_(A.target.error),!1})}function va(_){_.stopPropagation&&_.stopPropagation(),_.preventDefault&&_.preventDefault()}var Ho="storagemutated",Da="x-storagemutated-1",gr=Is(null,Ho),Lh=(ni.prototype._lock=function(){return E(!st.global),++this._reculock,this._reculock!==1||st.global||(st.lockOwnerFor=this),this},ni.prototype._unlock=function(){if(E(!st.global),--this._reculock==0)for(st.global||(st.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var _=this._blockedFuncs.shift();try{jr(_[1],_[0])}catch{}}return this},ni.prototype._locked=function(){return this._reculock&&st.lockOwnerFor!==this},ni.prototype.create=function(_){var A=this;if(this.mode){var O=this.db.idbdb,z=this.db._state.dbOpenError;if(E(!this.idbtrans),!_&&!O)switch(z&&z.name){case"DatabaseClosedError":throw new Le.DatabaseClosed(z);case"MissingAPIError":throw new Le.MissingAPI(z.message,z);default:throw new Le.OpenFailed(z)}if(!this.active)throw new Le.TransactionInactive;E(this._completion._state===null),(_=this.idbtrans=_||(this.db.core||O).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Se(function(Y){va(Y),A._reject(_.error)}),_.onabort=Se(function(Y){va(Y),A.active&&A._reject(new Le.Abort(_.error)),A.active=!1,A.on("abort").fire(Y)}),_.oncomplete=Se(function(){A.active=!1,A._resolve(),"mutatedParts"in _&&gr.storagemutated.fire(_.mutatedParts)})}return this},ni.prototype._promise=function(_,A,O){var z,Y=this;return _==="readwrite"&&this.mode!=="readwrite"?Vt(new Le.ReadOnly("Transaction is readonly")):this.active?this._locked()?new Lt(function(ee,ie){Y._blockedFuncs.push([function(){Y._promise(_,A,O).then(ee,ie)},st])}):O?It(function(){var ee=new Lt(function(ie,oe){Y._lock();var fe=A(ie,oe,Y);fe&&fe.then&&fe.then(ie,oe)});return ee.finally(function(){return Y._unlock()}),ee._lib=!0,ee}):((z=new Lt(function(ee,ie){var oe=A(ee,ie,Y);oe&&oe.then&&oe.then(ee,ie)}))._lib=!0,z):Vt(new Le.TransactionInactive)},ni.prototype._root=function(){return this.parent?this.parent._root():this},ni.prototype.waitFor=function(_){var A,O=this._root(),z=Lt.resolve(_),Y=(O._waitingFor?O._waitingFor=O._waitingFor.then(function(){return z}):(O._waitingFor=z,O._waitingQueue=[],A=O.idbtrans.objectStore(O.storeNames[0]),(function ee(){for(++O._spinCount;O._waitingQueue.length;)O._waitingQueue.shift()();O._waitingFor&&(A.get(-1/0).onsuccess=ee)})()),O._waitingFor);return new Lt(function(ee,ie){z.then(function(oe){return O._waitingQueue.push(Se(ee.bind(null,oe)))},function(oe){return O._waitingQueue.push(Se(ie.bind(null,oe)))}).finally(function(){O._waitingFor===Y&&(O._waitingFor=null)})})},ni.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Le.Abort))},ni.prototype.table=function(_){var A=this._memoizedTables||(this._memoizedTables={});if(h(A,_))return A[_];var O=this.schema[_];if(O)return(O=new this.db.Table(_,O,this)).core=this.db.core.table(_),A[_]=O;throw new Le.NotFound("Table "+_+" not part of transaction")},ni);function ni(){}function gs(_,A,O,z,Y,ee,ie,oe){return{name:_,keyPath:A,unique:O,multi:z,auto:Y,compound:ee,src:(O&&!ie?"&":"")+(z?"*":"")+(Y?"++":"")+Rs(A),type:oe}}function Rs(_){return typeof _=="string"?_:_?"["+[].join.call(_,"+")+"]":""}function Uo(_,A,O){return{name:_,primKey:A,indexes:O,mappedClass:null,idxByName:(z=function(Y){return[Y.name,Y]},O.reduce(function(Y,ee,ie){return ee=z(ee,ie),ee&&(Y[ee[0]]=ee[1]),Y},{}))};var z}var Ls=function(_){try{return _.only([[]]),Ls=function(){return[[]]},[[]]}catch{return Ls=function(){return Hr},Hr}};function Os(_){return _==null?function(){}:typeof _=="string"?(A=_).split(".").length===1?function(O){return O[A]}:function(O){return R(O,A)}:function(O){return R(O,_)};var A}function el(_){return[].slice.call(_)}var Oh=0;function un(_){return _==null?":id":typeof _=="string"?_:"[".concat(_.join("+"),"]")}function vs(_,A,fe){function z(Ae){if(Ae.type===3)return null;if(Ae.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var ve=Ae.lower,we=Ae.upper,be=Ae.lowerOpen,Ae=Ae.upperOpen;return ve===void 0?we===void 0?null:A.upperBound(we,!!Ae):we===void 0?A.lowerBound(ve,!!be):A.bound(ve,we,!!be,!!Ae)}function Y(me){var ve,we=me.name;return{name:we,schema:me,mutate:function(be){var Ae=be.trans,Ce=be.type,Ue=be.keys,Xe=be.values,Ve=be.range;return new Promise(function(tt,mt){tt=Se(tt);var Mt=Ae.objectStore(we),Dt=Mt.keyPath==null,_t=Ce==="put"||Ce==="add";if(!_t&&Ce!=="delete"&&Ce!=="deleteRange")throw new Error("Invalid operation type: "+Ce);var Zt,Ut=(Ue||Xe||{length:1}).length;if(Ue&&Xe&&Ue.length!==Xe.length)throw new Error("Given keys array must have same length as given values array.");if(Ut===0)return tt({numFailures:0,failures:{},results:[],lastResult:void 0});function Ct(zr){++sr,va(zr)}var ea=[],Pa=[],sr=0;if(Ce==="deleteRange"){if(Ve.type===4)return tt({numFailures:sr,failures:Pa,results:[],lastResult:void 0});Ve.type===3?ea.push(Zt=Mt.clear()):ea.push(Zt=Mt.delete(z(Ve)))}else{var Dt=_t?Dt?[Xe,Ue]:[Xe,null]:[Ue,null],Na=Dt[0],Ya=Dt[1];if(_t)for(var Zr=0;Zr<Ut;++Zr)ea.push(Zt=Ya&&Ya[Zr]!==void 0?Mt[Ce](Na[Zr],Ya[Zr]):Mt[Ce](Na[Zr])),Zt.onerror=Ct;else for(Zr=0;Zr<Ut;++Zr)ea.push(Zt=Mt[Ce](Na[Zr])),Zt.onerror=Ct}function es(zr){zr=zr.target.result,ea.forEach(function(qo,nu){return qo.error!=null&&(Pa[nu]=qo.error)}),tt({numFailures:sr,failures:Pa,results:Ce==="delete"?Ue:ea.map(function(qo){return qo.result}),lastResult:zr})}Zt.onerror=function(zr){Ct(zr),es(zr)},Zt.onsuccess=es})},getMany:function(be){var Ae=be.trans,Ce=be.keys;return new Promise(function(Ue,Xe){Ue=Se(Ue);for(var Ve,tt=Ae.objectStore(we),mt=Ce.length,Mt=new Array(mt),Dt=0,_t=0,Zt=function(ea){ea=ea.target,Mt[ea._pos]=ea.result,++_t===Dt&&Ue(Mt)},Ut=Tn(Xe),Ct=0;Ct<mt;++Ct)Ce[Ct]!=null&&((Ve=tt.get(Ce[Ct]))._pos=Ct,Ve.onsuccess=Zt,Ve.onerror=Ut,++Dt);Dt===0&&Ue(Mt)})},get:function(be){var Ae=be.trans,Ce=be.key;return new Promise(function(Ue,Xe){Ue=Se(Ue);var Ve=Ae.objectStore(we).get(Ce);Ve.onsuccess=function(tt){return Ue(tt.target.result)},Ve.onerror=Tn(Xe)})},query:(ve=oe,function(be){return new Promise(function(Ae,Ce){Ae=Se(Ae);var Ue,Xe,Ve,_t=be.trans,tt=be.values,mt=be.limit,Dt=be.query,Mt=mt===1/0?void 0:mt,Zt=Dt.index,Dt=Dt.range,_t=_t.objectStore(we),_t=Zt.isPrimaryKey?_t:_t.index(Zt.name),Zt=z(Dt);if(mt===0)return Ae({result:[]});ve?((Dt=tt?_t.getAll(Zt,Mt):_t.getAllKeys(Zt,Mt)).onsuccess=function(Ut){return Ae({result:Ut.target.result})},Dt.onerror=Tn(Ce)):(Ue=0,Xe=!tt&&"openKeyCursor"in _t?_t.openKeyCursor(Zt):_t.openCursor(Zt),Ve=[],Xe.onsuccess=function(Ut){var Ct=Xe.result;return!Ct||(Ve.push(tt?Ct.value:Ct.primaryKey),++Ue===mt)?Ae({result:Ve}):void Ct.continue()},Xe.onerror=Tn(Ce))})}),openCursor:function(be){var Ae=be.trans,Ce=be.values,Ue=be.query,Xe=be.reverse,Ve=be.unique;return new Promise(function(tt,mt){tt=Se(tt);var _t=Ue.index,Mt=Ue.range,Dt=Ae.objectStore(we),Dt=_t.isPrimaryKey?Dt:Dt.index(_t.name),_t=Xe?Ve?"prevunique":"prev":Ve?"nextunique":"next",Zt=!Ce&&"openKeyCursor"in Dt?Dt.openKeyCursor(z(Mt),_t):Dt.openCursor(z(Mt),_t);Zt.onerror=Tn(mt),Zt.onsuccess=Se(function(Ut){var Ct,ea,Pa,sr,Na=Zt.result;Na?(Na.___id=++Oh,Na.done=!1,Ct=Na.continue.bind(Na),ea=(ea=Na.continuePrimaryKey)&&ea.bind(Na),Pa=Na.advance.bind(Na),sr=function(){throw new Error("Cursor not stopped")},Na.trans=Ae,Na.stop=Na.continue=Na.continuePrimaryKey=Na.advance=function(){throw new Error("Cursor not started")},Na.fail=Se(mt),Na.next=function(){var Ya=this,Zr=1;return this.start(function(){return Zr--?Ya.continue():Ya.stop()}).then(function(){return Ya})},Na.start=function(Ya){function Zr(){if(Zt.result)try{Ya()}catch(zr){Na.fail(zr)}else Na.done=!0,Na.start=function(){throw new Error("Cursor behind last entry")},Na.stop()}var es=new Promise(function(zr,qo){zr=Se(zr),Zt.onerror=Tn(qo),Na.fail=qo,Na.stop=function(nu){Na.stop=Na.continue=Na.continuePrimaryKey=Na.advance=sr,zr(nu)}});return Zt.onsuccess=Se(function(zr){Zt.onsuccess=Zr,Zr()}),Na.continue=Ct,Na.continuePrimaryKey=ea,Na.advance=Pa,Zr(),es},tt(Na)):tt(null)},mt)})},count:function(be){var Ae=be.query,Ce=be.trans,Ue=Ae.index,Xe=Ae.range;return new Promise(function(Ve,tt){var mt=Ce.objectStore(we),mt=Ue.isPrimaryKey?mt:mt.index(Ue.name),Mt=z(Xe),Mt=Mt?mt.count(Mt):mt.count();Mt.onsuccess=Se(function(Dt){return Ve(Dt.target.result)}),Mt.onerror=Tn(tt)})}}}ee=fe,ie=el((fe=_).objectStoreNames);var ee,fe={schema:{name:fe.name,tables:ie.map(function(me){return ee.objectStore(me)}).map(function(me){var ve=me.keyPath,we=me.autoIncrement,Ae=o(ve),be={},Ae={name:me.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:ve==null,compound:Ae,keyPath:ve,autoIncrement:we,unique:!0,extractKey:Os(ve)},indexes:el(me.indexNames).map(function(Ce){return me.index(Ce)}).map(function(Ve){var tt=Ve.name,Ue=Ve.unique,Xe=Ve.multiEntry,Ve=Ve.keyPath,tt={name:tt,compound:o(Ve),keyPath:Ve,unique:Ue,multiEntry:Xe,extractKey:Os(Ve)};return be[un(Ve)]=tt}),getIndexByKeyPath:function(Ce){return be[un(Ce)]}};return be[":id"]=Ae.primaryKey,ve!=null&&(be[un(ve)]=Ae.primaryKey),Ae})},hasGetAll:0<ie.length&&"getAll"in ee.objectStore(ie[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},ie=fe.schema,oe=fe.hasGetAll,fe=ie.tables.map(Y),ge={};return fe.forEach(function(me){return ge[me.name]=me}),{stack:"dbcore",transaction:_.transaction.bind(_),table:function(me){if(ge[me])return ge[me];throw new Error("Table '".concat(me,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Ls(A),schema:ie}}function Vn(_,A,O,z){return O=O.IDBKeyRange,A=vs(A,O,z),{dbcore:_.dbcore.reduce(function(Y,ee){return ee=ee.create,r(r({},Y),ee(Y))},A)}}function tl(_,A){var O=A.db,O=Vn(_._middlewares,O,_._deps,A);_.core=O.dbcore,_.tables.forEach(function(z){var Y=z.name;_.core.schema.tables.some(function(ee){return ee.name===Y})&&(z.core=_.core.table(Y),_[Y]instanceof _.Table)&&(_[Y].core=z.core)})}function Vc(_,A,O,z){O.forEach(function(Y){var ee=z[Y];A.forEach(function(ie){var oe=(function fe(ge,me){return w(ge,me)||(ge=d(ge))&&fe(ge,me)})(ie,Y);(!oe||"value"in oe&&oe.value===void 0)&&(ie===_.Transaction.prototype||ie instanceof _.Transaction?g(ie,Y,{get:function(){return this.table(Y)},set:function(fe){p(this,Y,{value:fe,writable:!0,configurable:!0,enumerable:!0})}}):ie[Y]=new _.Table(Y,ee))})})}function Go(_,A){A.forEach(function(O){for(var z in O)O[z]instanceof _.Table&&delete O[z]})}function Ph(_,A){return _._cfg.version-A._cfg.version}function Hc(_,A,O,z){var Y=_._dbSchema,ee=(O.objectStoreNames.contains("$meta")&&!Y.$meta&&(Y.$meta=Uo("$meta",Wa("")[0],[]),_._storeNames.push("$meta")),_._createTransaction("readwrite",_._storeNames,Y)),ie=(ee.create(O),ee._completion.catch(z),ee._reject.bind(ee)),oe=st.transless||st;It(function(){if(st.trans=ee,st.transless=oe,A!==0)return tl(_,O),ge=A,((fe=ee).storeNames.includes("$meta")?fe.table("$meta").get("version").then(function(me){return me??ge}):Lt.resolve(ge)).then(function(Ue){var ve=_,we=Ue,be=ee,Ae=O,Ce=[],Ue=ve._versions,Xe=ve._dbSchema=Wo(0,ve.idbdb,Ae);return(Ue=Ue.filter(function(Ve){return Ve._cfg.version>=we})).length===0?Lt.resolve():(Ue.forEach(function(Ve){Ce.push(function(){var tt,mt,Mt,Dt=Xe,_t=Ve._cfg.dbschema,Zt=(nt(ve,Dt,Ae),nt(ve,_t,Ae),Xe=ve._dbSchema=_t,wr(Dt,_t)),Ut=(Zt.add.forEach(function(Ct){Zd(Ae,Ct[0],Ct[1].primKey,Ct[1].indexes)}),Zt.change.forEach(function(Ct){if(Ct.recreate)throw new Le.Upgrade("Not yet support for changing primary key");var ea=Ae.objectStore(Ct.name);Ct.add.forEach(function(Pa){return bs(ea,Pa)}),Ct.change.forEach(function(Pa){ea.deleteIndex(Pa.name),bs(ea,Pa)}),Ct.del.forEach(function(Pa){return ea.deleteIndex(Pa)})}),Ve._cfg.contentUpgrade);if(Ut&&Ve._cfg.version>we)return tl(ve,Ae),be._memoizedTables={},tt=H(_t),Zt.del.forEach(function(Ct){tt[Ct]=Dt[Ct]}),Go(ve,[ve.Transaction.prototype]),Vc(ve,[ve.Transaction.prototype],l(tt),tt),be.schema=tt,(mt=K(Ut))&&Et(),_t=Lt.follow(function(){var Ct;(Mt=Ut(be))&&mt&&(Ct=Gt.bind(null,null),Mt.then(Ct,Ct))}),Mt&&typeof Mt.then=="function"?Lt.resolve(Mt):_t.then(function(){return Mt})}),Ce.push(function(tt){var mt,Mt,Dt=Ve._cfg.dbschema;mt=Dt,Mt=tt,[].slice.call(Mt.db.objectStoreNames).forEach(function(_t){return mt[_t]==null&&Mt.db.deleteObjectStore(_t)}),Go(ve,[ve.Transaction.prototype]),Vc(ve,[ve.Transaction.prototype],ve._storeNames,ve._dbSchema),be.schema=ve._dbSchema}),Ce.push(function(tt){ve.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(ve.idbdb.version/10)===Ve._cfg.version?(ve.idbdb.deleteObjectStore("$meta"),delete ve._dbSchema.$meta,ve._storeNames=ve._storeNames.filter(function(mt){return mt!=="$meta"})):tt.objectStore("$meta").put(Ve._cfg.version,"version"))})}),(function Ve(){return Ce.length?Lt.resolve(Ce.shift()(be.idbtrans)).then(Ve):Lt.resolve()})().then(function(){Uc(Xe,Ae)}))}).catch(ie);var fe,ge;l(Y).forEach(function(me){Zd(O,me,Y[me].primKey,Y[me].indexes)}),tl(_,O),Lt.follow(function(){return _.on.populate.fire(ee)}).catch(ie)})}function Xd(_,A){Uc(_._dbSchema,A),A.db.version%10!=0||A.objectStoreNames.contains("$meta")||A.db.createObjectStore("$meta").add(Math.ceil(A.db.version/10-1),"version");var O=Wo(0,_.idbdb,A);nt(_,_._dbSchema,A);for(var z=0,Y=wr(O,_._dbSchema).change;z<Y.length;z++){var ee=(ie=>{if(ie.change.length||ie.recreate)return console.warn("Unable to patch indexes of table ".concat(ie.name," because it has changes on the type of index or primary key.")),{value:void 0};var oe=A.objectStore(ie.name);ie.add.forEach(function(fe){$e&&console.debug("Dexie upgrade patch: Creating missing index ".concat(ie.name,".").concat(fe.src)),bs(oe,fe)})})(Y[z]);if(typeof ee=="object")return ee.value}}function wr(_,A){var O,z={del:[],add:[],change:[]};for(O in _)A[O]||z.del.push(O);for(O in A){var Y=_[O],ee=A[O];if(Y){var ie={name:O,def:ee,recreate:!1,del:[],add:[],change:[]};if(""+(Y.primKey.keyPath||"")!=""+(ee.primKey.keyPath||"")||Y.primKey.auto!==ee.primKey.auto)ie.recreate=!0,z.change.push(ie);else{var oe=Y.idxByName,fe=ee.idxByName,ge=void 0;for(ge in oe)fe[ge]||ie.del.push(ge);for(ge in fe){var me=oe[ge],ve=fe[ge];me?me.src!==ve.src&&ie.change.push(ve):ie.add.push(ve)}(0<ie.del.length||0<ie.add.length||0<ie.change.length)&&z.change.push(ie)}}else z.add.push([O,ee])}return z}function Zd(_,A,O,z){var Y=_.db.createObjectStore(A,O.keyPath?{keyPath:O.keyPath,autoIncrement:O.auto}:{autoIncrement:O.auto});z.forEach(function(ee){return bs(Y,ee)})}function Uc(_,A){l(_).forEach(function(O){A.db.objectStoreNames.contains(O)||($e&&console.debug("Dexie: Creating missing table",O),Zd(A,O,_[O].primKey,_[O].indexes))})}function bs(_,A){_.createIndex(A.name,A.keyPath,{unique:A.unique,multiEntry:A.multi})}function Wo(_,A,O){var z={};return k(A.objectStoreNames,0).forEach(function(Y){for(var ee=O.objectStore(Y),ie=gs(Rs(ge=ee.keyPath),ge||"",!0,!1,!!ee.autoIncrement,ge&&typeof ge!="string",!0),oe=[],fe=0;fe<ee.indexNames.length;++fe){var me=ee.index(ee.indexNames[fe]),ge=me.keyPath,me=gs(me.name,ge,!!me.unique,!!me.multiEntry,!1,ge&&typeof ge!="string",!1);oe.push(me)}z[Y]=Uo(Y,ie,oe)}),z}function nt(_,A,O){for(var z=O.db.objectStoreNames,Y=0;Y<z.length;++Y){var ee=z[Y],ie=O.objectStore(ee);_._hasGetAll="getAll"in ie;for(var oe=0;oe<ie.indexNames.length;++oe){var fe,ge=ie.indexNames[oe],me=ie.index(ge).keyPath,me=typeof me=="string"?me:"["+k(me).join("+")+"]";A[ee]&&(fe=A[ee].idxByName[me])&&(fe.name=ge,delete A[ee].idxByName[me],A[ee].idxByName[ge]=fe)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(_._hasGetAll=!1)}function Wa(_){return _.split(",").map(function(A,O){var Y=A.split(":"),z=(z=Y[1])==null?void 0:z.trim(),Y=(A=Y[0].trim()).replace(/([&*]|\+\+)/g,""),ee=/^\[/.test(Y)?Y.match(/^\[(.*)\]$/)[1].split("+"):Y;return gs(Y,ee||null,/\&/.test(A),/\*/.test(A),/\+\+/.test(A),o(ee),O===0,z)})}al.prototype._createTableSchema=Uo,al.prototype._parseIndexSyntax=Wa,al.prototype._parseStoresSpec=function(_,A){var O=this;l(_).forEach(function(z){if(_[z]!==null){var Y=O._parseIndexSyntax(_[z]),ee=Y.shift();if(!ee)throw new Le.Schema("Invalid schema for table "+z+": "+_[z]);if(ee.unique=!0,ee.multi)throw new Le.Schema("Primary key cannot be multiEntry*");Y.forEach(function(ie){if(ie.auto)throw new Le.Schema("Only primary key can be marked as autoIncrement (++)");if(!ie.keyPath)throw new Le.Schema("Index must have a name and cannot be an empty string")}),ee=O._createTableSchema(z,ee,Y),A[z]=ee}})},al.prototype.stores=function(O){var A=this.db,O=(this._cfg.storesSource=this._cfg.storesSource?c(this._cfg.storesSource,O):O,A._versions),z={},Y={};return O.forEach(function(ee){c(z,ee._cfg.storesSource),Y=ee._cfg.dbschema={},ee._parseStoresSpec(z,Y)}),A._dbSchema=Y,Go(A,[A._allTables,A,A.Transaction.prototype]),Vc(A,[A._allTables,A,A.Transaction.prototype,this._cfg.tables],l(Y),Y),A._storeNames=l(Y),this},al.prototype.upgrade=function(_){return this._cfg.contentUpgrade=vt(this._cfg.contentUpgrade||_e,_),this};var Hn=al;function al(){}function Kd(_,A){var O=_._dbNamesDB;return O||(O=_._dbNamesDB=new Ps(ai,{addons:[],indexedDB:_,IDBKeyRange:A})).version(1).stores({dbnames:"name"}),O.table("dbnames")}function Qd(_){return _&&typeof _.databases=="function"}function zh(_){return It(function(){return st.letThrough=!0,_()})}function Bh(_){return!("from"in _)}var Mn=function(_,A){var O;if(!this)return O=new Mn,_&&"d"in _&&c(O,_),O;c(this,arguments.length?{d:1,from:_,to:1<arguments.length?A:_}:{d:0})};function nn(_,A,O){var z=pa(A,O);if(!isNaN(z)){if(0<z)throw RangeError();if(Bh(_))return c(_,{from:A,to:O,d:1});var z=_.l,Y=_.r;if(pa(O,_.from)<0)return z?nn(z,A,O):_.l={from:A,to:O,d:1,l:null,r:null},El(_);if(0<pa(A,_.to))return Y?nn(Y,A,O):_.r={from:A,to:O,d:1,l:null,r:null},El(_);pa(A,_.from)<0&&(_.from=A,_.l=null,_.d=Y?Y.d+1:1),0<pa(O,_.to)&&(_.to=O,_.r=null,_.d=_.l?_.l.d+1:1),A=!_.r,z&&!_.l&&rl(_,z),Y&&A&&rl(_,Y)}}function rl(_,A){Bh(A)||(function O(z,Y){var ee=Y.from,ie=Y.l,oe=Y.r;nn(z,ee,Y.to),ie&&O(z,ie),oe&&O(z,oe)})(_,A)}function sn(_,A){var O=fo(A),z=O.next();if(!z.done)for(var Y=z.value,ee=fo(_),ie=ee.next(Y.from),oe=ie.value;!z.done&&!ie.done;){if(pa(oe.from,Y.to)<=0&&0<=pa(oe.to,Y.from))return!0;pa(Y.from,oe.from)<0?Y=(z=O.next(oe.from)).value:oe=(ie=ee.next(Y.from)).value}return!1}function fo(_){var A=Bh(_)?null:{s:0,n:_};return{next:function(O){for(var z=0<arguments.length;A;)switch(A.s){case 0:if(A.s=1,z)for(;A.n.l&&pa(O,A.n.from)<0;)A={up:A,n:A.n.l,s:1};else for(;A.n.l;)A={up:A,n:A.n.l,s:1};case 1:if(A.s=2,!z||pa(O,A.n.to)<=0)return{value:A.n,done:!1};case 2:if(A.n.r){A.s=3,A={up:A,n:A.n.r,s:0};continue}case 3:A=A.up}return{done:!0}}}}function El(_){var A,O,z,Y=(((Y=_.r)==null?void 0:Y.d)||0)-(((Y=_.l)==null?void 0:Y.d)||0),Y=1<Y?"r":Y<-1?"l":"";Y&&(A=Y=="r"?"l":"r",O=r({},_),z=_[Y],_.from=z.from,_.to=z.to,_[Y]=z[Y],O[Y]=z[A],(_[A]=O).d=Cr(O)),_.d=Cr(_)}function Cr(O){var A=O.r,O=O.l;return(A?O?Math.max(A.d,O.d):A.d:O?O.d:0)+1}function ba(_,A){return l(A).forEach(function(O){_[O]?rl(_[O],A[O]):_[O]=(function z(Y){var ee,ie,oe={};for(ee in Y)h(Y,ee)&&(ie=Y[ee],oe[ee]=!ie||typeof ie!="object"||U.has(ie.constructor)?ie:z(ie));return oe})(A[O])}),_}function Fh(_,A){return _.all||A.all||Object.keys(_).some(function(O){return A[O]&&sn(A[O],_[O])})}f(Mn.prototype,((Nt={add:function(_){return rl(this,_),this},addKey:function(_){return nn(this,_,_),this},addKeys:function(_){var A=this;return _.forEach(function(O){return nn(A,O,O)}),this},hasKey:function(_){var A=fo(this).next(_).value;return A&&pa(A.from,_)<=0&&0<=pa(A.to,_)}})[W]=function(){return fo(this)},Nt));var _r={},nl={},Dl=!1;function Jd(_){ba(nl,_),Dl||(Dl=!0,setTimeout(function(){Dl=!1,Qi(nl,!(nl={}))},0))}function Qi(_,A){A===void 0&&(A=!1);var O=new Set;if(_.all)for(var z=0,Y=Object.values(_r);z<Y.length;z++)eu(oe=Y[z],_,O,A);else for(var ee in _){var ie,oe,ee=/^idb\:\/\/(.*)\/(.*)\//.exec(ee);ee&&(ie=ee[1],ee=ee[2],oe=_r["idb://".concat(ie,"/").concat(ee)])&&eu(oe,_,O,A)}O.forEach(function(fe){return fe()})}function eu(_,A,O,z){for(var Y=[],ee=0,ie=Object.entries(_.queries.query);ee<ie.length;ee++){for(var oe=ie[ee],fe=oe[0],ge=[],me=0,ve=oe[1];me<ve.length;me++){var we=ve[me];Fh(A,we.obsSet)?we.subscribers.forEach(function(Ue){return O.add(Ue)}):z&&ge.push(we)}z&&Y.push([fe,ge])}if(z)for(var be=0,Ae=Y;be<Ae.length;be++){var Ce=Ae[be],fe=Ce[0],ge=Ce[1];_.queries.query[fe]=ge}}function U0(_){var A=_._state,O=_._deps.indexedDB;if(A.isBeingOpened||_.idbdb)return A.dbReadyPromise.then(function(){return A.dbOpenError?Vt(A.dbOpenError):_});A.isBeingOpened=!0,A.dbOpenError=null,A.openComplete=!1;var z=A.openCanceller,Y=Math.round(10*_.verno),ee=!1;function ie(){if(A.openCanceller!==z)throw new Le.DatabaseClosed("db.open() was cancelled")}function oe(){return new Lt(function(we,be){if(ie(),!O)throw new Le.MissingAPI;var Ae=_.name,Ce=A.autoSchema||!Y?O.open(Ae):O.open(Ae,Y);if(!Ce)throw new Le.MissingAPI;Ce.onerror=Tn(be),Ce.onblocked=Se(_._fireOnBlocked),Ce.onupgradeneeded=Se(function(Ue){var Xe;me=Ce.transaction,A.autoSchema&&!_._options.allowEmptyDB?(Ce.onerror=va,me.abort(),Ce.result.close(),(Xe=O.deleteDatabase(Ae)).onsuccess=Xe.onerror=Se(function(){be(new Le.NoSuchDatabase("Database ".concat(Ae," doesnt exist")))})):(me.onerror=Tn(be),Xe=Ue.oldVersion>Math.pow(2,62)?0:Ue.oldVersion,ve=Xe<1,_.idbdb=Ce.result,ee&&Xd(_,me),Hc(_,Xe/10,me,be))},be),Ce.onsuccess=Se(function(){me=null;var Ue,Xe,Ve,tt,mt,Mt,Dt=_.idbdb=Ce.result,_t=k(Dt.objectStoreNames);if(0<_t.length)try{var Zt=Dt.transaction((mt=_t).length===1?mt[0]:mt,"readonly");if(A.autoSchema)Mt=Dt,tt=Zt,(Ve=_).verno=Mt.version/10,tt=Ve._dbSchema=Wo(0,Mt,tt),Ve._storeNames=k(Mt.objectStoreNames,0),Vc(Ve,[Ve._allTables],l(tt),tt);else if(nt(_,_._dbSchema,Zt),Xe=Zt,((Xe=wr(Wo(0,(Ue=_).idbdb,Xe),Ue._dbSchema)).add.length||Xe.change.some(function(Ut){return Ut.add.length||Ut.change.length}))&&!ee)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Dt.close(),Y=Dt.version+1,ee=!0,we(oe());tl(_,Zt)}catch{}pt.push(_),Dt.onversionchange=Se(function(Ut){A.vcFired=!0,_.on("versionchange").fire(Ut)}),Dt.onclose=Se(function(){_.close({disableAutoOpen:!1})}),ve&&(_t=_._deps,mt=Ae,Qd(Mt=_t.indexedDB)||mt===ai||Kd(Mt,_t.IDBKeyRange).put({name:mt}).catch(_e)),we()},be)}).catch(function(we){switch(we?.name){case"UnknownError":if(0<A.PR1398_maxLoop)return A.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),oe();break;case"VersionError":if(0<Y)return Y=0,oe()}return Lt.reject(we)})}var fe,ge=A.dbReadyResolve,me=null,ve=!1;return Lt.race([z,(typeof navigator>"u"?Lt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(we){function be(){return indexedDB.databases().finally(we)}fe=setInterval(be,100),be()}).finally(function(){return clearInterval(fe)}):Promise.resolve()).then(oe)]).then(function(){return ie(),A.onReadyBeingFired=[],Lt.resolve(zh(function(){return _.on.ready.fire(_.vip)})).then(function we(){var be;if(0<A.onReadyBeingFired.length)return be=A.onReadyBeingFired.reduce(vt,_e),A.onReadyBeingFired=[],Lt.resolve(zh(function(){return be(_.vip)})).then(we)})}).finally(function(){A.openCanceller===z&&(A.onReadyBeingFired=null,A.isBeingOpened=!1)}).catch(function(we){A.dbOpenError=we;try{me&&me.abort()}catch{}return z===A.openCanceller&&_._close(),Vt(we)}).finally(function(){A.openComplete=!0,ge()}).then(function(){var we;return ve&&(we={},_.tables.forEach(function(be){be.schema.indexes.forEach(function(Ae){Ae.name&&(we["idb://".concat(_.name,"/").concat(be.name,"/").concat(Ae.name)]=new Mn(-1/0,[[[]]]))}),we["idb://".concat(_.name,"/").concat(be.name,"/")]=we["idb://".concat(_.name,"/").concat(be.name,"/:dels")]=new Mn(-1/0,[[[]]])}),gr(Ho).fire(we),Qi(we,!0)),_})}function po(_){function A(ee){return _.next(ee)}var O=Y(A),z=Y(function(ee){return _.throw(ee)});function Y(ee){return function(oe){var oe=ee(oe),fe=oe.value;return oe.done?fe:fe&&typeof fe.then=="function"?fe.then(O,z):o(fe)?Promise.all(fe).then(O,z):O(fe)}}return Y(A)()}function il(_,A,O){for(var z=o(_)?_.slice():[_],Y=0;Y<O;++Y)z.push(A);return z}var G0={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(_){return r(r({},_),{table:function(z){var O=_.table(z),z=O.schema,Y={},ee=[];function ie(we,be,Ae){var Ve=un(we),Ce=Y[Ve]=Y[Ve]||[],Ue=we==null?0:typeof we=="string"?1:we.length,Xe=0<be,Ve=r(r({},Ae),{name:Xe?"".concat(Ve,"(virtual-from:").concat(Ae.name,")"):Ae.name,lowLevelIndex:Ae,isVirtual:Xe,keyTail:be,keyLength:Ue,extractKey:Os(we),unique:!Xe&&Ae.unique});return Ce.push(Ve),Ve.isPrimaryKey||ee.push(Ve),1<Ue&&ie(Ue===2?we[0]:we.slice(0,Ue-1),be+1,Ae),Ce.sort(function(tt,mt){return tt.keyTail-mt.keyTail}),Ve}var oe=ie(z.primaryKey.keyPath,0,z.primaryKey);Y[":id"]=[oe];for(var fe=0,ge=z.indexes;fe<ge.length;fe++){var me=ge[fe];ie(me.keyPath,0,me)}function ve(we){var be,Ae=we.query.index;return Ae.isVirtual?r(r({},we),{query:{index:Ae.lowLevelIndex,range:(be=we.query.range,Ae=Ae.keyTail,{type:be.type===1?2:be.type,lower:il(be.lower,be.lowerOpen?_.MAX_KEY:_.MIN_KEY,Ae),lowerOpen:!0,upper:il(be.upper,be.upperOpen?_.MIN_KEY:_.MAX_KEY,Ae),upperOpen:!0})}}):we}return r(r({},O),{schema:r(r({},z),{primaryKey:oe,indexes:ee,getIndexByKeyPath:function(we){return(we=Y[un(we)])&&we[0]}}),count:function(we){return O.count(ve(we))},query:function(we){return O.query(ve(we))},openCursor:function(we){var be=we.query.index,Ae=be.keyTail,Ce=be.keyLength;return be.isVirtual?O.openCursor(ve(we)).then(function(Xe){return Xe&&Ue(Xe)}):O.openCursor(we);function Ue(Xe){return Object.create(Xe,{continue:{value:function(Ve){Ve!=null?Xe.continue(il(Ve,we.reverse?_.MAX_KEY:_.MIN_KEY,Ae)):we.unique?Xe.continue(Xe.key.slice(0,Ce).concat(we.reverse?_.MIN_KEY:_.MAX_KEY,Ae)):Xe.continue()}},continuePrimaryKey:{value:function(Ve,tt){Xe.continuePrimaryKey(il(Ve,_.MAX_KEY,Ae),tt)}},primaryKey:{get:function(){return Xe.primaryKey}},key:{get:function(){var Ve=Xe.key;return Ce===1?Ve[0]:Ve.slice(0,Ce)}},value:{get:function(){return Xe.value}}})}}})}})}};function tu(_,A,O,z){return O=O||{},z=z||"",l(_).forEach(function(Y){var ee,ie,oe;h(A,Y)?(ee=_[Y],ie=A[Y],typeof ee=="object"&&typeof ie=="object"&&ee&&ie?(oe=B(ee))!==B(ie)?O[z+Y]=A[Y]:oe==="Object"?tu(ee,ie,O,z+Y+"."):ee!==ie&&(O[z+Y]=A[Y]):ee!==ie&&(O[z+Y]=A[Y])):O[z+Y]=void 0}),l(A).forEach(function(Y){h(_,Y)||(O[z+Y]=A[Y])}),O}function sl(_,A){return A.type==="delete"?A.keys:A.keys||A.values.map(_.extractKey)}var au={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(_){return r(r({},_),{table:function(A){var O=_.table(A),z=O.schema.primaryKey;return r(r({},O),{mutate:function(Y){var ee=st.trans,ie=ee.table(A).hook,oe=ie.deleting,fe=ie.creating,ge=ie.updating;switch(Y.type){case"add":if(fe.fire===_e)break;return ee._promise("readwrite",function(){return me(Y)},!0);case"put":if(fe.fire===_e&&ge.fire===_e)break;return ee._promise("readwrite",function(){return me(Y)},!0);case"delete":if(oe.fire===_e)break;return ee._promise("readwrite",function(){return me(Y)},!0);case"deleteRange":if(oe.fire===_e)break;return ee._promise("readwrite",function(){return(function ve(we,be,Ae){return O.query({trans:we,values:!1,query:{index:z,range:be},limit:Ae}).then(function(Ce){var Ue=Ce.result;return me({type:"delete",keys:Ue,trans:we}).then(function(Xe){return 0<Xe.numFailures?Promise.reject(Xe.failures[0]):Ue.length<Ae?{failures:[],numFailures:0,lastResult:void 0}:ve(we,r(r({},be),{lower:Ue[Ue.length-1],lowerOpen:!0}),Ae)})})})(Y.trans,Y.range,1e4)},!0)}return O.mutate(Y);function me(ve){var we,be,Ae,Ce=st.trans,Ue=ve.keys||sl(z,ve);if(Ue)return(ve=ve.type==="add"||ve.type==="put"?r(r({},ve),{keys:Ue}):r({},ve)).type!=="delete"&&(ve.values=n([],ve.values)),ve.keys&&(ve.keys=n([],ve.keys)),we=O,Ae=Ue,((be=ve).type==="add"?Promise.resolve([]):we.getMany({trans:be.trans,keys:Ae,cache:"immutable"})).then(function(Xe){var Ve=Ue.map(function(tt,mt){var Mt,Dt,_t,Zt=Xe[mt],Ut={onerror:null,onsuccess:null};return ve.type==="delete"?oe.fire.call(Ut,tt,Zt,Ce):ve.type==="add"||Zt===void 0?(Mt=fe.fire.call(Ut,tt,ve.values[mt],Ce),tt==null&&Mt!=null&&(ve.keys[mt]=tt=Mt,z.outbound||P(ve.values[mt],z.keyPath,tt))):(Mt=tu(Zt,ve.values[mt]),(Dt=ge.fire.call(Ut,Mt,tt,Zt,Ce))&&(_t=ve.values[mt],Object.keys(Dt).forEach(function(Ct){h(_t,Ct)?_t[Ct]=Dt[Ct]:P(_t,Ct,Dt[Ct])}))),Ut});return O.mutate(ve).then(function(tt){for(var mt=tt.failures,Mt=tt.results,Dt=tt.numFailures,tt=tt.lastResult,_t=0;_t<Ue.length;++_t){var Zt=(Mt||Ue)[_t],Ut=Ve[_t];Zt==null?Ut.onerror&&Ut.onerror(mt[_t]):Ut.onsuccess&&Ut.onsuccess(ve.type==="put"&&Xe[_t]?ve.values[_t]:Zt)}return{failures:mt,results:Mt,numFailures:Dt,lastResult:tt}}).catch(function(tt){return Ve.forEach(function(mt){return mt.onerror&&mt.onerror(tt)}),Promise.reject(tt)})});throw new Error("Keys missing")}}})}})}};function Vh(_,A,O){try{if(!A||A.keys.length<_.length)return null;for(var z=[],Y=0,ee=0;Y<A.keys.length&&ee<_.length;++Y)pa(A.keys[Y],_[ee])===0&&(z.push(O?Z(A.values[Y]):A.values[Y]),++ee);return z.length===_.length?z:null}catch{return null}}var Yo={stack:"dbcore",level:-1,create:function(_){return{table:function(A){var O=_.table(A);return r(r({},O),{getMany:function(z){var Y;return z.cache?(Y=Vh(z.keys,z.trans._cache,z.cache==="clone"))?Lt.resolve(Y):O.getMany(z).then(function(ee){return z.trans._cache={keys:z.keys,values:z.cache==="clone"?Z(ee):ee},ee}):O.getMany(z)},mutate:function(z){return z.type!=="add"&&(z.trans._cache=null),O.mutate(z)}})}}}};function xo(_,A){return _.trans.mode==="readonly"&&!!_.subscr&&!_.trans.explicit&&_.trans.db._options.cache!=="disabled"&&!A.schema.primaryKey.outbound}function ll(_,A){switch(_){case"query":return A.values&&!A.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ru={stack:"dbcore",level:0,name:"Observability",create:function(_){var A=_.schema.name,O=new Mn(_.MIN_KEY,_.MAX_KEY);return r(r({},_),{transaction:function(z,Y,ee){if(st.subscr&&Y!=="readonly")throw new Le.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(st.querier));return _.transaction(z,Y,ee)},table:function(z){function Y(Ue){var Ce,Ue=Ue.query;return[Ce=Ue.index,new Mn((Ce=(Ue=Ue.range).lower)!=null?Ce:_.MIN_KEY,(Ce=Ue.upper)!=null?Ce:_.MAX_KEY)]}var ee=_.table(z),ie=ee.schema,oe=ie.primaryKey,fe=ie.indexes,ge=oe.extractKey,me=oe.outbound,ve=oe.autoIncrement&&fe.filter(function(Ae){return Ae.compound&&Ae.keyPath.includes(oe.keyPath)}),we=r(r({},ee),{mutate:function(Ae){function Ce(ea){return ea="idb://".concat(A,"/").concat(z,"/").concat(ea),mt[ea]||(mt[ea]=new Mn)}var Ue,Xe,Ve,tt=Ae.trans,mt=Ae.mutatedParts||(Ae.mutatedParts={}),Mt=Ce(""),Dt=Ce(":dels"),_t=Ae.type,Ut=Ae.type==="deleteRange"?[Ae.range]:Ae.type==="delete"?[Ae.keys]:Ae.values.length<50?[sl(oe,Ae).filter(function(ea){return ea}),Ae.values]:[],Zt=Ut[0],Ut=Ut[1],Ct=Ae.trans._cache;return o(Zt)?(Mt.addKeys(Zt),(_t=_t==="delete"||Zt.length===Ut.length?Vh(Zt,Ct):null)||Dt.addKeys(Zt),(_t||Ut)&&(Ue=Ce,Xe=_t,Ve=Ut,ie.indexes.forEach(function(ea){var Pa=Ue(ea.name||"");function sr(Ya){return Ya!=null?ea.extractKey(Ya):null}function Na(Ya){ea.multiEntry&&o(Ya)?Ya.forEach(function(Zr){return Pa.addKey(Zr)}):Pa.addKey(Ya)}(Xe||Ve).forEach(function(Ya,zr){var es=Xe&&sr(Xe[zr]),zr=Ve&&sr(Ve[zr]);pa(es,zr)!==0&&(es!=null&&Na(es),zr!=null)&&Na(zr)})}))):Zt?(Ut={from:(Ct=Zt.lower)!=null?Ct:_.MIN_KEY,to:(_t=Zt.upper)!=null?_t:_.MAX_KEY},Dt.add(Ut),Mt.add(Ut)):(Mt.add(O),Dt.add(O),ie.indexes.forEach(function(ea){return Ce(ea.name).add(O)})),ee.mutate(Ae).then(function(ea){return!Zt||Ae.type!=="add"&&Ae.type!=="put"||(Mt.addKeys(ea.results),ve&&ve.forEach(function(Pa){for(var sr=Ae.values.map(function(es){return Pa.extractKey(es)}),Na=Pa.keyPath.findIndex(function(es){return es===oe.keyPath}),Ya=0,Zr=ea.results.length;Ya<Zr;++Ya)sr[Ya][Na]=ea.results[Ya];Ce(Pa.name).addKeys(sr)})),tt.mutatedParts=ba(tt.mutatedParts||{},mt),ea})}}),be={get:function(Ae){return[oe,new Mn(Ae.key)]},getMany:function(Ae){return[oe,new Mn().addKeys(Ae.keys)]},count:Y,query:Y,openCursor:Y};return l(be).forEach(function(Ae){we[Ae]=function(Ce){var Ue=st.subscr,Xe=!!Ue,Ve=xo(st,ee)&&ll(Ae,Ce)?Ce.obsSet={}:Ue;if(Xe){var tt,Ue=function(Ut){return Ut="idb://".concat(A,"/").concat(z,"/").concat(Ut),Ve[Ut]||(Ve[Ut]=new Mn)},mt=Ue(""),Mt=Ue(":dels"),Xe=be[Ae](Ce),Dt=Xe[0],Xe=Xe[1];if((Ae==="query"&&Dt.isPrimaryKey&&!Ce.values?Mt:Ue(Dt.name||"")).add(Xe),!Dt.isPrimaryKey){if(Ae!=="count")return tt=Ae==="query"&&me&&Ce.values&&ee.query(r(r({},Ce),{values:!1})),ee[Ae].apply(this,arguments).then(function(Ut){if(Ae==="query"){if(me&&Ce.values)return tt.then(function(sr){return sr=sr.result,mt.addKeys(sr),Ut});var Ct=Ce.values?Ut.result.map(ge):Ut.result;(Ce.values?mt:Mt).addKeys(Ct)}else{var ea,Pa;if(Ae==="openCursor")return Pa=Ce.values,(ea=Ut)&&Object.create(ea,{key:{get:function(){return Mt.addKey(ea.primaryKey),ea.key}},primaryKey:{get:function(){var sr=ea.primaryKey;return Mt.addKey(sr),sr}},value:{get:function(){return Pa&&mt.addKey(ea.primaryKey),ea.value}}})}return Ut});Mt.add(O)}}return ee[Ae].apply(this,arguments)}}),we}})}};function Bi(_,A,O){var z;return O.numFailures===0?A:A.type==="deleteRange"||(z=A.keys?A.keys.length:"values"in A&&A.values?A.values.length:1,O.numFailures===z)?null:(z=r({},A),o(z.keys)&&(z.keys=z.keys.filter(function(Y,ee){return!(ee in O.failures)})),"values"in z&&o(z.values)&&(z.values=z.values.filter(function(Y,ee){return!(ee in O.failures)})),z)}function Gc(_,A){return O=_,((z=A).lower===void 0||(z.lowerOpen?0<pa(O,z.lower):0<=pa(O,z.lower)))&&(O=_,(z=A).upper===void 0||(z.upperOpen?pa(O,z.upper)<0:pa(O,z.upper)<=0));var O,z}function Ji(_,A,O,z,Y,ee){var ie,oe,fe,ge,me,ve;return!O||O.length===0||(ie=A.query.index,oe=ie.multiEntry,fe=A.query.range,ge=z.schema.primaryKey.extractKey,me=ie.extractKey,ve=(ie.lowLevelIndex||ie).extractKey,(z=O.reduce(function(we,be){var Ae=we,Ce=[];if(be.type==="add"||be.type==="put")for(var Ue=new Mn,Xe=be.values.length-1;0<=Xe;--Xe){var Ve,tt=be.values[Xe],mt=ge(tt);!Ue.hasKey(mt)&&(Ve=me(tt),oe&&o(Ve)?Ve.some(function(Ut){return Gc(Ut,fe)}):Gc(Ve,fe))&&(Ue.addKey(mt),Ce.push(tt))}switch(be.type){case"add":var Mt=new Mn().addKeys(A.values?we.map(function(Ct){return ge(Ct)}):we),Ae=we.concat(A.values?Ce.filter(function(Ct){return Ct=ge(Ct),!Mt.hasKey(Ct)&&(Mt.addKey(Ct),!0)}):Ce.map(function(Ct){return ge(Ct)}).filter(function(Ct){return!Mt.hasKey(Ct)&&(Mt.addKey(Ct),!0)}));break;case"put":var Dt=new Mn().addKeys(be.values.map(function(Ct){return ge(Ct)}));Ae=we.filter(function(Ct){return!Dt.hasKey(A.values?ge(Ct):Ct)}).concat(A.values?Ce:Ce.map(function(Ct){return ge(Ct)}));break;case"delete":var _t=new Mn().addKeys(be.keys);Ae=we.filter(function(Ct){return!_t.hasKey(A.values?ge(Ct):Ct)});break;case"deleteRange":var Zt=be.range;Ae=we.filter(function(Ct){return!Gc(ge(Ct),Zt)})}return Ae},_))===_)?_:(z.sort(function(we,be){return pa(ve(we),ve(be))||pa(ge(we),ge(be))}),A.limit&&A.limit<1/0&&(z.length>A.limit?z.length=A.limit:_.length===A.limit&&z.length<A.limit&&(Y.dirty=!0)),ee?Object.freeze(z):z)}function $o(_,A){return pa(_.lower,A.lower)===0&&pa(_.upper,A.upper)===0&&!!_.lowerOpen==!!A.lowerOpen&&!!_.upperOpen==!!A.upperOpen}function mo(_,A){return((O,z,Y,ee)=>{if(O===void 0)return z!==void 0?-1:0;if(z===void 0)return 1;if((O=pa(O,z))===0){if(Y&&ee)return 0;if(Y)return 1;if(ee)return-1}return O})(_.lower,A.lower,_.lowerOpen,A.lowerOpen)<=0&&0<=((O,z,Y,ee)=>{if(O===void 0)return z!==void 0?1:0;if(z===void 0)return-1;if((O=pa(O,z))===0){if(Y&&ee)return 0;if(Y)return-1;if(ee)return 1}return O})(_.upper,A.upper,_.upperOpen,A.upperOpen)}function im(_,A,O,z){_.subscribers.add(O),z.addEventListener("abort",function(){var Y,ee;_.subscribers.delete(O),_.subscribers.size===0&&(Y=_,ee=A,setTimeout(function(){Y.subscribers.size===0&&Q(ee,Y)},3e3))})}var Wc={stack:"dbcore",level:0,name:"Cache",create:function(_){var A=_.schema.name;return r(r({},_),{transaction:function(O,z,Y){var ee,ie,oe=_.transaction(O,z,Y);return z==="readwrite"&&(Y=(ee=new AbortController).signal,oe.addEventListener("abort",(ie=function(fe){return function(){if(ee.abort(),z==="readwrite"){for(var ge=new Set,me=0,ve=O;me<ve.length;me++){var we=ve[me],be=_r["idb://".concat(A,"/").concat(we)];if(be){var Ae=_.table(we),Ce=be.optimisticOps.filter(function(ea){return ea.trans===oe});if(oe._explicit&&fe&&oe.mutatedParts)for(var Ue=0,Xe=Object.values(be.queries.query);Ue<Xe.length;Ue++)for(var Ve=0,tt=(Dt=Xe[Ue]).slice();Ve<tt.length;Ve++)Fh((_t=tt[Ve]).obsSet,oe.mutatedParts)&&(Q(Dt,_t),_t.subscribers.forEach(function(ea){return ge.add(ea)}));else if(0<Ce.length){be.optimisticOps=be.optimisticOps.filter(function(ea){return ea.trans!==oe});for(var mt=0,Mt=Object.values(be.queries.query);mt<Mt.length;mt++)for(var Dt,_t,Zt,Ut=0,Ct=(Dt=Mt[mt]).slice();Ut<Ct.length;Ut++)(_t=Ct[Ut]).res!=null&&oe.mutatedParts&&(fe&&!_t.dirty?(Zt=Object.isFrozen(_t.res),Zt=Ji(_t.res,_t.req,Ce,Ae,_t,Zt),_t.dirty?(Q(Dt,_t),_t.subscribers.forEach(function(ea){return ge.add(ea)})):Zt!==_t.res&&(_t.res=Zt,_t.promise=Lt.resolve({result:Zt}))):(_t.dirty&&Q(Dt,_t),_t.subscribers.forEach(function(ea){return ge.add(ea)})))}}}ge.forEach(function(ea){return ea()})}}})(!1),{signal:Y}),oe.addEventListener("error",ie(!1),{signal:Y}),oe.addEventListener("complete",ie(!0),{signal:Y})),oe},table:function(O){var z=_.table(O),Y=z.schema.primaryKey;return r(r({},z),{mutate:function(ee){var ie,oe=st.trans;return!Y.outbound&&oe.db._options.cache!=="disabled"&&!oe.explicit&&oe.idbtrans.mode==="readwrite"&&(ie=_r["idb://".concat(A,"/").concat(O)])?(oe=z.mutate(ee),ee.type!=="add"&&ee.type!=="put"||!(50<=ee.values.length||sl(Y,ee).some(function(fe){return fe==null}))?(ie.optimisticOps.push(ee),ee.mutatedParts&&Jd(ee.mutatedParts),oe.then(function(fe){0<fe.numFailures&&(Q(ie.optimisticOps,ee),(fe=Bi(0,ee,fe))&&ie.optimisticOps.push(fe),ee.mutatedParts)&&Jd(ee.mutatedParts)}),oe.catch(function(){Q(ie.optimisticOps,ee),ee.mutatedParts&&Jd(ee.mutatedParts)})):oe.then(function(fe){var ge=Bi(0,r(r({},ee),{values:ee.values.map(function(me,ve){var we;return fe.failures[ve]?me:(P(we=(we=Y.keyPath)!=null&&we.includes(".")?Z(me):r({},me),Y.keyPath,fe.results[ve]),we)})}),fe);ie.optimisticOps.push(ge),queueMicrotask(function(){return ee.mutatedParts&&Jd(ee.mutatedParts)})}),oe):z.mutate(ee)},query:function(ee){var ie,oe,fe,ge,me,ve,we;return xo(st,z)&&ll("query",ee)?(ie=((fe=st.trans)==null?void 0:fe.db._options.cache)==="immutable",oe=(fe=st).requery,fe=fe.signal,ve=((be,Ae,Ce,Ue)=>{var Xe=_r["idb://".concat(be,"/").concat(Ae)];if(!Xe)return[];if(!(be=Xe.queries[Ce]))return[null,!1,Xe,null];var Ve=be[(Ue.query?Ue.query.index.name:null)||""];if(!Ve)return[null,!1,Xe,null];switch(Ce){case"query":var tt=Ve.find(function(mt){return mt.req.limit===Ue.limit&&mt.req.values===Ue.values&&$o(mt.req.query.range,Ue.query.range)});return tt?[tt,!0,Xe,Ve]:[Ve.find(function(mt){return("limit"in mt.req?mt.req.limit:1/0)>=Ue.limit&&(!Ue.values||mt.req.values)&&mo(mt.req.query.range,Ue.query.range)}),!1,Xe,Ve];case"count":return tt=Ve.find(function(mt){return $o(mt.req.query.range,Ue.query.range)}),[tt,!!tt,Xe,Ve]}})(A,O,"query",ee),we=ve[0],ge=ve[2],me=ve[3],we&&ve[1]?we.obsSet=ee.obsSet:(ve=z.query(ee).then(function(be){var Ae=be.result;if(we&&(we.res=Ae),ie){for(var Ce=0,Ue=Ae.length;Ce<Ue;++Ce)Object.freeze(Ae[Ce]);Object.freeze(Ae)}else be.result=Z(Ae);return be}).catch(function(be){return me&&we&&Q(me,we),Promise.reject(be)}),we={obsSet:ee.obsSet,promise:ve,subscribers:new Set,type:"query",req:ee,dirty:!1},me?me.push(we):(me=[we],(ge=ge||(_r["idb://".concat(A,"/").concat(O)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[ee.query.index.name||""]=me)),im(we,me,oe,fe),we.promise.then(function(be){return{result:Ji(be.result,ee,ge?.optimisticOps,z,we,ie)}})):z.query(ee)}})}})}};function Ci(_,A){return new Proxy(_,{get:function(O,z,Y){return z==="db"?A:Reflect.get(O,z,Y)}})}Gr.prototype.version=function(_){if(isNaN(_)||_<.1)throw new Le.Type("Given version is not a positive number");if(_=Math.round(10*_)/10,this.idbdb||this._state.isBeingOpened)throw new Le.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,_);var A=this._versions,O=A.filter(function(z){return z._cfg.version===_})[0];return O||(O=new this.Version(_),A.push(O),A.sort(Ph),O.stores({}),this._state.autoSchema=!1),O},Gr.prototype._whenReady=function(_){var A=this;return this.idbdb&&(this._state.openComplete||st.letThrough||this._vip)?_():new Lt(function(O,z){if(A._state.openComplete)return z(new Le.DatabaseClosed(A._state.dbOpenError));if(!A._state.isBeingOpened){if(!A._state.autoOpen)return void z(new Le.DatabaseClosed);A.open().catch(_e)}A._state.dbReadyPromise.then(O,z)}).then(_)},Gr.prototype.use=function(Y){var A=Y.stack,O=Y.create,z=Y.level,Y=Y.name,ee=(Y&&this.unuse({stack:A,name:Y}),this._middlewares[A]||(this._middlewares[A]=[]));return ee.push({stack:A,create:O,level:z??10,name:Y}),ee.sort(function(ie,oe){return ie.level-oe.level}),this},Gr.prototype.unuse=function(_){var A=_.stack,O=_.name,z=_.create;return A&&this._middlewares[A]&&(this._middlewares[A]=this._middlewares[A].filter(function(Y){return z?Y.create!==z:!!O&&Y.name!==O})),this},Gr.prototype.open=function(){var _=this;return jr(Ot,function(){return U0(_)})},Gr.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var _=this._state,A=pt.indexOf(this);if(0<=A&&pt.splice(A,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}_.isBeingOpened||(_.dbReadyPromise=new Lt(function(O){_.dbReadyResolve=O}),_.openCanceller=new Lt(function(O,z){_.cancelOpen=z}))},Gr.prototype.close=function(A){var A=(A===void 0?{disableAutoOpen:!0}:A).disableAutoOpen,O=this._state;A?(O.isBeingOpened&&O.cancelOpen(new Le.DatabaseClosed),this._close(),O.autoOpen=!1,O.dbOpenError=new Le.DatabaseClosed):(this._close(),O.autoOpen=this._options.autoOpen||O.isBeingOpened,O.openComplete=!1,O.dbOpenError=null)},Gr.prototype.delete=function(_){var A=this,O=(_===void 0&&(_={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),z=this._state;return new Lt(function(Y,ee){function ie(){A.close(_);var oe=A._deps.indexedDB.deleteDatabase(A.name);oe.onsuccess=Se(function(){var fe,ge,me;fe=A._deps,ge=A.name,Qd(me=fe.indexedDB)||ge===ai||Kd(me,fe.IDBKeyRange).delete(ge).catch(_e),Y()}),oe.onerror=Tn(ee),oe.onblocked=A._fireOnBlocked}if(O)throw new Le.InvalidArgument("Invalid closeOptions argument to db.delete()");z.isBeingOpened?z.dbReadyPromise.then(ie):ie()})},Gr.prototype.backendDB=function(){return this.idbdb},Gr.prototype.isOpen=function(){return this.idbdb!==null},Gr.prototype.hasBeenClosed=function(){var _=this._state.dbOpenError;return _&&_.name==="DatabaseClosed"},Gr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Gr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Gr.prototype,"tables",{get:function(){var _=this;return l(this._allTables).map(function(A){return _._allTables[A]})},enumerable:!1,configurable:!0}),Gr.prototype.transaction=function(){var _=(function(A,O,z){var Y=arguments.length;if(Y<2)throw new Le.InvalidArgument("Too few arguments");for(var ee=new Array(Y-1);--Y;)ee[Y-1]=arguments[Y];return z=ee.pop(),[A,X(ee),z]}).apply(this,arguments);return this._transaction.apply(this,_)},Gr.prototype._transaction=function(_,A,O){var z,Y,ee=this,ie=st.trans,oe=(ie&&ie.db===this&&_.indexOf("!")===-1||(ie=null),_.indexOf("?")!==-1);_=_.replace("!","").replace("?","");try{if(Y=A.map(function(ge){if(ge=ge instanceof ee.Table?ge.name:ge,typeof ge!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return ge}),_=="r"||_===lr)z=lr;else{if(_!="rw"&&_!=jn)throw new Le.InvalidArgument("Invalid transaction mode: "+_);z=jn}if(ie){if(ie.mode===lr&&z===jn){if(!oe)throw new Le.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");ie=null}ie&&Y.forEach(function(ge){if(ie&&ie.storeNames.indexOf(ge)===-1){if(!oe)throw new Le.SubTransaction("Table "+ge+" not included in parent transaction.");ie=null}}),oe&&ie&&!ie.active&&(ie=null)}}catch(ge){return ie?ie._promise(null,function(me,ve){ve(ge)}):Vt(ge)}var fe=(function ge(me,ve,we,be,Ae){return Lt.resolve().then(function(){var Ve=st.transless||st,Ce=me._createTransaction(ve,we,me._dbSchema,be),Ve=(Ce.explicit=!0,{trans:Ce,transless:Ve});if(be)Ce.idbtrans=be.idbtrans;else try{Ce.create(),Ce.idbtrans._explicit=!0,me._state.PR1398_maxLoop=3}catch(tt){return tt.name===Te.InvalidState&&me.isOpen()&&0<--me._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),me.close({disableAutoOpen:!1}),me.open().then(function(){return ge(me,ve,we,null,Ae)})):Vt(tt)}var Ue,Xe=K(Ae),Ve=(Xe&&Et(),Lt.follow(function(){var tt;(Ue=Ae.call(Ce,Ce))&&(Xe?(tt=Gt.bind(null,null),Ue.then(tt,tt)):typeof Ue.next=="function"&&typeof Ue.throw=="function"&&(Ue=po(Ue)))},Ve));return(Ue&&typeof Ue.then=="function"?Lt.resolve(Ue).then(function(tt){return Ce.active?tt:Vt(new Le.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Ve.then(function(){return Ue})).then(function(tt){return be&&Ce._resolve(),Ce._completion.then(function(){return tt})}).catch(function(tt){return Ce._reject(tt),Vt(tt)})})}).bind(null,this,z,Y,ie,O);return ie?ie._promise(z,fe,"lock"):st.trans?jr(st.transless,function(){return ee._whenReady(fe)}):this._whenReady(fe)},Gr.prototype.table=function(_){if(h(this._allTables,_))return this._allTables[_];throw new Le.InvalidTable("Table ".concat(_," does not exist"))};var Ps=Gr;function Gr(_,A){var O,z,Y,ee,ie,oe=this,fe=(this._middlewares={},this.verno=0,Gr.dependencies),fe=(this._options=A=r({addons:Gr.addons,autoOpen:!0,indexedDB:fe.indexedDB,IDBKeyRange:fe.IDBKeyRange,cache:"cloned"},A),this._deps={indexedDB:A.indexedDB,IDBKeyRange:A.IDBKeyRange},A.addons),ge=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:_e,dbReadyPromise:null,cancelOpen:_e,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:A.autoOpen}),me=(ge.dbReadyPromise=new Lt(function(ve){ge.dbReadyResolve=ve}),ge.openCanceller=new Lt(function(ve,we){ge.cancelOpen=we}),this._state=ge,this.name=_,this.on=Is(this,"populate","blocked","versionchange","close",{ready:[vt,_e]}),this.once=function(ve,we){var be=function(){for(var Ae=[],Ce=0;Ce<arguments.length;Ce++)Ae[Ce]=arguments[Ce];oe.on(ve).unsubscribe(be),we.apply(oe,Ae)};return oe.on(ve,be)},this.on.ready.subscribe=T(this.on.ready.subscribe,function(ve){return function(we,be){Gr.vip(function(){var Ae,Ce=oe._state;Ce.openComplete?(Ce.dbOpenError||Lt.resolve().then(we),be&&ve(we)):Ce.onReadyBeingFired?(Ce.onReadyBeingFired.push(we),be&&ve(we)):(ve(we),Ae=oe,be||ve(function Ue(){Ae.on.ready.unsubscribe(we),Ae.on.ready.unsubscribe(Ue)}))})}}),this.Collection=(O=this,Va(Rh.prototype,function(Ue,Ce){this.db=O;var be=ar,Ae=null;if(Ce)try{be=Ce()}catch(Ve){Ae=Ve}var Ce=Ue._ctx,Ue=Ce.table,Xe=Ue.hook.reading.fire;this._ctx={table:Ue,index:Ce.index,isPrimKey:!Ce.index||Ue.schema.primKey.keyPath&&Ce.index===Ue.schema.primKey.name,range:be,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Ae,or:Ce.or,valueMapper:Xe!==Oe?Xe:null}})),this.Table=(z=this,Va(Ds.prototype,function(ve,we,be){this.db=z,this._tx=be,this.name=ve,this.schema=we,this.hook=z._allTables[ve]?z._allTables[ve].hook:Is(null,{creating:[Ee,_e],reading:[De,Oe],updating:[dt,_e],deleting:[rt,_e]})})),this.Transaction=(Y=this,Va(Lh.prototype,function(ve,we,be,Ae,Ce){var Ue=this;ve!=="readonly"&&we.forEach(function(Xe){Xe=(Xe=be[Xe])==null?void 0:Xe.yProps,Xe&&(we=we.concat(Xe.map(function(Ve){return Ve.updatesTable})))}),this.db=Y,this.mode=ve,this.storeNames=we,this.schema=be,this.chromeTransactionDurability=Ae,this.idbtrans=null,this.on=Is(this,"complete","error","abort"),this.parent=Ce||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Lt(function(Xe,Ve){Ue._resolve=Xe,Ue._reject=Ve}),this._completion.then(function(){Ue.active=!1,Ue.on.complete.fire()},function(Xe){var Ve=Ue.active;return Ue.active=!1,Ue.on.error.fire(Xe),Ue.parent?Ue.parent._reject(Xe):Ve&&Ue.idbtrans&&Ue.idbtrans.abort(),Vt(Xe)})})),this.Version=(ee=this,Va(Hn.prototype,function(ve){this.db=ee,this._cfg={version:ve,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(ie=this,Va(Xr.prototype,function(ve,we,be){if(this.db=ie,this._ctx={table:ve,index:we===":id"?null:we,or:be},this._cmp=this._ascending=pa,this._descending=function(Ae,Ce){return pa(Ce,Ae)},this._max=function(Ae,Ce){return 0<pa(Ae,Ce)?Ae:Ce},this._min=function(Ae,Ce){return pa(Ae,Ce)<0?Ae:Ce},this._IDBKeyRange=ie._deps.IDBKeyRange,!this._IDBKeyRange)throw new Le.MissingAPI})),this.on("versionchange",function(ve){0<ve.newVersion?console.warn("Another connection wants to upgrade database '".concat(oe.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(oe.name,"'. Closing db now to resume the delete request.")),oe.close({disableAutoOpen:!1})}),this.on("blocked",function(ve){!ve.newVersion||ve.newVersion<ve.oldVersion?console.warn("Dexie.delete('".concat(oe.name,"') was blocked")):console.warn("Upgrade '".concat(oe.name,"' blocked by other connection holding version ").concat(ve.oldVersion/10))}),this._maxKey=Ls(A.IDBKeyRange),this._createTransaction=function(ve,we,be,Ae){return new oe.Transaction(ve,we,be,oe._options.chromeTransactionDurability,Ae)},this._fireOnBlocked=function(ve){oe.on("blocked").fire(ve),pt.filter(function(we){return we.name===oe.name&&we!==oe&&!we._state.vcFired}).map(function(we){return we.on("versionchange").fire(ve)})},this.use(Yo),this.use(Wc),this.use(ru),this.use(G0),this.use(au),new Proxy(this,{get:function(ve,we,be){var Ae;return we==="_vip"||(we==="table"?function(Ce){return Ci(oe.table(Ce),me)}:(Ae=Reflect.get(ve,we,be))instanceof Ds?Ci(Ae,me):we==="tables"?Ae.map(function(Ce){return Ci(Ce,me)}):we==="_createTransaction"?function(){return Ci(Ae.apply(this,arguments),me)}:Ae)}}));this.vip=me,fe.forEach(function(ve){return ve(oe)})}var zs,Za=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Yc=(ue.prototype.subscribe=function(_,A,O){return this._subscribe(_&&typeof _!="function"?_:{next:_,error:A,complete:O})},ue.prototype[Za]=function(){return this},ue);function ue(_){this._subscribe=_}try{zs={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{zs={indexedDB:null,IDBKeyRange:null}}function m(_){var A,O=!1,z=new Yc(function(Y){var ee=K(_),ie,oe=!1,fe={},ge={},me={get closed(){return oe},unsubscribe:function(){oe||(oe=!0,ie&&ie.abort(),ve&&gr.storagemutated.unsubscribe(be))}},ve=(Y.start&&Y.start(me),!1),we=function(){return Qa(Ae)},be=function(Ce){ba(fe,Ce),Fh(ge,fe)&&we()},Ae=function(){var Ce,Ue,Xe;!oe&&zs.indexedDB&&(fe={},Ce={},ie&&ie.abort(),ie=new AbortController,Xe=(Ve=>{var tt=Cn();try{ee&&Et();var mt=It(_,Ve);return mt=ee?mt.finally(Gt):mt}finally{tt&&ti()}})(Ue={subscr:Ce,signal:ie.signal,requery:we,querier:_,trans:null}),Promise.resolve(Xe).then(function(Ve){O=!0,A=Ve,oe||Ue.signal.aborted||(fe={},(tt=>{for(var mt in tt)if(h(tt,mt))return;return 1})(ge=Ce)||ve||(gr(Ho,be),ve=!0),Qa(function(){return!oe&&Y.next&&Y.next(Ve)}))},function(Ve){O=!1,["DatabaseClosedError","AbortError"].includes(Ve?.name)||oe||Qa(function(){oe||Y.error&&Y.error(Ve)})}))};return setTimeout(we,0),me});return z.hasValue=function(){return O},z.getValue=function(){return A},z}var y=Ps;function N(_){var A=M;try{M=!0,gr.storagemutated.fire(_),Qi(_,!0)}finally{M=A}}f(y,r(r({},ae),{delete:function(_){return new y(_,{addons:[]}).delete()},exists:function(_){return new y(_,{addons:[]}).open().then(function(A){return A.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(_){try{return A=y.dependencies,O=A.indexedDB,A=A.IDBKeyRange,(Qd(O)?Promise.resolve(O.databases()).then(function(z){return z.map(function(Y){return Y.name}).filter(function(Y){return Y!==ai})}):Kd(O,A).toCollection().primaryKeys()).then(_)}catch{return Vt(new Le.MissingAPI)}var A,O},defineClass:function(){return function(_){c(this,_)}},ignoreTransaction:function(_){return st.trans?jr(st.transless,_):_()},vip:zh,async:function(_){return function(){try{var A=po(_.apply(this,arguments));return A&&typeof A.then=="function"?A:Lt.resolve(A)}catch(O){return Vt(O)}}},spawn:function(_,A,O){try{var z=po(_.apply(O,A||[]));return z&&typeof z.then=="function"?z:Lt.resolve(z)}catch(Y){return Vt(Y)}},currentTransaction:{get:function(){return st.trans||null}},waitFor:function(_,A){return _=Lt.resolve(typeof _=="function"?y.ignoreTransaction(_):_).timeout(A||6e4),st.trans?st.trans.waitFor(_):_},Promise:Lt,debug:{get:function(){return $e},set:function(_){na(_)}},derive:b,extend:c,props:f,override:T,Events:Is,on:gr,liveQuery:m,extendObservabilitySet:ba,getByKeyPath:R,setByKeyPath:P,delByKeyPath:function(_,A){typeof A=="string"?P(_,A,void 0):"length"in A&&[].map.call(A,function(O){P(_,O,void 0)})},shallowClone:H,deepClone:Z,getObjectDiff:tu,cmp:pa,asap:I,minKey:-1/0,addons:[],connections:pt,errnames:Te,dependencies:zs,cache:_r,semVer:"4.3.0",version:"4.3.0".split(".").map(function(_){return parseInt(_)}).reduce(function(_,A,O){return _+A/Math.pow(10,2*O)})})),y.maxKey=Ls(y.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(gr(Ho,function(_){M||(_=new CustomEvent(Da,{detail:_}),M=!0,dispatchEvent(_),M=!1)}),addEventListener(Da,function(_){_=_.detail,M||N(_)}));var C,M=!1,L=function(){};return typeof BroadcastChannel<"u"&&((L=function(){(C=new BroadcastChannel(Da)).onmessage=function(_){return _.data&&N(_.data)}})(),typeof C.unref=="function"&&C.unref(),gr(Ho,function(_){M||C.postMessage(_)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(_){if(!Ps.disableBfCache&&_.persisted){$e&&console.debug("Dexie: handling persisted pagehide"),C?.close();for(var A=0,O=pt;A<O.length;A++)O[A].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(_){!Ps.disableBfCache&&_.persisted&&($e&&console.debug("Dexie: handling persisted pageshow"),L(),N({all:new Mn(-1/0,[[]])}))})),Lt.rejectionMapper=function(_,A){return!_||_ instanceof de||_ instanceof TypeError||_ instanceof SyntaxError||!_.name||!Ne[_.name]?_:(A=new Ne[_.name](A||_.message,_),"stack"in _&&g(A,"stack",{get:function(){return this.inner.stack}}),A)},na($e),r(Ps,Object.freeze({__proto__:null,Dexie:Ps,Entity:qt,PropModification:An,RangeSet:Mn,add:function(_){return new An({add:_})},cmp:pa,default:Ps,liveQuery:m,mergeRanges:rl,rangesOverlap:sn,remove:function(_){return new An({remove:_})},replacePrefix:function(_,A){return new An({replacePrefix:[_,A]})}}),{default:Ps}),Ps})})(Cw)),Cw.exports}var Yte=Wte();const FC=EA(Yte),I8=Symbol.for("Dexie"),n2=globalThis[I8]||(globalThis[I8]=FC);if(FC.semVer!==n2.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${FC.semVer} and ${n2.semVer}`);const{liveQuery:c8e,mergeRanges:d8e,rangesOverlap:u8e,RangeSet:h8e,cmp:f8e,Entity:p8e,PropModification:x8e,replacePrefix:m8e,add:g8e,remove:v8e,DexieYProvider:b8e}=n2,Hx=new n2("MyceliumOfflineDB");Hx.version(1).stores({offlineQueue:"++id, commandName, timestamp, status"});async function $te(a,e){return await Hx.offlineQueue.add({commandName:a,args:e,timestamp:Date.now(),status:"pending"})}async function R8(){return await Hx.offlineQueue.where("status").equals("pending").toArray()}async function qte(a){return await Hx.offlineQueue.update(a,{status:"syncing"})}async function L8(a){return await Hx.offlineQueue.update(a,{status:"failed"})}async function Xte(a){return await Hx.offlineQueue.delete(a)}async function ht(a,e={}){const r={get_dashboard_stats:"/api/dashboard/stats",get_dashboard_priority_stats:"/api/dashboard/priority-stats",get_dashboard_secondary_stats:"/api/dashboard/secondary-stats",get_sms_logs:"/api/crm/sms/logs",get_dashboard_schedule_stats:"/api/dashboard/schedule-stats",get_weekly_sales_data:"/api/dashboard/weekly-sales",get_recent_sales:"/api/dashboard/recent-sales",get_top3_products_by_qty:"/api/dashboard/top-qty",get_top_profit_products:"/api/dashboard/top-profitable",get_business_report_data:"/api/dashboard/report",get_ten_year_sales_stats:"/api/dashboard/ten-year-stats",get_monthly_sales_by_cohort:"/api/dashboard/cohort-stats",get_daily_sales_stats_by_month:"/api/dashboard/daily-stats",upload_media:"/api/production/media/upload",get_production_summary:"/api/production/summary",get_production_spaces:"/api/production/spaces",save_production_space:"/api/production/spaces/save",delete_production_space:"/api/production/spaces/delete",get_production_batches:"/api/production/batches",save_production_batch:"/api/production/batches/save",get_production_logs:"/api/production/logs",get_production_harvests:"/api/production/harvest",save_farming_log:"/api/production/logs/save",save_harvest_record:"/api/production/harvest/save",get_customers:"/api/customer/list",search_customers:"/api/customers/search",create_customer:"/api/customer/create",create_product:"/api/product/create",create_sale:"/api/sales/create",fetch_external_orders:"/api/sales/external/fetch",get_all_users:"/api/auth/users",create_user:"/api/auth/users/create",update_user:"/api/auth/users/update",delete_user:"/api/auth/users/delete",verify_admin_password:"/api/auth/verify-admin",get_company_info:"/api/auth/company",save_company_info:"/api/auth/company/save",get_auth_status:"/api/auth/status",check_auth:"/api/auth/check",verify_mobile_pin:"/api/auth/verify",get_update_status:"/api/system/check-update",get_all_events:"/api/event/list",create_event:"/api/event/create",update_event:"/api/event/update",delete_event:"/api/event/delete",get_ledger_debtors:"/api/sales/ledger/debtors",get_ledger:"/api/sales/ledger",create_ledger_entry:"/api/sales/ledger/create",update_ledger_entry:"/api/sales/ledger/update",delete_ledger_entry:"/api/sales/ledger/delete",system_setup:"/api/setup/system",get_vendors:"/api/finance/vendors",save_vendor:"/api/finance/vendors/save",delete_vendor:"/api/finance/vendors/delete",get_tax_report:"/api/finance/tax/report",submit_tax_report:"/api/finance/tax/submit",get_expenses:"/api/finance/expenses",save_expense:"/api/finance/expenses/save",delete_expense:"/api/finance/expenses/delete",get_purchases:"/api/finance/purchases",save_purchase:"/api/finance/purchases/save",delete_purchase:"/api/finance/purchases/delete",get_finance_analysis:"/api/finance/analysis",get_monthly_pl:"/api/finance/analysis/monthly-pl",get_cost_breakdown:"/api/finance/analysis/cost-breakdown",get_vendor_ranking:"/api/finance/analysis/vendor-ranking",get_product_list:"/api/product/list",get_product_history:"/api/product/history",get_product_bom:"/api/product/bom",save_product_bom:"/api/product/bom/save",update_product:"/api/product/update",delete_product:"/api/product/delete",discontinue_product:"/api/product/discontinue",apply_preset:"/api/preset/apply",get_preset_data:"/api/preset/data",save_current_as_preset:"/api/preset/save-current",get_custom_presets:"/api/preset/custom-list",delete_custom_preset:"/api/preset/delete-custom",reset_database:"/api/maintenance/reset-db",get_experience_programs:"/api/experience/programs",create_experience_program:"/api/experience/programs/create",update_experience_program:"/api/experience/programs/update",delete_experience_program:"/api/experience/programs/delete",get_all_integrations_config:"/api/settings/integrations",save_gemini_api_key:"/api/settings/integrations/gemini",save_sms_config:"/api/settings/integrations/sms",save_naver_keys:"/api/settings/integrations/naver",save_mall_keys:"/api/settings/integrations/mall",save_courier_config:"/api/settings/integrations/courier",save_tax_filing_config:"/api/settings/integrations/tax",save_tax_filing_config:"/api/settings/integrations/tax",get_sensors:"/api/iot/sensors",save_sensor:"/api/iot/sensors/save",delete_sensor:"/api/iot/sensors/delete",get_latest_readings:"/api/iot/latest",push_sensor_data:"/api/iot/push",get_upcoming_anniversaries:"/api/schedule/anniversary",get_repurchase_candidates:"/api/crm/repurchase",get_inventory_forecast_alerts:"/api/product/forecast-alerts",get_product_freshness:"/api/product/freshness",get_product_logs:"/api/product/logs",adjust_product_stock:"/api/product/stock/adjust",convert_product_stock:"/api/product/stock/convert",get_weather_marketing_advice:"/api/ai/weather-advice",get_message_templates:"/api/settings/templates",save_message_templates:"/api/settings/templates/save",reset_message_templates:"/api/settings/templates/reset",get_mobile_config:"/api/mobile/config",save_mobile_config:"/api/mobile/config/save",get_local_ip_command:"/api/mobile/local-ip",save_general_sales_batch:"/api/sales/batch-save",get_auto_backups:"/api/backup/auto",run_daily_custom_backup:"/api/backup/run",restore_database:"/api/backup/restore",run_db_maintenance:"/api/backup/maintenance",cleanup_old_logs:"/api/backup/cleanup",get_internal_backup_path:"/api/backup/path/internal",get_external_backup_path:"/api/backup/path/external",save_external_backup_path:"/api/backup/path/external",get_backup_status:"/api/backup/status",get_backup_progress:"/api/backup/progress",cancel_backup_restore:"/api/backup/cancel",cleanup_old_backups:"/api/backup/cleanup-files",get_custom_presets:"/api/preset/list",apply_preset:"/api/preset/apply",save_current_as_preset:"/api/preset/save",delete_custom_preset:"/api/preset/delete",get_preset_data:"/api/preset/data",reset_database:"/api/preset/reset",save_general_sales_batch:"/api/sales/batch-save",search_customers_by_name:"/api/customer/search/name",search_customers_by_mobile:"/api/customer/search/mobile",get_customer_addresses:"/api/customers/addresses",get_customer_sales_on_date:"/api/sales/query/date",create_customer:"/api/customer/create",get_shipments_by_status:"/api/sales/shipments",update_sale_status:"/api/sales/update-status",complete_shipment:"/api/sales/complete-shipment",batch_sync_courier_statuses:"/api/sales/sync-courier",get_sales_claims:"/api/sales/claims",create_sales_claim:"/api/sales/claims/create",process_sales_claim:"/api/sales/claims/process",update_sales_claim:"/api/sales/claims/update",delete_sales_claim:"/api/sales/claims/delete",get_sale_detail:"/api/sales/detail",search_sales_by_any:"/api/sales/search",search_sales_all:"/api/sales/search-all",create_consultation:"/api/crm/consultations/create",search_events_by_name:"/api/event/list",get_sales_by_event_id_and_date_range:"/api/sales/special/list",save_special_sales_batch:"/api/sales/special/batch",get_daily_receipts:"/api/sales/daily",delete_sale:"/api/sales/delete",call_gemini_ai:"/api/ai/gemini",get_ai_demand_forecast:"/api/ai/forecast",get_customer:"/api/customer/get",get_product_sales_stats:"/api/finance/analysis/product-stats",get_product_monthly_analysis:"/api/finance/analysis/product-monthly",get_product_10yr_sales_stats:"/api/finance/analysis/product-trend",get_sales_by_region_analysis:"/api/finance/analysis/region-stats",get_profit_margin_analysis:"/api/finance/analysis/profit-margin",get_rfm_analysis:"/api/crm/rfm-analysis",get_membership_sales_analysis:"/api/finance/membership-sales",update_customer_level:"/api/crm/update-level",get_ai_behavior_strategy:"/api/ai/behavior",get_ai_repurchase_analysis:"/api/ai/repurchase",update_customer_memo_batch:"/api/crm/update-memo-batch",get_product_associations:"/api/crm/product-associations",get_ai_marketing_proposal:"/api/ai/marketing-proposal",get_ai_detailed_plan:"/api/ai/detailed-plan",fetch_naver_search:"/api/ai/naver-search",analyze_online_sentiment:"/api/ai/online-sentiment",get_claim_targets:"/api/crm/claim-targets",send_sms_simulation:"/api/crm/sms/send",create_experience_reservation:"/api/experience/reservations/create",get_experience_reservations:"/api/experience/reservations",update_experience_reservation:"/api/experience/reservations/update",delete_experience_reservation:"/api/experience/reservations/delete",update_experience_status:"/api/experience/reservations/status",update_experience_payment_status:"/api/experience/reservations/payment",get_schedules:"/api/schedule/list",create_schedule:"/api/schedule/create",update_schedule:"/api/schedule/update",delete_schedule:"/api/schedule/delete",delete_harvest_record:"/api/production/harvest/delete",delete_production_batch:"/api/production/batches/delete",delete_production_space:"/api/production/spaces/delete",delete_farming_log:"/api/production/logs/delete",get_customer_addresses:"/api/customer/addresses",get_customer_logs:"/api/customer/logs",update_customer:"/api/customer/update",delete_customer:"/api/customer/delete",reactivate_customer:"/api/customer/reactivate",get_customer_ai_insight:"/api/customer/ai-insight",create_customer_address:"/api/customer/address/create",update_customer_address:"/api/customer/address/update",delete_customer_address:"/api/customer/address/delete",set_default_address:"/api/customer/address/set-default",get_customer_sales:"/api/customer/sales",search_customer_batch:"/api/customer/batch/search",search_dormant_customers:"/api/customer/batch/dormant",delete_customers_batch:"/api/customer/batch/delete",reactivate_customers_batch:"/api/customer/batch/reactivate",get_best_customers:"/api/customer/best",update_customer_membership_batch:"/api/customer/batch/membership",get_consultations:"/api/crm/consultations",update_consultation:"/api/crm/consultations/update",delete_consultation:"/api/crm/consultations/delete",get_special_care:"/api/crm/special-care",get_ai_briefing:"/api/crm/ai/briefing",get_ai_summary:"/api/crm/ai/summary",get_ai_advisor:"/api/crm/ai/advisor",parse_business_card:"/api/ai/business-card",login:"/api/auth/login",get_auth_sessions:"/api/auth/sessions",revoke_auth_session:"/api/auth/sessions/revoke",get_security_status:"/api/auth/security-status",get_audit_logs:"/api/auth/audit-logs",get_auto_backups:"/api/backup/auto",run_daily_custom_backup:"/api/backup/run",restore_database:"/api/backup/restore",get_backup_status:"/api/backup/status",get_backup_path_internal:"/api/backup/path/internal",get_backup_path_external:"/api/backup/path/external",save_external_backup_path:"/api/backup/path/external",run_db_maintenance:"/api/backup/maintenance",cleanup_old_logs:"/api/backup/cleanup",cleanup_old_backups:"/api/backup/cleanup-files",cancel_backup_restore:"/api/backup/cancel"}[a];if(!r)return console.warn(`Bridge: No HTTP route defined for command "${a}". Falling back to mock/empty.`),null;const i=["save_farming_log","save_harvest_record","save_general_sales_batch","get_business_report_data","get_monthly_sales_by_cohort","get_daily_sales_stats_by_month","save_production_space","delete_production_space","save_production_batch","create_customer","create_product","create_sale","delete_sale","create_user","update_user","delete_user","adjust_product_stock","convert_product_stock","verify_admin_password","save_company_info","create_product","update_product","delete_product","discontinue_product","apply_preset","save_current_as_preset","delete_custom_preset","reset_database","create_experience_program","update_experience_program","delete_experience_program","create_experience_reservation","update_experience_reservation","delete_experience_reservation","update_experience_status","update_experience_payment_status","create_schedule","update_schedule","delete_schedule","delete_harvest_record","delete_production_batch","delete_production_space","delete_farming_log","save_sensor","save_sensor","delete_sensor","reset_message_templates","run_daily_custom_backup","restore_database","run_db_maintenance","cleanup_old_logs","save_external_backup_path","cancel_backup_restore","cleanup_old_backups","update_sale_status","complete_shipment","batch_sync_courier_statuses","create_sales_claim","process_sales_claim","update_sales_claim","delete_sales_claim","create_consultation","call_gemini_ai","get_ai_demand_forecast","update_customer_level","update_customer_memo_batch","get_ai_marketing_proposal","get_ai_detailed_plan","fetch_naver_search","analyze_online_sentiment","send_sms_simulation","push_sensor_data","login","verify_mobile_pin","create_event","update_event","delete_event","create_ledger_entry","update_ledger_entry","delete_ledger_entry","system_setup","save_vendor","delete_vendor","upload_media","logout","submit_tax_report","save_expense","delete_expense","save_purchase","delete_purchase","update_customer","delete_customer","reactivate_customer","create_customer_address","update_customer_address","delete_customer_address","set_default_address","delete_customers_batch","reactivate_customers_batch","update_customer_membership_batch","update_consultation","get_ai_advisor","parse_business_card","revoke_auth_session"].includes(a)||a.startsWith("save_");try{let l=localStorage.getItem("API_BASE_URL")||"";l.endsWith("/")&&(l=l.slice(0,-1));let o=l+r;if(!i){const g={};for(const w in e)e[w]!==null&&e[w]!==void 0&&(g[w]=e[w]);const b=new URLSearchParams({...g,_t:Date.now()});o=`${o}?${b.toString()}`}const c=localStorage.getItem("token"),d=e instanceof FormData,u={Accept:"application/json",...c?{Authorization:`Bearer ${c}`}:{}};i&&!d&&(u["Content-Type"]="application/json");const h=await fetch(o,{method:i?"POST":"GET",headers:u,...i?{body:d?e:JSON.stringify(e)}:{}});let f=null;const p=h.headers.get("content-type");if(p&&p.includes("application/json")&&(f=await h.json()),!h.ok)throw f&&f.error?new Error(f.error):new Error(`HTTP error! status: ${h.status}`);if(f&&typeof f=="object"){if(f.success===!1)throw new Error(f.error||"Unknown server error");if("data"in f){if(f.data===null||f.data===void 0)return{success:!0};if(Array.isArray(f.data)){const g=f.data;return g.success=!0,g}if(typeof f.data=="object"){const g=f.data;return g.success===void 0&&(g.success=!0),g}return f.data}return f}return{success:h.ok}}catch(l){console.error(`Bridge: Failed to fetch ${r}:`,l);const o=["login","verify_mobile_pin","verify_admin_password"],c=l instanceof TypeError||l.message.includes("fetch");if(i&&c&&!o.includes(a)){console.log(`Bridge: Offline detected. Queuing command "${a}" for later sync.`);try{return await $te(a,e),{success:!0,offline:!0,message:" :    ."}}catch(d){console.error("Bridge: Failed to add to offline queue:",d)}}throw l}}const Ke=ht,FS=({to:a,icon:e,label:t,end:r=!1})=>s.jsx("li",{children:s.jsxs(UA,{to:a,end:r,className:({isActive:n})=>`
                flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all duration-200 font-medium text-[0.95rem]
                ${n?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg shadow-indigo-500/30":"text-slate-400 hover:bg-white/5 hover:text-white"}
            `,children:[s.jsx("span",{className:"material-symbols-rounded text-[20px]",children:e}),s.jsx("span",{children:t})]})}),Ha=({to:a,icon:e,label:t})=>s.jsx("li",{children:s.jsxs(UA,{to:a,className:({isActive:r})=>`
                flex items-center gap-3 px-4 py-2 rounded-lg transition-all duration-200 text-sm
                ${r?"text-indigo-400 bg-indigo-500/10 font-bold":"text-slate-500 hover:text-slate-300 hover:bg-white/5"}
            `,children:[s.jsx("span",{className:"material-symbols-rounded text-[18px]",children:e}),s.jsx("span",{children:t})]})}),Cu=({id:a,icon:e,label:t,children:r,activePrefix:n,expanded:i,onToggle:l,currentPath:o})=>{const c=n?o.startsWith(n):o.startsWith("/"+a);return s.jsxs("li",{children:[s.jsxs("button",{onClick:()=>l(a),className:`
                    w-full flex items-center justify-between px-4 py-2.5 rounded-xl transition-all duration-200 font-medium text-[0.95rem] group
                    ${c&&!i?"text-indigo-400 bg-indigo-500/10":"text-slate-400 hover:bg-white/5 hover:text-white"}
                `,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:`material-symbols-rounded text-[20px] transition-colors ${c?"text-indigo-400":"text-slate-500 group-hover:text-slate-300"}`,children:e}),s.jsx("span",{children:t})]}),s.jsx("span",{className:`material-symbols-rounded text-[18px] transition-transform duration-300 ${i?"rotate-180":""}`,children:"expand_more"})]}),s.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${i?"max-h-[500px] opacity-100 mt-1":"max-h-0 opacity-0"}`,children:s.jsx("ul",{className:"pl-4 border-l border-slate-800 ml-6 space-y-1",children:r})})]})},Zte=()=>{const[a,e]=F.useState({}),[t,r]=F.useState(""),n=Pc(),l=(localStorage.getItem("uiMode")||"pro")==="lite";F.useEffect(()=>{const d=async()=>{try{const h=await Ke("get_company_info");h&&h.company_name&&r(h.company_name)}catch(h){console.error("Failed to load company name:",h)}};d();const u=()=>d();return window.addEventListener("company-info-changed",u),()=>window.removeEventListener("company-info-changed",u)},[]);const o=d=>{e(u=>u[d]?{...u,[d]:!1}:{[d]:!0})},c=d=>!!a[d];return s.jsxs("nav",{className:"w-72 h-screen bg-slate-950 border-r border-white/5 flex flex-col shrink-0 relative z-50",children:[s.jsx("div",{className:"p-8 pb-6",children:s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-white flex items-center justify-center shadow-lg shadow-indigo-500/10 overflow-hidden",children:s.jsx("img",{src:"/mushroom-app-icon.png",alt:"Logo",className:"w-8 h-8 object-contain"})}),s.jsx("h2",{className:"text-xl font-black tracking-tight text-white truncate",title:t,children:t})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-6 custom-scrollbar",children:s.jsxs("ul",{className:"space-y-1",children:[s.jsx(FS,{to:"/",icon:"dashboard",label:"",end:!0}),s.jsxs(Cu,{id:"sales",icon:"shopping_cart",label:" ",expanded:c("sales"),onToggle:o,currentPath:n.pathname,children:[s.jsx(Ha,{to:"/sales/reception",icon:"receipt_long",label:" "}),s.jsx(Ha,{to:"/sales/shipping",icon:"local_shipping",label:" "}),!l&&s.jsxs(s.Fragment,{children:[s.jsx(Ha,{to:"/sales/claims",icon:"assignment_return",label:"//"}),s.jsx(Ha,{to:"/sales/special",icon:"event_seat",label:"  "}),s.jsx(Ha,{to:"/sales/online-sync",icon:"sync_alt",label:"  "}),s.jsx(Ha,{to:"/sales/daily-receipts",icon:"history_edu",label:"  "}),s.jsx(Ha,{to:"/sales/daily",icon:"person_search",label:"  "})]})]}),s.jsxs(Cu,{id:"customer",icon:"group",label:" ",expanded:c("customer"),onToggle:o,currentPath:n.pathname,children:[s.jsx(Ha,{to:"/customer/register",icon:"person_add",label:" "}),s.jsx(Ha,{to:"/customer/edit",icon:"manage_accounts",label:"// "}),s.jsx(Ha,{to:"/sales/ledger",icon:"account_balance_wallet",label:"  "}),!l&&s.jsxs(s.Fragment,{children:[s.jsx(Ha,{to:"/customer/batch",icon:"domain",label:"  "}),s.jsx(Ha,{to:"/customer/consultation",icon:"support_agent",label:" (CRM)"}),s.jsx(Ha,{to:"/customer/best",icon:"grade",label:"  "}),s.jsx(Ha,{to:"/customer/special-care",icon:"priority_high",label:"  "})]})]}),s.jsxs(Cu,{id:"inventory_prod",icon:"potted_plant",label:"//",expanded:c("inventory_prod"),onToggle:o,currentPath:n.pathname,children:[s.jsx(Ha,{to:"/sales/stock",icon:"inventory_2",label:"/ "}),s.jsx(Ha,{to:"/production",icon:"verified",label:"GAP/HACCP "})]}),!l&&s.jsxs(s.Fragment,{children:[s.jsxs(Cu,{id:"finance",icon:"account_balance",label:"/ ",expanded:c("finance"),onToggle:o,currentPath:n.pathname,children:[s.jsx(Ha,{to:"/finance/purchase",icon:"shopping_bag",label:" /"}),s.jsx(Ha,{to:"/finance/expense",icon:"payments",label:"  "}),s.jsx(Ha,{to:"/finance/tax-report",icon:"request_quote",label:"/ "}),s.jsx(Ha,{to:"/finance/analysis",icon:"analytics",label:"/ "})]}),s.jsxs(Cu,{id:"intel",icon:"insights",label:" ",expanded:c("intel"),onToggle:o,currentPath:n.pathname,children:[s.jsx(Ha,{to:"/intel/sales",icon:"analytics",label:"  "}),s.jsx(Ha,{to:"/intel/customer",icon:"psychology",label:"AI   "}),s.jsx(Ha,{to:"/marketing/association",icon:"hub",label:"  "}),s.jsx(Ha,{to:"/marketing/orm",icon:"public",label:" AI  "}),s.jsx(Ha,{to:"/intel/region-analysis",icon:"map",label:"AI   "}),s.jsx(Ha,{to:"/product/sales",icon:"bar_chart",label:"   "}),s.jsx(Ha,{to:"/customer/sms",icon:"sms",label:"  "})]})]}),s.jsxs(Cu,{id:"experience",icon:"calendar_today",label:" ",activePrefix:"/exp",expanded:c("experience"),onToggle:o,currentPath:n.pathname,children:[s.jsx(Ha,{to:"/exp/reservation-entry",icon:"book_online",label:"  "}),s.jsx(Ha,{to:"/exp/reservation-status",icon:"event_note",label:"  "})]}),s.jsx(FS,{to:"/schedule",icon:"calendar_month",label:" "}),localStorage.getItem("userRole")==="admin"&&s.jsxs(s.Fragment,{children:[s.jsxs(Cu,{id:"base_data",icon:"database",label:"  ",expanded:c("base_data"),onToggle:o,currentPath:n.pathname,children:[s.jsx(Ha,{to:"/settings/company-info",icon:"business",label:"  "}),s.jsx(Ha,{to:"/settings/user-list",icon:"manage_accounts",label:" "}),s.jsx(Ha,{to:"/settings/product-list",icon:"inventory_2",label:"/ "}),s.jsx(Ha,{to:"/settings/vendor-mgmt",icon:"factory",label:"/ "}),s.jsx(Ha,{to:"/settings/event-mgmt",icon:"fmd_good",label:"() "}),s.jsx(Ha,{to:"/exp/program-mgmt",icon:"settings_applications",label:"  "}),s.jsx(Ha,{to:"/settings/template-mgmt",icon:"chat_bubble",label:" "})]}),s.jsxs(Cu,{id:"settings",icon:"settings",label:"  ",expanded:c("settings"),onToggle:o,currentPath:n.pathname,children:[s.jsxs("div",{className:"px-4 py-2 mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"w-1 h-3 bg-rose-500/50 rounded-full"}),s.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"   "})]}),s.jsx(Ha,{to:"/settings/security",icon:"security",label:"  "}),s.jsx(Ha,{to:"/settings/sessions",icon:"devices",label:"  "}),s.jsx(Ha,{to:"/settings/audit-logs",icon:"history",label:"  "}),s.jsx(Ha,{to:"/settings/sms-logs",icon:"sms",label:"SMS  "}),s.jsx(Ha,{to:"/settings/backup",icon:"backup",label:"   "}),!l&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-4 py-2 mt-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-1 h-3 bg-emerald-500/50 rounded-full"}),s.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"   "})]}),s.jsx(Ha,{to:"/settings/api-keys",icon:"api",label:"  "}),s.jsx(Ha,{to:"/settings/iot",icon:"router",label:"IoT  "}),s.jsx(Ha,{to:"/settings/mobile-sync",icon:"smartphone",label:"  "}),s.jsx(Ha,{to:"/settings/db-reset",icon:"delete_forever",label:" /"})]})]})]}),s.jsx(FS,{to:"/manual",icon:"help",label:" "})]})})]})};var Kte=Object.defineProperty,i2=Object.getOwnPropertySymbols,jH=Object.prototype.hasOwnProperty,SH=Object.prototype.propertyIsEnumerable,O8=(a,e,t)=>e in a?Kte(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,VC=(a,e)=>{for(var t in e||(e={}))jH.call(e,t)&&O8(a,t,e[t]);if(i2)for(var t of i2(e))SH.call(e,t)&&O8(a,t,e[t]);return a},HC=(a,e)=>{var t={};for(var r in a)jH.call(a,r)&&e.indexOf(r)<0&&(t[r]=a[r]);if(a!=null&&i2)for(var r of i2(a))e.indexOf(r)<0&&SH.call(a,r)&&(t[r]=a[r]);return t};var p0;(a=>{const e=class hr{constructor(c,d,u,h){if(this.version=c,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],c<hr.MIN_VERSION||c>hr.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let f=[];for(let g=0;g<this.size;g++)f.push(!1);for(let g=0;g<this.size;g++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const p=this.addEccAndInterleave(u);if(this.drawCodewords(p),h==-1){let g=1e9;for(let b=0;b<8;b++){this.applyMask(b),this.drawFormatBits(b);const w=this.getPenaltyScore();w<g&&(h=b,g=w),this.applyMask(b)}}n(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(c,d){const u=a.QrSegment.makeSegments(c);return hr.encodeSegments(u,d)}static encodeBinary(c,d){const u=a.QrSegment.makeBytes(c);return hr.encodeSegments([u],d)}static encodeSegments(c,d,u=1,h=40,f=-1,p=!0){if(!(hr.MIN_VERSION<=u&&u<=h&&h<=hr.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let g,b;for(g=u;;g++){const T=hr.getNumDataCodewords(g,d)*8,E=l.getTotalBits(c,g);if(E<=T){b=E;break}if(g>=h)throw new RangeError("Data too long")}for(const T of[hr.Ecc.MEDIUM,hr.Ecc.QUARTILE,hr.Ecc.HIGH])p&&b<=hr.getNumDataCodewords(g,T)*8&&(d=T);let w=[];for(const T of c){t(T.mode.modeBits,4,w),t(T.numChars,T.mode.numCharCountBits(g),w);for(const E of T.getData())w.push(E)}n(w.length==b);const j=hr.getNumDataCodewords(g,d)*8;n(w.length<=j),t(0,Math.min(4,j-w.length),w),t(0,(8-w.length%8)%8,w),n(w.length%8==0);for(let T=236;w.length<j;T^=253)t(T,8,w);let k=[];for(;k.length*8<w.length;)k.push(0);return w.forEach((T,E)=>k[E>>>3]|=T<<7-(E&7)),new hr(g,d,k,f)}getModule(c,d){return 0<=c&&c<this.size&&0<=d&&d<this.size&&this.modules[d][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),d=c.length;for(let u=0;u<d;u++)for(let h=0;h<d;h++)u==0&&h==0||u==0&&h==d-1||u==d-1&&h==0||this.drawAlignmentPattern(c[u],c[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const d=this.errorCorrectionLevel.formatBits<<3|c;let u=d;for(let f=0;f<10;f++)u=u<<1^(u>>>9)*1335;const h=(d<<10|u)^21522;n(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,r(h,f));this.setFunctionModule(8,7,r(h,6)),this.setFunctionModule(8,8,r(h,7)),this.setFunctionModule(7,8,r(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,r(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,r(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,r(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let u=0;u<12;u++)c=c<<1^(c>>>11)*7973;const d=this.version<<12|c;n(d>>>18==0);for(let u=0;u<18;u++){const h=r(d,u),f=this.size-11+u%3,p=Math.floor(u/3);this.setFunctionModule(f,p,h),this.setFunctionModule(p,f,h)}}drawFinderPattern(c,d){for(let u=-4;u<=4;u++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(u)),p=c+h,g=d+u;0<=p&&p<this.size&&0<=g&&g<this.size&&this.setFunctionModule(p,g,f!=2&&f!=4)}}drawAlignmentPattern(c,d){for(let u=-2;u<=2;u++)for(let h=-2;h<=2;h++)this.setFunctionModule(c+h,d+u,Math.max(Math.abs(h),Math.abs(u))!=1)}setFunctionModule(c,d,u){this.modules[d][c]=u,this.isFunction[d][c]=!0}addEccAndInterleave(c){const d=this.version,u=this.errorCorrectionLevel;if(c.length!=hr.getNumDataCodewords(d,u))throw new RangeError("Invalid argument");const h=hr.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][d],f=hr.ECC_CODEWORDS_PER_BLOCK[u.ordinal][d],p=Math.floor(hr.getNumRawDataModules(d)/8),g=h-p%h,b=Math.floor(p/h);let w=[];const j=hr.reedSolomonComputeDivisor(f);for(let T=0,E=0;T<h;T++){let I=c.slice(E,E+b-f+(T<g?0:1));E+=I.length;const R=hr.reedSolomonComputeRemainder(I,j);T<g&&I.push(0),w.push(I.concat(R))}let k=[];for(let T=0;T<w[0].length;T++)w.forEach((E,I)=>{(T!=b-f||I>=g)&&k.push(E[T])});return n(k.length==p),k}drawCodewords(c){if(c.length!=Math.floor(hr.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const p=u-f,b=(u+1&2)==0?this.size-1-h:h;!this.isFunction[b][p]&&d<c.length*8&&(this.modules[b][p]=r(c[d>>>3],7-(d&7)),d++)}}n(d==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let u=0;u<this.size;u++){let h;switch(c){case 0:h=(u+d)%2==0;break;case 1:h=d%2==0;break;case 2:h=u%3==0;break;case 3:h=(u+d)%3==0;break;case 4:h=(Math.floor(u/3)+Math.floor(d/2))%2==0;break;case 5:h=u*d%2+u*d%3==0;break;case 6:h=(u*d%2+u*d%3)%2==0;break;case 7:h=((u+d)%2+u*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][u]&&h&&(this.modules[d][u]=!this.modules[d][u])}}getPenaltyScore(){let c=0;for(let f=0;f<this.size;f++){let p=!1,g=0,b=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[f][w]==p?(g++,g==5?c+=hr.PENALTY_N1:g>5&&c++):(this.finderPenaltyAddHistory(g,b),p||(c+=this.finderPenaltyCountPatterns(b)*hr.PENALTY_N3),p=this.modules[f][w],g=1);c+=this.finderPenaltyTerminateAndCount(p,g,b)*hr.PENALTY_N3}for(let f=0;f<this.size;f++){let p=!1,g=0,b=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[w][f]==p?(g++,g==5?c+=hr.PENALTY_N1:g>5&&c++):(this.finderPenaltyAddHistory(g,b),p||(c+=this.finderPenaltyCountPatterns(b)*hr.PENALTY_N3),p=this.modules[w][f],g=1);c+=this.finderPenaltyTerminateAndCount(p,g,b)*hr.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let p=0;p<this.size-1;p++){const g=this.modules[f][p];g==this.modules[f][p+1]&&g==this.modules[f+1][p]&&g==this.modules[f+1][p+1]&&(c+=hr.PENALTY_N2)}let d=0;for(const f of this.modules)d=f.reduce((p,g)=>p+(g?1:0),d);const u=this.size*this.size,h=Math.ceil(Math.abs(d*20-u*10)/u)-1;return n(0<=h&&h<=9),c+=h*hr.PENALTY_N4,n(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let u=[6];for(let h=this.size-7;u.length<c;h-=d)u.splice(1,0,h);return u}}static getNumRawDataModules(c){if(c<hr.MIN_VERSION||c>hr.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*c+128)*c+64;if(c>=2){const u=Math.floor(c/7)+2;d-=(25*u-10)*u-55,c>=7&&(d-=36)}return n(208<=d&&d<=29648),d}static getNumDataCodewords(c,d){return Math.floor(hr.getNumRawDataModules(c)/8)-hr.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c]*hr.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let d=[];for(let h=0;h<c-1;h++)d.push(0);d.push(1);let u=1;for(let h=0;h<c;h++){for(let f=0;f<d.length;f++)d[f]=hr.reedSolomonMultiply(d[f],u),f+1<d.length&&(d[f]^=d[f+1]);u=hr.reedSolomonMultiply(u,2)}return d}static reedSolomonComputeRemainder(c,d){let u=d.map(h=>0);for(const h of c){const f=h^u.shift();u.push(0),d.forEach((p,g)=>u[g]^=hr.reedSolomonMultiply(p,f))}return u}static reedSolomonMultiply(c,d){if(c>>>8||d>>>8)throw new RangeError("Byte out of range");let u=0;for(let h=7;h>=0;h--)u=u<<1^(u>>>7)*285,u^=(d>>>h&1)*c;return n(u>>>8==0),u}finderPenaltyCountPatterns(c){const d=c[1];n(d<=this.size*3);const u=d>0&&c[2]==d&&c[3]==d*3&&c[4]==d&&c[5]==d;return(u&&c[0]>=d*4&&c[6]>=d?1:0)+(u&&c[6]>=d*4&&c[0]>=d?1:0)}finderPenaltyTerminateAndCount(c,d,u){return c&&(this.finderPenaltyAddHistory(d,u),d=0),d+=this.size,this.finderPenaltyAddHistory(d,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(c,d){d[0]==0&&(c+=this.size),d.pop(),d.unshift(c)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],a.QrCode=e;function t(o,c,d){if(c<0||c>31||o>>>c)throw new RangeError("Value out of range");for(let u=c-1;u>=0;u--)d.push(o>>>u&1)}function r(o,c){return(o>>>c&1)!=0}function n(o){if(!o)throw new Error("Assertion error")}const i=class In{constructor(c,d,u){if(this.mode=c,this.numChars=d,this.bitData=u,d<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(c){let d=[];for(const u of c)t(u,8,d);return new In(In.Mode.BYTE,c.length,d)}static makeNumeric(c){if(!In.isNumeric(c))throw new RangeError("String contains non-numeric characters");let d=[];for(let u=0;u<c.length;){const h=Math.min(c.length-u,3);t(parseInt(c.substring(u,u+h),10),h*3+1,d),u+=h}return new In(In.Mode.NUMERIC,c.length,d)}static makeAlphanumeric(c){if(!In.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],u;for(u=0;u+2<=c.length;u+=2){let h=In.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u))*45;h+=In.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u+1)),t(h,11,d)}return u<c.length&&t(In.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u)),6,d),new In(In.Mode.ALPHANUMERIC,c.length,d)}static makeSegments(c){return c==""?[]:In.isNumeric(c)?[In.makeNumeric(c)]:In.isAlphanumeric(c)?[In.makeAlphanumeric(c)]:[In.makeBytes(In.toUtf8ByteArray(c))]}static makeEci(c){let d=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)t(c,8,d);else if(c<16384)t(2,2,d),t(c,14,d);else if(c<1e6)t(6,3,d),t(c,21,d);else throw new RangeError("ECI assignment value out of range");return new In(In.Mode.ECI,0,d)}static isNumeric(c){return In.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return In.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,d){let u=0;for(const h of c){const f=h.mode.numCharCountBits(d);if(h.numChars>=1<<f)return 1/0;u+=4+f+h.bitData.length}return u}static toUtf8ByteArray(c){c=encodeURI(c);let d=[];for(let u=0;u<c.length;u++)c.charAt(u)!="%"?d.push(c.charCodeAt(u)):(d.push(parseInt(c.substring(u+1,u+3),16)),u+=2);return d}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let l=i;a.QrSegment=i})(p0||(p0={}));(a=>{(e=>{const t=class{constructor(n,i){this.ordinal=n,this.formatBits=i}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(a.QrCode||(a.QrCode={}))})(p0||(p0={}));(a=>{(e=>{const t=class{constructor(n,i){this.modeBits=n,this.numBitsCharCount=i}numCharCountBits(n){return this.numBitsCharCount[Math.floor((n+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(a.QrSegment||(a.QrSegment={}))})(p0||(p0={}));var Zp=p0;var Qte={L:Zp.QrCode.Ecc.LOW,M:Zp.QrCode.Ecc.MEDIUM,Q:Zp.QrCode.Ecc.QUARTILE,H:Zp.QrCode.Ecc.HIGH},kH=128,CH="L",AH="#FFFFFF",TH="#000000",MH=!1,EH=1,Jte=4,eae=0,tae=.1;function DH(a,e=0){const t=[];return a.forEach(function(r,n){let i=null;r.forEach(function(l,o){if(!l&&i!==null){t.push(`M${i+e} ${n+e}h${o-i}v1H${i+e}z`),i=null;return}if(o===r.length-1){if(!l)return;i===null?t.push(`M${o+e},${n+e} h1v1H${o+e}z`):t.push(`M${i+e},${n+e} h${o+1-i}v1H${i+e}z`);return}l&&i===null&&(i=o)})}),t.join("")}function IH(a,e){return a.slice().map((t,r)=>r<e.y||r>=e.y+e.h?t:t.map((n,i)=>i<e.x||i>=e.x+e.w?n:!1))}function aae(a,e,t,r){if(r==null)return null;const n=a.length+t*2,i=Math.floor(e*tae),l=n/e,o=(r.width||i)*l,c=(r.height||i)*l,d=r.x==null?a.length/2-o/2:r.x*l,u=r.y==null?a.length/2-c/2:r.y*l,h=r.opacity==null?1:r.opacity;let f=null;if(r.excavate){let g=Math.floor(d),b=Math.floor(u),w=Math.ceil(o+d-g),j=Math.ceil(c+u-b);f={x:g,y:b,w,h:j}}const p=r.crossOrigin;return{x:d,y:u,h:c,w:o,excavation:f,opacity:h,crossOrigin:p}}function rae(a,e){return e!=null?Math.max(Math.floor(e),0):a?Jte:eae}function RH({value:a,level:e,minVersion:t,includeMargin:r,marginSize:n,imageSettings:i,size:l,boostLevel:o}){let c=or.useMemo(()=>{const g=(Array.isArray(a)?a:[a]).reduce((b,w)=>(b.push(...Zp.QrSegment.makeSegments(w)),b),[]);return Zp.QrCode.encodeSegments(g,Qte[e],t,void 0,void 0,o)},[a,e,t,o]);const{cells:d,margin:u,numCells:h,calculatedImageSettings:f}=or.useMemo(()=>{let p=c.getModules();const g=rae(r,n),b=p.length+g*2,w=aae(p,l,g,i);return{cells:p,margin:g,numCells:b,calculatedImageSettings:w}},[c,l,i,r,n]);return{qrcode:c,margin:u,cells:d,numCells:h,calculatedImageSettings:f}}var nae=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),iae=or.forwardRef(function(e,t){const r=e,{value:n,size:i=kH,level:l=CH,bgColor:o=AH,fgColor:c=TH,includeMargin:d=MH,minVersion:u=EH,boostLevel:h,marginSize:f,imageSettings:p}=r,b=HC(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:w}=b,j=HC(b,["style"]),k=p?.src,T=or.useRef(null),E=or.useRef(null),I=or.useCallback(J=>{T.current=J,typeof t=="function"?t(J):t&&(t.current=J)},[t]),[R,P]=or.useState(!1),{margin:H,cells:G,numCells:X,calculatedImageSettings:U}=RH({value:n,level:l,minVersion:u,boostLevel:h,includeMargin:d,marginSize:f,imageSettings:p,size:i});or.useEffect(()=>{if(T.current!=null){const J=T.current,B=J.getContext("2d");if(!B)return;let W=G;const $=E.current,Q=U!=null&&$!==null&&$.complete&&$.naturalHeight!==0&&$.naturalWidth!==0;Q&&U.excavation!=null&&(W=IH(G,U.excavation));const ne=window.devicePixelRatio||1;J.height=J.width=i*ne;const re=i/X*ne;B.scale(re,re),B.fillStyle=o,B.fillRect(0,0,X,X),B.fillStyle=c,nae?B.fill(new Path2D(DH(W,H))):G.forEach(function(K,ae){K.forEach(function(ce,de){ce&&B.fillRect(de+H,ae+H,1,1)})}),U&&(B.globalAlpha=U.opacity),Q&&B.drawImage($,U.x+H,U.y+H,U.w,U.h)}}),or.useEffect(()=>{P(!1)},[k]);const te=VC({height:i,width:i},w);let Z=null;return k!=null&&(Z=or.createElement("img",{src:k,key:k,style:{display:"none"},onLoad:()=>{P(!0)},ref:E,crossOrigin:U?.crossOrigin})),or.createElement(or.Fragment,null,or.createElement("canvas",VC({style:te,height:i,width:i,ref:I,role:"img"},j)),Z)});iae.displayName="QRCodeCanvas";var vb=or.forwardRef(function(e,t){const r=e,{value:n,size:i=kH,level:l=CH,bgColor:o=AH,fgColor:c=TH,includeMargin:d=MH,minVersion:u=EH,boostLevel:h,title:f,marginSize:p,imageSettings:g}=r,b=HC(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:w,cells:j,numCells:k,calculatedImageSettings:T}=RH({value:n,level:l,minVersion:u,boostLevel:h,includeMargin:d,marginSize:p,imageSettings:g,size:i});let E=j,I=null;g!=null&&T!=null&&(T.excavation!=null&&(E=IH(j,T.excavation)),I=or.createElement("image",{href:g.src,height:T.h,width:T.w,x:T.x+w,y:T.y+w,preserveAspectRatio:"none",opacity:T.opacity,crossOrigin:T.crossOrigin}));const R=DH(E,w);return or.createElement("svg",VC({height:i,width:i,viewBox:`0 0 ${k} ${k}`,ref:t,role:"img"},b),!!f&&or.createElement("title",null,f),or.createElement("path",{fill:o,d:`M0,0 h${k}v${k}H0z`,shapeRendering:"crispEdges"}),or.createElement("path",{fill:c,d:R,shapeRendering:"crispEdges"}),I)});vb.displayName="QRCodeSVG";var Aw={exports:{}},sae=Aw.exports,P8;function LH(){return P8||(P8=1,(function(a,e){(function(t,r){a.exports=r()})(sae,(function(){var t=1e3,r=6e4,n=36e5,i="millisecond",l="second",o="minute",c="hour",d="day",u="week",h="month",f="quarter",p="year",g="date",b="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,j=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,k={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(J){var B=["th","st","nd","rd"],W=J%100;return"["+J+(B[(W-20)%10]||B[W]||B[0])+"]"}},T=function(J,B,W){var $=String(J);return!$||$.length>=B?J:""+Array(B+1-$.length).join(W)+J},E={s:T,z:function(J){var B=-J.utcOffset(),W=Math.abs(B),$=Math.floor(W/60),Q=W%60;return(B<=0?"+":"-")+T($,2,"0")+":"+T(Q,2,"0")},m:function J(B,W){if(B.date()<W.date())return-J(W,B);var $=12*(W.year()-B.year())+(W.month()-B.month()),Q=B.clone().add($,h),ne=W-Q<0,re=B.clone().add($+(ne?-1:1),h);return+(-($+(W-Q)/(ne?Q-re:re-Q))||0)},a:function(J){return J<0?Math.ceil(J)||0:Math.floor(J)},p:function(J){return{M:h,y:p,w:u,d,D:g,h:c,m:o,s:l,ms:i,Q:f}[J]||String(J||"").toLowerCase().replace(/s$/,"")},u:function(J){return J===void 0}},I="en",R={};R[I]=k;var P="$isDayjsObject",H=function(J){return J instanceof te||!(!J||!J[P])},G=function J(B,W,$){var Q;if(!B)return I;if(typeof B=="string"){var ne=B.toLowerCase();R[ne]&&(Q=ne),W&&(R[ne]=W,Q=ne);var re=B.split("-");if(!Q&&re.length>1)return J(re[0])}else{var K=B.name;R[K]=B,Q=K}return!$&&Q&&(I=Q),Q||!$&&I},X=function(J,B){if(H(J))return J.clone();var W=typeof B=="object"?B:{};return W.date=J,W.args=arguments,new te(W)},U=E;U.l=G,U.i=H,U.w=function(J,B){return X(J,{locale:B.$L,utc:B.$u,x:B.$x,$offset:B.$offset})};var te=(function(){function J(W){this.$L=G(W.locale,null,!0),this.parse(W),this.$x=this.$x||W.x||{},this[P]=!0}var B=J.prototype;return B.parse=function(W){this.$d=(function($){var Q=$.date,ne=$.utc;if(Q===null)return new Date(NaN);if(U.u(Q))return new Date;if(Q instanceof Date)return new Date(Q);if(typeof Q=="string"&&!/Z$/i.test(Q)){var re=Q.match(w);if(re){var K=re[2]-1||0,ae=(re[7]||"0").substring(0,3);return ne?new Date(Date.UTC(re[1],K,re[3]||1,re[4]||0,re[5]||0,re[6]||0,ae)):new Date(re[1],K,re[3]||1,re[4]||0,re[5]||0,re[6]||0,ae)}}return new Date(Q)})(W),this.init()},B.init=function(){var W=this.$d;this.$y=W.getFullYear(),this.$M=W.getMonth(),this.$D=W.getDate(),this.$W=W.getDay(),this.$H=W.getHours(),this.$m=W.getMinutes(),this.$s=W.getSeconds(),this.$ms=W.getMilliseconds()},B.$utils=function(){return U},B.isValid=function(){return this.$d.toString()!==b},B.isSame=function(W,$){var Q=X(W);return this.startOf($)<=Q&&Q<=this.endOf($)},B.isAfter=function(W,$){return X(W)<this.startOf($)},B.isBefore=function(W,$){return this.endOf($)<X(W)},B.$g=function(W,$,Q){return U.u(W)?this[$]:this.set(Q,W)},B.unix=function(){return Math.floor(this.valueOf()/1e3)},B.valueOf=function(){return this.$d.getTime()},B.startOf=function(W,$){var Q=this,ne=!!U.u($)||$,re=U.p(W),K=function(ke,Le){var Ne=U.w(Q.$u?Date.UTC(Q.$y,Le,ke):new Date(Q.$y,Le,ke),Q);return ne?Ne:Ne.endOf(d)},ae=function(ke,Le){return U.w(Q.toDate()[ke].apply(Q.toDate("s"),(ne?[0,0,0,0]:[23,59,59,999]).slice(Le)),Q)},ce=this.$W,de=this.$M,he=this.$D,pe="set"+(this.$u?"UTC":"");switch(re){case p:return ne?K(1,0):K(31,11);case h:return ne?K(1,de):K(0,de+1);case u:var Re=this.$locale().weekStart||0,Te=(ce<Re?ce+7:ce)-Re;return K(ne?he-Te:he+(6-Te),de);case d:case g:return ae(pe+"Hours",0);case c:return ae(pe+"Minutes",1);case o:return ae(pe+"Seconds",2);case l:return ae(pe+"Milliseconds",3);default:return this.clone()}},B.endOf=function(W){return this.startOf(W,!1)},B.$set=function(W,$){var Q,ne=U.p(W),re="set"+(this.$u?"UTC":""),K=(Q={},Q[d]=re+"Date",Q[g]=re+"Date",Q[h]=re+"Month",Q[p]=re+"FullYear",Q[c]=re+"Hours",Q[o]=re+"Minutes",Q[l]=re+"Seconds",Q[i]=re+"Milliseconds",Q)[ne],ae=ne===d?this.$D+($-this.$W):$;if(ne===h||ne===p){var ce=this.clone().set(g,1);ce.$d[K](ae),ce.init(),this.$d=ce.set(g,Math.min(this.$D,ce.daysInMonth())).$d}else K&&this.$d[K](ae);return this.init(),this},B.set=function(W,$){return this.clone().$set(W,$)},B.get=function(W){return this[U.p(W)]()},B.add=function(W,$){var Q,ne=this;W=Number(W);var re=U.p($),K=function(de){var he=X(ne);return U.w(he.date(he.date()+Math.round(de*W)),ne)};if(re===h)return this.set(h,this.$M+W);if(re===p)return this.set(p,this.$y+W);if(re===d)return K(1);if(re===u)return K(7);var ae=(Q={},Q[o]=r,Q[c]=n,Q[l]=t,Q)[re]||1,ce=this.$d.getTime()+W*ae;return U.w(ce,this)},B.subtract=function(W,$){return this.add(-1*W,$)},B.format=function(W){var $=this,Q=this.$locale();if(!this.isValid())return Q.invalidDate||b;var ne=W||"YYYY-MM-DDTHH:mm:ssZ",re=U.z(this),K=this.$H,ae=this.$m,ce=this.$M,de=Q.weekdays,he=Q.months,pe=Q.meridiem,Re=function(Le,Ne,_e,Oe){return Le&&(Le[Ne]||Le($,ne))||_e[Ne].slice(0,Oe)},Te=function(Le){return U.s(K%12||12,Le,"0")},ke=pe||function(Le,Ne,_e){var Oe=Le<12?"AM":"PM";return _e?Oe.toLowerCase():Oe};return ne.replace(j,(function(Le,Ne){return Ne||(function(_e){switch(_e){case"YY":return String($.$y).slice(-2);case"YYYY":return U.s($.$y,4,"0");case"M":return ce+1;case"MM":return U.s(ce+1,2,"0");case"MMM":return Re(Q.monthsShort,ce,he,3);case"MMMM":return Re(he,ce);case"D":return $.$D;case"DD":return U.s($.$D,2,"0");case"d":return String($.$W);case"dd":return Re(Q.weekdaysMin,$.$W,de,2);case"ddd":return Re(Q.weekdaysShort,$.$W,de,3);case"dddd":return de[$.$W];case"H":return String(K);case"HH":return U.s(K,2,"0");case"h":return Te(1);case"hh":return Te(2);case"a":return ke(K,ae,!0);case"A":return ke(K,ae,!1);case"m":return String(ae);case"mm":return U.s(ae,2,"0");case"s":return String($.$s);case"ss":return U.s($.$s,2,"0");case"SSS":return U.s($.$ms,3,"0");case"Z":return re}return null})(Le)||re.replace(":","")}))},B.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},B.diff=function(W,$,Q){var ne,re=this,K=U.p($),ae=X(W),ce=(ae.utcOffset()-this.utcOffset())*r,de=this-ae,he=function(){return U.m(re,ae)};switch(K){case p:ne=he()/12;break;case h:ne=he();break;case f:ne=he()/3;break;case u:ne=(de-ce)/6048e5;break;case d:ne=(de-ce)/864e5;break;case c:ne=de/n;break;case o:ne=de/r;break;case l:ne=de/t;break;default:ne=de}return Q?ne:U.a(ne)},B.daysInMonth=function(){return this.endOf(h).$D},B.$locale=function(){return R[this.$L]},B.locale=function(W,$){if(!W)return this.$L;var Q=this.clone(),ne=G(W,$,!0);return ne&&(Q.$L=ne),Q},B.clone=function(){return U.w(this.$d,this)},B.toDate=function(){return new Date(this.valueOf())},B.toJSON=function(){return this.isValid()?this.toISOString():null},B.toISOString=function(){return this.$d.toISOString()},B.toString=function(){return this.$d.toUTCString()},J})(),Z=te.prototype;return X.prototype=Z,[["$ms",i],["$s",l],["$m",o],["$H",c],["$W",d],["$M",h],["$y",p],["$D",g]].forEach((function(J){Z[J[1]]=function(B){return this.$g(B,J[0],J[1])}})),X.extend=function(J,B){return J.$i||(J(B,te,X),J.$i=!0),X},X.locale=G,X.isDayjs=H,X.unix=function(J){return X(1e3*J)},X.en=R[I],X.Ls=R,X.p={},X}))})(Aw)),Aw.exports}var lae=LH();const Wt=EA(lae),oo=(a,e=3e3)=>{const t=document.getElementById("print-mount-point");if(!t){console.error(" Print mount point not found."),window.print();return}const r=document.documentElement,n=window.__MYCELIUM_MOBILE__,i=r.style.backgroundColor,l=r.style.colorScheme,o=document.querySelector('meta[name="color-scheme"]'),c=document.createElement("style");c.id="print-enforcer",c.textContent=`
        @media print {
            html, body { background: white !important; margin: 0; padding: 0; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
            #root, #app-root, .tauri-drag-region, .no-print { display: none !important; }
            #print-mount-point { 
                display: block !important; 
                position: absolute !important; 
                top: 0 !important; 
                left: 0 !important; 
                width: 100% !important; 
                min-height: 100vh !important;
                z-index: 99999 !important; 
                background: white !important;
                visibility: visible !important;
            }
            #print-mount-point * { visibility: visible !important; }
        }
    `,document.head.appendChild(c),t.innerHTML=a;const d=u=>{u.style&&u.style.display==="none"&&(u.style.display=""),u.children&&Array.from(u.children).forEach(d)};d(t),r.classList.add("printing-active"),t.classList.remove("hidden"),setTimeout(()=>{window.print(),setTimeout(()=>{c.parentNode&&c.parentNode.removeChild(c),t.innerHTML="",t.classList.add("hidden"),r.classList.remove("printing-active"),r.style.backgroundColor=i,r.style.colorScheme=l,o&&(o.content=n?"light":"dark")},1e3)},1e3)},OH=(a,e)=>{let t=e;typeof e=="string"&&e.includes("===")&&(t=e.split("===").map((n,i)=>`
            <div class="report-section ${i===0?"first":""}">
                ${n.trim().replace(/\n/g,"<br/>")}
            </div>
        `).join(""));const r=`
        <div class="print-container" style="background: white !important; color: #1e293b !important; padding: 20px;">
            <style>
                @page { size: A4; margin: 15mm; }
                .print-container { font-family: 'Pretendard', 'Inter', sans-serif; line-height: 1.6; }
                .print-header { text-align: center; margin-bottom: 40px; border-bottom: 2px solid #334155; padding-bottom: 20px; }
                .print-header h1 { margin: 0; font-size: 28px; font-weight: 800; color: #0f172a !important; }
                .print-header .date { font-size: 11px; color: #64748b !important; margin-top: 8px; font-weight: bold; }
                .content { font-size: 14px; white-space: pre-wrap; font-weight: 500; color: #1e293b !important; }
                .report-section { margin-bottom: 25px; padding: 15px; background: #f8fafc !important; border-radius: 12px; border: 1px solid #e2e8f0 !important; }
                .report-section.first { border-left: 5px solid #6366f1 !important; }
                .footer { margin-top: 50px; text-align: center; font-size: 10px; color: #94a3b8 !important; border-top: 1px solid #f1f5f9 !important; padding-top: 20px; }
                
                @media print {
                    @page { margin: 15mm; }
                    html, body { 
                        background: white !important; 
                        color: #1e293b !important;
                        color-scheme: light !important;
                        -webkit-print-color-adjust: exact;
                        print-color-adjust: exact;
                    }
                    #root, #app-root { display: none !important; }
                    .print-container { background: white !important; width: 100% !important; margin: 0 !important; }
                    .report-section { background: #f8fafc !important; -webkit-print-color-adjust: exact; }
                }
            </style>
            <div class="print-header">
                <h1>${a}</h1>
                <div class="date">REPORTED ON ${Wt().format("YYYY. MM. DD. HH:mm")}</div>
            </div>
            <div class="content">${t}</div>
            <div class="footer">  Mycelium Intelligence System    .</div>
        </div>
    `;oo(r)},UC="mycelium-trigger-print",P_=(a,e)=>{console.log("[Jenny-Printer]  Isolated print requested:",a),window.dispatchEvent(new CustomEvent(UC,{detail:{type:a,data:e}}))};window.__MYCELIUM_PRINT__=(a,e)=>{P_(a,e)};const z8=()=>{const[a,e]=F.useState(null),t=F.useRef(null);F.useEffect(()=>{const n=i=>{const{type:l,data:o}=i.detail;e({type:l,data:o})};return window.addEventListener(UC,n),console.log("[Jenny-Printer]  Isolated Sandbox Printer Mounted"),()=>window.removeEventListener(UC,n)},[]),F.useEffect(()=>{if(a){const n=setTimeout(()=>{try{r(a)}catch(i){console.error("[Jenny-Printer]  Print Failed:",i)}finally{e(null)}},300);return()=>clearTimeout(n)}},[a]);const r=n=>{const i=t.current?.innerHTML||"";console.log("[Jenny-Printer]  Building Isolated Print Sandbox...");const l=`
                <style>
                    @page {
                        size: 40mm 30mm;
                        margin: 0;
                    }
                    .label-print-wrapper {
                        margin: 0;
                        padding: 0;
                        width: 40mm;
                        height: 30mm;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        overflow: hidden;
                        font-family: 'Inter', system-ui, sans-serif;
                    }
                    .label-container {
                        width: 38mm;
                        height: 28mm;
                        display: flex;
                        align-items: center;
                        gap: 2mm;
                        padding: 1mm;
                        box-sizing: border-box;
                    }
                    .qr-section {
                        width: 16mm;
                        height: 16mm;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    }
                    .qr-section svg {
                        width: 100% !important;
                        height: 100% !important;
                    }
                    .data-section {
                        flex: 1;
                        display: flex;
                        flex-direction: column;
                        justify-content: center;
                        height: 100%;
                        padding-left: 1mm;
                    }
                    .data-row {
                        display: flex;
                        align-items: center;
                        padding: 3px 0;
                        font-size: 11px;
                        font-weight: 800;
                        color: #000;
                        line-height: 1.1;
                    }
                    .data-label {
                        white-space: nowrap;
                        margin-right: 4px;
                        color: #000;
                    }
                    .data-value {
                        word-break: break-all;
                        overflow: hidden;
                        display: -webkit-box;
                        -webkit-line-clamp: 2;
                        -webkit-box-orient: vertical;
                        color: #000;
                    }
                </style>
                <div class="label-print-wrapper">
                    <div class="label-container">
                        <div class="qr-section">
                            ${i}
                        </div>
                        <div class="data-section">
                            <div class="data-row">
                                <span class="data-label">&nbsp;&nbsp;&nbsp;:</span>
                                <span class="data-value">${n.data.title||"-"}</span>
                            </div>
                            ${n.type==="product"?`
                            <div class="data-row">
                                <span class="data-label">&nbsp;&nbsp;&nbsp;:</span>
                                <span class="data-value">${n.data.spec||"-"}</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">&nbsp;&nbsp;&nbsp;:</span>
                                <span class="data-value">${(n.data.price||0).toLocaleString()}</span>
                            </div>
                            `:`
                            <div class="data-row">
                                <span class="data-label">&nbsp;&nbsp;&nbsp;:</span>
                                <span class="data-value">${n.data.date||"-"}</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">&nbsp;&nbsp;&nbsp;:</span>
                                <span class="data-value">${n.data.weight||"-"}kg</span>
                            </div>
                            `}
                        </div>
                    </div>
                </div>
        `;oo(l)};return s.jsx("div",{id:"isolated-qr-factory",style:{position:"fixed",left:"-9999px",top:"-9999px",visibility:"hidden",pointerEvents:"none"},children:s.jsx("div",{ref:t,children:a&&s.jsx(vb,{value:a.data.qrValue||"N/A",size:128,level:"H",includeMargin:!1})})})},oae=({isMobile:a})=>a?s.jsxs("div",{className:"fixed inset-0 bg-slate-50 flex flex-col overflow-hidden",children:[s.jsx("main",{className:"flex-1 w-full relative overflow-y-auto",children:s.jsx(xx,{})}),s.jsx(z8,{})]}):s.jsxs("div",{className:"flex h-screen w-screen overflow-hidden bg-slate-950",children:[s.jsx(Zte,{}),s.jsx("main",{className:"flex-1 relative overflow-hidden flex flex-col bg-slate-50",children:s.jsx("div",{className:"flex-1 relative min-h-0 h-full",children:s.jsx(xx,{})})}),s.jsx(z8,{})]}),B8=({onComplete:a})=>{const{showAlert:e}=wa(),[t,r]=F.useState("postgres"),[n,i]=F.useState(""),[l,o]=F.useState("localhost"),[c,d]=F.useState("5432"),[u,h]=F.useState("mycelium"),[f,p]=F.useState(""),[g,b]=F.useState(""),[w,j]=F.useState(!1),[k,T]=F.useState(!1),[E,I]=F.useState(!1),[R,P]=F.useState(1),H=()=>{const U="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+";let te="";for(let Z=0;Z<32;Z++)te+=U.charAt(Math.floor(Math.random()*U.length));b(te)},G=U=>{I(!0),P(U),setTimeout(()=>I(!1),500)};or.useEffect(()=>{H()},[]);const X=async U=>{if(U.preventDefault(),!(R<3||E||w)){j(!0);try{await Ke("system_setup",{dbUser:t,dbPass:n,dbHost:l,dbPort:c,dbName:u,geminiKey:f||null,jwtSecret:g||null}),await e(" ","  .      ."),T(!0),setTimeout(()=>{window.location.href="/"},3e3)}catch(te){console.error(te),await e(" ",te.message||"    .")}finally{j(!1)}}};return s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 animate-in fade-in duration-500",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-md"}),s.jsxs("div",{className:"w-full max-w-2xl bg-slate-900/90 backdrop-blur-3xl border border-slate-700/50 rounded-[48px] p-12 shadow-2xl relative z-10 animate-in zoom-in-95 duration-500 slide-in-from-bottom-4",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[400px] h-[400px] bg-indigo-500/20 blur-[100px] rounded-full pointer-events-none"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[400px] h-[400px] bg-purple-500/20 blur-[100px] rounded-full pointer-events-none"}),s.jsx("button",{onClick:async()=>{window.confirm("   ?")&&window.close()},className:"absolute top-8 right-8 w-10 h-10 rounded-xl bg-slate-800/50 border border-slate-700 text-slate-500 hover:text-rose-500 hover:bg-rose-500/10 hover:border-rose-500/20 transition-all flex items-center justify-center z-20",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"close"})}),s.jsxs("div",{className:"text-center mb-12 relative z-10",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-indigo-500/20 rotate-3 ring-4 ring-slate-900/50",children:s.jsx("span",{className:"material-symbols-rounded text-white text-4xl",children:"auto_fix_high"})}),s.jsx("h1",{className:"text-4xl font-black text-white mb-3 tracking-tight",children:"System Setup"}),s.jsx("p",{className:"text-slate-400 font-medium",children:"     ."})]}),s.jsx("div",{className:"flex gap-4 mb-10 justify-center relative z-10",children:[1,2,3].map(U=>s.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ${R>=U?"w-12 bg-indigo-500":"w-6 bg-slate-800"}`},U))}),k?s.jsxs("div",{className:"text-center py-10 animate-in zoom-in-95 duration-500 relative z-10",children:[s.jsx("div",{className:"w-24 h-24 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-8 text-green-500 border border-green-500/20",children:s.jsx("span",{className:"material-symbols-rounded text-6xl",children:"check_circle"})}),s.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:" !"}),s.jsxs("p",{className:"text-slate-400 mb-8 leading-relaxed",children:["    .",s.jsx("br",{}),"     **   **  ."]}),s.jsx("div",{className:"p-4 bg-indigo-500/10 rounded-2xl border border-indigo-500/20 mb-8",children:s.jsxs("p",{className:"text-indigo-400 text-sm font-bold flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded animate-spin text-lg",children:"sync"}),"    ..."]})})]}):s.jsx("div",{className:"relative z-10",children:R===1?s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-300",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:" "}),s.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"PostgreSQL    ."}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-bold text-slate-500 ml-1",children:" (Host)"}),s.jsx("input",{type:"text",value:l,onChange:U=>o(U.target.value),className:"w-full rounded-2xl px-5 py-3.5 outline-none focus:border-indigo-500 transition-all",style:{backgroundColor:"#020617",color:"#ffffff",border:"1px solid #334155"}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-bold text-slate-500 ml-1",children:" (Port)"}),s.jsx("input",{type:"text",value:c,onChange:U=>d(U.target.value),className:"w-full rounded-2xl px-5 py-3.5 outline-none focus:border-indigo-500 transition-all",style:{backgroundColor:"#020617",color:"#ffffff",border:"1px solid #334155"}})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx("label",{className:"text-xs font-bold text-slate-500 ml-1",children:"  (DB Name)"}),s.jsx("input",{type:"text",value:u,onChange:U=>h(U.target.value),className:"w-full rounded-2xl px-5 py-3.5 outline-none focus:border-indigo-500 transition-all",style:{backgroundColor:"#020617",color:"#ffffff",border:"1px solid #334155"},placeholder:": mycelium"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-bold text-slate-500 ml-1",children:" ID"}),s.jsx("input",{type:"text",value:t,onChange:U=>r(U.target.value),className:"w-full rounded-2xl px-5 py-3.5 outline-none focus:border-indigo-500 transition-all",style:{backgroundColor:"#020617",color:"#ffffff",border:"1px solid #334155"}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-bold text-slate-500 ml-1",children:""}),s.jsx("input",{type:"password",value:n,onChange:U=>i(U.target.value),onKeyDown:U=>U.key==="Enter"&&U.preventDefault(),className:"w-full rounded-2xl px-5 py-3.5 outline-none focus:border-indigo-500 transition-all",style:{backgroundColor:"#020617",color:"#ffffff",border:"1px solid #334155"},placeholder:""})]})]})]}),s.jsxs("button",{type:"button",disabled:E,onClick:()=>G(2),className:"w-full bg-white text-slate-950 font-black py-4 rounded-2xl hover:bg-slate-200 transition-all shadow-xl shadow-white/5 flex items-center justify-center gap-2 group disabled:opacity-50",children:["  ",s.jsx("span",{className:"material-symbols-rounded group-hover:translate-x-1 transition-transform",children:"arrow_forward"})]})]}):R===2?s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-300",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"  ()"}),s.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Gemini API   AI   ."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-bold text-slate-500 ml-1",children:"Gemini API Key"}),s.jsx("input",{type:"text",value:f,onChange:U=>p(U.target.value),onKeyDown:U=>U.key==="Enter"&&U.preventDefault(),className:"w-full rounded-2xl px-5 py-3.5 outline-none focus:border-indigo-500 transition-all",style:{backgroundColor:"#020617",color:"#ffffff",border:"1px solid #334155"},placeholder:" (  )"}),s.jsx("style",{children:`
                                        input:-webkit-autofill,
                                        input:-webkit-autofill:hover, 
                                        input:-webkit-autofill:focus, 
                                        input:-webkit-autofill:active {
                                            -webkit-box-shadow: 0 0 0 30px #020617 inset !important;
                                            -webkit-text-fill-color: white !important;
                                            caret-color: white !important;
                                        }
                                    `})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{type:"button",onClick:()=>G(1),className:"flex-1 bg-slate-800 text-white font-bold py-4 rounded-2xl hover:bg-slate-700 transition-all",children:""}),s.jsxs("button",{type:"button",disabled:E,onClick:()=>G(3),className:"flex-[2] bg-white text-slate-950 font-black py-4 rounded-2xl hover:bg-slate-200 transition-all shadow-xl shadow-white/5 flex items-center justify-center gap-2 group disabled:opacity-50",children:["   ",s.jsx("span",{className:"material-symbols-rounded group-hover:translate-x-1 transition-transform",children:"arrow_forward"})]})]})]}):s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-300",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"  "}),s.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"      ."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-6 bg-[#020617] rounded-3xl border border-slate-700/50",children:[s.jsx("label",{htmlFor:"jwt-secret",className:"text-xs font-bold text-slate-500 mb-3 block",children:"JWT Authentication Secret"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("input",{id:"jwt-secret",type:"text",value:g,onChange:U=>b(U.target.value),onKeyDown:U=>U.key==="Enter"&&U.preventDefault(),className:"flex-1 bg-transparent border-none outline-none text-indigo-400 font-mono text-sm"}),s.jsx("button",{type:"button",onClick:H,className:"w-10 h-10 rounded-xl bg-slate-800 flex items-center justify-center text-slate-400 hover:text-white transition-all",title:"  ",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"refresh"})})]})]}),s.jsx("p",{className:"text-[10px] text-slate-400 px-2 leading-relaxed font-medium",children:"*      .           ."})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{type:"button",onClick:()=>G(2),className:"flex-1 bg-slate-800 text-white font-bold py-4 rounded-2xl hover:bg-slate-700 transition-all",children:""}),s.jsx("button",{type:"button",disabled:w||E,onClick:X,className:"flex-[2] bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-black py-4 rounded-2xl hover:brightness-110 active:scale-[0.98] transition-all shadow-xl shadow-indigo-500/20 flex items-center justify-center gap-2 disabled:opacity-50",children:w?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"material-symbols-rounded animate-spin",children:"sync"}),"  ..."]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"material-symbols-rounded",children:"rocket_launch"}),"   "]})})]})]})}),s.jsx("div",{className:"mt-12 pt-8 border-t border-slate-800/50 text-center relative z-10",children:s.jsx("p",{className:"text-[11px] text-slate-600 font-bold uppercase tracking-widest",children:" 2024 Mycelium  Enterprise Edition"})})]})]})},F8=({onLoginSuccess:a})=>{const[e,t]=F.useState(""),[r,n]=F.useState(""),[i,l]=F.useState(!1),[o,c]=F.useState(""),[d,u]=F.useState("");F.useEffect(()=>{(async()=>{try{const p=await Ke("get_company_info");p&&p.company_name&&u(p.company_name)}catch(p){console.error("Failed to load company name:",p)}})()},[]);const h=async f=>{if(f.preventDefault(),c(""),!e||!r){c("   .");return}l(!0);try{const p=await Ke("login",{username:e.trim(),password:r.trim()});p.success?(localStorage.setItem("isLoggedIn","true"),localStorage.setItem("userId",p.user_id.toString()),localStorage.setItem("username",p.username),localStorage.setItem("userRole",p.role),localStorage.setItem("uiMode",p.ui_mode||"pro"),p.token&&localStorage.setItem("token",p.token),a?a():window.location.reload()):c(p.message||" .")}catch(p){console.error("Login error:",p),c(p.message||"    .")}finally{l(!1)}};return s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 animate-in fade-in duration-500",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-md"}),s.jsx("div",{style:{width:"100%",maxWidth:"440px",zIndex:10,position:"relative"},className:"animate-in zoom-in-95 duration-500 slide-in-from-bottom-4",children:s.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.7)",backdropFilter:"blur(24px)",WebkitBackdropFilter:"blur(24px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"40px",padding:"56px 48px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)",display:"flex",flexDirection:"column",position:"relative"},children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/20 blur-[50px] rounded-full pointer-events-none"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-purple-500/20 blur-[50px] rounded-full pointer-events-none"}),s.jsx("button",{type:"button",onClick:async()=>{window.confirm(" ( )?")&&window.close()},style:{position:"absolute",top:"24px",right:"24px",background:"#fff",border:"1px solid #e2e8f0",width:"40px",height:"40px",borderRadius:"12px",color:"#6366f1",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s",zIndex:200,boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},className:"hover:scale-110 active:scale-95",title:" ",children:s.jsx("span",{className:"material-symbols-rounded",style:{fontSize:"20px",fontWeight:"bold"},children:"close"})}),s.jsxs("div",{style:{textAlign:"center",marginBottom:"48px",position:"relative",zIndex:10},children:[s.jsx("div",{style:{width:"88px",height:"88px",background:"linear-gradient(135deg, #6366f1 0%, #a855f7 100%)",borderRadius:"28px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 28px",boxShadow:"0 20px 40px rgba(99, 102, 241, 0.3)",transform:"rotate(-5deg)"},children:s.jsx("span",{className:"material-symbols-rounded",style:{fontSize:"48px",color:"#fff"},children:"space_dashboard"})}),s.jsx("h1",{style:{fontSize:"32px",fontWeight:"900",color:"#fff",marginBottom:"12px",letterSpacing:"-0.02em"},children:d}),s.jsx("p",{style:{color:"#94a3b8",fontSize:"15px",fontWeight:"500"},children:"   "})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px",position:"relative",zIndex:10},children:[s.jsxs("div",{style:{position:"absolute",opacity:0,height:0,width:0,overflow:"hidden",zIndex:-1},children:[s.jsx("input",{type:"text",name:"fake_user",tabIndex:"-1"}),s.jsx("input",{type:"password",name:"fake_pass",tabIndex:"-1"})]}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("span",{className:"material-symbols-rounded",style:{position:"absolute",left:"20px",top:"50%",transform:"translateY(-50%)",color:"#64748b",fontSize:"22px"},children:"person"}),s.jsx("input",{type:"text",placeholder:"",value:e,onChange:f=>t(f.target.value),autoComplete:"off",style:{width:"100%",padding:"18px 20px 18px 60px",background:"#020617",border:"1px solid #334155",borderRadius:"20px",color:"#ffffff",fontSize:"16px",fontWeight:"500",outline:"none",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxSizing:"border-box"},className:"focus:border-indigo-500 transition-colors"})]}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("span",{className:"material-symbols-rounded",style:{position:"absolute",left:"20px",top:"50%",transform:"translateY(-50%)",color:"#64748b",fontSize:"22px"},children:"lock"}),s.jsx("input",{type:"text",placeholder:"",value:r,onChange:f=>n(f.target.value),onKeyDown:f=>{f.key==="Enter"&&h(f)},autoComplete:"new-password",style:{width:"100%",padding:"18px 20px 18px 60px",background:"#020617",border:"1px solid #334155",borderRadius:"20px",color:"#ffffff",fontSize:"16px",fontWeight:"500",outline:"none",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxSizing:"border-box",WebkitTextSecurity:"disc",textSecurity:"disc"},className:"focus:border-indigo-500 transition-colors"}),s.jsx("style",{children:`
                                input:-webkit-autofill,
                                input:-webkit-autofill:hover, 
                                input:-webkit-autofill:focus, 
                                input:-webkit-autofill:active {
                                    -webkit-box-shadow: 0 0 0 30px #020617 inset !important;
                                    -webkit-text-fill-color: white !important;
                                    caret-color: white !important;
                                }
                            `})]}),o&&s.jsx("div",{style:{padding:"14px 20px",background:"rgba(239, 68, 68, 0.12)",color:"#f87171",borderRadius:"16px",fontSize:"14px",fontWeight:"500",textAlign:"center",border:"1px solid rgba(239, 68, 68, 0.2)"},className:"animate-pulse",children:o}),s.jsx("button",{type:"button",onClick:h,disabled:i,style:{padding:"18px",background:"linear-gradient(135deg, #6366f1 0%, #a855f7 100%)",border:"none",borderRadius:"20px",color:"#fff",fontWeight:"800",fontSize:"17px",cursor:"pointer",marginTop:"16px",boxShadow:"0 12px 24px rgba(99, 102, 241, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},className:"hover:translate-y-[-2px] hover:shadow-indigo-500/50 active:translate-y-[0px] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:i?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"material-symbols-rounded animate-spin text-xl",children:"sync"}),s.jsx("span",{children:"  ..."})]}):s.jsx("span",{children:" "})})]}),s.jsxs("div",{style:{marginTop:"48px",textAlign:"center",fontSize:"14px",color:"#64748b",fontWeight:"500"},children:[s.jsx("p",{style:{opacity:.8},children:"   "}),s.jsxs("p",{style:{marginTop:"12px",opacity:.5,fontSize:"12px",letterSpacing:"0.05em"},children:[" 2024 ",d.toUpperCase(),"."]})]})]})})]})};const PH=(...a)=>a.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();const cae=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const dae=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());const V8=a=>{const e=dae(a);return e.charAt(0).toUpperCase()+e.slice(1)};var uae={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const hae=a=>{for(const e in a)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const fae=F.forwardRef(({color:a="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:n="",children:i,iconNode:l,...o},c)=>F.createElement("svg",{ref:c,...uae,width:e,height:e,stroke:a,strokeWidth:r?Number(t)*24/Number(e):t,className:PH("lucide",n),...!i&&!hae(o)&&{"aria-hidden":"true"},...o},[...l.map(([d,u])=>F.createElement(d,u)),...Array.isArray(i)?i:[i]]));const jt=(a,e)=>{const t=F.forwardRef(({className:r,...n},i)=>F.createElement(fae,{ref:i,iconNode:e,className:PH(`lucide-${cae(V8(a))}`,`lucide-${a}`,r),...n}));return t.displayName=V8(a),t};const pae=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],wv=jt("activity",pae);const xae=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],mae=jt("archive",xae);const gae=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],z_=jt("arrow-right",gae);const vae=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],H8=jt("arrow-up-right",vae);const bae=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],VS=jt("book-open",bae);const yae=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],zH=jt("box",yae);const wae=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],_v=jt("boxes",wae);const _ae=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],U8=jt("brain-circuit",_ae);const Nae=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],jae=jt("building-2",Nae);const Sae=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],G8=jt("calculator",Sae);const kae=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],BH=jt("calendar-days",kae);const Cae=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Eo=jt("calendar",Cae);const Aae=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],GC=jt("camera",Aae);const Tae=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],Mae=jt("chef-hat",Tae);const Eae=[["path",{d:"M2 17a5 5 0 0 0 10 0c0-2.76-2.5-5-5-3-2.5-2-5 .24-5 3Z",key:"cvxqlc"}],["path",{d:"M12 17a5 5 0 0 0 10 0c0-2.76-2.5-5-5-3-2.5-2-5 .24-5 3Z",key:"1ostrc"}],["path",{d:"M7 14c3.22-2.91 4.29-8.75 5-12 1.66 2.38 4.94 9 5 12",key:"hqx58h"}],["path",{d:"M22 9c-4.29 0-7.14-2.33-10-7 5.71 0 10 4.67 10 7Z",key:"eykp1o"}]],W8=jt("cherry",Eae);const Dae=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],WA=jt("chevron-down",Dae);const Iae=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Rae=jt("chevron-left",Iae);const Lae=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],s2=jt("chevron-right",Lae);const Oae=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Pae=jt("chevron-up",Oae);const zae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],bb=jt("circle-alert",zae);const Bae=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],YA=jt("circle-check-big",Bae);const Fae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],di=jt("circle-check",Fae);const Vae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Hae=jt("circle-plus",Vae);const Uae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Y8=jt("circle-question-mark",Uae);const Gae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Wae=jt("circle-x",Gae);const Yae=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],$ae=jt("clipboard-check",Yae);const qae=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],xh=jt("clipboard-list",qae);const Xae=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],mh=jt("clock",Xae);const Zae=[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]],Kae=jt("cloud-sun",Zae);const Qae=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],WC=jt("cpu",Qae);const Jae=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],YC=jt("credit-card",Jae);const ere=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],wd=jt("database",ere);const tre=[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]],are=jt("delete",tre);const rre=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],FH=jt("download",rre);const nre=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],ire=jt("droplet",nre);const sre=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],x0=jt("droplets",sre);const lre=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Df=jt("external-link",lre);const ore=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Au=jt("eye-off",ore);const cre=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cc=jt("eye",cre);const dre=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],$A=jt("file-text",dre);const ure=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],B_=jt("flask-conical",ure);const hre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],qA=jt("globe",hre);const fre=[["path",{d:"M22 5V2l-5.89 5.89",key:"1eenpo"}],["circle",{cx:"16.6",cy:"15.89",r:"3",key:"xjtalx"}],["circle",{cx:"8.11",cy:"7.4",r:"3",key:"u2fv6i"}],["circle",{cx:"12.35",cy:"11.65",r:"3",key:"i6i8g7"}],["circle",{cx:"13.91",cy:"5.85",r:"3",key:"6ye0dv"}],["circle",{cx:"18.15",cy:"10.09",r:"3",key:"snx9no"}],["circle",{cx:"6.56",cy:"13.2",r:"3",key:"17x4xg"}],["circle",{cx:"10.8",cy:"17.44",r:"3",key:"1hogw9"}],["circle",{cx:"5",cy:"19",r:"3",key:"1sn6vo"}]],$8=jt("grape",fre);const pre=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],xre=jt("hard-drive",pre);const mre=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],no=jt("history",mre);const gre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],yb=jt("info",gre);const vre=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],bre=jt("key",vre);const yre=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],q8=jt("layers",yre);const wre=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],l2=jt("layout-dashboard",wre);const _re=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Nv=jt("loader-circle",_re);const Nre=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ii=jt("lock",Nre);const jre=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Sre=jt("log-out",jre);const kre=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Cre=jt("mail",kre);const Are=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],F_=jt("map-pin",Are);const Tre=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Mre=jt("maximize-2",Tre);const Ere=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],Dre=jt("megaphone",Ere);const Ire=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],jv=jt("message-square",Ire);const Rre=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],$C=jt("monitor",Rre);const Lre=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],_c=jt("package",Lre);const Ore=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],V_=jt("pen",Ore);const Pre=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],VH=jt("percent",Pre);const zre=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Bre=jt("phone",zre);const Fre=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Vre=jt("play",Fre);const Hre=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kl=jt("plus",Hre);const Ure=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],HH=jt("printer",Ure);const Gre=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],M0=jt("qr-code",Gre);const Wre=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],yi=jt("refresh-cw",Wre);const Yre=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],$re=jt("rocket",Yre);const qre=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Xre=jt("rotate-ccw",qre);const Zre=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Yi=jt("save",Zre);const Kre=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],UH=jt("scale",Kre);const Qre=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Sv=jt("search",Qre);const Jre=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],ene=jt("settings-2",Jre);const tne=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sx=jt("settings",tne);const ane=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],XA=jt("shield-alert",ane);const rne=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],m0=jt("shield-check",rne);const nne=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],o2=jt("shield",nne);const ine=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],GH=jt("shopping-bag",ine);const sne=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],mx=jt("shopping-cart",sne);const lne=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],ZA=jt("smartphone",lne);const one=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],qC=jt("sparkles",one);const cne=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],WH=jt("sprout",cne);const dne=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],X8=jt("star",dne);const une=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],YH=jt("store",une);const hne=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],$H=jt("tag",hne);const fne=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],wb=jt("thermometer",fne);const pne=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Cs=jt("trash-2",pne);const xne=[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]],mne=jt("trees",xne);const gne=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],vne=jt("trending-down",gne);const bne=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Eg=jt("trending-up",bne);const yne=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],H_=jt("triangle-alert",yne);const wne=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],_ne=jt("truck",wne);const Nne=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],jne=jt("type",Nne);const Sne=[["circle",{cx:"10",cy:"7",r:"1",key:"dypaad"}],["circle",{cx:"4",cy:"20",r:"1",key:"22iqad"}],["path",{d:"M4.7 19.3 19 5",key:"1enqfc"}],["path",{d:"m21 3-3 1 2 2Z",key:"d3ov82"}],["path",{d:"M9.26 7.68 5 12l2 5",key:"1esawj"}],["path",{d:"m10 14 5 2 3.5-3.5",key:"v8oal5"}],["path",{d:"m18 12 1-1 1 1-1 1Z",key:"1bh22v"}]],Z8=jt("usb",Sne);const kne=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],KA=jt("user-plus",kne);const Cne=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],QA=jt("user",Cne);const Ane=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],gx=jt("users",Ane);const Tne=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Mne=jt("wallet",Tne);const Ene=[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]],c2=jt("warehouse",Ene);const Dne=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ine=jt("wifi-off",Dne);const Rne=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],kv=jt("wifi",Rne);const Lne=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],qH=jt("wind",Lne);const One=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ri=jt("x",One);const Pne=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],XH=jt("zap",Pne),zne=({onLoginSuccess:a})=>{const[e,t]=F.useState(""),[r,n]=F.useState(!1),[i,l]=F.useState("");F.useEffect(()=>{e.length===6&&!r&&d(e)},[e]);const o=b=>{e.length<6&&!r&&(t(w=>w+b),l(""))},c=()=>{r||(t(e.slice(0,-1)),l(""))},d=async b=>{n(!0),l("");try{const w=await Ke("verify_mobile_pin",{pin:b});w.success?(localStorage.setItem("username",w.username),localStorage.setItem("userRole",w.role),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("pin_verified","true"),w.token&&localStorage.setItem("token",w.token),a()):(l(w.error||"PIN   ."),window.navigator.vibrate&&window.navigator.vibrate(200),t(""))}catch(w){console.error("Login Error:",w);const k=`${localStorage.getItem("API_BASE_URL")||""}/api/auth/verify`;l(`${w.name}: ${w.message} (Target: ${k})`)}finally{n(!1)}},[u,h]=F.useState(()=>!localStorage.getItem("API_BASE_URL")),[f,p]=F.useState(localStorage.getItem("API_BASE_URL")||""),g=()=>{let b=f.trim();b&&!b.startsWith("http")&&(b="https://"+b),localStorage.setItem("API_BASE_URL",b),h(!1),l("  ."),setTimeout(()=>l(""),2e3)};return s.jsxs("div",{className:"fixed inset-0 bg-slate-50 flex flex-col items-center justify-between pt-40 pb-10 px-8 font-sans z-[1000] animate-in fade-in duration-500 overflow-hidden touch-none select-none",children:[s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-start text-center space-y-8 w-full min-h-0",children:[s.jsx("div",{className:`w-20 h-20 sm:w-28 sm:h-28 rounded-3xl sm:rounded-[2.5rem] flex items-center justify-center shadow-xl sm:shadow-2xl transition-all duration-500 bg-white ${i?"border-4 border-rose-500 shadow-rose-200":"shadow-indigo-200 animate-bounce-slow"}`,children:r?s.jsx(yi,{size:40,className:"text-indigo-600 animate-spin sm:w-[52px] sm:h-[52px]"}):s.jsx("img",{src:"/mushroom-app-icon.png",alt:"Logo",className:"w-12 h-12 sm:w-16 sm:h-16 object-contain"})}),s.jsxs("div",{className:"space-y-2 sm:space-y-4",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-slate-800 tracking-tight",children:"  "}),s.jsx("p",{className:"text-slate-400 font-bold text-xs sm:text-base",children:"6  PIN ."})]}),s.jsx("div",{className:"flex gap-4 sm:gap-6 mt-6 sm:mt-12",children:[...Array(6)].map((b,w)=>{const j=w<e.length;return s.jsx("div",{className:`w-5 h-5 sm:w-6 sm:h-6 rounded-full transition-all duration-200 ${j?"bg-indigo-600 scale-125 shadow-lg shadow-indigo-200":"bg-slate-200 scale-100"} ${i?"bg-rose-500 shadow-rose-100":""}`},w)})}),s.jsx("div",{className:"h-6",children:i&&s.jsx("p",{className:"text-rose-500 text-xs sm:text-sm font-black animate-shake",children:i})})]}),s.jsxs("div",{className:"w-full max-w-sm grid grid-cols-3 gap-3 sm:gap-4 mb-6 sm:mb-12",children:[[1,2,3,4,5,6,7,8,9].map(b=>s.jsx("button",{type:"button",onClick:()=>o(b),className:"h-14 sm:h-18 bg-white rounded-2xl flex items-center justify-center text-2xl font-black text-slate-700 shadow-[0_3px_0_0_rgba(226,232,240,1)] active:shadow-none active:translate-y-1 active:bg-indigo-50 transition-all",children:b},b)),s.jsx("button",{type:"button",onClick:c,className:"h-14 flex items-center justify-center text-slate-400 active:text-rose-500",children:s.jsx(are,{size:24})}),s.jsx("button",{type:"button",onClick:()=>o(0),className:"h-14 bg-white rounded-2xl flex items-center justify-center text-2xl font-black text-slate-700 shadow-[0_3px_0_0_rgba(226,232,240,1)] active:shadow-none active:translate-y-1 active:bg-indigo-50 transition-all",children:"0"}),s.jsxs("button",{type:"button",onClick:()=>h(!0),className:"h-14 flex flex-col items-center justify-center text-slate-400 active:text-indigo-600 transition-colors",children:[s.jsx(yi,{size:18,className:"mb-1"}),s.jsx("span",{className:"text-[10px] font-black",children:""})]})]}),u&&s.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[1100] flex items-end sm:items-center justify-center p-0 sm:p-4",children:s.jsxs("div",{className:"bg-white w-full max-w-md rounded-t-[2.5rem] sm:rounded-[2.5rem] p-8 space-y-6 shadow-2xl animate-in slide-in-from-bottom duration-300",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-black text-slate-800",children:"  "}),s.jsx("button",{onClick:()=>h(!1),className:"p-2 bg-slate-100 rounded-full text-slate-400",children:s.jsx(Ri,{size:20})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-wider pl-1",children:"  (IP  )"}),s.jsx("input",{type:"text",className:"w-full h-14 bg-slate-50 border-2 border-transparent focus:border-indigo-500 focus:bg-white rounded-2xl px-6 font-bold text-slate-700 outline-none transition-all",placeholder:"http://100.x.x.x:3000",value:f,onChange:b=>p(b.target.value)})]}),s.jsx("button",{onClick:g,className:"w-full h-14 bg-indigo-600 text-white rounded-2xl font-black text-sm shadow-lg shadow-indigo-100 active:scale-[0.98] transition-all",children:"   "}),s.jsxs("p",{className:"text-[10px] text-slate-400 font-bold text-center leading-relaxed",children:["*  IP  3000  .",s.jsx("br",{}),"(: http://100.78.11.10:3000)"]})]})]})}),s.jsx("style",{children:`
                @keyframes bounce-slow {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-12px); }
                }
                .animate-bounce-slow {
                    animation: bounce-slow 4s ease-in-out infinite;
                }
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    20% { transform: translateX(-8px); }
                    40% { transform: translateX(8px); }
                    60% { transform: translateX(-8px); }
                    80% { transform: translateX(8px); }
                }
                .animate-shake {
                    animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both;
                }
                button {
                    -webkit-tap-highlight-color: transparent;
                }
            `})]})},Bne=()=>{const a=an(),e=Pc(),t=[{path:"/mobile-dashboard",label:"",icon:l2},{path:"/mobile-reception",label:" ",icon:GH},{path:"/mobile-event-sales",label:" ",icon:YH},{path:"/mobile-worklog",label:" ",icon:xh},{path:"/mobile-harvest",label:" ",icon:Hae}];return s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-xl border-t border-slate-100 flex items-center justify-between h-[calc(4.5rem+env(safe-area-inset-bottom))] px-2 pb-[env(safe-area-inset-bottom)] z-50 shadow-[0_-4px_20px_0_rgba(0,0,0,0.03)]",children:t.map(r=>{const n=r.icon,i=e.pathname===r.path;return s.jsxs("button",{onClick:()=>a(r.path),className:`flex-1 flex flex-col items-center justify-center gap-1 transition-all active:scale-90 ${i?"text-indigo-600":"text-slate-400"}`,children:[s.jsx("div",{className:`p-1 rounded-xl transition-all ${i?"bg-indigo-50":""}`,children:s.jsx(n,{size:22,strokeWidth:i?2.5:2})}),s.jsx("span",{className:`text-[9.5px] font-black tracking-tighter whitespace-nowrap overflow-hidden text-ellipsis ${i?"text-indigo-600":"text-slate-400"}`,children:r.label})]},r.path)})})},Fne=()=>s.jsxs("div",{className:"flex flex-col h-full bg-slate-50 overflow-hidden relative",children:[s.jsx("div",{className:"flex-1 overflow-x-hidden overflow-y-auto pb-24 touch-pan-y",children:s.jsx("main",{className:"animate-in fade-in duration-500",children:s.jsx(xx,{})})}),s.jsx(Bne,{})]});function Fe(a){if(a==null)return"0";if(a==="")return"";if(a==="-")return"-";const e=typeof a=="number"?a:Number(String(a).replace(/[^0-9.-]/g,""));return isNaN(e)?"0":new Intl.NumberFormat("ko-KR").format(e)}function Yu(a){return a&&parseInt(String(a).replace(/,/g,""),10)||0}function ZH(a){if(!a)return"";const e=typeof a=="string"&&!a.includes("Z")&&!a.includes("+")?`${a.replace(" ","T")}Z`:a,t=new Date(e);if(isNaN(t.getTime()))return String(a);const r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${r}-${n} ${i}:${l}`}function ev(a){if(!a)return"";const e=new Date(a),t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`}function kn(a){return a?(a=a.replace(/[^0-9]/g,""),a.length<4?a:a.length<7?a.substr(0,3)+"-"+a.substr(3):a.length<11?a.substr(0,3)+"-"+a.substr(3,3)+"-"+a.substr(6):a.substr(0,3)+"-"+a.substr(3,4)+"-"+a.substr(7)):""}async function Vne(a){try{return await navigator.clipboard.writeText(a),console.log("Copied to clipboard:",a),!0}catch(e){return console.error("Failed to copy:",e),!1}}async function Co(a,e,t){try{return await ht(e,t)}catch(r){const n=typeof r=="string"?r:r.message||String(r);if(n.includes("AI_QUOTA_EXCEEDED")){const i=n.replace("AI_QUOTA_EXCEEDED: ","");throw await a(" AI   ",i),new Error("AI_QUOTA_EXCEEDED")}throw r}}async function K8(a,e){const t=e.split(/\r?\n/)[0],r=`
    . 
    ,         .

-   : ${a}
-   ( ): "${t}"

      :
1.      (, , ,  ).
2.  ("${a}")     .
3.       .

[ ]
- 300     .
-   "AI  : ..." .
- (bold )    .
-  .
    `;try{return await ht("call_gemini_ai",{prompt:r})||".      .     ."}catch(n){return console.error("AI Analysis failed:",n),"   '"+a+"'()    .     ?"}}const Hne=({searchQuery:a,setSearchQuery:e,isSearchFocused:t,setIsSearchFocused:r,searchRef:n,setShowLogoutModal:i})=>{const l=an(),o=F.useMemo(()=>[{id:"reception",label:"  ",sub:"/  ",path:"/sales/reception",icon:"add_shopping_cart"},{id:"stock",label:"   ",sub:"     ",path:"/sales/stock",icon:"inventory_2"},{id:"customer",label:" ",sub:"/  ",path:"/customer/edit",icon:"group"},{id:"consult",label:"  ",sub:"    ",path:"/customer/consultation",icon:"forum"},{id:"ledger",label:"  ",sub:"/   ",path:"/sales/ledger",icon:"menu_book"},{id:"purchase",label:"/ ",sub:"    ",path:"/finance/purchase",icon:"receipt_long"},{id:"exp_status",label:"  ",sub:"    ",path:"/exp/reservation-status",icon:"event_available"},{id:"settings",label:" ",sub:"   DB ",path:"/settings/company-info",icon:"settings"}],[]),c=F.useMemo(()=>{if(!a)return o.slice(0,5);const u=a.toLowerCase();return o.filter(h=>h.label.toLowerCase().includes(u)||h.sub.toLowerCase().includes(u))},[a,o]),d=u=>{r(!1),e(""),l(u)};return s.jsxs("div",{className:"flex items-center justify-between mb-4 gap-8 animate-in fade-in slide-in-from-top-4 duration-500 shrink-0 relative",children:[s.jsxs("div",{className:"flex-1 max-w-2xl min-[2000px]:max-w-4xl relative group",ref:n,children:[s.jsxs("div",{className:`relative flex items-center bg-white/80 backdrop-blur-xl border border-white shadow-[0_8px_30px_rgb(0,0,0,0.04)] ${t?"border-indigo-400 ring-4 ring-indigo-500/5":""} rounded-[24px] px-6 py-4 transition-all duration-300`,children:[s.jsx("span",{className:`material-symbols-rounded ${t?"text-indigo-500":"text-slate-400"} transition-colors text-2xl`,children:"search"}),s.jsx("input",{type:"text",value:a,onChange:u=>e(u.target.value),onFocus:()=>r(!0),placeholder:"    (: '', '')",className:"flex-1 bg-transparent border-none outline-none px-4 text-[15px] font-medium tracking-tight text-slate-700 placeholder:text-slate-300",onKeyDown:u=>{u.key==="Enter"&&c.length>0&&d(c[0].path)}}),s.jsxs("div",{className:"flex items-center gap-2",children:[a&&s.jsx("button",{onClick:()=>e(""),className:"p-1.5 hover:bg-slate-100 rounded-full text-slate-400",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"close"})}),s.jsx("span",{className:"w-px h-4 bg-slate-200 mx-2"}),s.jsx("div",{className:"bg-slate-100 px-2 py-1 rounded-md text-[10px] font-black text-slate-400 border border-slate-200",children:"ALT + K"})]})]}),t&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute inset-0 bg-transparent z-[99] fixed w-screen h-screen top-0 left-0",onClick:()=>r(!1)}),s.jsxs("div",{className:"absolute top-[calc(100%+12px)] left-0 w-full bg-white rounded-[24px] shadow-[0_20px_60px_rgba(0,0,0,0.15)] border border-slate-200 overflow-hidden z-[100] animate-in fade-in slide-in-from-top-4 duration-300",children:[s.jsxs("div",{className:"px-5 py-3 bg-slate-50/50 border-b border-slate-100 flex items-center justify-between",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"   "}),s.jsxs("span",{className:"text-[10px] text-slate-400 font-bold",children:[c.length,"  "]})]}),s.jsx("div",{className:"p-2 max-h-[400px] overflow-auto stylish-scrollbar",children:c.length>0?c.map(u=>s.jsxs("button",{onClick:()=>d(u.path),className:"w-full flex items-center gap-4 p-4 hover:bg-indigo-50/50 rounded-2xl transition-all group text-left",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-100 group-hover:bg-white text-slate-400 group-hover:text-indigo-600 flex items-center justify-center transition-all shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:u.icon})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-black text-slate-700 group-hover:text-indigo-900 leading-tight",children:u.label}),s.jsx("div",{className:"text-[11px] text-slate-400 group-hover:text-indigo-400 font-medium mt-1 uppercase tracking-tight",children:u.sub})]}),s.jsx("span",{className:"material-symbols-rounded text-slate-200 group-hover:text-indigo-300 text-lg opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all",children:"arrow_forward"})]},u.id)):s.jsxs("div",{className:"py-12 text-center text-slate-400 font-bold italic",children:['  : "',a,'"']})}),s.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1.5 grayscale opacity-50",children:[s.jsx("span",{className:"bg-white px-1.5 py-0.5 rounded border border-slate-300 text-[9px] font-bold",children:""}),s.jsx("span",{className:"text-[10px] font-bold",children:""})]}),s.jsxs("div",{className:"flex items-center gap-1.5 grayscale opacity-50",children:[s.jsx("span",{className:"bg-white px-1.5 py-0.5 rounded border border-slate-300 text-[9px] font-bold",children:"ESC"}),s.jsx("span",{className:"text-[10px] font-bold",children:""})]})]}),s.jsx("div",{className:"text-[10px] font-black text-indigo-500 bg-indigo-50 px-3 py-1.5 rounded-full border border-indigo-100",children:" AI"})]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 bg-white p-2.5 pr-6 rounded-2xl border border-slate-100 shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{className:"w-10 h-10 rounded-xl bg-slate-900 border border-slate-700 flex items-center justify-center text-white shadow-lg overflow-hidden relative group",children:[s.jsx("span",{className:"material-symbols-rounded text-xl group-hover:scale-110 transition-transform",children:"person"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-emerald-500 border-2 border-slate-900 rounded-full"})]}),s.jsxs("div",{className:"flex flex-col mr-6",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.1em] leading-none mb-1",children:""}),s.jsxs("span",{className:"text-sm font-black text-slate-800 tracking-tight",children:[localStorage.getItem("username")||"",""]})]}),s.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-slate-50 hover:bg-rose-50 text-slate-500 hover:text-rose-600 font-black text-[11px] transition-all active:scale-95 border border-slate-100 uppercase tracking-widest",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"logout"}),""]})]})]})},Une=({weatherAdvice:a,isWeatherLoading:e})=>{const[t,r]=F.useState(!1),n=l=>l?l.includes("")?"ac_unit":l.includes("")?"umbrella":l.includes("")?"wb_sunny":l.includes("")||l.includes("")?"filter_drama":"cloud":"cloud",i=a?.intel_summary?a.intel_summary.split(`
`).filter(l=>l.trim()):[];return s.jsxs("div",{className:"col-span-full h-[180px] min-[2000px]:h-[220px] bg-gradient-to-br from-[#1e293b] via-[#0f172a] to-black rounded-[32px] p-8 min-[2000px]:p-10 shadow-2xl relative overflow-hidden flex items-center group transition-all duration-700 hover:shadow-indigo-500/20",children:[s.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-indigo-500/10 to-transparent pointer-events-none"}),s.jsx("div",{className:"absolute bottom-[-50%] left-[-10%] w-64 h-64 bg-emerald-500/10 blur-[80px] rounded-full pointer-events-none"}),s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center gap-6 md:gap-8 min-[2000px]:gap-12 w-full h-full",children:[s.jsx("div",{className:"w-20 h-20 min-[2000px]:w-28 min-[2000px]:h-28 rounded-[28px] bg-white/10 backdrop-blur-2xl border border-white/20 flex items-center justify-center shrink-0 shadow-2xl group-hover:rotate-3 transition-transform duration-500",children:s.jsx("span",{className:"material-symbols-rounded text-amber-400 text-5xl min-[2000px]:text-7xl drop-shadow-[0_0_15px_rgba(251,191,36,0.5)]",children:n(a?.weather_desc)})}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{className:"flex flex-nowrap md:flex-wrap items-center gap-4 h-10",children:[s.jsx("h3",{className:"text-white text-[1.4rem] font-black tracking-tight drop-shadow-sm whitespace-nowrap",children:"  "}),!e&&s.jsxs("div",{className:"bg-white/10 backdrop-blur-md px-4 py-1.5 rounded-full text-white/90 text-[0.8rem] font-bold border border-white/10 flex items-center gap-2 whitespace-nowrap",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),a?.location_name||""," ",a?.temperature?.toFixed(1),"C  ",a?.weather_desc]}),i.length>0&&s.jsx("button",{onClick:()=>r(!t),className:`px-4 py-1.5 rounded-full text-[0.8rem] font-black border transition-all whitespace-nowrap ${t?"bg-indigo-600 border-indigo-500 text-white":"bg-white/5 border-white/10 text-indigo-400 hover:bg-white/10"}`,children:t?" ":"  "})]}),s.jsxs("div",{className:"relative min-h-[60px]",children:[s.jsx("p",{className:`text-slate-300 text-[1.05rem] font-bold leading-relaxed max-w-[950px] transition-all duration-500 ${t?"opacity-10 blur-md scale-95 pointer-events-none":"opacity-100 blur-0 scale-100"}`,children:e?"       ...":a?.marketing_advice||"    ."}),t&&s.jsx("div",{className:"absolute top-0 left-0 right-0 mt-0.5 animate-in fade-in slide-in-from-top-4 duration-500",children:s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-1.5",children:i.map((l,o)=>s.jsx("div",{className:"bg-indigo-500/15 border border-indigo-500/30 p-2 rounded-2xl shadow-lg backdrop-blur-md",children:s.jsx("p",{className:"text-indigo-100 text-[0.75rem] font-black tracking-wide leading-tight",children:l})},o))})})]}),s.jsxs("div",{className:`flex items-center gap-2 text-[10px] font-bold uppercase tracking-tight transition-all duration-500 ${!e&&!t?"text-slate-500 opacity-100 translate-y-0":"text-transparent opacity-0 translate-y-1 pointer-events-none"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-xs",children:"auto_awesome"}),"   ,  ,  2         ."]})]}),s.jsx("div",{className:"hidden 2xl:block pr-8 shrink-0",children:s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-slate-600 text-[0.7rem] font-black uppercase tracking-[0.3em] mb-1",children:" "}),s.jsx("div",{className:"text-white font-mono text-lg font-bold",children:"ACTIVE"})]})})]})]})},gl=({icon:a,iconColor:e,iconBg:t,label:r,value:n,trend:i,isLoading:l,badge:o,onClick:c,className:d="",secondaryValue:u})=>s.jsxs("div",{onClick:c,className:`bg-white rounded-[28px] py-5 px-6 border border-slate-100 shadow-[0_4px_20px_rgb(0,0,0,0.03)] relative overflow-hidden group hover:shadow-[0_20px_40px_rgba(0,0,0,0.05)] transition-all duration-500 h-full min-h-[140px] flex flex-col justify-between cursor-pointer ${d}`,children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("span",{className:`material-symbols-rounded ${e} ${t} p-2.5 rounded-[16px] text-[20px] shadow-sm`,children:a}),i&&!l&&s.jsxs("div",{className:`flex items-center gap-1 px-2.5 py-1 rounded-full text-[11px] font-black ${i.isUp?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"} shadow-sm`,children:[s.jsx("span",{className:"material-symbols-rounded text-[14px]",children:i.isUp?"arrow_upward":"arrow_downward"}),i.label||`${i.pct}%`]}),o&&s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest bg-slate-50 px-2 py-1 rounded-md",children:o})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-slate-500 text-[0.8rem] font-bold uppercase tracking-wider mb-1",children:r}),s.jsx("div",{className:`text-[1.4rem] font-black tracking-tighter leading-none ${l?"text-slate-200 animate-pulse":"text-slate-800"}`,children:l?"...":n}),u&&!l&&s.jsx("div",{className:"text-[10px] font-black text-slate-400 mt-1.5 flex items-center gap-2",children:u})]})]}),Gne=({type:a,onClose:e,forecastAlerts:t,freshnessAlerts:r,anniversaries:n,repurchaseCandidates:i,generateAIDraft:l,navigate:o})=>a?s.jsx("div",{id:"alert-expansion-area",className:"mb-6 animate-in slide-in-from-top-4 duration-500",children:s.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-2xl overflow-hidden ring-1 ring-black/5",children:[s.jsxs("div",{className:`p-6 flex items-center justify-between text-white ${a==="inventory"?"bg-gradient-to-r from-rose-500 to-rose-600":a==="anniversary"?"bg-gradient-to-r from-pink-500 to-pink-600":"bg-gradient-to-r from-indigo-500 to-indigo-600"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-2xl",children:a==="inventory"?"inventory_2":a==="anniversary"?"cake":"notifications_active"}),s.jsx("h3",{className:"text-xl font-black tracking-tight",children:a==="inventory"?"  ":a==="anniversary"?"  ":"  "})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest bg-white/20 px-3 py-1 rounded-full border border-white/20",children:" "}),s.jsx("button",{onClick:e,className:"w-8 h-8 rounded-full bg-black/10 hover:bg-black/20 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"close"})})]})]}),s.jsx("div",{className:"p-8 max-h-[600px] overflow-auto stylish-scrollbar",children:a==="inventory"?s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-black text-rose-600 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"trending_down"}),"    (Forecast)"]}),s.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-100",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-500 font-bold",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-left",children:""}),s.jsx("th",{className:"p-4 text-center",children:""}),s.jsx("th",{className:"p-4 text-center",children:""}),s.jsx("th",{className:"p-4 text-center",children:""}),s.jsx("th",{className:"p-4 text-center",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100",children:[t.map((c,d)=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsxs("td",{className:"p-4",children:[s.jsx("div",{className:"font-bold text-slate-800",children:c.product_name}),s.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-tight",children:c.item_type==="material"?" ":" "})]}),s.jsxs("td",{className:"p-4 text-center font-bold text-slate-700",children:[c.stock_quantity.toLocaleString(),""]}),s.jsxs("td",{className:"p-4 text-center text-slate-500",children:[c.daily_avg_consumption.toFixed(1),"/"]}),s.jsx("td",{className:`p-4 text-center font-black ${c.days_remaining<=3?"text-rose-500":"text-amber-500"}`,children:c.days_remaining>=900?" ":`${c.days_remaining} `}),s.jsx("td",{className:"p-4 text-center",children:s.jsx("button",{onClick:()=>o(c.item_type==="material"?"/finance/purchase":"/sales/stock"),className:"bg-slate-900 text-white px-4 py-2 rounded-xl font-bold text-xs hover:bg-slate-800 transition-all",children:""})})]},d)),t.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"p-12 text-center text-slate-400 font-bold italic underline border-t border-slate-100",children:"   ."})})]})]})})]}),s.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[s.jsxs("h4",{className:"text-lg font-black text-amber-600 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"timer"}),"    (Freshness)"]}),s.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-100",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-500 font-bold",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-left",children:""}),s.jsx("th",{className:"p-4 text-center",children:""}),s.jsx("th",{className:"p-4 text-center",children:" "}),s.jsx("th",{className:"p-4 text-center",children:""}),s.jsx("th",{className:"p-4 text-center",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:r.map((c,d)=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsx("td",{className:"p-4 font-bold text-slate-800",children:c.product_name}),s.jsxs("td",{className:"p-4 text-center font-bold text-slate-700",children:[c.stock_quantity.toLocaleString(),""]}),s.jsx("td",{className:"p-4 text-center text-slate-500",children:c.last_in_date?c.last_in_date.substring(0,10):"-"}),s.jsxs("td",{className:"p-4 text-center font-black text-rose-500",children:["+",c.diffDays,""]}),s.jsx("td",{className:"p-4 text-center",children:s.jsx("button",{onClick:()=>o("/sales/stock"),className:"bg-slate-900 text-white px-4 py-2 rounded-xl font-bold text-xs hover:bg-slate-800 transition-all",children:""})})]},d))})]})})]})]}):a==="anniversary"?s.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-100",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-500 font-bold",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-left",children:""}),s.jsx("th",{className:"p-4 text-left",children:""}),s.jsx("th",{className:"p-4 text-center",children:""}),s.jsx("th",{className:"p-4 text-center",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100",children:[n.map((c,d)=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsx("td",{className:"p-4 font-black text-slate-800",children:c.customer_name}),s.jsx("td",{className:"p-4 text-slate-500 font-bold",children:c.anniversary_type}),s.jsx("td",{className:"p-4 text-center text-slate-500 font-mono",children:c.anniversary_date}),s.jsx("td",{className:"p-4 text-center",children:s.jsx("button",{onClick:()=>o("/customer/sms"),className:"bg-pink-100 text-pink-600 px-4 py-2 rounded-xl font-bold text-xs hover:bg-pink-200 transition-all border border-pink-200 shadow-sm",children:""})})]},d)),n.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"4",className:"p-12 text-center text-slate-400 font-bold italic",children:"  ."})})]})]})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4 p-4 bg-indigo-50 rounded-2xl border border-indigo-100 mb-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-500 flex items-center justify-center text-white shrink-0 shadow-lg",children:s.jsx("span",{className:"material-symbols-rounded",children:"psychology"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-indigo-800 text-[13px] font-bold leading-relaxed line-clamp-2",children:"        .     ."}),s.jsxs("div",{className:"text-[10px] text-indigo-400 font-bold mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-[12px]",children:"verified"})," 2    SKU    "]})]})]}),s.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-100",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-500 font-bold",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-left",children:""}),s.jsx("th",{className:"p-4 text-left",children:""}),s.jsx("th",{className:"p-4 text-center",children:" "}),s.jsx("th",{className:"p-4 text-center",children:""}),s.jsx("th",{className:"p-4 text-center",children:""}),s.jsx("th",{className:"p-4 text-center",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100",children:[i.map((c,d)=>{const u=parseInt(c.predicted_days_remaining),h=u===0?"":u>0?`${u} `:`${Math.abs(u)} `,f=u===0?"text-rose-500":u>0?"text-emerald-500":"text-amber-500";return s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsx("td",{className:"p-4 font-black text-slate-800",children:c.customer_name}),s.jsx("td",{className:"p-4 text-slate-500 font-mono text-xs",children:c.mobile_number}),s.jsx("td",{className:"p-4 text-center text-slate-500",children:c.last_order_date}),s.jsxs("td",{className:"p-4 text-center font-black text-slate-700",children:[c.avg_interval_days,""]}),s.jsx("td",{className:`p-4 text-center font-black ${f}`,children:h}),s.jsx("td",{className:"p-4 text-center",children:s.jsxs("button",{onClick:()=>l(c),className:"bg-indigo-600 text-white px-4 py-2 rounded-xl font-bold text-xs hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-100 italic flex items-center gap-1.5 mx-auto",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"auto_fix_high"}),"  "]})})]},d)}),i.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"p-12 text-center text-slate-400 font-bold italic",children:"   ."})})]})]})})]})}),s.jsxs("div",{className:"px-8 py-5 bg-slate-50 border-t border-slate-100 flex justify-between items-center text-[11px] font-black text-slate-400 uppercase tracking-widest",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),"  "]}),s.jsx("span",{className:"w-px h-3 bg-slate-200"}),s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"material-symbols-rounded text-xs",children:"history"}),"  ",Wt().format("HH:mm")]})]}),s.jsxs("button",{onClick:e,className:"text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["  ",s.jsx("span",{className:"material-symbols-rounded text-xs",children:"expand_less"})]})]})]})}):null;function _b(a){return a+.5|0}const $u=(a,e,t)=>Math.max(Math.min(a,t),e);function Dg(a){return $u(_b(a*2.55),0,255)}function lh(a){return $u(_b(a*255),0,255)}function _d(a){return $u(_b(a/2.55)/100,0,1)}function Q8(a){return $u(_b(a*100),0,100)}const Fl={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},XC=[..."0123456789ABCDEF"],Wne=a=>XC[a&15],Yne=a=>XC[(a&240)>>4]+XC[a&15],$1=a=>(a&240)>>4===(a&15),$ne=a=>$1(a.r)&&$1(a.g)&&$1(a.b)&&$1(a.a);function qne(a){var e=a.length,t;return a[0]==="#"&&(e===4||e===5?t={r:255&Fl[a[1]]*17,g:255&Fl[a[2]]*17,b:255&Fl[a[3]]*17,a:e===5?Fl[a[4]]*17:255}:(e===7||e===9)&&(t={r:Fl[a[1]]<<4|Fl[a[2]],g:Fl[a[3]]<<4|Fl[a[4]],b:Fl[a[5]]<<4|Fl[a[6]],a:e===9?Fl[a[7]]<<4|Fl[a[8]]:255})),t}const Xne=(a,e)=>a<255?e(a):"";function Zne(a){var e=$ne(a)?Wne:Yne;return a?"#"+e(a.r)+e(a.g)+e(a.b)+Xne(a.a,e):void 0}const Kne=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function KH(a,e,t){const r=e*Math.min(t,1-t),n=(i,l=(i+a/30)%12)=>t-r*Math.max(Math.min(l-3,9-l,1),-1);return[n(0),n(8),n(4)]}function Qne(a,e,t){const r=(n,i=(n+a/60)%6)=>t-t*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function Jne(a,e,t){const r=KH(a,1,.5);let n;for(e+t>1&&(n=1/(e+t),e*=n,t*=n),n=0;n<3;n++)r[n]*=1-e-t,r[n]+=e;return r}function eie(a,e,t,r,n){return a===n?(e-t)/r+(e<t?6:0):e===n?(t-a)/r+2:(a-e)/r+4}function JA(a){const t=a.r/255,r=a.g/255,n=a.b/255,i=Math.max(t,r,n),l=Math.min(t,r,n),o=(i+l)/2;let c,d,u;return i!==l&&(u=i-l,d=o>.5?u/(2-i-l):u/(i+l),c=eie(t,r,n,u,i),c=c*60+.5),[c|0,d||0,o]}function eT(a,e,t,r){return(Array.isArray(e)?a(e[0],e[1],e[2]):a(e,t,r)).map(lh)}function tT(a,e,t){return eT(KH,a,e,t)}function tie(a,e,t){return eT(Jne,a,e,t)}function aie(a,e,t){return eT(Qne,a,e,t)}function QH(a){return(a%360+360)%360}function rie(a){const e=Kne.exec(a);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?Dg(+e[5]):lh(+e[5]));const n=QH(+e[2]),i=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?r=tie(n,i,l):e[1]==="hsv"?r=aie(n,i,l):r=tT(n,i,l),{r:r[0],g:r[1],b:r[2],a:t}}function nie(a,e){var t=JA(a);t[0]=QH(t[0]+e),t=tT(t),a.r=t[0],a.g=t[1],a.b=t[2]}function iie(a){if(!a)return;const e=JA(a),t=e[0],r=Q8(e[1]),n=Q8(e[2]);return a.a<255?`hsla(${t}, ${r}%, ${n}%, ${_d(a.a)})`:`hsl(${t}, ${r}%, ${n}%)`}const J8={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},eR={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function sie(){const a={},e=Object.keys(eR),t=Object.keys(J8);let r,n,i,l,o;for(r=0;r<e.length;r++){for(l=o=e[r],n=0;n<t.length;n++)i=t[n],o=o.replace(i,J8[i]);i=parseInt(eR[l],16),a[o]=[i>>16&255,i>>8&255,i&255]}return a}let q1;function lie(a){q1||(q1=sie(),q1.transparent=[0,0,0,0]);const e=q1[a.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const oie=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function cie(a){const e=oie.exec(a);let t=255,r,n,i;if(e){if(e[7]!==r){const l=+e[7];t=e[8]?Dg(l):$u(l*255,0,255)}return r=+e[1],n=+e[3],i=+e[5],r=255&(e[2]?Dg(r):$u(r,0,255)),n=255&(e[4]?Dg(n):$u(n,0,255)),i=255&(e[6]?Dg(i):$u(i,0,255)),{r,g:n,b:i,a:t}}}function die(a){return a&&(a.a<255?`rgba(${a.r}, ${a.g}, ${a.b}, ${_d(a.a)})`:`rgb(${a.r}, ${a.g}, ${a.b})`)}const HS=a=>a<=.0031308?a*12.92:Math.pow(a,1/2.4)*1.055-.055,mp=a=>a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4);function uie(a,e,t){const r=mp(_d(a.r)),n=mp(_d(a.g)),i=mp(_d(a.b));return{r:lh(HS(r+t*(mp(_d(e.r))-r))),g:lh(HS(n+t*(mp(_d(e.g))-n))),b:lh(HS(i+t*(mp(_d(e.b))-i))),a:a.a+t*(e.a-a.a)}}function X1(a,e,t){if(a){let r=JA(a);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=tT(r),a.r=r[0],a.g=r[1],a.b=r[2]}}function JH(a,e){return a&&Object.assign(e||{},a)}function tR(a){var e={r:0,g:0,b:0,a:255};return Array.isArray(a)?a.length>=3&&(e={r:a[0],g:a[1],b:a[2],a:255},a.length>3&&(e.a=lh(a[3]))):(e=JH(a,{r:0,g:0,b:0,a:1}),e.a=lh(e.a)),e}function hie(a){return a.charAt(0)==="r"?cie(a):rie(a)}let eU=class ZC{constructor(e){if(e instanceof ZC)return e;const t=typeof e;let r;t==="object"?r=tR(e):t==="string"&&(r=qne(e)||lie(e)||hie(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=JH(this._rgb);return e&&(e.a=_d(e.a)),e}set rgb(e){this._rgb=tR(e)}rgbString(){return this._valid?die(this._rgb):void 0}hexString(){return this._valid?Zne(this._rgb):void 0}hslString(){return this._valid?iie(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,n=e.rgb;let i;const l=t===i?.5:t,o=2*l-1,c=r.a-n.a,d=((o*c===-1?o:(o+c)/(1+o*c))+1)/2;i=1-d,r.r=255&d*r.r+i*n.r+.5,r.g=255&d*r.g+i*n.g+.5,r.b=255&d*r.b+i*n.b+.5,r.a=l*r.a+(1-l)*n.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=uie(this._rgb,e._rgb,t)),this}clone(){return new ZC(this.rgb)}alpha(e){return this._rgb.a=lh(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=_b(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return X1(this._rgb,2,e),this}darken(e){return X1(this._rgb,2,-e),this}saturate(e){return X1(this._rgb,1,e),this}desaturate(e){return X1(this._rgb,1,-e),this}rotate(e){return nie(this._rgb,e),this}};function od(){}const fie=(()=>{let a=0;return()=>a++})();function xr(a){return a==null}function yn(a){if(Array.isArray&&Array.isArray(a))return!0;const e=Object.prototype.toString.call(a);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function yr(a){return a!==null&&Object.prototype.toString.call(a)==="[object Object]"}function Pn(a){return(typeof a=="number"||a instanceof Number)&&isFinite(+a)}function ml(a,e){return Pn(a)?a:e}function qa(a,e){return typeof a>"u"?e:a}const pie=(a,e)=>typeof a=="string"&&a.endsWith("%")?parseFloat(a)/100:+a/e,tU=(a,e)=>typeof a=="string"&&a.endsWith("%")?parseFloat(a)/100*e:+a;function fn(a,e,t){if(a&&typeof a.call=="function")return a.apply(t,e)}function $r(a,e,t,r){let n,i,l;if(yn(a))for(i=a.length,n=0;n<i;n++)e.call(t,a[n],n);else if(yr(a))for(l=Object.keys(a),i=l.length,n=0;n<i;n++)e.call(t,a[l[n]],l[n])}function d2(a,e){let t,r,n,i;if(!a||!e||a.length!==e.length)return!1;for(t=0,r=a.length;t<r;++t)if(n=a[t],i=e[t],n.datasetIndex!==i.datasetIndex||n.index!==i.index)return!1;return!0}function u2(a){if(yn(a))return a.map(u2);if(yr(a)){const e=Object.create(null),t=Object.keys(a),r=t.length;let n=0;for(;n<r;++n)e[t[n]]=u2(a[t[n]]);return e}return a}function aU(a){return["__proto__","prototype","constructor"].indexOf(a)===-1}function xie(a,e,t,r){if(!aU(a))return;const n=e[a],i=t[a];yr(n)&&yr(i)?Cv(n,i,r):e[a]=u2(i)}function Cv(a,e,t){const r=yn(e)?e:[e],n=r.length;if(!yr(a))return a;t=t||{};const i=t.merger||xie;let l;for(let o=0;o<n;++o){if(l=r[o],!yr(l))continue;const c=Object.keys(l);for(let d=0,u=c.length;d<u;++d)i(c[d],a,l,t)}return a}function tv(a,e){return Cv(a,e,{merger:mie})}function mie(a,e,t){if(!aU(a))return;const r=e[a],n=t[a];yr(r)&&yr(n)?tv(r,n):Object.prototype.hasOwnProperty.call(e,a)||(e[a]=u2(n))}const aR={"":a=>a,x:a=>a.x,y:a=>a.y};function gie(a){const e=a.split("."),t=[];let r="";for(const n of e)r+=n,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function vie(a){const e=gie(a);return t=>{for(const r of e){if(r==="")break;t=t&&t[r]}return t}}function gh(a,e){return(aR[e]||(aR[e]=vie(e)))(a)}function aT(a){return a.charAt(0).toUpperCase()+a.slice(1)}const Av=a=>typeof a<"u",vh=a=>typeof a=="function",rR=(a,e)=>{if(a.size!==e.size)return!1;for(const t of a)if(!e.has(t))return!1;return!0};function bie(a){return a.type==="mouseup"||a.type==="click"||a.type==="contextmenu"}const Er=Math.PI,mn=2*Er,yie=mn+Er,h2=Number.POSITIVE_INFINITY,wie=Er/180,Yn=Er/2,ef=Er/4,nR=Er*2/3,qu=Math.log10,Nc=Math.sign;function av(a,e,t){return Math.abs(a-e)<t}function iR(a){const e=Math.round(a);a=av(a,e,a/1e3)?e:a;const t=Math.pow(10,Math.floor(qu(a))),r=a/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function _ie(a){const e=[],t=Math.sqrt(a);let r;for(r=1;r<t;r++)a%r===0&&(e.push(r),e.push(a/r));return t===(t|0)&&e.push(t),e.sort((n,i)=>n-i).pop(),e}function Nie(a){return typeof a=="symbol"||typeof a=="object"&&a!==null&&!(Symbol.toPrimitive in a||"toString"in a||"valueOf"in a)}function vx(a){return!Nie(a)&&!isNaN(parseFloat(a))&&isFinite(a)}function jie(a,e){const t=Math.round(a);return t-e<=a&&t+e>=a}function rU(a,e,t){let r,n,i;for(r=0,n=a.length;r<n;r++)i=a[r][t],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function So(a){return a*(Er/180)}function rT(a){return a*(180/Er)}function sR(a){if(!Pn(a))return;let e=1,t=0;for(;Math.round(a*e)/e!==a;)e*=10,t++;return t}function nU(a,e){const t=e.x-a.x,r=e.y-a.y,n=Math.sqrt(t*t+r*r);let i=Math.atan2(r,t);return i<-.5*Er&&(i+=mn),{angle:i,distance:n}}function KC(a,e){return Math.sqrt(Math.pow(e.x-a.x,2)+Math.pow(e.y-a.y,2))}function Sie(a,e){return(a-e+yie)%mn-Er}function ss(a){return(a%mn+mn)%mn}function Tv(a,e,t,r){const n=ss(a),i=ss(e),l=ss(t),o=ss(i-n),c=ss(l-n),d=ss(n-i),u=ss(n-l);return n===i||n===l||r&&i===l||o>c&&d<u}function Di(a,e,t){return Math.max(e,Math.min(t,a))}function kie(a){return Di(a,-32768,32767)}function jd(a,e,t,r=1e-6){return a>=Math.min(e,t)-r&&a<=Math.max(e,t)+r}function nT(a,e,t){t=t||(l=>a[l]<e);let r=a.length-1,n=0,i;for(;r-n>1;)i=n+r>>1,t(i)?n=i:r=i;return{lo:n,hi:r}}const Sd=(a,e,t,r)=>nT(a,t,r?n=>{const i=a[n][e];return i<t||i===t&&a[n+1][e]===t}:n=>a[n][e]<t),Cie=(a,e,t)=>nT(a,t,r=>a[r][e]>=t);function Aie(a,e,t){let r=0,n=a.length;for(;r<n&&a[r]<e;)r++;for(;n>r&&a[n-1]>t;)n--;return r>0||n<a.length?a.slice(r,n):a}const iU=["push","pop","shift","splice","unshift"];function Tie(a,e){if(a._chartjs){a._chartjs.listeners.push(e);return}Object.defineProperty(a,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),iU.forEach(t=>{const r="_onData"+aT(t),n=a[t];Object.defineProperty(a,t,{configurable:!0,enumerable:!1,value(...i){const l=n.apply(this,i);return a._chartjs.listeners.forEach(o=>{typeof o[r]=="function"&&o[r](...i)}),l}})})}function lR(a,e){const t=a._chartjs;if(!t)return;const r=t.listeners,n=r.indexOf(e);n!==-1&&r.splice(n,1),!(r.length>0)&&(iU.forEach(i=>{delete a[i]}),delete a._chartjs)}function sU(a){const e=new Set(a);return e.size===a.length?a:Array.from(e)}const lU=(function(){return typeof window>"u"?function(a){return a()}:window.requestAnimationFrame})();function oU(a,e){let t=[],r=!1;return function(...n){t=n,r||(r=!0,lU.call(window,()=>{r=!1,a.apply(e,t)}))}}function Mie(a,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(a,e,r)):a.apply(this,r),e}}const iT=a=>a==="start"?"left":a==="end"?"right":"center",rs=(a,e,t)=>a==="start"?e:a==="end"?t:(e+t)/2,Eie=(a,e,t,r)=>a===(r?"left":"right")?t:a==="center"?(e+t)/2:e;function cU(a,e,t){const r=e.length;let n=0,i=r;if(a._sorted){const{iScale:l,vScale:o,_parsed:c}=a,d=a.dataset&&a.dataset.options?a.dataset.options.spanGaps:null,u=l.axis,{min:h,max:f,minDefined:p,maxDefined:g}=l.getUserBounds();if(p){if(n=Math.min(Sd(c,u,h).lo,t?r:Sd(e,u,l.getPixelForValue(h)).lo),d){const b=c.slice(0,n+1).reverse().findIndex(w=>!xr(w[o.axis]));n-=Math.max(0,b)}n=Di(n,0,r-1)}if(g){let b=Math.max(Sd(c,l.axis,f,!0).hi+1,t?0:Sd(e,u,l.getPixelForValue(f),!0).hi+1);if(d){const w=c.slice(b-1).findIndex(j=>!xr(j[o.axis]));b+=Math.max(0,w)}i=Di(b,n,r)-n}else i=r-n}return{start:n,count:i}}function dU(a){const{xScale:e,yScale:t,_scaleRanges:r}=a,n={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return a._scaleRanges=n,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,n),i}const Z1=a=>a===0||a===1,oR=(a,e,t)=>-(Math.pow(2,10*(a-=1))*Math.sin((a-e)*mn/t)),cR=(a,e,t)=>Math.pow(2,-10*a)*Math.sin((a-e)*mn/t)+1,rv={linear:a=>a,easeInQuad:a=>a*a,easeOutQuad:a=>-a*(a-2),easeInOutQuad:a=>(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1),easeInCubic:a=>a*a*a,easeOutCubic:a=>(a-=1)*a*a+1,easeInOutCubic:a=>(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2),easeInQuart:a=>a*a*a*a,easeOutQuart:a=>-((a-=1)*a*a*a-1),easeInOutQuart:a=>(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2),easeInQuint:a=>a*a*a*a*a,easeOutQuint:a=>(a-=1)*a*a*a*a+1,easeInOutQuint:a=>(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2),easeInSine:a=>-Math.cos(a*Yn)+1,easeOutSine:a=>Math.sin(a*Yn),easeInOutSine:a=>-.5*(Math.cos(Er*a)-1),easeInExpo:a=>a===0?0:Math.pow(2,10*(a-1)),easeOutExpo:a=>a===1?1:-Math.pow(2,-10*a)+1,easeInOutExpo:a=>Z1(a)?a:a<.5?.5*Math.pow(2,10*(a*2-1)):.5*(-Math.pow(2,-10*(a*2-1))+2),easeInCirc:a=>a>=1?a:-(Math.sqrt(1-a*a)-1),easeOutCirc:a=>Math.sqrt(1-(a-=1)*a),easeInOutCirc:a=>(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1),easeInElastic:a=>Z1(a)?a:oR(a,.075,.3),easeOutElastic:a=>Z1(a)?a:cR(a,.075,.3),easeInOutElastic(a){return Z1(a)?a:a<.5?.5*oR(a*2,.1125,.45):.5+.5*cR(a*2-1,.1125,.45)},easeInBack(a){return a*a*((1.70158+1)*a-1.70158)},easeOutBack(a){return(a-=1)*a*((1.70158+1)*a+1.70158)+1},easeInOutBack(a){let e=1.70158;return(a/=.5)<1?.5*(a*a*(((e*=1.525)+1)*a-e)):.5*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)},easeInBounce:a=>1-rv.easeOutBounce(1-a),easeOutBounce(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},easeInOutBounce:a=>a<.5?rv.easeInBounce(a*2)*.5:rv.easeOutBounce(a*2-1)*.5+.5};function sT(a){if(a&&typeof a=="object"){const e=a.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function dR(a){return sT(a)?a:new eU(a)}function US(a){return sT(a)?a:new eU(a).saturate(.5).darken(.1).hexString()}const Die=["x","y","borderWidth","radius","tension"],Iie=["color","borderColor","backgroundColor"];function Rie(a){a.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),a.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),a.set("animations",{colors:{type:"color",properties:Iie},numbers:{type:"number",properties:Die}}),a.describe("animations",{_fallback:"animation"}),a.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Lie(a){a.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const uR=new Map;function Oie(a,e){e=e||{};const t=a+JSON.stringify(e);let r=uR.get(t);return r||(r=new Intl.NumberFormat(a,e),uR.set(t,r)),r}function Nb(a,e,t){return Oie(e,t).format(a)}const uU={values(a){return yn(a)?a:""+a},numeric(a,e,t){if(a===0)return"0";const r=this.chart.options.locale;let n,i=a;if(t.length>1){const d=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(d<1e-4||d>1e15)&&(n="scientific"),i=Pie(a,t)}const l=qu(Math.abs(i)),o=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),c={notation:n,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(c,this.options.ticks.format),Nb(a,r,c)},logarithmic(a,e,t){if(a===0)return"0";const r=t[e].significand||a/Math.pow(10,Math.floor(qu(a)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?uU.numeric.call(this,a,e,t):""}};function Pie(a,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&a!==Math.floor(a)&&(t=a-Math.floor(a)),t}var U_={formatters:uU};function zie(a){a.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:U_.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),a.route("scale.ticks","color","","color"),a.route("scale.grid","color","","borderColor"),a.route("scale.border","color","","borderColor"),a.route("scale.title","color","","color"),a.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),a.describe("scales",{_fallback:"scale"}),a.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const g0=Object.create(null),QC=Object.create(null);function nv(a,e){if(!e)return a;const t=e.split(".");for(let r=0,n=t.length;r<n;++r){const i=t[r];a=a[i]||(a[i]=Object.create(null))}return a}function GS(a,e,t){return typeof e=="string"?Cv(nv(a,e),t):Cv(nv(a,""),e)}class Bie{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,n)=>US(n.backgroundColor),this.hoverBorderColor=(r,n)=>US(n.borderColor),this.hoverColor=(r,n)=>US(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return GS(this,e,t)}get(e){return nv(this,e)}describe(e,t){return GS(QC,e,t)}override(e,t){return GS(g0,e,t)}route(e,t,r,n){const i=nv(this,e),l=nv(this,r),o="_"+t;Object.defineProperties(i,{[o]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[o],d=l[n];return yr(c)?Object.assign({},d,c):qa(c,d)},set(c){this[o]=c}}})}apply(e){e.forEach(t=>t(this))}}var _n=new Bie({_scriptable:a=>!a.startsWith("on"),_indexable:a=>a!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Rie,Lie,zie]);function Fie(a){return!a||xr(a.size)||xr(a.family)?null:(a.style?a.style+" ":"")+(a.weight?a.weight+" ":"")+a.size+"px "+a.family}function f2(a,e,t,r,n){let i=e[n];return i||(i=e[n]=a.measureText(n).width,t.push(n)),i>r&&(r=i),r}function Vie(a,e,t,r){r=r||{};let n=r.data=r.data||{},i=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(n=r.data={},i=r.garbageCollect=[],r.font=e),a.save(),a.font=e;let l=0;const o=t.length;let c,d,u,h,f;for(c=0;c<o;c++)if(h=t[c],h!=null&&!yn(h))l=f2(a,n,i,l,h);else if(yn(h))for(d=0,u=h.length;d<u;d++)f=h[d],f!=null&&!yn(f)&&(l=f2(a,n,i,l,f));a.restore();const p=i.length/2;if(p>t.length){for(c=0;c<p;c++)delete n[i[c]];i.splice(0,p)}return l}function tf(a,e,t){const r=a.currentDevicePixelRatio,n=t!==0?Math.max(t/2,.5):0;return Math.round((e-n)*r)/r+n}function hR(a,e){!e&&!a||(e=e||a.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,a.width,a.height),e.restore())}function JC(a,e,t,r){hU(a,e,t,r,null)}function hU(a,e,t,r,n){let i,l,o,c,d,u,h,f;const p=e.pointStyle,g=e.rotation,b=e.radius;let w=(g||0)*wie;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){a.save(),a.translate(t,r),a.rotate(w),a.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),a.restore();return}if(!(isNaN(b)||b<=0)){switch(a.beginPath(),p){default:n?a.ellipse(t,r,n/2,b,0,0,mn):a.arc(t,r,b,0,mn),a.closePath();break;case"triangle":u=n?n/2:b,a.moveTo(t+Math.sin(w)*u,r-Math.cos(w)*b),w+=nR,a.lineTo(t+Math.sin(w)*u,r-Math.cos(w)*b),w+=nR,a.lineTo(t+Math.sin(w)*u,r-Math.cos(w)*b),a.closePath();break;case"rectRounded":d=b*.516,c=b-d,l=Math.cos(w+ef)*c,h=Math.cos(w+ef)*(n?n/2-d:c),o=Math.sin(w+ef)*c,f=Math.sin(w+ef)*(n?n/2-d:c),a.arc(t-h,r-o,d,w-Er,w-Yn),a.arc(t+f,r-l,d,w-Yn,w),a.arc(t+h,r+o,d,w,w+Yn),a.arc(t-f,r+l,d,w+Yn,w+Er),a.closePath();break;case"rect":if(!g){c=Math.SQRT1_2*b,u=n?n/2:c,a.rect(t-u,r-c,2*u,2*c);break}w+=ef;case"rectRot":h=Math.cos(w)*(n?n/2:b),l=Math.cos(w)*b,o=Math.sin(w)*b,f=Math.sin(w)*(n?n/2:b),a.moveTo(t-h,r-o),a.lineTo(t+f,r-l),a.lineTo(t+h,r+o),a.lineTo(t-f,r+l),a.closePath();break;case"crossRot":w+=ef;case"cross":h=Math.cos(w)*(n?n/2:b),l=Math.cos(w)*b,o=Math.sin(w)*b,f=Math.sin(w)*(n?n/2:b),a.moveTo(t-h,r-o),a.lineTo(t+h,r+o),a.moveTo(t+f,r-l),a.lineTo(t-f,r+l);break;case"star":h=Math.cos(w)*(n?n/2:b),l=Math.cos(w)*b,o=Math.sin(w)*b,f=Math.sin(w)*(n?n/2:b),a.moveTo(t-h,r-o),a.lineTo(t+h,r+o),a.moveTo(t+f,r-l),a.lineTo(t-f,r+l),w+=ef,h=Math.cos(w)*(n?n/2:b),l=Math.cos(w)*b,o=Math.sin(w)*b,f=Math.sin(w)*(n?n/2:b),a.moveTo(t-h,r-o),a.lineTo(t+h,r+o),a.moveTo(t+f,r-l),a.lineTo(t-f,r+l);break;case"line":l=n?n/2:Math.cos(w)*b,o=Math.sin(w)*b,a.moveTo(t-l,r-o),a.lineTo(t+l,r+o);break;case"dash":a.moveTo(t,r),a.lineTo(t+Math.cos(w)*(n?n/2:b),r+Math.sin(w)*b);break;case!1:a.closePath();break}a.fill(),e.borderWidth>0&&a.stroke()}}function kd(a,e,t){return t=t||.5,!e||a&&a.x>e.left-t&&a.x<e.right+t&&a.y>e.top-t&&a.y<e.bottom+t}function G_(a,e){a.save(),a.beginPath(),a.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),a.clip()}function W_(a){a.restore()}function Hie(a,e,t,r,n){if(!e)return a.lineTo(t.x,t.y);if(n==="middle"){const i=(e.x+t.x)/2;a.lineTo(i,e.y),a.lineTo(i,t.y)}else n==="after"!=!!r?a.lineTo(e.x,t.y):a.lineTo(t.x,e.y);a.lineTo(t.x,t.y)}function Uie(a,e,t,r){if(!e)return a.lineTo(t.x,t.y);a.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function Gie(a,e){e.translation&&a.translate(e.translation[0],e.translation[1]),xr(e.rotation)||a.rotate(e.rotation),e.color&&(a.fillStyle=e.color),e.textAlign&&(a.textAlign=e.textAlign),e.textBaseline&&(a.textBaseline=e.textBaseline)}function Wie(a,e,t,r,n){if(n.strikethrough||n.underline){const i=a.measureText(r),l=e-i.actualBoundingBoxLeft,o=e+i.actualBoundingBoxRight,c=t-i.actualBoundingBoxAscent,d=t+i.actualBoundingBoxDescent,u=n.strikethrough?(c+d)/2:d;a.strokeStyle=a.fillStyle,a.beginPath(),a.lineWidth=n.decorationWidth||2,a.moveTo(l,u),a.lineTo(o,u),a.stroke()}}function Yie(a,e){const t=a.fillStyle;a.fillStyle=e.color,a.fillRect(e.left,e.top,e.width,e.height),a.fillStyle=t}function v0(a,e,t,r,n,i={}){const l=yn(e)?e:[e],o=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(a.save(),a.font=n.string,Gie(a,i),c=0;c<l.length;++c)d=l[c],i.backdrop&&Yie(a,i.backdrop),o&&(i.strokeColor&&(a.strokeStyle=i.strokeColor),xr(i.strokeWidth)||(a.lineWidth=i.strokeWidth),a.strokeText(d,t,r,i.maxWidth)),a.fillText(d,t,r,i.maxWidth),Wie(a,t,r,d,i),r+=Number(n.lineHeight);a.restore()}function Mv(a,e){const{x:t,y:r,w:n,h:i,radius:l}=e;a.arc(t+l.topLeft,r+l.topLeft,l.topLeft,1.5*Er,Er,!0),a.lineTo(t,r+i-l.bottomLeft),a.arc(t+l.bottomLeft,r+i-l.bottomLeft,l.bottomLeft,Er,Yn,!0),a.lineTo(t+n-l.bottomRight,r+i),a.arc(t+n-l.bottomRight,r+i-l.bottomRight,l.bottomRight,Yn,0,!0),a.lineTo(t+n,r+l.topRight),a.arc(t+n-l.topRight,r+l.topRight,l.topRight,0,-Yn,!0),a.lineTo(t+l.topLeft,r)}const $ie=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,qie=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Xie(a,e){const t=(""+a).match($ie);if(!t||t[1]==="normal")return e*1.2;switch(a=+t[2],t[3]){case"px":return a;case"%":a/=100;break}return e*a}const Zie=a=>+a||0;function lT(a,e){const t={},r=yr(e),n=r?Object.keys(e):e,i=yr(a)?r?l=>qa(a[l],a[e[l]]):l=>a[l]:()=>a;for(const l of n)t[l]=Zie(i(l));return t}function fU(a){return lT(a,{top:"y",right:"x",bottom:"y",left:"x"})}function e0(a){return lT(a,["topLeft","topRight","bottomLeft","bottomRight"])}function cs(a){const e=fU(a);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function wi(a,e){a=a||{},e=e||_n.font;let t=qa(a.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=qa(a.style,e.style);r&&!(""+r).match(qie)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const n={family:qa(a.family,e.family),lineHeight:Xie(qa(a.lineHeight,e.lineHeight),t),size:t,style:r,weight:qa(a.weight,e.weight),string:""};return n.string=Fie(n),n}function Ig(a,e,t,r){let n,i,l;for(n=0,i=a.length;n<i;++n)if(l=a[n],l!==void 0&&l!==void 0)return l}function Kie(a,e,t){const{min:r,max:n}=a,i=tU(e,(n-r)/2),l=(o,c)=>t&&o===0?0:o+c;return{min:l(r,-Math.abs(i)),max:l(n,i)}}function Ah(a,e){return Object.assign(Object.create(a),e)}function oT(a,e=[""],t,r,n=()=>a[0]){const i=t||a;typeof r>"u"&&(r=gU("_fallback",a));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:a,_rootScopes:i,_fallback:r,_getTarget:n,override:o=>oT([o,...a],e,i,r)};return new Proxy(l,{deleteProperty(o,c){return delete o[c],delete o._keys,delete a[0][c],!0},get(o,c){return xU(o,c,()=>ise(c,e,a,o))},getOwnPropertyDescriptor(o,c){return Reflect.getOwnPropertyDescriptor(o._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(a[0])},has(o,c){return pR(o).includes(c)},ownKeys(o){return pR(o)},set(o,c,d){const u=o._storage||(o._storage=n());return o[c]=u[c]=d,delete o._keys,!0}})}function bx(a,e,t,r){const n={_cacheable:!1,_proxy:a,_context:e,_subProxy:t,_stack:new Set,_descriptors:pU(a,r),setContext:i=>bx(a,i,t,r),override:i=>bx(a.override(i),e,t,r)};return new Proxy(n,{deleteProperty(i,l){return delete i[l],delete a[l],!0},get(i,l,o){return xU(i,l,()=>Jie(i,l,o))},getOwnPropertyDescriptor(i,l){return i._descriptors.allKeys?Reflect.has(a,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(a,l)},getPrototypeOf(){return Reflect.getPrototypeOf(a)},has(i,l){return Reflect.has(a,l)},ownKeys(){return Reflect.ownKeys(a)},set(i,l,o){return a[l]=o,delete i[l],!0}})}function pU(a,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:n=e.allKeys}=a;return{allKeys:n,scriptable:t,indexable:r,isScriptable:vh(t)?t:()=>t,isIndexable:vh(r)?r:()=>r}}const Qie=(a,e)=>a?a+aT(e):e,cT=(a,e)=>yr(e)&&a!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function xU(a,e,t){if(Object.prototype.hasOwnProperty.call(a,e)||e==="constructor")return a[e];const r=t();return a[e]=r,r}function Jie(a,e,t){const{_proxy:r,_context:n,_subProxy:i,_descriptors:l}=a;let o=r[e];return vh(o)&&l.isScriptable(e)&&(o=ese(e,o,a,t)),yn(o)&&o.length&&(o=tse(e,o,a,l.isIndexable)),cT(e,o)&&(o=bx(o,n,i&&i[e],l)),o}function ese(a,e,t,r){const{_proxy:n,_context:i,_subProxy:l,_stack:o}=t;if(o.has(a))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+a);o.add(a);let c=e(i,l||r);return o.delete(a),cT(a,c)&&(c=dT(n._scopes,n,a,c)),c}function tse(a,e,t,r){const{_proxy:n,_context:i,_subProxy:l,_descriptors:o}=t;if(typeof i.index<"u"&&r(a))return e[i.index%e.length];if(yr(e[0])){const c=e,d=n._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=dT(d,n,a,u);e.push(bx(h,i,l&&l[a],o))}}return e}function mU(a,e,t){return vh(a)?a(e,t):a}const ase=(a,e)=>a===!0?e:typeof a=="string"?gh(e,a):void 0;function rse(a,e,t,r,n){for(const i of e){const l=ase(t,i);if(l){a.add(l);const o=mU(l._fallback,t,n);if(typeof o<"u"&&o!==t&&o!==r)return o}else if(l===!1&&typeof r<"u"&&t!==r)return null}return!1}function dT(a,e,t,r){const n=e._rootScopes,i=mU(e._fallback,t,r),l=[...a,...n],o=new Set;o.add(r);let c=fR(o,l,t,i||t,r);return c===null||typeof i<"u"&&i!==t&&(c=fR(o,l,i,c,r),c===null)?!1:oT(Array.from(o),[""],n,i,()=>nse(e,t,r))}function fR(a,e,t,r,n){for(;t;)t=rse(a,e,t,r,n);return t}function nse(a,e,t){const r=a._getTarget();e in r||(r[e]={});const n=r[e];return yn(n)&&yr(t)?t:n||{}}function ise(a,e,t,r){let n;for(const i of e)if(n=gU(Qie(i,a),t),typeof n<"u")return cT(a,n)?dT(t,r,a,n):n}function gU(a,e){for(const t of e){if(!t)continue;const r=t[a];if(typeof r<"u")return r}}function pR(a){let e=a._keys;return e||(e=a._keys=sse(a._scopes)),e}function sse(a){const e=new Set;for(const t of a)for(const r of Object.keys(t).filter(n=>!n.startsWith("_")))e.add(r);return Array.from(e)}function vU(a,e,t,r){const{iScale:n}=a,{key:i="r"}=this._parsing,l=new Array(r);let o,c,d,u;for(o=0,c=r;o<c;++o)d=o+t,u=e[d],l[o]={r:n.parse(gh(u,i),d)};return l}const lse=Number.EPSILON||1e-14,yx=(a,e)=>e<a.length&&!a[e].skip&&a[e],bU=a=>a==="x"?"y":"x";function ose(a,e,t,r){const n=a.skip?e:a,i=e,l=t.skip?e:t,o=KC(i,n),c=KC(l,i);let d=o/(o+c),u=c/(o+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=r*d,f=r*u;return{previous:{x:i.x-h*(l.x-n.x),y:i.y-h*(l.y-n.y)},next:{x:i.x+f*(l.x-n.x),y:i.y+f*(l.y-n.y)}}}function cse(a,e,t){const r=a.length;let n,i,l,o,c,d=yx(a,0);for(let u=0;u<r-1;++u)if(c=d,d=yx(a,u+1),!(!c||!d)){if(av(e[u],0,lse)){t[u]=t[u+1]=0;continue}n=t[u]/e[u],i=t[u+1]/e[u],o=Math.pow(n,2)+Math.pow(i,2),!(o<=9)&&(l=3/Math.sqrt(o),t[u]=n*l*e[u],t[u+1]=i*l*e[u])}}function dse(a,e,t="x"){const r=bU(t),n=a.length;let i,l,o,c=yx(a,0);for(let d=0;d<n;++d){if(l=o,o=c,c=yx(a,d+1),!o)continue;const u=o[t],h=o[r];l&&(i=(u-l[t])/3,o[`cp1${t}`]=u-i,o[`cp1${r}`]=h-i*e[d]),c&&(i=(c[t]-u)/3,o[`cp2${t}`]=u+i,o[`cp2${r}`]=h+i*e[d])}}function use(a,e="x"){const t=bU(e),r=a.length,n=Array(r).fill(0),i=Array(r);let l,o,c,d=yx(a,0);for(l=0;l<r;++l)if(o=c,c=d,d=yx(a,l+1),!!c){if(d){const u=d[e]-c[e];n[l]=u!==0?(d[t]-c[t])/u:0}i[l]=o?d?Nc(n[l-1])!==Nc(n[l])?0:(n[l-1]+n[l])/2:n[l-1]:n[l]}cse(a,n,i),dse(a,i,e)}function K1(a,e,t){return Math.max(Math.min(a,t),e)}function hse(a,e){let t,r,n,i,l,o=kd(a[0],e);for(t=0,r=a.length;t<r;++t)l=i,i=o,o=t<r-1&&kd(a[t+1],e),i&&(n=a[t],l&&(n.cp1x=K1(n.cp1x,e.left,e.right),n.cp1y=K1(n.cp1y,e.top,e.bottom)),o&&(n.cp2x=K1(n.cp2x,e.left,e.right),n.cp2y=K1(n.cp2y,e.top,e.bottom)))}function fse(a,e,t,r,n){let i,l,o,c;if(e.spanGaps&&(a=a.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")use(a,n);else{let d=r?a[a.length-1]:a[0];for(i=0,l=a.length;i<l;++i)o=a[i],c=ose(d,o,a[Math.min(i+1,l-(r?0:1))%l],e.tension),o.cp1x=c.previous.x,o.cp1y=c.previous.y,o.cp2x=c.next.x,o.cp2y=c.next.y,d=o}e.capBezierPoints&&hse(a,t)}function uT(){return typeof window<"u"&&typeof document<"u"}function hT(a){let e=a.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function p2(a,e,t){let r;return typeof a=="string"?(r=parseInt(a,10),a.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=a,r}const Y_=a=>a.ownerDocument.defaultView.getComputedStyle(a,null);function pse(a,e){return Y_(a).getPropertyValue(e)}const xse=["top","right","bottom","left"];function t0(a,e,t){const r={};t=t?"-"+t:"";for(let n=0;n<4;n++){const i=xse[n];r[i]=parseFloat(a[e+"-"+i+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const mse=(a,e,t)=>(a>0||e>0)&&(!t||!t.shadowRoot);function gse(a,e){const t=a.touches,r=t&&t.length?t[0]:a,{offsetX:n,offsetY:i}=r;let l=!1,o,c;if(mse(n,i,a.target))o=n,c=i;else{const d=e.getBoundingClientRect();o=r.clientX-d.left,c=r.clientY-d.top,l=!0}return{x:o,y:c,box:l}}function If(a,e){if("native"in a)return a;const{canvas:t,currentDevicePixelRatio:r}=e,n=Y_(t),i=n.boxSizing==="border-box",l=t0(n,"padding"),o=t0(n,"border","width"),{x:c,y:d,box:u}=gse(a,t),h=l.left+(u&&o.left),f=l.top+(u&&o.top);let{width:p,height:g}=e;return i&&(p-=l.width+o.width,g-=l.height+o.height),{x:Math.round((c-h)/p*t.width/r),y:Math.round((d-f)/g*t.height/r)}}function vse(a,e,t){let r,n;if(e===void 0||t===void 0){const i=a&&hT(a);if(!i)e=a.clientWidth,t=a.clientHeight;else{const l=i.getBoundingClientRect(),o=Y_(i),c=t0(o,"border","width"),d=t0(o,"padding");e=l.width-d.width-c.width,t=l.height-d.height-c.height,r=p2(o.maxWidth,i,"clientWidth"),n=p2(o.maxHeight,i,"clientHeight")}}return{width:e,height:t,maxWidth:r||h2,maxHeight:n||h2}}const Xu=a=>Math.round(a*10)/10;function bse(a,e,t,r){const n=Y_(a),i=t0(n,"margin"),l=p2(n.maxWidth,a,"clientWidth")||h2,o=p2(n.maxHeight,a,"clientHeight")||h2,c=vse(a,e,t);let{width:d,height:u}=c;if(n.boxSizing==="content-box"){const f=t0(n,"border","width"),p=t0(n,"padding");d-=p.width+f.width,u-=p.height+f.height}return d=Math.max(0,d-i.width),u=Math.max(0,r?d/r:u-i.height),d=Xu(Math.min(d,l,c.maxWidth)),u=Xu(Math.min(u,o,c.maxHeight)),d&&!u&&(u=Xu(d/2)),(e!==void 0||t!==void 0)&&r&&c.height&&u>c.height&&(u=c.height,d=Xu(Math.floor(u*r))),{width:d,height:u}}function xR(a,e,t){const r=e||1,n=Xu(a.height*r),i=Xu(a.width*r);a.height=Xu(a.height),a.width=Xu(a.width);const l=a.canvas;return l.style&&(t||!l.style.height&&!l.style.width)&&(l.style.height=`${a.height}px`,l.style.width=`${a.width}px`),a.currentDevicePixelRatio!==r||l.height!==n||l.width!==i?(a.currentDevicePixelRatio=r,l.height=n,l.width=i,a.ctx.setTransform(r,0,0,r,0,0),!0):!1}const yse=(function(){let a=!1;try{const e={get passive(){return a=!0,!1}};uT()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return a})();function mR(a,e){const t=pse(a,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Rf(a,e,t,r){return{x:a.x+t*(e.x-a.x),y:a.y+t*(e.y-a.y)}}function wse(a,e,t,r){return{x:a.x+t*(e.x-a.x),y:r==="middle"?t<.5?a.y:e.y:r==="after"?t<1?a.y:e.y:t>0?e.y:a.y}}function _se(a,e,t,r){const n={x:a.cp2x,y:a.cp2y},i={x:e.cp1x,y:e.cp1y},l=Rf(a,n,t),o=Rf(n,i,t),c=Rf(i,e,t),d=Rf(l,o,t),u=Rf(o,c,t);return Rf(d,u,t)}const Nse=function(a,e){return{x(t){return a+a+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},jse=function(){return{x(a){return a},setWidth(a){},textAlign(a){return a},xPlus(a,e){return a+e},leftForLtr(a,e){return a}}};function lx(a,e,t){return a?Nse(e,t):jse()}function yU(a,e){let t,r;(e==="ltr"||e==="rtl")&&(t=a.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),a.prevTextDirection=r)}function wU(a,e){e!==void 0&&(delete a.prevTextDirection,a.canvas.style.setProperty("direction",e[0],e[1]))}function _U(a){return a==="angle"?{between:Tv,compare:Sie,normalize:ss}:{between:jd,compare:(e,t)=>e-t,normalize:e=>e}}function gR({start:a,end:e,count:t,loop:r,style:n}){return{start:a%t,end:e%t,loop:r&&(e-a+1)%t===0,style:n}}function Sse(a,e,t){const{property:r,start:n,end:i}=t,{between:l,normalize:o}=_U(r),c=e.length;let{start:d,end:u,loop:h}=a,f,p;if(h){for(d+=c,u+=c,f=0,p=c;f<p&&l(o(e[d%c][r]),n,i);++f)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:a.style}}function NU(a,e,t){if(!t)return[a];const{property:r,start:n,end:i}=t,l=e.length,{compare:o,between:c,normalize:d}=_U(r),{start:u,end:h,loop:f,style:p}=Sse(a,e,t),g=[];let b=!1,w=null,j,k,T;const E=()=>c(n,T,j)&&o(n,T)!==0,I=()=>o(i,j)===0||c(i,T,j),R=()=>b||E(),P=()=>!b||I();for(let H=u,G=u;H<=h;++H)k=e[H%l],!k.skip&&(j=d(k[r]),j!==T&&(b=c(j,n,i),w===null&&R()&&(w=o(j,n)===0?H:G),w!==null&&P()&&(g.push(gR({start:w,end:H,loop:f,count:l,style:p})),w=null),G=H,T=j));return w!==null&&g.push(gR({start:w,end:h,loop:f,count:l,style:p})),g}function jU(a,e){const t=[],r=a.segments;for(let n=0;n<r.length;n++){const i=NU(r[n],a.points,e);i.length&&t.push(...i)}return t}function kse(a,e,t,r){let n=0,i=e-1;if(t&&!r)for(;n<e&&!a[n].skip;)n++;for(;n<e&&a[n].skip;)n++;for(n%=e,t&&(i+=n);i>n&&a[i%e].skip;)i--;return i%=e,{start:n,end:i}}function Cse(a,e,t,r){const n=a.length,i=[];let l=e,o=a[e],c;for(c=e+1;c<=t;++c){const d=a[c%n];d.skip||d.stop?o.skip||(r=!1,i.push({start:e%n,end:(c-1)%n,loop:r}),e=l=d.stop?c:null):(l=c,o.skip&&(e=c)),o=d}return l!==null&&i.push({start:e%n,end:l%n,loop:r}),i}function Ase(a,e){const t=a.points,r=a.options.spanGaps,n=t.length;if(!n)return[];const i=!!a._loop,{start:l,end:o}=kse(t,n,i,r);if(r===!0)return vR(a,[{start:l,end:o,loop:i}],t,e);const c=o<l?o+n:o,d=!!a._fullLoop&&l===0&&o===n-1;return vR(a,Cse(t,l,c,d),t,e)}function vR(a,e,t,r){return!r||!r.setContext||!t?e:Tse(a,e,t,r)}function Tse(a,e,t,r){const n=a._chart.getContext(),i=bR(a.options),{_datasetIndex:l,options:{spanGaps:o}}=a,c=t.length,d=[];let u=i,h=e[0].start,f=h;function p(g,b,w,j){const k=o?-1:1;if(g!==b){for(g+=c;t[g%c].skip;)g-=k;for(;t[b%c].skip;)b+=k;g%c!==b%c&&(d.push({start:g%c,end:b%c,loop:w,style:j}),u=j,h=b%c)}}for(const g of e){h=o?h:g.start;let b=t[h%c],w;for(f=h+1;f<=g.end;f++){const j=t[f%c];w=bR(r.setContext(Ah(n,{type:"segment",p0:b,p1:j,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:l}))),Mse(w,u)&&p(h,f-1,g.loop,u),b=j,u=w}h<f-1&&p(h,f-1,g.loop,u)}return d}function bR(a){return{backgroundColor:a.backgroundColor,borderCapStyle:a.borderCapStyle,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderJoinStyle:a.borderJoinStyle,borderWidth:a.borderWidth,borderColor:a.borderColor}}function Mse(a,e){if(!e)return!1;const t=[],r=function(n,i){return sT(i)?(t.includes(i)||t.push(i),t.indexOf(i)):i};return JSON.stringify(a,r)!==JSON.stringify(e,r)}function Q1(a,e,t){return a.options.clip?a[t]:e[t]}function Ese(a,e){const{xScale:t,yScale:r}=a;return t&&r?{left:Q1(t,e,"left"),right:Q1(t,e,"right"),top:Q1(r,e,"top"),bottom:Q1(r,e,"bottom")}:e}function SU(a,e){const t=e._clip;if(t.disabled)return!1;const r=Ese(e,a.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?a.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?a.height:r.bottom+(t.bottom===!0?0:t.bottom)}}let Dse=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,n){const i=t.listeners[n],l=t.duration;i.forEach(o=>o({chart:e,initial:t.initial,numSteps:l,currentStep:Math.min(r-t.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=lU.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,n)=>{if(!r.running||!r.items.length)return;const i=r.items;let l=i.length-1,o=!1,c;for(;l>=0;--l)c=i[l],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),o=!0):(i[l]=i[i.length-1],i.pop());o&&(n.draw(),this._notify(n,r,e,"progress")),i.length||(r.running=!1,this._notify(n,r,e,"complete"),r.initial=!1),t+=i.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,n)=>Math.max(r,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let n=r.length-1;for(;n>=0;--n)r[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}};var md=new Dse;const yR="transparent",Ise={boolean(a,e,t){return t>.5?e:a},color(a,e,t){const r=dR(a||yR),n=r.valid&&dR(e||yR);return n&&n.valid?n.mix(r,t).hexString():e},number(a,e,t){return a+(e-a)*t}};let Rse=class{constructor(e,t,r,n){const i=t[r];n=Ig([e.to,n,i,e.from]);const l=Ig([e.from,i,n]);this._active=!0,this._fn=e.fn||Ise[e.type||typeof l],this._easing=rv[e.easing]||rv.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=l,this._to=n,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const n=this._target[this._prop],i=r-this._start,l=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Ig([e.to,t,n,e.from]),this._from=Ig([e.from,n,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,n=this._prop,i=this._from,l=this._loop,o=this._to;let c;if(this._active=i!==o&&(l||t<r),!this._active){this._target[n]=o,this._notify(!0);return}if(t<0){this._target[n]=i;return}c=t/r%2,c=l&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[n]=this._fn(i,o,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let n=0;n<r.length;n++)r[n][t]()}};class kU{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!yr(e))return;const t=Object.keys(_n.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const i=e[n];if(!yr(i))return;const l={};for(const o of t)l[o]=i[o];(yn(i.properties)&&i.properties||[n]).forEach(o=>{(o===n||!r.has(o))&&r.set(o,l)})})}_animateOptions(e,t){const r=t.options,n=Ose(e,r);if(!n)return[];const i=this._createAnimations(n,r);return r.$shared&&Lse(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,t){const r=this._properties,n=[],i=e.$animations||(e.$animations={}),l=Object.keys(t),o=Date.now();let c;for(c=l.length-1;c>=0;--c){const d=l[c];if(d.charAt(0)==="$")continue;if(d==="options"){n.push(...this._animateOptions(e,t));continue}const u=t[d];let h=i[d];const f=r.get(d);if(h)if(f&&h.active()){h.update(f,u,o);continue}else h.cancel();if(!f||!f.duration){e[d]=u;continue}i[d]=h=new Rse(f,e,d,u),n.push(h)}return n}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const r=this._createAnimations(e,t);if(r.length)return md.add(this._chart,r),!0}}function Lse(a,e){const t=[],r=Object.keys(e);for(let n=0;n<r.length;n++){const i=a[r[n]];i&&i.active()&&t.push(i.wait())}return Promise.all(t)}function Ose(a,e){if(!e)return;let t=a.options;if(!t){a.options=e;return}return t.$shared&&(a.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function wR(a,e){const t=a&&a.options||{},r=t.reverse,n=t.min===void 0?e:0,i=t.max===void 0?e:0;return{start:r?i:n,end:r?n:i}}function Pse(a,e,t){if(t===!1)return!1;const r=wR(a,t),n=wR(e,t);return{top:n.end,right:r.end,bottom:n.start,left:r.start}}function zse(a){let e,t,r,n;return yr(a)?(e=a.top,t=a.right,r=a.bottom,n=a.left):e=t=r=n=a,{top:e,right:t,bottom:r,left:n,disabled:a===!1}}function CU(a,e){const t=[],r=a._getSortedDatasetMetas(e);let n,i;for(n=0,i=r.length;n<i;++n)t.push(r[n].index);return t}function _R(a,e,t,r={}){const n=a.keys,i=r.mode==="single";let l,o,c,d;if(e===null)return;let u=!1;for(l=0,o=n.length;l<o;++l){if(c=+n[l],c===t){if(u=!0,r.all)continue;break}d=a.values[c],Pn(d)&&(i||e===0||Nc(e)===Nc(d))&&(e+=d)}return!u&&!r.all?0:e}function Bse(a,e){const{iScale:t,vScale:r}=e,n=t.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",l=Object.keys(a),o=new Array(l.length);let c,d,u;for(c=0,d=l.length;c<d;++c)u=l[c],o[c]={[n]:u,[i]:a[u]};return o}function WS(a,e){const t=a&&a.options.stacked;return t||t===void 0&&e.stack!==void 0}function Fse(a,e,t){return`${a.id}.${e.id}.${t.stack||t.type}`}function Vse(a){const{min:e,max:t,minDefined:r,maxDefined:n}=a.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:n?t:Number.POSITIVE_INFINITY}}function Hse(a,e,t){const r=a[e]||(a[e]={});return r[t]||(r[t]={})}function NR(a,e,t,r){for(const n of e.getMatchingVisibleMetas(r).reverse()){const i=a[n.index];if(t&&i>0||!t&&i<0)return n.index}return null}function jR(a,e){const{chart:t,_cachedMeta:r}=a,n=t._stacks||(t._stacks={}),{iScale:i,vScale:l,index:o}=r,c=i.axis,d=l.axis,u=Fse(i,l,r),h=e.length;let f;for(let p=0;p<h;++p){const g=e[p],{[c]:b,[d]:w}=g,j=g._stacks||(g._stacks={});f=j[d]=Hse(n,u,b),f[o]=w,f._top=NR(f,l,!0,r.type),f._bottom=NR(f,l,!1,r.type);const k=f._visualValues||(f._visualValues={});k[o]=w}}function YS(a,e){const t=a.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function Use(a,e){return Ah(a,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Gse(a,e,t){return Ah(a,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Um(a,e){const t=a.controller.index,r=a.vScale&&a.vScale.axis;if(r){e=e||a._parsed;for(const n of e){const i=n._stacks;if(!i||i[r]===void 0||i[r][t]===void 0)return;delete i[r][t],i[r]._visualValues!==void 0&&i[r]._visualValues[t]!==void 0&&delete i[r]._visualValues[t]}}}const $S=a=>a==="reset"||a==="none",SR=(a,e)=>e?a:Object.assign({},a),Wse=(a,e,t)=>a&&!e.hidden&&e._stacked&&{keys:CU(t,!0),values:null};class Th{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=WS(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Um(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),n=(h,f,p,g)=>h==="x"?f:h==="r"?g:p,i=t.xAxisID=qa(r.xAxisID,YS(e,"x")),l=t.yAxisID=qa(r.yAxisID,YS(e,"y")),o=t.rAxisID=qa(r.rAxisID,YS(e,"r")),c=t.indexAxis,d=t.iAxisID=n(c,i,l,o),u=t.vAxisID=n(c,l,i,o);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(l),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(d),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&lR(this._data,this),e._stacked&&Um(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(yr(t)){const n=this._cachedMeta;this._data=Bse(t,n)}else if(r!==t){if(r){lR(r,this);const n=this._cachedMeta;Um(n),n._parsed=[]}t&&Object.isExtensible(t)&&Tie(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let n=!1;this._dataCheck();const i=t._stacked;t._stacked=WS(t.vScale,t),t.stack!==r.stack&&(n=!0,Um(t),t.stack=r.stack),this._resyncElements(e),(n||i!==t._stacked)&&(jR(this,t._parsed),t._stacked=WS(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:n}=this,{iScale:i,_stacked:l}=r,o=i.axis;let c=e===0&&t===n.length?!0:r._sorted,d=e>0&&r._parsed[e-1],u,h,f;if(this._parsing===!1)r._parsed=n,r._sorted=!0,f=n;else{yn(n[e])?f=this.parseArrayData(r,n,e,t):yr(n[e])?f=this.parseObjectData(r,n,e,t):f=this.parsePrimitiveData(r,n,e,t);const p=()=>h[o]===null||d&&h[o]<d[o];for(u=0;u<t;++u)r._parsed[u+e]=h=f[u],c&&(p()&&(c=!1),d=h);r._sorted=c}l&&jR(this,f)}parsePrimitiveData(e,t,r,n){const{iScale:i,vScale:l}=e,o=i.axis,c=l.axis,d=i.getLabels(),u=i===l,h=new Array(n);let f,p,g;for(f=0,p=n;f<p;++f)g=f+r,h[f]={[o]:u||i.parse(d[g],g),[c]:l.parse(t[g],g)};return h}parseArrayData(e,t,r,n){const{xScale:i,yScale:l}=e,o=new Array(n);let c,d,u,h;for(c=0,d=n;c<d;++c)u=c+r,h=t[u],o[c]={x:i.parse(h[0],u),y:l.parse(h[1],u)};return o}parseObjectData(e,t,r,n){const{xScale:i,yScale:l}=e,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=new Array(n);let u,h,f,p;for(u=0,h=n;u<h;++u)f=u+r,p=t[f],d[u]={x:i.parse(gh(p,o),f),y:l.parse(gh(p,c),f)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const n=this.chart,i=this._cachedMeta,l=t[e.axis],o={keys:CU(n,!0),values:t._stacks[e.axis]._visualValues};return _R(o,l,i.index,{mode:r})}updateRangeFromParsed(e,t,r,n){const i=r[t.axis];let l=i===null?NaN:i;const o=n&&r._stacks[t.axis];n&&o&&(n.values=o,l=_R(n,i,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,t){const r=this._cachedMeta,n=r._parsed,i=r._sorted&&e===r.iScale,l=n.length,o=this._getOtherScale(e),c=Wse(t,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=Vse(o);let f,p;function g(){p=n[f];const b=p[o.axis];return!Pn(p[e.axis])||u>b||h<b}for(f=0;f<l&&!(!g()&&(this.updateRangeFromParsed(d,e,p,c),i));++f);if(i){for(f=l-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(d,e,p,c);break}}return d}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let n,i,l;for(n=0,i=t.length;n<i;++n)l=t[n][e.axis],Pn(l)&&r.push(l);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,n=t.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:n?""+n.getLabelForValue(i[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=zse(qa(this.options.clip,Pse(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,n=r.data||[],i=t.chartArea,l=[],o=this._drawStart||0,c=this._drawCount||n.length-o,d=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,i,o,c),u=o;u<o+c;++u){const h=n[u];h.hidden||(h.active&&d?l.push(h):h.draw(e,i))}for(u=0;u<l.length;++u)l[u].draw(e,i)}getStyle(e,t){const r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const n=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];i=l.$context||(l.$context=Gse(this.getContext(),e,l)),i.parsed=this.getParsed(e),i.raw=n.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Use(this.chart.getContext(),this.index)),i.dataset=n,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const n=t==="active",i=this._cachedDataOpts,l=e+"-"+t,o=i[l],c=this.enableOptionSharing&&Av(r);if(o)return SR(o,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=n?[`${e}Hover`,"hover",e,""]:[e,""],f=d.getOptionScopes(this.getDataset(),u),p=Object.keys(_n.elements[e]),g=()=>this.getContext(r,n,t),b=d.resolveNamedOptions(f,p,g,h);return b.$shared&&(b.$shared=c,i[l]=Object.freeze(SR(b,c))),b}_resolveAnimations(e,t,r){const n=this.chart,i=this._cachedDataOpts,l=`animation-${t}`,o=i[l];if(o)return o;let c;if(n.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,t),f=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(f,this.getContext(e,r,t))}const d=new kU(n,c&&c.animations);return c&&c._cacheable&&(i[l]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||$S(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),n=this._sharedOptions,i=this.getSharedOptions(r),l=this.includeOptions(t,i)||i!==n;return this.updateSharedOptions(i,t,r),{sharedOptions:i,includeOptions:l}}updateElement(e,t,r,n){$S(n)?Object.assign(e,r):this._resolveAnimations(t,n).update(e,r)}updateSharedOptions(e,t,r){e&&!$S(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,n){e.active=n;const i=this.getStyle(t,n);this._resolveAnimations(t,r,n).update(e,{options:!n&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[o,c,d]of this._syncList)this[o](c,d);this._syncList=[];const n=r.length,i=t.length,l=Math.min(i,n);l&&this.parse(0,l),i>n?this._insertElements(n,i-n,e):i<n&&this._removeElements(i,n-i)}_insertElements(e,t,r=!0){const n=this._cachedMeta,i=n.data,l=e+t;let o;const c=d=>{for(d.length+=t,o=d.length-1;o>=l;o--)d[o]=d[o-t]};for(c(i),o=e;o<l;++o)i[o]=new this.dataElementType;this._parsing&&c(n._parsed),this.parse(e,t),r&&this.updateElements(i,e,t,"reset")}updateElements(e,t,r,n){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const n=r._parsed.splice(e,t);r._stacked&&Um(r,n)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,n]=e;this[t](r,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Yse(a,e){if(!a._cache.$bar){const t=a.getMatchingVisibleMetas(e);let r=[];for(let n=0,i=t.length;n<i;n++)r=r.concat(t[n].controller.getAllParsedValues(a));a._cache.$bar=sU(r.sort((n,i)=>n-i))}return a._cache.$bar}function $se(a){const e=a.iScale,t=Yse(e,a.type);let r=e._length,n,i,l,o;const c=()=>{l===32767||l===-32768||(Av(o)&&(r=Math.min(r,Math.abs(l-o)||r)),o=l)};for(n=0,i=t.length;n<i;++n)l=e.getPixelForValue(t[n]),c();for(o=void 0,n=0,i=e.ticks.length;n<i;++n)l=e.getPixelForTick(n),c();return r}function qse(a,e,t,r){const n=t.barThickness;let i,l;return xr(n)?(i=e.min*t.categoryPercentage,l=t.barPercentage):(i=n*r,l=1),{chunk:i/r,ratio:l,start:e.pixels[a]-i/2}}function Xse(a,e,t,r){const n=e.pixels,i=n[a];let l=a>0?n[a-1]:null,o=a<n.length-1?n[a+1]:null;const c=t.categoryPercentage;l===null&&(l=i-(o===null?e.end-e.start:o-i)),o===null&&(o=i+i-l);const d=i-(i-Math.min(l,o))/2*c;return{chunk:Math.abs(o-l)/2*c/r,ratio:t.barPercentage,start:d}}function Zse(a,e,t,r){const n=t.parse(a[0],r),i=t.parse(a[1],r),l=Math.min(n,i),o=Math.max(n,i);let c=l,d=o;Math.abs(l)>Math.abs(o)&&(c=o,d=l),e[t.axis]=d,e._custom={barStart:c,barEnd:d,start:n,end:i,min:l,max:o}}function AU(a,e,t,r){return yn(a)?Zse(a,e,t,r):e[t.axis]=t.parse(a,r),e}function kR(a,e,t,r){const n=a.iScale,i=a.vScale,l=n.getLabels(),o=n===i,c=[];let d,u,h,f;for(d=t,u=t+r;d<u;++d)f=e[d],h={},h[n.axis]=o||n.parse(l[d],d),c.push(AU(f,h,i,d));return c}function qS(a){return a&&a.barStart!==void 0&&a.barEnd!==void 0}function Kse(a,e,t){return a!==0?Nc(a):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function Qse(a){let e,t,r,n,i;return a.horizontal?(e=a.base>a.x,t="left",r="right"):(e=a.base<a.y,t="bottom",r="top"),e?(n="end",i="start"):(n="start",i="end"),{start:t,end:r,reverse:e,top:n,bottom:i}}function Jse(a,e,t,r){let n=e.borderSkipped;const i={};if(!n){a.borderSkipped=i;return}if(n===!0){a.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:o,reverse:c,top:d,bottom:u}=Qse(a);n==="middle"&&t&&(a.enableBorderRadius=!0,(t._top||0)===r?n=d:(t._bottom||0)===r?n=u:(i[CR(u,l,o,c)]=!0,n=d)),i[CR(n,l,o,c)]=!0,a.borderSkipped=i}function CR(a,e,t,r){return r?(a=ele(a,e,t),a=AR(a,t,e)):a=AR(a,e,t),a}function ele(a,e,t){return a===e?t:a===t?e:a}function AR(a,e,t){return a==="start"?e:a==="end"?t:a}function tle(a,{inflateAmount:e},t){a.inflateAmount=e==="auto"?t===1?.33:0:e}class ale extends Th{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,r,n){return kR(e,t,r,n)}parseArrayData(e,t,r,n){return kR(e,t,r,n)}parseObjectData(e,t,r,n){const{iScale:i,vScale:l}=e,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?o:c,u=l.axis==="x"?o:c,h=[];let f,p,g,b;for(f=r,p=r+n;f<p;++f)b=t[f],g={},g[i.axis]=i.parse(gh(b,d),f),h.push(AU(gh(b,u),g,l,f));return h}updateRangeFromParsed(e,t,r,n){super.updateRangeFromParsed(e,t,r,n);const i=r._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:n}=t,i=this.getParsed(e),l=i._custom,o=qS(l)?"["+l.start+", "+l.end+"]":""+n.getLabelForValue(i[n.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,n){const i=n==="reset",{index:l,_cachedMeta:{vScale:o}}=this,c=o.getBasePixel(),d=o.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(t,n);for(let p=t;p<t+r;p++){const g=this.getParsed(p),b=i||xr(g[o.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),w=this._calculateBarIndexPixels(p,u),j=(g._stacks||{})[o.axis],k={horizontal:d,base:b.base,enableBorderRadius:!j||qS(g._custom)||l===j._top||l===j._bottom,x:d?b.head:w.center,y:d?w.center:b.head,height:d?w.size:Math.abs(b.size),width:d?Math.abs(b.size):w.size};f&&(k.options=h||this.resolveDataElementOptions(p,e[p].active?"active":n));const T=k.options||e[p].options;Jse(k,T,j,l),tle(k,T,u.ratio),this.updateElement(e[p],p,k,n)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,n=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=r.options.stacked,l=[],o=this._cachedMeta.controller.getParsed(t),c=o&&o[r.axis],d=u=>{const h=u._parsed.find(p=>p[r.axis]===c),f=h&&h[u.vScale.axis];if(xr(f)||isNaN(f))return!0};for(const u of n)if(!(t!==void 0&&d(u))&&((i===!1||l.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&l.push(u.stack),u.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[qa(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,r){const n=this._getStacks(e,r),i=t!==void 0?n.indexOf(t):-1;return i===-1?n.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,n=[];let i,l;for(i=0,l=t.data.length;i<l;++i)n.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const o=e.barThickness;return{min:o||$se(t),pixels:n,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:n},options:{base:i,minBarLength:l}}=this,o=i||0,c=this.getParsed(e),d=c._custom,u=qS(d);let h=c[t.axis],f=0,p=r?this.applyStack(t,c,r):h,g,b;p!==h&&(f=p-h,p=h),u&&(h=d.barStart,p=d.barEnd-d.barStart,h!==0&&Nc(h)!==Nc(d.barEnd)&&(f=0),f+=h);const w=!xr(i)&&!u?i:f;let j=t.getPixelForValue(w);if(this.chart.getDataVisibility(e)?g=t.getPixelForValue(f+p):g=j,b=g-j,Math.abs(b)<l){b=Kse(b,t,o)*l,h===o&&(j-=b/2);const k=t.getPixelForDecimal(0),T=t.getPixelForDecimal(1),E=Math.min(k,T),I=Math.max(k,T);j=Math.max(Math.min(j,I),E),g=j+b,r&&!u&&(c._stacks[t.axis]._visualValues[n]=t.getValueForPixel(g)-t.getValueForPixel(j))}if(j===t.getPixelForValue(o)){const k=Nc(b)*t.getLineWidthForValue(o)/2;j+=k,b-=k}return{size:b,base:j,head:g,center:g+b/2}}_calculateBarIndexPixels(e,t){const r=t.scale,n=this.options,i=n.skipNull,l=qa(n.maxBarThickness,1/0);let o,c;const d=this._getAxisCount();if(t.grouped){const u=i?this._getStackCount(e):t.stackCount,h=n.barThickness==="flex"?Xse(e,t,n,u*d):qse(e,t,n,u*d),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(qa(f,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+p;o=h.start+h.chunk*g+h.chunk/2,c=Math.min(l,h.chunk*h.ratio)}else o=r.getPixelForValue(this.getParsed(e)[r.axis],e),c=Math.min(l,t.min*t.ratio);return{base:o-c/2,head:o+c/2,center:o,size:c}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,n=r.length;let i=0;for(;i<n;++i)this.getParsed(i)[t.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}class rle extends Th{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,r,n){const i=super.parsePrimitiveData(e,t,r,n);for(let l=0;l<i.length;l++)i[l]._custom=this.resolveDataElementOptions(l+r).radius;return i}parseArrayData(e,t,r,n){const i=super.parseArrayData(e,t,r,n);for(let l=0;l<i.length;l++){const o=t[r+l];i[l]._custom=qa(o[2],this.resolveDataElementOptions(l+r).radius)}return i}parseObjectData(e,t,r,n){const i=super.parseObjectData(e,t,r,n);for(let l=0;l<i.length;l++){const o=t[r+l];i[l]._custom=qa(o&&o.r&&+o.r,this.resolveDataElementOptions(l+r).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let r=e.length-1;r>=0;--r)t=Math.max(t,e[r].size(this.resolveDataElementOptions(r))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:i}=t,l=this.getParsed(e),o=n.getLabelForValue(l.x),c=i.getLabelForValue(l.y),d=l._custom;return{label:r[e]||"",value:"("+o+", "+c+(d?", "+d:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,r,n){const i=n==="reset",{iScale:l,vScale:o}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,n),u=l.axis,h=o.axis;for(let f=t;f<t+r;f++){const p=e[f],g=!i&&this.getParsed(f),b={},w=b[u]=i?l.getPixelForDecimal(.5):l.getPixelForValue(g[u]),j=b[h]=i?o.getBasePixel():o.getPixelForValue(g[h]);b.skip=isNaN(w)||isNaN(j),d&&(b.options=c||this.resolveDataElementOptions(f,p.active?"active":n),i&&(b.options.radius=0)),this.updateElement(p,f,b,n)}}resolveDataElementOptions(e,t){const r=this.getParsed(e);let n=super.resolveDataElementOptions(e,t);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const i=n.radius;return t!=="active"&&(n.radius=0),n.radius+=qa(r&&r._custom,i),n}}function nle(a,e,t){let r=1,n=1,i=0,l=0;if(e<mn){const o=a,c=o+e,d=Math.cos(o),u=Math.sin(o),h=Math.cos(c),f=Math.sin(c),p=(T,E,I)=>Tv(T,o,c,!0)?1:Math.max(E,E*t,I,I*t),g=(T,E,I)=>Tv(T,o,c,!0)?-1:Math.min(E,E*t,I,I*t),b=p(0,d,h),w=p(Yn,u,f),j=g(Er,d,h),k=g(Er+Yn,u,f);r=(b-j)/2,n=(w-k)/2,i=-(b+j)/2,l=-(w+k)/2}return{ratioX:r,ratioY:n,offsetX:i,offsetY:l}}class fT extends Th{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:r,textAlign:n,color:i,useBorderRadius:l,borderRadius:o}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((c,d)=>{const h=e.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:h.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(d),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:n,pointStyle:r,borderRadius:l&&(o||h.borderRadius),index:d}}):[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=r;else{let i=c=>+r[c];if(yr(r[e])){const{key:c="value"}=this._parsing;i=d=>+gh(r[d],c)}let l,o;for(l=e,o=e+t;l<o;++l)n._parsed[l]=i(l)}}_getRotation(){return So(this.options.rotation-90)}_getCircumference(){return So(this.options.circumference)}_getRotationExtents(){let e=mn,t=-mn;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const n=this.chart.getDatasetMeta(r).controller,i=n._getRotation(),l=n._getCircumference();e=Math.min(e,i),t=Math.max(t,i+l)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,n=this._cachedMeta,i=n.data,l=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(r.width,r.height)-l)/2,0),c=Math.min(pie(this.options.cutout,o),1),d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:b}=nle(h,u,c),w=(r.width-l)/f,j=(r.height-l)/p,k=Math.max(Math.min(w,j)/2,0),T=tU(this.options.radius,k),E=Math.max(T*c,0),I=(T-E)/this._getVisibleDatasetWeightTotal();this.offsetX=g*T,this.offsetY=b*T,n.total=this.calculateTotal(),this.outerRadius=T-I*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-I*d,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const r=this.options,n=this._cachedMeta,i=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||n._parsed[e]===null||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*i/mn)}updateElements(e,t,r,n){const i=n==="reset",l=this.chart,o=l.chartArea,d=l.options.animation,u=(o.left+o.right)/2,h=(o.top+o.bottom)/2,f=i&&d.animateScale,p=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:b,includeOptions:w}=this._getSharedOptions(t,n);let j=this._getRotation(),k;for(k=0;k<t;++k)j+=this._circumference(k,i);for(k=t;k<t+r;++k){const T=this._circumference(k,i),E=e[k],I={x:u+this.offsetX,y:h+this.offsetY,startAngle:j,endAngle:j+T,circumference:T,outerRadius:g,innerRadius:p};w&&(I.options=b||this.resolveDataElementOptions(k,E.active?"active":n)),j+=T,this.updateElement(E,k,I,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let r=0,n;for(n=0;n<t.length;n++){const i=e._parsed[n];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(n)&&!t[n].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?mn*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,n=r.data.labels||[],i=Nb(t._parsed[e],r.options.locale);return{label:n[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const r=this.chart;let n,i,l,o,c;if(!e){for(n=0,i=r.data.datasets.length;n<i;++n)if(r.isDatasetVisible(n)){l=r.getDatasetMeta(n),e=l.data,o=l.controller;break}}if(!e)return 0;for(n=0,i=e.length;n<i;++n)c=o.resolveDataElementOptions(n),c.borderAlign!=="inner"&&(t=Math.max(t,c.borderWidth||0,c.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,n=e.length;r<n;++r){const i=this.resolveDataElementOptions(r);t=Math.max(t,i.offset||0,i.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(qa(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class ile extends Th{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:n=[],_dataset:i}=t,l=this.chart._animationsDisabled;let{start:o,count:c}=cU(t,n,l);this._drawStart=o,this._drawCount=c,dU(t)&&(o=0,c=n.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=n;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(r,void 0,{animated:!l,options:d},e),this.updateElements(n,o,c,e)}updateElements(e,t,r,n){const i=n==="reset",{iScale:l,vScale:o,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,n),f=l.axis,p=o.axis,{spanGaps:g,segment:b}=this.options,w=vx(g)?g:Number.POSITIVE_INFINITY,j=this.chart._animationsDisabled||i||n==="none",k=t+r,T=e.length;let E=t>0&&this.getParsed(t-1);for(let I=0;I<T;++I){const R=e[I],P=j?R:{};if(I<t||I>=k){P.skip=!0;continue}const H=this.getParsed(I),G=xr(H[p]),X=P[f]=l.getPixelForValue(H[f],I),U=P[p]=i||G?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,H,c):H[p],I);P.skip=isNaN(X)||isNaN(U)||G,P.stop=I>0&&Math.abs(H[f]-E[f])>w,b&&(P.parsed=H,P.raw=d.data[I]),h&&(P.options=u||this.resolveDataElementOptions(I,R.active?"active":n)),j||this.updateElement(R,I,P,n),E=H}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return r;const i=n[0].size(this.resolveDataElementOptions(0)),l=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,i,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class TU extends Th{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:n}}=e.legend.options;return t.labels.map((i,l)=>{const c=e.getDatasetMeta(0).controller.getStyle(l);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:n,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,n=r.data.labels||[],i=Nb(t._parsed[e].r,r.options.locale);return{label:n[e]||"",value:i}}parseObjectData(e,t,r,n){return vU.bind(this)(e,t,r,n)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<t.min&&(t.min=i),i>t.max&&(t.max=i))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,r=e.options,n=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(n/2,0),l=Math.max(r.cutoutPercentage?i/100*r.cutoutPercentage:1,0),o=(i-l)/e.getVisibleDatasetCount();this.outerRadius=i-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,r,n){const i=n==="reset",l=this.chart,c=l.options.animation,d=this._cachedMeta.rScale,u=d.xCenter,h=d.yCenter,f=d.getIndexAngle(0)-.5*Er;let p=f,g;const b=360/this.countVisibleElements();for(g=0;g<t;++g)p+=this._computeAngle(g,n,b);for(g=t;g<t+r;g++){const w=e[g];let j=p,k=p+this._computeAngle(g,n,b),T=l.getDataVisibility(g)?d.getDistanceFromCenterForValue(this.getParsed(g).r):0;p=k,i&&(c.animateScale&&(T=0),c.animateRotate&&(j=k=f));const E={x:u,y:h,innerRadius:0,outerRadius:T,startAngle:j,endAngle:k,options:this.resolveDataElementOptions(g,w.active?"active":n)};this.updateElement(w,g,E,n)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((r,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,r){return this.chart.getDataVisibility(e)?So(this.resolveDataElementOptions(e,t).angle||r):0}}class sle extends fT{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class lle extends Th{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const t=this._cachedMeta.vScale,r=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(r[t.axis])}}parseObjectData(e,t,r,n){return vU.bind(this)(e,t,r,n)}update(e){const t=this._cachedMeta,r=t.dataset,n=t.data||[],i=t.iScale.getLabels();if(r.points=n,e!=="resize"){const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0);const o={_loop:!0,_fullLoop:i.length===n.length,options:l};this.updateElement(r,void 0,o,e)}this.updateElements(n,0,n.length,e)}updateElements(e,t,r,n){const i=this._cachedMeta.rScale,l=n==="reset";for(let o=t;o<t+r;o++){const c=e[o],d=this.resolveDataElementOptions(o,c.active?"active":n),u=i.getPointPositionForValue(o,this.getParsed(o).r),h=l?i.xCenter:u.x,f=l?i.yCenter:u.y,p={x:h,y:f,angle:u.angle,skip:isNaN(h)||isNaN(f),options:d};this.updateElement(c,o,p,n)}}}class ole extends Th{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:i}=t,l=this.getParsed(e),o=n.getLabelForValue(l.x),c=i.getLabelForValue(l.y);return{label:r[e]||"",value:"("+o+", "+c+")"}}update(e){const t=this._cachedMeta,{data:r=[]}=t,n=this.chart._animationsDisabled;let{start:i,count:l}=cU(t,r,n);if(this._drawStart=i,this._drawCount=l,dU(t)&&(i=0,l=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:c}=t;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!c._decimated,o.points=r;const d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(o,void 0,{animated:!n,options:d},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(r,i,l,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,r,n){const i=n==="reset",{iScale:l,vScale:o,_stacked:c,_dataset:d}=this._cachedMeta,u=this.resolveDataElementOptions(t,n),h=this.getSharedOptions(u),f=this.includeOptions(n,h),p=l.axis,g=o.axis,{spanGaps:b,segment:w}=this.options,j=vx(b)?b:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||i||n==="none";let T=t>0&&this.getParsed(t-1);for(let E=t;E<t+r;++E){const I=e[E],R=this.getParsed(E),P=k?I:{},H=xr(R[g]),G=P[p]=l.getPixelForValue(R[p],E),X=P[g]=i||H?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,R,c):R[g],E);P.skip=isNaN(G)||isNaN(X)||H,P.stop=E>0&&Math.abs(R[p]-T[p])>j,w&&(P.parsed=R,P.raw=d.data[E]),f&&(P.options=h||this.resolveDataElementOptions(E,I.active?"active":n)),k||this.updateElement(I,E,P,n),T=R}this.updateSharedOptions(h,n,u)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let o=0;for(let c=t.length-1;c>=0;--c)o=Math.max(o,t[c].size(this.resolveDataElementOptions(c))/2);return o>0&&o}const r=e.dataset,n=r.options&&r.options.borderWidth||0;if(!t.length)return n;const i=t[0].size(this.resolveDataElementOptions(0)),l=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(n,i,l)/2}}var cle=Object.freeze({__proto__:null,BarController:ale,BubbleController:rle,DoughnutController:fT,LineController:ile,PieController:sle,PolarAreaController:TU,RadarController:lle,ScatterController:ole});function af(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class pT{static override(e){Object.assign(pT.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return af()}parse(){return af()}format(){return af()}add(){return af()}diff(){return af()}startOf(){return af()}endOf(){return af()}}var dle={_date:pT};function ule(a,e,t,r){const{controller:n,data:i,_sorted:l}=a,o=n._cachedMeta.iScale,c=a.dataset&&a.dataset.options?a.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&l&&i.length){const d=o._reversePixels?Cie:Sd;if(r){if(n._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=d(i,e,t-h),p=d(i,e,t+h);return{lo:f.lo,hi:p.hi}}}}else{const u=d(i,e,t);if(c){const{vScale:h}=n._cachedMeta,{_parsed:f}=a,p=f.slice(0,u.lo+1).reverse().findIndex(b=>!xr(b[h.axis]));u.lo-=Math.max(0,p);const g=f.slice(u.hi).findIndex(b=>!xr(b[h.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:i.length-1}}function $_(a,e,t,r,n){const i=a.getSortedVisibleDatasetMetas(),l=t[e];for(let o=0,c=i.length;o<c;++o){const{index:d,data:u}=i[o],{lo:h,hi:f}=ule(i[o],e,l,n);for(let p=h;p<=f;++p){const g=u[p];g.skip||r(g,d,p)}}}function hle(a){const e=a.indexOf("x")!==-1,t=a.indexOf("y")!==-1;return function(r,n){const i=e?Math.abs(r.x-n.x):0,l=t?Math.abs(r.y-n.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(l,2))}}function XS(a,e,t,r,n){const i=[];return!n&&!a.isPointInArea(e)||$_(a,t,e,function(o,c,d){!n&&!kd(o,a.chartArea,0)||o.inRange(e.x,e.y,r)&&i.push({element:o,datasetIndex:c,index:d})},!0),i}function fle(a,e,t,r){let n=[];function i(l,o,c){const{startAngle:d,endAngle:u}=l.getProps(["startAngle","endAngle"],r),{angle:h}=nU(l,{x:e.x,y:e.y});Tv(h,d,u)&&n.push({element:l,datasetIndex:o,index:c})}return $_(a,t,e,i),n}function ple(a,e,t,r,n,i){let l=[];const o=hle(t);let c=Number.POSITIVE_INFINITY;function d(u,h,f){const p=u.inRange(e.x,e.y,n);if(r&&!p)return;const g=u.getCenterPoint(n);if(!(!!i||a.isPointInArea(g))&&!p)return;const w=o(e,g);w<c?(l=[{element:u,datasetIndex:h,index:f}],c=w):w===c&&l.push({element:u,datasetIndex:h,index:f})}return $_(a,t,e,d),l}function ZS(a,e,t,r,n,i){return!i&&!a.isPointInArea(e)?[]:t==="r"&&!r?fle(a,e,t,n):ple(a,e,t,r,n,i)}function TR(a,e,t,r,n){const i=[],l=t==="x"?"inXRange":"inYRange";let o=!1;return $_(a,t,e,(c,d,u)=>{c[l]&&c[l](e[t],n)&&(i.push({element:c,datasetIndex:d,index:u}),o=o||c.inRange(e.x,e.y,n))}),r&&!o?[]:i}var xle={modes:{index(a,e,t,r){const n=If(e,a),i=t.axis||"x",l=t.includeInvisible||!1,o=t.intersect?XS(a,n,i,r,l):ZS(a,n,i,!1,r,l),c=[];return o.length?(a.getSortedVisibleDatasetMetas().forEach(d=>{const u=o[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(a,e,t,r){const n=If(e,a),i=t.axis||"xy",l=t.includeInvisible||!1;let o=t.intersect?XS(a,n,i,r,l):ZS(a,n,i,!1,r,l);if(o.length>0){const c=o[0].datasetIndex,d=a.getDatasetMeta(c).data;o=[];for(let u=0;u<d.length;++u)o.push({element:d[u],datasetIndex:c,index:u})}return o},point(a,e,t,r){const n=If(e,a),i=t.axis||"xy",l=t.includeInvisible||!1;return XS(a,n,i,r,l)},nearest(a,e,t,r){const n=If(e,a),i=t.axis||"xy",l=t.includeInvisible||!1;return ZS(a,n,i,t.intersect,r,l)},x(a,e,t,r){const n=If(e,a);return TR(a,n,"x",t.intersect,r)},y(a,e,t,r){const n=If(e,a);return TR(a,n,"y",t.intersect,r)}}};const MU=["left","top","right","bottom"];function Gm(a,e){return a.filter(t=>t.pos===e)}function MR(a,e){return a.filter(t=>MU.indexOf(t.pos)===-1&&t.box.axis===e)}function Wm(a,e){return a.sort((t,r)=>{const n=e?r:t,i=e?t:r;return n.weight===i.weight?n.index-i.index:n.weight-i.weight})}function mle(a){const e=[];let t,r,n,i,l,o;for(t=0,r=(a||[]).length;t<r;++t)n=a[t],{position:i,options:{stack:l,stackWeight:o=1}}=n,e.push({index:t,box:n,pos:i,horizontal:n.isHorizontal(),weight:n.weight,stack:l&&i+l,stackWeight:o});return e}function gle(a){const e={};for(const t of a){const{stack:r,pos:n,stackWeight:i}=t;if(!r||!MU.includes(n))continue;const l=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=i}return e}function vle(a,e){const t=gle(a),{vBoxMaxWidth:r,hBoxMaxHeight:n}=e;let i,l,o;for(i=0,l=a.length;i<l;++i){o=a[i];const{fullSize:c}=o.box,d=t[o.stack],u=d&&o.stackWeight/d.weight;o.horizontal?(o.width=u?u*r:c&&e.availableWidth,o.height=n):(o.width=r,o.height=u?u*n:c&&e.availableHeight)}return t}function ble(a){const e=mle(a),t=Wm(e.filter(d=>d.box.fullSize),!0),r=Wm(Gm(e,"left"),!0),n=Wm(Gm(e,"right")),i=Wm(Gm(e,"top"),!0),l=Wm(Gm(e,"bottom")),o=MR(e,"x"),c=MR(e,"y");return{fullSize:t,leftAndTop:r.concat(i),rightAndBottom:n.concat(c).concat(l).concat(o),chartArea:Gm(e,"chartArea"),vertical:r.concat(n).concat(c),horizontal:i.concat(l).concat(o)}}function ER(a,e,t,r){return Math.max(a[t],e[t])+Math.max(a[r],e[r])}function EU(a,e){a.top=Math.max(a.top,e.top),a.left=Math.max(a.left,e.left),a.bottom=Math.max(a.bottom,e.bottom),a.right=Math.max(a.right,e.right)}function yle(a,e,t,r){const{pos:n,box:i}=t,l=a.maxPadding;if(!yr(n)){t.size&&(a[n]-=t.size);const h=r[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?i.height:i.width),t.size=h.size/h.count,a[n]+=t.size}i.getPadding&&EU(l,i.getPadding());const o=Math.max(0,e.outerWidth-ER(l,a,"left","right")),c=Math.max(0,e.outerHeight-ER(l,a,"top","bottom")),d=o!==a.w,u=c!==a.h;return a.w=o,a.h=c,t.horizontal?{same:d,other:u}:{same:u,other:d}}function wle(a){const e=a.maxPadding;function t(r){const n=Math.max(e[r]-a[r],0);return a[r]+=n,n}a.y+=t("top"),a.x+=t("left"),t("right"),t("bottom")}function _le(a,e){const t=e.maxPadding;function r(n){const i={left:0,top:0,right:0,bottom:0};return n.forEach(l=>{i[l]=Math.max(e[l],t[l])}),i}return r(a?["left","right"]:["top","bottom"])}function Rg(a,e,t,r){const n=[];let i,l,o,c,d,u;for(i=0,l=a.length,d=0;i<l;++i){o=a[i],c=o.box,c.update(o.width||e.w,o.height||e.h,_le(o.horizontal,e));const{same:h,other:f}=yle(e,t,o,r);d|=h&&n.length,u=u||f,c.fullSize||n.push(o)}return d&&Rg(n,e,t,r)||u}function J1(a,e,t,r,n){a.top=t,a.left=e,a.right=e+r,a.bottom=t+n,a.width=r,a.height=n}function DR(a,e,t,r){const n=t.padding;let{x:i,y:l}=e;for(const o of a){const c=o.box,d=r[o.stack]||{placed:0,weight:1},u=o.stackWeight/d.weight||1;if(o.horizontal){const h=e.w*u,f=d.size||c.height;Av(d.start)&&(l=d.start),c.fullSize?J1(c,n.left,l,t.outerWidth-n.right-n.left,f):J1(c,e.left+d.placed,l,h,f),d.start=l,d.placed+=h,l=c.bottom}else{const h=e.h*u,f=d.size||c.width;Av(d.start)&&(i=d.start),c.fullSize?J1(c,i,n.top,f,t.outerHeight-n.bottom-n.top):J1(c,i,e.top+d.placed,f,h),d.start=i,d.placed+=h,i=c.right}}e.x=i,e.y=l}var ls={addBox(a,e){a.boxes||(a.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},a.boxes.push(e)},removeBox(a,e){const t=a.boxes?a.boxes.indexOf(e):-1;t!==-1&&a.boxes.splice(t,1)},configure(a,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(a,e,t,r){if(!a)return;const n=cs(a.options.layout.padding),i=Math.max(e-n.width,0),l=Math.max(t-n.height,0),o=ble(a.boxes),c=o.vertical,d=o.horizontal;$r(a.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const u=c.reduce((b,w)=>w.box.options&&w.box.options.display===!1?b:b+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:n,availableWidth:i,availableHeight:l,vBoxMaxWidth:i/2/u,hBoxMaxHeight:l/2}),f=Object.assign({},n);EU(f,cs(r));const p=Object.assign({maxPadding:f,w:i,h:l,x:n.left,y:n.top},n),g=vle(c.concat(d),h);Rg(o.fullSize,p,h,g),Rg(c,p,h,g),Rg(d,p,h,g)&&Rg(c,p,h,g),wle(p),DR(o.leftAndTop,p,h,g),p.x+=p.w,p.y+=p.h,DR(o.rightAndBottom,p,h,g),a.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},$r(o.chartArea,b=>{const w=b.box;Object.assign(w,a.chartArea),w.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class DU{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,n){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):r)}}isAttached(e){return!0}updateConfig(e){}}class Nle extends DU{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Tw="$chartjs",jle={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},IR=a=>a===null||a==="";function Sle(a,e){const t=a.style,r=a.getAttribute("height"),n=a.getAttribute("width");if(a[Tw]={initial:{height:r,width:n,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",IR(n)){const i=mR(a,"width");i!==void 0&&(a.width=i)}if(IR(r))if(a.style.height==="")a.height=a.width/(e||2);else{const i=mR(a,"height");i!==void 0&&(a.height=i)}return a}const IU=yse?{passive:!0}:!1;function kle(a,e,t){a&&a.addEventListener(e,t,IU)}function Cle(a,e,t){a&&a.canvas&&a.canvas.removeEventListener(e,t,IU)}function Ale(a,e){const t=jle[a.type]||a.type,{x:r,y:n}=If(a,e);return{type:t,chart:e,native:a,x:r!==void 0?r:null,y:n!==void 0?n:null}}function x2(a,e){for(const t of a)if(t===e||t.contains(e))return!0}function Tle(a,e,t){const r=a.canvas,n=new MutationObserver(i=>{let l=!1;for(const o of i)l=l||x2(o.addedNodes,r),l=l&&!x2(o.removedNodes,r);l&&t()});return n.observe(document,{childList:!0,subtree:!0}),n}function Mle(a,e,t){const r=a.canvas,n=new MutationObserver(i=>{let l=!1;for(const o of i)l=l||x2(o.removedNodes,r),l=l&&!x2(o.addedNodes,r);l&&t()});return n.observe(document,{childList:!0,subtree:!0}),n}const Ev=new Map;let RR=0;function RU(){const a=window.devicePixelRatio;a!==RR&&(RR=a,Ev.forEach((e,t)=>{t.currentDevicePixelRatio!==a&&e()}))}function Ele(a,e){Ev.size||window.addEventListener("resize",RU),Ev.set(a,e)}function Dle(a){Ev.delete(a),Ev.size||window.removeEventListener("resize",RU)}function Ile(a,e,t){const r=a.canvas,n=r&&hT(r);if(!n)return;const i=oU((o,c)=>{const d=n.clientWidth;t(o,c),d<n.clientWidth&&t()},window),l=new ResizeObserver(o=>{const c=o[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return l.observe(n),Ele(a,i),l}function KS(a,e,t){t&&t.disconnect(),e==="resize"&&Dle(a)}function Rle(a,e,t){const r=a.canvas,n=oU(i=>{a.ctx!==null&&t(Ale(i,a))},a);return kle(r,e,n),n}class Lle extends DU{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Sle(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[Tw])return!1;const r=t[Tw].initial;["height","width"].forEach(i=>{const l=r[i];xr(l)?t.removeAttribute(i):t.setAttribute(i,l)});const n=r.style||{};return Object.keys(n).forEach(i=>{t.style[i]=n[i]}),t.width=t.width,delete t[Tw],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),l={attach:Tle,detach:Mle,resize:Ile}[t]||Rle;n[t]=l(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),n=r[t];if(!n)return;({attach:KS,detach:KS,resize:KS}[t]||Cle)(e,t,n),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,n){return bse(e,t,r,n)}isAttached(e){const t=e&&hT(e);return!!(t&&t.isConnected)}}function Ole(a){return!uT()||typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas?Nle:Lle}let Ud=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return vx(this.x)&&vx(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const n={};return e.forEach(i=>{n[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),n}};function Ple(a,e){const t=a.options.ticks,r=zle(a),n=Math.min(t.maxTicksLimit||r,r),i=t.major.enabled?Fle(e):[],l=i.length,o=i[0],c=i[l-1],d=[];if(l>n)return Vle(e,d,i,l/n),d;const u=Ble(i,e,n);if(l>0){let h,f;const p=l>1?Math.round((c-o)/(l-1)):null;for(ey(e,d,u,xr(p)?0:o-p,o),h=0,f=l-1;h<f;h++)ey(e,d,u,i[h],i[h+1]);return ey(e,d,u,c,xr(p)?e.length:c+p),d}return ey(e,d,u),d}function zle(a){const e=a.options.offset,t=a._tickSize(),r=a._length/t+(e?0:1),n=a._maxLength/t;return Math.floor(Math.min(r,n))}function Ble(a,e,t){const r=Hle(a),n=e.length/t;if(!r)return Math.max(n,1);const i=_ie(r);for(let l=0,o=i.length-1;l<o;l++){const c=i[l];if(c>n)return c}return Math.max(n,1)}function Fle(a){const e=[];let t,r;for(t=0,r=a.length;t<r;t++)a[t].major&&e.push(t);return e}function Vle(a,e,t,r){let n=0,i=t[0],l;for(r=Math.ceil(r),l=0;l<a.length;l++)l===i&&(e.push(a[l]),n++,i=t[n*r])}function ey(a,e,t,r,n){const i=qa(r,0),l=Math.min(qa(n,a.length),a.length);let o=0,c,d,u;for(t=Math.ceil(t),n&&(c=n-r,t=c/Math.floor(c/t)),u=i;u<0;)o++,u=Math.round(i+o*t);for(d=Math.max(i,0);d<l;d++)d===u&&(e.push(a[d]),o++,u=Math.round(i+o*t))}function Hle(a){const e=a.length;let t,r;if(e<2)return!1;for(r=a[0],t=1;t<e;++t)if(a[t]-a[t-1]!==r)return!1;return r}const Ule=a=>a==="left"?"right":a==="right"?"left":a,LR=(a,e,t)=>e==="top"||e==="left"?a[e]+t:a[e]-t,OR=(a,e)=>Math.min(e||a,a);function PR(a,e){const t=[],r=a.length/e,n=a.length;let i=0;for(;i<n;i+=r)t.push(a[Math.floor(i)]);return t}function Gle(a,e,t){const r=a.ticks.length,n=Math.min(e,r-1),i=a._startPixel,l=a._endPixel,o=1e-6;let c=a.getPixelForTick(n),d;if(!(t&&(r===1?d=Math.max(c-i,l-c):e===0?d=(a.getPixelForTick(1)-c)/2:d=(c-a.getPixelForTick(n-1))/2,c+=n<e?d:-d,c<i-o||c>l+o)))return c}function Wle(a,e){$r(a,t=>{const r=t.gc,n=r.length/2;let i;if(n>e){for(i=0;i<n;++i)delete t.data[r[i]];r.splice(0,n)}})}function Ym(a){return a.drawTicks?a.tickLength:0}function zR(a,e){if(!a.display)return 0;const t=wi(a.font,e),r=cs(a.padding);return(yn(a.text)?a.text.length:1)*t.lineHeight+r.height}function Yle(a,e){return Ah(a,{scale:e,type:"scale"})}function $le(a,e,t){return Ah(a,{tick:t,index:e,type:"tick"})}function qle(a,e,t){let r=iT(a);return(t&&e!=="right"||!t&&e==="right")&&(r=Ule(r)),r}function Xle(a,e,t,r){const{top:n,left:i,bottom:l,right:o,chart:c}=a,{chartArea:d,scales:u}=c;let h=0,f,p,g;const b=l-n,w=o-i;if(a.isHorizontal()){if(p=rs(r,i,o),yr(t)){const j=Object.keys(t)[0],k=t[j];g=u[j].getPixelForValue(k)+b-e}else t==="center"?g=(d.bottom+d.top)/2+b-e:g=LR(a,t,e);f=o-i}else{if(yr(t)){const j=Object.keys(t)[0],k=t[j];p=u[j].getPixelForValue(k)-w+e}else t==="center"?p=(d.left+d.right)/2-w+e:p=LR(a,t,e);g=rs(r,l,n),h=t==="left"?-Yn:Yn}return{titleX:p,titleY:g,maxWidth:f,rotation:h}}let jb=class LU extends Ud{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:n}=this;return e=ml(e,Number.POSITIVE_INFINITY),t=ml(t,Number.NEGATIVE_INFINITY),r=ml(r,Number.POSITIVE_INFINITY),n=ml(n,Number.NEGATIVE_INFINITY),{min:ml(e,r),max:ml(t,n),minDefined:Pn(e),maxDefined:Pn(t)}}getMinMax(e){let{min:t,max:r,minDefined:n,maxDefined:i}=this.getUserBounds(),l;if(n&&i)return{min:t,max:r};const o=this.getMatchingVisibleMetas();for(let c=0,d=o.length;c<d;++c)l=o[c].controller.getMinMax(this,e),n||(t=Math.min(t,l.min)),i||(r=Math.max(r,l.max));return t=i&&t>r?r:t,r=n&&t>r?t:r,{min:ml(t,ml(r,t)),max:ml(r,ml(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){fn(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:n,grace:i,ticks:l}=this.options,o=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Kie(this,i,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=o<this.ticks.length;this._convertTicksToLabels(c?PR(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=Ple(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){fn(this.options.afterUpdate,[this])}beforeSetDimensions(){fn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){fn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),fn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){fn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,n,i;for(r=0,n=e.length;r<n;r++)i=e[r],i.label=fn(t.callback,[i.value,r,e],this)}afterTickToLabelConversion(){fn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){fn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=OR(this.ticks.length,e.ticks.maxTicksLimit),n=t.minRotation||0,i=t.maxRotation;let l=n,o,c,d;if(!this._isVisible()||!t.display||n>=i||r<=1||!this.isHorizontal()){this.labelRotation=n;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,p=Di(this.chart.width-h,0,this.maxWidth);o=e.offset?this.maxWidth/r:p/(r-1),h+6>o&&(o=p/(r-(e.offset?.5:1)),c=this.maxHeight-Ym(e.grid)-t.padding-zR(e.title,this.chart.options.font),d=Math.sqrt(h*h+f*f),l=rT(Math.min(Math.asin(Di((u.highest.height+6)/o,-1,1)),Math.asin(Di(c/d,-1,1))-Math.asin(Di(f/d,-1,1)))),l=Math.max(n,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){fn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){fn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:n,grid:i}}=this,l=this._isVisible(),o=this.isHorizontal();if(l){const c=zR(n,t.options.font);if(o?(e.width=this.maxWidth,e.height=Ym(i)+c):(e.height=this.maxHeight,e.width=Ym(i)+c),r.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:f}=this._getLabelSizes(),p=r.padding*2,g=So(this.labelRotation),b=Math.cos(g),w=Math.sin(g);if(o){const j=r.mirror?0:w*h.width+b*f.height;e.height=Math.min(this.maxHeight,e.height+j+p)}else{const j=r.mirror?0:b*h.width+w*f.height;e.width=Math.min(this.maxWidth,e.width+j+p)}this._calculatePadding(d,u,w,b)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,n){const{ticks:{align:i,padding:l},position:o}=this.options,c=this.labelRotation!==0,d=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;c?d?(f=n*e.width,p=r*t.height):(f=r*e.height,p=n*t.width):i==="start"?p=t.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,p=t.width/2),this.paddingLeft=Math.max((f-u+l)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+l)*this.width/(this.width-h),0)}else{let u=t.height/2,h=e.height/2;i==="start"?(u=0,h=e.height):i==="end"&&(u=t.height,h=0),this.paddingTop=u+l,this.paddingBottom=h+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){fn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)xr(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=PR(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:n,_longestTextCache:i}=this,l=[],o=[],c=Math.floor(t/OR(t,r));let d=0,u=0,h,f,p,g,b,w,j,k,T,E,I;for(h=0;h<t;h+=c){if(g=e[h].label,b=this._resolveTickFontOptions(h),n.font=w=b.string,j=i[w]=i[w]||{data:{},gc:[]},k=b.lineHeight,T=E=0,!xr(g)&&!yn(g))T=f2(n,j.data,j.gc,T,g),E=k;else if(yn(g))for(f=0,p=g.length;f<p;++f)I=g[f],!xr(I)&&!yn(I)&&(T=f2(n,j.data,j.gc,T,I),E+=k);l.push(T),o.push(E),d=Math.max(T,d),u=Math.max(E,u)}Wle(i,t);const R=l.indexOf(d),P=o.indexOf(u),H=G=>({width:l[G]||0,height:o[G]||0});return{first:H(0),last:H(t-1),widest:H(R),highest:H(P),widths:l,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return kie(this._alignToPixels?tf(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=$le(this.getContext(),e,r))}return this.$context||(this.$context=Yle(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=So(this.labelRotation),r=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),i=this._getLabelSizes(),l=e.autoSkipPadding||0,o=i?i.widest.width+l:0,c=i?i.highest.height+l:0;return this.isHorizontal()?c*r>o*n?o/r:c/n:c*n<o*r?c/r:o/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,n=this.options,{grid:i,position:l,border:o}=n,c=i.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=Ym(i),p=[],g=o.setContext(this.getContext()),b=g.display?g.width:0,w=b/2,j=function(W){return tf(r,W,b)};let k,T,E,I,R,P,H,G,X,U,te,Z;if(l==="top")k=j(this.bottom),P=this.bottom-f,G=k-w,U=j(e.top)+w,Z=e.bottom;else if(l==="bottom")k=j(this.top),U=e.top,Z=j(e.bottom)-w,P=k+w,G=this.top+f;else if(l==="left")k=j(this.right),R=this.right-f,H=k-w,X=j(e.left)+w,te=e.right;else if(l==="right")k=j(this.left),X=e.left,te=j(e.right)-w,R=k+w,H=this.left+f;else if(t==="x"){if(l==="center")k=j((e.top+e.bottom)/2+.5);else if(yr(l)){const W=Object.keys(l)[0],$=l[W];k=j(this.chart.scales[W].getPixelForValue($))}U=e.top,Z=e.bottom,P=k+w,G=P+f}else if(t==="y"){if(l==="center")k=j((e.left+e.right)/2);else if(yr(l)){const W=Object.keys(l)[0],$=l[W];k=j(this.chart.scales[W].getPixelForValue($))}R=k-w,H=R-f,X=e.left,te=e.right}const J=qa(n.ticks.maxTicksLimit,h),B=Math.max(1,Math.ceil(h/J));for(T=0;T<h;T+=B){const W=this.getContext(T),$=i.setContext(W),Q=o.setContext(W),ne=$.lineWidth,re=$.color,K=Q.dash||[],ae=Q.dashOffset,ce=$.tickWidth,de=$.tickColor,he=$.tickBorderDash||[],pe=$.tickBorderDashOffset;E=Gle(this,T,c),E!==void 0&&(I=tf(r,E,ne),d?R=H=X=te=I:P=G=U=Z=I,p.push({tx1:R,ty1:P,tx2:H,ty2:G,x1:X,y1:U,x2:te,y2:Z,width:ne,color:re,borderDash:K,borderDashOffset:ae,tickWidth:ce,tickColor:de,tickBorderDash:he,tickBorderDashOffset:pe}))}return this._ticksLength=h,this._borderValue=k,p}_computeLabelItems(e){const t=this.axis,r=this.options,{position:n,ticks:i}=r,l=this.isHorizontal(),o=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=i,f=Ym(r.grid),p=f+u,g=h?-u:p,b=-So(this.labelRotation),w=[];let j,k,T,E,I,R,P,H,G,X,U,te,Z="middle";if(n==="top")R=this.bottom-g,P=this._getXAxisLabelAlignment();else if(n==="bottom")R=this.top+g,P=this._getXAxisLabelAlignment();else if(n==="left"){const B=this._getYAxisLabelAlignment(f);P=B.textAlign,I=B.x}else if(n==="right"){const B=this._getYAxisLabelAlignment(f);P=B.textAlign,I=B.x}else if(t==="x"){if(n==="center")R=(e.top+e.bottom)/2+p;else if(yr(n)){const B=Object.keys(n)[0],W=n[B];R=this.chart.scales[B].getPixelForValue(W)+p}P=this._getXAxisLabelAlignment()}else if(t==="y"){if(n==="center")I=(e.left+e.right)/2-p;else if(yr(n)){const B=Object.keys(n)[0],W=n[B];I=this.chart.scales[B].getPixelForValue(W)}P=this._getYAxisLabelAlignment(f).textAlign}t==="y"&&(c==="start"?Z="top":c==="end"&&(Z="bottom"));const J=this._getLabelSizes();for(j=0,k=o.length;j<k;++j){T=o[j],E=T.label;const B=i.setContext(this.getContext(j));H=this.getPixelForTick(j)+i.labelOffset,G=this._resolveTickFontOptions(j),X=G.lineHeight,U=yn(E)?E.length:1;const W=U/2,$=B.color,Q=B.textStrokeColor,ne=B.textStrokeWidth;let re=P;l?(I=H,P==="inner"&&(j===k-1?re=this.options.reverse?"left":"right":j===0?re=this.options.reverse?"right":"left":re="center"),n==="top"?d==="near"||b!==0?te=-U*X+X/2:d==="center"?te=-J.highest.height/2-W*X+X:te=-J.highest.height+X/2:d==="near"||b!==0?te=X/2:d==="center"?te=J.highest.height/2-W*X:te=J.highest.height-U*X,h&&(te*=-1),b!==0&&!B.showLabelBackdrop&&(I+=X/2*Math.sin(b))):(R=H,te=(1-U)*X/2);let K;if(B.showLabelBackdrop){const ae=cs(B.backdropPadding),ce=J.heights[j],de=J.widths[j];let he=te-ae.top,pe=0-ae.left;switch(Z){case"middle":he-=ce/2;break;case"bottom":he-=ce;break}switch(P){case"center":pe-=de/2;break;case"right":pe-=de;break;case"inner":j===k-1?pe-=de:j>0&&(pe-=de/2);break}K={left:pe,top:he,width:de+ae.width,height:ce+ae.height,color:B.backdropColor}}w.push({label:E,font:G,textOffset:te,options:{rotation:b,color:$,strokeColor:Q,strokeWidth:ne,textAlign:re,textBaseline:Z,translation:[I,R],backdrop:K}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-So(this.labelRotation))return e==="top"?"left":"right";let n="center";return t.align==="start"?n="left":t.align==="end"?n="right":t.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:n,padding:i}}=this.options,l=this._getLabelSizes(),o=e+i,c=l.widest.width;let d,u;return t==="left"?n?(u=this.right+i,r==="near"?d="left":r==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-o,r==="near"?d="right":r==="center"?(d="center",u-=c/2):(d="left",u=this.left)):t==="right"?n?(u=this.left+i,r==="near"?d="right":r==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+o,r==="near"?d="left":r==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:n,width:i,height:l}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,n,i,l),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(i=>i.value===e);return n>=0?t.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,l;const o=(c,d,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(d.x,d.y),r.stroke(),r.restore())};if(t.display)for(i=0,l=n.length;i<l;++i){const c=n[i];t.drawOnChartArea&&o({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&o({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:n}}=this,i=r.setContext(this.getContext()),l=r.display?i.width:0;if(!l)return;const o=n.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,f;this.isHorizontal()?(d=tf(e,this.left,l)-l/2,u=tf(e,this.right,o)+o/2,h=f=c):(h=tf(e,this.top,l)-l/2,f=tf(e,this.bottom,o)+o/2,d=u=c),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(d,h),t.lineTo(u,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,n=this._computeLabelArea();n&&G_(r,n);const i=this.getLabelItems(e);for(const l of i){const o=l.options,c=l.font,d=l.label,u=l.textOffset;v0(r,d,0,u,c,o)}n&&W_(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:n}}=this;if(!r.display)return;const i=wi(r.font),l=cs(r.padding),o=r.align;let c=i.lineHeight/2;t==="bottom"||t==="center"||yr(t)?(c+=l.bottom,yn(r.text)&&(c+=i.lineHeight*(r.text.length-1))):c+=l.top;const{titleX:d,titleY:u,maxWidth:h,rotation:f}=Xle(this,c,t,o);v0(e,r.text,0,0,i,{color:r.color,maxWidth:h,rotation:f,textAlign:qle(o,t,n),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=qa(e.grid&&e.grid.z,-1),n=qa(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==LU.prototype.draw?[{z:t,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:t,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",n=[];let i,l;for(i=0,l=t.length;i<l;++i){const o=t[i];o[r]===this.id&&(!e||o.type===e)&&n.push(o)}return n}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return wi(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}};class ty{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;Qle(t)&&(r=this.register(t));const n=this.items,i=e.id,l=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in n||(n[i]=e,Zle(e,l,r),this.override&&_n.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,n=this.scope;r in t&&delete t[r],n&&r in _n[n]&&(delete _n[n][r],this.override&&delete g0[r])}}function Zle(a,e,t){const r=Cv(Object.create(null),[t?_n.get(t):{},_n.get(e),a.defaults]);_n.set(e,r),a.defaultRoutes&&Kle(e,a.defaultRoutes),a.descriptors&&_n.describe(e,a.descriptors)}function Kle(a,e){Object.keys(e).forEach(t=>{const r=t.split("."),n=r.pop(),i=[a].concat(r).join("."),l=e[t].split("."),o=l.pop(),c=l.join(".");_n.route(i,n,c,o)})}function Qle(a){return"id"in a&&"defaults"in a}class Jle{constructor(){this.controllers=new ty(Th,"datasets",!0),this.elements=new ty(Ud,"elements"),this.plugins=new ty(Object,"plugins"),this.scales=new ty(jb,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(n=>{const i=r||this._getRegistryForType(n);r||i.isForType(n)||i===this.plugins&&n.id?this._exec(e,i,n):$r(n,l=>{const o=r||this._getRegistryForType(l);this._exec(e,o,l)})})}_exec(e,t,r){const n=aT(e);fn(r["before"+n],[],r),t[e](r),fn(r["after"+n],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const n=t.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return n}}var dc=new Jle;class eoe{constructor(){this._init=void 0}notify(e,t,r,n){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=n?this._descriptors(e).filter(n):this._descriptors(e),l=this._notify(i,e,t,r);return t==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),l}_notify(e,t,r,n){n=n||{};for(const i of e){const l=i.plugin,o=l[r],c=[t,n,i.options];if(fn(o,c,l)===!1&&n.cancelable)return!1}return!0}invalidate(){xr(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,n=qa(r.options&&r.options.plugins,{}),i=toe(r);return n===!1&&!t?[]:roe(e,i,n,t)}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,n=(i,l)=>i.filter(o=>!l.some(c=>o.plugin.id===c.plugin.id));this._notify(n(t,r),e,"stop"),this._notify(n(r,t),e,"start")}}function toe(a){const e={},t=[],r=Object.keys(dc.plugins.items);for(let i=0;i<r.length;i++)t.push(dc.getPlugin(r[i]));const n=a.plugins||[];for(let i=0;i<n.length;i++){const l=n[i];t.indexOf(l)===-1&&(t.push(l),e[l.id]=!0)}return{plugins:t,localIds:e}}function aoe(a,e){return!e&&a===!1?null:a===!0?{}:a}function roe(a,{plugins:e,localIds:t},r,n){const i=[],l=a.getContext();for(const o of e){const c=o.id,d=aoe(r[c],n);d!==null&&i.push({plugin:o,options:noe(a.config,{plugin:o,local:t[c]},d,l)})}return i}function noe(a,{plugin:e,local:t},r,n){const i=a.pluginScopeKeys(e),l=a.getOptionScopes(r,i);return t&&e.defaults&&l.push(e.defaults),a.createResolver(l,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function e4(a,e){const t=_n.datasets[a]||{};return((e.datasets||{})[a]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function ioe(a,e){let t=a;return a==="_index_"?t=e:a==="_value_"&&(t=e==="x"?"y":"x"),t}function soe(a,e){return a===e?"_index_":"_value_"}function BR(a){if(a==="x"||a==="y"||a==="r")return a}function loe(a){if(a==="top"||a==="bottom")return"x";if(a==="left"||a==="right")return"y"}function t4(a,...e){if(BR(a))return a;for(const t of e){const r=t.axis||loe(t.position)||a.length>1&&BR(a[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${a}' axis. Please provide 'axis' or 'position' option.`)}function FR(a,e,t){if(t[e+"AxisID"]===a)return{axis:e}}function ooe(a,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===a||r.yAxisID===a);if(t.length)return FR(a,"x",t[0])||FR(a,"y",t[0])}return{}}function coe(a,e){const t=g0[a.type]||{scales:{}},r=e.scales||{},n=e4(a.type,e),i=Object.create(null);return Object.keys(r).forEach(l=>{const o=r[l];if(!yr(o))return console.error(`Invalid scale configuration for scale: ${l}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const c=t4(l,o,ooe(l,a),_n.scales[o.type]),d=soe(c,n),u=t.scales||{};i[l]=tv(Object.create(null),[{axis:c},o,u[c],u[d]])}),a.data.datasets.forEach(l=>{const o=l.type||a.type,c=l.indexAxis||e4(o,e),u=(g0[o]||{}).scales||{};Object.keys(u).forEach(h=>{const f=ioe(h,c),p=l[f+"AxisID"]||f;i[p]=i[p]||Object.create(null),tv(i[p],[{axis:f},r[p],u[h]])})}),Object.keys(i).forEach(l=>{const o=i[l];tv(o,[_n.scales[o.type],_n.scale])}),i}function OU(a){const e=a.options||(a.options={});e.plugins=qa(e.plugins,{}),e.scales=coe(a,e)}function PU(a){return a=a||{},a.datasets=a.datasets||[],a.labels=a.labels||[],a}function doe(a){return a=a||{},a.data=PU(a.data),OU(a),a}const VR=new Map,zU=new Set;function ay(a,e){let t=VR.get(a);return t||(t=e(),VR.set(a,t),zU.add(t)),t}const $m=(a,e,t)=>{const r=gh(e,t);r!==void 0&&a.add(r)};class uoe{constructor(e){this._config=doe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=PU(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),OU(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return ay(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return ay(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return ay(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return ay(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let n=r.get(e);return(!n||t)&&(n=new Map,r.set(e,n)),n}getOptionScopes(e,t,r){const{options:n,type:i}=this,l=this._cachedScopes(e,r),o=l.get(t);if(o)return o;const c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(h=>$m(c,e,h))),u.forEach(h=>$m(c,n,h)),u.forEach(h=>$m(c,g0[i]||{},h)),u.forEach(h=>$m(c,_n,h)),u.forEach(h=>$m(c,QC,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),zU.has(t)&&l.set(t,d),d}chartOptionScopes(){const{options:e,type:t}=this;return[e,g0[t]||{},_n.datasets[t]||{},{type:t},_n,QC]}resolveNamedOptions(e,t,r,n=[""]){const i={$shared:!0},{resolver:l,subPrefixes:o}=HR(this._resolverCache,e,n);let c=l;if(foe(l,t)){i.$shared=!1,r=vh(r)?r():r;const d=this.createResolver(e,r,o);c=bx(l,r,d)}for(const d of t)i[d]=c[d];return i}createResolver(e,t,r=[""],n){const{resolver:i}=HR(this._resolverCache,e,r);return yr(t)?bx(i,t,void 0,n):i}}function HR(a,e,t){let r=a.get(e);r||(r=new Map,a.set(e,r));const n=t.join();let i=r.get(n);return i||(i={resolver:oT(e,t),subPrefixes:t.filter(o=>!o.toLowerCase().includes("hover"))},r.set(n,i)),i}const hoe=a=>yr(a)&&Object.getOwnPropertyNames(a).some(e=>vh(a[e]));function foe(a,e){const{isScriptable:t,isIndexable:r}=pU(a);for(const n of e){const i=t(n),l=r(n),o=(l||i)&&a[n];if(i&&(vh(o)||hoe(o))||l&&yn(o))return!0}return!1}var poe="4.5.1";const xoe=["top","bottom","left","right","chartArea"];function UR(a,e){return a==="top"||a==="bottom"||xoe.indexOf(a)===-1&&e==="x"}function GR(a,e){return function(t,r){return t[a]===r[a]?t[e]-r[e]:t[a]-r[a]}}function WR(a){const e=a.chart,t=e.options.animation;e.notifyPlugins("afterRender"),fn(t&&t.onComplete,[a],e)}function moe(a){const e=a.chart,t=e.options.animation;fn(t&&t.onProgress,[a],e)}function BU(a){return uT()&&typeof a=="string"?a=document.getElementById(a):a&&a.length&&(a=a[0]),a&&a.canvas&&(a=a.canvas),a}const Mw={},YR=a=>{const e=BU(a);return Object.values(Mw).filter(t=>t.canvas===e).pop()};function goe(a,e,t){const r=Object.keys(a);for(const n of r){const i=+n;if(i>=e){const l=a[n];delete a[n],(t>0||i>e)&&(a[i+t]=l)}}}function voe(a,e,t,r){return!t||a.type==="mouseout"?null:r?e:a}class qi{static defaults=_n;static instances=Mw;static overrides=g0;static registry=dc;static version=poe;static getChart=YR;static register(...e){dc.add(...e),$R()}static unregister(...e){dc.remove(...e),$R()}constructor(e,t){const r=this.config=new uoe(t),n=BU(e),i=YR(n);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const l=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||Ole(n)),this.platform.updateConfig(r);const o=this.platform.acquireContext(n,l.aspectRatio),c=o&&o.canvas,d=c&&c.height,u=c&&c.width;if(this.id=fie(),this.ctx=o,this.canvas=c,this.width=u,this.height=d,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new eoe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Mie(h=>this.update(h),l.resizeDelay||0),this._dataChanges=[],Mw[this.id]=this,!o||!c){console.error("Failed to create chart: can't acquire context from the given item");return}md.listen(this,"complete",WR),md.listen(this,"progress",moe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:n,_aspectRatio:i}=this;return xr(e)?t&&i?i:n?r/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return dc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():xR(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return hR(this.canvas,this.ctx),this}stop(){return md.stop(this),this}resize(e,t){md.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,n=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(n,e,t,i),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,xR(this,o,!0)&&(this.notifyPlugins("resize",{size:l}),fn(r.onResize,[this,l],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};$r(t,(r,n)=>{r.id=n})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,n=Object.keys(r).reduce((l,o)=>(l[o]=!1,l),{});let i=[];t&&(i=i.concat(Object.keys(t).map(l=>{const o=t[l],c=t4(l,o),d=c==="r",u=c==="x";return{options:o,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),$r(i,l=>{const o=l.options,c=o.id,d=t4(c,o),u=qa(o.type,l.dtype);(o.position===void 0||UR(o.position,d)!==UR(l.dposition))&&(o.position=l.dposition),n[c]=!0;let h=null;if(c in r&&r[c].type===u)h=r[c];else{const f=dc.getScale(u);h=new f({id:c,type:u,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(o,e)}),$r(n,(l,o)=>{l||delete r[o]}),$r(r,l=>{ls.configure(this,l,l.options),ls.addBox(this,l)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((n,i)=>n.index-i.index),r>t){for(let n=t;n<r;++n)this._destroyDatasetMeta(n);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(GR("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,n)=>{t.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,n;for(this._removeUnreferencedMetasets(),r=0,n=t.length;r<n;r++){const i=t[r];let l=this.getDatasetMeta(r);const o=i.type||this.config.type;if(l.type&&l.type!==o&&(this._destroyDatasetMeta(r),l=this.getDatasetMeta(r)),l.type=o,l.indexAxis=i.indexAxis||e4(o,this.options),l.order=i.order||0,l.index=r,l.label=""+i.label,l.visible=this.isDatasetVisible(r),l.controller)l.controller.updateIndex(r),l.controller.linkScales();else{const c=dc.getController(o),{datasetElementType:d,dataElementType:u}=_n.datasets[o];Object.assign(c,{dataElementType:dc.getElement(u),datasetElementType:d&&dc.getElement(d)}),l.controller=new c(this,r),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){$r(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),f=!n&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),l=Math.max(+h.getMaxOverflow(),l)}l=this._minPadding=r.layout.autoPadding?l:0,this._updateLayout(l),n||$r(i,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(GR("z","_idx"));const{_active:o,_lastEvent:c}=this;c?this._eventHandler(c,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){$r(this.scales,e=>{ls.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!rR(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:n,count:i}of t){const l=r==="_removeElements"?-i:i;goe(e,n,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=i=>new Set(e.filter(l=>l[0]===i).map((l,o)=>o+","+l.splice(1).join(","))),n=r(0);for(let i=1;i<t;i++)if(!rR(n,r(i)))return;return Array.from(n).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ls.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],$r(this.boxes,n=>{r&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,i)=>{n._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,vh(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),n={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(r.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(md.has(this)?this.attached&&!md.running(this)&&md.start(this):(this.draw(),WR({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let n,i;for(n=0,i=t.length;n<i;++n){const l=t[n];(!e||l.visible)&&r.push(l)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},n=SU(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(n&&G_(t,n),e.controller.draw(),n&&W_(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return kd(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,n){const i=xle.modes[t];return typeof i=="function"?i(this,e,r,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let n=r.filter(i=>i&&i._dataset===t).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(n)),n}getContext(){return this.$context||(this.$context=Ah(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){const r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const n=r?"show":"hide",i=this.getDatasetMeta(e),l=i.controller._resolveAnimations(void 0,n);Av(t)?(i.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),l.update(i,{visible:r}),this.update(o=>o.datasetIndex===e?n:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),md.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),hR(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Mw[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(i,l)=>{t.addEventListener(this,i,l),e[i]=l},n=(i,l,o)=>{i.offsetX=l,i.offsetY=o,this._eventHandler(i)};$r(this.options.events,i=>r(i,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(c,d)=>{t.addEventListener(this,c,d),e[c]=d},n=(c,d)=>{e[c]&&(t.removeEventListener(this,c,d),delete e[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let l;const o=()=>{n("attach",o),this.attached=!0,this.resize(),r("resize",i),r("detach",l)};l=()=>{this.attached=!1,n("resize",i),this._stop(),this._resize(0,0),r("attach",o)},t.isAttached(this.canvas)?o():l()}unbindEvents(){$r(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},$r(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const n=r?"set":"remove";let i,l,o,c;for(t==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+n+"DatasetHoverStyle"]()),o=0,c=e.length;o<c;++o){l=e[o];const d=l&&this.getDatasetMeta(l.datasetIndex).controller;d&&d[n+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:i,index:l})=>{const o=this.getDatasetMeta(i);if(!o)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:o.data[l],index:l}});!d2(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){const n=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),l=i(t,e),o=r?e:i(e,t);l.length&&this.updateHoverStyle(l,n.mode,!1),o.length&&n.mode&&this.updateHoverStyle(o,n.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,n)===!1)return;const i=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,n),(i||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:n=[],options:i}=this,l=t,o=this._getActiveElements(e,n,r,l),c=bie(e),d=voe(e,this._lastEvent,r,c);r&&(this._lastEvent=null,fn(i.onHover,[e,o,this],this),c&&fn(i.onClick,[e,o,this],this));const u=!d2(o,n);return(u||t)&&(this._active=o,this._updateHoverStyles(o,n,t)),this._lastEvent=d,u}_getActiveElements(e,t,r,n){if(e.type==="mouseout")return[];if(!r)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,n)}}function $R(){return $r(qi.instances,a=>a._plugins.invalidate())}function boe(a,e,t){const{startAngle:r,x:n,y:i,outerRadius:l,innerRadius:o,options:c}=e,{borderWidth:d,borderJoinStyle:u}=c,h=Math.min(d/l,ss(r-t));if(a.beginPath(),a.arc(n,i,l-d/2,r+h/2,t-h/2),o>0){const f=Math.min(d/o,ss(r-t));a.arc(n,i,o+d/2,t-f/2,r+f/2,!0)}else{const f=Math.min(d/2,l*ss(r-t));if(u==="round")a.arc(n,i,f,t-Er/2,r+Er/2,!0);else if(u==="bevel"){const p=2*f*f,g=-p*Math.cos(t+Er/2)+n,b=-p*Math.sin(t+Er/2)+i,w=p*Math.cos(r+Er/2)+n,j=p*Math.sin(r+Er/2)+i;a.lineTo(g,b),a.lineTo(w,j)}}a.closePath(),a.moveTo(0,0),a.rect(0,0,a.canvas.width,a.canvas.height),a.clip("evenodd")}function yoe(a,e,t){const{startAngle:r,pixelMargin:n,x:i,y:l,outerRadius:o,innerRadius:c}=e;let d=n/o;a.beginPath(),a.arc(i,l,o,r-d,t+d),c>n?(d=n/c,a.arc(i,l,c,t+d,r-d,!0)):a.arc(i,l,n,t+Yn,r-Yn),a.closePath(),a.clip()}function woe(a){return lT(a,["outerStart","outerEnd","innerStart","innerEnd"])}function _oe(a,e,t,r){const n=woe(a.options.borderRadius),i=(t-e)/2,l=Math.min(i,r*e/2),o=c=>{const d=(t-Math.min(i,c))*r/2;return Di(c,0,Math.min(i,d))};return{outerStart:o(n.outerStart),outerEnd:o(n.outerEnd),innerStart:Di(n.innerStart,0,l),innerEnd:Di(n.innerEnd,0,l)}}function gp(a,e,t,r){return{x:t+a*Math.cos(e),y:r+a*Math.sin(e)}}function m2(a,e,t,r,n,i){const{x:l,y:o,startAngle:c,pixelMargin:d,innerRadius:u}=e,h=Math.max(e.outerRadius+r+t-d,0),f=u>0?u+r+t+d:0;let p=0;const g=n-c;if(r){const B=u>0?u-r:0,W=h>0?h-r:0,$=(B+W)/2,Q=$!==0?g*$/($+r):g;p=(g-Q)/2}const b=Math.max(.001,g*h-t/Er)/h,w=(g-b)/2,j=c+w+p,k=n-w-p,{outerStart:T,outerEnd:E,innerStart:I,innerEnd:R}=_oe(e,f,h,k-j),P=h-T,H=h-E,G=j+T/P,X=k-E/H,U=f+I,te=f+R,Z=j+I/U,J=k-R/te;if(a.beginPath(),i){const B=(G+X)/2;if(a.arc(l,o,h,G,B),a.arc(l,o,h,B,X),E>0){const ne=gp(H,X,l,o);a.arc(ne.x,ne.y,E,X,k+Yn)}const W=gp(te,k,l,o);if(a.lineTo(W.x,W.y),R>0){const ne=gp(te,J,l,o);a.arc(ne.x,ne.y,R,k+Yn,J+Math.PI)}const $=(k-R/f+(j+I/f))/2;if(a.arc(l,o,f,k-R/f,$,!0),a.arc(l,o,f,$,j+I/f,!0),I>0){const ne=gp(U,Z,l,o);a.arc(ne.x,ne.y,I,Z+Math.PI,j-Yn)}const Q=gp(P,j,l,o);if(a.lineTo(Q.x,Q.y),T>0){const ne=gp(P,G,l,o);a.arc(ne.x,ne.y,T,j-Yn,G)}}else{a.moveTo(l,o);const B=Math.cos(G)*h+l,W=Math.sin(G)*h+o;a.lineTo(B,W);const $=Math.cos(X)*h+l,Q=Math.sin(X)*h+o;a.lineTo($,Q)}a.closePath()}function Noe(a,e,t,r,n){const{fullCircles:i,startAngle:l,circumference:o}=e;let c=e.endAngle;if(i){m2(a,e,t,r,c,n);for(let d=0;d<i;++d)a.fill();isNaN(o)||(c=l+(o%mn||mn))}return m2(a,e,t,r,c,n),a.fill(),c}function joe(a,e,t,r,n){const{fullCircles:i,startAngle:l,circumference:o,options:c}=e,{borderWidth:d,borderJoinStyle:u,borderDash:h,borderDashOffset:f,borderRadius:p}=c,g=c.borderAlign==="inner";if(!d)return;a.setLineDash(h||[]),a.lineDashOffset=f,g?(a.lineWidth=d*2,a.lineJoin=u||"round"):(a.lineWidth=d,a.lineJoin=u||"bevel");let b=e.endAngle;if(i){m2(a,e,t,r,b,n);for(let w=0;w<i;++w)a.stroke();isNaN(o)||(b=l+(o%mn||mn))}g&&yoe(a,e,b),c.selfJoin&&b-l>=Er&&p===0&&u!=="miter"&&boe(a,e,b),i||(m2(a,e,t,r,b,n),a.stroke())}class Soe extends Ud{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){const n=this.getProps(["x","y"],r),{angle:i,distance:l}=nU(n,{x:e,y:t}),{startAngle:o,endAngle:c,innerRadius:d,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),f=(this.options.spacing+this.options.borderWidth)/2,p=qa(h,c-o),g=Tv(i,o,c)&&o!==c,b=p>=mn||g,w=jd(l,d+f,u+f);return b&&w}getCenterPoint(e){const{x:t,y:r,startAngle:n,endAngle:i,innerRadius:l,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:d}=this.options,u=(n+i)/2,h=(l+o+d+c)/2;return{x:t+Math.cos(u)*h,y:r+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:r}=this,n=(t.offset||0)/4,i=(t.spacing||0)/2,l=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=r>mn?Math.floor(r/mn):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*n,Math.sin(o)*n);const c=1-Math.sin(Math.min(Er,r||0)),d=n*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,Noe(e,this,d,i,l),joe(e,this,d,i,l),e.restore()}}function FU(a,e,t=e){a.lineCap=qa(t.borderCapStyle,e.borderCapStyle),a.setLineDash(qa(t.borderDash,e.borderDash)),a.lineDashOffset=qa(t.borderDashOffset,e.borderDashOffset),a.lineJoin=qa(t.borderJoinStyle,e.borderJoinStyle),a.lineWidth=qa(t.borderWidth,e.borderWidth),a.strokeStyle=qa(t.borderColor,e.borderColor)}function koe(a,e,t){a.lineTo(t.x,t.y)}function Coe(a){return a.stepped?Hie:a.tension||a.cubicInterpolationMode==="monotone"?Uie:koe}function VU(a,e,t={}){const r=a.length,{start:n=0,end:i=r-1}=t,{start:l,end:o}=e,c=Math.max(n,l),d=Math.min(i,o),u=n<l&&i<l||n>o&&i>o;return{count:r,start:c,loop:e.loop,ilen:d<c&&!u?r+d-c:d-c}}function Aoe(a,e,t,r){const{points:n,options:i}=e,{count:l,start:o,loop:c,ilen:d}=VU(n,t,r),u=Coe(i);let{move:h=!0,reverse:f}=r||{},p,g,b;for(p=0;p<=d;++p)g=n[(o+(f?d-p:p))%l],!g.skip&&(h?(a.moveTo(g.x,g.y),h=!1):u(a,b,g,f,i.stepped),b=g);return c&&(g=n[(o+(f?d:0))%l],u(a,b,g,f,i.stepped)),!!c}function Toe(a,e,t,r){const n=e.points,{count:i,start:l,ilen:o}=VU(n,t,r),{move:c=!0,reverse:d}=r||{};let u=0,h=0,f,p,g,b,w,j;const k=E=>(l+(d?o-E:E))%i,T=()=>{b!==w&&(a.lineTo(u,w),a.lineTo(u,b),a.lineTo(u,j))};for(c&&(p=n[k(0)],a.moveTo(p.x,p.y)),f=0;f<=o;++f){if(p=n[k(f)],p.skip)continue;const E=p.x,I=p.y,R=E|0;R===g?(I<b?b=I:I>w&&(w=I),u=(h*u+E)/++h):(T(),a.lineTo(E,I),g=R,h=0,b=w=I),j=I}T()}function a4(a){const e=a.options,t=e.borderDash&&e.borderDash.length;return!a._decimated&&!a._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?Toe:Aoe}function Moe(a){return a.stepped?wse:a.tension||a.cubicInterpolationMode==="monotone"?_se:Rf}function Eoe(a,e,t,r){let n=e._path;n||(n=e._path=new Path2D,e.path(n,t,r)&&n.closePath()),FU(a,e.options),a.stroke(n)}function Doe(a,e,t,r){const{segments:n,options:i}=e,l=a4(e);for(const o of n)FU(a,i,o.style),a.beginPath(),l(a,e,o,{start:t,end:t+r-1})&&a.closePath(),a.stroke()}const Ioe=typeof Path2D=="function";function Roe(a,e,t,r){Ioe&&!e.options.segment?Eoe(a,e,t,r):Doe(a,e,t,r)}class q_ extends Ud{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const n=r.spanGaps?this._loop:this._fullLoop;fse(this._points,r,e,n,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Ase(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,n=e[t],i=this.points,l=jU(this,{property:t,start:n,end:n});if(!l.length)return;const o=[],c=Moe(r);let d,u;for(d=0,u=l.length;d<u;++d){const{start:h,end:f}=l[d],p=i[h],g=i[f];if(p===g){o.push(p);continue}const b=Math.abs((n-p[t])/(g[t]-p[t])),w=c(p,g,b,r.stepped);w[t]=e[t],o.push(w)}return o.length===1?o[0]:o}pathSegment(e,t,r){return a4(this)(e,this,t,r)}path(e,t,r){const n=this.segments,i=a4(this);let l=this._loop;t=t||0,r=r||this.points.length-t;for(const o of n)l&=i(e,this,o,{start:t,end:t+r-1});return!!l}draw(e,t,r,n){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),Roe(e,this,r,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function qR(a,e,t,r){const n=a.options,{[t]:i}=a.getProps([t],r);return Math.abs(e-i)<n.radius+n.hitRadius}class Loe extends Ud{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,r){const n=this.options,{x:i,y:l}=this.getProps(["x","y"],r);return Math.pow(e-i,2)+Math.pow(t-l,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,t){return qR(this,e,"x",t)}inYRange(e,t){return qR(this,e,"y",t)}getCenterPoint(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const r=t&&e.borderWidth||0;return(t+r)*2}draw(e,t){const r=this.options;this.skip||r.radius<.1||!kd(this,t,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,JC(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function HU(a,e){const{x:t,y:r,base:n,width:i,height:l}=a.getProps(["x","y","base","width","height"],e);let o,c,d,u,h;return a.horizontal?(h=l/2,o=Math.min(t,n),c=Math.max(t,n),d=r-h,u=r+h):(h=i/2,o=t-h,c=t+h,d=Math.min(r,n),u=Math.max(r,n)),{left:o,top:d,right:c,bottom:u}}function Zu(a,e,t,r){return a?0:Di(e,t,r)}function Ooe(a,e,t){const r=a.options.borderWidth,n=a.borderSkipped,i=fU(r);return{t:Zu(n.top,i.top,0,t),r:Zu(n.right,i.right,0,e),b:Zu(n.bottom,i.bottom,0,t),l:Zu(n.left,i.left,0,e)}}function Poe(a,e,t){const{enableBorderRadius:r}=a.getProps(["enableBorderRadius"]),n=a.options.borderRadius,i=e0(n),l=Math.min(e,t),o=a.borderSkipped,c=r||yr(n);return{topLeft:Zu(!c||o.top||o.left,i.topLeft,0,l),topRight:Zu(!c||o.top||o.right,i.topRight,0,l),bottomLeft:Zu(!c||o.bottom||o.left,i.bottomLeft,0,l),bottomRight:Zu(!c||o.bottom||o.right,i.bottomRight,0,l)}}function zoe(a){const e=HU(a),t=e.right-e.left,r=e.bottom-e.top,n=Ooe(a,t/2,r/2),i=Poe(a,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:i},inner:{x:e.left+n.l,y:e.top+n.t,w:t-n.l-n.r,h:r-n.t-n.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,i.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(n.b,n.r))}}}}function QS(a,e,t,r){const n=e===null,i=t===null,o=a&&!(n&&i)&&HU(a,r);return o&&(n||jd(e,o.left,o.right))&&(i||jd(t,o.top,o.bottom))}function Boe(a){return a.topLeft||a.topRight||a.bottomLeft||a.bottomRight}function Foe(a,e){a.rect(e.x,e.y,e.w,e.h)}function JS(a,e,t={}){const r=a.x!==t.x?-e:0,n=a.y!==t.y?-e:0,i=(a.x+a.w!==t.x+t.w?e:0)-r,l=(a.y+a.h!==t.y+t.h?e:0)-n;return{x:a.x+r,y:a.y+n,w:a.w+i,h:a.h+l,radius:a.radius}}class Voe extends Ud{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:n}}=this,{inner:i,outer:l}=zoe(this),o=Boe(l.radius)?Mv:Foe;e.save(),(l.w!==i.w||l.h!==i.h)&&(e.beginPath(),o(e,JS(l,t,i)),e.clip(),o(e,JS(i,-t,l)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),o(e,JS(i,t)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,t,r){return QS(this,e,t,r)}inXRange(e,t){return QS(this,e,null,t)}inYRange(e,t){return QS(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:n,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+n)/2:t,y:i?r:(r+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}var Hoe=Object.freeze({__proto__:null,ArcElement:Soe,BarElement:Voe,LineElement:q_,PointElement:Loe});const r4=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],XR=r4.map(a=>a.replace("rgb(","rgba(").replace(")",", 0.5)"));function UU(a){return r4[a%r4.length]}function GU(a){return XR[a%XR.length]}function Uoe(a,e){return a.borderColor=UU(e),a.backgroundColor=GU(e),++e}function Goe(a,e){return a.backgroundColor=a.data.map(()=>UU(e++)),e}function Woe(a,e){return a.backgroundColor=a.data.map(()=>GU(e++)),e}function Yoe(a){let e=0;return(t,r)=>{const n=a.getDatasetMeta(r).controller;n instanceof fT?e=Goe(t,e):n instanceof TU?e=Woe(t,e):n&&(e=Uoe(t,e))}}function ZR(a){let e;for(e in a)if(a[e].borderColor||a[e].backgroundColor)return!0;return!1}function $oe(a){return a&&(a.borderColor||a.backgroundColor)}function qoe(){return _n.borderColor!=="rgba(0,0,0,0.1)"||_n.backgroundColor!=="rgba(0,0,0,0.1)"}var Xoe={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(a,e,t){if(!t.enabled)return;const{data:{datasets:r},options:n}=a.config,{elements:i}=n,l=ZR(r)||$oe(n)||i&&ZR(i)||qoe();if(!t.forceOverride&&l)return;const o=Yoe(a);r.forEach(o)}};function Zoe(a,e,t,r,n){const i=n.samples||r;if(i>=t)return a.slice(e,e+t);const l=[],o=(t-2)/(i-2);let c=0;const d=e+t-1;let u=e,h,f,p,g,b;for(l[c++]=a[u],h=0;h<i-2;h++){let w=0,j=0,k;const T=Math.floor((h+1)*o)+1+e,E=Math.min(Math.floor((h+2)*o)+1,t)+e,I=E-T;for(k=T;k<E;k++)w+=a[k].x,j+=a[k].y;w/=I,j/=I;const R=Math.floor(h*o)+1+e,P=Math.min(Math.floor((h+1)*o)+1,t)+e,{x:H,y:G}=a[u];for(p=g=-1,k=R;k<P;k++)g=.5*Math.abs((H-w)*(a[k].y-G)-(H-a[k].x)*(j-G)),g>p&&(p=g,f=a[k],b=k);l[c++]=f,u=b}return l[c++]=a[d],l}function Koe(a,e,t,r){let n=0,i=0,l,o,c,d,u,h,f,p,g,b;const w=[],j=e+t-1,k=a[e].x,E=a[j].x-k;for(l=e;l<e+t;++l){o=a[l],c=(o.x-k)/E*r,d=o.y;const I=c|0;if(I===u)d<g?(g=d,h=l):d>b&&(b=d,f=l),n=(i*n+o.x)/++i;else{const R=l-1;if(!xr(h)&&!xr(f)){const P=Math.min(h,f),H=Math.max(h,f);P!==p&&P!==R&&w.push({...a[P],x:n}),H!==p&&H!==R&&w.push({...a[H],x:n})}l>0&&R!==p&&w.push(a[R]),w.push(o),u=I,i=0,g=b=d,h=f=p=l}}return w}function WU(a){if(a._decimated){const e=a._data;delete a._decimated,delete a._data,Object.defineProperty(a,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function KR(a){a.data.datasets.forEach(e=>{WU(e)})}function Qoe(a,e){const t=e.length;let r=0,n;const{iScale:i}=a,{min:l,max:o,minDefined:c,maxDefined:d}=i.getUserBounds();return c&&(r=Di(Sd(e,i.axis,l).lo,0,t-1)),d?n=Di(Sd(e,i.axis,o).hi+1,r,t)-r:n=t-r,{start:r,count:n}}var Joe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(a,e,t)=>{if(!t.enabled){KR(a);return}const r=a.width;a.data.datasets.forEach((n,i)=>{const{_data:l,indexAxis:o}=n,c=a.getDatasetMeta(i),d=l||n.data;if(Ig([o,a.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const u=a.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||a.options.parsing)return;let{start:h,count:f}=Qoe(c,d);const p=t.threshold||4*r;if(f<=p){WU(n);return}xr(l)&&(n._data=d,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let g;switch(t.algorithm){case"lttb":g=Zoe(d,h,f,r,t);break;case"min-max":g=Koe(d,h,f,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}n._decimated=g})},destroy(a){KR(a)}};function ece(a,e,t){const r=a.segments,n=a.points,i=e.points,l=[];for(const o of r){let{start:c,end:d}=o;d=X_(c,d,n);const u=n4(t,n[c],n[d],o.loop);if(!e.segments){l.push({source:o,target:u,start:n[c],end:n[d]});continue}const h=jU(e,u);for(const f of h){const p=n4(t,i[f.start],i[f.end],f.loop),g=NU(o,n,p);for(const b of g)l.push({source:b,target:f,start:{[t]:QR(u,p,"start",Math.max)},end:{[t]:QR(u,p,"end",Math.min)}})}}return l}function n4(a,e,t,r){if(r)return;let n=e[a],i=t[a];return a==="angle"&&(n=ss(n),i=ss(i)),{property:a,start:n,end:i}}function tce(a,e){const{x:t=null,y:r=null}=a||{},n=e.points,i=[];return e.segments.forEach(({start:l,end:o})=>{o=X_(l,o,n);const c=n[l],d=n[o];r!==null?(i.push({x:c.x,y:r}),i.push({x:d.x,y:r})):t!==null&&(i.push({x:t,y:c.y}),i.push({x:t,y:d.y}))}),i}function X_(a,e,t){for(;e>a;e--){const r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function QR(a,e,t,r){return a&&e?r(a[t],e[t]):a?a[t]:e?e[t]:0}function YU(a,e){let t=[],r=!1;return yn(a)?(r=!0,t=a):t=tce(a,e),t.length?new q_({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function JR(a){return a&&a.fill!==!1}function ace(a,e,t){let n=a[e].fill;const i=[e];let l;if(!t)return n;for(;n!==!1&&i.indexOf(n)===-1;){if(!Pn(n))return n;if(l=a[n],!l)return!1;if(l.visible)return n;i.push(n),n=l.fill}return!1}function rce(a,e,t){const r=lce(a);if(yr(r))return isNaN(r.value)?!1:r;let n=parseFloat(r);return Pn(n)&&Math.floor(n)===n?nce(r[0],e,n,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function nce(a,e,t,r){return(a==="-"||a==="+")&&(t=e+t),t===e||t<0||t>=r?!1:t}function ice(a,e){let t=null;return a==="start"?t=e.bottom:a==="end"?t=e.top:yr(a)?t=e.getPixelForValue(a.value):e.getBasePixel&&(t=e.getBasePixel()),t}function sce(a,e,t){let r;return a==="start"?r=t:a==="end"?r=e.options.reverse?e.min:e.max:yr(a)?r=a.value:r=e.getBaseValue(),r}function lce(a){const e=a.options,t=e.fill;let r=qa(t&&t.target,t);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function oce(a){const{scale:e,index:t,line:r}=a,n=[],i=r.segments,l=r.points,o=cce(e,t);o.push(YU({x:null,y:e.bottom},r));for(let c=0;c<i.length;c++){const d=i[c];for(let u=d.start;u<=d.end;u++)dce(n,l[u],o)}return new q_({points:n,options:{}})}function cce(a,e){const t=[],r=a.getMatchingVisibleMetas("line");for(let n=0;n<r.length;n++){const i=r[n];if(i.index===e)break;i.hidden||t.unshift(i.dataset)}return t}function dce(a,e,t){const r=[];for(let n=0;n<t.length;n++){const i=t[n],{first:l,last:o,point:c}=uce(i,e,"x");if(!(!c||l&&o)){if(l)r.unshift(c);else if(a.push(c),!o)break}}a.push(...r)}function uce(a,e,t){const r=a.interpolate(e,t);if(!r)return{};const n=r[t],i=a.segments,l=a.points;let o=!1,c=!1;for(let d=0;d<i.length;d++){const u=i[d],h=l[u.start][t],f=l[u.end][t];if(jd(n,h,f)){o=n===h,c=n===f;break}}return{first:o,last:c,point:r}}class $U{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){const{x:n,y:i,radius:l}=this;return t=t||{start:0,end:mn},e.arc(n,i,l,t.end,t.start,!0),!r.bounds}interpolate(e){const{x:t,y:r,radius:n}=this,i=e.angle;return{x:t+Math.cos(i)*n,y:r+Math.sin(i)*n,angle:i}}}function hce(a){const{chart:e,fill:t,line:r}=a;if(Pn(t))return fce(e,t);if(t==="stack")return oce(a);if(t==="shape")return!0;const n=pce(a);return n instanceof $U?n:YU(n,r)}function fce(a,e){const t=a.getDatasetMeta(e);return t&&a.isDatasetVisible(e)?t.dataset:null}function pce(a){return(a.scale||{}).getPointPositionForValue?mce(a):xce(a)}function xce(a){const{scale:e={},fill:t}=a,r=ice(t,e);if(Pn(r)){const n=e.isHorizontal();return{x:n?r:null,y:n?null:r}}return null}function mce(a){const{scale:e,fill:t}=a,r=e.options,n=e.getLabels().length,i=r.reverse?e.max:e.min,l=sce(t,e,i),o=[];if(r.grid.circular){const c=e.getPointPositionForValue(0,i);return new $U({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(l)})}for(let c=0;c<n;++c)o.push(e.getPointPositionForValue(c,l));return o}function e5(a,e,t){const r=hce(e),{chart:n,index:i,line:l,scale:o,axis:c}=e,d=l.options,u=d.fill,h=d.backgroundColor,{above:f=h,below:p=h}=u||{},g=n.getDatasetMeta(i),b=SU(n,g);r&&l.points.length&&(G_(a,t),gce(a,{line:l,target:r,above:f,below:p,area:t,scale:o,axis:c,clip:b}),W_(a))}function gce(a,e){const{line:t,target:r,above:n,below:i,area:l,scale:o,clip:c}=e,d=t._loop?"angle":e.axis;a.save();let u=i;i!==n&&(d==="x"?(eL(a,r,l.top),t5(a,{line:t,target:r,color:n,scale:o,property:d,clip:c}),a.restore(),a.save(),eL(a,r,l.bottom)):d==="y"&&(tL(a,r,l.left),t5(a,{line:t,target:r,color:i,scale:o,property:d,clip:c}),a.restore(),a.save(),tL(a,r,l.right),u=n)),t5(a,{line:t,target:r,color:u,scale:o,property:d,clip:c}),a.restore()}function eL(a,e,t){const{segments:r,points:n}=e;let i=!0,l=!1;a.beginPath();for(const o of r){const{start:c,end:d}=o,u=n[c],h=n[X_(c,d,n)];i?(a.moveTo(u.x,u.y),i=!1):(a.lineTo(u.x,t),a.lineTo(u.x,u.y)),l=!!e.pathSegment(a,o,{move:l}),l?a.closePath():a.lineTo(h.x,t)}a.lineTo(e.first().x,t),a.closePath(),a.clip()}function tL(a,e,t){const{segments:r,points:n}=e;let i=!0,l=!1;a.beginPath();for(const o of r){const{start:c,end:d}=o,u=n[c],h=n[X_(c,d,n)];i?(a.moveTo(u.x,u.y),i=!1):(a.lineTo(t,u.y),a.lineTo(u.x,u.y)),l=!!e.pathSegment(a,o,{move:l}),l?a.closePath():a.lineTo(t,h.y)}a.lineTo(t,e.first().y),a.closePath(),a.clip()}function t5(a,e){const{line:t,target:r,property:n,color:i,scale:l,clip:o}=e,c=ece(t,r,n);for(const{source:d,target:u,start:h,end:f}of c){const{style:{backgroundColor:p=i}={}}=d,g=r!==!0;a.save(),a.fillStyle=p,vce(a,l,o,g&&n4(n,h,f)),a.beginPath();const b=!!t.pathSegment(a,d);let w;if(g){b?a.closePath():aL(a,r,f,n);const j=!!r.pathSegment(a,u,{move:b,reverse:!0});w=b&&j,w||aL(a,r,h,n)}a.closePath(),a.fill(w?"evenodd":"nonzero"),a.restore()}}function vce(a,e,t,r){const n=e.chart.chartArea,{property:i,start:l,end:o}=r||{};if(i==="x"||i==="y"){let c,d,u,h;i==="x"?(c=l,d=n.top,u=o,h=n.bottom):(c=n.left,d=l,u=n.right,h=o),a.beginPath(),t&&(c=Math.max(c,t.left),u=Math.min(u,t.right),d=Math.max(d,t.top),h=Math.min(h,t.bottom)),a.rect(c,d,u-c,h-d),a.clip()}}function aL(a,e,t,r){const n=e.interpolate(t,r);n&&a.lineTo(n.x,n.y)}var bce={id:"filler",afterDatasetsUpdate(a,e,t){const r=(a.data.datasets||[]).length,n=[];let i,l,o,c;for(l=0;l<r;++l)i=a.getDatasetMeta(l),o=i.dataset,c=null,o&&o.options&&o instanceof q_&&(c={visible:a.isDatasetVisible(l),index:l,fill:rce(o,l,r),chart:a,axis:i.controller.options.indexAxis,scale:i.vScale,line:o}),i.$filler=c,n.push(c);for(l=0;l<r;++l)c=n[l],!(!c||c.fill===!1)&&(c.fill=ace(n,l,t.propagate))},beforeDraw(a,e,t){const r=t.drawTime==="beforeDraw",n=a.getSortedVisibleDatasetMetas(),i=a.chartArea;for(let l=n.length-1;l>=0;--l){const o=n[l].$filler;o&&(o.line.updateControlPoints(i,o.axis),r&&o.fill&&e5(a.ctx,o,i))}},beforeDatasetsDraw(a,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const r=a.getSortedVisibleDatasetMetas();for(let n=r.length-1;n>=0;--n){const i=r[n].$filler;JR(i)&&e5(a.ctx,i,a.chartArea)}},beforeDatasetDraw(a,e,t){const r=e.meta.$filler;!JR(r)||t.drawTime!=="beforeDatasetDraw"||e5(a.ctx,r,a.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const rL=(a,e)=>{let{boxHeight:t=e,boxWidth:r=e}=a;return a.usePointStyle&&(t=Math.min(t,e),r=a.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},yce=(a,e)=>a!==null&&e!==null&&a.datasetIndex===e.datasetIndex&&a.index===e.index;class nL extends Ud{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=fn(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,n)=>e.sort(r,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,n=wi(r.font),i=n.size,l=this._computeTitleHeight(),{boxWidth:o,itemHeight:c}=rL(r,i);let d,u;t.font=n.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(l,i,o,c)+10):(u=this.maxHeight,d=this._fitCols(l,n,o,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,n){const{ctx:i,maxWidth:l,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=n+o;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((g,b)=>{const w=r+t/2+i.measureText(g.text).width;(b===0||d[d.length-1]+w+2*o>l)&&(h+=u,d[d.length-(b>0?0:1)]=0,p+=u,f++),c[b]={left:0,top:p,row:f,width:w,height:n},d[d.length-1]+=w+o}),h}_fitCols(e,t,r,n){const{ctx:i,maxHeight:l,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=l-e;let h=o,f=0,p=0,g=0,b=0;return this.legendItems.forEach((w,j)=>{const{itemWidth:k,itemHeight:T}=wce(r,t,i,w,n);j>0&&p+T+2*o>u&&(h+=f+o,d.push({width:f,height:p}),g+=f+o,b++,f=p=0),c[j]={left:g,top:p,col:b,width:k,height:T},f=Math.max(f,k),p+=T+o}),h+=f,d.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:n},rtl:i}}=this,l=lx(i,this.left,this.width);if(this.isHorizontal()){let o=0,c=rs(r,this.left+n,this.right-this.lineWidths[o]);for(const d of t)o!==d.row&&(o=d.row,c=rs(r,this.left+n,this.right-this.lineWidths[o])),d.top+=this.top+e+n,d.left=l.leftForLtr(l.x(c),d.width),c+=d.width+n}else{let o=0,c=rs(r,this.top+e+n,this.bottom-this.columnSizes[o].height);for(const d of t)d.col!==o&&(o=d.col,c=rs(r,this.top+e+n,this.bottom-this.columnSizes[o].height)),d.top=c,d.left+=this.left+n,d.left=l.leftForLtr(l.x(d.left),d.width),c+=d.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;G_(e,this),this._draw(),W_(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:n}=this,{align:i,labels:l}=e,o=_n.color,c=lx(e.rtl,this.left,this.width),d=wi(l.font),{padding:u}=l,h=d.size,f=h/2;let p;this.drawTitle(),n.textAlign=c.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=d.string;const{boxWidth:g,boxHeight:b,itemHeight:w}=rL(l,h),j=function(R,P,H){if(isNaN(g)||g<=0||isNaN(b)||b<0)return;n.save();const G=qa(H.lineWidth,1);if(n.fillStyle=qa(H.fillStyle,o),n.lineCap=qa(H.lineCap,"butt"),n.lineDashOffset=qa(H.lineDashOffset,0),n.lineJoin=qa(H.lineJoin,"miter"),n.lineWidth=G,n.strokeStyle=qa(H.strokeStyle,o),n.setLineDash(qa(H.lineDash,[])),l.usePointStyle){const X={radius:b*Math.SQRT2/2,pointStyle:H.pointStyle,rotation:H.rotation,borderWidth:G},U=c.xPlus(R,g/2),te=P+f;hU(n,X,U,te,l.pointStyleWidth&&g)}else{const X=P+Math.max((h-b)/2,0),U=c.leftForLtr(R,g),te=e0(H.borderRadius);n.beginPath(),Object.values(te).some(Z=>Z!==0)?Mv(n,{x:U,y:X,w:g,h:b,radius:te}):n.rect(U,X,g,b),n.fill(),G!==0&&n.stroke()}n.restore()},k=function(R,P,H){v0(n,H.text,R,P+w/2,d,{strikethrough:H.hidden,textAlign:c.textAlign(H.textAlign)})},T=this.isHorizontal(),E=this._computeTitleHeight();T?p={x:rs(i,this.left+u,this.right-r[0]),y:this.top+u+E,line:0}:p={x:this.left+u,y:rs(i,this.top+E+u,this.bottom-t[0].height),line:0},yU(this.ctx,e.textDirection);const I=w+u;this.legendItems.forEach((R,P)=>{n.strokeStyle=R.fontColor,n.fillStyle=R.fontColor;const H=n.measureText(R.text).width,G=c.textAlign(R.textAlign||(R.textAlign=l.textAlign)),X=g+f+H;let U=p.x,te=p.y;c.setWidth(this.width),T?P>0&&U+X+u>this.right&&(te=p.y+=I,p.line++,U=p.x=rs(i,this.left+u,this.right-r[p.line])):P>0&&te+I>this.bottom&&(U=p.x=U+t[p.line].width+u,p.line++,te=p.y=rs(i,this.top+E+u,this.bottom-t[p.line].height));const Z=c.x(U);if(j(Z,te,R),U=Eie(G,U+g+f,T?U+X:this.right,e.rtl),k(c.x(U),te,R),T)p.x+=X+u;else if(typeof R.text!="string"){const J=d.lineHeight;p.y+=qU(R,J)+u}else p.y+=I}),wU(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=wi(t.font),n=cs(t.padding);if(!t.display)return;const i=lx(e.rtl,this.left,this.width),l=this.ctx,o=t.position,c=r.size/2,d=n.top+c;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+d,h=rs(e.align,h,this.right-f);else{const g=this.columnSizes.reduce((b,w)=>Math.max(b,w.height),0);u=d+rs(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const p=rs(o,h,h+f);l.textAlign=i.textAlign(iT(o)),l.textBaseline="middle",l.strokeStyle=t.color,l.fillStyle=t.color,l.font=r.string,v0(l,t.text,p,u,r)}_computeTitleHeight(){const e=this.options.title,t=wi(e.font),r=cs(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,n,i;if(jd(e,this.left,this.right)&&jd(t,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(n=i[r],jd(e,n.left,n.left+n.width)&&jd(t,n.top,n.top+n.height))return this.legendItems[r]}return null}handleEvent(e){const t=this.options;if(!jce(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,i=yce(n,r);n&&!i&&fn(t.onLeave,[e,n,this],this),this._hoveredItem=r,r&&!i&&fn(t.onHover,[e,r,this],this)}else r&&fn(t.onClick,[e,r,this],this)}}function wce(a,e,t,r,n){const i=_ce(r,a,e,t),l=Nce(n,r,e.lineHeight);return{itemWidth:i,itemHeight:l}}function _ce(a,e,t,r){let n=a.text;return n&&typeof n!="string"&&(n=n.reduce((i,l)=>i.length>l.length?i:l)),e+t.size/2+r.measureText(n).width}function Nce(a,e,t){let r=a;return typeof e.text!="string"&&(r=qU(e,t)),r}function qU(a,e){const t=a.text?a.text.length:0;return e*t}function jce(a,e){return!!((a==="mousemove"||a==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(a==="click"||a==="mouseup"))}var Sce={id:"legend",_element:nL,start(a,e,t){const r=a.legend=new nL({ctx:a.ctx,options:t,chart:a});ls.configure(a,r,t),ls.addBox(a,r)},stop(a){ls.removeBox(a,a.legend),delete a.legend},beforeUpdate(a,e,t){const r=a.legend;ls.configure(a,r,t),r.options=t},afterUpdate(a){const e=a.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(a,e){e.replay||a.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(a,e,t){const r=e.datasetIndex,n=t.chart;n.isDatasetVisible(r)?(n.hide(r),e.hidden=!0):(n.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:a=>a.chart.options.color,boxWidth:40,padding:10,generateLabels(a){const e=a.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:n,color:i,useBorderRadius:l,borderRadius:o}}=a.legend.options;return a._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(t?0:void 0),u=cs(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:r||d.pointStyle,rotation:d.rotation,textAlign:n||d.textAlign,borderRadius:l&&(o||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:a=>a.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:a=>!a.startsWith("on"),labels:{_scriptable:a=>!["generateLabels","filter","sort"].includes(a)}}};class xT extends Ud{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const n=yn(r.text)?r.text.length:1;this._padding=cs(r.padding);const i=n*wi(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:r,bottom:n,right:i,options:l}=this,o=l.align;let c=0,d,u,h;return this.isHorizontal()?(u=rs(o,r,i),h=t+e,d=i-r):(l.position==="left"?(u=r+e,h=rs(o,n,t),c=Er*-.5):(u=i-e,h=rs(o,t,n),c=Er*.5),d=n-t),{titleX:u,titleY:h,maxWidth:d,rotation:c}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=wi(t.font),i=r.lineHeight/2+this._padding.top,{titleX:l,titleY:o,maxWidth:c,rotation:d}=this._drawArgs(i);v0(e,t.text,0,0,r,{color:t.color,maxWidth:c,rotation:d,textAlign:iT(t.align),textBaseline:"middle",translation:[l,o]})}}function kce(a,e){const t=new xT({ctx:a.ctx,options:e,chart:a});ls.configure(a,t,e),ls.addBox(a,t),a.titleBlock=t}var Cce={id:"title",_element:xT,start(a,e,t){kce(a,t)},stop(a){const e=a.titleBlock;ls.removeBox(a,e),delete a.titleBlock},beforeUpdate(a,e,t){const r=a.titleBlock;ls.configure(a,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ry=new WeakMap;var Ace={id:"subtitle",start(a,e,t){const r=new xT({ctx:a.ctx,options:t,chart:a});ls.configure(a,r,t),ls.addBox(a,r),ry.set(a,r)},stop(a){ls.removeBox(a,ry.get(a)),ry.delete(a)},beforeUpdate(a,e,t){const r=ry.get(a);ls.configure(a,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Lg={average(a){if(!a.length)return!1;let e,t,r=new Set,n=0,i=0;for(e=0,t=a.length;e<t;++e){const o=a[e].element;if(o&&o.hasValue()){const c=o.tooltipPosition();r.add(c.x),n+=c.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((o,c)=>o+c)/r.size,y:n/i}},nearest(a,e){if(!a.length)return!1;let t=e.x,r=e.y,n=Number.POSITIVE_INFINITY,i,l,o;for(i=0,l=a.length;i<l;++i){const c=a[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=KC(e,d);u<n&&(n=u,o=c)}}if(o){const c=o.tooltipPosition();t=c.x,r=c.y}return{x:t,y:r}}};function sc(a,e){return e&&(yn(e)?Array.prototype.push.apply(a,e):a.push(e)),a}function gd(a){return(typeof a=="string"||a instanceof String)&&a.indexOf(`
`)>-1?a.split(`
`):a}function Tce(a,e){const{element:t,datasetIndex:r,index:n}=e,i=a.getDatasetMeta(r).controller,{label:l,value:o}=i.getLabelAndValue(n);return{chart:a,label:l,parsed:i.getParsed(n),raw:a.data.datasets[r].data[n],formattedValue:o,dataset:i.getDataset(),dataIndex:n,datasetIndex:r,element:t}}function iL(a,e){const t=a.chart.ctx,{body:r,footer:n,title:i}=a,{boxWidth:l,boxHeight:o}=e,c=wi(e.bodyFont),d=wi(e.titleFont),u=wi(e.footerFont),h=i.length,f=n.length,p=r.length,g=cs(e.padding);let b=g.height,w=0,j=r.reduce((E,I)=>E+I.before.length+I.lines.length+I.after.length,0);if(j+=a.beforeBody.length+a.afterBody.length,h&&(b+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),j){const E=e.displayColors?Math.max(o,c.lineHeight):c.lineHeight;b+=p*E+(j-p)*c.lineHeight+(j-1)*e.bodySpacing}f&&(b+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let k=0;const T=function(E){w=Math.max(w,t.measureText(E).width+k)};return t.save(),t.font=d.string,$r(a.title,T),t.font=c.string,$r(a.beforeBody.concat(a.afterBody),T),k=e.displayColors?l+2+e.boxPadding:0,$r(r,E=>{$r(E.before,T),$r(E.lines,T),$r(E.after,T)}),k=0,t.font=u.string,$r(a.footer,T),t.restore(),w+=g.width,{width:w,height:b}}function Mce(a,e){const{y:t,height:r}=e;return t<r/2?"top":t>a.height-r/2?"bottom":"center"}function Ece(a,e,t,r){const{x:n,width:i}=r,l=t.caretSize+t.caretPadding;if(a==="left"&&n+i+l>e.width||a==="right"&&n-i-l<0)return!0}function Dce(a,e,t,r){const{x:n,width:i}=t,{width:l,chartArea:{left:o,right:c}}=a;let d="center";return r==="center"?d=n<=(o+c)/2?"left":"right":n<=i/2?d="left":n>=l-i/2&&(d="right"),Ece(d,a,e,t)&&(d="center"),d}function sL(a,e,t){const r=t.yAlign||e.yAlign||Mce(a,t);return{xAlign:t.xAlign||e.xAlign||Dce(a,e,t,r),yAlign:r}}function Ice(a,e){let{x:t,width:r}=a;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function Rce(a,e,t){let{y:r,height:n}=a;return e==="top"?r+=t:e==="bottom"?r-=n+t:r-=n/2,r}function lL(a,e,t,r){const{caretSize:n,caretPadding:i,cornerRadius:l}=a,{xAlign:o,yAlign:c}=t,d=n+i,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=e0(l);let g=Ice(e,o);const b=Rce(e,c,d);return c==="center"?o==="left"?g+=d:o==="right"&&(g-=d):o==="left"?g-=Math.max(u,f)+n:o==="right"&&(g+=Math.max(h,p)+n),{x:Di(g,0,r.width-e.width),y:Di(b,0,r.height-e.height)}}function ny(a,e,t){const r=cs(t.padding);return e==="center"?a.x+a.width/2:e==="right"?a.x+a.width-r.right:a.x+r.left}function oL(a){return sc([],gd(a))}function Lce(a,e,t){return Ah(a,{tooltip:e,tooltipItems:t,type:"tooltip"})}function cL(a,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?a.override(t):a}const XU={beforeTitle:od,title(a){if(a.length>0){const e=a[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:od,beforeBody:od,beforeLabel:od,label(a){if(this&&this.options&&this.options.mode==="dataset")return a.label+": "+a.formattedValue||a.formattedValue;let e=a.dataset.label||"";e&&(e+=": ");const t=a.formattedValue;return xr(t)||(e+=t),e},labelColor(a){const t=a.chart.getDatasetMeta(a.datasetIndex).controller.getStyle(a.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(a){const t=a.chart.getDatasetMeta(a.datasetIndex).controller.getStyle(a.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:od,afterBody:od,beforeFooter:od,footer:od,afterFooter:od};function Gs(a,e,t,r){const n=a[e].call(t,r);return typeof n>"u"?XU[e].call(t,r):n}class dL extends Ud{static positioners=Lg;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),n=r.enabled&&t.options.animation&&r.animations,i=new kU(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Lce(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,n=Gs(r,"beforeTitle",this,e),i=Gs(r,"title",this,e),l=Gs(r,"afterTitle",this,e);let o=[];return o=sc(o,gd(n)),o=sc(o,gd(i)),o=sc(o,gd(l)),o}getBeforeBody(e,t){return oL(Gs(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,n=[];return $r(e,i=>{const l={before:[],lines:[],after:[]},o=cL(r,i);sc(l.before,gd(Gs(o,"beforeLabel",this,i))),sc(l.lines,Gs(o,"label",this,i)),sc(l.after,gd(Gs(o,"afterLabel",this,i))),n.push(l)}),n}getAfterBody(e,t){return oL(Gs(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,n=Gs(r,"beforeFooter",this,e),i=Gs(r,"footer",this,e),l=Gs(r,"afterFooter",this,e);let o=[];return o=sc(o,gd(n)),o=sc(o,gd(i)),o=sc(o,gd(l)),o}_createItems(e){const t=this._active,r=this.chart.data,n=[],i=[],l=[];let o=[],c,d;for(c=0,d=t.length;c<d;++c)o.push(Tce(this.chart,t[c]));return e.filter&&(o=o.filter((u,h,f)=>e.filter(u,h,f,r))),e.itemSort&&(o=o.sort((u,h)=>e.itemSort(u,h,r))),$r(o,u=>{const h=cL(e.callbacks,u);n.push(Gs(h,"labelColor",this,u)),i.push(Gs(h,"labelPointStyle",this,u)),l.push(Gs(h,"labelTextColor",this,u))}),this.labelColors=n,this.labelPointStyles=i,this.labelTextColors=l,this.dataPoints=o,o}update(e,t){const r=this.options.setContext(this.getContext()),n=this._active;let i,l=[];if(!n.length)this.opacity!==0&&(i={opacity:0});else{const o=Lg[r.position].call(this,n,this._eventPosition);l=this._createItems(r),this.title=this.getTitle(l,r),this.beforeBody=this.getBeforeBody(l,r),this.body=this.getBody(l,r),this.afterBody=this.getAfterBody(l,r),this.footer=this.getFooter(l,r);const c=this._size=iL(this,r),d=Object.assign({},o,c),u=sL(this.chart,r,d),h=lL(r,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:o.x,caretY:o.y}}this._tooltipItems=l,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,n){const i=this.getCaretPosition(e,r,n);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,r){const{xAlign:n,yAlign:i}=this,{caretSize:l,cornerRadius:o}=r,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=e0(o),{x:f,y:p}=e,{width:g,height:b}=t;let w,j,k,T,E,I;return i==="center"?(E=p+b/2,n==="left"?(w=f,j=w-l,T=E+l,I=E-l):(w=f+g,j=w+l,T=E-l,I=E+l),k=w):(n==="left"?j=f+Math.max(c,u)+l:n==="right"?j=f+g-Math.max(d,h)-l:j=this.caretX,i==="top"?(T=p,E=T-l,w=j-l,k=j+l):(T=p+b,E=T+l,w=j+l,k=j-l),I=T),{x1:w,x2:j,x3:k,y1:T,y2:E,y3:I}}drawTitle(e,t,r){const n=this.title,i=n.length;let l,o,c;if(i){const d=lx(r.rtl,this.x,this.width);for(e.x=ny(this,r.titleAlign,r),t.textAlign=d.textAlign(r.titleAlign),t.textBaseline="middle",l=wi(r.titleFont),o=r.titleSpacing,t.fillStyle=r.titleColor,t.font=l.string,c=0;c<i;++c)t.fillText(n[c],d.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+o,c+1===i&&(e.y+=r.titleMarginBottom-o)}}_drawColorBox(e,t,r,n,i){const l=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:c,boxWidth:d}=i,u=wi(i.bodyFont),h=ny(this,"left",i),f=n.x(h),p=c<u.lineHeight?(u.lineHeight-c)/2:0,g=t.y+p;if(i.usePointStyle){const b={radius:Math.min(d,c)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},w=n.leftForLtr(f,d)+d/2,j=g+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,JC(e,b,w,j),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,JC(e,b,w,j)}else{e.lineWidth=yr(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const b=n.leftForLtr(f,d),w=n.leftForLtr(n.xPlus(f,1),d-2),j=e0(l.borderRadius);Object.values(j).some(k=>k!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Mv(e,{x:b,y:g,w:d,h:c,radius:j}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),Mv(e,{x:w,y:g+1,w:d-2,h:c-2,radius:j}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(b,g,d,c),e.strokeRect(b,g,d,c),e.fillStyle=l.backgroundColor,e.fillRect(w,g+1,d-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:n}=this,{bodySpacing:i,bodyAlign:l,displayColors:o,boxHeight:c,boxWidth:d,boxPadding:u}=r,h=wi(r.bodyFont);let f=h.lineHeight,p=0;const g=lx(r.rtl,this.x,this.width),b=function(H){t.fillText(H,g.x(e.x+p),e.y+f/2),e.y+=f+i},w=g.textAlign(l);let j,k,T,E,I,R,P;for(t.textAlign=l,t.textBaseline="middle",t.font=h.string,e.x=ny(this,w,r),t.fillStyle=r.bodyColor,$r(this.beforeBody,b),p=o&&w!=="right"?l==="center"?d/2+u:d+2+u:0,E=0,R=n.length;E<R;++E){for(j=n[E],k=this.labelTextColors[E],t.fillStyle=k,$r(j.before,b),T=j.lines,o&&T.length&&(this._drawColorBox(t,e,E,g,r),f=Math.max(h.lineHeight,c)),I=0,P=T.length;I<P;++I)b(T[I]),f=h.lineHeight;$r(j.after,b)}p=0,f=h.lineHeight,$r(this.afterBody,b),e.y-=i}drawFooter(e,t,r){const n=this.footer,i=n.length;let l,o;if(i){const c=lx(r.rtl,this.x,this.width);for(e.x=ny(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=c.textAlign(r.footerAlign),t.textBaseline="middle",l=wi(r.footerFont),t.fillStyle=r.footerColor,t.font=l.string,o=0;o<i;++o)t.fillText(n[o],c.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+r.footerSpacing}}drawBackground(e,t,r,n){const{xAlign:i,yAlign:l}=this,{x:o,y:c}=e,{width:d,height:u}=r,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:g}=e0(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(o+h,c),l==="top"&&this.drawCaret(e,t,r,n),t.lineTo(o+d-f,c),t.quadraticCurveTo(o+d,c,o+d,c+f),l==="center"&&i==="right"&&this.drawCaret(e,t,r,n),t.lineTo(o+d,c+u-g),t.quadraticCurveTo(o+d,c+u,o+d-g,c+u),l==="bottom"&&this.drawCaret(e,t,r,n),t.lineTo(o+p,c+u),t.quadraticCurveTo(o,c+u,o,c+u-p),l==="center"&&i==="left"&&this.drawCaret(e,t,r,n),t.lineTo(o,c+h),t.quadraticCurveTo(o,c,o+h,c),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,n=r&&r.x,i=r&&r.y;if(n||i){const l=Lg[e.position].call(this,this._active,this._eventPosition);if(!l)return;const o=this._size=iL(this,e),c=Object.assign({},l,this._size),d=sL(t,e,c),u=lL(e,c,d,t);(n._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=o.width,this.height=o.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const l=cs(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,n,t),yU(e,t.textDirection),i.y+=l.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),wU(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,n=e.map(({datasetIndex:o,index:c})=>{const d=this.chart.getDatasetMeta(o);if(!d)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:d.data[c],index:c}}),i=!d2(r,n),l=this._positionChanged(n,t);(i||l)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,i=this._active||[],l=this._getActiveElements(e,i,t,r),o=this._positionChanged(l,e),c=t||!d2(l,i)||o;return c&&(this._active=l,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),c}_getActiveElements(e,t,r,n){const i=this.options;if(e.type==="mouseout")return[];if(!n)return t.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&l.reverse(),l}_positionChanged(e,t){const{caretX:r,caretY:n,options:i}=this,l=Lg[i.position].call(this,e,t);return l!==!1&&(r!==l.x||n!==l.y)}}var Oce={id:"tooltip",_element:dL,positioners:Lg,afterInit(a,e,t){t&&(a.tooltip=new dL({chart:a,options:t}))},beforeUpdate(a,e,t){a.tooltip&&a.tooltip.initialize(t)},reset(a,e,t){a.tooltip&&a.tooltip.initialize(t)},afterDraw(a){const e=a.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(a.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(a.ctx),a.notifyPlugins("afterTooltipDraw",t)}},afterEvent(a,e){if(a.tooltip){const t=e.replay;a.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(a,e)=>e.bodyFont.size,boxWidth:(a,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:XU},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:a=>a!=="filter"&&a!=="itemSort"&&a!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Pce=Object.freeze({__proto__:null,Colors:Xoe,Decimation:Joe,Filler:bce,Legend:Sce,SubTitle:Ace,Title:Cce,Tooltip:Oce});const zce=(a,e,t,r)=>(typeof e=="string"?(t=a.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function Bce(a,e,t,r){const n=a.indexOf(e);if(n===-1)return zce(a,e,t,r);const i=a.lastIndexOf(e);return n!==i?t:n}const Fce=(a,e)=>a===null?null:Di(Math.round(a),0,e);function uL(a){const e=this.getLabels();return a>=0&&a<e.length?e[a]:a}class Vce extends jb{static id="category";static defaults={ticks:{callback:uL}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:n,label:i}of t)r[n]===i&&r.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(xr(e))return null;const r=this.getLabels();return t=isFinite(t)&&r[t]===e?t:Bce(r,e,qa(t,e),this._addedLabels),Fce(t,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),t||(n=this.getLabels().length-1)),this.min=r,this.max=n}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,n=[];let i=this.getLabels();i=e===0&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let l=e;l<=t;l++)n.push({value:l});return n}getLabelForValue(e){return uL.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Hce(a,e){const t=[],{bounds:n,step:i,min:l,max:o,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:f}=a,p=i||1,g=u-1,{min:b,max:w}=e,j=!xr(l),k=!xr(o),T=!xr(d),E=(w-b)/(h+1);let I=iR((w-b)/g/p)*p,R,P,H,G;if(I<1e-14&&!j&&!k)return[{value:b},{value:w}];G=Math.ceil(w/I)-Math.floor(b/I),G>g&&(I=iR(G*I/g/p)*p),xr(c)||(R=Math.pow(10,c),I=Math.ceil(I*R)/R),n==="ticks"?(P=Math.floor(b/I)*I,H=Math.ceil(w/I)*I):(P=b,H=w),j&&k&&i&&jie((o-l)/i,I/1e3)?(G=Math.round(Math.min((o-l)/I,u)),I=(o-l)/G,P=l,H=o):T?(P=j?l:P,H=k?o:H,G=d-1,I=(H-P)/G):(G=(H-P)/I,av(G,Math.round(G),I/1e3)?G=Math.round(G):G=Math.ceil(G));const X=Math.max(sR(I),sR(P));R=Math.pow(10,xr(c)?X:c),P=Math.round(P*R)/R,H=Math.round(H*R)/R;let U=0;for(j&&(f&&P!==l?(t.push({value:l}),P<l&&U++,av(Math.round((P+U*I)*R)/R,l,hL(l,E,a))&&U++):P<l&&U++);U<G;++U){const te=Math.round((P+U*I)*R)/R;if(k&&te>o)break;t.push({value:te})}return k&&f&&H!==o?t.length&&av(t[t.length-1].value,o,hL(o,E,a))?t[t.length-1].value=o:t.push({value:o}):(!k||H===o)&&t.push({value:H}),t}function hL(a,e,{horizontal:t,minRotation:r}){const n=So(r),i=(t?Math.sin(n):Math.cos(n))||.001,l=.75*e*(""+a).length;return Math.min(e/i,l)}class g2 extends jb{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return xr(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:n,max:i}=this;const l=c=>n=t?n:c,o=c=>i=r?i:c;if(e){const c=Nc(n),d=Nc(i);c<0&&d<0?o(0):c>0&&d>0&&l(0)}if(n===i){let c=i===0?1:Math.abs(i*.05);o(i+c),e||l(n-c)}this.min=n,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:r}=e,n;return r?(n=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),t=t||11),t&&(n=Math.min(t,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const n={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},i=this._range||this,l=Hce(n,i);return e.bounds==="ticks"&&rU(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const n=(r-t)/Math.max(e.length-1,1)/2;t-=n,r+=n}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return Nb(e,this.chart.options.locale,this.options.ticks.format)}}class Uce extends g2{static id="linear";static defaults={ticks:{callback:U_.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Pn(e)?e:0,this.max=Pn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=So(this.options.ticks.minRotation),n=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Dv=a=>Math.floor(qu(a)),rf=(a,e)=>Math.pow(10,Dv(a)+e);function fL(a){return a/Math.pow(10,Dv(a))===1}function pL(a,e,t){const r=Math.pow(10,t),n=Math.floor(a/r);return Math.ceil(e/r)-n}function Gce(a,e){const t=e-a;let r=Dv(t);for(;pL(a,e,r)>10;)r++;for(;pL(a,e,r)<10;)r--;return Math.min(r,Dv(a))}function Wce(a,{min:e,max:t}){e=ml(a.min,e);const r=[],n=Dv(e);let i=Gce(e,t),l=i<0?Math.pow(10,Math.abs(i)):1;const o=Math.pow(10,i),c=n>i?Math.pow(10,n):0,d=Math.round((e-c)*l)/l,u=Math.floor((e-c)/o/10)*o*10;let h=Math.floor((d-u)/Math.pow(10,i)),f=ml(a.min,Math.round((c+u+h*Math.pow(10,i))*l)/l);for(;f<t;)r.push({value:f,major:fL(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(i++,h=2,l=i>=0?1:l),f=Math.round((c+u+h*Math.pow(10,i))*l)/l;const p=ml(a.max,f);return r.push({value:p,major:fL(p),significand:h}),r}class Yce extends jb{static id="logarithmic";static defaults={ticks:{callback:U_.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const r=g2.prototype.parse.apply(this,[e,t]);if(r===0){this._zero=!0;return}return Pn(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Pn(e)?Math.max(0,e):null,this.max=Pn(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Pn(this._userMin)&&(this.min=e===rf(this.min,0)?rf(this.min,-1):rf(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let r=this.min,n=this.max;const i=o=>r=e?r:o,l=o=>n=t?n:o;r===n&&(r<=0?(i(1),l(10)):(i(rf(r,-1)),l(rf(n,1)))),r<=0&&i(rf(n,-1)),n<=0&&l(rf(r,1)),this.min=r,this.max=n}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},r=Wce(t,this);return e.bounds==="ticks"&&rU(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Nb(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=qu(e),this._valueRange=qu(this.max)-qu(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(qu(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function i4(a){const e=a.ticks;if(e.display&&a.display){const t=cs(e.backdropPadding);return qa(e.font&&e.font.size,_n.font.size)+t.height}return 0}function $ce(a,e,t){return t=yn(t)?t:[t],{w:Vie(a,e.string,t),h:t.length*e.lineHeight}}function xL(a,e,t,r,n){return a===r||a===n?{start:e-t/2,end:e+t/2}:a<r||a>n?{start:e-t,end:e}:{start:e,end:e+t}}function qce(a){const e={l:a.left+a._padding.left,r:a.right-a._padding.right,t:a.top+a._padding.top,b:a.bottom-a._padding.bottom},t=Object.assign({},e),r=[],n=[],i=a._pointLabels.length,l=a.options.pointLabels,o=l.centerPointLabels?Er/i:0;for(let c=0;c<i;c++){const d=l.setContext(a.getPointLabelContext(c));n[c]=d.padding;const u=a.getPointPosition(c,a.drawingArea+n[c],o),h=wi(d.font),f=$ce(a.ctx,h,a._pointLabels[c]);r[c]=f;const p=ss(a.getIndexAngle(c)+o),g=Math.round(rT(p)),b=xL(g,u.x,f.w,0,180),w=xL(g,u.y,f.h,90,270);Xce(t,e,p,b,w)}a.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),a._pointLabelItems=Qce(a,r,n)}function Xce(a,e,t,r,n){const i=Math.abs(Math.sin(t)),l=Math.abs(Math.cos(t));let o=0,c=0;r.start<e.l?(o=(e.l-r.start)/i,a.l=Math.min(a.l,e.l-o)):r.end>e.r&&(o=(r.end-e.r)/i,a.r=Math.max(a.r,e.r+o)),n.start<e.t?(c=(e.t-n.start)/l,a.t=Math.min(a.t,e.t-c)):n.end>e.b&&(c=(n.end-e.b)/l,a.b=Math.max(a.b,e.b+c))}function Zce(a,e,t){const r=a.drawingArea,{extra:n,additionalAngle:i,padding:l,size:o}=t,c=a.getPointPosition(e,r+n+l,i),d=Math.round(rT(ss(c.angle+Yn))),u=tde(c.y,o.h,d),h=Jce(d),f=ede(c.x,o.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:f,top:u,right:f+o.w,bottom:u+o.h}}function Kce(a,e){if(!e)return!0;const{left:t,top:r,right:n,bottom:i}=a;return!(kd({x:t,y:r},e)||kd({x:t,y:i},e)||kd({x:n,y:r},e)||kd({x:n,y:i},e))}function Qce(a,e,t){const r=[],n=a._pointLabels.length,i=a.options,{centerPointLabels:l,display:o}=i.pointLabels,c={extra:i4(i)/2,additionalAngle:l?Er/n:0};let d;for(let u=0;u<n;u++){c.padding=t[u],c.size=e[u];const h=Zce(a,u,c);r.push(h),o==="auto"&&(h.visible=Kce(h,d),h.visible&&(d=h))}return r}function Jce(a){return a===0||a===180?"center":a<180?"left":"right"}function ede(a,e,t){return t==="right"?a-=e:t==="center"&&(a-=e/2),a}function tde(a,e,t){return t===90||t===270?a-=e/2:(t>270||t<90)&&(a-=e),a}function ade(a,e,t){const{left:r,top:n,right:i,bottom:l}=t,{backdropColor:o}=e;if(!xr(o)){const c=e0(e.borderRadius),d=cs(e.backdropPadding);a.fillStyle=o;const u=r-d.left,h=n-d.top,f=i-r+d.width,p=l-n+d.height;Object.values(c).some(g=>g!==0)?(a.beginPath(),Mv(a,{x:u,y:h,w:f,h:p,radius:c}),a.fill()):a.fillRect(u,h,f,p)}}function rde(a,e){const{ctx:t,options:{pointLabels:r}}=a;for(let n=e-1;n>=0;n--){const i=a._pointLabelItems[n];if(!i.visible)continue;const l=r.setContext(a.getPointLabelContext(n));ade(t,l,i);const o=wi(l.font),{x:c,y:d,textAlign:u}=i;v0(t,a._pointLabels[n],c,d+o.lineHeight/2,o,{color:l.color,textAlign:u,textBaseline:"middle"})}}function ZU(a,e,t,r){const{ctx:n}=a;if(t)n.arc(a.xCenter,a.yCenter,e,0,mn);else{let i=a.getPointPosition(0,e);n.moveTo(i.x,i.y);for(let l=1;l<r;l++)i=a.getPointPosition(l,e),n.lineTo(i.x,i.y)}}function nde(a,e,t,r,n){const i=a.ctx,l=e.circular,{color:o,lineWidth:c}=e;!l&&!r||!o||!c||t<0||(i.save(),i.strokeStyle=o,i.lineWidth=c,i.setLineDash(n.dash||[]),i.lineDashOffset=n.dashOffset,i.beginPath(),ZU(a,t,l,r),i.closePath(),i.stroke(),i.restore())}function ide(a,e,t){return Ah(a,{label:t,index:e,type:"pointLabel"})}class sde extends g2{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:U_.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=cs(i4(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Pn(e)&&!isNaN(e)?e:0,this.max=Pn(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/i4(this.options))}generateTickLabels(e){g2.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{const n=fn(this.options.pointLabels.callback,[t,r],this);return n||n===0?n:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?qce(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,n){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,n))}getIndexAngle(e){const t=mn/(this._pointLabels.length||1),r=this.options.startAngle||0;return ss(e*t+So(r))}getDistanceFromCenterForValue(e){if(xr(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(xr(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const r=t[e];return ide(this.getContext(),e,r)}}getPointPosition(e,t,r=0){const n=this.getIndexAngle(e)-Yn+r;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter,angle:n}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:r,right:n,bottom:i}=this._pointLabelItems[e];return{left:t,top:r,right:n,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),ZU(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:r,grid:n,border:i}=t,l=this._pointLabels.length;let o,c,d;if(t.pointLabels.display&&rde(this,l),n.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),p=n.setContext(f),g=i.setContext(f);nde(this,p,c,l,g)}}),r.display){for(e.save(),o=l-1;o>=0;o--){const u=r.setContext(this.getPointLabelContext(o)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),d=this.getPointPosition(o,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const n=this.getIndexAngle(0);let i,l;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(n),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;const d=r.setContext(this.getContext(c)),u=wi(d.font);if(i=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=u.string,l=e.measureText(o.label).width,e.fillStyle=d.backdropColor;const h=cs(d.backdropPadding);e.fillRect(-l/2-h.left,-i-u.size/2-h.top,l+h.width,u.size+h.height)}v0(e,o.label,0,-i,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}const Z_={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},qs=Object.keys(Z_);function mL(a,e){return a-e}function gL(a,e){if(xr(e))return null;const t=a._adapter,{parser:r,round:n,isoWeekday:i}=a._parseOpts;let l=e;return typeof r=="function"&&(l=r(l)),Pn(l)||(l=typeof r=="string"?t.parse(l,r):t.parse(l)),l===null?null:(n&&(l=n==="week"&&(vx(i)||i===!0)?t.startOf(l,"isoWeek",i):t.startOf(l,n)),+l)}function vL(a,e,t,r){const n=qs.length;for(let i=qs.indexOf(a);i<n-1;++i){const l=Z_[qs[i]],o=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((t-e)/(o*l.size))<=r)return qs[i]}return qs[n-1]}function lde(a,e,t,r,n){for(let i=qs.length-1;i>=qs.indexOf(t);i--){const l=qs[i];if(Z_[l].common&&a._adapter.diff(n,r,l)>=e-1)return l}return qs[t?qs.indexOf(t):0]}function ode(a){for(let e=qs.indexOf(a)+1,t=qs.length;e<t;++e)if(Z_[qs[e]].common)return qs[e]}function bL(a,e,t){if(!t)a[e]=!0;else if(t.length){const{lo:r,hi:n}=nT(t,e),i=t[r]>=e?t[r]:t[n];a[i]=!0}}function cde(a,e,t,r){const n=a._adapter,i=+n.startOf(e[0].value,r),l=e[e.length-1].value;let o,c;for(o=i;o<=l;o=+n.add(o,1,r))c=t[o],c>=0&&(e[c].major=!0);return e}function yL(a,e,t){const r=[],n={},i=e.length;let l,o;for(l=0;l<i;++l)o=e[l],n[o]=l,r.push({value:o,major:!1});return i===0||!t?r:cde(a,r,n,t)}let s4=class extends jb{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),n=this._adapter=new dle._date(e.adapters.date);n.init(t),tv(r.displayFormats,n.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:gL(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:n,max:i,minDefined:l,maxDefined:o}=this.getUserBounds();function c(d){!l&&!isNaN(d.min)&&(n=Math.min(n,d.min)),!o&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!l||!o)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),n=Pn(n)&&!isNaN(n)?n:+t.startOf(Date.now(),r),i=Pn(i)&&!isNaN(i)?i:+t.endOf(Date.now(),r)+1,this.min=Math.min(n,i-1),this.max=Math.max(n+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,n=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const i=this.min,l=this.max,o=Aie(n,i,l);return this._unit=t.unit||(r.autoSkip?vL(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):lde(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:ode(this._unit),this.initOffsets(n),e.reverse&&o.reverse(),yL(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,n,i;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?t=1-n:t=(this.getDecimalForValue(e[1])-n)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;t=Di(t,0,l),r=Di(r,0,l),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,n=this.options,i=n.time,l=i.unit||vL(i.minUnit,t,r,this._getLabelCapacity(t)),o=qa(n.ticks.stepSize,1),c=l==="week"?i.isoWeekday:!1,d=vx(c)||c===!0,u={};let h=t,f,p;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":l),e.diff(r,t,l)>1e5*o)throw new Error(t+" and "+r+" are too far apart with stepSize of "+o+" "+l);const g=n.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<r;f=+e.add(f,o,l),p++)bL(u,f,g);return(f===r||n.bounds==="ticks"||p===1)&&bL(u,f,g),Object.keys(u).sort(mL).map(b=>+b)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,i=this._unit,l=t||n[i];return this._adapter.format(e,l)}_tickFormatFunction(e,t,r,n){const i=this.options,l=i.ticks.callback;if(l)return fn(l,[e,t,r],this);const o=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&o[c],h=d&&o[d],f=r[t],p=d&&h&&f&&f.major;return this._adapter.format(e,n||(p?h:u))}generateTickLabels(e){let t,r,n;for(t=0,r=e.length;t<r;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,n=So(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(n),l=Math.sin(n),o=this._resolveTickFontOptions(0).size;return{w:r*i+o*l,h:r*l+o*i}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,n=r[t.unit]||r.millisecond,i=this._tickFormatFunction(e,0,yL(this,[e],this._majorUnit),n),l=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(t=0,r=n.length;t<r;++t)e=e.concat(n[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const n=this.getLabels();for(t=0,r=n.length;t<r;++t)e.push(gL(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return sU(e.sort(mL))}};function iy(a,e,t){let r=0,n=a.length-1,i,l,o,c;t?(e>=a[r].pos&&e<=a[n].pos&&({lo:r,hi:n}=Sd(a,"pos",e)),{pos:i,time:o}=a[r],{pos:l,time:c}=a[n]):(e>=a[r].time&&e<=a[n].time&&({lo:r,hi:n}=Sd(a,"time",e)),{time:i,pos:o}=a[r],{time:l,pos:c}=a[n]);const d=l-i;return d?o+(c-o)*(e-i)/d:o}class dde extends s4{static id="timeseries";static defaults=s4.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=iy(t,this.min),this._tableRange=iy(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,n=[],i=[];let l,o,c,d,u;for(l=0,o=e.length;l<o;++l)d=e[l],d>=t&&d<=r&&n.push(d);if(n.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(l=0,o=n.length;l<o;++l)u=n[l+1],c=n[l-1],d=n[l],Math.round((u+c)/2)!==d&&i.push({time:d,pos:l/(o-1)});return i}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((n,i)=>n-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(iy(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return iy(this._table,r*this._tableRange+this._minPos,!0)}}var ude=Object.freeze({__proto__:null,CategoryScale:Vce,LinearScale:Uce,LogarithmicScale:Yce,RadialLinearScale:sde,TimeScale:s4,TimeSeriesScale:dde});const Sb=[cle,Hoe,Pce,ude];qi.register(...Sb);const hde=({weeklyData:a,isChartLoading:e,navigate:t})=>{const r=F.useRef(null),n=F.useRef(null);F.useEffect(()=>{if(a.length>0&&r.current){const l=setTimeout(i,200);return window.addEventListener("resize",i),()=>{clearTimeout(l),window.removeEventListener("resize",i)}}},[a]);const i=()=>{if(!r.current)return;n.current&&n.current.destroy();const l=r.current.getContext("2d");if(!l)return;const o=a.map(h=>h.date),c=a.map(h=>h.total),d=r.current.clientHeight||300,u=l.createLinearGradient(0,0,0,d);u.addColorStop(0,"rgba(99, 102, 241, 0.2)"),u.addColorStop(1,"rgba(99, 102, 241, 0)"),n.current=new qi(l,{type:"line",data:{labels:o,datasets:[{label:" ",data:c,borderColor:"#6366f1",backgroundColor:u,borderWidth:3,pointBackgroundColor:"#fff",pointBorderColor:"#6366f1",pointBorderWidth:2,pointRadius:4,tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:400,easing:"easeOutQuart"},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.9)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:h=>`: ${Fe(h.raw)}`}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0,0,0,0.03)"},ticks:{callback:h=>Fe(h/1e4)+"",font:{size:11,weight:"500"}}},x:{grid:{display:!1},ticks:{font:{size:11,weight:"500"}}}},onClick:(h,f)=>{if(f.length>0){const p=f[0].index,g=o[p];window.__DAILY_SALES_FILTER_DATE__=g,t("/sales/daily")}}}})};return s.jsxs("div",{className:"bg-white rounded-[20px] p-5 min-[2000px]:p-8 shadow-sm border border-slate-100 flex flex-col h-full min-h-[200px] min-[2000px]:min-h-[300px] relative overflow-hidden",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[s.jsx("h3",{className:"text-[1.1rem] font-bold text-slate-800",children:"  "}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 font-bold",children:[e&&s.jsx("span",{className:"material-symbols-rounded animate-spin text-indigo-500",children:"refresh"}),s.jsx("span",{className:"w-3 h-3 rounded-full bg-indigo-500"}),"  "]})]}),s.jsxs("div",{className:"flex-1 w-full relative min-h-0 bg-slate-50/30 rounded-xl",children:[e&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/50 z-10",children:s.jsx("span",{className:"material-symbols-rounded animate-spin text-4xl text-indigo-500",children:"refresh"})}),s.jsx("canvas",{ref:r,className:"w-full h-full p-2"})]})]})},fde=({top3Products:a,topProfitProducts:e,topMode:t,setTopMode:r,isRankLoading:n})=>s.jsxs("div",{className:"bg-white rounded-[20px] p-5 min-[2000px]:p-8 shadow-sm border border-slate-100 flex flex-col h-full min-h-0 relative overflow-hidden",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[s.jsxs("h3",{className:"text-[1.1rem] font-bold text-slate-800 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-amber-500 bg-amber-50 p-1.5 rounded-lg",children:"emoji_events"}),"   "]}),s.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-full",children:[s.jsx("button",{onClick:()=>r("qty"),className:`px-4 py-1.5 rounded-full text-[0.75rem] font-bold transition-all ${t==="qty"?"bg-white shadow-sm text-slate-800":"text-slate-500 hover:text-slate-700"}`,children:""}),s.jsx("button",{onClick:()=>r("profit"),className:`px-4 py-1.5 rounded-full text-[0.75rem] font-bold transition-all ${t==="profit"?"bg-white shadow-sm text-slate-800":"text-slate-500 hover:text-slate-700"}`,children:""})]})]}),s.jsxs("div",{className:"flex-1 overflow-auto stylish-scrollbar relative min-h-0 border-t border-slate-50",children:[n&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/50 z-10",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded animate-spin text-3xl text-indigo-500",children:"refresh"}),s.jsx("span",{className:"text-[11px] font-bold text-slate-400 uppercase",children:" ..."})]})}),s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"sticky top-0 bg-white",children:s.jsxs("tr",{className:"text-slate-400 font-semibold border-b border-slate-100 text-[0.75rem] text-left uppercase tracking-wider",children:[s.jsx("th",{className:"py-2.5 w-16 text-center",children:""}),s.jsx("th",{className:"py-2.5 px-2",children:""}),s.jsx("th",{className:"py-2.5 text-center",children:""}),s.jsx("th",{className:"py-2.5 text-right pr-2",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50 border-b border-slate-50",children:(t==="qty"?a:e).map((i,l)=>s.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[s.jsx("td",{className:"py-1.5 text-center font-bold text-slate-400",children:l===0?s.jsx("span",{className:"text-xl",children:""}):l===1?s.jsx("span",{className:"text-xl",children:""}):l===2?s.jsx("span",{className:"text-xl",children:""}):l+1}),s.jsx("td",{className:"py-1.5 px-2 font-black text-slate-700 text-xs",children:i.product_name}),s.jsx("td",{className:"py-1.5 text-center",children:s.jsxs("span",{className:"bg-slate-100 text-slate-600 px-2.5 py-0.5 rounded-full font-black text-[9px] tracking-tight",children:[Fe(i.total_quantity),""]})}),s.jsxs("td",{className:"py-1.5 text-right font-black text-slate-800 text-xs",children:[Fe(t==="qty"?i.total_amount:i.net_profit),"",t==="profit"&&i.margin_rate&&s.jsxs("div",{className:"text-[9px] text-emerald-500 font-medium",children:[" ",i.margin_rate.toFixed(1),"%"]})]})]},l))})]})]})]}),pde=({onClose:a})=>{const e=`${window.location.origin}/api/iot/push`;return s.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:a}),s.jsx("div",{className:"relative bg-white rounded-[32px] w-full max-w-2xl overflow-hidden shadow-2xl animate-in fade-in zoom-in duration-300",children:s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex justify-between items-start mb-6",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-600 bg-indigo-50 p-2 rounded-2xl",children:"sensors"})," IoT   "]}),s.jsx("p",{className:"text-slate-500 font-medium mt-1",children:"  /ESP32  Mycelium  ."})]}),s.jsx("button",{onClick:a,className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-slate-400",children:"close"})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{children:[s.jsxs("h3",{className:"text-sm font-black text-slate-700 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 bg-indigo-600 text-white rounded-full flex items-center justify-center text-[10px]",children:"1"}),"API  "]}),s.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl font-mono text-sm border border-slate-100 break-all",children:[s.jsx("span",{className:"text-indigo-600 font-bold",children:"POST"})," ",e]})]}),s.jsxs("section",{children:[s.jsxs("h3",{className:"text-sm font-black text-slate-700 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 bg-indigo-600 text-white rounded-full flex items-center justify-center text-[10px]",children:"2"}),"  (JSON Payload)"]}),s.jsx("div",{className:"bg-slate-800 p-5 rounded-2xl font-mono text-xs text-indigo-300 shadow-inner",children:s.jsx("pre",{children:JSON.stringify({sensor_id:1,temp:24.5,humid:60.2,co2:450},null,2)})})]}),s.jsxs("section",{children:[s.jsxs("h3",{className:"text-sm font-black text-slate-700 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 bg-indigo-600 text-white rounded-full flex items-center justify-center text-[10px]",children:"3"})," (HTTP Client)  "]}),s.jsx("div",{className:"bg-slate-50 p-4 rounded-2xl font-mono text-[11px] text-slate-600 border border-slate-100 h-40 overflow-y-auto",children:s.jsx("pre",{children:`#include <HTTPClient.h>

void sendData() {
  HTTPClient http;
  http.begin("${e}");
  http.addHeader("Content-Type", "application/json");
  
  String json = "{\\"sensorId\\": 1, \\"temp\\": 25.4, \\"humid\\": 65.0, \\"co2\\": 480}";
  int httpCode = http.POST(json);
  
  if (httpCode > 0) {
    Serial.println("Data sent successfully");
  }
  http.end();
}`})})]})]}),s.jsx("div",{className:"mt-8 flex justify-end",children:s.jsx("button",{onClick:a,className:"bg-slate-800 text-white px-8 py-3 rounded-2xl font-black text-sm hover:bg-slate-900 transition-all shadow-lg shadow-slate-200",children:" "})})]})})]})},xde=()=>{const[a,e]=F.useState([]),[t,r]=F.useState({}),[n,i]=F.useState(!0),[l,o]=F.useState(!1),c=async()=>{i(!0);try{const d=await Ke("get_sensors");if(e(d),d&&d.length>0){const u=d.map(p=>p.sensor_id).join(","),h=await Ke("get_latest_readings",{sensorIds:u}),f={};h.forEach(p=>{f[p.sensor_id]=p}),r(f)}}catch(d){console.error("Failed to fetch IoT data:",d)}finally{i(!1)}};return F.useEffect(()=>{c();const d=setInterval(c,6e4);return()=>clearInterval(d)},[]),s.jsxs("div",{className:"bg-white rounded-[28px] py-6 px-6 border border-slate-100 shadow-[0_4px_20px_rgb(0,0,0,0.03)] flex flex-col h-full group transition-all duration-500 hover:border-indigo-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("button",{onClick:()=>o(!0),className:"p-1.5 bg-indigo-50 text-indigo-400 hover:text-indigo-600 rounded-xl transition-all flex items-center gap-1.5",children:[s.jsx(yb,{size:12}),s.jsx("span",{className:"text-[9px] font-black uppercase tracking-tighter",children:" "})]}),s.jsx("button",{onClick:c,className:`p-1.5 bg-slate-50 rounded-xl text-slate-300 hover:text-indigo-500 transition-all ${n?"animate-spin":""}`,children:s.jsx(yi,{size:12})})]}),s.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[a.slice(0,1).map(d=>{const u=t[d.sensor_id];return s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{className:"flex flex-col items-center justify-end w-full",children:[s.jsx(wb,{size:16,className:"text-rose-400 mb-1"}),s.jsx("span",{className:"text-[10px] font-black text-slate-400 mb-1",children:""}),s.jsxs("span",{className:"text-sm font-black text-slate-700 tracking-tighter",children:[Fe(u?.temperature||0),s.jsx("span",{className:"text-[10px] ml-0.5 font-bold text-slate-500",children:"C"})]})]}),s.jsxs("div",{className:"flex flex-col items-center justify-end border-x border-slate-100 px-1 w-full",children:[s.jsx(x0,{size:16,className:"text-blue-400 mb-1"}),s.jsx("span",{className:"text-[10px] font-black text-slate-400 mb-1",children:""}),s.jsxs("span",{className:"text-sm font-black text-slate-700 tracking-tighter",children:[Fe(u?.humidity||0),s.jsx("span",{className:"text-[10px] ml-0.5 font-bold text-slate-500",children:"%"})]})]}),s.jsxs("div",{className:"flex flex-col items-center justify-end w-full",children:[s.jsx(qH,{size:16,className:"text-emerald-500 mb-1"}),s.jsx("span",{className:"text-[10px] font-black text-slate-400 mb-1 shrink-0",children:"CO2"}),s.jsxs("span",{className:"text-sm font-black text-slate-700 tracking-tighter",children:[Fe(u?.co2||0),s.jsx("span",{className:"text-[10px] ml-0.5 font-bold text-slate-500",children:"ppm"})]})]})]},d.sensor_id)}),a.length===0&&!n&&s.jsx("div",{className:"text-center text-slate-300",children:s.jsx("p",{className:"text-[10px] font-bold",children:"   ..."})})]}),l&&s.jsx(pde,{onClose:()=>o(!1)})]})},mde=({stats:a,isLoading:e,salesTrend:t,weatherAdvice:r,isWeatherLoading:n,onLogout:i})=>{const l=an(),o=[{label:" ",icon:s.jsx(mx,{className:"text-blue-500"}),path:"/sales/reception",color:"bg-blue-50"},{label:"/",icon:s.jsx(zH,{className:"text-emerald-500"}),path:"/sales/stock",color:"bg-emerald-50"},{label:" ",icon:s.jsx(gx,{className:"text-indigo-500"}),path:"/customer/edit",color:"bg-indigo-50"},{label:" ",icon:s.jsx(YH,{className:"text-purple-500"}),path:"/sales/special",color:"bg-purple-50"},{label:" ",icon:s.jsx(jv,{className:"text-amber-500"}),path:"/customer/consultation",color:"bg-amber-50"},{label:" ",icon:s.jsx(Eo,{className:"text-rose-500"}),path:"/schedule",color:"bg-rose-50"},{label:" ",icon:s.jsx(sx,{className:"text-indigo-400"}),path:"/exp/program-mgmt",color:"bg-indigo-50"},{label:"",icon:s.jsx(sx,{className:"text-slate-500"}),path:"/settings/company-info",color:"bg-slate-50"}];return s.jsxs("div",{className:"dashboard-lite-container p-6 lg:p-10 bg-[#f8fafc] h-full flex flex-col overflow-auto text-slate-900 font-sans relative",children:[s.jsxs("div",{className:"flex justify-between items-center mb-10",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-black text-slate-800 tracking-tight mb-2",children:[", ",s.jsx("span",{className:"text-indigo-600",children:localStorage.getItem("username")||""}),""]}),s.jsx("p",{className:"text-slate-400 font-medium",children:"    ."})]}),s.jsx("div",{className:"flex gap-3",children:s.jsx("button",{onClick:i,className:"px-5 py-2.5 rounded-2xl bg-white border border-slate-100 text-slate-400 hover:text-rose-500 hover:border-rose-100 font-bold text-xs transition-all shadow-sm",children:""})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-10",children:[s.jsx(gl,{label:" ",value:`${Fe(a?.total_sales_amount||0)}`,icon:"payments",iconColor:"text-white",iconBg:"bg-indigo-600",trend:t,isLoading:e,className:"!bg-indigo-600 !border-0"}),s.jsx("style",{dangerouslySetInnerHTML:{__html:".dashboard-lite-container .bg-indigo-600 h3, .dashboard-lite-container .bg-indigo-600 div { color: white !important; } .dashboard-lite-container .bg-indigo-600 .bg-slate-50 { background-color: rgba(255,255,255,0.1) !important; color: white !important; }"}}),s.jsx(gl,{label:" ",value:`${Fe(a?.total_orders||0)}`,icon:"shopping_cart",iconColor:"text-blue-600",iconBg:"bg-blue-50",badge:"ORDER",isLoading:e}),s.jsx(gl,{label:" ",value:`${Fe(a?.pending_orders||0)}`,icon:"local_shipping",iconColor:"text-amber-600",iconBg:"bg-amber-50",badge:"DELIVERY",isLoading:e}),s.jsx(gl,{label:" ",value:`${Fe(a?.total_customers||0)}`,icon:"group_add",iconColor:"text-emerald-600",iconBg:"bg-emerald-50",badge:"CUSTOMERS",isLoading:e})]}),s.jsxs("div",{className:"mb-10",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("h2",{className:"text-xl font-black text-slate-800 tracking-tight",children:"  "}),s.jsx("div",{className:"h-px flex-1 bg-slate-100"})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 gap-4",children:o.map((c,d)=>s.jsxs("button",{onClick:()=>l(c.path),className:"bg-white border border-slate-100 p-6 rounded-[32px] flex flex-col items-center justify-center gap-4 transition-all hover:scale-[1.05] hover:shadow-xl hover:border-indigo-100 group active:scale-95",children:[s.jsx("div",{className:`w-14 h-14 ${c.color} rounded-2xl flex items-center justify-center transition-transform group-hover:rotate-6 shadow-sm`,children:or.cloneElement(c.icon,{size:28})}),s.jsx("span",{className:"text-sm font-black text-slate-600 group-hover:text-indigo-600",children:c.label})]},d))})]}),s.jsx("div",{className:"mt-auto",children:s.jsxs("div",{className:`bg-white rounded-[32px] p-8 border border-slate-100 shadow-sm flex flex-col md:flex-row items-center gap-8 ${n?"opacity-50":""}`,children:[s.jsxs("div",{className:"flex flex-col items-center md:items-start text-center md:text-left shrink-0",children:[s.jsx("div",{className:"text-5xl mb-2",children:n?"":r?.weather_icon||""}),s.jsx("div",{className:"text-xl font-black text-slate-800",children:n?"   ...":r?.current_weather||" "}),s.jsx("div",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mt-1",children:" "})]}),s.jsx("div",{className:"h-px w-full md:h-12 md:w-px bg-slate-100"}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"text-slate-600 font-bold leading-relaxed whitespace-pre-wrap italic",children:n?"     ...":r?.marketing_advice||"     ."})}),!n&&s.jsx("div",{className:"shrink-0 flex gap-2",children:s.jsx("div",{className:"px-4 py-2 bg-indigo-50 rounded-full text-indigo-500 font-black text-[10px] border border-indigo-100 uppercase tracking-tighter",children:"  "})})]})})]})},wL=({onClose:a})=>s.jsx("div",{className:"modal-overlay fixed inset-0 z-[10001] flex items-center justify-center bg-[#0f172a]/80 backdrop-blur-md px-4",onClick:a,children:s.jsxs("div",{className:"bg-white w-full max-w-sm rounded-[32px] overflow-hidden shadow-[0_32px_64px_rgba(0,0,0,0.2)] animate-in zoom-in-95 duration-200 border border-slate-200",onClick:e=>e.stopPropagation(),children:[s.jsx("div",{className:"bg-gradient-to-br from-[#1e293b] to-[#0f172a] h-28 flex items-center justify-center relative",children:s.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/5 backdrop-blur-xl flex items-center justify-center border border-white/10 shadow-inner",children:s.jsx("span",{className:"material-symbols-rounded text-indigo-400 text-3xl drop-shadow-[0_0_10px_rgba(129,140,248,0.3)]",children:"logout"})})}),s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:" ?"}),s.jsxs("p",{className:"text-slate-500 text-[14px] mb-8 font-medium leading-relaxed uppercase tracking-tight",children:["  ",s.jsx("br",{}),"  ."]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:a,className:"flex-1 py-3.5 rounded-2xl bg-slate-50 text-slate-500 font-bold text-sm hover:bg-slate-100 transition-all active:scale-95 border border-slate-100",children:""}),s.jsx("button",{onClick:async()=>{try{await Ke("logout")}catch(e){console.error("Logout API failed",e)}localStorage.removeItem("token"),localStorage.removeItem("userRole"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("pin_verified"),sessionStorage.clear(),window.location.reload()},className:"flex-1 py-3.5 rounded-2xl bg-[#0f172a] text-white font-bold text-sm hover:bg-slate-800 shadow-xl shadow-slate-200 transition-all active:scale-95",children:""})]})]})]})}),gde=({content:a,isLoading:e,onClose:t})=>a?s.jsx("div",{className:"modal-overlay fixed inset-0 z-[10000] flex items-center justify-center bg-slate-900/60 backdrop-blur-md px-4",onClick:t,children:s.jsxs("div",{className:"bg-white w-full max-w-xl rounded-[32px] overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300 border border-slate-200",onClick:r=>r.stopPropagation(),children:[s.jsxs("div",{className:"bg-gradient-to-br from-amber-400 via-amber-500 to-orange-500 p-8 flex items-center justify-between text-white",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white/20 backdrop-blur-md flex items-center justify-center border border-white/30 shadow-inner",children:s.jsx("span",{className:"material-symbols-rounded text-3xl",children:"wb_sunny"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.2em] opacity-80 mb-0.5",children:" "}),s.jsx("h2",{className:"text-2xl font-black tracking-tight",children:"  "})]})]}),s.jsx("button",{onClick:t,className:"w-10 h-10 rounded-full bg-black/10 hover:bg-black/20 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-10 pt-8",children:[s.jsx("div",{className:"bg-slate-50/80 rounded-[28px] p-8 leading-relaxed whitespace-pre-wrap font-bold text-slate-700 text-[15px] border border-slate-100 shadow-inner relative min-h-[250px]",children:e?s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-500 rounded-full animate-spin mb-4"}),s.jsx("div",{className:"text-slate-400 font-black animate-pulse",children:"  ..."})]}):a.split("===").map((r,n)=>s.jsx("div",{children:r.includes("===")?"==="+r:r},n))}),s.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>OH("  ",a),className:"flex items-center gap-1.5 text-[11px] font-black text-slate-400 hover:text-indigo-600 transition-colors",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"print"}),"  "]}),s.jsx("div",{className:"w-px h-3 bg-slate-200"}),s.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] font-black text-slate-400",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"history_edu"}),"DATE: ",Wt().format("YYYY-MM-DD")]})]}),s.jsx("button",{onClick:t,className:"bg-slate-900 text-white px-8 py-3.5 rounded-2xl font-black text-sm hover:bg-slate-800 transition-all shadow-lg shadow-slate-200 active:scale-95",children:""})]}),s.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100 text-center",children:s.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-slate-50 border border-slate-100 text-[10px] font-bold text-slate-400",children:[s.jsx("span",{className:"material-symbols-rounded text-xs",children:"info"}),"         ."]})})]})]})}):null,vde=({report:a,isLoading:e,onClose:t})=>a?s.jsx("div",{className:"modal-overlay fixed inset-0 z-[10002] flex items-center justify-center bg-slate-900/60 backdrop-blur-md px-4",onClick:t,children:s.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[32px] overflow-hidden shadow-[0_32px_64px_rgba(0,0,0,0.2)] animate-in zoom-in-95 duration-300 border border-white/20",onClick:r=>r.stopPropagation(),children:[s.jsxs("div",{className:`p-8 flex items-center justify-between text-white ${a.type==="weekly"?"bg-gradient-to-br from-indigo-600 to-indigo-800":"bg-gradient-to-br from-emerald-600 to-emerald-800"}`,children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/10 backdrop-blur-md border border-white/20 flex items-center justify-center shadow-inner",children:s.jsx("span",{className:"material-symbols-rounded text-4xl",children:a.type==="weekly"?"query_stats":"leaderboard"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[11px] font-black uppercase tracking-[0.2em] opacity-70 mb-1",children:" "}),s.jsx("h2",{className:"text-3xl font-black tracking-tight",children:a.type==="weekly"?"  ":"  "})]})]}),s.jsx("button",{onClick:t,className:"w-10 h-10 rounded-full bg-black/10 hover:bg-black/20 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-10",children:[s.jsx("div",{className:"bg-slate-50/80 rounded-[24px] p-8 min-h-[400px] max-h-[550px] overflow-auto stylish-scrollbar border border-slate-100 shadow-inner relative",children:e?s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-slate-50/80 backdrop-blur-sm z-10",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500/20 border-t-indigo-600 rounded-full animate-spin mb-6"}),s.jsx("div",{className:"text-xl font-black text-slate-800 animate-pulse",children:"Mycelium AI  ..."}),s.jsx("p",{className:"text-slate-500 text-sm mt-2 font-bold",children:"       ."})]}):a.content.includes("<")?s.jsx("div",{className:"prose prose-slate max-w-none prose-headings:font-black prose-p:text-slate-600 prose-strong:text-indigo-600 prose-h3:text-indigo-700 whitespace-pre-wrap",children:a.content}):s.jsx("div",{className:"whitespace-pre-wrap leading-relaxed text-slate-700 font-medium",children:a.content})}),!e&&a.rawData&&s.jsxs("div",{className:"mt-6 p-4 bg-slate-900 rounded-2xl flex items-center gap-6 overflow-hidden",children:[s.jsx("div",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest ring-1 ring-indigo-400/30 px-2 py-1 rounded shrink-0",children:" "}),s.jsxs("div",{className:"flex gap-6 overflow-x-auto stylish-scrollbar-horizontal pb-1",children:[s.jsxs("div",{className:"shrink-0",children:[s.jsx("span",{className:"text-[10px] text-slate-500 font-bold block mb-0.5 uppercase",children:""}),s.jsxs("span",{className:"text-xs font-black text-white",children:[a.rawData.total_sales.toLocaleString(),""]})]}),s.jsxs("div",{className:"shrink-0",children:[s.jsx("span",{className:"text-[10px] text-slate-500 font-bold block mb-0.5 uppercase",children:""}),s.jsxs("span",{className:"text-xs font-black text-white",children:[a.rawData.total_orders,""]})]}),s.jsxs("div",{className:"shrink-0",children:[s.jsx("span",{className:"text-[10px] text-slate-500 font-bold block mb-0.5 uppercase",children:" "}),s.jsxs("span",{className:"text-xs font-black text-white",children:[a.rawData.new_customers,""]})]}),a.rawData.top_products.length>0&&s.jsxs("div",{className:"shrink-0",children:[s.jsx("span",{className:"text-[10px] text-slate-500 font-bold block mb-0.5 uppercase",children:" "}),s.jsx("span",{className:"text-xs font-black text-white",children:a.rawData.top_products[0].product_name})]})]})]}),s.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-[11px] font-black text-slate-400",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"verified_user"}),"MYCELIUM   "]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>OH(a.type==="weekly"?"  ":"  ",a.content),className:"flex items-center gap-2 text-[11px] font-black text-indigo-600 hover:text-indigo-700",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"print"}),"  "]}),s.jsx("button",{onClick:t,className:"bg-slate-900 text-white px-8 py-3.5 rounded-2xl font-black text-sm hover:bg-slate-800 active:scale-95 transition-all shadow-lg shadow-slate-200",children:"  "})]})]})]})]})}):null,bde=a=>{const[e,t]=F.useState(null),[r,n]=F.useState([]),[i,l]=F.useState([]),[o,c]=F.useState([]),[d,u]=F.useState([]),[h,f]=F.useState([]),[p,g]=F.useState([]),[b,w]=F.useState([]),[j,k]=F.useState(null),[T,E]=F.useState(null),[I,R]=F.useState(!0),[P,H]=F.useState(!0),[G,X]=F.useState(!0),[U,te]=F.useState(!0),[Z,J]=F.useState(!1);F.useEffect(()=>{B();const $=setInterval(B,6e4);return()=>clearInterval($)},[]);const B=async()=>{Promise.all([ht("get_dashboard_priority_stats"),ht("get_dashboard_secondary_stats")]).then(([Q,ne])=>{t(re=>{const K={...re||{}};return Q&&Object.keys(Q).forEach(ae=>{Q[ae]!==null&&(K[ae]=Q[ae])}),ne&&Object.keys(ne).forEach(ae=>{ne[ae]!==null&&(K[ae]=ne[ae])}),K}),R(!1)}).catch(Q=>{console.error("Dashboard: Stats error",Q),R(!1)}),Promise.allSettled([ht("get_upcoming_anniversaries",{days:3}).then(Q=>Q&&u(Q)),ht("get_repurchase_candidates").then(Q=>Q&&f(Q)),ht("get_inventory_forecast_alerts").then(Q=>Q&&g(Q)),ht("get_product_freshness").then(Q=>{if(!Q)return;const ne=new Date,re=(Q||[]).filter(K=>{if(!K.last_in_date||K.stock_quantity<=0)return!1;const ae=new Date(K.last_in_date),ce=Math.ceil(Math.abs(ne-ae)/(1e3*60*60*24));return K.diffDays=ce,ce>7}).sort((K,ae)=>ae.diffDays-K.diffDays);w(re)})]).catch(Q=>console.error("Aux data error",Q)),ht("get_weekly_sales_data").then(Q=>{Q&&n(Q),te(!1)}).catch(Q=>{console.error("Dashboard: Weekly chart error",Q),te(!1)}),Promise.allSettled([ht("get_top3_products_by_qty").then(Q=>Q&&l(Q)),ht("get_top_profit_products").then(Q=>Q&&c(Q))]).finally(()=>H(!1)),ht("get_weather_marketing_advice").then(Q=>{Q&&k(Q),X(!1)}).catch(Q=>{console.error("Dashboard: Weather error",Q),X(!1)}),localStorage.getItem("userRole")==="admin"&&ht("get_security_status").then(Q=>{Q&&E(Q)}).catch(Q=>console.warn("Dashboard: Security check failed",Q))},W=(()=>{if(!r||r.length<2)return null;const $=Wt().format("MM-DD"),Q=Wt().subtract(1,"day").format("MM-DD"),ne=r.find(ce=>ce.date===$),re=r.find(ce=>ce.date===Q);if(!ne||!re||re.total===0)return ne&&ne.total>0&&(!re||re.total===0)?{pct:100,isUp:!0,label:""}:null;const K=ne.total-re.total,ae=K/re.total*100;return{pct:Math.abs(ae).toFixed(1),isUp:K>=0}})();return{stats:e,weeklyData:r,top3Products:i,topProfitProducts:o,anniversaries:d,repurchaseCandidates:h,forecastAlerts:p,freshnessAlerts:b,weatherAdvice:j,isLoading:I,isRankLoading:P,isWeatherLoading:G,isChartLoading:U,isReportLoading:Z,setIsReportLoading:J,salesTrend:W,securityStatus:T,loadDashboardData:B}},yde=()=>{const{showAlert:a,showConfirm:e}=wa(),t=an(),r=localStorage.getItem("uiMode")==="lite",{stats:n,weeklyData:i,top3Products:l,topProfitProducts:o,anniversaries:c,repurchaseCandidates:d,forecastAlerts:u,freshnessAlerts:h,weatherAdvice:f,isLoading:p,isRankLoading:g,isWeatherLoading:b,isChartLoading:w,isReportLoading:j,setIsReportLoading:k,salesTrend:T,securityStatus:E}=bde(),[I,R]=F.useState(null),[P,H]=F.useState(!1),[G,X]=F.useState(null),[U,te]=F.useState(null),[Z,J]=F.useState(""),[B,W]=F.useState(!1),[$,Q]=F.useState("qty"),ne=F.useRef(null),re=async()=>{try{k(!0),X("AI          ...");const de=await Co(a,"get_morning_briefing");X(de)}catch(de){console.error(de),X("      (AI)   .     !   . ")}finally{k(!1)}},K=async de=>{let he=null;try{k(!0);const pe=de==="weekly"?"":"";te({type:de,content:""}),he=await Ke("get_business_report_data",{period:de});const Te=`${` : ${Wt().format("YYYY MM DD")}
 ${pe}  :
- : ${he.period_label}
-  : ${he.total_sales.toLocaleString()}
-  : ${he.total_orders.toLocaleString()}
-   : ${he.new_customers.toLocaleString()}
-  : ${he.top_products.map(Le=>Le.product_name).join(", ")}
-  : ${he.top_profitable.map(Le=>Le.product_name).join(", ")}`}
    ${pe}   'Executive Summary' .     (Action Plan)  HTML      .`,ke=await Co(a,"call_gemini_ai",{prompt:Te});te({type:de,content:ke,rawData:he})}catch(pe){if(console.error(pe),he){const Re=`<div class="bg-amber-50 border-l-4 border-amber-400 p-6 mb-8 rounded-r-2xl"><p class="text-[13px] text-amber-700 font-medium"> AI        .</p></div><h3 class="text-2xl font-black text-slate-800 mb-6">   </h3><div class="grid grid-cols-2 gap-4 mb-10"><div class="bg-white p-6 rounded-[24px] border"><div> </div><div class="text-2xl font-black">${he.total_sales.toLocaleString()}</div></div><div><div> </div><div class="text-2xl font-black">${he.total_orders.toLocaleString()}</div></div></div>`;te({type:de,content:Re,rawData:he})}else pe.message?.includes("AI_QUOTA_EXCEEDED")||a("  ","    : "+pe),te(null)}finally{k(!1)}},ae=async de=>{try{const he=` 'CS ' . : ${de.customer_name},  : ${de.last_product},   .     .`,pe=await Co(a,"call_gemini_ai",{prompt:he});await e("AI   ( )",pe+`

     ?`)&&(navigator.clipboard.writeText(pe),window.__SMS_DRAFT_CONTENT__=pe,window.__SMS_DRAFT_RECIPIENT__=de.mobile_number,t("/customer/sms"))}catch(he){console.error(he)}},ce=de=>{R(I===de?null:de),I!==de&&setTimeout(()=>{document.getElementById("alert-expansion-area")?.scrollIntoView({behavior:"smooth",block:"start"})},100)};return r?s.jsxs(s.Fragment,{children:[s.jsx(mde,{stats:n,isLoading:p,salesTrend:T,weatherAdvice:f,isWeatherLoading:b,onLogout:()=>H(!0)}),P&&s.jsx(wL,{onClose:()=>H(!1)})]}):s.jsxs("div",{className:"dashboard-container p-6 lg:p-8 min-[2000px]:p-12 bg-[#f8fafc] h-full flex flex-col overflow-hidden text-slate-900 font-sans relative",children:[s.jsxs("div",{className:"dashboard-content-inner no-print flex flex-col h-full flex-1 min-h-0 relative",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-indigo-500/5 blur-[120px] rounded-full pointer-events-none"}),s.jsx(Hne,{searchQuery:Z,setSearchQuery:J,isSearchFocused:B,setIsSearchFocused:W,searchRef:ne,setShowLogoutModal:H}),E&&!E.is_secure&&s.jsxs("div",{className:"bg-rose-50 border border-rose-100 rounded-3xl p-6 mb-6 flex items-center justify-between shadow-xl shadow-rose-100/50 animate-in slide-in-from-top duration-700",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-rose-500 text-white flex items-center justify-center animate-pulse",children:s.jsx(XA,{size:24})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-rose-900 font-black tracking-tight",children:"   "}),s.jsxs("p",{className:"text-xs text-rose-600 font-medium mt-0.5",children:["    ",E.warnings.filter(de=>de.level==="High").length,"   .   ."]})]})]}),s.jsx("button",{onClick:()=>t("/settings/security"),className:"bg-white text-rose-600 px-6 py-2.5 rounded-2xl border border-rose-200 text-xs font-black shadow-sm hover:bg-rose-50 transition-all active:scale-95",children:"  "})]}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 min-[2000px]:gap-6 mb-4 min-[2000px]:mb-6 shrink-0",children:[s.jsx(Une,{weatherAdvice:f,isWeatherLoading:b}),s.jsx(gl,{icon:"payments",iconColor:"text-indigo-600",iconBg:"bg-indigo-50",label:" ",value:`${Fe(n?.total_sales_amount||0)}`,trend:T,isLoading:p}),s.jsx(gl,{icon:"shopping_cart",iconColor:"text-blue-600",iconBg:"bg-blue-50",label:" ",value:`${Fe(n?.total_orders||0)}`,badge:"",isLoading:p}),s.jsx(gl,{icon:"group_add",iconColor:"text-indigo-600",iconBg:"bg-indigo-50",label:"   / ",value:`${Fe(n?.total_customers||0)} / ${Fe(n?.total_customers_all_time||0)}`,badge:" ",isLoading:p,secondaryValue:s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),"  ",Fe(n?.normal_customers_count||0)]}),s.jsx("span",{className:"w-px h-2 bg-slate-200"}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-400"}),"  ",Fe(n?.dormant_customers_count||0)]})]})}),s.jsx(gl,{icon:"local_shipping",iconColor:"text-amber-600",iconBg:"bg-amber-50",label:" ",value:`${Fe(n?.pending_orders||0)}`,badge:"",isLoading:p,className:"hover:border-amber-200"}),s.jsx(gl,{icon:"calendar_today",iconColor:"text-indigo-600",iconBg:"bg-indigo-50",label:" ",value:`${Fe(n?.today_schedule_count||0)}`,badge:"",isLoading:p}),s.jsx(gl,{icon:"event_available",iconColor:"text-teal-600",iconBg:"bg-teal-50",label:"  ()",value:`${Fe(n?.experience_reservation_count||0)}`,badge:"",isLoading:p,className:"hover:border-teal-200"}),s.jsx(gl,{icon:"inventory_2",iconColor:"text-rose-600",iconBg:"bg-rose-50",label:" ",value:`${Fe(n?.total_alert_count||u.length+h.length)}`,badge:"",isLoading:p,className:`border-l-4 border-l-rose-500 ${I==="inventory"?"ring-2 ring-rose-500":""}`,onClick:()=>ce("inventory"),secondaryValue:s.jsxs("span",{className:"text-[10px] font-bold text-rose-400 mb-1.5 flex gap-1",children:[s.jsxs("span",{children:[":",Fe(u.length)]}),s.jsx("span",{children:"/"}),s.jsxs("span",{children:[":",Fe(h.length)]})]})}),s.jsx(gl,{icon:"forum",iconColor:"text-blue-600",iconBg:"bg-blue-50",label:" ",value:`${Fe(n?.pending_consultation_count||0)}`,badge:"",isLoading:p,className:"border-l-4 border-l-blue-500",onClick:()=>t("/customer/consultation")}),s.jsx(gl,{icon:"notifications_active",iconColor:"text-indigo-600",iconBg:"bg-indigo-50",label:" ",value:`${Fe(d.length)}`,badge:"",isLoading:p,className:`border-l-4 border-l-indigo-500 ${I==="repurchase"?"ring-2 ring-indigo-500":""}`,onClick:()=>ce("repurchase")}),s.jsxs("div",{className:"bg-white rounded-[28px] py-5 px-6 border border-slate-100 shadow-[0_4px_20px_rgb(0,0,0,0.03)] flex flex-col justify-between h-full group transition-all duration-500 hover:border-indigo-200",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("h3",{className:"text-slate-500 text-[0.8rem] font-bold flex items-center gap-2 uppercase tracking-wider",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-600 bg-indigo-50 p-1.5 rounded-lg text-lg",children:"insights"})," "]}),s.jsx("span",{className:"bg-indigo-50 text-indigo-500 text-[9px] font-black px-2 py-0.5 rounded-full border border-indigo-100 uppercase tracking-tighter",children:"AI "})]}),s.jsxs("div",{className:"flex flex-col gap-1 mt-2",children:[s.jsxs("button",{onClick:re,className:"w-full bg-slate-50 hover:bg-slate-100 p-1.5 rounded-xl text-left transition-all group flex items-center justify-between",children:[s.jsx("span",{className:"text-[11px] font-bold text-slate-700 ml-1",children:" "}),s.jsx("span",{className:"material-symbols-rounded text-sm text-slate-300 group-hover:text-indigo-500 transition-colors",children:"arrow_forward"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[s.jsx("button",{onClick:()=>K("weekly"),className:"bg-slate-50 hover:bg-indigo-50 p-1.5 rounded-xl text-center transition-all group",children:s.jsx("span",{className:"text-[11px] font-black text-slate-700 group-hover:text-indigo-600",children:" "})}),s.jsx("button",{onClick:()=>K("monthly"),className:"bg-slate-50 hover:bg-emerald-50 p-1.5 rounded-xl text-center transition-all group",children:s.jsx("span",{className:"text-[11px] font-black text-slate-700 group-hover:text-emerald-600",children:" "})})]})]})]}),s.jsx(xde,{})]}),s.jsx(Gne,{type:I,onClose:()=>R(null),forecastAlerts:u,freshnessAlerts:h,anniversaries:c,repurchaseCandidates:d,generateAIDraft:ae,navigate:t}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[1.5fr_1fr] gap-5 flex-1 min-h-0",children:[s.jsx(hde,{weeklyData:i,isChartLoading:w,navigate:t}),s.jsx(fde,{top3Products:l,topProfitProducts:o,topMode:$,setTopMode:Q,isRankLoading:g})]})]}),P&&s.jsx(wL,{onClose:()=>H(!1)}),s.jsx(gde,{content:G,isLoading:j,onClose:()=>X(null)}),s.jsx(vde,{report:U,isLoading:j,onClose:()=>te(null)})]})},wde=()=>{const[a,e]=F.useState(null),[t,r]=F.useState([]),[n,i]=F.useState(!0),l=F.useCallback(async()=>{i(!0);try{const c=async f=>{try{return await ht(f)}catch(p){return console.warn(`Dashboard partial load failed (${f}):`,p),null}},[d,u,h]=await Promise.all([c("get_dashboard_priority_stats"),c("get_dashboard_secondary_stats"),c("get_weekly_sales_data")]);e(f=>{const p={...f||{}};return d&&Object.keys(d).forEach(g=>{d[g]!==null&&d[g]!==void 0&&(p[g]=d[g])}),u&&Object.keys(u).forEach(g=>{u[g]!==null&&u[g]!==void 0&&(p[g]=u[g])}),p}),r(h||[])}catch(c){console.error("Mobile Dashboard Critical Load Error:",c)}finally{i(!1)}},[]);F.useEffect(()=>{l()},[l]);const o=(()=>{if(!t||t.length<2)return null;const c=Wt().format("MM-DD"),d=Wt().subtract(1,"day").format("MM-DD"),u=t.find(g=>g.date===c),h=t.find(g=>g.date===d);if(!u||!h||h.total===0)return u&&u.total>0&&(!h||h.total===0)?{pct:100,isUp:!0}:null;const f=u.total-h.total,p=f/h.total*100;return{pct:Math.abs(p).toFixed(1),isUp:f>=0}})();return{stats:a,salesTrend:o,isLoading:n,loadData:l}},KU=(a,{threshold:e=80,maxY:t=150,scrollEltRef:r=null}={})=>{const[n,i]=F.useState(0),[l,o]=F.useState(!1),c=F.useRef(0),d=F.useRef(!1),u=F.useCallback(p=>{const g=r?.current||window;(g===window?window.scrollY:g.scrollTop)<=0&&(c.current=p.touches[0].pageY,d.current=!0)},[r]),h=F.useCallback(p=>{if(!d.current||l)return;const b=p.touches[0].pageY-c.current;if(b>0){const w=Math.min(b*.4,t);i(w),b>10&&p.cancelable&&p.preventDefault()}else i(0),d.current=!1},[l,t]),f=F.useCallback(async()=>{if(d.current)if(d.current=!1,n>=e){o(!0),i(e);try{await a()}finally{setTimeout(()=>{o(!1),i(0)},500)}}else i(0)},[n,e,a]);return{pullDistance:n,isRefreshing:l,bind:{onTouchStart:u,onTouchMove:h,onTouchEnd:f}}},_de=()=>{an();const{stats:a,salesTrend:e,isLoading:t,loadData:r}=wde(),n=F.useRef(null),[i,l]=F.useState(Wt().format("HH:mm:ss")),o=F.useCallback(async()=>{await r(),l(Wt().format("HH:mm:ss"))},[r]),{pullDistance:c,isRefreshing:d,bind:u}=KU(o,{scrollEltRef:n}),h=F.useCallback(async()=>{await r(),l(Wt().format("HH:mm:ss"))},[r]);return F.useEffect(()=>{h();const f=()=>{document.visibilityState==="visible"&&(console.log("App returned to foreground, refreshing data..."),h())};return document.addEventListener("visibilitychange",f),()=>document.removeEventListener("visibilitychange",f)},[h]),s.jsxs("div",{className:"mobile-fullscreen bg-slate-50 flex flex-col font-sans overflow-hidden",children:[s.jsxs("div",{className:"bg-indigo-600 px-6 pt-8 pb-16 rounded-b-[40px] sticky top-0 z-40 shadow-lg shrink-0",children:[s.jsx("div",{className:"absolute left-0 right-0 top-0 flex justify-center pointer-events-none transition-transform",style:{transform:`translateY(${c}px)`,opacity:c>20?1:0},children:s.jsx("div",{className:"bg-white/90 backdrop-blur-md p-2 rounded-full shadow-lg border border-white/20 mt-2",children:s.jsx(yi,{size:20,className:`text-indigo-600 ${d?"animate-spin":""}`,style:{transform:d?"none":`rotate(${c*3}deg)`,transition:d?"none":"transform 0.1s"}})})}),s.jsx("div",{className:"relative z-10 flex justify-start items-center mb-6",children:s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-white flex items-center justify-center shadow-lg shadow-indigo-500/10 overflow-hidden",children:s.jsx("img",{src:"/mushroom-app-icon.png",alt:"Logo",className:"w-8 h-8 object-contain"})}),s.jsx("h1",{className:"text-white text-2xl font-black tracking-tight truncate",children:"  "})]})}),s.jsxs("div",{className:`relative z-10 bg-white p-6 rounded-3xl shadow-xl transition-all duration-700 ease-out ${t?"opacity-90 scale-[0.98]":"opacity-100 scale-100"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("span",{className:"text-slate-400 font-bold text-xs uppercase tracking-tight",children:"  "}),!t&&e?s.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-[10px] font-black ${e.isUp?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"}`,children:[e.isUp?s.jsx(Eg,{size:10}):s.jsx(vne,{size:10}),e.pct,"%"]}):s.jsx("div",{className:"w-12 h-4 bg-slate-50 rounded-full animate-pulse"})]}),s.jsx("div",{className:"text-3xl font-black text-slate-800 tracking-tight h-10 flex items-center",children:t?s.jsx("div",{className:"w-48 h-8 bg-slate-100 rounded-lg animate-pulse"}):`${Fe(a?.total_sales_amount||0)}`}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-50 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Eo,{size:14,className:"text-indigo-400"}),s.jsx("span",{className:"text-[11px] text-slate-400 font-bold",children:Wt().format("YYYY MM DD")})]}),s.jsxs("span",{className:"text-[10px] text-slate-300 font-medium tracking-tight whitespace-nowrap",children:[" : ",i]})]})]})]}),s.jsxs("div",{ref:n,...u,className:"flex-1 overflow-y-auto px-6 -mt-6 relative z-20 space-y-4 pb-32 touch-pan-y",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-md border border-slate-100 min-h-[140px] flex flex-col justify-between",children:[s.jsx("div",{className:"w-10 h-10 rounded-2xl bg-blue-50 text-blue-600 flex items-center justify-center",children:s.jsx(mx,{size:20})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-slate-400 font-bold text-xs mb-1",children:" "}),s.jsx("div",{className:"text-2xl font-black text-slate-800 h-8 flex items-center",children:t?s.jsx("div",{className:"w-12 h-6 bg-slate-50 rounded animate-pulse"}):`${Fe(a?.total_orders||0)}`})]})]}),s.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-md border border-slate-100 min-h-[140px] flex flex-col justify-between",children:[s.jsx("div",{className:"w-10 h-10 rounded-2xl bg-amber-50 text-amber-600 flex items-center justify-center",children:s.jsx(_c,{size:20})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-slate-400 font-bold text-xs mb-1",children:" "}),s.jsx("div",{className:"text-2xl font-black text-slate-800 h-8 flex items-center",children:t?s.jsx("div",{className:"w-12 h-6 bg-slate-50 rounded animate-pulse"}):`${Fe(a?.pending_orders||0)}`})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-md border border-slate-100",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:s.jsx(gx,{size:20})}),s.jsx("h3",{className:"font-black text-slate-700",children:" "})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[11px] text-slate-400 font-bold uppercase mb-1",children:"  "}),s.jsx("div",{className:"text-2xl font-black text-slate-800 h-8 flex items-center",children:t?s.jsx("div",{className:"w-16 h-6 bg-slate-50 rounded animate-pulse"}):`${Fe(a?.total_customers||0)}`})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[11px] text-slate-400 font-bold uppercase mb-1",children:" "}),s.jsx("div",{className:"text-lg font-black text-indigo-600 h-7 flex items-center justify-end",children:t?s.jsx("div",{className:"w-20 h-5 bg-slate-50 rounded animate-pulse"}):`${Fe(a?.total_customers_all_time||0)}`})]})]}),s.jsxs("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden flex",children:[s.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-1000",style:{width:t?"0%":"65%"}}),s.jsx("div",{className:"h-full bg-indigo-300 transition-all duration-1000",style:{width:t?"0%":"20%"}})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-md border border-slate-100",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-2xl bg-teal-50 text-teal-600 flex items-center justify-center",children:s.jsx(Mne,{size:20})}),s.jsx("h3",{className:"font-black text-slate-700",children:"  "})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1 tracking-tighter",children:"  "}),s.jsx("div",{className:"text-xl font-black text-slate-800 h-7 flex items-center",children:t?s.jsx("div",{className:"w-10 h-6 bg-slate-50 rounded animate-pulse"}):`${Fe(a?.experience_reservation_count||0)}`})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1 tracking-tighter",children:" "}),s.jsx("div",{className:"text-xl font-black text-slate-800 h-7 flex items-center",children:t?s.jsx("div",{className:"w-10 h-6 bg-slate-50 rounded animate-pulse"}):`${Fe(a?.today_schedule_count||0)}`})]})]})]}),s.jsx("div",{className:"mt-8 px-4 text-center opacity-30",children:s.jsxs("p",{className:"text-[10px] text-slate-600 font-bold uppercase tracking-widest leading-relaxed",children:[" 2026 Mycelium Farm OS",s.jsx("br",{}),"  "]})})]})]})};var sa;(function(a){a[a.QR_CODE=0]="QR_CODE",a[a.AZTEC=1]="AZTEC",a[a.CODABAR=2]="CODABAR",a[a.CODE_39=3]="CODE_39",a[a.CODE_93=4]="CODE_93",a[a.CODE_128=5]="CODE_128",a[a.DATA_MATRIX=6]="DATA_MATRIX",a[a.MAXICODE=7]="MAXICODE",a[a.ITF=8]="ITF",a[a.EAN_13=9]="EAN_13",a[a.EAN_8=10]="EAN_8",a[a.PDF_417=11]="PDF_417",a[a.RSS_14=12]="RSS_14",a[a.RSS_EXPANDED=13]="RSS_EXPANDED",a[a.UPC_A=14]="UPC_A",a[a.UPC_E=15]="UPC_E",a[a.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(sa||(sa={}));var _L=new Map([[sa.QR_CODE,"QR_CODE"],[sa.AZTEC,"AZTEC"],[sa.CODABAR,"CODABAR"],[sa.CODE_39,"CODE_39"],[sa.CODE_93,"CODE_93"],[sa.CODE_128,"CODE_128"],[sa.DATA_MATRIX,"DATA_MATRIX"],[sa.MAXICODE,"MAXICODE"],[sa.ITF,"ITF"],[sa.EAN_13,"EAN_13"],[sa.EAN_8,"EAN_8"],[sa.PDF_417,"PDF_417"],[sa.RSS_14,"RSS_14"],[sa.RSS_EXPANDED,"RSS_EXPANDED"],[sa.UPC_A,"UPC_A"],[sa.UPC_E,"UPC_E"],[sa.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),NL;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.URL=1]="URL"})(NL||(NL={}));function Nde(a){return Object.values(sa).includes(a)}var v2;(function(a){a[a.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",a[a.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(v2||(v2={}));var jde=(function(){function a(){}return a.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",a.SCAN_DEFAULT_FPS=2,a.DEFAULT_DISABLE_FLIP=!1,a.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,a.DEFAULT_SUPPORTED_SCAN_TYPE=[v2.SCAN_TYPE_CAMERA,v2.SCAN_TYPE_FILE],a})(),QU=(function(){function a(e,t){this.format=e,this.formatName=t}return a.prototype.toString=function(){return this.formatName},a.create=function(e){if(!_L.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new a(e,_L.get(e))},a})(),jL=(function(){function a(){}return a.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},a.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},a})(),l4;(function(a){a[a.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",a[a.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",a[a.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(l4||(l4={}));var Sde=(function(){function a(){}return a.createFrom=function(e){return{errorMessage:e,type:l4.UNKWOWN_ERROR}},a})(),kde=(function(){function a(e){this.verbose=e}return a.prototype.log=function(e){this.verbose&&console.log(e)},a.prototype.warn=function(e){this.verbose&&console.warn(e)},a.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},a.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},a})();function vd(a){return typeof a>"u"||a===null}var Kp=(function(){function a(){}return a.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},a.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},a.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},a.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},a.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},a.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},a.scannerPaused=function(){return"Scanner paused"},a})(),JU=(function(){function a(){}return a.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var r=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var n=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],i=new Set(n),l=Object.keys(e),o=0,c=l;o<c.length;o++){var d=c[o];if(i.has(d))return t.logError("".concat(d," is not supported videoConstaints."),!0),!1}return!0},a})(),Og={exports:{}},Cde=Og.exports,SL;function Ade(){return SL||(SL=1,(function(a,e){(function(t,r){r(e)})(Cde,(function(t){function r(ue){return ue==null}var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ue,m){ue.__proto__=m}||function(ue,m){for(var y in m)m.hasOwnProperty(y)&&(ue[y]=m[y])};function i(ue,m){n(ue,m);function y(){this.constructor=ue}ue.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}function l(ue,m){var y=Object.setPrototypeOf;y?y(ue,m):ue.__proto__=m}function o(ue,m){m===void 0&&(m=ue.constructor);var y=Error.captureStackTrace;y&&y(ue,m)}var c=(function(ue){i(m,ue);function m(y){var N=this.constructor,C=ue.call(this,y)||this;return Object.defineProperty(C,"name",{value:N.name,enumerable:!1}),l(C,N.prototype),o(C),C}return m})(Error);class d extends c{constructor(m=void 0){super(m),this.message=m}getKind(){return this.constructor.kind}}d.kind="Exception";class u extends d{}u.kind="ArgumentException";class h extends d{}h.kind="IllegalArgumentException";class f{constructor(m){if(this.binarizer=m,m===null)throw new h("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(m,y){return this.binarizer.getBlackRow(m,y)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(m,y,N,C){const M=this.binarizer.getLuminanceSource().crop(m,y,N,C);return new f(this.binarizer.createBinarizer(M))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const m=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new f(this.binarizer.createBinarizer(m))}rotateCounterClockwise45(){const m=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new f(this.binarizer.createBinarizer(m))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class p extends d{static getChecksumInstance(){return new p}}p.kind="ChecksumException";class g{constructor(m){this.source=m}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class b{static arraycopy(m,y,N,C,M){for(;M--;)N[C++]=m[y++]}static currentTimeMillis(){return Date.now()}}class w extends d{}w.kind="IndexOutOfBoundsException";class j extends w{constructor(m=void 0,y=void 0){super(y),this.index=m,this.message=y}}j.kind="ArrayIndexOutOfBoundsException";class k{static fill(m,y){for(let N=0,C=m.length;N<C;N++)m[N]=y}static fillWithin(m,y,N,C){k.rangeCheck(m.length,y,N);for(let M=y;M<N;M++)m[M]=C}static rangeCheck(m,y,N){if(y>N)throw new h("fromIndex("+y+") > toIndex("+N+")");if(y<0)throw new j(y);if(N>m)throw new j(N)}static asList(...m){return m}static create(m,y,N){return Array.from({length:m}).map(M=>Array.from({length:y}).fill(N))}static createInt32Array(m,y,N){return Array.from({length:m}).map(M=>Int32Array.from({length:y}).fill(N))}static equals(m,y){if(!m||!y||!m.length||!y.length||m.length!==y.length)return!1;for(let N=0,C=m.length;N<C;N++)if(m[N]!==y[N])return!1;return!0}static hashCode(m){if(m===null)return 0;let y=1;for(const N of m)y=31*y+N;return y}static fillUint8Array(m,y){for(let N=0;N!==m.length;N++)m[N]=y}static copyOf(m,y){return m.slice(0,y)}static copyOfUint8Array(m,y){if(m.length<=y){const N=new Uint8Array(y);return N.set(m),N}return m.slice(0,y)}static copyOfRange(m,y,N){const C=N-y,M=new Int32Array(C);return b.arraycopy(m,y,M,0,C),M}static binarySearch(m,y,N){N===void 0&&(N=k.numberComparator);let C=0,M=m.length-1;for(;C<=M;){const L=M+C>>1,_=N(y,m[L]);if(_>0)C=L+1;else if(_<0)M=L-1;else return L}return-C-1}static numberComparator(m,y){return m-y}}class T{static numberOfTrailingZeros(m){let y;if(m===0)return 32;let N=31;return y=m<<16,y!==0&&(N-=16,m=y),y=m<<8,y!==0&&(N-=8,m=y),y=m<<4,y!==0&&(N-=4,m=y),y=m<<2,y!==0&&(N-=2,m=y),N-(m<<1>>>31)}static numberOfLeadingZeros(m){if(m===0)return 32;let y=1;return m>>>16||(y+=16,m<<=16),m>>>24||(y+=8,m<<=8),m>>>28||(y+=4,m<<=4),m>>>30||(y+=2,m<<=2),y-=m>>>31,y}static toHexString(m){return m.toString(16)}static toBinaryString(m){return String(parseInt(String(m),2))}static bitCount(m){return m=m-(m>>>1&1431655765),m=(m&858993459)+(m>>>2&858993459),m=m+(m>>>4)&252645135,m=m+(m>>>8),m=m+(m>>>16),m&63}static truncDivision(m,y){return Math.trunc(m/y)}static parseInt(m,y=void 0){return parseInt(m,y)}}T.MIN_VALUE_32_BITS=-2147483648,T.MAX_VALUE=Number.MAX_SAFE_INTEGER;class E{constructor(m,y){m===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=m,y==null?this.bits=E.makeArray(m):this.bits=y)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(m){if(m>this.bits.length*32){const y=E.makeArray(m);b.arraycopy(this.bits,0,y,0,this.bits.length),this.bits=y}}get(m){return(this.bits[Math.floor(m/32)]&1<<(m&31))!==0}set(m){this.bits[Math.floor(m/32)]|=1<<(m&31)}flip(m){this.bits[Math.floor(m/32)]^=1<<(m&31)}getNextSet(m){const y=this.size;if(m>=y)return y;const N=this.bits;let C=Math.floor(m/32),M=N[C];M&=~((1<<(m&31))-1);const L=N.length;for(;M===0;){if(++C===L)return y;M=N[C]}const _=C*32+T.numberOfTrailingZeros(M);return _>y?y:_}getNextUnset(m){const y=this.size;if(m>=y)return y;const N=this.bits;let C=Math.floor(m/32),M=~N[C];M&=~((1<<(m&31))-1);const L=N.length;for(;M===0;){if(++C===L)return y;M=~N[C]}const _=C*32+T.numberOfTrailingZeros(M);return _>y?y:_}setBulk(m,y){this.bits[Math.floor(m/32)]=y}setRange(m,y){if(y<m||m<0||y>this.size)throw new h;if(y===m)return;y--;const N=Math.floor(m/32),C=Math.floor(y/32),M=this.bits;for(let L=N;L<=C;L++){const _=L>N?0:m&31,O=(2<<(L<C?31:y&31))-(1<<_);M[L]|=O}}clear(){const m=this.bits.length,y=this.bits;for(let N=0;N<m;N++)y[N]=0}isRange(m,y,N){if(y<m||m<0||y>this.size)throw new h;if(y===m)return!0;y--;const C=Math.floor(m/32),M=Math.floor(y/32),L=this.bits;for(let _=C;_<=M;_++){const A=_>C?0:m&31,z=(2<<(_<M?31:y&31))-(1<<A)&4294967295;if((L[_]&z)!==(N?z:0))return!1}return!0}appendBit(m){this.ensureCapacity(this.size+1),m&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(m,y){if(y<0||y>32)throw new h("Num bits must be between 0 and 32");this.ensureCapacity(this.size+y);for(let N=y;N>0;N--)this.appendBit((m>>N-1&1)===1)}appendBitArray(m){const y=m.size;this.ensureCapacity(this.size+y);for(let N=0;N<y;N++)this.appendBit(m.get(N))}xor(m){if(this.size!==m.size)throw new h("Sizes don't match");const y=this.bits;for(let N=0,C=y.length;N<C;N++)y[N]^=m.bits[N]}toBytes(m,y,N,C){for(let M=0;M<C;M++){let L=0;for(let _=0;_<8;_++)this.get(m)&&(L|=1<<7-_),m++;y[N+M]=L}}getBitArray(){return this.bits}reverse(){const m=new Int32Array(this.bits.length),y=Math.floor((this.size-1)/32),N=y+1,C=this.bits;for(let M=0;M<N;M++){let L=C[M];L=L>>1&1431655765|(L&1431655765)<<1,L=L>>2&858993459|(L&858993459)<<2,L=L>>4&252645135|(L&252645135)<<4,L=L>>8&16711935|(L&16711935)<<8,L=L>>16&65535|(L&65535)<<16,m[y-M]=L}if(this.size!==N*32){const M=N*32-this.size;let L=m[0]>>>M;for(let _=1;_<N;_++){const A=m[_];L|=A<<32-M,m[_-1]=L,L=A>>>M}m[N-1]=L}this.bits=m}static makeArray(m){return new Int32Array(Math.floor((m+31)/32))}equals(m){if(!(m instanceof E))return!1;const y=m;return this.size===y.size&&k.equals(this.bits,y.bits)}hashCode(){return 31*this.size+k.hashCode(this.bits)}toString(){let m="";for(let y=0,N=this.size;y<N;y++)(y&7)===0&&(m+=" "),m+=this.get(y)?"X":".";return m}clone(){return new E(this.size,this.bits.slice())}}var I;(function(ue){ue[ue.OTHER=0]="OTHER",ue[ue.PURE_BARCODE=1]="PURE_BARCODE",ue[ue.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",ue[ue.TRY_HARDER=3]="TRY_HARDER",ue[ue.CHARACTER_SET=4]="CHARACTER_SET",ue[ue.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",ue[ue.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",ue[ue.ASSUME_GS1=7]="ASSUME_GS1",ue[ue.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",ue[ue.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",ue[ue.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(I||(I={}));var R=I;class P extends d{static getFormatInstance(){return new P}}P.kind="FormatException";var H;(function(ue){ue[ue.Cp437=0]="Cp437",ue[ue.ISO8859_1=1]="ISO8859_1",ue[ue.ISO8859_2=2]="ISO8859_2",ue[ue.ISO8859_3=3]="ISO8859_3",ue[ue.ISO8859_4=4]="ISO8859_4",ue[ue.ISO8859_5=5]="ISO8859_5",ue[ue.ISO8859_6=6]="ISO8859_6",ue[ue.ISO8859_7=7]="ISO8859_7",ue[ue.ISO8859_8=8]="ISO8859_8",ue[ue.ISO8859_9=9]="ISO8859_9",ue[ue.ISO8859_10=10]="ISO8859_10",ue[ue.ISO8859_11=11]="ISO8859_11",ue[ue.ISO8859_13=12]="ISO8859_13",ue[ue.ISO8859_14=13]="ISO8859_14",ue[ue.ISO8859_15=14]="ISO8859_15",ue[ue.ISO8859_16=15]="ISO8859_16",ue[ue.SJIS=16]="SJIS",ue[ue.Cp1250=17]="Cp1250",ue[ue.Cp1251=18]="Cp1251",ue[ue.Cp1252=19]="Cp1252",ue[ue.Cp1256=20]="Cp1256",ue[ue.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",ue[ue.UTF8=22]="UTF8",ue[ue.ASCII=23]="ASCII",ue[ue.Big5=24]="Big5",ue[ue.GB18030=25]="GB18030",ue[ue.EUC_KR=26]="EUC_KR"})(H||(H={}));class G{constructor(m,y,N,...C){this.valueIdentifier=m,this.name=N,typeof y=="number"?this.values=Int32Array.from([y]):this.values=y,this.otherEncodingNames=C,G.VALUE_IDENTIFIER_TO_ECI.set(m,this),G.NAME_TO_ECI.set(N,this);const M=this.values;for(let L=0,_=M.length;L!==_;L++){const A=M[L];G.VALUES_TO_ECI.set(A,this)}for(const L of C)G.NAME_TO_ECI.set(L,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(m){if(m<0||m>=900)throw new P("incorect value");const y=G.VALUES_TO_ECI.get(m);if(y===void 0)throw new P("incorect value");return y}static getCharacterSetECIByName(m){const y=G.NAME_TO_ECI.get(m);if(y===void 0)throw new P("incorect value");return y}equals(m){if(!(m instanceof G))return!1;const y=m;return this.getName()===y.getName()}}G.VALUE_IDENTIFIER_TO_ECI=new Map,G.VALUES_TO_ECI=new Map,G.NAME_TO_ECI=new Map,G.Cp437=new G(H.Cp437,Int32Array.from([0,2]),"Cp437"),G.ISO8859_1=new G(H.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),G.ISO8859_2=new G(H.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),G.ISO8859_3=new G(H.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),G.ISO8859_4=new G(H.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),G.ISO8859_5=new G(H.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),G.ISO8859_6=new G(H.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),G.ISO8859_7=new G(H.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),G.ISO8859_8=new G(H.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),G.ISO8859_9=new G(H.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),G.ISO8859_10=new G(H.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),G.ISO8859_11=new G(H.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),G.ISO8859_13=new G(H.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),G.ISO8859_14=new G(H.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),G.ISO8859_15=new G(H.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),G.ISO8859_16=new G(H.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),G.SJIS=new G(H.SJIS,20,"SJIS","Shift_JIS"),G.Cp1250=new G(H.Cp1250,21,"Cp1250","windows-1250"),G.Cp1251=new G(H.Cp1251,22,"Cp1251","windows-1251"),G.Cp1252=new G(H.Cp1252,23,"Cp1252","windows-1252"),G.Cp1256=new G(H.Cp1256,24,"Cp1256","windows-1256"),G.UnicodeBigUnmarked=new G(H.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),G.UTF8=new G(H.UTF8,26,"UTF8","UTF-8"),G.ASCII=new G(H.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),G.Big5=new G(H.Big5,28,"Big5"),G.GB18030=new G(H.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),G.EUC_KR=new G(H.EUC_KR,30,"EUC_KR","EUC-KR");class X extends d{}X.kind="UnsupportedOperationException";class U{static decode(m,y){const N=this.encodingName(y);return this.customDecoder?this.customDecoder(m,N):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(N)?this.decodeFallback(m,N):new TextDecoder(N).decode(m)}static shouldDecodeOnFallback(m){return!U.isBrowser()&&m==="ISO-8859-1"}static encode(m,y){const N=this.encodingName(y);return this.customEncoder?this.customEncoder(m,N):typeof TextEncoder>"u"?this.encodeFallback(m):new TextEncoder().encode(m)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(m){return typeof m=="string"?m:m.getName()}static encodingCharacterSet(m){return m instanceof G?m:G.getCharacterSetECIByName(m)}static decodeFallback(m,y){const N=this.encodingCharacterSet(y);if(U.isDecodeFallbackSupported(N)){let C="";for(let M=0,L=m.length;M<L;M++){let _=m[M].toString(16);_.length<2&&(_="0"+_),C+="%"+_}return decodeURIComponent(C)}if(N.equals(G.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(m.buffer));throw new X(`Encoding ${this.encodingName(y)} not supported by fallback.`)}static isDecodeFallbackSupported(m){return m.equals(G.UTF8)||m.equals(G.ISO8859_1)||m.equals(G.ASCII)}static encodeFallback(m){const N=btoa(unescape(encodeURIComponent(m))).split(""),C=[];for(let M=0;M<N.length;M++)C.push(N[M].charCodeAt(0));return new Uint8Array(C)}}class te{static castAsNonUtf8Char(m,y=null){const N=y?y.getName():this.ISO88591;return U.decode(new Uint8Array([m]),N)}static guessEncoding(m,y){if(y!=null&&y.get(R.CHARACTER_SET)!==void 0)return y.get(R.CHARACTER_SET).toString();const N=m.length;let C=!0,M=!0,L=!0,_=0,A=0,O=0,z=0,Y=0,ee=0,ie=0,oe=0,fe=0,ge=0,me=0;const ve=m.length>3&&m[0]===239&&m[1]===187&&m[2]===191;for(let we=0;we<N&&(C||M||L);we++){const be=m[we]&255;L&&(_>0?(be&128)===0?L=!1:_--:(be&128)!==0&&((be&64)===0?L=!1:(_++,(be&32)===0?A++:(_++,(be&16)===0?O++:(_++,(be&8)===0?z++:L=!1))))),C&&(be>127&&be<160?C=!1:be>159&&(be<192||be===215||be===247)&&me++),M&&(Y>0?be<64||be===127||be>252?M=!1:Y--:be===128||be===160||be>239?M=!1:be>160&&be<224?(ee++,oe=0,ie++,ie>fe&&(fe=ie)):be>127?(Y++,ie=0,oe++,oe>ge&&(ge=oe)):(ie=0,oe=0))}return L&&_>0&&(L=!1),M&&Y>0&&(M=!1),L&&(ve||A+O+z>0)?te.UTF8:M&&(te.ASSUME_SHIFT_JIS||fe>=3||ge>=3)?te.SHIFT_JIS:C&&M?fe===2&&ee===2||me*10>=N?te.SHIFT_JIS:te.ISO88591:C?te.ISO88591:M?te.SHIFT_JIS:L?te.UTF8:te.PLATFORM_DEFAULT_ENCODING}static format(m,...y){let N=-1;function C(L,_,A,O,z,Y){if(L==="%%")return"%";if(y[++N]===void 0)return;L=O?parseInt(O.substr(1)):void 0;let ee=z?parseInt(z.substr(1)):void 0,ie;switch(Y){case"s":ie=y[N];break;case"c":ie=y[N][0];break;case"f":ie=parseFloat(y[N]).toFixed(L);break;case"p":ie=parseFloat(y[N]).toPrecision(L);break;case"e":ie=parseFloat(y[N]).toExponential(L);break;case"x":ie=parseInt(y[N]).toString(ee||16);break;case"d":ie=parseFloat(parseInt(y[N],ee||10).toPrecision(L)).toFixed(0);break}ie=typeof ie=="object"?JSON.stringify(ie):(+ie).toString(ee);let oe=parseInt(A),fe=A&&A[0]+""=="0"?"0":" ";for(;ie.length<oe;)ie=_!==void 0?ie+fe:fe+ie;return ie}let M=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return m.replace(M,C)}static getBytes(m,y){return U.encode(m,y)}static getCharCode(m,y=0){return m.charCodeAt(y)}static getCharAt(m){return String.fromCharCode(m)}}te.SHIFT_JIS=G.SJIS.getName(),te.GB2312="GB2312",te.ISO88591=G.ISO8859_1.getName(),te.EUC_JP="EUC_JP",te.UTF8=G.UTF8.getName(),te.PLATFORM_DEFAULT_ENCODING=te.UTF8,te.ASSUME_SHIFT_JIS=!1;class Z{constructor(m=""){this.value=m}enableDecoding(m){return this.encoding=m,this}append(m){return typeof m=="string"?this.value+=m.toString():this.encoding?this.value+=te.castAsNonUtf8Char(m,this.encoding):this.value+=String.fromCharCode(m),this}appendChars(m,y,N){for(let C=y;y<y+N;C++)this.append(m[C]);return this}length(){return this.value.length}charAt(m){return this.value.charAt(m)}deleteCharAt(m){this.value=this.value.substr(0,m)+this.value.substring(m+1)}setCharAt(m,y){this.value=this.value.substr(0,m)+y+this.value.substr(m+1)}substring(m,y){return this.value.substring(m,y)}setLengthToZero(){this.value=""}toString(){return this.value}insert(m,y){this.value=this.value.substr(0,m)+y+this.value.substr(m+y.length)}}class J{constructor(m,y,N,C){if(this.width=m,this.height=y,this.rowSize=N,this.bits=C,y==null&&(y=m),this.height=y,m<1||y<1)throw new h("Both dimensions must be greater than 0");N==null&&(N=Math.floor((m+31)/32)),this.rowSize=N,C==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(m){const y=m.length,N=m[0].length,C=new J(N,y);for(let M=0;M<y;M++){const L=m[M];for(let _=0;_<N;_++)L[_]&&C.set(_,M)}return C}static parseFromString(m,y,N){if(m===null)throw new h("stringRepresentation cannot be null");const C=new Array(m.length);let M=0,L=0,_=-1,A=0,O=0;for(;O<m.length;)if(m.charAt(O)===`
`||m.charAt(O)==="\r"){if(M>L){if(_===-1)_=M-L;else if(M-L!==_)throw new h("row lengths do not match");L=M,A++}O++}else if(m.substring(O,O+y.length)===y)O+=y.length,C[M]=!0,M++;else if(m.substring(O,O+N.length)===N)O+=N.length,C[M]=!1,M++;else throw new h("illegal character encountered: "+m.substring(O));if(M>L){if(_===-1)_=M-L;else if(M-L!==_)throw new h("row lengths do not match");A++}const z=new J(_,A);for(let Y=0;Y<M;Y++)C[Y]&&z.set(Math.floor(Y%_),Math.floor(Y/_));return z}get(m,y){const N=y*this.rowSize+Math.floor(m/32);return(this.bits[N]>>>(m&31)&1)!==0}set(m,y){const N=y*this.rowSize+Math.floor(m/32);this.bits[N]|=1<<(m&31)&4294967295}unset(m,y){const N=y*this.rowSize+Math.floor(m/32);this.bits[N]&=~(1<<(m&31)&4294967295)}flip(m,y){const N=y*this.rowSize+Math.floor(m/32);this.bits[N]^=1<<(m&31)&4294967295}xor(m){if(this.width!==m.getWidth()||this.height!==m.getHeight()||this.rowSize!==m.getRowSize())throw new h("input matrix dimensions do not match");const y=new E(Math.floor(this.width/32)+1),N=this.rowSize,C=this.bits;for(let M=0,L=this.height;M<L;M++){const _=M*N,A=m.getRow(M,y).getBitArray();for(let O=0;O<N;O++)C[_+O]^=A[O]}}clear(){const m=this.bits,y=m.length;for(let N=0;N<y;N++)m[N]=0}setRegion(m,y,N,C){if(y<0||m<0)throw new h("Left and top must be nonnegative");if(C<1||N<1)throw new h("Height and width must be at least 1");const M=m+N,L=y+C;if(L>this.height||M>this.width)throw new h("The region must fit inside the matrix");const _=this.rowSize,A=this.bits;for(let O=y;O<L;O++){const z=O*_;for(let Y=m;Y<M;Y++)A[z+Math.floor(Y/32)]|=1<<(Y&31)&4294967295}}getRow(m,y){y==null||y.getSize()<this.width?y=new E(this.width):y.clear();const N=this.rowSize,C=this.bits,M=m*N;for(let L=0;L<N;L++)y.setBulk(L*32,C[M+L]);return y}setRow(m,y){b.arraycopy(y.getBitArray(),0,this.bits,m*this.rowSize,this.rowSize)}rotate180(){const m=this.getWidth(),y=this.getHeight();let N=new E(m),C=new E(m);for(let M=0,L=Math.floor((y+1)/2);M<L;M++)N=this.getRow(M,N),C=this.getRow(y-1-M,C),N.reverse(),C.reverse(),this.setRow(M,C),this.setRow(y-1-M,N)}getEnclosingRectangle(){const m=this.width,y=this.height,N=this.rowSize,C=this.bits;let M=m,L=y,_=-1,A=-1;for(let O=0;O<y;O++)for(let z=0;z<N;z++){const Y=C[O*N+z];if(Y!==0){if(O<L&&(L=O),O>A&&(A=O),z*32<M){let ee=0;for(;(Y<<31-ee&4294967295)===0;)ee++;z*32+ee<M&&(M=z*32+ee)}if(z*32+31>_){let ee=31;for(;!(Y>>>ee);)ee--;z*32+ee>_&&(_=z*32+ee)}}}return _<M||A<L?null:Int32Array.from([M,L,_-M+1,A-L+1])}getTopLeftOnBit(){const m=this.rowSize,y=this.bits;let N=0;for(;N<y.length&&y[N]===0;)N++;if(N===y.length)return null;const C=N/m;let M=N%m*32;const L=y[N];let _=0;for(;(L<<31-_&4294967295)===0;)_++;return M+=_,Int32Array.from([M,C])}getBottomRightOnBit(){const m=this.rowSize,y=this.bits;let N=y.length-1;for(;N>=0&&y[N]===0;)N--;if(N<0)return null;const C=Math.floor(N/m);let M=Math.floor(N%m)*32;const L=y[N];let _=31;for(;!(L>>>_);)_--;return M+=_,Int32Array.from([M,C])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(m){if(!(m instanceof J))return!1;const y=m;return this.width===y.width&&this.height===y.height&&this.rowSize===y.rowSize&&k.equals(this.bits,y.bits)}hashCode(){let m=this.width;return m=31*m+this.width,m=31*m+this.height,m=31*m+this.rowSize,m=31*m+k.hashCode(this.bits),m}toString(m="X ",y="  ",N=`
`){return this.buildToString(m,y,N)}buildToString(m,y,N){let C=new Z;for(let M=0,L=this.height;M<L;M++){for(let _=0,A=this.width;_<A;_++)C.append(this.get(_,M)?m:y);C.append(N)}return C.toString()}clone(){return new J(this.width,this.height,this.rowSize,this.bits.slice())}}class B extends d{static getNotFoundInstance(){return new B}}B.kind="NotFoundException";class W extends g{constructor(m){super(m),this.luminances=W.EMPTY,this.buckets=new Int32Array(W.LUMINANCE_BUCKETS)}getBlackRow(m,y){const N=this.getLuminanceSource(),C=N.getWidth();y==null||y.getSize()<C?y=new E(C):y.clear(),this.initArrays(C);const M=N.getRow(m,this.luminances),L=this.buckets;for(let A=0;A<C;A++)L[(M[A]&255)>>W.LUMINANCE_SHIFT]++;const _=W.estimateBlackPoint(L);if(C<3)for(let A=0;A<C;A++)(M[A]&255)<_&&y.set(A);else{let A=M[0]&255,O=M[1]&255;for(let z=1;z<C-1;z++){const Y=M[z+1]&255;(O*4-A-Y)/2<_&&y.set(z),A=O,O=Y}}return y}getBlackMatrix(){const m=this.getLuminanceSource(),y=m.getWidth(),N=m.getHeight(),C=new J(y,N);this.initArrays(y);const M=this.buckets;for(let A=1;A<5;A++){const O=Math.floor(N*A/5),z=m.getRow(O,this.luminances),Y=Math.floor(y*4/5);for(let ee=Math.floor(y/5);ee<Y;ee++){const ie=z[ee]&255;M[ie>>W.LUMINANCE_SHIFT]++}}const L=W.estimateBlackPoint(M),_=m.getMatrix();for(let A=0;A<N;A++){const O=A*y;for(let z=0;z<y;z++)(_[O+z]&255)<L&&C.set(z,A)}return C}createBinarizer(m){return new W(m)}initArrays(m){this.luminances.length<m&&(this.luminances=new Uint8ClampedArray(m));const y=this.buckets;for(let N=0;N<W.LUMINANCE_BUCKETS;N++)y[N]=0}static estimateBlackPoint(m){const y=m.length;let N=0,C=0,M=0;for(let z=0;z<y;z++)m[z]>M&&(C=z,M=m[z]),m[z]>N&&(N=m[z]);let L=0,_=0;for(let z=0;z<y;z++){const Y=z-C,ee=m[z]*Y*Y;ee>_&&(L=z,_=ee)}if(C>L){const z=C;C=L,L=z}if(L-C<=y/16)throw new B;let A=L-1,O=-1;for(let z=L-1;z>C;z--){const Y=z-C,ee=Y*Y*(L-z)*(N-m[z]);ee>O&&(A=z,O=ee)}return A<<W.LUMINANCE_SHIFT}}W.LUMINANCE_BITS=5,W.LUMINANCE_SHIFT=8-W.LUMINANCE_BITS,W.LUMINANCE_BUCKETS=1<<W.LUMINANCE_BITS,W.EMPTY=Uint8ClampedArray.from([0]);class $ extends W{constructor(m){super(m),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const m=this.getLuminanceSource(),y=m.getWidth(),N=m.getHeight();if(y>=$.MINIMUM_DIMENSION&&N>=$.MINIMUM_DIMENSION){const C=m.getMatrix();let M=y>>$.BLOCK_SIZE_POWER;(y&$.BLOCK_SIZE_MASK)!==0&&M++;let L=N>>$.BLOCK_SIZE_POWER;(N&$.BLOCK_SIZE_MASK)!==0&&L++;const _=$.calculateBlackPoints(C,M,L,y,N),A=new J(y,N);$.calculateThresholdForBlock(C,M,L,y,N,_,A),this.matrix=A}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(m){return new $(m)}static calculateThresholdForBlock(m,y,N,C,M,L,_){const A=M-$.BLOCK_SIZE,O=C-$.BLOCK_SIZE;for(let z=0;z<N;z++){let Y=z<<$.BLOCK_SIZE_POWER;Y>A&&(Y=A);const ee=$.cap(z,2,N-3);for(let ie=0;ie<y;ie++){let oe=ie<<$.BLOCK_SIZE_POWER;oe>O&&(oe=O);const fe=$.cap(ie,2,y-3);let ge=0;for(let ve=-2;ve<=2;ve++){const we=L[ee+ve];ge+=we[fe-2]+we[fe-1]+we[fe]+we[fe+1]+we[fe+2]}const me=ge/25;$.thresholdBlock(m,oe,Y,me,C,_)}}}static cap(m,y,N){return m<y?y:m>N?N:m}static thresholdBlock(m,y,N,C,M,L){for(let _=0,A=N*M+y;_<$.BLOCK_SIZE;_++,A+=M)for(let O=0;O<$.BLOCK_SIZE;O++)(m[A+O]&255)<=C&&L.set(y+O,N+_)}static calculateBlackPoints(m,y,N,C,M){const L=M-$.BLOCK_SIZE,_=C-$.BLOCK_SIZE,A=new Array(N);for(let O=0;O<N;O++){A[O]=new Int32Array(y);let z=O<<$.BLOCK_SIZE_POWER;z>L&&(z=L);for(let Y=0;Y<y;Y++){let ee=Y<<$.BLOCK_SIZE_POWER;ee>_&&(ee=_);let ie=0,oe=255,fe=0;for(let me=0,ve=z*C+ee;me<$.BLOCK_SIZE;me++,ve+=C){for(let we=0;we<$.BLOCK_SIZE;we++){const be=m[ve+we]&255;ie+=be,be<oe&&(oe=be),be>fe&&(fe=be)}if(fe-oe>$.MIN_DYNAMIC_RANGE)for(me++,ve+=C;me<$.BLOCK_SIZE;me++,ve+=C)for(let we=0;we<$.BLOCK_SIZE;we++)ie+=m[ve+we]&255}let ge=ie>>$.BLOCK_SIZE_POWER*2;if(fe-oe<=$.MIN_DYNAMIC_RANGE&&(ge=oe/2,O>0&&Y>0)){const me=(A[O-1][Y]+2*A[O][Y-1]+A[O-1][Y-1])/4;oe<me&&(ge=me)}A[O][Y]=ge}}return A}}$.BLOCK_SIZE_POWER=3,$.BLOCK_SIZE=1<<$.BLOCK_SIZE_POWER,$.BLOCK_SIZE_MASK=$.BLOCK_SIZE-1,$.MINIMUM_DIMENSION=$.BLOCK_SIZE*5,$.MIN_DYNAMIC_RANGE=24;class Q{constructor(m,y){this.width=m,this.height=y}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(m,y,N,C){throw new X("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new X("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new X("This luminance source does not support rotation by 45 degrees.")}toString(){const m=new Uint8ClampedArray(this.width);let y=new Z;for(let N=0;N<this.height;N++){const C=this.getRow(N,m);for(let M=0;M<this.width;M++){const L=C[M]&255;let _;L<64?_="#":L<128?_="+":L<192?_=".":_=" ",y.append(_)}y.append(`
`)}return y.toString()}}class ne extends Q{constructor(m){super(m.getWidth(),m.getHeight()),this.delegate=m}getRow(m,y){const N=this.delegate.getRow(m,y),C=this.getWidth();for(let M=0;M<C;M++)N[M]=255-(N[M]&255);return N}getMatrix(){const m=this.delegate.getMatrix(),y=this.getWidth()*this.getHeight(),N=new Uint8ClampedArray(y);for(let C=0;C<y;C++)N[C]=255-(m[C]&255);return N}isCropSupported(){return this.delegate.isCropSupported()}crop(m,y,N,C){return new ne(this.delegate.crop(m,y,N,C))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ne(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ne(this.delegate.rotateCounterClockwise45())}}class re extends Q{constructor(m){super(m.width,m.height),this.canvas=m,this.tempCanvasElement=null,this.buffer=re.makeBufferFromCanvasImageData(m)}static makeBufferFromCanvasImageData(m){const y=m.getContext("2d").getImageData(0,0,m.width,m.height);return re.toGrayscaleBuffer(y.data,m.width,m.height)}static toGrayscaleBuffer(m,y,N){const C=new Uint8ClampedArray(y*N);for(let M=0,L=0,_=m.length;M<_;M+=4,L++){let A;if(m[M+3]===0)A=255;else{const z=m[M],Y=m[M+1],ee=m[M+2];A=306*z+601*Y+117*ee+512>>10}C[L]=A}return C}getRow(m,y){if(m<0||m>=this.getHeight())throw new h("Requested row is outside the image: "+m);const N=this.getWidth(),C=m*N;return y===null?y=this.buffer.slice(C,C+N):(y.length<N&&(y=new Uint8ClampedArray(N)),y.set(this.buffer.slice(C,C+N))),y}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(m,y,N,C){return super.crop(m,y,N,C),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const m=this.canvas.ownerDocument.createElement("canvas");m.width=this.canvas.width,m.height=this.canvas.height,this.tempCanvasElement=m}return this.tempCanvasElement}rotate(m){const y=this.getTempCanvasElement(),N=y.getContext("2d"),C=m*re.DEGREE_TO_RADIANS,M=this.canvas.width,L=this.canvas.height,_=Math.ceil(Math.abs(Math.cos(C))*M+Math.abs(Math.sin(C))*L),A=Math.ceil(Math.abs(Math.sin(C))*M+Math.abs(Math.cos(C))*L);return y.width=_,y.height=A,N.translate(_/2,A/2),N.rotate(C),N.drawImage(this.canvas,M/-2,L/-2),this.buffer=re.makeBufferFromCanvasImageData(y),this}invert(){return new ne(this)}}re.DEGREE_TO_RADIANS=Math.PI/180;class K{constructor(m,y,N){this.deviceId=m,this.label=y,this.kind="videoinput",this.groupId=N||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ae=(globalThis||Ag||self||window||void 0)&&(globalThis||Ag||self||window||void 0).__awaiter||function(ue,m,y,N){function C(M){return M instanceof y?M:new y(function(L){L(M)})}return new(y||(y=Promise))(function(M,L){function _(z){try{O(N.next(z))}catch(Y){L(Y)}}function A(z){try{O(N.throw(z))}catch(Y){L(Y)}}function O(z){z.done?M(z.value):C(z.value).then(_,A)}O((N=N.apply(ue,m||[])).next())})};class ce{constructor(m,y=500,N){this.reader=m,this.timeBetweenScansMillis=y,this._hints=N,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(m){this._timeBetweenDecodingAttempts=m<0?0:m}set hints(m){this._hints=m||null}get hints(){return this._hints}listVideoInputDevices(){return ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const m=yield navigator.mediaDevices.enumerateDevices(),y=[];for(const N of m){const C=N.kind==="video"?"videoinput":N.kind;if(C!=="videoinput")continue;const M=N.deviceId||N.id,L=N.label||`Video device ${y.length+1}`,_=N.groupId,A={deviceId:M,label:L,kind:C,groupId:_};y.push(A)}return y})}getVideoInputDevices(){return ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(y=>new K(y.deviceId,y.label))})}findDeviceById(m){return ae(this,void 0,void 0,function*(){const y=yield this.listVideoInputDevices();return y?y.find(N=>N.deviceId===m):null})}decodeFromInputVideoDevice(m,y){return ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(m,y)})}decodeOnceFromVideoDevice(m,y){return ae(this,void 0,void 0,function*(){this.reset();let N;m?N={deviceId:{exact:m}}:N={facingMode:"environment"};const C={video:N};return yield this.decodeOnceFromConstraints(C,y)})}decodeOnceFromConstraints(m,y){return ae(this,void 0,void 0,function*(){const N=yield navigator.mediaDevices.getUserMedia(m);return yield this.decodeOnceFromStream(N,y)})}decodeOnceFromStream(m,y){return ae(this,void 0,void 0,function*(){this.reset();const N=yield this.attachStreamToVideo(m,y);return yield this.decodeOnce(N)})}decodeFromInputVideoDeviceContinuously(m,y,N){return ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(m,y,N)})}decodeFromVideoDevice(m,y,N){return ae(this,void 0,void 0,function*(){let C;m?C={deviceId:{exact:m}}:C={facingMode:"environment"};const M={video:C};return yield this.decodeFromConstraints(M,y,N)})}decodeFromConstraints(m,y,N){return ae(this,void 0,void 0,function*(){const C=yield navigator.mediaDevices.getUserMedia(m);return yield this.decodeFromStream(C,y,N)})}decodeFromStream(m,y,N){return ae(this,void 0,void 0,function*(){this.reset();const C=yield this.attachStreamToVideo(m,y);return yield this.decodeContinuously(C,N)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(m,y){return ae(this,void 0,void 0,function*(){const N=this.prepareVideoElement(y);return this.addVideoSource(N,m),this.videoElement=N,this.stream=m,yield this.playVideoOnLoadAsync(N),N})}playVideoOnLoadAsync(m){return new Promise((y,N)=>this.playVideoOnLoad(m,()=>y()))}playVideoOnLoad(m,y){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(m),m.addEventListener("ended",this.videoEndedListener),m.addEventListener("canplay",this.videoCanPlayListener),m.addEventListener("playing",y),this.tryPlayVideo(m)}isVideoPlaying(m){return m.currentTime>0&&!m.paused&&!m.ended&&m.readyState>2}tryPlayVideo(m){return ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(m)){console.warn("Trying to play video that is already playing.");return}try{yield m.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(m,y){const N=document.getElementById(m);if(!N)throw new u(`element with id '${m}' not found`);if(N.nodeName.toLowerCase()!==y.toLowerCase())throw new u(`element with id '${m}' must be an ${y} element`);return N}decodeFromImage(m,y){if(!m&&!y)throw new u("either imageElement with a src set or an url must be provided");return y&&!m?this.decodeFromImageUrl(y):this.decodeFromImageElement(m)}decodeFromVideo(m,y){if(!m&&!y)throw new u("Either an element with a src set or an URL must be provided");return y&&!m?this.decodeFromVideoUrl(y):this.decodeFromVideoElement(m)}decodeFromVideoContinuously(m,y,N){if(m===void 0&&y===void 0)throw new u("Either an element with a src set or an URL must be provided");return y&&!m?this.decodeFromVideoUrlContinuously(y,N):this.decodeFromVideoElementContinuously(m,N)}decodeFromImageElement(m){if(!m)throw new u("An image element must be provided.");this.reset();const y=this.prepareImageElement(m);this.imageElement=y;let N;return this.isImageLoaded(y)?N=this.decodeOnce(y,!1,!0):N=this._decodeOnLoadImage(y),N}decodeFromVideoElement(m){const y=this._decodeFromVideoElementSetup(m);return this._decodeOnLoadVideo(y)}decodeFromVideoElementContinuously(m,y){const N=this._decodeFromVideoElementSetup(m);return this._decodeOnLoadVideoContinuously(N,y)}_decodeFromVideoElementSetup(m){if(!m)throw new u("A video element must be provided.");this.reset();const y=this.prepareVideoElement(m);return this.videoElement=y,y}decodeFromImageUrl(m){if(!m)throw new u("An URL must be provided.");this.reset();const y=this.prepareImageElement();this.imageElement=y;const N=this._decodeOnLoadImage(y);return y.src=m,N}decodeFromVideoUrl(m){if(!m)throw new u("An URL must be provided.");this.reset();const y=this.prepareVideoElement(),N=this.decodeFromVideoElement(y);return y.src=m,N}decodeFromVideoUrlContinuously(m,y){if(!m)throw new u("An URL must be provided.");this.reset();const N=this.prepareVideoElement(),C=this.decodeFromVideoElementContinuously(N,y);return N.src=m,C}_decodeOnLoadImage(m){return new Promise((y,N)=>{this.imageLoadedListener=()=>this.decodeOnce(m,!1,!0).then(y,N),m.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(m){return ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(m),yield this.decodeOnce(m)})}_decodeOnLoadVideoContinuously(m,y){return ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(m),this.decodeContinuously(m,y)})}isImageLoaded(m){return!(!m.complete||m.naturalWidth===0)}prepareImageElement(m){let y;return typeof m>"u"&&(y=document.createElement("img"),y.width=200,y.height=200),typeof m=="string"&&(y=this.getMediaElement(m,"img")),m instanceof HTMLImageElement&&(y=m),y}prepareVideoElement(m){let y;return!m&&typeof document<"u"&&(y=document.createElement("video"),y.width=200,y.height=200),typeof m=="string"&&(y=this.getMediaElement(m,"video")),m instanceof HTMLVideoElement&&(y=m),y.setAttribute("autoplay","true"),y.setAttribute("muted","true"),y.setAttribute("playsinline","true"),y}decodeOnce(m,y=!0,N=!0){this._stopAsyncDecode=!1;const C=(M,L)=>{if(this._stopAsyncDecode){L(new B("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const _=this.decode(m);M(_)}catch(_){const A=y&&_ instanceof B,z=(_ instanceof p||_ instanceof P)&&N;if(A||z)return setTimeout(C,this._timeBetweenDecodingAttempts,M,L);L(_)}};return new Promise((M,L)=>C(M,L))}decodeContinuously(m,y){this._stopContinuousDecode=!1;const N=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const C=this.decode(m);y(C,null),setTimeout(N,this.timeBetweenScansMillis)}catch(C){y(null,C);const M=C instanceof p||C instanceof P,L=C instanceof B;(M||L)&&setTimeout(N,this._timeBetweenDecodingAttempts)}};N()}decode(m){const y=this.createBinaryBitmap(m);return this.decodeBitmap(y)}_isHTMLVideoElement(m){return m.videoWidth!==0}drawFrameOnCanvas(m,y,N){y||(y={sx:0,sy:0,sWidth:m.videoWidth,sHeight:m.videoHeight,dx:0,dy:0,dWidth:m.videoWidth,dHeight:m.videoHeight}),N||(N=this.captureCanvasContext),N.drawImage(m,y.sx,y.sy,y.sWidth,y.sHeight,y.dx,y.dy,y.dWidth,y.dHeight)}drawImageOnCanvas(m,y,N=this.captureCanvasContext){y||(y={sx:0,sy:0,sWidth:m.naturalWidth,sHeight:m.naturalHeight,dx:0,dy:0,dWidth:m.naturalWidth,dHeight:m.naturalHeight}),N||(N=this.captureCanvasContext),N.drawImage(m,y.sx,y.sy,y.sWidth,y.sHeight,y.dx,y.dy,y.dWidth,y.dHeight)}createBinaryBitmap(m){this.getCaptureCanvasContext(m),this._isHTMLVideoElement(m)?this.drawFrameOnCanvas(m):this.drawImageOnCanvas(m);const y=this.getCaptureCanvas(m),N=new re(y),C=new $(N);return new f(C)}getCaptureCanvasContext(m){if(!this.captureCanvasContext){const N=this.getCaptureCanvas(m).getContext("2d");this.captureCanvasContext=N}return this.captureCanvasContext}getCaptureCanvas(m){if(!this.captureCanvas){const y=this.createCaptureCanvas(m);this.captureCanvas=y}return this.captureCanvas}decodeBitmap(m){return this.reader.decode(m,this._hints)}createCaptureCanvas(m){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const y=document.createElement("canvas");let N,C;return typeof m<"u"&&(m instanceof HTMLVideoElement?(N=m.videoWidth,C=m.videoHeight):m instanceof HTMLImageElement&&(N=m.naturalWidth||m.width,C=m.naturalHeight||m.height)),y.style.width=N+"px",y.style.height=C+"px",y.width=N,y.height=C,y}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(m=>m.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(m,y){try{m.srcObject=y}catch{m.src=URL.createObjectURL(y)}}cleanVideoSource(m){try{m.srcObject=null}catch{m.src=""}this.videoElement.removeAttribute("src")}}class de{constructor(m,y,N=y==null?0:8*y.length,C,M,L=b.currentTimeMillis()){this.text=m,this.rawBytes=y,this.numBits=N,this.resultPoints=C,this.format=M,this.timestamp=L,this.text=m,this.rawBytes=y,N==null?this.numBits=y==null?0:8*y.length:this.numBits=N,this.resultPoints=C,this.format=M,this.resultMetadata=null,L==null?this.timestamp=b.currentTimeMillis():this.timestamp=L}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(m,y){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(m,y)}putAllMetadata(m){m!==null&&(this.resultMetadata===null?this.resultMetadata=m:this.resultMetadata=new Map(m))}addResultPoints(m){const y=this.resultPoints;if(y===null)this.resultPoints=m;else if(m!==null&&m.length>0){const N=new Array(y.length+m.length);b.arraycopy(y,0,N,0,y.length),b.arraycopy(m,0,N,y.length,m.length),this.resultPoints=N}}getTimestamp(){return this.timestamp}toString(){return this.text}}var he;(function(ue){ue[ue.AZTEC=0]="AZTEC",ue[ue.CODABAR=1]="CODABAR",ue[ue.CODE_39=2]="CODE_39",ue[ue.CODE_93=3]="CODE_93",ue[ue.CODE_128=4]="CODE_128",ue[ue.DATA_MATRIX=5]="DATA_MATRIX",ue[ue.EAN_8=6]="EAN_8",ue[ue.EAN_13=7]="EAN_13",ue[ue.ITF=8]="ITF",ue[ue.MAXICODE=9]="MAXICODE",ue[ue.PDF_417=10]="PDF_417",ue[ue.QR_CODE=11]="QR_CODE",ue[ue.RSS_14=12]="RSS_14",ue[ue.RSS_EXPANDED=13]="RSS_EXPANDED",ue[ue.UPC_A=14]="UPC_A",ue[ue.UPC_E=15]="UPC_E",ue[ue.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(he||(he={}));var pe=he,Re;(function(ue){ue[ue.OTHER=0]="OTHER",ue[ue.ORIENTATION=1]="ORIENTATION",ue[ue.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",ue[ue.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",ue[ue.ISSUE_NUMBER=4]="ISSUE_NUMBER",ue[ue.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",ue[ue.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",ue[ue.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",ue[ue.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",ue[ue.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",ue[ue.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Re||(Re={}));var Te=Re;class ke{constructor(m,y,N,C,M=-1,L=-1){this.rawBytes=m,this.text=y,this.byteSegments=N,this.ecLevel=C,this.structuredAppendSequenceNumber=M,this.structuredAppendParity=L,this.numBits=m==null?0:8*m.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(m){this.numBits=m}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(m){this.errorsCorrected=m}getErasures(){return this.erasures}setErasures(m){this.erasures=m}getOther(){return this.other}setOther(m){this.other=m}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Le{exp(m){return this.expTable[m]}log(m){if(m===0)throw new h;return this.logTable[m]}static addOrSubtract(m,y){return m^y}}class Ne{constructor(m,y){if(y.length===0)throw new h;this.field=m;const N=y.length;if(N>1&&y[0]===0){let C=1;for(;C<N&&y[C]===0;)C++;C===N?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(N-C),b.arraycopy(y,C,this.coefficients,0,this.coefficients.length))}else this.coefficients=y}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(m){return this.coefficients[this.coefficients.length-1-m]}evaluateAt(m){if(m===0)return this.getCoefficient(0);const y=this.coefficients;let N;if(m===1){N=0;for(let L=0,_=y.length;L!==_;L++){const A=y[L];N=Le.addOrSubtract(N,A)}return N}N=y[0];const C=y.length,M=this.field;for(let L=1;L<C;L++)N=Le.addOrSubtract(M.multiply(m,N),y[L]);return N}addOrSubtract(m){if(!this.field.equals(m.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero())return m;if(m.isZero())return this;let y=this.coefficients,N=m.coefficients;if(y.length>N.length){const L=y;y=N,N=L}let C=new Int32Array(N.length);const M=N.length-y.length;b.arraycopy(N,0,C,0,M);for(let L=M;L<N.length;L++)C[L]=Le.addOrSubtract(y[L-M],N[L]);return new Ne(this.field,C)}multiply(m){if(!this.field.equals(m.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero()||m.isZero())return this.field.getZero();const y=this.coefficients,N=y.length,C=m.coefficients,M=C.length,L=new Int32Array(N+M-1),_=this.field;for(let A=0;A<N;A++){const O=y[A];for(let z=0;z<M;z++)L[A+z]=Le.addOrSubtract(L[A+z],_.multiply(O,C[z]))}return new Ne(_,L)}multiplyScalar(m){if(m===0)return this.field.getZero();if(m===1)return this;const y=this.coefficients.length,N=this.field,C=new Int32Array(y),M=this.coefficients;for(let L=0;L<y;L++)C[L]=N.multiply(M[L],m);return new Ne(N,C)}multiplyByMonomial(m,y){if(m<0)throw new h;if(y===0)return this.field.getZero();const N=this.coefficients,C=N.length,M=new Int32Array(C+m),L=this.field;for(let _=0;_<C;_++)M[_]=L.multiply(N[_],y);return new Ne(L,M)}divide(m){if(!this.field.equals(m.field))throw new h("GenericGFPolys do not have same GenericGF field");if(m.isZero())throw new h("Divide by 0");const y=this.field;let N=y.getZero(),C=this;const M=m.getCoefficient(m.getDegree()),L=y.inverse(M);for(;C.getDegree()>=m.getDegree()&&!C.isZero();){const _=C.getDegree()-m.getDegree(),A=y.multiply(C.getCoefficient(C.getDegree()),L),O=m.multiplyByMonomial(_,A),z=y.buildMonomial(_,A);N=N.addOrSubtract(z),C=C.addOrSubtract(O)}return[N,C]}toString(){let m="";for(let y=this.getDegree();y>=0;y--){let N=this.getCoefficient(y);if(N!==0){if(N<0?(m+=" - ",N=-N):m.length>0&&(m+=" + "),y===0||N!==1){const C=this.field.log(N);C===0?m+="1":C===1?m+="a":(m+="a^",m+=C)}y!==0&&(y===1?m+="x":(m+="x^",m+=y))}}return m}}class _e extends d{}_e.kind="ArithmeticException";class Oe extends Le{constructor(m,y,N){super(),this.primitive=m,this.size=y,this.generatorBase=N;const C=new Int32Array(y);let M=1;for(let _=0;_<y;_++)C[_]=M,M*=2,M>=y&&(M^=m,M&=y-1);this.expTable=C;const L=new Int32Array(y);for(let _=0;_<y-1;_++)L[C[_]]=_;this.logTable=L,this.zero=new Ne(this,Int32Array.from([0])),this.one=new Ne(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(m,y){if(m<0)throw new h;if(y===0)return this.zero;const N=new Int32Array(m+1);return N[0]=y,new Ne(this,N)}inverse(m){if(m===0)throw new _e;return this.expTable[this.size-this.logTable[m]-1]}multiply(m,y){return m===0||y===0?0:this.expTable[(this.logTable[m]+this.logTable[y])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+T.toHexString(this.primitive)+","+this.size+")"}equals(m){return m===this}}Oe.AZTEC_DATA_12=new Oe(4201,4096,1),Oe.AZTEC_DATA_10=new Oe(1033,1024,1),Oe.AZTEC_DATA_6=new Oe(67,64,1),Oe.AZTEC_PARAM=new Oe(19,16,1),Oe.QR_CODE_FIELD_256=new Oe(285,256,0),Oe.DATA_MATRIX_FIELD_256=new Oe(301,256,1),Oe.AZTEC_DATA_8=Oe.DATA_MATRIX_FIELD_256,Oe.MAXICODE_FIELD_64=Oe.AZTEC_DATA_6;class De extends d{}De.kind="ReedSolomonException";class Ge extends d{}Ge.kind="IllegalStateException";class Ee{constructor(m){this.field=m}decode(m,y){const N=this.field,C=new Ne(N,m),M=new Int32Array(y);let L=!0;for(let ie=0;ie<y;ie++){const oe=C.evaluateAt(N.exp(ie+N.getGeneratorBase()));M[M.length-1-ie]=oe,oe!==0&&(L=!1)}if(L)return;const _=new Ne(N,M),A=this.runEuclideanAlgorithm(N.buildMonomial(y,1),_,y),O=A[0],z=A[1],Y=this.findErrorLocations(O),ee=this.findErrorMagnitudes(z,Y);for(let ie=0;ie<Y.length;ie++){const oe=m.length-1-N.log(Y[ie]);if(oe<0)throw new De("Bad error location");m[oe]=Oe.addOrSubtract(m[oe],ee[ie])}}runEuclideanAlgorithm(m,y,N){if(m.getDegree()<y.getDegree()){const ie=m;m=y,y=ie}const C=this.field;let M=m,L=y,_=C.getZero(),A=C.getOne();for(;L.getDegree()>=(N/2|0);){let ie=M,oe=_;if(M=L,_=A,M.isZero())throw new De("r_{i-1} was zero");L=ie;let fe=C.getZero();const ge=M.getCoefficient(M.getDegree()),me=C.inverse(ge);for(;L.getDegree()>=M.getDegree()&&!L.isZero();){const ve=L.getDegree()-M.getDegree(),we=C.multiply(L.getCoefficient(L.getDegree()),me);fe=fe.addOrSubtract(C.buildMonomial(ve,we)),L=L.addOrSubtract(M.multiplyByMonomial(ve,we))}if(A=fe.multiply(_).addOrSubtract(oe),L.getDegree()>=M.getDegree())throw new Ge("Division algorithm failed to reduce polynomial?")}const O=A.getCoefficient(0);if(O===0)throw new De("sigmaTilde(0) was zero");const z=C.inverse(O),Y=A.multiplyScalar(z),ee=L.multiplyScalar(z);return[Y,ee]}findErrorLocations(m){const y=m.getDegree();if(y===1)return Int32Array.from([m.getCoefficient(1)]);const N=new Int32Array(y);let C=0;const M=this.field;for(let L=1;L<M.getSize()&&C<y;L++)m.evaluateAt(L)===0&&(N[C]=M.inverse(L),C++);if(C!==y)throw new De("Error locator degree does not match number of roots");return N}findErrorMagnitudes(m,y){const N=y.length,C=new Int32Array(N),M=this.field;for(let L=0;L<N;L++){const _=M.inverse(y[L]);let A=1;for(let O=0;O<N;O++)if(L!==O){const z=M.multiply(y[O],_),Y=(z&1)===0?z|1:z&-2;A=M.multiply(A,Y)}C[L]=M.multiply(m.evaluateAt(_),M.inverse(A)),M.getGeneratorBase()!==0&&(C[L]=M.multiply(C[L],_))}return C}}var rt;(function(ue){ue[ue.UPPER=0]="UPPER",ue[ue.LOWER=1]="LOWER",ue[ue.MIXED=2]="MIXED",ue[ue.DIGIT=3]="DIGIT",ue[ue.PUNCT=4]="PUNCT",ue[ue.BINARY=5]="BINARY"})(rt||(rt={}));class dt{decode(m){this.ddata=m;let y=m.getBits(),N=this.extractBits(y),C=this.correctBits(N),M=dt.convertBoolArrayToByteArray(C),L=dt.getEncodedData(C),_=new ke(M,L,null,null);return _.setNumBits(C.length),_}static highLevelDecode(m){return this.getEncodedData(m)}static getEncodedData(m){let y=m.length,N=rt.UPPER,C=rt.UPPER,M="",L=0;for(;L<y;)if(C===rt.BINARY){if(y-L<5)break;let _=dt.readCode(m,L,5);if(L+=5,_===0){if(y-L<11)break;_=dt.readCode(m,L,11)+31,L+=11}for(let A=0;A<_;A++){if(y-L<8){L=y;break}const O=dt.readCode(m,L,8);M+=te.castAsNonUtf8Char(O),L+=8}C=N}else{let _=C===rt.DIGIT?4:5;if(y-L<_)break;let A=dt.readCode(m,L,_);L+=_;let O=dt.getCharacter(C,A);O.startsWith("CTRL_")?(N=C,C=dt.getTable(O.charAt(5)),O.charAt(6)==="L"&&(N=C)):(M+=O,C=N)}return M}static getTable(m){switch(m){case"L":return rt.LOWER;case"P":return rt.PUNCT;case"M":return rt.MIXED;case"D":return rt.DIGIT;case"B":return rt.BINARY;default:return rt.UPPER}}static getCharacter(m,y){switch(m){case rt.UPPER:return dt.UPPER_TABLE[y];case rt.LOWER:return dt.LOWER_TABLE[y];case rt.MIXED:return dt.MIXED_TABLE[y];case rt.PUNCT:return dt.PUNCT_TABLE[y];case rt.DIGIT:return dt.DIGIT_TABLE[y];default:throw new Ge("Bad table")}}correctBits(m){let y,N;this.ddata.getNbLayers()<=2?(N=6,y=Oe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(N=8,y=Oe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(N=10,y=Oe.AZTEC_DATA_10):(N=12,y=Oe.AZTEC_DATA_12);let C=this.ddata.getNbDatablocks(),M=m.length/N;if(M<C)throw new P;let L=m.length%N,_=new Int32Array(M);for(let ee=0;ee<M;ee++,L+=N)_[ee]=dt.readCode(m,L,N);try{new Ee(y).decode(_,M-C)}catch(ee){throw new P(ee)}let A=(1<<N)-1,O=0;for(let ee=0;ee<C;ee++){let ie=_[ee];if(ie===0||ie===A)throw new P;(ie===1||ie===A-1)&&O++}let z=new Array(C*N-O),Y=0;for(let ee=0;ee<C;ee++){let ie=_[ee];if(ie===1||ie===A-1)z.fill(ie>1,Y,Y+N-1),Y+=N-1;else for(let oe=N-1;oe>=0;--oe)z[Y++]=(ie&1<<oe)!==0}return z}extractBits(m){let y=this.ddata.isCompact(),N=this.ddata.getNbLayers(),C=(y?11:14)+N*4,M=new Int32Array(C),L=new Array(this.totalBitsInLayer(N,y));if(y)for(let _=0;_<M.length;_++)M[_]=_;else{let _=C+1+2*T.truncDivision(T.truncDivision(C,2)-1,15),A=C/2,O=T.truncDivision(_,2);for(let z=0;z<A;z++){let Y=z+T.truncDivision(z,15);M[A-z-1]=O-Y-1,M[A+z]=O+Y+1}}for(let _=0,A=0;_<N;_++){let O=(N-_)*4+(y?9:12),z=_*2,Y=C-1-z;for(let ee=0;ee<O;ee++){let ie=ee*2;for(let oe=0;oe<2;oe++)L[A+ie+oe]=m.get(M[z+oe],M[z+ee]),L[A+2*O+ie+oe]=m.get(M[z+ee],M[Y-oe]),L[A+4*O+ie+oe]=m.get(M[Y-oe],M[Y-ee]),L[A+6*O+ie+oe]=m.get(M[Y-ee],M[z+oe])}A+=O*8}return L}static readCode(m,y,N){let C=0;for(let M=y;M<y+N;M++)C<<=1,m[M]&&(C|=1);return C}static readByte(m,y){let N=m.length-y;return N>=8?dt.readCode(m,y,8):dt.readCode(m,y,N)<<8-N}static convertBoolArrayToByteArray(m){let y=new Uint8Array((m.length+7)/8);for(let N=0;N<y.length;N++)y[N]=dt.readByte(m,8*N);return y}totalBitsInLayer(m,y){return((y?88:112)+16*m)*m}}dt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],dt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],dt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],dt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],dt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class wt{constructor(){}static round(m){return m===NaN?0:m<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:m>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:m+(m<0?-.5:.5)|0}static distance(m,y,N,C){const M=m-N,L=y-C;return Math.sqrt(M*M+L*L)}static sum(m){let y=0;for(let N=0,C=m.length;N!==C;N++){const M=m[N];y+=M}return y}}class vt{static floatToIntBits(m){return m}}vt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class $e{constructor(m,y){this.x=m,this.y=y}getX(){return this.x}getY(){return this.y}equals(m){if(m instanceof $e){const y=m;return this.x===y.x&&this.y===y.y}return!1}hashCode(){return 31*vt.floatToIntBits(this.x)+vt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(m){const y=this.distance(m[0],m[1]),N=this.distance(m[1],m[2]),C=this.distance(m[0],m[2]);let M,L,_;if(N>=y&&N>=C?(L=m[0],M=m[1],_=m[2]):C>=N&&C>=y?(L=m[1],M=m[0],_=m[2]):(L=m[2],M=m[0],_=m[1]),this.crossProductZ(M,L,_)<0){const A=M;M=_,_=A}m[0]=M,m[1]=L,m[2]=_}static distance(m,y){return wt.distance(m.x,m.y,y.x,y.y)}static crossProductZ(m,y,N){const C=y.x,M=y.y;return(N.x-C)*(m.y-M)-(N.y-M)*(m.x-C)}}class na{constructor(m,y){this.bits=m,this.points=y}getBits(){return this.bits}getPoints(){return this.points}}class xt extends na{constructor(m,y,N,C,M){super(m,y),this.compact=N,this.nbDatablocks=C,this.nbLayers=M}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Bt{constructor(m,y,N,C){this.image=m,this.height=m.getHeight(),this.width=m.getWidth(),y==null&&(y=Bt.INIT_SIZE),N==null&&(N=m.getWidth()/2|0),C==null&&(C=m.getHeight()/2|0);const M=y/2|0;if(this.leftInit=N-M,this.rightInit=N+M,this.upInit=C-M,this.downInit=C+M,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new B}detect(){let m=this.leftInit,y=this.rightInit,N=this.upInit,C=this.downInit,M=!1,L=!0,_=!1,A=!1,O=!1,z=!1,Y=!1;const ee=this.width,ie=this.height;for(;L;){L=!1;let oe=!0;for(;(oe||!A)&&y<ee;)oe=this.containsBlackPoint(N,C,y,!1),oe?(y++,L=!0,A=!0):A||y++;if(y>=ee){M=!0;break}let fe=!0;for(;(fe||!O)&&C<ie;)fe=this.containsBlackPoint(m,y,C,!0),fe?(C++,L=!0,O=!0):O||C++;if(C>=ie){M=!0;break}let ge=!0;for(;(ge||!z)&&m>=0;)ge=this.containsBlackPoint(N,C,m,!1),ge?(m--,L=!0,z=!0):z||m--;if(m<0){M=!0;break}let me=!0;for(;(me||!Y)&&N>=0;)me=this.containsBlackPoint(m,y,N,!0),me?(N--,L=!0,Y=!0):Y||N--;if(N<0){M=!0;break}L&&(_=!0)}if(!M&&_){const oe=y-m;let fe=null;for(let we=1;fe===null&&we<oe;we++)fe=this.getBlackPointOnSegment(m,C-we,m+we,C);if(fe==null)throw new B;let ge=null;for(let we=1;ge===null&&we<oe;we++)ge=this.getBlackPointOnSegment(m,N+we,m+we,N);if(ge==null)throw new B;let me=null;for(let we=1;me===null&&we<oe;we++)me=this.getBlackPointOnSegment(y,N+we,y-we,N);if(me==null)throw new B;let ve=null;for(let we=1;ve===null&&we<oe;we++)ve=this.getBlackPointOnSegment(y,C-we,y-we,C);if(ve==null)throw new B;return this.centerEdges(ve,fe,me,ge)}else throw new B}getBlackPointOnSegment(m,y,N,C){const M=wt.round(wt.distance(m,y,N,C)),L=(N-m)/M,_=(C-y)/M,A=this.image;for(let O=0;O<M;O++){const z=wt.round(m+O*L),Y=wt.round(y+O*_);if(A.get(z,Y))return new $e(z,Y)}return null}centerEdges(m,y,N,C){const M=m.getX(),L=m.getY(),_=y.getX(),A=y.getY(),O=N.getX(),z=N.getY(),Y=C.getX(),ee=C.getY(),ie=Bt.CORR;return M<this.width/2?[new $e(Y-ie,ee+ie),new $e(_+ie,A+ie),new $e(O-ie,z-ie),new $e(M+ie,L-ie)]:[new $e(Y+ie,ee+ie),new $e(_+ie,A-ie),new $e(O-ie,z+ie),new $e(M-ie,L-ie)]}containsBlackPoint(m,y,N,C){const M=this.image;if(C){for(let L=m;L<=y;L++)if(M.get(L,N))return!0}else for(let L=m;L<=y;L++)if(M.get(N,L))return!0;return!1}}Bt.INIT_SIZE=10,Bt.CORR=1;class _a{static checkAndNudgePoints(m,y){const N=m.getWidth(),C=m.getHeight();let M=!0;for(let L=0;L<y.length&&M;L+=2){const _=Math.floor(y[L]),A=Math.floor(y[L+1]);if(_<-1||_>N||A<-1||A>C)throw new B;M=!1,_===-1?(y[L]=0,M=!0):_===N&&(y[L]=N-1,M=!0),A===-1?(y[L+1]=0,M=!0):A===C&&(y[L+1]=C-1,M=!0)}M=!0;for(let L=y.length-2;L>=0&&M;L-=2){const _=Math.floor(y[L]),A=Math.floor(y[L+1]);if(_<-1||_>N||A<-1||A>C)throw new B;M=!1,_===-1?(y[L]=0,M=!0):_===N&&(y[L]=N-1,M=!0),A===-1?(y[L+1]=0,M=!0):A===C&&(y[L+1]=C-1,M=!0)}}}class Nt{constructor(m,y,N,C,M,L,_,A,O){this.a11=m,this.a21=y,this.a31=N,this.a12=C,this.a22=M,this.a32=L,this.a13=_,this.a23=A,this.a33=O}static quadrilateralToQuadrilateral(m,y,N,C,M,L,_,A,O,z,Y,ee,ie,oe,fe,ge){const me=Nt.quadrilateralToSquare(m,y,N,C,M,L,_,A);return Nt.squareToQuadrilateral(O,z,Y,ee,ie,oe,fe,ge).times(me)}transformPoints(m){const y=m.length,N=this.a11,C=this.a12,M=this.a13,L=this.a21,_=this.a22,A=this.a23,O=this.a31,z=this.a32,Y=this.a33;for(let ee=0;ee<y;ee+=2){const ie=m[ee],oe=m[ee+1],fe=M*ie+A*oe+Y;m[ee]=(N*ie+L*oe+O)/fe,m[ee+1]=(C*ie+_*oe+z)/fe}}transformPointsWithValues(m,y){const N=this.a11,C=this.a12,M=this.a13,L=this.a21,_=this.a22,A=this.a23,O=this.a31,z=this.a32,Y=this.a33,ee=m.length;for(let ie=0;ie<ee;ie++){const oe=m[ie],fe=y[ie],ge=M*oe+A*fe+Y;m[ie]=(N*oe+L*fe+O)/ge,y[ie]=(C*oe+_*fe+z)/ge}}static squareToQuadrilateral(m,y,N,C,M,L,_,A){const O=m-N+M-_,z=y-C+L-A;if(O===0&&z===0)return new Nt(N-m,M-N,m,C-y,L-C,y,0,0,1);{const Y=N-M,ee=_-M,ie=C-L,oe=A-L,fe=Y*oe-ee*ie,ge=(O*oe-ee*z)/fe,me=(Y*z-O*ie)/fe;return new Nt(N-m+ge*N,_-m+me*_,m,C-y+ge*C,A-y+me*A,y,ge,me,1)}}static quadrilateralToSquare(m,y,N,C,M,L,_,A){return Nt.squareToQuadrilateral(m,y,N,C,M,L,_,A).buildAdjoint()}buildAdjoint(){return new Nt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(m){return new Nt(this.a11*m.a11+this.a21*m.a12+this.a31*m.a13,this.a11*m.a21+this.a21*m.a22+this.a31*m.a23,this.a11*m.a31+this.a21*m.a32+this.a31*m.a33,this.a12*m.a11+this.a22*m.a12+this.a32*m.a13,this.a12*m.a21+this.a22*m.a22+this.a32*m.a23,this.a12*m.a31+this.a22*m.a32+this.a32*m.a33,this.a13*m.a11+this.a23*m.a12+this.a33*m.a13,this.a13*m.a21+this.a23*m.a22+this.a33*m.a23,this.a13*m.a31+this.a23*m.a32+this.a33*m.a33)}}class La extends _a{sampleGrid(m,y,N,C,M,L,_,A,O,z,Y,ee,ie,oe,fe,ge,me,ve,we){const be=Nt.quadrilateralToQuadrilateral(C,M,L,_,A,O,z,Y,ee,ie,oe,fe,ge,me,ve,we);return this.sampleGridWithTransform(m,y,N,be)}sampleGridWithTransform(m,y,N,C){if(y<=0||N<=0)throw new B;const M=new J(y,N),L=new Float32Array(2*y);for(let _=0;_<N;_++){const A=L.length,O=_+.5;for(let z=0;z<A;z+=2)L[z]=z/2+.5,L[z+1]=O;C.transformPoints(L),_a.checkAndNudgePoints(m,L);try{for(let z=0;z<A;z+=2)m.get(Math.floor(L[z]),Math.floor(L[z+1]))&&M.set(z/2,_)}catch{throw new B}}return M}}class oa{static setGridSampler(m){oa.gridSampler=m}static getInstance(){return oa.gridSampler}}oa.gridSampler=new La;class Sa{constructor(m,y){this.x=m,this.y=y}toResultPoint(){return new $e(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class zt{constructor(m){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=m}detect(){return this.detectMirror(!1)}detectMirror(m){let y=this.getMatrixCenter(),N=this.getBullsEyeCorners(y);if(m){let L=N[0];N[0]=N[2],N[2]=L}this.extractParameters(N);let C=this.sampleGrid(this.image,N[this.shift%4],N[(this.shift+1)%4],N[(this.shift+2)%4],N[(this.shift+3)%4]),M=this.getMatrixCornerPoints(N);return new xt(C,M,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(m){if(!this.isValidPoint(m[0])||!this.isValidPoint(m[1])||!this.isValidPoint(m[2])||!this.isValidPoint(m[3]))throw new B;let y=2*this.nbCenterLayers,N=new Int32Array([this.sampleLine(m[0],m[1],y),this.sampleLine(m[1],m[2],y),this.sampleLine(m[2],m[3],y),this.sampleLine(m[3],m[0],y)]);this.shift=this.getRotation(N,y);let C=0;for(let L=0;L<4;L++){let _=N[(this.shift+L)%4];this.compact?(C<<=7,C+=_>>1&127):(C<<=10,C+=(_>>2&992)+(_>>1&31))}let M=this.getCorrectedParameterData(C,this.compact);this.compact?(this.nbLayers=(M>>6)+1,this.nbDataBlocks=(M&63)+1):(this.nbLayers=(M>>11)+1,this.nbDataBlocks=(M&2047)+1)}getRotation(m,y){let N=0;m.forEach((C,M,L)=>{let _=(C>>y-2<<1)+(C&1);N=(N<<3)+_}),N=((N&1)<<11)+(N>>1);for(let C=0;C<4;C++)if(T.bitCount(N^this.EXPECTED_CORNER_BITS[C])<=2)return C;throw new B}getCorrectedParameterData(m,y){let N,C;y?(N=7,C=2):(N=10,C=4);let M=N-C,L=new Int32Array(N);for(let A=N-1;A>=0;--A)L[A]=m&15,m>>=4;try{new Ee(Oe.AZTEC_PARAM).decode(L,M)}catch{throw new B}let _=0;for(let A=0;A<C;A++)_=(_<<4)+L[A];return _}getBullsEyeCorners(m){let y=m,N=m,C=m,M=m,L=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let Y=this.getFirstDifferent(y,L,1,-1),ee=this.getFirstDifferent(N,L,1,1),ie=this.getFirstDifferent(C,L,-1,1),oe=this.getFirstDifferent(M,L,-1,-1);if(this.nbCenterLayers>2){let fe=this.distancePoint(oe,Y)*this.nbCenterLayers/(this.distancePoint(M,y)*(this.nbCenterLayers+2));if(fe<.75||fe>1.25||!this.isWhiteOrBlackRectangle(Y,ee,ie,oe))break}y=Y,N=ee,C=ie,M=oe,L=!L}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new B;this.compact=this.nbCenterLayers===5;let _=new $e(y.getX()+.5,y.getY()-.5),A=new $e(N.getX()+.5,N.getY()+.5),O=new $e(C.getX()-.5,C.getY()+.5),z=new $e(M.getX()-.5,M.getY()-.5);return this.expandSquare([_,A,O,z],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let m,y,N,C;try{let _=new Bt(this.image).detect();m=_[0],y=_[1],N=_[2],C=_[3]}catch{let A=this.image.getWidth()/2,O=this.image.getHeight()/2;m=this.getFirstDifferent(new Sa(A+7,O-7),!1,1,-1).toResultPoint(),y=this.getFirstDifferent(new Sa(A+7,O+7),!1,1,1).toResultPoint(),N=this.getFirstDifferent(new Sa(A-7,O+7),!1,-1,1).toResultPoint(),C=this.getFirstDifferent(new Sa(A-7,O-7),!1,-1,-1).toResultPoint()}let M=wt.round((m.getX()+C.getX()+y.getX()+N.getX())/4),L=wt.round((m.getY()+C.getY()+y.getY()+N.getY())/4);try{let _=new Bt(this.image,15,M,L).detect();m=_[0],y=_[1],N=_[2],C=_[3]}catch{m=this.getFirstDifferent(new Sa(M+7,L-7),!1,1,-1).toResultPoint(),y=this.getFirstDifferent(new Sa(M+7,L+7),!1,1,1).toResultPoint(),N=this.getFirstDifferent(new Sa(M-7,L+7),!1,-1,1).toResultPoint(),C=this.getFirstDifferent(new Sa(M-7,L-7),!1,-1,-1).toResultPoint()}return M=wt.round((m.getX()+C.getX()+y.getX()+N.getX())/4),L=wt.round((m.getY()+C.getY()+y.getY()+N.getY())/4),new Sa(M,L)}getMatrixCornerPoints(m){return this.expandSquare(m,2*this.nbCenterLayers,this.getDimension())}sampleGrid(m,y,N,C,M){let L=oa.getInstance(),_=this.getDimension(),A=_/2-this.nbCenterLayers,O=_/2+this.nbCenterLayers;return L.sampleGrid(m,_,_,A,A,O,A,O,O,A,O,y.getX(),y.getY(),N.getX(),N.getY(),C.getX(),C.getY(),M.getX(),M.getY())}sampleLine(m,y,N){let C=0,M=this.distanceResultPoint(m,y),L=M/N,_=m.getX(),A=m.getY(),O=L*(y.getX()-m.getX())/M,z=L*(y.getY()-m.getY())/M;for(let Y=0;Y<N;Y++)this.image.get(wt.round(_+Y*O),wt.round(A+Y*z))&&(C|=1<<N-Y-1);return C}isWhiteOrBlackRectangle(m,y,N,C){let M=3;m=new Sa(m.getX()-M,m.getY()+M),y=new Sa(y.getX()-M,y.getY()-M),N=new Sa(N.getX()+M,N.getY()-M),C=new Sa(C.getX()+M,C.getY()+M);let L=this.getColor(C,m);if(L===0)return!1;let _=this.getColor(m,y);return _!==L||(_=this.getColor(y,N),_!==L)?!1:(_=this.getColor(N,C),_===L)}getColor(m,y){let N=this.distancePoint(m,y),C=(y.getX()-m.getX())/N,M=(y.getY()-m.getY())/N,L=0,_=m.getX(),A=m.getY(),O=this.image.get(m.getX(),m.getY()),z=Math.ceil(N);for(let ee=0;ee<z;ee++)_+=C,A+=M,this.image.get(wt.round(_),wt.round(A))!==O&&L++;let Y=L/N;return Y>.1&&Y<.9?0:Y<=.1===O?1:-1}getFirstDifferent(m,y,N,C){let M=m.getX()+N,L=m.getY()+C;for(;this.isValid(M,L)&&this.image.get(M,L)===y;)M+=N,L+=C;for(M-=N,L-=C;this.isValid(M,L)&&this.image.get(M,L)===y;)M+=N;for(M-=N;this.isValid(M,L)&&this.image.get(M,L)===y;)L+=C;return L-=C,new Sa(M,L)}expandSquare(m,y,N){let C=N/(2*y),M=m[0].getX()-m[2].getX(),L=m[0].getY()-m[2].getY(),_=(m[0].getX()+m[2].getX())/2,A=(m[0].getY()+m[2].getY())/2,O=new $e(_+C*M,A+C*L),z=new $e(_-C*M,A-C*L);M=m[1].getX()-m[3].getX(),L=m[1].getY()-m[3].getY(),_=(m[1].getX()+m[3].getX())/2,A=(m[1].getY()+m[3].getY())/2;let Y=new $e(_+C*M,A+C*L),ee=new $e(_-C*M,A-C*L);return[O,Y,z,ee]}isValid(m,y){return m>=0&&m<this.image.getWidth()&&y>0&&y<this.image.getHeight()}isValidPoint(m){let y=wt.round(m.getX()),N=wt.round(m.getY());return this.isValid(y,N)}distancePoint(m,y){return wt.distance(m.getX(),m.getY(),y.getX(),y.getY())}distanceResultPoint(m,y){return wt.distance(m.getX(),m.getY(),y.getX(),y.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(T.truncDivision(this.nbLayers-4,8)+1)+15}}class je{decode(m,y=null){let N=null,C=new zt(m.getBlackMatrix()),M=null,L=null;try{let z=C.detectMirror(!1);M=z.getPoints(),this.reportFoundResultPoints(y,M),L=new dt().decode(z)}catch(z){N=z}if(L==null)try{let z=C.detectMirror(!0);M=z.getPoints(),this.reportFoundResultPoints(y,M),L=new dt().decode(z)}catch(z){throw N??z}let _=new de(L.getText(),L.getRawBytes(),L.getNumBits(),M,pe.AZTEC,b.currentTimeMillis()),A=L.getByteSegments();A!=null&&_.putMetadata(Te.BYTE_SEGMENTS,A);let O=L.getECLevel();return O!=null&&_.putMetadata(Te.ERROR_CORRECTION_LEVEL,O),_}reportFoundResultPoints(m,y){if(m!=null){let N=m.get(R.NEED_RESULT_POINT_CALLBACK);N!=null&&y.forEach((C,M,L)=>{N.foundPossibleResultPoint(C)})}}reset(){}}class He extends ce{constructor(m=500){super(new je,m)}}class it{decode(m,y){try{return this.doDecode(m,y)}catch{if(y&&y.get(R.TRY_HARDER)===!0&&m.isRotateSupported()){const M=m.rotateCounterClockwise(),L=this.doDecode(M,y),_=L.getResultMetadata();let A=270;_!==null&&_.get(Te.ORIENTATION)===!0&&(A=A+_.get(Te.ORIENTATION)%360),L.putMetadata(Te.ORIENTATION,A);const O=L.getResultPoints();if(O!==null){const z=M.getHeight();for(let Y=0;Y<O.length;Y++)O[Y]=new $e(z-O[Y].getY()-1,O[Y].getX())}return L}else throw new B}}reset(){}doDecode(m,y){const N=m.getWidth(),C=m.getHeight();let M=new E(N);const L=y&&y.get(R.TRY_HARDER)===!0,_=Math.max(1,C>>(L?8:5));let A;L?A=C:A=15;const O=Math.trunc(C/2);for(let z=0;z<A;z++){const Y=Math.trunc((z+1)/2),ee=(z&1)===0,ie=O+_*(ee?Y:-Y);if(ie<0||ie>=C)break;try{M=m.getBlackRow(ie,M)}catch{continue}for(let oe=0;oe<2;oe++){if(oe===1&&(M.reverse(),y&&y.get(R.NEED_RESULT_POINT_CALLBACK)===!0)){const fe=new Map;y.forEach((ge,me)=>fe.set(me,ge)),fe.delete(R.NEED_RESULT_POINT_CALLBACK),y=fe}try{const fe=this.decodeRow(ie,M,y);if(oe===1){fe.putMetadata(Te.ORIENTATION,180);const ge=fe.getResultPoints();ge!==null&&(ge[0]=new $e(N-ge[0].getX()-1,ge[0].getY()),ge[1]=new $e(N-ge[1].getX()-1,ge[1].getY()))}return fe}catch{}}}throw new B}static recordPattern(m,y,N){const C=N.length;for(let O=0;O<C;O++)N[O]=0;const M=m.getSize();if(y>=M)throw new B;let L=!m.get(y),_=0,A=y;for(;A<M;){if(m.get(A)!==L)N[_]++;else{if(++_===C)break;N[_]=1,L=!L}A++}if(!(_===C||_===C-1&&A===M))throw new B}static recordPatternInReverse(m,y,N){let C=N.length,M=m.get(y);for(;y>0&&C>=0;)m.get(--y)!==M&&(C--,M=!M);if(C>=0)throw new B;it.recordPattern(m,y+1,N)}static patternMatchVariance(m,y,N){const C=m.length;let M=0,L=0;for(let O=0;O<C;O++)M+=m[O],L+=y[O];if(M<L)return Number.POSITIVE_INFINITY;const _=M/L;N*=_;let A=0;for(let O=0;O<C;O++){const z=m[O],Y=y[O]*_,ee=z>Y?z-Y:Y-z;if(ee>N)return Number.POSITIVE_INFINITY;A+=ee}return A/M}}class Ye extends it{static findStartPattern(m){const y=m.getSize(),N=m.getNextSet(0);let C=0,M=Int32Array.from([0,0,0,0,0,0]),L=N,_=!1;const A=6;for(let O=N;O<y;O++)if(m.get(O)!==_)M[C]++;else{if(C===A-1){let z=Ye.MAX_AVG_VARIANCE,Y=-1;for(let ee=Ye.CODE_START_A;ee<=Ye.CODE_START_C;ee++){const ie=it.patternMatchVariance(M,Ye.CODE_PATTERNS[ee],Ye.MAX_INDIVIDUAL_VARIANCE);ie<z&&(z=ie,Y=ee)}if(Y>=0&&m.isRange(Math.max(0,L-(O-L)/2),L,!1))return Int32Array.from([L,O,Y]);L+=M[0]+M[1],M=M.slice(2,M.length-1),M[C-1]=0,M[C]=0,C--}else C++;M[C]=1,_=!_}throw new B}static decodeCode(m,y,N){it.recordPattern(m,N,y);let C=Ye.MAX_AVG_VARIANCE,M=-1;for(let L=0;L<Ye.CODE_PATTERNS.length;L++){const _=Ye.CODE_PATTERNS[L],A=this.patternMatchVariance(y,_,Ye.MAX_INDIVIDUAL_VARIANCE);A<C&&(C=A,M=L)}if(M>=0)return M;throw new B}decodeRow(m,y,N){const C=N&&N.get(R.ASSUME_GS1)===!0,M=Ye.findStartPattern(y),L=M[2];let _=0;const A=new Uint8Array(20);A[_++]=L;let O;switch(L){case Ye.CODE_START_A:O=Ye.CODE_CODE_A;break;case Ye.CODE_START_B:O=Ye.CODE_CODE_B;break;case Ye.CODE_START_C:O=Ye.CODE_CODE_C;break;default:throw new P}let z=!1,Y=!1,ee="",ie=M[0],oe=M[1];const fe=Int32Array.from([0,0,0,0,0,0]);let ge=0,me=0,ve=L,we=0,be=!0,Ae=!1,Ce=!1;for(;!z;){const _t=Y;switch(Y=!1,ge=me,me=Ye.decodeCode(y,fe,oe),A[_++]=me,me!==Ye.CODE_STOP&&(be=!0),me!==Ye.CODE_STOP&&(we++,ve+=we*me),ie=oe,oe+=fe.reduce((Zt,Ut)=>Zt+Ut,0),me){case Ye.CODE_START_A:case Ye.CODE_START_B:case Ye.CODE_START_C:throw new P}switch(O){case Ye.CODE_CODE_A:if(me<64)Ce===Ae?ee+=String.fromCharCode(32+me):ee+=String.fromCharCode(32+me+128),Ce=!1;else if(me<96)Ce===Ae?ee+=String.fromCharCode(me-64):ee+=String.fromCharCode(me+64),Ce=!1;else switch(me!==Ye.CODE_STOP&&(be=!1),me){case Ye.CODE_FNC_1:C&&(ee.length===0?ee+="]C1":ee+="");break;case Ye.CODE_FNC_2:case Ye.CODE_FNC_3:break;case Ye.CODE_FNC_4_A:!Ae&&Ce?(Ae=!0,Ce=!1):Ae&&Ce?(Ae=!1,Ce=!1):Ce=!0;break;case Ye.CODE_SHIFT:Y=!0,O=Ye.CODE_CODE_B;break;case Ye.CODE_CODE_B:O=Ye.CODE_CODE_B;break;case Ye.CODE_CODE_C:O=Ye.CODE_CODE_C;break;case Ye.CODE_STOP:z=!0;break}break;case Ye.CODE_CODE_B:if(me<96)Ce===Ae?ee+=String.fromCharCode(32+me):ee+=String.fromCharCode(32+me+128),Ce=!1;else switch(me!==Ye.CODE_STOP&&(be=!1),me){case Ye.CODE_FNC_1:C&&(ee.length===0?ee+="]C1":ee+="");break;case Ye.CODE_FNC_2:case Ye.CODE_FNC_3:break;case Ye.CODE_FNC_4_B:!Ae&&Ce?(Ae=!0,Ce=!1):Ae&&Ce?(Ae=!1,Ce=!1):Ce=!0;break;case Ye.CODE_SHIFT:Y=!0,O=Ye.CODE_CODE_A;break;case Ye.CODE_CODE_A:O=Ye.CODE_CODE_A;break;case Ye.CODE_CODE_C:O=Ye.CODE_CODE_C;break;case Ye.CODE_STOP:z=!0;break}break;case Ye.CODE_CODE_C:if(me<100)me<10&&(ee+="0"),ee+=me;else switch(me!==Ye.CODE_STOP&&(be=!1),me){case Ye.CODE_FNC_1:C&&(ee.length===0?ee+="]C1":ee+="");break;case Ye.CODE_CODE_A:O=Ye.CODE_CODE_A;break;case Ye.CODE_CODE_B:O=Ye.CODE_CODE_B;break;case Ye.CODE_STOP:z=!0;break}break}_t&&(O=O===Ye.CODE_CODE_A?Ye.CODE_CODE_B:Ye.CODE_CODE_A)}const Ue=oe-ie;if(oe=y.getNextUnset(oe),!y.isRange(oe,Math.min(y.getSize(),oe+(oe-ie)/2),!1))throw new B;if(ve-=we*ge,ve%103!==ge)throw new p;const Xe=ee.length;if(Xe===0)throw new B;Xe>0&&be&&(O===Ye.CODE_CODE_C?ee=ee.substring(0,Xe-2):ee=ee.substring(0,Xe-1));const Ve=(M[1]+M[0])/2,tt=ie+Ue/2,mt=A.length,Mt=new Uint8Array(mt);for(let _t=0;_t<mt;_t++)Mt[_t]=A[_t];const Dt=[new $e(Ve,m),new $e(tt,m)];return new de(ee,Mt,0,Dt,pe.CODE_128,new Date().getTime())}}Ye.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ye.MAX_AVG_VARIANCE=.25,Ye.MAX_INDIVIDUAL_VARIANCE=.7,Ye.CODE_SHIFT=98,Ye.CODE_CODE_C=99,Ye.CODE_CODE_B=100,Ye.CODE_CODE_A=101,Ye.CODE_FNC_1=102,Ye.CODE_FNC_2=97,Ye.CODE_FNC_3=96,Ye.CODE_FNC_4_A=101,Ye.CODE_FNC_4_B=100,Ye.CODE_START_A=103,Ye.CODE_START_B=104,Ye.CODE_START_C=105,Ye.CODE_STOP=106;class Ot extends it{constructor(m=!1,y=!1){super(),this.usingCheckDigit=m,this.extendedMode=y,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(m,y,N){let C=this.counters;C.fill(0),this.decodeRowResult="";let M=Ot.findAsteriskPattern(y,C),L=y.getNextSet(M[1]),_=y.getSize(),A,O;do{Ot.recordPattern(y,L,C);let fe=Ot.toNarrowWidePattern(C);if(fe<0)throw new B;A=Ot.patternToChar(fe),this.decodeRowResult+=A,O=L;for(let ge of C)L+=ge;L=y.getNextSet(L)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let z=0;for(let fe of C)z+=fe;let Y=L-O-z;if(L!==_&&Y*2<z)throw new B;if(this.usingCheckDigit){let fe=this.decodeRowResult.length-1,ge=0;for(let me=0;me<fe;me++)ge+=Ot.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(me));if(this.decodeRowResult.charAt(fe)!==Ot.ALPHABET_STRING.charAt(ge%43))throw new p;this.decodeRowResult=this.decodeRowResult.substring(0,fe)}if(this.decodeRowResult.length===0)throw new B;let ee;this.extendedMode?ee=Ot.decodeExtended(this.decodeRowResult):ee=this.decodeRowResult;let ie=(M[1]+M[0])/2,oe=O+z/2;return new de(ee,null,0,[new $e(ie,m),new $e(oe,m)],pe.CODE_39,new Date().getTime())}static findAsteriskPattern(m,y){let N=m.getSize(),C=m.getNextSet(0),M=0,L=C,_=!1,A=y.length;for(let O=C;O<N;O++)if(m.get(O)!==_)y[M]++;else{if(M===A-1){if(this.toNarrowWidePattern(y)===Ot.ASTERISK_ENCODING&&m.isRange(Math.max(0,L-Math.floor((O-L)/2)),L,!1))return[L,O];L+=y[0]+y[1],y.copyWithin(0,2,2+M-1),y[M-1]=0,y[M]=0,M--}else M++;y[M]=1,_=!_}throw new B}static toNarrowWidePattern(m){let y=m.length,N=0,C;do{let M=2147483647;for(let A of m)A<M&&A>N&&(M=A);N=M,C=0;let L=0,_=0;for(let A=0;A<y;A++){let O=m[A];O>N&&(_|=1<<y-1-A,C++,L+=O)}if(C===3){for(let A=0;A<y&&C>0;A++){let O=m[A];if(O>N&&(C--,O*2>=L))return-1}return _}}while(C>3);return-1}static patternToChar(m){for(let y=0;y<Ot.CHARACTER_ENCODINGS.length;y++)if(Ot.CHARACTER_ENCODINGS[y]===m)return Ot.ALPHABET_STRING.charAt(y);if(m===Ot.ASTERISK_ENCODING)return"*";throw new B}static decodeExtended(m){let y=m.length,N="";for(let C=0;C<y;C++){let M=m.charAt(C);if(M==="+"||M==="$"||M==="%"||M==="/"){let L=m.charAt(C+1),_="\0";switch(M){case"+":if(L>="A"&&L<="Z")_=String.fromCharCode(L.charCodeAt(0)+32);else throw new P;break;case"$":if(L>="A"&&L<="Z")_=String.fromCharCode(L.charCodeAt(0)-64);else throw new P;break;case"%":if(L>="A"&&L<="E")_=String.fromCharCode(L.charCodeAt(0)-38);else if(L>="F"&&L<="J")_=String.fromCharCode(L.charCodeAt(0)-11);else if(L>="K"&&L<="O")_=String.fromCharCode(L.charCodeAt(0)+16);else if(L>="P"&&L<="T")_=String.fromCharCode(L.charCodeAt(0)+43);else if(L==="U")_="\0";else if(L==="V")_="@";else if(L==="W")_="`";else if(L==="X"||L==="Y"||L==="Z")_="";else throw new P;break;case"/":if(L>="A"&&L<="O")_=String.fromCharCode(L.charCodeAt(0)-32);else if(L==="Z")_=":";else throw new P;break}N+=_,C++}else N+=M}return N}}Ot.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Ot.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Ot.ASTERISK_ENCODING=148;class st extends it{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(m,y,N){let C=this.decodeStart(y),M=this.decodeEnd(y),L=new Z;st.decodeMiddle(y,C[1],M[0],L);let _=L.toString(),A=null;N!=null&&(A=N.get(R.ALLOWED_LENGTHS)),A==null&&(A=st.DEFAULT_ALLOWED_LENGTHS);let O=_.length,z=!1,Y=0;for(let oe of A){if(O===oe){z=!0;break}oe>Y&&(Y=oe)}if(!z&&O>Y&&(z=!0),!z)throw new P;const ee=[new $e(C[1],m),new $e(M[0],m)];return new de(_,null,0,ee,pe.ITF,new Date().getTime())}static decodeMiddle(m,y,N,C){let M=new Int32Array(10),L=new Int32Array(5),_=new Int32Array(5);for(M.fill(0),L.fill(0),_.fill(0);y<N;){it.recordPattern(m,y,M);for(let O=0;O<5;O++){let z=2*O;L[O]=M[z],_[O]=M[z+1]}let A=st.decodeDigit(L);C.append(A.toString()),A=this.decodeDigit(_),C.append(A.toString()),M.forEach(function(O){y+=O})}}decodeStart(m){let y=st.skipWhiteSpace(m),N=st.findGuardPattern(m,y,st.START_PATTERN);return this.narrowLineWidth=(N[1]-N[0])/4,this.validateQuietZone(m,N[0]),N}validateQuietZone(m,y){let N=this.narrowLineWidth*10;N=N<y?N:y;for(let C=y-1;N>0&&C>=0&&!m.get(C);C--)N--;if(N!==0)throw new B}static skipWhiteSpace(m){const y=m.getSize(),N=m.getNextSet(0);if(N===y)throw new B;return N}decodeEnd(m){m.reverse();try{let y=st.skipWhiteSpace(m),N;try{N=st.findGuardPattern(m,y,st.END_PATTERN_REVERSED[0])}catch(M){M instanceof B&&(N=st.findGuardPattern(m,y,st.END_PATTERN_REVERSED[1]))}this.validateQuietZone(m,N[0]);let C=N[0];return N[0]=m.getSize()-N[1],N[1]=m.getSize()-C,N}finally{m.reverse()}}static findGuardPattern(m,y,N){let C=N.length,M=new Int32Array(C),L=m.getSize(),_=!1,A=0,O=y;M.fill(0);for(let z=y;z<L;z++)if(m.get(z)!==_)M[A]++;else{if(A===C-1){if(it.patternMatchVariance(M,N,st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE)return[O,z];O+=M[0]+M[1],b.arraycopy(M,2,M,0,A-1),M[A-1]=0,M[A]=0,A--}else A++;M[A]=1,_=!_}throw new B}static decodeDigit(m){let y=st.MAX_AVG_VARIANCE,N=-1,C=st.PATTERNS.length;for(let M=0;M<C;M++){let L=st.PATTERNS[M],_=it.patternMatchVariance(m,L,st.MAX_INDIVIDUAL_VARIANCE);_<y?(y=_,N=M):_===y&&(N=-1)}if(N>=0)return N%10;throw new B}}st.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],st.MAX_AVG_VARIANCE=.38,st.MAX_INDIVIDUAL_VARIANCE=.5,st.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],st.START_PATTERN=Int32Array.from([1,1,1,1]),st.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Jt extends it{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(m){let y=!1,N,C=0,M=Int32Array.from([0,0,0]);for(;!y;){M=Int32Array.from([0,0,0]),N=Jt.findGuardPattern(m,C,!1,this.START_END_PATTERN,M);let L=N[0];C=N[1];let _=L-(C-L);_>=0&&(y=m.isRange(_,L,!1))}return N}static checkChecksum(m){return Jt.checkStandardUPCEANChecksum(m)}static checkStandardUPCEANChecksum(m){let y=m.length;if(y===0)return!1;let N=parseInt(m.charAt(y-1),10);return Jt.getStandardUPCEANChecksum(m.substring(0,y-1))===N}static getStandardUPCEANChecksum(m){let y=m.length,N=0;for(let C=y-1;C>=0;C-=2){let M=m.charAt(C).charCodeAt(0)-48;if(M<0||M>9)throw new P;N+=M}N*=3;for(let C=y-2;C>=0;C-=2){let M=m.charAt(C).charCodeAt(0)-48;if(M<0||M>9)throw new P;N+=M}return(1e3-N)%10}static decodeEnd(m,y){return Jt.findGuardPattern(m,y,!1,Jt.START_END_PATTERN,new Int32Array(Jt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(m,y,N,C){return this.findGuardPattern(m,y,N,C,new Int32Array(C.length))}static findGuardPattern(m,y,N,C,M){let L=m.getSize();y=N?m.getNextUnset(y):m.getNextSet(y);let _=0,A=y,O=C.length,z=N;for(let Y=y;Y<L;Y++)if(m.get(Y)!==z)M[_]++;else{if(_===O-1){if(it.patternMatchVariance(M,C,Jt.MAX_INDIVIDUAL_VARIANCE)<Jt.MAX_AVG_VARIANCE)return Int32Array.from([A,Y]);A+=M[0]+M[1];let ee=M.slice(2,M.length-1);for(let ie=0;ie<_-1;ie++)M[ie]=ee[ie];M[_-1]=0,M[_]=0,_--}else _++;M[_]=1,z=!z}throw new B}static decodeDigit(m,y,N,C){this.recordPattern(m,N,y);let M=this.MAX_AVG_VARIANCE,L=-1,_=C.length;for(let A=0;A<_;A++){let O=C[A],z=it.patternMatchVariance(y,O,Jt.MAX_INDIVIDUAL_VARIANCE);z<M&&(M=z,L=A)}if(L>=0)return L;throw new B}}Jt.MAX_AVG_VARIANCE=.48,Jt.MAX_INDIVIDUAL_VARIANCE=.7,Jt.START_END_PATTERN=Int32Array.from([1,1,1]),Jt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Jt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Jt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ar{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(m,y,N){let C=this.decodeRowStringBuffer,M=this.decodeMiddle(y,N,C),L=C.toString(),_=Ar.parseExtensionString(L),A=[new $e((N[0]+N[1])/2,m),new $e(M,m)],O=new de(L,null,0,A,pe.UPC_EAN_EXTENSION,new Date().getTime());return _!=null&&O.putAllMetadata(_),O}decodeMiddle(m,y,N){let C=this.decodeMiddleCounters;C[0]=0,C[1]=0,C[2]=0,C[3]=0;let M=m.getSize(),L=y[1],_=0;for(let O=0;O<5&&L<M;O++){let z=Jt.decodeDigit(m,C,L,Jt.L_AND_G_PATTERNS);N+=String.fromCharCode(48+z%10);for(let Y of C)L+=Y;z>=10&&(_|=1<<4-O),O!==4&&(L=m.getNextSet(L),L=m.getNextUnset(L))}if(N.length!==5)throw new B;let A=this.determineCheckDigit(_);if(Ar.extensionChecksum(N.toString())!==A)throw new B;return L}static extensionChecksum(m){let y=m.length,N=0;for(let C=y-2;C>=0;C-=2)N+=m.charAt(C).charCodeAt(0)-48;N*=3;for(let C=y-1;C>=0;C-=2)N+=m.charAt(C).charCodeAt(0)-48;return N*=3,N%10}determineCheckDigit(m){for(let y=0;y<10;y++)if(m===this.CHECK_DIGIT_ENCODINGS[y])return y;throw new B}static parseExtensionString(m){if(m.length!==5)return null;let y=Ar.parseExtension5String(m);return y==null?null:new Map([[Te.SUGGESTED_PRICE,y]])}static parseExtension5String(m){let y;switch(m.charAt(0)){case"0":y="";break;case"5":y="$";break;case"9":switch(m){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}y="";break;default:y="";break}let N=parseInt(m.substring(1)),C=(N/100).toString(),M=N%100,L=M<10?"0"+M:M.toString();return y+C+"."+L}}class xs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(m,y,N){let C=this.decodeRowStringBuffer,M=this.decodeMiddle(y,N,C),L=C.toString(),_=xs.parseExtensionString(L),A=[new $e((N[0]+N[1])/2,m),new $e(M,m)],O=new de(L,null,0,A,pe.UPC_EAN_EXTENSION,new Date().getTime());return _!=null&&O.putAllMetadata(_),O}decodeMiddle(m,y,N){let C=this.decodeMiddleCounters;C[0]=0,C[1]=0,C[2]=0,C[3]=0;let M=m.getSize(),L=y[1],_=0;for(let A=0;A<2&&L<M;A++){let O=Jt.decodeDigit(m,C,L,Jt.L_AND_G_PATTERNS);N+=String.fromCharCode(48+O%10);for(let z of C)L+=z;O>=10&&(_|=1<<1-A),A!==1&&(L=m.getNextSet(L),L=m.getNextUnset(L))}if(N.length!==2)throw new B;if(parseInt(N.toString())%4!==_)throw new B;return L}static parseExtensionString(m){return m.length!==2?null:new Map([[Te.ISSUE_NUMBER,parseInt(m)]])}}class Lt{static decodeRow(m,y,N){let C=Jt.findGuardPattern(y,N,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ar().decodeRow(m,y,C)}catch{return new xs().decodeRow(m,y,C)}}}Lt.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Xa extends Jt{constructor(){super(),this.decodeRowStringBuffer="",Xa.L_AND_G_PATTERNS=Xa.L_PATTERNS.map(m=>Int32Array.from(m));for(let m=10;m<20;m++){let y=Xa.L_PATTERNS[m-10],N=new Int32Array(y.length);for(let C=0;C<y.length;C++)N[C]=y[y.length-C-1];Xa.L_AND_G_PATTERNS[m]=N}}decodeRow(m,y,N){let C=Xa.findStartGuardPattern(y),M=N==null?null:N.get(R.NEED_RESULT_POINT_CALLBACK);if(M!=null){const be=new $e((C[0]+C[1])/2,m);M.foundPossibleResultPoint(be)}let L=this.decodeMiddle(y,C,this.decodeRowStringBuffer),_=L.rowOffset,A=L.resultString;if(M!=null){const be=new $e(_,m);M.foundPossibleResultPoint(be)}let O=this.decodeEnd(y,_);if(M!=null){const be=new $e((O[0]+O[1])/2,m);M.foundPossibleResultPoint(be)}let z=O[1],Y=z+(z-O[0]);if(Y>=y.getSize()||!y.isRange(z,Y,!1))throw new B;let ee=A.toString();if(ee.length<8)throw new P;if(!Xa.checkChecksum(ee))throw new p;let ie=(C[1]+C[0])/2,oe=(O[1]+O[0])/2,fe=this.getBarcodeFormat(),ge=[new $e(ie,m),new $e(oe,m)],me=new de(ee,null,0,ge,fe,new Date().getTime()),ve=0;try{let be=Lt.decodeRow(m,y,O[1]);me.putMetadata(Te.UPC_EAN_EXTENSION,be.getText()),me.putAllMetadata(be.getResultMetadata()),me.addResultPoints(be.getResultPoints()),ve=be.getText().length}catch{}let we=N==null?null:N.get(R.ALLOWED_EAN_EXTENSIONS);if(we!=null){let be=!1;for(let Ae in we)if(ve.toString()===Ae){be=!0;break}if(!be)throw new B}return me}decodeEnd(m,y){return Xa.findGuardPattern(m,y,!1,Xa.START_END_PATTERN,new Int32Array(Xa.START_END_PATTERN.length).fill(0))}static checkChecksum(m){return Xa.checkStandardUPCEANChecksum(m)}static checkStandardUPCEANChecksum(m){let y=m.length;if(y===0)return!1;let N=parseInt(m.charAt(y-1),10);return Xa.getStandardUPCEANChecksum(m.substring(0,y-1))===N}static getStandardUPCEANChecksum(m){let y=m.length,N=0;for(let C=y-1;C>=0;C-=2){let M=m.charAt(C).charCodeAt(0)-48;if(M<0||M>9)throw new P;N+=M}N*=3;for(let C=y-2;C>=0;C-=2){let M=m.charAt(C).charCodeAt(0)-48;if(M<0||M>9)throw new P;N+=M}return(1e3-N)%10}}class xi extends Xa{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(m,y,N){let C=this.decodeMiddleCounters;C[0]=0,C[1]=0,C[2]=0,C[3]=0;let M=m.getSize(),L=y[1],_=0;for(let O=0;O<6&&L<M;O++){let z=Xa.decodeDigit(m,C,L,Xa.L_AND_G_PATTERNS);N+=String.fromCharCode(48+z%10);for(let Y of C)L+=Y;z>=10&&(_|=1<<5-O)}N=xi.determineFirstDigit(N,_),L=Xa.findGuardPattern(m,L,!0,Xa.MIDDLE_PATTERN,new Int32Array(Xa.MIDDLE_PATTERN.length).fill(0))[1];for(let O=0;O<6&&L<M;O++){let z=Xa.decodeDigit(m,C,L,Xa.L_PATTERNS);N+=String.fromCharCode(48+z);for(let Y of C)L+=Y}return{rowOffset:L,resultString:N}}getBarcodeFormat(){return pe.EAN_13}static determineFirstDigit(m,y){for(let N=0;N<10;N++)if(y===this.FIRST_DIGIT_ENCODINGS[N])return m=String.fromCharCode(48+N)+m,m;throw new B}}xi.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Zi extends Xa{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(m,y,N){const C=this.decodeMiddleCounters;C[0]=0,C[1]=0,C[2]=0,C[3]=0;let M=m.getSize(),L=y[1];for(let A=0;A<4&&L<M;A++){let O=Xa.decodeDigit(m,C,L,Xa.L_PATTERNS);N+=String.fromCharCode(48+O);for(let z of C)L+=z}L=Xa.findGuardPattern(m,L,!0,Xa.MIDDLE_PATTERN,new Int32Array(Xa.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<4&&L<M;A++){let O=Xa.decodeDigit(m,C,L,Xa.L_PATTERNS);N+=String.fromCharCode(48+O);for(let z of C)L+=z}return{rowOffset:L,resultString:N}}getBarcodeFormat(){return pe.EAN_8}}class Js extends Xa{constructor(){super(...arguments),this.ean13Reader=new xi}getBarcodeFormat(){return pe.UPC_A}decode(m,y){return this.maybeReturnResult(this.ean13Reader.decode(m))}decodeRow(m,y,N){return this.maybeReturnResult(this.ean13Reader.decodeRow(m,y,N))}decodeMiddle(m,y,N){return this.ean13Reader.decodeMiddle(m,y,N)}maybeReturnResult(m){let y=m.getText();if(y.charAt(0)==="0"){let N=new de(y.substring(1),null,null,m.getResultPoints(),pe.UPC_A);return m.getResultMetadata()!=null&&N.putAllMetadata(m.getResultMetadata()),N}else throw new B}reset(){this.ean13Reader.reset()}}class Nn extends Xa{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(m,y,N){const C=this.decodeMiddleCounters.map(O=>O);C[0]=0,C[1]=0,C[2]=0,C[3]=0;const M=m.getSize();let L=y[1],_=0;for(let O=0;O<6&&L<M;O++){const z=Nn.decodeDigit(m,C,L,Nn.L_AND_G_PATTERNS);N+=String.fromCharCode(48+z%10);for(let Y of C)L+=Y;z>=10&&(_|=1<<5-O)}let A=Nn.determineNumSysAndCheckDigit(N,_);return{rowOffset:L,resultString:A}}decodeEnd(m,y){return Nn.findGuardPatternWithoutCounters(m,y,!0,Nn.MIDDLE_END_PATTERN)}checkChecksum(m){return Xa.checkChecksum(Nn.convertUPCEtoUPCA(m))}static determineNumSysAndCheckDigit(m,y){for(let N=0;N<=1;N++)for(let C=0;C<10;C++)if(y===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[N][C]){let M=String.fromCharCode(48+N),L=String.fromCharCode(48+C);return M+m+L}throw B.getNotFoundInstance()}getBarcodeFormat(){return pe.UPC_E}static convertUPCEtoUPCA(m){const y=m.slice(1,7).split("").map(M=>M.charCodeAt(0)),N=new Z;N.append(m.charAt(0));let C=y[5];switch(C){case 0:case 1:case 2:N.appendChars(y,0,2),N.append(C),N.append("0000"),N.appendChars(y,2,3);break;case 3:N.appendChars(y,0,3),N.append("00000"),N.appendChars(y,3,2);break;case 4:N.appendChars(y,0,4),N.append("00000"),N.append(y[4]);break;default:N.appendChars(y,0,5),N.append("0000"),N.append(C);break}return m.length>=8&&N.append(m.charAt(7)),N.toString()}}Nn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Nn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Vo extends it{constructor(m){super();let y=m==null?null:m.get(R.POSSIBLE_FORMATS),N=[];r(y)?(N.push(new xi),N.push(new Js),N.push(new Zi),N.push(new Nn)):(y.indexOf(pe.EAN_13)>-1&&N.push(new xi),y.indexOf(pe.UPC_A)>-1&&N.push(new Js),y.indexOf(pe.EAN_8)>-1&&N.push(new Zi),y.indexOf(pe.UPC_E)>-1&&N.push(new Nn)),this.readers=N}decodeRow(m,y,N){for(let C of this.readers)try{const M=C.decodeRow(m,y,N),L=M.getBarcodeFormat()===pe.EAN_13&&M.getText().charAt(0)==="0",_=N==null?null:N.get(R.POSSIBLE_FORMATS),A=_==null||_.includes(pe.UPC_A);if(L&&A){const O=M.getRawBytes(),z=new de(M.getText().substring(1),O,O?O.length:null,M.getResultPoints(),pe.UPC_A);return z.putAllMetadata(M.getResultMetadata()),z}return M}catch{}throw new B}reset(){for(let m of this.readers)m.reset()}}class dn extends it{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(m,y){for(let N=0;N<y.length;N++)if(it.patternMatchVariance(m,y[N],dn.MAX_INDIVIDUAL_VARIANCE)<dn.MAX_AVG_VARIANCE)return N;throw new B}static count(m){return wt.sum(new Int32Array(m))}static increment(m,y){let N=0,C=y[0];for(let M=1;M<m.length;M++)y[M]>C&&(C=y[M],N=M);m[N]++}static decrement(m,y){let N=0,C=y[0];for(let M=1;M<m.length;M++)y[M]<C&&(C=y[M],N=M);m[N]--}static isFinderPattern(m){let y=m[0]+m[1],N=y+m[2]+m[3],C=y/N;if(C>=dn.MIN_FINDER_PATTERN_RATIO&&C<=dn.MAX_FINDER_PATTERN_RATIO){let M=Number.MAX_SAFE_INTEGER,L=Number.MIN_SAFE_INTEGER;for(let _ of m)_>L&&(L=_),_<M&&(M=_);return L<10*M}return!1}}dn.MAX_AVG_VARIANCE=.2,dn.MAX_INDIVIDUAL_VARIANCE=.45,dn.MIN_FINDER_PATTERN_RATIO=9.5/12,dn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Cn{constructor(m,y){this.value=m,this.checksumPortion=y}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(m){if(!(m instanceof Cn))return!1;const y=m;return this.value===y.value&&this.checksumPortion===y.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ti{constructor(m,y,N,C,M){this.value=m,this.startEnd=y,this.value=m,this.startEnd=y,this.resultPoints=new Array,this.resultPoints.push(new $e(N,M)),this.resultPoints.push(new $e(C,M))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(m){if(!(m instanceof ti))return!1;const y=m;return this.value===y.value}hashCode(){return this.value}}class Si{constructor(){}static getRSSvalue(m,y,N){let C=0;for(let A of m)C+=A;let M=0,L=0,_=m.length;for(let A=0;A<_-1;A++){let O;for(O=1,L|=1<<A;O<m[A];O++,L&=~(1<<A)){let z=Si.combins(C-O-1,_-A-2);if(N&&L===0&&C-O-(_-A-1)>=_-A-1&&(z-=Si.combins(C-O-(_-A),_-A-2)),_-A-1>1){let Y=0;for(let ee=C-O-(_-A-2);ee>y;ee--)Y+=Si.combins(C-O-ee-1,_-A-3);z-=Y*(_-1-A)}else C-O>y&&z--;M+=z}C-=O}return M}static combins(m,y){let N,C;m-y>y?(C=y,N=m-y):(C=m-y,N=y);let M=1,L=1;for(let _=m;_>N;_--)M*=_,L<=C&&(M/=L,L++);for(;L<=C;)M/=L,L++;return M}}class uo{static buildBitArray(m){let y=m.length*2-1;m[m.length-1].getRightChar()==null&&(y-=1);let N=12*y,C=new E(N),M=0,_=m[0].getRightChar().getValue();for(let A=11;A>=0;--A)(_&1<<A)!=0&&C.set(M),M++;for(let A=1;A<m.length;++A){let O=m[A],z=O.getLeftChar().getValue();for(let Y=11;Y>=0;--Y)(z&1<<Y)!=0&&C.set(M),M++;if(O.getRightChar()!=null){let Y=O.getRightChar().getValue();for(let ee=11;ee>=0;--ee)(Y&1<<ee)!=0&&C.set(M),M++}}return C}}class Se{constructor(m,y){y?this.decodedInformation=null:(this.finished=m,this.decodedInformation=y)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ze{constructor(m){this.newPosition=m}getNewPosition(){return this.newPosition}}class Ze extends ze{constructor(m,y){super(m),this.value=y}getValue(){return this.value}isFNC1(){return this.value===Ze.FNC1}}Ze.FNC1="$";class yt extends ze{constructor(m,y,N){super(m),N?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=y}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class St extends ze{constructor(m,y,N){if(super(m),y<0||y>10||N<0||N>10)throw new P;this.firstDigit=y,this.secondDigit=N}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===St.FNC1}isSecondDigitFNC1(){return this.secondDigit===St.FNC1}isAnyFNC1(){return this.firstDigit===St.FNC1||this.secondDigit===St.FNC1}}St.FNC1=10;class ut{constructor(){}static parseFieldsInGeneralPurpose(m){if(!m)return null;if(m.length<2)throw new B;let y=m.substring(0,2);for(let M of ut.TWO_DIGIT_DATA_LENGTH)if(M[0]===y)return M[1]===ut.VARIABLE_LENGTH?ut.processVariableAI(2,M[2],m):ut.processFixedAI(2,M[1],m);if(m.length<3)throw new B;let N=m.substring(0,3);for(let M of ut.THREE_DIGIT_DATA_LENGTH)if(M[0]===N)return M[1]===ut.VARIABLE_LENGTH?ut.processVariableAI(3,M[2],m):ut.processFixedAI(3,M[1],m);for(let M of ut.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(M[0]===N)return M[1]===ut.VARIABLE_LENGTH?ut.processVariableAI(4,M[2],m):ut.processFixedAI(4,M[1],m);if(m.length<4)throw new B;let C=m.substring(0,4);for(let M of ut.FOUR_DIGIT_DATA_LENGTH)if(M[0]===C)return M[1]===ut.VARIABLE_LENGTH?ut.processVariableAI(4,M[2],m):ut.processFixedAI(4,M[1],m);throw new B}static processFixedAI(m,y,N){if(N.length<m)throw new B;let C=N.substring(0,m);if(N.length<m+y)throw new B;let M=N.substring(m,m+y),L=N.substring(m+y),_="("+C+")"+M,A=ut.parseFieldsInGeneralPurpose(L);return A==null?_:_+A}static processVariableAI(m,y,N){let C=N.substring(0,m),M;N.length<m+y?M=N.length:M=m+y;let L=N.substring(m,M),_=N.substring(M),A="("+C+")"+L,O=ut.parseFieldsInGeneralPurpose(_);return O==null?A:A+O}}ut.VARIABLE_LENGTH=[],ut.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ut.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ut.VARIABLE_LENGTH,20],["22",ut.VARIABLE_LENGTH,29],["30",ut.VARIABLE_LENGTH,8],["37",ut.VARIABLE_LENGTH,8],["90",ut.VARIABLE_LENGTH,30],["91",ut.VARIABLE_LENGTH,30],["92",ut.VARIABLE_LENGTH,30],["93",ut.VARIABLE_LENGTH,30],["94",ut.VARIABLE_LENGTH,30],["95",ut.VARIABLE_LENGTH,30],["96",ut.VARIABLE_LENGTH,30],["97",ut.VARIABLE_LENGTH,3],["98",ut.VARIABLE_LENGTH,30],["99",ut.VARIABLE_LENGTH,30]],ut.THREE_DIGIT_DATA_LENGTH=[["240",ut.VARIABLE_LENGTH,30],["241",ut.VARIABLE_LENGTH,30],["242",ut.VARIABLE_LENGTH,6],["250",ut.VARIABLE_LENGTH,30],["251",ut.VARIABLE_LENGTH,30],["253",ut.VARIABLE_LENGTH,17],["254",ut.VARIABLE_LENGTH,20],["400",ut.VARIABLE_LENGTH,30],["401",ut.VARIABLE_LENGTH,30],["402",17],["403",ut.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ut.VARIABLE_LENGTH,20],["421",ut.VARIABLE_LENGTH,15],["422",3],["423",ut.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ut.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ut.VARIABLE_LENGTH,15],["391",ut.VARIABLE_LENGTH,18],["392",ut.VARIABLE_LENGTH,15],["393",ut.VARIABLE_LENGTH,18],["703",ut.VARIABLE_LENGTH,30]],ut.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ut.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ut.VARIABLE_LENGTH,20],["8003",ut.VARIABLE_LENGTH,30],["8004",ut.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ut.VARIABLE_LENGTH,30],["8008",ut.VARIABLE_LENGTH,12],["8018",18],["8020",ut.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ut.VARIABLE_LENGTH,70],["8200",ut.VARIABLE_LENGTH,70]];class Ft{constructor(m){this.buffer=new Z,this.information=m}decodeAllCodes(m,y){let N=y,C=null;do{let M=this.decodeGeneralPurposeField(N,C),L=ut.parseFieldsInGeneralPurpose(M.getNewString());if(L!=null&&m.append(L),M.isRemaining()?C=""+M.getRemainingValue():C=null,N===M.getNewPosition())break;N=M.getNewPosition()}while(!0);return m.toString()}isStillNumeric(m){if(m+7>this.information.getSize())return m+4<=this.information.getSize();for(let y=m;y<m+3;++y)if(this.information.get(y))return!0;return this.information.get(m+3)}decodeNumeric(m){if(m+7>this.information.getSize()){let M=this.extractNumericValueFromBitArray(m,4);return M===0?new St(this.information.getSize(),St.FNC1,St.FNC1):new St(this.information.getSize(),M-1,St.FNC1)}let y=this.extractNumericValueFromBitArray(m,7),N=(y-8)/11,C=(y-8)%11;return new St(m+7,N,C)}extractNumericValueFromBitArray(m,y){return Ft.extractNumericValueFromBitArray(this.information,m,y)}static extractNumericValueFromBitArray(m,y,N){let C=0;for(let M=0;M<N;++M)m.get(y+M)&&(C|=1<<N-M-1);return C}decodeGeneralPurposeField(m,y){this.buffer.setLengthToZero(),y!=null&&this.buffer.append(y),this.current.setPosition(m);let N=this.parseBlocks();return N!=null&&N.isRemaining()?new yt(this.current.getPosition(),this.buffer.toString(),N.getRemainingValue()):new yt(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let m,y;do{let N=this.current.getPosition();if(this.current.isAlpha()?(y=this.parseAlphaBlock(),m=y.isFinished()):this.current.isIsoIec646()?(y=this.parseIsoIec646Block(),m=y.isFinished()):(y=this.parseNumericBlock(),m=y.isFinished()),!(N!==this.current.getPosition())&&!m)break}while(!m);return y.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let m=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(m.getNewPosition()),m.isFirstDigitFNC1()){let y;return m.isSecondDigitFNC1()?y=new yt(this.current.getPosition(),this.buffer.toString()):y=new yt(this.current.getPosition(),this.buffer.toString(),m.getSecondDigit()),new Se(!0,y)}if(this.buffer.append(m.getFirstDigit()),m.isSecondDigitFNC1()){let y=new yt(this.current.getPosition(),this.buffer.toString());return new Se(!0,y)}this.buffer.append(m.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Se(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let m=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(m.getNewPosition()),m.isFNC1()){let y=new yt(this.current.getPosition(),this.buffer.toString());return new Se(!0,y)}this.buffer.append(m.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Se(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let m=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(m.getNewPosition()),m.isFNC1()){let y=new yt(this.current.getPosition(),this.buffer.toString());return new Se(!0,y)}this.buffer.append(m.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Se(!1)}isStillIsoIec646(m){if(m+5>this.information.getSize())return!1;let y=this.extractNumericValueFromBitArray(m,5);if(y>=5&&y<16)return!0;if(m+7>this.information.getSize())return!1;let N=this.extractNumericValueFromBitArray(m,7);if(N>=64&&N<116)return!0;if(m+8>this.information.getSize())return!1;let C=this.extractNumericValueFromBitArray(m,8);return C>=232&&C<253}decodeIsoIec646(m){let y=this.extractNumericValueFromBitArray(m,5);if(y===15)return new Ze(m+5,Ze.FNC1);if(y>=5&&y<15)return new Ze(m+5,"0"+(y-5));let N=this.extractNumericValueFromBitArray(m,7);if(N>=64&&N<90)return new Ze(m+7,""+(N+1));if(N>=90&&N<116)return new Ze(m+7,""+(N+7));let C=this.extractNumericValueFromBitArray(m,8),M;switch(C){case 232:M="!";break;case 233:M='"';break;case 234:M="%";break;case 235:M="&";break;case 236:M="'";break;case 237:M="(";break;case 238:M=")";break;case 239:M="*";break;case 240:M="+";break;case 241:M=",";break;case 242:M="-";break;case 243:M=".";break;case 244:M="/";break;case 245:M=":";break;case 246:M=";";break;case 247:M="<";break;case 248:M="=";break;case 249:M=">";break;case 250:M="?";break;case 251:M="_";break;case 252:M=" ";break;default:throw new P}return new Ze(m+8,M)}isStillAlpha(m){if(m+5>this.information.getSize())return!1;let y=this.extractNumericValueFromBitArray(m,5);if(y>=5&&y<16)return!0;if(m+6>this.information.getSize())return!1;let N=this.extractNumericValueFromBitArray(m,6);return N>=16&&N<63}decodeAlphanumeric(m){let y=this.extractNumericValueFromBitArray(m,5);if(y===15)return new Ze(m+5,Ze.FNC1);if(y>=5&&y<15)return new Ze(m+5,"0"+(y-5));let N=this.extractNumericValueFromBitArray(m,6);if(N>=32&&N<58)return new Ze(m+6,""+(N+33));let C;switch(N){case 58:C="*";break;case 59:C=",";break;case 60:C="-";break;case 61:C=".";break;case 62:C="/";break;default:throw new Ge("Decoding invalid alphanumeric value: "+N)}return new Ze(m+6,C)}isAlphaTo646ToAlphaLatch(m){if(m+1>this.information.getSize())return!1;for(let y=0;y<5&&y+m<this.information.getSize();++y)if(y===2){if(!this.information.get(m+2))return!1}else if(this.information.get(m+y))return!1;return!0}isAlphaOr646ToNumericLatch(m){if(m+3>this.information.getSize())return!1;for(let y=m;y<m+3;++y)if(this.information.get(y))return!1;return!0}isNumericToAlphaNumericLatch(m){if(m+1>this.information.getSize())return!1;for(let y=0;y<4&&y+m<this.information.getSize();++y)if(this.information.get(m+y))return!1;return!0}}class It{constructor(m){this.information=m,this.generalDecoder=new Ft(m)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Et extends It{constructor(m){super(m)}encodeCompressedGtin(m,y){m.append("(01)");let N=m.length();m.append("9"),this.encodeCompressedGtinWithoutAI(m,y,N)}encodeCompressedGtinWithoutAI(m,y,N){for(let C=0;C<4;++C){let M=this.getGeneralDecoder().extractNumericValueFromBitArray(y+10*C,10);M/100===0&&m.append("0"),M/10===0&&m.append("0"),m.append(M)}Et.appendCheckDigit(m,N)}static appendCheckDigit(m,y){let N=0;for(let C=0;C<13;C++){let M=m.charAt(C+y).charCodeAt(0)-48;N+=(C&1)===0?3*M:M}N=10-N%10,N===10&&(N=0),m.append(N)}}Et.GTIN_SIZE=40;class Gt extends Et{constructor(m){super(m)}parseInformation(){let m=new Z;m.append("(01)");let y=m.length(),N=this.getGeneralDecoder().extractNumericValueFromBitArray(Gt.HEADER_SIZE,4);return m.append(N),this.encodeCompressedGtinWithoutAI(m,Gt.HEADER_SIZE+4,y),this.getGeneralDecoder().decodeAllCodes(m,Gt.HEADER_SIZE+44)}}Gt.HEADER_SIZE=4;class ua extends It{constructor(m){super(m)}parseInformation(){let m=new Z;return this.getGeneralDecoder().decodeAllCodes(m,ua.HEADER_SIZE)}}ua.HEADER_SIZE=5;class da extends Et{constructor(m){super(m)}encodeCompressedWeight(m,y,N){let C=this.getGeneralDecoder().extractNumericValueFromBitArray(y,N);this.addWeightCode(m,C);let M=this.checkWeight(C),L=1e5;for(let _=0;_<5;++_)M/L===0&&m.append("0"),L/=10;m.append(M)}}class Aa extends da{constructor(m){super(m)}parseInformation(){if(this.getInformation().getSize()!=Aa.HEADER_SIZE+da.GTIN_SIZE+Aa.WEIGHT_SIZE)throw new B;let m=new Z;return this.encodeCompressedGtin(m,Aa.HEADER_SIZE),this.encodeCompressedWeight(m,Aa.HEADER_SIZE+da.GTIN_SIZE,Aa.WEIGHT_SIZE),m.toString()}}Aa.HEADER_SIZE=5,Aa.WEIGHT_SIZE=15;class ir extends Aa{constructor(m){super(m)}addWeightCode(m,y){m.append("(3103)")}checkWeight(m){return m}}class jr extends Aa{constructor(m){super(m)}addWeightCode(m,y){y<1e4?m.append("(3202)"):m.append("(3203)")}checkWeight(m){return m<1e4?m:m-1e4}}class mr extends Et{constructor(m){super(m)}parseInformation(){if(this.getInformation().getSize()<mr.HEADER_SIZE+Et.GTIN_SIZE)throw new B;let m=new Z;this.encodeCompressedGtin(m,mr.HEADER_SIZE);let y=this.getGeneralDecoder().extractNumericValueFromBitArray(mr.HEADER_SIZE+Et.GTIN_SIZE,mr.LAST_DIGIT_SIZE);m.append("(392"),m.append(y),m.append(")");let N=this.getGeneralDecoder().decodeGeneralPurposeField(mr.HEADER_SIZE+Et.GTIN_SIZE+mr.LAST_DIGIT_SIZE,null);return m.append(N.getNewString()),m.toString()}}mr.HEADER_SIZE=8,mr.LAST_DIGIT_SIZE=2;class Qa extends Et{constructor(m){super(m)}parseInformation(){if(this.getInformation().getSize()<Qa.HEADER_SIZE+Et.GTIN_SIZE)throw new B;let m=new Z;this.encodeCompressedGtin(m,Qa.HEADER_SIZE);let y=this.getGeneralDecoder().extractNumericValueFromBitArray(Qa.HEADER_SIZE+Et.GTIN_SIZE,Qa.LAST_DIGIT_SIZE);m.append("(393"),m.append(y),m.append(")");let N=this.getGeneralDecoder().extractNumericValueFromBitArray(Qa.HEADER_SIZE+Et.GTIN_SIZE+Qa.LAST_DIGIT_SIZE,Qa.FIRST_THREE_DIGITS_SIZE);N/100==0&&m.append("0"),N/10==0&&m.append("0"),m.append(N);let C=this.getGeneralDecoder().decodeGeneralPurposeField(Qa.HEADER_SIZE+Et.GTIN_SIZE+Qa.LAST_DIGIT_SIZE+Qa.FIRST_THREE_DIGITS_SIZE,null);return m.append(C.getNewString()),m.toString()}}Qa.HEADER_SIZE=8,Qa.LAST_DIGIT_SIZE=2,Qa.FIRST_THREE_DIGITS_SIZE=10;class Vt extends da{constructor(m,y,N){super(m),this.dateCode=N,this.firstAIdigits=y}parseInformation(){if(this.getInformation().getSize()!=Vt.HEADER_SIZE+Vt.GTIN_SIZE+Vt.WEIGHT_SIZE+Vt.DATE_SIZE)throw new B;let m=new Z;return this.encodeCompressedGtin(m,Vt.HEADER_SIZE),this.encodeCompressedWeight(m,Vt.HEADER_SIZE+Vt.GTIN_SIZE,Vt.WEIGHT_SIZE),this.encodeCompressedDate(m,Vt.HEADER_SIZE+Vt.GTIN_SIZE+Vt.WEIGHT_SIZE),m.toString()}encodeCompressedDate(m,y){let N=this.getGeneralDecoder().extractNumericValueFromBitArray(y,Vt.DATE_SIZE);if(N==38400)return;m.append("("),m.append(this.dateCode),m.append(")");let C=N%32;N/=32;let M=N%12+1;N/=12;let L=N;L/10==0&&m.append("0"),m.append(L),M/10==0&&m.append("0"),m.append(M),C/10==0&&m.append("0"),m.append(C)}addWeightCode(m,y){m.append("("),m.append(this.firstAIdigits),m.append(y/1e5),m.append(")")}checkWeight(m){return m%1e5}}Vt.HEADER_SIZE=8,Vt.WEIGHT_SIZE=20,Vt.DATE_SIZE=16;function Hr(ue){try{if(ue.get(1))return new Gt(ue);if(!ue.get(2))return new ua(ue);switch(Ft.extractNumericValueFromBitArray(ue,1,4)){case 4:return new ir(ue);case 5:return new jr(ue)}switch(Ft.extractNumericValueFromBitArray(ue,1,5)){case 12:return new mr(ue);case 13:return new Qa(ue)}switch(Ft.extractNumericValueFromBitArray(ue,1,7)){case 56:return new Vt(ue,"310","11");case 57:return new Vt(ue,"320","11");case 58:return new Vt(ue,"310","13");case 59:return new Vt(ue,"320","13");case 60:return new Vt(ue,"310","15");case 61:return new Vt(ue,"320","15");case 62:return new Vt(ue,"310","17");case 63:return new Vt(ue,"320","17")}}catch(m){throw console.log(m),new Ge("unknown decoder: "+ue)}}class Sr{constructor(m,y,N,C){this.leftchar=m,this.rightchar=y,this.finderpattern=N,this.maybeLast=C}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(m,y){return m instanceof Sr?Sr.equalsOrNull(m.leftchar,y.leftchar)&&Sr.equalsOrNull(m.rightchar,y.rightchar)&&Sr.equalsOrNull(m.finderpattern,y.finderpattern):!1}static equalsOrNull(m,y){return m===null?y===null:Sr.equals(m,y)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ir{constructor(m,y,N){this.pairs=m,this.rowNumber=y,this.wasReversed=N}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(m){return this.checkEqualitity(this,m)}toString(){return"{ "+this.pairs+" }"}equals(m,y){return m instanceof Ir?this.checkEqualitity(m,y)&&m.wasReversed===y.wasReversed:!1}checkEqualitity(m,y){if(!m||!y)return;let N;return m.forEach((C,M)=>{y.forEach(L=>{C.getLeftChar().getValue()===L.getLeftChar().getValue()&&C.getRightChar().getValue()===L.getRightChar().getValue()&&C.getFinderPatter().getValue()===L.getFinderPatter().getValue()&&(N=!0)})}),N}}class pt extends dn{constructor(m){super(...arguments),this.pairs=new Array(pt.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=m===!0}decodeRow(m,y,N){this.pairs.length=0,this.startFromEven=!1;try{return pt.constructResult(this.decodeRow2pairs(m,y))}catch(C){this.verbose&&console.log(C)}return this.pairs.length=0,this.startFromEven=!0,pt.constructResult(this.decodeRow2pairs(m,y))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(m,y){let N=!1;for(;!N;)try{this.pairs.push(this.retrieveNextPair(y,this.pairs,m))}catch(M){if(M instanceof B){if(!this.pairs.length)throw new B;N=!0}}if(this.checkChecksum())return this.pairs;let C;if(this.rows.length?C=!0:C=!1,this.storeRow(m,!1),C){let M=this.checkRowsBoolean(!1);if(M!=null||(M=this.checkRowsBoolean(!0),M!=null))return M}throw new B}checkRowsBoolean(m){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,m&&(this.rows=this.rows.reverse());let y=null;try{y=this.checkRows(new Array,0)}catch(N){this.verbose&&console.log(N)}return m&&(this.rows=this.rows.reverse()),y}checkRows(m,y){for(let N=y;N<this.rows.length;N++){let C=this.rows[N];this.pairs.length=0;for(let L of m)this.pairs.push(L.getPairs());if(this.pairs.push(C.getPairs()),!pt.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let M=new Array(m);M.push(C);try{return this.checkRows(M,N+1)}catch(L){this.verbose&&console.log(L)}}throw new B}static isValidSequence(m){for(let y of pt.FINDER_PATTERN_SEQUENCES){if(m.length>y.length)continue;let N=!0;for(let C=0;C<m.length;C++)if(m[C].getFinderPattern().getValue()!=y[C]){N=!1;break}if(N)return!0}return!1}storeRow(m,y){let N=0,C=!1,M=!1;for(;N<this.rows.length;){let L=this.rows[N];if(L.getRowNumber()>m){M=L.isEquivalent(this.pairs);break}C=L.isEquivalent(this.pairs),N++}M||C||pt.isPartialRow(this.pairs,this.rows)||(this.rows.push(N,new Ir(this.pairs,m,y)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(m,y){for(let N of y)if(N.getPairs().length!==m.length){for(let C of N.getPairs())for(let M of m)if(Sr.equals(C,M))break}}static isPartialRow(m,y){for(let N of y){let C=!0;for(let M of m){let L=!1;for(let _ of N.getPairs())if(M.equals(_)){L=!0;break}if(!L){C=!1;break}}if(C)return!0}return!1}getRows(){return this.rows}static constructResult(m){let y=uo.buildBitArray(m),C=Hr(y).parseInformation(),M=m[0].getFinderPattern().getResultPoints(),L=m[m.length-1].getFinderPattern().getResultPoints(),_=[M[0],M[1],L[0],L[1]];return new de(C,null,null,_,pe.RSS_EXPANDED,null)}checkChecksum(){let m=this.pairs.get(0),y=m.getLeftChar(),N=m.getRightChar();if(N==null)return!1;let C=N.getChecksumPortion(),M=2;for(let _=1;_<this.pairs.size();++_){let A=this.pairs.get(_);C+=A.getLeftChar().getChecksumPortion(),M++;let O=A.getRightChar();O!=null&&(C+=O.getChecksumPortion(),M++)}return C%=211,211*(M-4)+C==y.getValue()}static getNextSecondBar(m,y){let N;return m.get(y)?(N=m.getNextUnset(y),N=m.getNextSet(N)):(N=m.getNextSet(y),N=m.getNextUnset(N)),N}retrieveNextPair(m,y,N){let C=y.length%2==0;this.startFromEven&&(C=!C);let M,L=!0,_=-1;do this.findNextPair(m,y,_),M=this.parseFoundFinderPattern(m,N,C),M==null?_=pt.getNextSecondBar(m,this.startEnd[0]):L=!1;while(L);let A=this.decodeDataCharacter(m,M,C,!0);if(!this.isEmptyPair(y)&&y[y.length-1].mustBeLast())throw new B;let O;try{O=this.decodeDataCharacter(m,M,C,!1)}catch(z){O=null,this.verbose&&console.log(z)}return new Sr(A,O,M,!0)}isEmptyPair(m){return m.length===0}findNextPair(m,y,N){let C=this.getDecodeFinderCounters();C[0]=0,C[1]=0,C[2]=0,C[3]=0;let M=m.getSize(),L;N>=0?L=N:this.isEmptyPair(y)?L=0:L=y[y.length-1].getFinderPattern().getStartEnd()[1];let _=y.length%2!=0;this.startFromEven&&(_=!_);let A=!1;for(;L<M&&(A=!m.get(L),!!A);)L++;let O=0,z=L;for(let Y=L;Y<M;Y++)if(m.get(Y)!=A)C[O]++;else{if(O==3){if(_&&pt.reverseCounters(C),pt.isFinderPattern(C)){this.startEnd[0]=z,this.startEnd[1]=Y;return}_&&pt.reverseCounters(C),z+=C[0]+C[1],C[0]=C[2],C[1]=C[3],C[2]=0,C[3]=0,O--}else O++;C[O]=1,A=!A}throw new B}static reverseCounters(m){let y=m.length;for(let N=0;N<y/2;++N){let C=m[N];m[N]=m[y-N-1],m[y-N-1]=C}}parseFoundFinderPattern(m,y,N){let C,M,L;if(N){let O=this.startEnd[0]-1;for(;O>=0&&!m.get(O);)O--;O++,C=this.startEnd[0]-O,M=O,L=this.startEnd[1]}else M=this.startEnd[0],L=m.getNextUnset(this.startEnd[1]+1),C=L-this.startEnd[1];let _=this.getDecodeFinderCounters();b.arraycopy(_,0,_,1,_.length-1),_[0]=C;let A;try{A=this.parseFinderValue(_,pt.FINDER_PATTERNS)}catch{return null}return new ti(A,[M,L],M,L,y)}decodeDataCharacter(m,y,N,C){let M=this.getDataCharacterCounters();for(let tt=0;tt<M.length;tt++)M[tt]=0;if(C)pt.recordPatternInReverse(m,y.getStartEnd()[0],M);else{pt.recordPattern(m,y.getStartEnd()[1],M);for(let tt=0,mt=M.length-1;tt<mt;tt++,mt--){let Mt=M[tt];M[tt]=M[mt],M[mt]=Mt}}let L=17,_=wt.sum(new Int32Array(M))/L,A=(y.getStartEnd()[1]-y.getStartEnd()[0])/15;if(Math.abs(_-A)/A>.3)throw new B;let O=this.getOddCounts(),z=this.getEvenCounts(),Y=this.getOddRoundingErrors(),ee=this.getEvenRoundingErrors();for(let tt=0;tt<M.length;tt++){let mt=1*M[tt]/_,Mt=mt+.5;if(Mt<1){if(mt<.3)throw new B;Mt=1}else if(Mt>8){if(mt>8.7)throw new B;Mt=8}let Dt=tt/2;(tt&1)==0?(O[Dt]=Mt,Y[Dt]=mt-Mt):(z[Dt]=Mt,ee[Dt]=mt-Mt)}this.adjustOddEvenCounts(L);let ie=4*y.getValue()+(N?0:2)+(C?0:1)-1,oe=0,fe=0;for(let tt=O.length-1;tt>=0;tt--){if(pt.isNotA1left(y,N,C)){let mt=pt.WEIGHTS[ie][2*tt];fe+=O[tt]*mt}oe+=O[tt]}let ge=0;for(let tt=z.length-1;tt>=0;tt--)if(pt.isNotA1left(y,N,C)){let mt=pt.WEIGHTS[ie][2*tt+1];ge+=z[tt]*mt}let me=fe+ge;if((oe&1)!=0||oe>13||oe<4)throw new B;let ve=(13-oe)/2,we=pt.SYMBOL_WIDEST[ve],be=9-we,Ae=Si.getRSSvalue(O,we,!0),Ce=Si.getRSSvalue(z,be,!1),Ue=pt.EVEN_TOTAL_SUBSET[ve],Xe=pt.GSUM[ve],Ve=Ae*Ue+Ce+Xe;return new Cn(Ve,me)}static isNotA1left(m,y,N){return!(m.getValue()==0&&y&&N)}adjustOddEvenCounts(m){let y=wt.sum(new Int32Array(this.getOddCounts())),N=wt.sum(new Int32Array(this.getEvenCounts())),C=!1,M=!1;y>13?M=!0:y<4&&(C=!0);let L=!1,_=!1;N>13?_=!0:N<4&&(L=!0);let A=y+N-m,O=(y&1)==1,z=(N&1)==0;if(A==1)if(O){if(z)throw new B;M=!0}else{if(!z)throw new B;_=!0}else if(A==-1)if(O){if(z)throw new B;C=!0}else{if(!z)throw new B;L=!0}else if(A==0){if(O){if(!z)throw new B;y<N?(C=!0,_=!0):(M=!0,L=!0)}else if(z)throw new B}else throw new B;if(C){if(M)throw new B;pt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(M&&pt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),L){if(_)throw new B;pt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&pt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}pt.SYMBOL_WIDEST=[7,5,4,3,1],pt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],pt.GSUM=[0,348,1388,2948,3988],pt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],pt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],pt.FINDER_PAT_A=0,pt.FINDER_PAT_B=1,pt.FINDER_PAT_C=2,pt.FINDER_PAT_D=3,pt.FINDER_PAT_E=4,pt.FINDER_PAT_F=5,pt.FINDER_PATTERN_SEQUENCES=[[pt.FINDER_PAT_A,pt.FINDER_PAT_A],[pt.FINDER_PAT_A,pt.FINDER_PAT_B,pt.FINDER_PAT_B],[pt.FINDER_PAT_A,pt.FINDER_PAT_C,pt.FINDER_PAT_B,pt.FINDER_PAT_D],[pt.FINDER_PAT_A,pt.FINDER_PAT_E,pt.FINDER_PAT_B,pt.FINDER_PAT_D,pt.FINDER_PAT_C],[pt.FINDER_PAT_A,pt.FINDER_PAT_E,pt.FINDER_PAT_B,pt.FINDER_PAT_D,pt.FINDER_PAT_D,pt.FINDER_PAT_F],[pt.FINDER_PAT_A,pt.FINDER_PAT_E,pt.FINDER_PAT_B,pt.FINDER_PAT_D,pt.FINDER_PAT_E,pt.FINDER_PAT_F,pt.FINDER_PAT_F],[pt.FINDER_PAT_A,pt.FINDER_PAT_A,pt.FINDER_PAT_B,pt.FINDER_PAT_B,pt.FINDER_PAT_C,pt.FINDER_PAT_C,pt.FINDER_PAT_D,pt.FINDER_PAT_D],[pt.FINDER_PAT_A,pt.FINDER_PAT_A,pt.FINDER_PAT_B,pt.FINDER_PAT_B,pt.FINDER_PAT_C,pt.FINDER_PAT_C,pt.FINDER_PAT_D,pt.FINDER_PAT_E,pt.FINDER_PAT_E],[pt.FINDER_PAT_A,pt.FINDER_PAT_A,pt.FINDER_PAT_B,pt.FINDER_PAT_B,pt.FINDER_PAT_C,pt.FINDER_PAT_C,pt.FINDER_PAT_D,pt.FINDER_PAT_E,pt.FINDER_PAT_F,pt.FINDER_PAT_F],[pt.FINDER_PAT_A,pt.FINDER_PAT_A,pt.FINDER_PAT_B,pt.FINDER_PAT_B,pt.FINDER_PAT_C,pt.FINDER_PAT_D,pt.FINDER_PAT_D,pt.FINDER_PAT_E,pt.FINDER_PAT_E,pt.FINDER_PAT_F,pt.FINDER_PAT_F]],pt.MAX_PAIRS=11;class ai extends Cn{constructor(m,y,N){super(m,y),this.count=0,this.finderPattern=N}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class lr extends dn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(m,y,N){const C=this.decodePair(y,!1,m,N);lr.addOrTally(this.possibleLeftPairs,C),y.reverse();let M=this.decodePair(y,!0,m,N);lr.addOrTally(this.possibleRightPairs,M),y.reverse();for(let L of this.possibleLeftPairs)if(L.getCount()>1){for(let _ of this.possibleRightPairs)if(_.getCount()>1&&lr.checkChecksum(L,_))return lr.constructResult(L,_)}throw new B}static addOrTally(m,y){if(y==null)return;let N=!1;for(let C of m)if(C.getValue()===y.getValue()){C.incrementCount(),N=!0;break}N||m.push(y)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(m,y){let N=4537077*m.getValue()+y.getValue(),C=new String(N).toString(),M=new Z;for(let O=13-C.length;O>0;O--)M.append("0");M.append(C);let L=0;for(let O=0;O<13;O++){let z=M.charAt(O).charCodeAt(0)-48;L+=(O&1)===0?3*z:z}L=10-L%10,L===10&&(L=0),M.append(L.toString());let _=m.getFinderPattern().getResultPoints(),A=y.getFinderPattern().getResultPoints();return new de(M.toString(),null,0,[_[0],_[1],A[0],A[1]],pe.RSS_14,new Date().getTime())}static checkChecksum(m,y){let N=(m.getChecksumPortion()+16*y.getChecksumPortion())%79,C=9*m.getFinderPattern().getValue()+y.getFinderPattern().getValue();return C>72&&C--,C>8&&C--,N===C}decodePair(m,y,N,C){try{let M=this.findFinderPattern(m,y),L=this.parseFoundFinderPattern(m,N,y,M),_=C==null?null:C.get(R.NEED_RESULT_POINT_CALLBACK);if(_!=null){let z=(M[0]+M[1])/2;y&&(z=m.getSize()-1-z),_.foundPossibleResultPoint(new $e(z,N))}let A=this.decodeDataCharacter(m,L,!0),O=this.decodeDataCharacter(m,L,!1);return new ai(1597*A.getValue()+O.getValue(),A.getChecksumPortion()+4*O.getChecksumPortion(),L)}catch{return null}}decodeDataCharacter(m,y,N){let C=this.getDataCharacterCounters();for(let ge=0;ge<C.length;ge++)C[ge]=0;if(N)it.recordPatternInReverse(m,y.getStartEnd()[0],C);else{it.recordPattern(m,y.getStartEnd()[1]+1,C);for(let ge=0,me=C.length-1;ge<me;ge++,me--){let ve=C[ge];C[ge]=C[me],C[me]=ve}}let M=N?16:15,L=wt.sum(new Int32Array(C))/M,_=this.getOddCounts(),A=this.getEvenCounts(),O=this.getOddRoundingErrors(),z=this.getEvenRoundingErrors();for(let ge=0;ge<C.length;ge++){let me=C[ge]/L,ve=Math.floor(me+.5);ve<1?ve=1:ve>8&&(ve=8);let we=Math.floor(ge/2);(ge&1)===0?(_[we]=ve,O[we]=me-ve):(A[we]=ve,z[we]=me-ve)}this.adjustOddEvenCounts(N,M);let Y=0,ee=0;for(let ge=_.length-1;ge>=0;ge--)ee*=9,ee+=_[ge],Y+=_[ge];let ie=0,oe=0;for(let ge=A.length-1;ge>=0;ge--)ie*=9,ie+=A[ge],oe+=A[ge];let fe=ee+3*ie;if(N){if((Y&1)!==0||Y>12||Y<4)throw new B;let ge=(12-Y)/2,me=lr.OUTSIDE_ODD_WIDEST[ge],ve=9-me,we=Si.getRSSvalue(_,me,!1),be=Si.getRSSvalue(A,ve,!0),Ae=lr.OUTSIDE_EVEN_TOTAL_SUBSET[ge],Ce=lr.OUTSIDE_GSUM[ge];return new Cn(we*Ae+be+Ce,fe)}else{if((oe&1)!==0||oe>10||oe<4)throw new B;let ge=(10-oe)/2,me=lr.INSIDE_ODD_WIDEST[ge],ve=9-me,we=Si.getRSSvalue(_,me,!0),be=Si.getRSSvalue(A,ve,!1),Ae=lr.INSIDE_ODD_TOTAL_SUBSET[ge],Ce=lr.INSIDE_GSUM[ge];return new Cn(be*Ae+we+Ce,fe)}}findFinderPattern(m,y){let N=this.getDecodeFinderCounters();N[0]=0,N[1]=0,N[2]=0,N[3]=0;let C=m.getSize(),M=!1,L=0;for(;L<C&&(M=!m.get(L),y!==M);)L++;let _=0,A=L;for(let O=L;O<C;O++)if(m.get(O)!==M)N[_]++;else{if(_===3){if(dn.isFinderPattern(N))return[A,O];A+=N[0]+N[1],N[0]=N[2],N[1]=N[3],N[2]=0,N[3]=0,_--}else _++;N[_]=1,M=!M}throw new B}parseFoundFinderPattern(m,y,N,C){let M=m.get(C[0]),L=C[0]-1;for(;L>=0&&M!==m.get(L);)L--;L++;const _=C[0]-L,A=this.getDecodeFinderCounters(),O=new Int32Array(A.length);b.arraycopy(A,0,O,1,A.length-1),O[0]=_;const z=this.parseFinderValue(O,lr.FINDER_PATTERNS);let Y=L,ee=C[1];return N&&(Y=m.getSize()-1-Y,ee=m.getSize()-1-ee),new ti(z,[L,C[1]],Y,ee,y)}adjustOddEvenCounts(m,y){let N=wt.sum(new Int32Array(this.getOddCounts())),C=wt.sum(new Int32Array(this.getEvenCounts())),M=!1,L=!1,_=!1,A=!1;m?(N>12?L=!0:N<4&&(M=!0),C>12?A=!0:C<4&&(_=!0)):(N>11?L=!0:N<5&&(M=!0),C>10?A=!0:C<4&&(_=!0));let O=N+C-y,z=(N&1)===(m?1:0),Y=(C&1)===1;if(O===1)if(z){if(Y)throw new B;L=!0}else{if(!Y)throw new B;A=!0}else if(O===-1)if(z){if(Y)throw new B;M=!0}else{if(!Y)throw new B;_=!0}else if(O===0){if(z){if(!Y)throw new B;N<C?(M=!0,A=!0):(L=!0,_=!0)}else if(Y)throw new B}else throw new B;if(M){if(L)throw new B;dn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(L&&dn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),_){if(A)throw new B;dn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}A&&dn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}lr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],lr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],lr.OUTSIDE_GSUM=[0,161,961,2015,2715],lr.INSIDE_GSUM=[0,336,1036,1516],lr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],lr.INSIDE_ODD_WIDEST=[2,4,6,8],lr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class jn extends it{constructor(m,y){super(),this.readers=[],this.verbose=y===!0;const N=m?m.get(R.POSSIBLE_FORMATS):null,C=m&&m.get(R.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;N?((N.includes(pe.EAN_13)||N.includes(pe.UPC_A)||N.includes(pe.EAN_8)||N.includes(pe.UPC_E))&&this.readers.push(new Vo(m)),N.includes(pe.CODE_39)&&this.readers.push(new Ot(C)),N.includes(pe.CODE_128)&&this.readers.push(new Ye),N.includes(pe.ITF)&&this.readers.push(new st),N.includes(pe.RSS_14)&&this.readers.push(new lr),N.includes(pe.RSS_EXPANDED)&&this.readers.push(new pt(this.verbose))):(this.readers.push(new Vo(m)),this.readers.push(new Ot),this.readers.push(new Vo(m)),this.readers.push(new Ye),this.readers.push(new st),this.readers.push(new lr),this.readers.push(new pt(this.verbose)))}decodeRow(m,y,N){for(let C=0;C<this.readers.length;C++)try{return this.readers[C].decodeRow(m,y,N)}catch{}throw new B}reset(){this.readers.forEach(m=>m.reset())}}class mi extends ce{constructor(m=500,y){super(new jn(y),m,y)}}class ar{constructor(m,y,N){this.ecCodewords=m,this.ecBlocks=[y],N&&this.ecBlocks.push(N)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ga{constructor(m,y){this.count=m,this.dataCodewords=y}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class qt{constructor(m,y,N,C,M,L){this.versionNumber=m,this.symbolSizeRows=y,this.symbolSizeColumns=N,this.dataRegionSizeRows=C,this.dataRegionSizeColumns=M,this.ecBlocks=L;let _=0;const A=L.getECCodewords(),O=L.getECBlocks();for(let z of O)_+=z.getCount()*(z.getDataCodewords()+A);this.totalCodewords=_}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(m,y){if((m&1)!==0||(y&1)!==0)throw new P;for(let N of qt.VERSIONS)if(N.symbolSizeRows===m&&N.symbolSizeColumns===y)return N;throw new P}toString(){return""+this.versionNumber}static buildVersions(){return[new qt(1,10,10,8,8,new ar(5,new Ga(1,3))),new qt(2,12,12,10,10,new ar(7,new Ga(1,5))),new qt(3,14,14,12,12,new ar(10,new Ga(1,8))),new qt(4,16,16,14,14,new ar(12,new Ga(1,12))),new qt(5,18,18,16,16,new ar(14,new Ga(1,18))),new qt(6,20,20,18,18,new ar(18,new Ga(1,22))),new qt(7,22,22,20,20,new ar(20,new Ga(1,30))),new qt(8,24,24,22,22,new ar(24,new Ga(1,36))),new qt(9,26,26,24,24,new ar(28,new Ga(1,44))),new qt(10,32,32,14,14,new ar(36,new Ga(1,62))),new qt(11,36,36,16,16,new ar(42,new Ga(1,86))),new qt(12,40,40,18,18,new ar(48,new Ga(1,114))),new qt(13,44,44,20,20,new ar(56,new Ga(1,144))),new qt(14,48,48,22,22,new ar(68,new Ga(1,174))),new qt(15,52,52,24,24,new ar(42,new Ga(2,102))),new qt(16,64,64,14,14,new ar(56,new Ga(2,140))),new qt(17,72,72,16,16,new ar(36,new Ga(4,92))),new qt(18,80,80,18,18,new ar(48,new Ga(4,114))),new qt(19,88,88,20,20,new ar(56,new Ga(4,144))),new qt(20,96,96,22,22,new ar(68,new Ga(4,174))),new qt(21,104,104,24,24,new ar(56,new Ga(6,136))),new qt(22,120,120,18,18,new ar(68,new Ga(6,175))),new qt(23,132,132,20,20,new ar(62,new Ga(8,163))),new qt(24,144,144,22,22,new ar(62,new Ga(8,156),new Ga(2,155))),new qt(25,8,18,6,16,new ar(7,new Ga(1,5))),new qt(26,8,32,6,14,new ar(11,new Ga(1,10))),new qt(27,12,26,10,24,new ar(14,new Ga(1,16))),new qt(28,12,36,10,16,new ar(18,new Ga(1,22))),new qt(29,16,36,14,16,new ar(24,new Ga(1,32))),new qt(30,16,48,14,22,new ar(28,new Ga(1,49)))]}}qt.VERSIONS=qt.buildVersions();class pa{constructor(m){const y=m.getHeight();if(y<8||y>144||(y&1)!==0)throw new P;this.version=pa.readVersion(m),this.mappingBitMatrix=this.extractDataRegion(m),this.readMappingMatrix=new J(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(m){const y=m.getHeight(),N=m.getWidth();return qt.getVersionForDimensions(y,N)}readCodewords(){const m=new Int8Array(this.version.getTotalCodewords());let y=0,N=4,C=0;const M=this.mappingBitMatrix.getHeight(),L=this.mappingBitMatrix.getWidth();let _=!1,A=!1,O=!1,z=!1;do if(N===M&&C===0&&!_)m[y++]=this.readCorner1(M,L)&255,N-=2,C+=2,_=!0;else if(N===M-2&&C===0&&(L&3)!==0&&!A)m[y++]=this.readCorner2(M,L)&255,N-=2,C+=2,A=!0;else if(N===M+4&&C===2&&(L&7)===0&&!O)m[y++]=this.readCorner3(M,L)&255,N-=2,C+=2,O=!0;else if(N===M-2&&C===0&&(L&7)===4&&!z)m[y++]=this.readCorner4(M,L)&255,N-=2,C+=2,z=!0;else{do N<M&&C>=0&&!this.readMappingMatrix.get(C,N)&&(m[y++]=this.readUtah(N,C,M,L)&255),N-=2,C+=2;while(N>=0&&C<L);N+=1,C+=3;do N>=0&&C<L&&!this.readMappingMatrix.get(C,N)&&(m[y++]=this.readUtah(N,C,M,L)&255),N+=2,C-=2;while(N<M&&C>=0);N+=3,C+=1}while(N<M||C<L);if(y!==this.version.getTotalCodewords())throw new P;return m}readModule(m,y,N,C){return m<0&&(m+=N,y+=4-(N+4&7)),y<0&&(y+=C,m+=4-(C+4&7)),this.readMappingMatrix.set(y,m),this.mappingBitMatrix.get(y,m)}readUtah(m,y,N,C){let M=0;return this.readModule(m-2,y-2,N,C)&&(M|=1),M<<=1,this.readModule(m-2,y-1,N,C)&&(M|=1),M<<=1,this.readModule(m-1,y-2,N,C)&&(M|=1),M<<=1,this.readModule(m-1,y-1,N,C)&&(M|=1),M<<=1,this.readModule(m-1,y,N,C)&&(M|=1),M<<=1,this.readModule(m,y-2,N,C)&&(M|=1),M<<=1,this.readModule(m,y-1,N,C)&&(M|=1),M<<=1,this.readModule(m,y,N,C)&&(M|=1),M}readCorner1(m,y){let N=0;return this.readModule(m-1,0,m,y)&&(N|=1),N<<=1,this.readModule(m-1,1,m,y)&&(N|=1),N<<=1,this.readModule(m-1,2,m,y)&&(N|=1),N<<=1,this.readModule(0,y-2,m,y)&&(N|=1),N<<=1,this.readModule(0,y-1,m,y)&&(N|=1),N<<=1,this.readModule(1,y-1,m,y)&&(N|=1),N<<=1,this.readModule(2,y-1,m,y)&&(N|=1),N<<=1,this.readModule(3,y-1,m,y)&&(N|=1),N}readCorner2(m,y){let N=0;return this.readModule(m-3,0,m,y)&&(N|=1),N<<=1,this.readModule(m-2,0,m,y)&&(N|=1),N<<=1,this.readModule(m-1,0,m,y)&&(N|=1),N<<=1,this.readModule(0,y-4,m,y)&&(N|=1),N<<=1,this.readModule(0,y-3,m,y)&&(N|=1),N<<=1,this.readModule(0,y-2,m,y)&&(N|=1),N<<=1,this.readModule(0,y-1,m,y)&&(N|=1),N<<=1,this.readModule(1,y-1,m,y)&&(N|=1),N}readCorner3(m,y){let N=0;return this.readModule(m-1,0,m,y)&&(N|=1),N<<=1,this.readModule(m-1,y-1,m,y)&&(N|=1),N<<=1,this.readModule(0,y-3,m,y)&&(N|=1),N<<=1,this.readModule(0,y-2,m,y)&&(N|=1),N<<=1,this.readModule(0,y-1,m,y)&&(N|=1),N<<=1,this.readModule(1,y-3,m,y)&&(N|=1),N<<=1,this.readModule(1,y-2,m,y)&&(N|=1),N<<=1,this.readModule(1,y-1,m,y)&&(N|=1),N}readCorner4(m,y){let N=0;return this.readModule(m-3,0,m,y)&&(N|=1),N<<=1,this.readModule(m-2,0,m,y)&&(N|=1),N<<=1,this.readModule(m-1,0,m,y)&&(N|=1),N<<=1,this.readModule(0,y-2,m,y)&&(N|=1),N<<=1,this.readModule(0,y-1,m,y)&&(N|=1),N<<=1,this.readModule(1,y-1,m,y)&&(N|=1),N<<=1,this.readModule(2,y-1,m,y)&&(N|=1),N<<=1,this.readModule(3,y-1,m,y)&&(N|=1),N}extractDataRegion(m){const y=this.version.getSymbolSizeRows(),N=this.version.getSymbolSizeColumns();if(m.getHeight()!==y)throw new h("Dimension of bitMatrix must match the version size");const C=this.version.getDataRegionSizeRows(),M=this.version.getDataRegionSizeColumns(),L=y/C|0,_=N/M|0,A=L*C,O=_*M,z=new J(O,A);for(let Y=0;Y<L;++Y){const ee=Y*C;for(let ie=0;ie<_;++ie){const oe=ie*M;for(let fe=0;fe<C;++fe){const ge=Y*(C+2)+1+fe,me=ee+fe;for(let ve=0;ve<M;++ve){const we=ie*(M+2)+1+ve;if(m.get(we,ge)){const be=oe+ve;z.set(be,me)}}}}}return z}}class ki{constructor(m,y){this.numDataCodewords=m,this.codewords=y}static getDataBlocks(m,y){const N=y.getECBlocks();let C=0;const M=N.getECBlocks();for(let fe of M)C+=fe.getCount();const L=new Array(C);let _=0;for(let fe of M)for(let ge=0;ge<fe.getCount();ge++){const me=fe.getDataCodewords(),ve=N.getECCodewords()+me;L[_++]=new ki(me,new Uint8Array(ve))}const O=L[0].codewords.length-N.getECCodewords(),z=O-1;let Y=0;for(let fe=0;fe<z;fe++)for(let ge=0;ge<_;ge++)L[ge].codewords[fe]=m[Y++];const ee=y.getVersionNumber()===24,ie=ee?8:_;for(let fe=0;fe<ie;fe++)L[fe].codewords[O-1]=m[Y++];const oe=L[0].codewords.length;for(let fe=O;fe<oe;fe++)for(let ge=0;ge<_;ge++){const me=ee?(ge+8)%_:ge,ve=ee&&me>7?fe-1:fe;L[me].codewords[ve]=m[Y++]}if(Y!==m.length)throw new h;return L}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class gn{constructor(m){this.bytes=m,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(m){if(m<1||m>32||m>this.available())throw new h(""+m);let y=0,N=this.bitOffset,C=this.byteOffset;const M=this.bytes;if(N>0){const L=8-N,_=m<L?m:L,A=L-_,O=255>>8-_<<A;y=(M[C]&O)>>A,m-=_,N+=_,N===8&&(N=0,C++)}if(m>0){for(;m>=8;)y=y<<8|M[C]&255,C++,m-=8;if(m>0){const L=8-m,_=255>>L<<L;y=y<<m|(M[C]&_)>>L,N+=m}}return this.bitOffset=N,this.byteOffset=C,y}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ma;(function(ue){ue[ue.PAD_ENCODE=0]="PAD_ENCODE",ue[ue.ASCII_ENCODE=1]="ASCII_ENCODE",ue[ue.C40_ENCODE=2]="C40_ENCODE",ue[ue.TEXT_ENCODE=3]="TEXT_ENCODE",ue[ue.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",ue[ue.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",ue[ue.BASE256_ENCODE=6]="BASE256_ENCODE"})(ma||(ma={}));class An{static decode(m){const y=new gn(m),N=new Z,C=new Z,M=new Array;let L=ma.ASCII_ENCODE;do if(L===ma.ASCII_ENCODE)L=this.decodeAsciiSegment(y,N,C);else{switch(L){case ma.C40_ENCODE:this.decodeC40Segment(y,N);break;case ma.TEXT_ENCODE:this.decodeTextSegment(y,N);break;case ma.ANSIX12_ENCODE:this.decodeAnsiX12Segment(y,N);break;case ma.EDIFACT_ENCODE:this.decodeEdifactSegment(y,N);break;case ma.BASE256_ENCODE:this.decodeBase256Segment(y,N,M);break;default:throw new P}L=ma.ASCII_ENCODE}while(L!==ma.PAD_ENCODE&&y.available()>0);return C.length()>0&&N.append(C.toString()),new ke(m,N.toString(),M.length===0?null:M,null)}static decodeAsciiSegment(m,y,N){let C=!1;do{let M=m.readBits(8);if(M===0)throw new P;if(M<=128)return C&&(M+=128),y.append(String.fromCharCode(M-1)),ma.ASCII_ENCODE;if(M===129)return ma.PAD_ENCODE;if(M<=229){const L=M-130;L<10&&y.append("0"),y.append(""+L)}else switch(M){case 230:return ma.C40_ENCODE;case 231:return ma.BASE256_ENCODE;case 232:y.append("");break;case 233:case 234:break;case 235:C=!0;break;case 236:y.append("[)>05"),N.insert(0,"");break;case 237:y.append("[)>06"),N.insert(0,"");break;case 238:return ma.ANSIX12_ENCODE;case 239:return ma.TEXT_ENCODE;case 240:return ma.EDIFACT_ENCODE;case 241:break;default:if(M!==254||m.available()!==0)throw new P;break}}while(m.available()>0);return ma.ASCII_ENCODE}static decodeC40Segment(m,y){let N=!1;const C=[];let M=0;do{if(m.available()===8)return;const L=m.readBits(8);if(L===254)return;this.parseTwoBytes(L,m.readBits(8),C);for(let _=0;_<3;_++){const A=C[_];switch(M){case 0:if(A<3)M=A+1;else if(A<this.C40_BASIC_SET_CHARS.length){const O=this.C40_BASIC_SET_CHARS[A];N?(y.append(String.fromCharCode(O.charCodeAt(0)+128)),N=!1):y.append(O)}else throw new P;break;case 1:N?(y.append(String.fromCharCode(A+128)),N=!1):y.append(String.fromCharCode(A)),M=0;break;case 2:if(A<this.C40_SHIFT2_SET_CHARS.length){const O=this.C40_SHIFT2_SET_CHARS[A];N?(y.append(String.fromCharCode(O.charCodeAt(0)+128)),N=!1):y.append(O)}else switch(A){case 27:y.append("");break;case 30:N=!0;break;default:throw new P}M=0;break;case 3:N?(y.append(String.fromCharCode(A+224)),N=!1):y.append(String.fromCharCode(A+96)),M=0;break;default:throw new P}}}while(m.available()>0)}static decodeTextSegment(m,y){let N=!1,C=[],M=0;do{if(m.available()===8)return;const L=m.readBits(8);if(L===254)return;this.parseTwoBytes(L,m.readBits(8),C);for(let _=0;_<3;_++){const A=C[_];switch(M){case 0:if(A<3)M=A+1;else if(A<this.TEXT_BASIC_SET_CHARS.length){const O=this.TEXT_BASIC_SET_CHARS[A];N?(y.append(String.fromCharCode(O.charCodeAt(0)+128)),N=!1):y.append(O)}else throw new P;break;case 1:N?(y.append(String.fromCharCode(A+128)),N=!1):y.append(String.fromCharCode(A)),M=0;break;case 2:if(A<this.TEXT_SHIFT2_SET_CHARS.length){const O=this.TEXT_SHIFT2_SET_CHARS[A];N?(y.append(String.fromCharCode(O.charCodeAt(0)+128)),N=!1):y.append(O)}else switch(A){case 27:y.append("");break;case 30:N=!0;break;default:throw new P}M=0;break;case 3:if(A<this.TEXT_SHIFT3_SET_CHARS.length){const O=this.TEXT_SHIFT3_SET_CHARS[A];N?(y.append(String.fromCharCode(O.charCodeAt(0)+128)),N=!1):y.append(O),M=0}else throw new P;break;default:throw new P}}}while(m.available()>0)}static decodeAnsiX12Segment(m,y){const N=[];do{if(m.available()===8)return;const C=m.readBits(8);if(C===254)return;this.parseTwoBytes(C,m.readBits(8),N);for(let M=0;M<3;M++){const L=N[M];switch(L){case 0:y.append("\r");break;case 1:y.append("*");break;case 2:y.append(">");break;case 3:y.append(" ");break;default:if(L<14)y.append(String.fromCharCode(L+44));else if(L<40)y.append(String.fromCharCode(L+51));else throw new P;break}}}while(m.available()>0)}static parseTwoBytes(m,y,N){let C=(m<<8)+y-1,M=Math.floor(C/1600);N[0]=M,C-=M*1600,M=Math.floor(C/40),N[1]=M,N[2]=C-M*40}static decodeEdifactSegment(m,y){do{if(m.available()<=16)return;for(let N=0;N<4;N++){let C=m.readBits(6);if(C===31){const M=8-m.getBitOffset();M!==8&&m.readBits(M);return}(C&32)===0&&(C|=64),y.append(String.fromCharCode(C))}}while(m.available()>0)}static decodeBase256Segment(m,y,N){let C=1+m.getByteOffset();const M=this.unrandomize255State(m.readBits(8),C++);let L;if(M===0?L=m.available()/8|0:M<250?L=M:L=250*(M-249)+this.unrandomize255State(m.readBits(8),C++),L<0)throw new P;const _=new Uint8Array(L);for(let A=0;A<L;A++){if(m.available()<8)throw new P;_[A]=this.unrandomize255State(m.readBits(8),C++)}N.push(_);try{y.append(U.decode(_,te.ISO88591))}catch(A){throw new Ge("Platform does not support required encoding: "+A.message)}}static unrandomize255State(m,y){const N=149*y%255+1,C=m-N;return C>=0?C:C+256}}An.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],An.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],An.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],An.TEXT_SHIFT2_SET_CHARS=An.C40_SHIFT2_SET_CHARS,An.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Fc{constructor(){this.rsDecoder=new Ee(Oe.DATA_MATRIX_FIELD_256)}decode(m){const y=new pa(m),N=y.getVersion(),C=y.readCodewords(),M=ki.getDataBlocks(C,N);let L=0;for(let O of M)L+=O.getNumDataCodewords();const _=new Uint8Array(L),A=M.length;for(let O=0;O<A;O++){const z=M[O],Y=z.getCodewords(),ee=z.getNumDataCodewords();this.correctErrors(Y,ee);for(let ie=0;ie<ee;ie++)_[ie*A+O]=Y[ie]}return An.decode(_)}correctErrors(m,y){const N=new Int32Array(m);try{this.rsDecoder.decode(N,m.length-y)}catch{throw new p}for(let C=0;C<y;C++)m[C]=N[C]}}class Pr{constructor(m){this.image=m,this.rectangleDetector=new Bt(this.image)}detect(){const m=this.rectangleDetector.detect();let y=this.detectSolid1(m);if(y=this.detectSolid2(y),y[3]=this.correctTopRight(y),!y[3])throw new B;y=this.shiftToModuleCenter(y);const N=y[0],C=y[1],M=y[2],L=y[3];let _=this.transitionsBetween(N,L)+1,A=this.transitionsBetween(M,L)+1;(_&1)===1&&(_+=1),(A&1)===1&&(A+=1),4*_<7*A&&4*A<7*_&&(_=A=Math.max(_,A));let O=Pr.sampleGrid(this.image,N,C,M,L,_,A);return new na(O,[N,C,M,L])}static shiftPoint(m,y,N){let C=(y.getX()-m.getX())/(N+1),M=(y.getY()-m.getY())/(N+1);return new $e(m.getX()+C,m.getY()+M)}static moveAway(m,y,N){let C=m.getX(),M=m.getY();return C<y?C-=1:C+=1,M<N?M-=1:M+=1,new $e(C,M)}detectSolid1(m){let y=m[0],N=m[1],C=m[3],M=m[2],L=this.transitionsBetween(y,N),_=this.transitionsBetween(N,C),A=this.transitionsBetween(C,M),O=this.transitionsBetween(M,y),z=L,Y=[M,y,N,C];return z>_&&(z=_,Y[0]=y,Y[1]=N,Y[2]=C,Y[3]=M),z>A&&(z=A,Y[0]=N,Y[1]=C,Y[2]=M,Y[3]=y),z>O&&(Y[0]=C,Y[1]=M,Y[2]=y,Y[3]=N),Y}detectSolid2(m){let y=m[0],N=m[1],C=m[2],M=m[3],L=this.transitionsBetween(y,M),_=Pr.shiftPoint(N,C,(L+1)*4),A=Pr.shiftPoint(C,N,(L+1)*4),O=this.transitionsBetween(_,y),z=this.transitionsBetween(A,M);return O<z?(m[0]=y,m[1]=N,m[2]=C,m[3]=M):(m[0]=N,m[1]=C,m[2]=M,m[3]=y),m}correctTopRight(m){let y=m[0],N=m[1],C=m[2],M=m[3],L=this.transitionsBetween(y,M),_=this.transitionsBetween(N,M),A=Pr.shiftPoint(y,N,(_+1)*4),O=Pr.shiftPoint(C,N,(L+1)*4);L=this.transitionsBetween(A,M),_=this.transitionsBetween(O,M);let z=new $e(M.getX()+(C.getX()-N.getX())/(L+1),M.getY()+(C.getY()-N.getY())/(L+1)),Y=new $e(M.getX()+(y.getX()-N.getX())/(_+1),M.getY()+(y.getY()-N.getY())/(_+1));if(!this.isValid(z))return this.isValid(Y)?Y:null;if(!this.isValid(Y))return z;let ee=this.transitionsBetween(A,z)+this.transitionsBetween(O,z),ie=this.transitionsBetween(A,Y)+this.transitionsBetween(O,Y);return ee>ie?z:Y}shiftToModuleCenter(m){let y=m[0],N=m[1],C=m[2],M=m[3],L=this.transitionsBetween(y,M)+1,_=this.transitionsBetween(C,M)+1,A=Pr.shiftPoint(y,N,_*4),O=Pr.shiftPoint(C,N,L*4);L=this.transitionsBetween(A,M)+1,_=this.transitionsBetween(O,M)+1,(L&1)===1&&(L+=1),(_&1)===1&&(_+=1);let z=(y.getX()+N.getX()+C.getX()+M.getX())/4,Y=(y.getY()+N.getY()+C.getY()+M.getY())/4;y=Pr.moveAway(y,z,Y),N=Pr.moveAway(N,z,Y),C=Pr.moveAway(C,z,Y),M=Pr.moveAway(M,z,Y);let ee,ie;return A=Pr.shiftPoint(y,N,_*4),A=Pr.shiftPoint(A,M,L*4),ee=Pr.shiftPoint(N,y,_*4),ee=Pr.shiftPoint(ee,C,L*4),O=Pr.shiftPoint(C,M,_*4),O=Pr.shiftPoint(O,N,L*4),ie=Pr.shiftPoint(M,C,_*4),ie=Pr.shiftPoint(ie,y,L*4),[A,ee,O,ie]}isValid(m){return m.getX()>=0&&m.getX()<this.image.getWidth()&&m.getY()>0&&m.getY()<this.image.getHeight()}static sampleGrid(m,y,N,C,M,L,_){return oa.getInstance().sampleGrid(m,L,_,.5,.5,L-.5,.5,L-.5,_-.5,.5,_-.5,y.getX(),y.getY(),M.getX(),M.getY(),C.getX(),C.getY(),N.getX(),N.getY())}transitionsBetween(m,y){let N=Math.trunc(m.getX()),C=Math.trunc(m.getY()),M=Math.trunc(y.getX()),L=Math.trunc(y.getY()),_=Math.abs(L-C)>Math.abs(M-N);if(_){let fe=N;N=C,C=fe,fe=M,M=L,L=fe}let A=Math.abs(M-N),O=Math.abs(L-C),z=-A/2,Y=C<L?1:-1,ee=N<M?1:-1,ie=0,oe=this.image.get(_?C:N,_?N:C);for(let fe=N,ge=C;fe!==M;fe+=ee){let me=this.image.get(_?ge:fe,_?fe:ge);if(me!==oe&&(ie++,oe=me),z+=O,z>0){if(ge===L)break;ge+=Y,z-=A}}return ie}}class Ds{constructor(){this.decoder=new Fc}decode(m,y=null){let N,C;if(y!=null&&y.has(R.PURE_BARCODE)){const O=Ds.extractPureBits(m.getBlackMatrix());N=this.decoder.decode(O),C=Ds.NO_POINTS}else{const O=new Pr(m.getBlackMatrix()).detect();N=this.decoder.decode(O.getBits()),C=O.getPoints()}const M=N.getRawBytes(),L=new de(N.getText(),M,8*M.length,C,pe.DATA_MATRIX,b.currentTimeMillis()),_=N.getByteSegments();_!=null&&L.putMetadata(Te.BYTE_SEGMENTS,_);const A=N.getECLevel();return A!=null&&L.putMetadata(Te.ERROR_CORRECTION_LEVEL,A),L}reset(){}static extractPureBits(m){const y=m.getTopLeftOnBit(),N=m.getBottomRightOnBit();if(y==null||N==null)throw new B;const C=this.moduleSize(y,m);let M=y[1];const L=N[1];let _=y[0];const O=(N[0]-_+1)/C,z=(L-M+1)/C;if(O<=0||z<=0)throw new B;const Y=C/2;M+=Y,_+=Y;const ee=new J(O,z);for(let ie=0;ie<z;ie++){const oe=M+ie*C;for(let fe=0;fe<O;fe++)m.get(_+fe*C,oe)&&ee.set(fe,ie)}return ee}static moduleSize(m,y){const N=y.getWidth();let C=m[0];const M=m[1];for(;C<N&&y.get(C,M);)C++;if(C===N)throw new B;const L=C-m[0];if(L===0)throw new B;return L}}Ds.NO_POINTS=[];class kr extends ce{constructor(m=500){super(new Ds,m)}}var Is;(function(ue){ue[ue.L=0]="L",ue[ue.M=1]="M",ue[ue.Q=2]="Q",ue[ue.H=3]="H"})(Is||(Is={}));class Va{constructor(m,y,N){this.value=m,this.stringValue=y,this.bits=N,Va.FOR_BITS.set(N,this),Va.FOR_VALUE.set(m,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(m){switch(m){case"L":return Va.L;case"M":return Va.M;case"Q":return Va.Q;case"H":return Va.H;default:throw new u(m+"not available")}}toString(){return this.stringValue}equals(m){if(!(m instanceof Va))return!1;const y=m;return this.value===y.value}static forBits(m){if(m<0||m>=Va.FOR_BITS.size)throw new h;return Va.FOR_BITS.get(m)}}Va.FOR_BITS=new Map,Va.FOR_VALUE=new Map,Va.L=new Va(Is.L,"L",1),Va.M=new Va(Is.M,"M",0),Va.Q=new Va(Is.Q,"Q",3),Va.H=new Va(Is.H,"H",2);class rn{constructor(m){this.errorCorrectionLevel=Va.forBits(m>>3&3),this.dataMask=m&7}static numBitsDiffering(m,y){return T.bitCount(m^y)}static decodeFormatInformation(m,y){const N=rn.doDecodeFormatInformation(m,y);return N!==null?N:rn.doDecodeFormatInformation(m^rn.FORMAT_INFO_MASK_QR,y^rn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(m,y){let N=Number.MAX_SAFE_INTEGER,C=0;for(const M of rn.FORMAT_INFO_DECODE_LOOKUP){const L=M[0];if(L===m||L===y)return new rn(M[1]);let _=rn.numBitsDiffering(m,L);_<N&&(C=M[1],N=_),m!==y&&(_=rn.numBitsDiffering(y,L),_<N&&(C=M[1],N=_))}return N<=3?new rn(C):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(m){if(!(m instanceof rn))return!1;const y=m;return this.errorCorrectionLevel===y.errorCorrectionLevel&&this.dataMask===y.dataMask}}rn.FORMAT_INFO_MASK_QR=21522,rn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class qe{constructor(m,...y){this.ecCodewordsPerBlock=m,this.ecBlocks=y}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let m=0;const y=this.ecBlocks;for(const N of y)m+=N.getCount();return m}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ye{constructor(m,y){this.count=m,this.dataCodewords=y}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ia{constructor(m,y,...N){this.versionNumber=m,this.alignmentPatternCenters=y,this.ecBlocks=N;let C=0;const M=N[0].getECCodewordsPerBlock(),L=N[0].getECBlocks();for(const _ of L)C+=_.getCount()*(_.getDataCodewords()+M);this.totalCodewords=C}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(m){return this.ecBlocks[m.getValue()]}static getProvisionalVersionForDimension(m){if(m%4!==1)throw new P;try{return this.getVersionForNumber((m-17)/4)}catch{throw new P}}static getVersionForNumber(m){if(m<1||m>40)throw new h;return ia.VERSIONS[m-1]}static decodeVersionInformation(m){let y=Number.MAX_SAFE_INTEGER,N=0;for(let C=0;C<ia.VERSION_DECODE_INFO.length;C++){const M=ia.VERSION_DECODE_INFO[C];if(M===m)return ia.getVersionForNumber(C+7);const L=rn.numBitsDiffering(m,M);L<y&&(N=C+7,y=L)}return y<=3?ia.getVersionForNumber(N):null}buildFunctionPattern(){const m=this.getDimensionForVersion(),y=new J(m);y.setRegion(0,0,9,9),y.setRegion(m-8,0,8,9),y.setRegion(0,m-8,9,8);const N=this.alignmentPatternCenters.length;for(let C=0;C<N;C++){const M=this.alignmentPatternCenters[C]-2;for(let L=0;L<N;L++)C===0&&(L===0||L===N-1)||C===N-1&&L===0||y.setRegion(this.alignmentPatternCenters[L]-2,M,5,5)}return y.setRegion(6,9,1,m-17),y.setRegion(9,6,m-17,1),this.versionNumber>6&&(y.setRegion(m-11,0,3,6),y.setRegion(0,m-11,6,3)),y}toString(){return""+this.versionNumber}}ia.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ia.VERSIONS=[new ia(1,new Int32Array(0),new qe(7,new ye(1,19)),new qe(10,new ye(1,16)),new qe(13,new ye(1,13)),new qe(17,new ye(1,9))),new ia(2,Int32Array.from([6,18]),new qe(10,new ye(1,34)),new qe(16,new ye(1,28)),new qe(22,new ye(1,22)),new qe(28,new ye(1,16))),new ia(3,Int32Array.from([6,22]),new qe(15,new ye(1,55)),new qe(26,new ye(1,44)),new qe(18,new ye(2,17)),new qe(22,new ye(2,13))),new ia(4,Int32Array.from([6,26]),new qe(20,new ye(1,80)),new qe(18,new ye(2,32)),new qe(26,new ye(2,24)),new qe(16,new ye(4,9))),new ia(5,Int32Array.from([6,30]),new qe(26,new ye(1,108)),new qe(24,new ye(2,43)),new qe(18,new ye(2,15),new ye(2,16)),new qe(22,new ye(2,11),new ye(2,12))),new ia(6,Int32Array.from([6,34]),new qe(18,new ye(2,68)),new qe(16,new ye(4,27)),new qe(24,new ye(4,19)),new qe(28,new ye(4,15))),new ia(7,Int32Array.from([6,22,38]),new qe(20,new ye(2,78)),new qe(18,new ye(4,31)),new qe(18,new ye(2,14),new ye(4,15)),new qe(26,new ye(4,13),new ye(1,14))),new ia(8,Int32Array.from([6,24,42]),new qe(24,new ye(2,97)),new qe(22,new ye(2,38),new ye(2,39)),new qe(22,new ye(4,18),new ye(2,19)),new qe(26,new ye(4,14),new ye(2,15))),new ia(9,Int32Array.from([6,26,46]),new qe(30,new ye(2,116)),new qe(22,new ye(3,36),new ye(2,37)),new qe(20,new ye(4,16),new ye(4,17)),new qe(24,new ye(4,12),new ye(4,13))),new ia(10,Int32Array.from([6,28,50]),new qe(18,new ye(2,68),new ye(2,69)),new qe(26,new ye(4,43),new ye(1,44)),new qe(24,new ye(6,19),new ye(2,20)),new qe(28,new ye(6,15),new ye(2,16))),new ia(11,Int32Array.from([6,30,54]),new qe(20,new ye(4,81)),new qe(30,new ye(1,50),new ye(4,51)),new qe(28,new ye(4,22),new ye(4,23)),new qe(24,new ye(3,12),new ye(8,13))),new ia(12,Int32Array.from([6,32,58]),new qe(24,new ye(2,92),new ye(2,93)),new qe(22,new ye(6,36),new ye(2,37)),new qe(26,new ye(4,20),new ye(6,21)),new qe(28,new ye(7,14),new ye(4,15))),new ia(13,Int32Array.from([6,34,62]),new qe(26,new ye(4,107)),new qe(22,new ye(8,37),new ye(1,38)),new qe(24,new ye(8,20),new ye(4,21)),new qe(22,new ye(12,11),new ye(4,12))),new ia(14,Int32Array.from([6,26,46,66]),new qe(30,new ye(3,115),new ye(1,116)),new qe(24,new ye(4,40),new ye(5,41)),new qe(20,new ye(11,16),new ye(5,17)),new qe(24,new ye(11,12),new ye(5,13))),new ia(15,Int32Array.from([6,26,48,70]),new qe(22,new ye(5,87),new ye(1,88)),new qe(24,new ye(5,41),new ye(5,42)),new qe(30,new ye(5,24),new ye(7,25)),new qe(24,new ye(11,12),new ye(7,13))),new ia(16,Int32Array.from([6,26,50,74]),new qe(24,new ye(5,98),new ye(1,99)),new qe(28,new ye(7,45),new ye(3,46)),new qe(24,new ye(15,19),new ye(2,20)),new qe(30,new ye(3,15),new ye(13,16))),new ia(17,Int32Array.from([6,30,54,78]),new qe(28,new ye(1,107),new ye(5,108)),new qe(28,new ye(10,46),new ye(1,47)),new qe(28,new ye(1,22),new ye(15,23)),new qe(28,new ye(2,14),new ye(17,15))),new ia(18,Int32Array.from([6,30,56,82]),new qe(30,new ye(5,120),new ye(1,121)),new qe(26,new ye(9,43),new ye(4,44)),new qe(28,new ye(17,22),new ye(1,23)),new qe(28,new ye(2,14),new ye(19,15))),new ia(19,Int32Array.from([6,30,58,86]),new qe(28,new ye(3,113),new ye(4,114)),new qe(26,new ye(3,44),new ye(11,45)),new qe(26,new ye(17,21),new ye(4,22)),new qe(26,new ye(9,13),new ye(16,14))),new ia(20,Int32Array.from([6,34,62,90]),new qe(28,new ye(3,107),new ye(5,108)),new qe(26,new ye(3,41),new ye(13,42)),new qe(30,new ye(15,24),new ye(5,25)),new qe(28,new ye(15,15),new ye(10,16))),new ia(21,Int32Array.from([6,28,50,72,94]),new qe(28,new ye(4,116),new ye(4,117)),new qe(26,new ye(17,42)),new qe(28,new ye(17,22),new ye(6,23)),new qe(30,new ye(19,16),new ye(6,17))),new ia(22,Int32Array.from([6,26,50,74,98]),new qe(28,new ye(2,111),new ye(7,112)),new qe(28,new ye(17,46)),new qe(30,new ye(7,24),new ye(16,25)),new qe(24,new ye(34,13))),new ia(23,Int32Array.from([6,30,54,78,102]),new qe(30,new ye(4,121),new ye(5,122)),new qe(28,new ye(4,47),new ye(14,48)),new qe(30,new ye(11,24),new ye(14,25)),new qe(30,new ye(16,15),new ye(14,16))),new ia(24,Int32Array.from([6,28,54,80,106]),new qe(30,new ye(6,117),new ye(4,118)),new qe(28,new ye(6,45),new ye(14,46)),new qe(30,new ye(11,24),new ye(16,25)),new qe(30,new ye(30,16),new ye(2,17))),new ia(25,Int32Array.from([6,32,58,84,110]),new qe(26,new ye(8,106),new ye(4,107)),new qe(28,new ye(8,47),new ye(13,48)),new qe(30,new ye(7,24),new ye(22,25)),new qe(30,new ye(22,15),new ye(13,16))),new ia(26,Int32Array.from([6,30,58,86,114]),new qe(28,new ye(10,114),new ye(2,115)),new qe(28,new ye(19,46),new ye(4,47)),new qe(28,new ye(28,22),new ye(6,23)),new qe(30,new ye(33,16),new ye(4,17))),new ia(27,Int32Array.from([6,34,62,90,118]),new qe(30,new ye(8,122),new ye(4,123)),new qe(28,new ye(22,45),new ye(3,46)),new qe(30,new ye(8,23),new ye(26,24)),new qe(30,new ye(12,15),new ye(28,16))),new ia(28,Int32Array.from([6,26,50,74,98,122]),new qe(30,new ye(3,117),new ye(10,118)),new qe(28,new ye(3,45),new ye(23,46)),new qe(30,new ye(4,24),new ye(31,25)),new qe(30,new ye(11,15),new ye(31,16))),new ia(29,Int32Array.from([6,30,54,78,102,126]),new qe(30,new ye(7,116),new ye(7,117)),new qe(28,new ye(21,45),new ye(7,46)),new qe(30,new ye(1,23),new ye(37,24)),new qe(30,new ye(19,15),new ye(26,16))),new ia(30,Int32Array.from([6,26,52,78,104,130]),new qe(30,new ye(5,115),new ye(10,116)),new qe(28,new ye(19,47),new ye(10,48)),new qe(30,new ye(15,24),new ye(25,25)),new qe(30,new ye(23,15),new ye(25,16))),new ia(31,Int32Array.from([6,30,56,82,108,134]),new qe(30,new ye(13,115),new ye(3,116)),new qe(28,new ye(2,46),new ye(29,47)),new qe(30,new ye(42,24),new ye(1,25)),new qe(30,new ye(23,15),new ye(28,16))),new ia(32,Int32Array.from([6,34,60,86,112,138]),new qe(30,new ye(17,115)),new qe(28,new ye(10,46),new ye(23,47)),new qe(30,new ye(10,24),new ye(35,25)),new qe(30,new ye(19,15),new ye(35,16))),new ia(33,Int32Array.from([6,30,58,86,114,142]),new qe(30,new ye(17,115),new ye(1,116)),new qe(28,new ye(14,46),new ye(21,47)),new qe(30,new ye(29,24),new ye(19,25)),new qe(30,new ye(11,15),new ye(46,16))),new ia(34,Int32Array.from([6,34,62,90,118,146]),new qe(30,new ye(13,115),new ye(6,116)),new qe(28,new ye(14,46),new ye(23,47)),new qe(30,new ye(44,24),new ye(7,25)),new qe(30,new ye(59,16),new ye(1,17))),new ia(35,Int32Array.from([6,30,54,78,102,126,150]),new qe(30,new ye(12,121),new ye(7,122)),new qe(28,new ye(12,47),new ye(26,48)),new qe(30,new ye(39,24),new ye(14,25)),new qe(30,new ye(22,15),new ye(41,16))),new ia(36,Int32Array.from([6,24,50,76,102,128,154]),new qe(30,new ye(6,121),new ye(14,122)),new qe(28,new ye(6,47),new ye(34,48)),new qe(30,new ye(46,24),new ye(10,25)),new qe(30,new ye(2,15),new ye(64,16))),new ia(37,Int32Array.from([6,28,54,80,106,132,158]),new qe(30,new ye(17,122),new ye(4,123)),new qe(28,new ye(29,46),new ye(14,47)),new qe(30,new ye(49,24),new ye(10,25)),new qe(30,new ye(24,15),new ye(46,16))),new ia(38,Int32Array.from([6,32,58,84,110,136,162]),new qe(30,new ye(4,122),new ye(18,123)),new qe(28,new ye(13,46),new ye(32,47)),new qe(30,new ye(48,24),new ye(14,25)),new qe(30,new ye(42,15),new ye(32,16))),new ia(39,Int32Array.from([6,26,54,82,110,138,166]),new qe(30,new ye(20,117),new ye(4,118)),new qe(28,new ye(40,47),new ye(7,48)),new qe(30,new ye(43,24),new ye(22,25)),new qe(30,new ye(10,15),new ye(67,16))),new ia(40,Int32Array.from([6,30,58,86,114,142,170]),new qe(30,new ye(19,118),new ye(6,119)),new qe(28,new ye(18,47),new ye(31,48)),new qe(30,new ye(34,24),new ye(34,25)),new qe(30,new ye(20,15),new ye(61,16)))];var vn;(function(ue){ue[ue.DATA_MASK_000=0]="DATA_MASK_000",ue[ue.DATA_MASK_001=1]="DATA_MASK_001",ue[ue.DATA_MASK_010=2]="DATA_MASK_010",ue[ue.DATA_MASK_011=3]="DATA_MASK_011",ue[ue.DATA_MASK_100=4]="DATA_MASK_100",ue[ue.DATA_MASK_101=5]="DATA_MASK_101",ue[ue.DATA_MASK_110=6]="DATA_MASK_110",ue[ue.DATA_MASK_111=7]="DATA_MASK_111"})(vn||(vn={}));class ri{constructor(m,y){this.value=m,this.isMasked=y}unmaskBitMatrix(m,y){for(let N=0;N<y;N++)for(let C=0;C<y;C++)this.isMasked(N,C)&&m.flip(C,N)}}ri.values=new Map([[vn.DATA_MASK_000,new ri(vn.DATA_MASK_000,(ue,m)=>(ue+m&1)===0)],[vn.DATA_MASK_001,new ri(vn.DATA_MASK_001,(ue,m)=>(ue&1)===0)],[vn.DATA_MASK_010,new ri(vn.DATA_MASK_010,(ue,m)=>m%3===0)],[vn.DATA_MASK_011,new ri(vn.DATA_MASK_011,(ue,m)=>(ue+m)%3===0)],[vn.DATA_MASK_100,new ri(vn.DATA_MASK_100,(ue,m)=>(Math.floor(ue/2)+Math.floor(m/3)&1)===0)],[vn.DATA_MASK_101,new ri(vn.DATA_MASK_101,(ue,m)=>ue*m%6===0)],[vn.DATA_MASK_110,new ri(vn.DATA_MASK_110,(ue,m)=>ue*m%6<3)],[vn.DATA_MASK_111,new ri(vn.DATA_MASK_111,(ue,m)=>(ue+m+ue*m%3&1)===0)]]);class ho{constructor(m){const y=m.getHeight();if(y<21||(y&3)!==1)throw new P;this.bitMatrix=m}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let m=0;for(let M=0;M<6;M++)m=this.copyBit(M,8,m);m=this.copyBit(7,8,m),m=this.copyBit(8,8,m),m=this.copyBit(8,7,m);for(let M=5;M>=0;M--)m=this.copyBit(8,M,m);const y=this.bitMatrix.getHeight();let N=0;const C=y-7;for(let M=y-1;M>=C;M--)N=this.copyBit(8,M,N);for(let M=y-8;M<y;M++)N=this.copyBit(M,8,N);if(this.parsedFormatInfo=rn.decodeFormatInformation(m,N),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new P}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const m=this.bitMatrix.getHeight(),y=Math.floor((m-17)/4);if(y<=6)return ia.getVersionForNumber(y);let N=0;const C=m-11;for(let L=5;L>=0;L--)for(let _=m-9;_>=C;_--)N=this.copyBit(_,L,N);let M=ia.decodeVersionInformation(N);if(M!==null&&M.getDimensionForVersion()===m)return this.parsedVersion=M,M;N=0;for(let L=5;L>=0;L--)for(let _=m-9;_>=C;_--)N=this.copyBit(L,_,N);if(M=ia.decodeVersionInformation(N),M!==null&&M.getDimensionForVersion()===m)return this.parsedVersion=M,M;throw new P}copyBit(m,y,N){return(this.isMirror?this.bitMatrix.get(y,m):this.bitMatrix.get(m,y))?N<<1|1:N<<1}readCodewords(){const m=this.readFormatInformation(),y=this.readVersion(),N=ri.values.get(m.getDataMask()),C=this.bitMatrix.getHeight();N.unmaskBitMatrix(this.bitMatrix,C);const M=y.buildFunctionPattern();let L=!0;const _=new Uint8Array(y.getTotalCodewords());let A=0,O=0,z=0;for(let Y=C-1;Y>0;Y-=2){Y===6&&Y--;for(let ee=0;ee<C;ee++){const ie=L?C-1-ee:ee;for(let oe=0;oe<2;oe++)M.get(Y-oe,ie)||(z++,O<<=1,this.bitMatrix.get(Y-oe,ie)&&(O|=1),z===8&&(_[A++]=O,z=0,O=0))}L=!L}if(A!==y.getTotalCodewords())throw new P;return _}remask(){if(this.parsedFormatInfo===null)return;const m=ri.values[this.parsedFormatInfo.getDataMask()],y=this.bitMatrix.getHeight();m.unmaskBitMatrix(this.bitMatrix,y)}setMirror(m){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=m}mirror(){const m=this.bitMatrix;for(let y=0,N=m.getWidth();y<N;y++)for(let C=y+1,M=m.getHeight();C<M;C++)m.get(y,C)!==m.get(C,y)&&(m.flip(C,y),m.flip(y,C))}}class Rh{constructor(m,y){this.numDataCodewords=m,this.codewords=y}static getDataBlocks(m,y,N){if(m.length!==y.getTotalCodewords())throw new h;const C=y.getECBlocksForLevel(N);let M=0;const L=C.getECBlocks();for(const oe of L)M+=oe.getCount();const _=new Array(M);let A=0;for(const oe of L)for(let fe=0;fe<oe.getCount();fe++){const ge=oe.getDataCodewords(),me=C.getECCodewordsPerBlock()+ge;_[A++]=new Rh(ge,new Uint8Array(me))}const O=_[0].codewords.length;let z=_.length-1;for(;z>=0&&_[z].codewords.length!==O;)z--;z++;const Y=O-C.getECCodewordsPerBlock();let ee=0;for(let oe=0;oe<Y;oe++)for(let fe=0;fe<A;fe++)_[fe].codewords[oe]=m[ee++];for(let oe=z;oe<A;oe++)_[oe].codewords[Y]=m[ee++];const ie=_[0].codewords.length;for(let oe=Y;oe<ie;oe++)for(let fe=0;fe<A;fe++){const ge=fe<z?oe:oe+1;_[fe].codewords[ge]=m[ee++]}return _}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Oa;(function(ue){ue[ue.TERMINATOR=0]="TERMINATOR",ue[ue.NUMERIC=1]="NUMERIC",ue[ue.ALPHANUMERIC=2]="ALPHANUMERIC",ue[ue.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",ue[ue.BYTE=4]="BYTE",ue[ue.ECI=5]="ECI",ue[ue.KANJI=6]="KANJI",ue[ue.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",ue[ue.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",ue[ue.HANZI=9]="HANZI"})(Oa||(Oa={}));class ga{constructor(m,y,N,C){this.value=m,this.stringValue=y,this.characterCountBitsForVersions=N,this.bits=C,ga.FOR_BITS.set(C,this),ga.FOR_VALUE.set(m,this)}static forBits(m){const y=ga.FOR_BITS.get(m);if(y===void 0)throw new h;return y}getCharacterCountBits(m){const y=m.getVersionNumber();let N;return y<=9?N=0:y<=26?N=1:N=2,this.characterCountBitsForVersions[N]}getValue(){return this.value}getBits(){return this.bits}equals(m){if(!(m instanceof ga))return!1;const y=m;return this.value===y.value}toString(){return this.stringValue}}ga.FOR_BITS=new Map,ga.FOR_VALUE=new Map,ga.TERMINATOR=new ga(Oa.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ga.NUMERIC=new ga(Oa.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ga.ALPHANUMERIC=new ga(Oa.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ga.STRUCTURED_APPEND=new ga(Oa.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ga.BYTE=new ga(Oa.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ga.ECI=new ga(Oa.ECI,"ECI",Int32Array.from([0,0,0]),7),ga.KANJI=new ga(Oa.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ga.FNC1_FIRST_POSITION=new ga(Oa.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ga.FNC1_SECOND_POSITION=new ga(Oa.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ga.HANZI=new ga(Oa.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ur{static decode(m,y,N,C){const M=new gn(m);let L=new Z;const _=new Array;let A=-1,O=-1;try{let z=null,Y=!1,ee;do{if(M.available()<4)ee=ga.TERMINATOR;else{const ie=M.readBits(4);ee=ga.forBits(ie)}switch(ee){case ga.TERMINATOR:break;case ga.FNC1_FIRST_POSITION:case ga.FNC1_SECOND_POSITION:Y=!0;break;case ga.STRUCTURED_APPEND:if(M.available()<16)throw new P;A=M.readBits(8),O=M.readBits(8);break;case ga.ECI:const ie=Ur.parseECIValue(M);if(z=G.getCharacterSetECIByValue(ie),z===null)throw new P;break;case ga.HANZI:const oe=M.readBits(4),fe=M.readBits(ee.getCharacterCountBits(y));oe===Ur.GB2312_SUBSET&&Ur.decodeHanziSegment(M,L,fe);break;default:const ge=M.readBits(ee.getCharacterCountBits(y));switch(ee){case ga.NUMERIC:Ur.decodeNumericSegment(M,L,ge);break;case ga.ALPHANUMERIC:Ur.decodeAlphanumericSegment(M,L,ge,Y);break;case ga.BYTE:Ur.decodeByteSegment(M,L,ge,z,_,C);break;case ga.KANJI:Ur.decodeKanjiSegment(M,L,ge);break;default:throw new P}break}}while(ee!==ga.TERMINATOR)}catch{throw new P}return new ke(m,L.toString(),_.length===0?null:_,N===null?null:N.toString(),A,O)}static decodeHanziSegment(m,y,N){if(N*13>m.available())throw new P;const C=new Uint8Array(2*N);let M=0;for(;N>0;){const L=m.readBits(13);let _=L/96<<8&4294967295|L%96;_<959?_+=41377:_+=42657,C[M]=_>>8&255,C[M+1]=_&255,M+=2,N--}try{y.append(U.decode(C,te.GB2312))}catch(L){throw new P(L)}}static decodeKanjiSegment(m,y,N){if(N*13>m.available())throw new P;const C=new Uint8Array(2*N);let M=0;for(;N>0;){const L=m.readBits(13);let _=L/192<<8&4294967295|L%192;_<7936?_+=33088:_+=49472,C[M]=_>>8,C[M+1]=_,M+=2,N--}try{y.append(U.decode(C,te.SHIFT_JIS))}catch(L){throw new P(L)}}static decodeByteSegment(m,y,N,C,M,L){if(8*N>m.available())throw new P;const _=new Uint8Array(N);for(let O=0;O<N;O++)_[O]=m.readBits(8);let A;C===null?A=te.guessEncoding(_,L):A=C.getName();try{y.append(U.decode(_,A))}catch(O){throw new P(O)}M.push(_)}static toAlphaNumericChar(m){if(m>=Ur.ALPHANUMERIC_CHARS.length)throw new P;return Ur.ALPHANUMERIC_CHARS[m]}static decodeAlphanumericSegment(m,y,N,C){const M=y.length();for(;N>1;){if(m.available()<11)throw new P;const L=m.readBits(11);y.append(Ur.toAlphaNumericChar(Math.floor(L/45))),y.append(Ur.toAlphaNumericChar(L%45)),N-=2}if(N===1){if(m.available()<6)throw new P;y.append(Ur.toAlphaNumericChar(m.readBits(6)))}if(C)for(let L=M;L<y.length();L++)y.charAt(L)==="%"&&(L<y.length()-1&&y.charAt(L+1)==="%"?y.deleteCharAt(L+1):y.setCharAt(L,""))}static decodeNumericSegment(m,y,N){for(;N>=3;){if(m.available()<10)throw new P;const C=m.readBits(10);if(C>=1e3)throw new P;y.append(Ur.toAlphaNumericChar(Math.floor(C/100))),y.append(Ur.toAlphaNumericChar(Math.floor(C/10)%10)),y.append(Ur.toAlphaNumericChar(C%10)),N-=3}if(N===2){if(m.available()<7)throw new P;const C=m.readBits(7);if(C>=100)throw new P;y.append(Ur.toAlphaNumericChar(Math.floor(C/10))),y.append(Ur.toAlphaNumericChar(C%10))}else if(N===1){if(m.available()<4)throw new P;const C=m.readBits(4);if(C>=10)throw new P;y.append(Ur.toAlphaNumericChar(C))}}static parseECIValue(m){const y=m.readBits(8);if((y&128)===0)return y&127;if((y&192)===128){const N=m.readBits(8);return(y&63)<<8&4294967295|N}if((y&224)===192){const N=m.readBits(16);return(y&31)<<16&4294967295|N}throw new P}}Ur.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ur.GB2312_SUBSET=1;class H0{constructor(m){this.mirrored=m}isMirrored(){return this.mirrored}applyMirroredCorrection(m){if(!this.mirrored||m===null||m.length<3)return;const y=m[0];m[0]=m[2],m[2]=y}}class zi{constructor(){this.rsDecoder=new Ee(Oe.QR_CODE_FIELD_256)}decodeBooleanArray(m,y){return this.decodeBitMatrix(J.parseFromBooleanArray(m),y)}decodeBitMatrix(m,y){const N=new ho(m);let C=null;try{return this.decodeBitMatrixParser(N,y)}catch(M){C=M}try{N.remask(),N.setMirror(!0),N.readVersion(),N.readFormatInformation(),N.mirror();const M=this.decodeBitMatrixParser(N,y);return M.setOther(new H0(!0)),M}catch(M){throw C!==null?C:M}}decodeBitMatrixParser(m,y){const N=m.readVersion(),C=m.readFormatInformation().getErrorCorrectionLevel(),M=m.readCodewords(),L=Rh.getDataBlocks(M,N,C);let _=0;for(const z of L)_+=z.getNumDataCodewords();const A=new Uint8Array(_);let O=0;for(const z of L){const Y=z.getCodewords(),ee=z.getNumDataCodewords();this.correctErrors(Y,ee);for(let ie=0;ie<ee;ie++)A[O++]=Y[ie]}return Ur.decode(A,N,C,y)}correctErrors(m,y){const N=new Int32Array(m);try{this.rsDecoder.decode(N,m.length-y)}catch{throw new p}for(let C=0;C<y;C++)m[C]=N[C]}}class ms extends $e{constructor(m,y,N){super(m,y),this.estimatedModuleSize=N}aboutEquals(m,y,N){if(Math.abs(y-this.getY())<=m&&Math.abs(N-this.getX())<=m){const C=Math.abs(m-this.estimatedModuleSize);return C<=1||C<=this.estimatedModuleSize}return!1}combineEstimate(m,y,N){const C=(this.getX()+y)/2,M=(this.getY()+m)/2,L=(this.estimatedModuleSize+N)/2;return new ms(C,M,L)}}class gi{constructor(m,y,N,C,M,L,_){this.image=m,this.startX=y,this.startY=N,this.width=C,this.height=M,this.moduleSize=L,this.resultPointCallback=_,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const m=this.startX,y=this.height,N=this.width,C=m+N,M=this.startY+y/2,L=new Int32Array(3),_=this.image;for(let A=0;A<y;A++){const O=M+((A&1)===0?Math.floor((A+1)/2):-Math.floor((A+1)/2));L[0]=0,L[1]=0,L[2]=0;let z=m;for(;z<C&&!_.get(z,O);)z++;let Y=0;for(;z<C;){if(_.get(z,O))if(Y===1)L[1]++;else if(Y===2){if(this.foundPatternCross(L)){const ee=this.handlePossibleCenter(L,O,z);if(ee!==null)return ee}L[0]=L[2],L[1]=1,L[2]=0,Y=1}else L[++Y]++;else Y===1&&Y++,L[Y]++;z++}if(this.foundPatternCross(L)){const ee=this.handlePossibleCenter(L,O,C);if(ee!==null)return ee}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new B}static centerFromEnd(m,y){return y-m[2]-m[1]/2}foundPatternCross(m){const y=this.moduleSize,N=y/2;for(let C=0;C<3;C++)if(Math.abs(y-m[C])>=N)return!1;return!0}crossCheckVertical(m,y,N,C){const M=this.image,L=M.getHeight(),_=this.crossCheckStateCount;_[0]=0,_[1]=0,_[2]=0;let A=m;for(;A>=0&&M.get(y,A)&&_[1]<=N;)_[1]++,A--;if(A<0||_[1]>N)return NaN;for(;A>=0&&!M.get(y,A)&&_[0]<=N;)_[0]++,A--;if(_[0]>N)return NaN;for(A=m+1;A<L&&M.get(y,A)&&_[1]<=N;)_[1]++,A++;if(A===L||_[1]>N)return NaN;for(;A<L&&!M.get(y,A)&&_[2]<=N;)_[2]++,A++;if(_[2]>N)return NaN;const O=_[0]+_[1]+_[2];return 5*Math.abs(O-C)>=2*C?NaN:this.foundPatternCross(_)?gi.centerFromEnd(_,A):NaN}handlePossibleCenter(m,y,N){const C=m[0]+m[1]+m[2],M=gi.centerFromEnd(m,N),L=this.crossCheckVertical(y,M,2*m[1],C);if(!isNaN(L)){const _=(m[0]+m[1]+m[2])/3;for(const O of this.possibleCenters)if(O.aboutEquals(_,L,M))return O.combineEstimate(L,M,_);const A=new ms(M,L,_);this.possibleCenters.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return null}}class Ki extends $e{constructor(m,y,N,C){super(m,y),this.estimatedModuleSize=N,this.count=C,C===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(m,y,N){if(Math.abs(y-this.getY())<=m&&Math.abs(N-this.getX())<=m){const C=Math.abs(m-this.estimatedModuleSize);return C<=1||C<=this.estimatedModuleSize}return!1}combineEstimate(m,y,N){const C=this.count+1,M=(this.count*this.getX()+y)/C,L=(this.count*this.getY()+m)/C,_=(this.count*this.estimatedModuleSize+N)/C;return new Ki(M,L,_,C)}}class qd{constructor(m){this.bottomLeft=m[0],this.topLeft=m[1],this.topRight=m[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Xr{constructor(m,y){this.image=m,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=y}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(m){const y=m!=null&&m.get(R.TRY_HARDER)!==void 0,N=m!=null&&m.get(R.PURE_BARCODE)!==void 0,C=this.image,M=C.getHeight(),L=C.getWidth();let _=Math.floor(3*M/(4*Xr.MAX_MODULES));(_<Xr.MIN_SKIP||y)&&(_=Xr.MIN_SKIP);let A=!1;const O=new Int32Array(5);for(let Y=_-1;Y<M&&!A;Y+=_){O[0]=0,O[1]=0,O[2]=0,O[3]=0,O[4]=0;let ee=0;for(let ie=0;ie<L;ie++)if(C.get(ie,Y))(ee&1)===1&&ee++,O[ee]++;else if((ee&1)===0)if(ee===4)if(Xr.foundPatternCross(O)){if(this.handlePossibleCenter(O,Y,ie,N)===!0)if(_=2,this.hasSkipped===!0)A=this.haveMultiplyConfirmedCenters();else{const fe=this.findRowSkip();fe>O[2]&&(Y+=fe-O[2]-_,ie=L-1)}else{O[0]=O[2],O[1]=O[3],O[2]=O[4],O[3]=1,O[4]=0,ee=3;continue}ee=0,O[0]=0,O[1]=0,O[2]=0,O[3]=0,O[4]=0}else O[0]=O[2],O[1]=O[3],O[2]=O[4],O[3]=1,O[4]=0,ee=3;else O[++ee]++;else O[ee]++;Xr.foundPatternCross(O)&&this.handlePossibleCenter(O,Y,L,N)===!0&&(_=O[0],this.hasSkipped&&(A=this.haveMultiplyConfirmedCenters()))}const z=this.selectBestPatterns();return $e.orderBestPatterns(z),new qd(z)}static centerFromEnd(m,y){return y-m[4]-m[3]-m[2]/2}static foundPatternCross(m){let y=0;for(let M=0;M<5;M++){const L=m[M];if(L===0)return!1;y+=L}if(y<7)return!1;const N=y/7,C=N/2;return Math.abs(N-m[0])<C&&Math.abs(N-m[1])<C&&Math.abs(3*N-m[2])<3*C&&Math.abs(N-m[3])<C&&Math.abs(N-m[4])<C}getCrossCheckStateCount(){const m=this.crossCheckStateCount;return m[0]=0,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m}crossCheckDiagonal(m,y,N,C){const M=this.getCrossCheckStateCount();let L=0;const _=this.image;for(;m>=L&&y>=L&&_.get(y-L,m-L);)M[2]++,L++;if(m<L||y<L)return!1;for(;m>=L&&y>=L&&!_.get(y-L,m-L)&&M[1]<=N;)M[1]++,L++;if(m<L||y<L||M[1]>N)return!1;for(;m>=L&&y>=L&&_.get(y-L,m-L)&&M[0]<=N;)M[0]++,L++;if(M[0]>N)return!1;const A=_.getHeight(),O=_.getWidth();for(L=1;m+L<A&&y+L<O&&_.get(y+L,m+L);)M[2]++,L++;if(m+L>=A||y+L>=O)return!1;for(;m+L<A&&y+L<O&&!_.get(y+L,m+L)&&M[3]<N;)M[3]++,L++;if(m+L>=A||y+L>=O||M[3]>=N)return!1;for(;m+L<A&&y+L<O&&_.get(y+L,m+L)&&M[4]<N;)M[4]++,L++;if(M[4]>=N)return!1;const z=M[0]+M[1]+M[2]+M[3]+M[4];return Math.abs(z-C)<2*C&&Xr.foundPatternCross(M)}crossCheckVertical(m,y,N,C){const M=this.image,L=M.getHeight(),_=this.getCrossCheckStateCount();let A=m;for(;A>=0&&M.get(y,A);)_[2]++,A--;if(A<0)return NaN;for(;A>=0&&!M.get(y,A)&&_[1]<=N;)_[1]++,A--;if(A<0||_[1]>N)return NaN;for(;A>=0&&M.get(y,A)&&_[0]<=N;)_[0]++,A--;if(_[0]>N)return NaN;for(A=m+1;A<L&&M.get(y,A);)_[2]++,A++;if(A===L)return NaN;for(;A<L&&!M.get(y,A)&&_[3]<N;)_[3]++,A++;if(A===L||_[3]>=N)return NaN;for(;A<L&&M.get(y,A)&&_[4]<N;)_[4]++,A++;if(_[4]>=N)return NaN;const O=_[0]+_[1]+_[2]+_[3]+_[4];return 5*Math.abs(O-C)>=2*C?NaN:Xr.foundPatternCross(_)?Xr.centerFromEnd(_,A):NaN}crossCheckHorizontal(m,y,N,C){const M=this.image,L=M.getWidth(),_=this.getCrossCheckStateCount();let A=m;for(;A>=0&&M.get(A,y);)_[2]++,A--;if(A<0)return NaN;for(;A>=0&&!M.get(A,y)&&_[1]<=N;)_[1]++,A--;if(A<0||_[1]>N)return NaN;for(;A>=0&&M.get(A,y)&&_[0]<=N;)_[0]++,A--;if(_[0]>N)return NaN;for(A=m+1;A<L&&M.get(A,y);)_[2]++,A++;if(A===L)return NaN;for(;A<L&&!M.get(A,y)&&_[3]<N;)_[3]++,A++;if(A===L||_[3]>=N)return NaN;for(;A<L&&M.get(A,y)&&_[4]<N;)_[4]++,A++;if(_[4]>=N)return NaN;const O=_[0]+_[1]+_[2]+_[3]+_[4];return 5*Math.abs(O-C)>=C?NaN:Xr.foundPatternCross(_)?Xr.centerFromEnd(_,A):NaN}handlePossibleCenter(m,y,N,C){const M=m[0]+m[1]+m[2]+m[3]+m[4];let L=Xr.centerFromEnd(m,N),_=this.crossCheckVertical(y,Math.floor(L),m[2],M);if(!isNaN(_)&&(L=this.crossCheckHorizontal(Math.floor(L),Math.floor(_),m[2],M),!isNaN(L)&&(!C||this.crossCheckDiagonal(Math.floor(_),Math.floor(L),m[2],M)))){const A=M/7;let O=!1;const z=this.possibleCenters;for(let Y=0,ee=z.length;Y<ee;Y++){const ie=z[Y];if(ie.aboutEquals(A,_,L)){z[Y]=ie.combineEstimate(_,L,A),O=!0;break}}if(!O){const Y=new Ki(L,_,A);z.push(Y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(Y)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let y=null;for(const N of this.possibleCenters)if(N.getCount()>=Xr.CENTER_QUORUM)if(y==null)y=N;else return this.hasSkipped=!0,Math.floor((Math.abs(y.getX()-N.getX())-Math.abs(y.getY()-N.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let m=0,y=0;const N=this.possibleCenters.length;for(const L of this.possibleCenters)L.getCount()>=Xr.CENTER_QUORUM&&(m++,y+=L.getEstimatedModuleSize());if(m<3)return!1;const C=y/N;let M=0;for(const L of this.possibleCenters)M+=Math.abs(L.getEstimatedModuleSize()-C);return M<=.05*y}selectBestPatterns(){const m=this.possibleCenters.length;if(m<3)throw new B;const y=this.possibleCenters;let N;if(m>3){let C=0,M=0;for(const A of this.possibleCenters){const O=A.getEstimatedModuleSize();C+=O,M+=O*O}N=C/m;let L=Math.sqrt(M/m-N*N);y.sort((A,O)=>{const z=Math.abs(O.getEstimatedModuleSize()-N),Y=Math.abs(A.getEstimatedModuleSize()-N);return z<Y?-1:z>Y?1:0});const _=Math.max(.2*N,L);for(let A=0;A<y.length&&y.length>3;A++){const O=y[A];Math.abs(O.getEstimatedModuleSize()-N)>_&&(y.splice(A,1),A--)}}if(y.length>3){let C=0;for(const M of y)C+=M.getEstimatedModuleSize();N=C/y.length,y.sort((M,L)=>{if(L.getCount()===M.getCount()){const _=Math.abs(L.getEstimatedModuleSize()-N),A=Math.abs(M.getEstimatedModuleSize()-N);return _<A?1:_>A?-1:0}else return L.getCount()-M.getCount()}),y.splice(3)}return[y[0],y[1],y[2]]}}Xr.CENTER_QUORUM=2,Xr.MIN_SKIP=3,Xr.MAX_MODULES=57;class Rr{constructor(m){this.image=m}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(m){this.resultPointCallback=m==null?null:m.get(R.NEED_RESULT_POINT_CALLBACK);const N=new Xr(this.image,this.resultPointCallback).find(m);return this.processFinderPatternInfo(N)}processFinderPatternInfo(m){const y=m.getTopLeft(),N=m.getTopRight(),C=m.getBottomLeft(),M=this.calculateModuleSize(y,N,C);if(M<1)throw new B("No pattern found in proccess finder.");const L=Rr.computeDimension(y,N,C,M),_=ia.getProvisionalVersionForDimension(L),A=_.getDimensionForVersion()-7;let O=null;if(_.getAlignmentPatternCenters().length>0){const ie=N.getX()-y.getX()+C.getX(),oe=N.getY()-y.getY()+C.getY(),fe=1-3/A,ge=Math.floor(y.getX()+fe*(ie-y.getX())),me=Math.floor(y.getY()+fe*(oe-y.getY()));for(let ve=4;ve<=16;ve<<=1)try{O=this.findAlignmentInRegion(M,ge,me,ve);break}catch(we){if(!(we instanceof B))throw we}}const z=Rr.createTransform(y,N,C,O,L),Y=Rr.sampleGrid(this.image,z,L);let ee;return O===null?ee=[C,y,N]:ee=[C,y,N,O],new na(Y,ee)}static createTransform(m,y,N,C,M){const L=M-3.5;let _,A,O,z;return C!==null?(_=C.getX(),A=C.getY(),O=L-3,z=O):(_=y.getX()-m.getX()+N.getX(),A=y.getY()-m.getY()+N.getY(),O=L,z=L),Nt.quadrilateralToQuadrilateral(3.5,3.5,L,3.5,O,z,3.5,L,m.getX(),m.getY(),y.getX(),y.getY(),_,A,N.getX(),N.getY())}static sampleGrid(m,y,N){return oa.getInstance().sampleGridWithTransform(m,N,N,y)}static computeDimension(m,y,N,C){const M=wt.round($e.distance(m,y)/C),L=wt.round($e.distance(m,N)/C);let _=Math.floor((M+L)/2)+7;switch(_&3){case 0:_++;break;case 2:_--;break;case 3:throw new B("Dimensions could be not found.")}return _}calculateModuleSize(m,y,N){return(this.calculateModuleSizeOneWay(m,y)+this.calculateModuleSizeOneWay(m,N))/2}calculateModuleSizeOneWay(m,y){const N=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(m.getX()),Math.floor(m.getY()),Math.floor(y.getX()),Math.floor(y.getY())),C=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(y.getX()),Math.floor(y.getY()),Math.floor(m.getX()),Math.floor(m.getY()));return isNaN(N)?C/7:isNaN(C)?N/7:(N+C)/14}sizeOfBlackWhiteBlackRunBothWays(m,y,N,C){let M=this.sizeOfBlackWhiteBlackRun(m,y,N,C),L=1,_=m-(N-m);_<0?(L=m/(m-_),_=0):_>=this.image.getWidth()&&(L=(this.image.getWidth()-1-m)/(_-m),_=this.image.getWidth()-1);let A=Math.floor(y-(C-y)*L);return L=1,A<0?(L=y/(y-A),A=0):A>=this.image.getHeight()&&(L=(this.image.getHeight()-1-y)/(A-y),A=this.image.getHeight()-1),_=Math.floor(m+(_-m)*L),M+=this.sizeOfBlackWhiteBlackRun(m,y,_,A),M-1}sizeOfBlackWhiteBlackRun(m,y,N,C){const M=Math.abs(C-y)>Math.abs(N-m);if(M){let ie=m;m=y,y=ie,ie=N,N=C,C=ie}const L=Math.abs(N-m),_=Math.abs(C-y);let A=-L/2;const O=m<N?1:-1,z=y<C?1:-1;let Y=0;const ee=N+O;for(let ie=m,oe=y;ie!==ee;ie+=O){const fe=M?oe:ie,ge=M?ie:oe;if(Y===1===this.image.get(fe,ge)){if(Y===2)return wt.distance(ie,oe,m,y);Y++}if(A+=_,A>0){if(oe===C)break;oe+=z,A-=L}}return Y===2?wt.distance(N+O,C,m,y):NaN}findAlignmentInRegion(m,y,N,C){const M=Math.floor(C*m),L=Math.max(0,y-M),_=Math.min(this.image.getWidth()-1,y+M);if(_-L<m*3)throw new B("Alignment top exceeds estimated module size.");const A=Math.max(0,N-M),O=Math.min(this.image.getHeight()-1,N+M);if(O-A<m*3)throw new B("Alignment bottom exceeds estimated module size.");return new gi(this.image,L,A,_-L,O-A,m,this.resultPointCallback).find()}}class Tn{constructor(){this.decoder=new zi}getDecoder(){return this.decoder}decode(m,y){let N,C;if(y!=null&&y.get(R.PURE_BARCODE)!==void 0){const A=Tn.extractPureBits(m.getBlackMatrix());N=this.decoder.decodeBitMatrix(A,y),C=Tn.NO_POINTS}else{const A=new Rr(m.getBlackMatrix()).detect(y);N=this.decoder.decodeBitMatrix(A.getBits(),y),C=A.getPoints()}N.getOther()instanceof H0&&N.getOther().applyMirroredCorrection(C);const M=new de(N.getText(),N.getRawBytes(),void 0,C,pe.QR_CODE,void 0),L=N.getByteSegments();L!==null&&M.putMetadata(Te.BYTE_SEGMENTS,L);const _=N.getECLevel();return _!==null&&M.putMetadata(Te.ERROR_CORRECTION_LEVEL,_),N.hasStructuredAppend()&&(M.putMetadata(Te.STRUCTURED_APPEND_SEQUENCE,N.getStructuredAppendSequenceNumber()),M.putMetadata(Te.STRUCTURED_APPEND_PARITY,N.getStructuredAppendParity())),M}reset(){}static extractPureBits(m){const y=m.getTopLeftOnBit(),N=m.getBottomRightOnBit();if(y===null||N===null)throw new B;const C=this.moduleSize(y,m);let M=y[1],L=N[1],_=y[0],A=N[0];if(_>=A||M>=L)throw new B;if(L-M!==A-_&&(A=_+(L-M),A>=m.getWidth()))throw new B;const O=Math.round((A-_+1)/C),z=Math.round((L-M+1)/C);if(O<=0||z<=0)throw new B;if(z!==O)throw new B;const Y=Math.floor(C/2);M+=Y,_+=Y;const ee=_+Math.floor((O-1)*C)-A;if(ee>0){if(ee>Y)throw new B;_-=ee}const ie=M+Math.floor((z-1)*C)-L;if(ie>0){if(ie>Y)throw new B;M-=ie}const oe=new J(O,z);for(let fe=0;fe<z;fe++){const ge=M+Math.floor(fe*C);for(let me=0;me<O;me++)m.get(_+Math.floor(me*C),ge)&&oe.set(me,fe)}return oe}static moduleSize(m,y){const N=y.getHeight(),C=y.getWidth();let M=m[0],L=m[1],_=!0,A=0;for(;M<C&&L<N;){if(_!==y.get(M,L)){if(++A===5)break;_=!_}M++,L++}if(M===C||L===N)throw new B;return(M-m[0])/7}}Tn.NO_POINTS=new Array;class va{PDF417Common(){}static getBitCountSum(m){return wt.sum(m)}static toIntArray(m){if(m==null||!m.length)return va.EMPTY_INT_ARRAY;const y=new Int32Array(m.length);let N=0;for(const C of m)y[N++]=C;return y}static getCodeword(m){const y=k.binarySearch(va.SYMBOL_TABLE,m&262143);return y<0?-1:(va.CODEWORD_TABLE[y]-1)%va.NUMBER_OF_CODEWORDS}}va.NUMBER_OF_CODEWORDS=929,va.MAX_CODEWORDS_IN_BARCODE=va.NUMBER_OF_CODEWORDS-1,va.MIN_ROWS_IN_BARCODE=3,va.MAX_ROWS_IN_BARCODE=90,va.MODULES_IN_CODEWORD=17,va.MODULES_IN_STOP_PATTERN=18,va.BARS_IN_MODULE=8,va.EMPTY_INT_ARRAY=new Int32Array([]),va.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),va.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ho{constructor(m,y){this.bits=m,this.points=y}getBits(){return this.bits}getPoints(){return this.points}}class Da{static detectMultiple(m,y,N){let C=m.getBlackMatrix(),M=Da.detect(N,C);return M.length||(C=C.clone(),C.rotate180(),M=Da.detect(N,C)),new Ho(C,M)}static detect(m,y){const N=new Array;let C=0,M=0,L=!1;for(;C<y.getHeight();){const _=Da.findVertices(y,C,M);if(_[0]==null&&_[3]==null){if(!L)break;L=!1,M=0;for(const A of N)A[1]!=null&&(C=Math.trunc(Math.max(C,A[1].getY()))),A[3]!=null&&(C=Math.max(C,Math.trunc(A[3].getY())));C+=Da.ROW_STEP;continue}if(L=!0,N.push(_),!m)break;_[2]!=null?(M=Math.trunc(_[2].getX()),C=Math.trunc(_[2].getY())):(M=Math.trunc(_[4].getX()),C=Math.trunc(_[4].getY()))}return N}static findVertices(m,y,N){const C=m.getHeight(),M=m.getWidth(),L=new Array(8);return Da.copyToResult(L,Da.findRowsWithPattern(m,C,M,y,N,Da.START_PATTERN),Da.INDEXES_START_PATTERN),L[4]!=null&&(N=Math.trunc(L[4].getX()),y=Math.trunc(L[4].getY())),Da.copyToResult(L,Da.findRowsWithPattern(m,C,M,y,N,Da.STOP_PATTERN),Da.INDEXES_STOP_PATTERN),L}static copyToResult(m,y,N){for(let C=0;C<N.length;C++)m[N[C]]=y[C]}static findRowsWithPattern(m,y,N,C,M,L){const _=new Array(4);let A=!1;const O=new Int32Array(L.length);for(;C<y;C+=Da.ROW_STEP){let Y=Da.findGuardPattern(m,M,C,N,!1,L,O);if(Y!=null){for(;C>0;){const ee=Da.findGuardPattern(m,M,--C,N,!1,L,O);if(ee!=null)Y=ee;else{C++;break}}_[0]=new $e(Y[0],C),_[1]=new $e(Y[1],C),A=!0;break}}let z=C+1;if(A){let Y=0,ee=Int32Array.from([Math.trunc(_[0].getX()),Math.trunc(_[1].getX())]);for(;z<y;z++){const ie=Da.findGuardPattern(m,ee[0],z,N,!1,L,O);if(ie!=null&&Math.abs(ee[0]-ie[0])<Da.MAX_PATTERN_DRIFT&&Math.abs(ee[1]-ie[1])<Da.MAX_PATTERN_DRIFT)ee=ie,Y=0;else{if(Y>Da.SKIPPED_ROW_COUNT_MAX)break;Y++}}z-=Y+1,_[2]=new $e(ee[0],z),_[3]=new $e(ee[1],z)}return z-C<Da.BARCODE_MIN_HEIGHT&&k.fill(_,null),_}static findGuardPattern(m,y,N,C,M,L,_){k.fillWithin(_,0,_.length,0);let A=y,O=0;for(;m.get(A,N)&&A>0&&O++<Da.MAX_PIXEL_DRIFT;)A--;let z=A,Y=0,ee=L.length;for(let ie=M;z<C;z++)if(m.get(z,N)!==ie)_[Y]++;else{if(Y===ee-1){if(Da.patternMatchVariance(_,L,Da.MAX_INDIVIDUAL_VARIANCE)<Da.MAX_AVG_VARIANCE)return new Int32Array([A,z]);A+=_[0]+_[1],b.arraycopy(_,2,_,0,Y-1),_[Y-1]=0,_[Y]=0,Y--}else Y++;_[Y]=1,ie=!ie}return Y===ee-1&&Da.patternMatchVariance(_,L,Da.MAX_INDIVIDUAL_VARIANCE)<Da.MAX_AVG_VARIANCE?new Int32Array([A,z-1]):null}static patternMatchVariance(m,y,N){let C=m.length,M=0,L=0;for(let O=0;O<C;O++)M+=m[O],L+=y[O];if(M<L)return 1/0;let _=M/L;N*=_;let A=0;for(let O=0;O<C;O++){let z=m[O],Y=y[O]*_,ee=z>Y?z-Y:Y-z;if(ee>N)return 1/0;A+=ee}return A/M}}Da.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Da.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Da.MAX_AVG_VARIANCE=.42,Da.MAX_INDIVIDUAL_VARIANCE=.8,Da.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Da.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Da.MAX_PIXEL_DRIFT=3,Da.MAX_PATTERN_DRIFT=5,Da.SKIPPED_ROW_COUNT_MAX=25,Da.ROW_STEP=5,Da.BARCODE_MIN_HEIGHT=10;class gr{constructor(m,y){if(y.length===0)throw new h;this.field=m;let N=y.length;if(N>1&&y[0]===0){let C=1;for(;C<N&&y[C]===0;)C++;C===N?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(N-C),b.arraycopy(y,C,this.coefficients,0,this.coefficients.length))}else this.coefficients=y}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(m){return this.coefficients[this.coefficients.length-1-m]}evaluateAt(m){if(m===0)return this.getCoefficient(0);if(m===1){let C=0;for(let M of this.coefficients)C=this.field.add(C,M);return C}let y=this.coefficients[0],N=this.coefficients.length;for(let C=1;C<N;C++)y=this.field.add(this.field.multiply(m,y),this.coefficients[C]);return y}add(m){if(!this.field.equals(m.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero())return m;if(m.isZero())return this;let y=this.coefficients,N=m.coefficients;if(y.length>N.length){let L=y;y=N,N=L}let C=new Int32Array(N.length),M=N.length-y.length;b.arraycopy(N,0,C,0,M);for(let L=M;L<N.length;L++)C[L]=this.field.add(y[L-M],N[L]);return new gr(this.field,C)}subtract(m){if(!this.field.equals(m.field))throw new h("ModulusPolys do not have same ModulusGF field");return m.isZero()?this:this.add(m.negative())}multiply(m){return m instanceof gr?this.multiplyOther(m):this.multiplyScalar(m)}multiplyOther(m){if(!this.field.equals(m.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero()||m.isZero())return new gr(this.field,new Int32Array([0]));let y=this.coefficients,N=y.length,C=m.coefficients,M=C.length,L=new Int32Array(N+M-1);for(let _=0;_<N;_++){let A=y[_];for(let O=0;O<M;O++)L[_+O]=this.field.add(L[_+O],this.field.multiply(A,C[O]))}return new gr(this.field,L)}negative(){let m=this.coefficients.length,y=new Int32Array(m);for(let N=0;N<m;N++)y[N]=this.field.subtract(0,this.coefficients[N]);return new gr(this.field,y)}multiplyScalar(m){if(m===0)return new gr(this.field,new Int32Array([0]));if(m===1)return this;let y=this.coefficients.length,N=new Int32Array(y);for(let C=0;C<y;C++)N[C]=this.field.multiply(this.coefficients[C],m);return new gr(this.field,N)}multiplyByMonomial(m,y){if(m<0)throw new h;if(y===0)return new gr(this.field,new Int32Array([0]));let N=this.coefficients.length,C=new Int32Array(N+m);for(let M=0;M<N;M++)C[M]=this.field.multiply(this.coefficients[M],y);return new gr(this.field,C)}toString(){let m=new Z;for(let y=this.getDegree();y>=0;y--){let N=this.getCoefficient(y);N!==0&&(N<0?(m.append(" - "),N=-N):m.length()>0&&m.append(" + "),(y===0||N!==1)&&m.append(N),y!==0&&(y===1?m.append("x"):(m.append("x^"),m.append(y))))}return m.toString()}}class Lh{add(m,y){return(m+y)%this.modulus}subtract(m,y){return(this.modulus+m-y)%this.modulus}exp(m){return this.expTable[m]}log(m){if(m===0)throw new h;return this.logTable[m]}inverse(m){if(m===0)throw new _e;return this.expTable[this.modulus-this.logTable[m]-1]}multiply(m,y){return m===0||y===0?0:this.expTable[(this.logTable[m]+this.logTable[y])%(this.modulus-1)]}getSize(){return this.modulus}equals(m){return m===this}}class ni extends Lh{constructor(m,y){super(),this.modulus=m,this.expTable=new Int32Array(m),this.logTable=new Int32Array(m);let N=1;for(let C=0;C<m;C++)this.expTable[C]=N,N=N*y%m;for(let C=0;C<m-1;C++)this.logTable[this.expTable[C]]=C;this.zero=new gr(this,new Int32Array([0])),this.one=new gr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(m,y){if(m<0)throw new h;if(y===0)return this.zero;let N=new Int32Array(m+1);return N[0]=y,new gr(this,N)}}ni.PDF417_GF=new ni(va.NUMBER_OF_CODEWORDS,3);class gs{constructor(){this.field=ni.PDF417_GF}decode(m,y,N){let C=new gr(this.field,m),M=new Int32Array(y),L=!1;for(let oe=y;oe>0;oe--){let fe=C.evaluateAt(this.field.exp(oe));M[y-oe]=fe,fe!==0&&(L=!0)}if(!L)return 0;let _=this.field.getOne();if(N!=null)for(const oe of N){let fe=this.field.exp(m.length-1-oe),ge=new gr(this.field,new Int32Array([this.field.subtract(0,fe),1]));_=_.multiply(ge)}let A=new gr(this.field,M),O=this.runEuclideanAlgorithm(this.field.buildMonomial(y,1),A,y),z=O[0],Y=O[1],ee=this.findErrorLocations(z),ie=this.findErrorMagnitudes(Y,z,ee);for(let oe=0;oe<ee.length;oe++){let fe=m.length-1-this.field.log(ee[oe]);if(fe<0)throw p.getChecksumInstance();m[fe]=this.field.subtract(m[fe],ie[oe])}return ee.length}runEuclideanAlgorithm(m,y,N){if(m.getDegree()<y.getDegree()){let ee=m;m=y,y=ee}let C=m,M=y,L=this.field.getZero(),_=this.field.getOne();for(;M.getDegree()>=Math.round(N/2);){let ee=C,ie=L;if(C=M,L=_,C.isZero())throw p.getChecksumInstance();M=ee;let oe=this.field.getZero(),fe=C.getCoefficient(C.getDegree()),ge=this.field.inverse(fe);for(;M.getDegree()>=C.getDegree()&&!M.isZero();){let me=M.getDegree()-C.getDegree(),ve=this.field.multiply(M.getCoefficient(M.getDegree()),ge);oe=oe.add(this.field.buildMonomial(me,ve)),M=M.subtract(C.multiplyByMonomial(me,ve))}_=oe.multiply(L).subtract(ie).negative()}let A=_.getCoefficient(0);if(A===0)throw p.getChecksumInstance();let O=this.field.inverse(A),z=_.multiply(O),Y=M.multiply(O);return[z,Y]}findErrorLocations(m){let y=m.getDegree(),N=new Int32Array(y),C=0;for(let M=1;M<this.field.getSize()&&C<y;M++)m.evaluateAt(M)===0&&(N[C]=this.field.inverse(M),C++);if(C!==y)throw p.getChecksumInstance();return N}findErrorMagnitudes(m,y,N){let C=y.getDegree(),M=new Int32Array(C);for(let O=1;O<=C;O++)M[C-O]=this.field.multiply(O,y.getCoefficient(O));let L=new gr(this.field,M),_=N.length,A=new Int32Array(_);for(let O=0;O<_;O++){let z=this.field.inverse(N[O]),Y=this.field.subtract(0,m.evaluateAt(z)),ee=this.field.inverse(L.evaluateAt(z));A[O]=this.field.multiply(Y,ee)}return A}}class Rs{constructor(m,y,N,C,M){m instanceof Rs?this.constructor_2(m):this.constructor_1(m,y,N,C,M)}constructor_1(m,y,N,C,M){const L=y==null||N==null,_=C==null||M==null;if(L&&_)throw new B;L?(y=new $e(0,C.getY()),N=new $e(0,M.getY())):_&&(C=new $e(m.getWidth()-1,y.getY()),M=new $e(m.getWidth()-1,N.getY())),this.image=m,this.topLeft=y,this.bottomLeft=N,this.topRight=C,this.bottomRight=M,this.minX=Math.trunc(Math.min(y.getX(),N.getX())),this.maxX=Math.trunc(Math.max(C.getX(),M.getX())),this.minY=Math.trunc(Math.min(y.getY(),C.getY())),this.maxY=Math.trunc(Math.max(N.getY(),M.getY()))}constructor_2(m){this.image=m.image,this.topLeft=m.getTopLeft(),this.bottomLeft=m.getBottomLeft(),this.topRight=m.getTopRight(),this.bottomRight=m.getBottomRight(),this.minX=m.getMinX(),this.maxX=m.getMaxX(),this.minY=m.getMinY(),this.maxY=m.getMaxY()}static merge(m,y){return m==null?y:y==null?m:new Rs(m.image,m.topLeft,m.bottomLeft,y.topRight,y.bottomRight)}addMissingRows(m,y,N){let C=this.topLeft,M=this.bottomLeft,L=this.topRight,_=this.bottomRight;if(m>0){let A=N?this.topLeft:this.topRight,O=Math.trunc(A.getY()-m);O<0&&(O=0);let z=new $e(A.getX(),O);N?C=z:L=z}if(y>0){let A=N?this.bottomLeft:this.bottomRight,O=Math.trunc(A.getY()+y);O>=this.image.getHeight()&&(O=this.image.getHeight()-1);let z=new $e(A.getX(),O);N?M=z:_=z}return new Rs(this.image,C,M,L,_)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Uo{constructor(m,y,N,C){this.columnCount=m,this.errorCorrectionLevel=C,this.rowCountUpperPart=y,this.rowCountLowerPart=N,this.rowCount=y+N}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ls{constructor(){this.buffer=""}static form(m,y){let N=-1;function C(L,_,A,O,z,Y){if(L==="%%")return"%";if(y[++N]===void 0)return;L=O?parseInt(O.substr(1)):void 0;let ee=z?parseInt(z.substr(1)):void 0,ie;switch(Y){case"s":ie=y[N];break;case"c":ie=y[N][0];break;case"f":ie=parseFloat(y[N]).toFixed(L);break;case"p":ie=parseFloat(y[N]).toPrecision(L);break;case"e":ie=parseFloat(y[N]).toExponential(L);break;case"x":ie=parseInt(y[N]).toString(ee||16);break;case"d":ie=parseFloat(parseInt(y[N],ee||10).toPrecision(L)).toFixed(0);break}ie=typeof ie=="object"?JSON.stringify(ie):(+ie).toString(ee);let oe=parseInt(A),fe=A&&A[0]+""=="0"?"0":" ";for(;ie.length<oe;)ie=_!==void 0?ie+fe:fe+ie;return ie}let M=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return m.replace(M,C)}format(m,...y){this.buffer+=Ls.form(m,y)}toString(){return this.buffer}}class Os{constructor(m){this.boundingBox=new Rs(m),this.codewords=new Array(m.getMaxY()-m.getMinY()+1)}getCodewordNearby(m){let y=this.getCodeword(m);if(y!=null)return y;for(let N=1;N<Os.MAX_NEARBY_DISTANCE;N++){let C=this.imageRowToCodewordIndex(m)-N;if(C>=0&&(y=this.codewords[C],y!=null)||(C=this.imageRowToCodewordIndex(m)+N,C<this.codewords.length&&(y=this.codewords[C],y!=null)))return y}return null}imageRowToCodewordIndex(m){return m-this.boundingBox.getMinY()}setCodeword(m,y){this.codewords[this.imageRowToCodewordIndex(m)]=y}getCodeword(m){return this.codewords[this.imageRowToCodewordIndex(m)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const m=new Ls;let y=0;for(const N of this.codewords){if(N==null){m.format("%3d:    |   %n",y++);continue}m.format("%3d: %3d|%3d%n",y++,N.getRowNumber(),N.getValue())}return m.toString()}}Os.MAX_NEARBY_DISTANCE=5;class el{constructor(){this.values=new Map}setValue(m){m=Math.trunc(m);let y=this.values.get(m);y==null&&(y=0),y++,this.values.set(m,y)}getValue(){let m=-1,y=new Array;for(const[N,C]of this.values.entries()){const M={getKey:()=>N,getValue:()=>C};M.getValue()>m?(m=M.getValue(),y=[],y.push(M.getKey())):M.getValue()===m&&y.push(M.getKey())}return va.toIntArray(y)}getConfidence(m){return this.values.get(m)}}class Oh extends Os{constructor(m,y){super(m),this._isLeft=y}setRowNumbers(){for(let m of this.getCodewords())m?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(m){let y=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(y,m);let N=this.getBoundingBox(),C=this._isLeft?N.getTopLeft():N.getTopRight(),M=this._isLeft?N.getBottomLeft():N.getBottomRight(),L=this.imageRowToCodewordIndex(Math.trunc(C.getY())),_=this.imageRowToCodewordIndex(Math.trunc(M.getY())),A=-1,O=1,z=0;for(let Y=L;Y<_;Y++){if(y[Y]==null)continue;let ee=y[Y],ie=ee.getRowNumber()-A;if(ie===0)z++;else if(ie===1)O=Math.max(O,z),z=1,A=ee.getRowNumber();else if(ie<0||ee.getRowNumber()>=m.getRowCount()||ie>Y)y[Y]=null;else{let oe;O>2?oe=(O-2)*ie:oe=ie;let fe=oe>=Y;for(let ge=1;ge<=oe&&!fe;ge++)fe=y[Y-ge]!=null;fe?y[Y]=null:(A=ee.getRowNumber(),z=1)}}}getRowHeights(){let m=this.getBarcodeMetadata();if(m==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(m);let y=new Int32Array(m.getRowCount());for(let N of this.getCodewords())if(N!=null){let C=N.getRowNumber();if(C>=y.length)continue;y[C]++}return y}adjustIncompleteIndicatorColumnRowNumbers(m){let y=this.getBoundingBox(),N=this._isLeft?y.getTopLeft():y.getTopRight(),C=this._isLeft?y.getBottomLeft():y.getBottomRight(),M=this.imageRowToCodewordIndex(Math.trunc(N.getY())),L=this.imageRowToCodewordIndex(Math.trunc(C.getY())),_=this.getCodewords(),A=-1;for(let O=M;O<L;O++){if(_[O]==null)continue;let z=_[O];z.setRowNumberAsRowIndicatorColumn();let Y=z.getRowNumber()-A;Y===0||(Y===1?A=z.getRowNumber():z.getRowNumber()>=m.getRowCount()?_[O]=null:A=z.getRowNumber())}}getBarcodeMetadata(){let m=this.getCodewords(),y=new el,N=new el,C=new el,M=new el;for(let _ of m){if(_==null)continue;_.setRowNumberAsRowIndicatorColumn();let A=_.getValue()%30,O=_.getRowNumber();switch(this._isLeft||(O+=2),O%3){case 0:N.setValue(A*3+1);break;case 1:M.setValue(A/3),C.setValue(A%3);break;case 2:y.setValue(A+1);break}}if(y.getValue().length===0||N.getValue().length===0||C.getValue().length===0||M.getValue().length===0||y.getValue()[0]<1||N.getValue()[0]+C.getValue()[0]<va.MIN_ROWS_IN_BARCODE||N.getValue()[0]+C.getValue()[0]>va.MAX_ROWS_IN_BARCODE)return null;let L=new Uo(y.getValue()[0],N.getValue()[0],C.getValue()[0],M.getValue()[0]);return this.removeIncorrectCodewords(m,L),L}removeIncorrectCodewords(m,y){for(let N=0;N<m.length;N++){let C=m[N];if(m[N]==null)continue;let M=C.getValue()%30,L=C.getRowNumber();if(L>y.getRowCount()){m[N]=null;continue}switch(this._isLeft||(L+=2),L%3){case 0:M*3+1!==y.getRowCountUpperPart()&&(m[N]=null);break;case 1:(Math.trunc(M/3)!==y.getErrorCorrectionLevel()||M%3!==y.getRowCountLowerPart())&&(m[N]=null);break;case 2:M+1!==y.getColumnCount()&&(m[N]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class un{constructor(m,y){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=m,this.barcodeColumnCount=m.getColumnCount(),this.boundingBox=y,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let m=va.MAX_CODEWORDS_IN_BARCODE,y;do y=m,m=this.adjustRowNumbersAndGetCount();while(m>0&&m<y);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(m){m?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let m=this.adjustRowNumbersByRow();if(m===0)return 0;for(let y=1;y<this.barcodeColumnCount+1;y++){let N=this.detectionResultColumns[y].getCodewords();for(let C=0;C<N.length;C++)N[C]!=null&&(N[C].hasValidRowNumber()||this.adjustRowNumbers(y,C,N))}return m}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let m=this.detectionResultColumns[0].getCodewords(),y=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let N=0;N<m.length;N++)if(m[N]!=null&&y[N]!=null&&m[N].getRowNumber()===y[N].getRowNumber())for(let C=1;C<=this.barcodeColumnCount;C++){let M=this.detectionResultColumns[C].getCodewords()[N];M!=null&&(M.setRowNumber(m[N].getRowNumber()),M.hasValidRowNumber()||(this.detectionResultColumns[C].getCodewords()[N]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let m=0,y=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let N=0;N<y.length;N++){if(y[N]==null)continue;let C=y[N].getRowNumber(),M=0;for(let L=this.barcodeColumnCount+1;L>0&&M<this.ADJUST_ROW_NUMBER_SKIP;L--){let _=this.detectionResultColumns[L].getCodewords()[N];_!=null&&(M=un.adjustRowNumberIfValid(C,M,_),_.hasValidRowNumber()||m++)}}return m}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let m=0,y=this.detectionResultColumns[0].getCodewords();for(let N=0;N<y.length;N++){if(y[N]==null)continue;let C=y[N].getRowNumber(),M=0;for(let L=1;L<this.barcodeColumnCount+1&&M<this.ADJUST_ROW_NUMBER_SKIP;L++){let _=this.detectionResultColumns[L].getCodewords()[N];_!=null&&(M=un.adjustRowNumberIfValid(C,M,_),_.hasValidRowNumber()||m++)}}return m}static adjustRowNumberIfValid(m,y,N){return N==null||N.hasValidRowNumber()||(N.isValidRowNumber(m)?(N.setRowNumber(m),y=0):++y),y}adjustRowNumbers(m,y,N){if(!this.detectionResultColumns[m-1])return;let C=N[y],M=this.detectionResultColumns[m-1].getCodewords(),L=M;this.detectionResultColumns[m+1]!=null&&(L=this.detectionResultColumns[m+1].getCodewords());let _=new Array(14);_[2]=M[y],_[3]=L[y],y>0&&(_[0]=N[y-1],_[4]=M[y-1],_[5]=L[y-1]),y>1&&(_[8]=N[y-2],_[10]=M[y-2],_[11]=L[y-2]),y<N.length-1&&(_[1]=N[y+1],_[6]=M[y+1],_[7]=L[y+1]),y<N.length-2&&(_[9]=N[y+2],_[12]=M[y+2],_[13]=L[y+2]);for(let A of _)if(un.adjustRowNumber(C,A))return}static adjustRowNumber(m,y){return y==null?!1:y.hasValidRowNumber()&&y.getBucket()===m.getBucket()?(m.setRowNumber(y.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(m){this.boundingBox=m}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(m,y){this.detectionResultColumns[m]=y}getDetectionResultColumn(m){return this.detectionResultColumns[m]}toString(){let m=this.detectionResultColumns[0];m==null&&(m=this.detectionResultColumns[this.barcodeColumnCount+1]);let y=new Ls;for(let N=0;N<m.getCodewords().length;N++){y.format("CW %3d:",N);for(let C=0;C<this.barcodeColumnCount+2;C++){if(this.detectionResultColumns[C]==null){y.format("    |   ");continue}let M=this.detectionResultColumns[C].getCodewords()[N];if(M==null){y.format("    |   ");continue}y.format(" %3d|%3d",M.getRowNumber(),M.getValue())}y.format("%n")}return y.toString()}}class vs{constructor(m,y,N,C){this.rowNumber=vs.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(m),this.endX=Math.trunc(y),this.bucket=Math.trunc(N),this.value=Math.trunc(C)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(m){return m!==vs.BARCODE_ROW_UNKNOWN&&this.bucket===m%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(m){this.rowNumber=m}toString(){return this.rowNumber+"|"+this.value}}vs.BARCODE_ROW_UNKNOWN=-1;class Vn{static initialize(){for(let m=0;m<va.SYMBOL_TABLE.length;m++){let y=va.SYMBOL_TABLE[m],N=y&1;for(let C=0;C<va.BARS_IN_MODULE;C++){let M=0;for(;(y&1)===N;)M+=1,y>>=1;N=y&1,Vn.RATIOS_TABLE[m]||(Vn.RATIOS_TABLE[m]=new Array(va.BARS_IN_MODULE)),Vn.RATIOS_TABLE[m][va.BARS_IN_MODULE-C-1]=Math.fround(M/va.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(m){let y=Vn.getDecodedCodewordValue(Vn.sampleBitCounts(m));return y!==-1?y:Vn.getClosestDecodedValue(m)}static sampleBitCounts(m){let y=wt.sum(m),N=new Int32Array(va.BARS_IN_MODULE),C=0,M=0;for(let L=0;L<va.MODULES_IN_CODEWORD;L++){let _=y/(2*va.MODULES_IN_CODEWORD)+L*y/va.MODULES_IN_CODEWORD;M+m[C]<=_&&(M+=m[C],C++),N[C]++}return N}static getDecodedCodewordValue(m){let y=Vn.getBitValue(m);return va.getCodeword(y)===-1?-1:y}static getBitValue(m){let y=0;for(let N=0;N<m.length;N++)for(let C=0;C<m[N];C++)y=y<<1|(N%2===0?1:0);return Math.trunc(y)}static getClosestDecodedValue(m){let y=wt.sum(m),N=new Array(va.BARS_IN_MODULE);if(y>1)for(let L=0;L<N.length;L++)N[L]=Math.fround(m[L]/y);let C=vt.MAX_VALUE,M=-1;this.bSymbolTableReady||Vn.initialize();for(let L=0;L<Vn.RATIOS_TABLE.length;L++){let _=0,A=Vn.RATIOS_TABLE[L];for(let O=0;O<va.BARS_IN_MODULE;O++){let z=Math.fround(A[O]-N[O]);if(_+=Math.fround(z*z),_>=C)break}_<C&&(C=_,M=va.SYMBOL_TABLE[L])}return M}}Vn.bSymbolTableReady=!1,Vn.RATIOS_TABLE=new Array(va.SYMBOL_TABLE.length).map(ue=>new Array(va.BARS_IN_MODULE));class tl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(m){this.segmentIndex=m}getFileId(){return this.fileId}setFileId(m){this.fileId=m}getOptionalData(){return this.optionalData}setOptionalData(m){this.optionalData=m}isLastSegment(){return this.lastSegment}setLastSegment(m){this.lastSegment=m}getSegmentCount(){return this.segmentCount}setSegmentCount(m){this.segmentCount=m}getSender(){return this.sender||null}setSender(m){this.sender=m}getAddressee(){return this.addressee||null}setAddressee(m){this.addressee=m}getFileName(){return this.fileName}setFileName(m){this.fileName=m}getFileSize(){return this.fileSize}setFileSize(m){this.fileSize=m}getChecksum(){return this.checksum}setChecksum(m){this.checksum=m}getTimestamp(){return this.timestamp}setTimestamp(m){this.timestamp=m}}class Vc{static parseLong(m,y=void 0){return parseInt(m,y)}}class Go extends d{}Go.kind="NullPointerException";class Ph{writeBytes(m){this.writeBytesOffset(m,0,m.length)}writeBytesOffset(m,y,N){if(m==null)throw new Go;if(y<0||y>m.length||N<0||y+N>m.length||y+N<0)throw new w;if(N===0)return;for(let C=0;C<N;C++)this.write(m[y+C])}flush(){}close(){}}class Hc extends d{}class Xd extends Ph{constructor(m=32){if(super(),this.count=0,m<0)throw new h("Negative initial size: "+m);this.buf=new Uint8Array(m)}ensureCapacity(m){m-this.buf.length>0&&this.grow(m)}grow(m){let N=this.buf.length<<1;if(N-m<0&&(N=m),N<0){if(m<0)throw new Hc;N=T.MAX_VALUE}this.buf=k.copyOfUint8Array(this.buf,N)}write(m){this.ensureCapacity(this.count+1),this.buf[this.count]=m,this.count+=1}writeBytesOffset(m,y,N){if(y<0||y>m.length||N<0||y+N-m.length>0)throw new w;this.ensureCapacity(this.count+N),b.arraycopy(m,y,this.buf,this.count,N),this.count+=N}writeTo(m){m.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return k.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(m){return m?typeof m=="string"?this.toString_string(m):this.toString_number(m):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(m){return new String(this.buf).toString()}toString_number(m){return new String(this.buf).toString()}close(){}}var wr;(function(ue){ue[ue.ALPHA=0]="ALPHA",ue[ue.LOWER=1]="LOWER",ue[ue.MIXED=2]="MIXED",ue[ue.PUNCT=3]="PUNCT",ue[ue.ALPHA_SHIFT=4]="ALPHA_SHIFT",ue[ue.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(wr||(wr={}));function Zd(){if(typeof window<"u")return window.BigInt||null;if(typeof Ag<"u")return Ag.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Uc;function bs(ue){if(typeof Uc>"u"&&(Uc=Zd()),Uc===null)throw new Error("BigInt is not supported!");return Uc(ue)}function Wo(){let ue=[];ue[0]=bs(1);let m=bs(900);ue[1]=m;for(let y=2;y<16;y++)ue[y]=ue[y-1]*m;return ue}class nt{static decode(m,y){let N=new Z(""),C=G.ISO8859_1;N.enableDecoding(C);let M=1,L=m[M++],_=new tl;for(;M<m[0];){switch(L){case nt.TEXT_COMPACTION_MODE_LATCH:M=nt.textCompaction(m,M,N);break;case nt.BYTE_COMPACTION_MODE_LATCH:case nt.BYTE_COMPACTION_MODE_LATCH_6:M=nt.byteCompaction(L,m,C,M,N);break;case nt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:N.append(m[M++]);break;case nt.NUMERIC_COMPACTION_MODE_LATCH:M=nt.numericCompaction(m,M,N);break;case nt.ECI_CHARSET:G.getCharacterSetECIByValue(m[M++]);break;case nt.ECI_GENERAL_PURPOSE:M+=2;break;case nt.ECI_USER_DEFINED:M++;break;case nt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:M=nt.decodeMacroBlock(m,M,_);break;case nt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case nt.MACRO_PDF417_TERMINATOR:throw new P;default:M--,M=nt.textCompaction(m,M,N);break}if(M<m.length)L=m[M++];else throw P.getFormatInstance()}if(N.length()===0)throw P.getFormatInstance();let A=new ke(null,N.toString(),null,y);return A.setOther(_),A}static decodeMacroBlock(m,y,N){if(y+nt.NUMBER_OF_SEQUENCE_CODEWORDS>m[0])throw P.getFormatInstance();let C=new Int32Array(nt.NUMBER_OF_SEQUENCE_CODEWORDS);for(let _=0;_<nt.NUMBER_OF_SEQUENCE_CODEWORDS;_++,y++)C[_]=m[y];N.setSegmentIndex(T.parseInt(nt.decodeBase900toBase10(C,nt.NUMBER_OF_SEQUENCE_CODEWORDS)));let M=new Z;y=nt.textCompaction(m,y,M),N.setFileId(M.toString());let L=-1;for(m[y]===nt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(L=y+1);y<m[0];)switch(m[y]){case nt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(y++,m[y]){case nt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let _=new Z;y=nt.textCompaction(m,y+1,_),N.setFileName(_.toString());break;case nt.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let A=new Z;y=nt.textCompaction(m,y+1,A),N.setSender(A.toString());break;case nt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let O=new Z;y=nt.textCompaction(m,y+1,O),N.setAddressee(O.toString());break;case nt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let z=new Z;y=nt.numericCompaction(m,y+1,z),N.setSegmentCount(T.parseInt(z.toString()));break;case nt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let Y=new Z;y=nt.numericCompaction(m,y+1,Y),N.setTimestamp(Vc.parseLong(Y.toString()));break;case nt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let ee=new Z;y=nt.numericCompaction(m,y+1,ee),N.setChecksum(T.parseInt(ee.toString()));break;case nt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ie=new Z;y=nt.numericCompaction(m,y+1,ie),N.setFileSize(Vc.parseLong(ie.toString()));break;default:throw P.getFormatInstance()}break;case nt.MACRO_PDF417_TERMINATOR:y++,N.setLastSegment(!0);break;default:throw P.getFormatInstance()}if(L!==-1){let _=y-L;N.isLastSegment()&&_--,N.setOptionalData(k.copyOfRange(m,L,L+_))}return y}static textCompaction(m,y,N){let C=new Int32Array((m[0]-y)*2),M=new Int32Array((m[0]-y)*2),L=0,_=!1;for(;y<m[0]&&!_;){let A=m[y++];if(A<nt.TEXT_COMPACTION_MODE_LATCH)C[L]=A/30,C[L+1]=A%30,L+=2;else switch(A){case nt.TEXT_COMPACTION_MODE_LATCH:C[L++]=nt.TEXT_COMPACTION_MODE_LATCH;break;case nt.BYTE_COMPACTION_MODE_LATCH:case nt.BYTE_COMPACTION_MODE_LATCH_6:case nt.NUMERIC_COMPACTION_MODE_LATCH:case nt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case nt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case nt.MACRO_PDF417_TERMINATOR:y--,_=!0;break;case nt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:C[L]=nt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,A=m[y++],M[L]=A,L++;break}}return nt.decodeTextCompaction(C,M,L,N),y}static decodeTextCompaction(m,y,N,C){let M=wr.ALPHA,L=wr.ALPHA,_=0;for(;_<N;){let A=m[_],O="";switch(M){case wr.ALPHA:if(A<26)O=String.fromCharCode(65+A);else switch(A){case 26:O=" ";break;case nt.LL:M=wr.LOWER;break;case nt.ML:M=wr.MIXED;break;case nt.PS:L=M,M=wr.PUNCT_SHIFT;break;case nt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:C.append(y[_]);break;case nt.TEXT_COMPACTION_MODE_LATCH:M=wr.ALPHA;break}break;case wr.LOWER:if(A<26)O=String.fromCharCode(97+A);else switch(A){case 26:O=" ";break;case nt.AS:L=M,M=wr.ALPHA_SHIFT;break;case nt.ML:M=wr.MIXED;break;case nt.PS:L=M,M=wr.PUNCT_SHIFT;break;case nt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:C.append(y[_]);break;case nt.TEXT_COMPACTION_MODE_LATCH:M=wr.ALPHA;break}break;case wr.MIXED:if(A<nt.PL)O=nt.MIXED_CHARS[A];else switch(A){case nt.PL:M=wr.PUNCT;break;case 26:O=" ";break;case nt.LL:M=wr.LOWER;break;case nt.AL:M=wr.ALPHA;break;case nt.PS:L=M,M=wr.PUNCT_SHIFT;break;case nt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:C.append(y[_]);break;case nt.TEXT_COMPACTION_MODE_LATCH:M=wr.ALPHA;break}break;case wr.PUNCT:if(A<nt.PAL)O=nt.PUNCT_CHARS[A];else switch(A){case nt.PAL:M=wr.ALPHA;break;case nt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:C.append(y[_]);break;case nt.TEXT_COMPACTION_MODE_LATCH:M=wr.ALPHA;break}break;case wr.ALPHA_SHIFT:if(M=L,A<26)O=String.fromCharCode(65+A);else switch(A){case 26:O=" ";break;case nt.TEXT_COMPACTION_MODE_LATCH:M=wr.ALPHA;break}break;case wr.PUNCT_SHIFT:if(M=L,A<nt.PAL)O=nt.PUNCT_CHARS[A];else switch(A){case nt.PAL:M=wr.ALPHA;break;case nt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:C.append(y[_]);break;case nt.TEXT_COMPACTION_MODE_LATCH:M=wr.ALPHA;break}break}O!==""&&C.append(O),_++}}static byteCompaction(m,y,N,C,M){let L=new Xd,_=0,A=0,O=!1;switch(m){case nt.BYTE_COMPACTION_MODE_LATCH:let z=new Int32Array(6),Y=y[C++];for(;C<y[0]&&!O;)switch(z[_++]=Y,A=900*A+Y,Y=y[C++],Y){case nt.TEXT_COMPACTION_MODE_LATCH:case nt.BYTE_COMPACTION_MODE_LATCH:case nt.NUMERIC_COMPACTION_MODE_LATCH:case nt.BYTE_COMPACTION_MODE_LATCH_6:case nt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case nt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case nt.MACRO_PDF417_TERMINATOR:C--,O=!0;break;default:if(_%5===0&&_>0){for(let ee=0;ee<6;++ee)L.write(Number(bs(A)>>bs(8*(5-ee))));A=0,_=0}break}C===y[0]&&Y<nt.TEXT_COMPACTION_MODE_LATCH&&(z[_++]=Y);for(let ee=0;ee<_;ee++)L.write(z[ee]);break;case nt.BYTE_COMPACTION_MODE_LATCH_6:for(;C<y[0]&&!O;){let ee=y[C++];if(ee<nt.TEXT_COMPACTION_MODE_LATCH)_++,A=900*A+ee;else switch(ee){case nt.TEXT_COMPACTION_MODE_LATCH:case nt.BYTE_COMPACTION_MODE_LATCH:case nt.NUMERIC_COMPACTION_MODE_LATCH:case nt.BYTE_COMPACTION_MODE_LATCH_6:case nt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case nt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case nt.MACRO_PDF417_TERMINATOR:C--,O=!0;break}if(_%5===0&&_>0){for(let ie=0;ie<6;++ie)L.write(Number(bs(A)>>bs(8*(5-ie))));A=0,_=0}}break}return M.append(U.decode(L.toByteArray(),N)),C}static numericCompaction(m,y,N){let C=0,M=!1,L=new Int32Array(nt.MAX_NUMERIC_CODEWORDS);for(;y<m[0]&&!M;){let _=m[y++];if(y===m[0]&&(M=!0),_<nt.TEXT_COMPACTION_MODE_LATCH)L[C]=_,C++;else switch(_){case nt.TEXT_COMPACTION_MODE_LATCH:case nt.BYTE_COMPACTION_MODE_LATCH:case nt.BYTE_COMPACTION_MODE_LATCH_6:case nt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case nt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case nt.MACRO_PDF417_TERMINATOR:y--,M=!0;break}(C%nt.MAX_NUMERIC_CODEWORDS===0||_===nt.NUMERIC_COMPACTION_MODE_LATCH||M)&&C>0&&(N.append(nt.decodeBase900toBase10(L,C)),C=0)}return y}static decodeBase900toBase10(m,y){let N=bs(0);for(let M=0;M<y;M++)N+=nt.EXP900[y-M-1]*bs(m[M]);let C=N.toString();if(C.charAt(0)!=="1")throw new P;return C.substring(1)}}nt.TEXT_COMPACTION_MODE_LATCH=900,nt.BYTE_COMPACTION_MODE_LATCH=901,nt.NUMERIC_COMPACTION_MODE_LATCH=902,nt.BYTE_COMPACTION_MODE_LATCH_6=924,nt.ECI_USER_DEFINED=925,nt.ECI_GENERAL_PURPOSE=926,nt.ECI_CHARSET=927,nt.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,nt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,nt.MACRO_PDF417_TERMINATOR=922,nt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,nt.MAX_NUMERIC_CODEWORDS=15,nt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,nt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,nt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,nt.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,nt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,nt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,nt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,nt.PL=25,nt.LL=27,nt.AS=27,nt.ML=28,nt.AL=28,nt.PS=29,nt.PAL=29,nt.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,nt.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",nt.EXP900=Zd()?Wo():[],nt.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Wa{constructor(){}static decode(m,y,N,C,M,L,_){let A=new Rs(m,y,N,C,M),O=null,z=null,Y;for(let oe=!0;;oe=!1){if(y!=null&&(O=Wa.getRowIndicatorColumn(m,A,y,!0,L,_)),C!=null&&(z=Wa.getRowIndicatorColumn(m,A,C,!1,L,_)),Y=Wa.merge(O,z),Y==null)throw B.getNotFoundInstance();let fe=Y.getBoundingBox();if(oe&&fe!=null&&(fe.getMinY()<A.getMinY()||fe.getMaxY()>A.getMaxY()))A=fe;else break}Y.setBoundingBox(A);let ee=Y.getBarcodeColumnCount()+1;Y.setDetectionResultColumn(0,O),Y.setDetectionResultColumn(ee,z);let ie=O!=null;for(let oe=1;oe<=ee;oe++){let fe=ie?oe:ee-oe;if(Y.getDetectionResultColumn(fe)!==void 0)continue;let ge;fe===0||fe===ee?ge=new Oh(A,fe===0):ge=new Os(A),Y.setDetectionResultColumn(fe,ge);let me=-1,ve=me;for(let we=A.getMinY();we<=A.getMaxY();we++){if(me=Wa.getStartColumn(Y,fe,we,ie),me<0||me>A.getMaxX()){if(ve===-1)continue;me=ve}let be=Wa.detectCodeword(m,A.getMinX(),A.getMaxX(),ie,me,we,L,_);be!=null&&(ge.setCodeword(we,be),ve=me,L=Math.min(L,be.getWidth()),_=Math.max(_,be.getWidth()))}}return Wa.createDecoderResult(Y)}static merge(m,y){if(m==null&&y==null)return null;let N=Wa.getBarcodeMetadata(m,y);if(N==null)return null;let C=Rs.merge(Wa.adjustBoundingBox(m),Wa.adjustBoundingBox(y));return new un(N,C)}static adjustBoundingBox(m){if(m==null)return null;let y=m.getRowHeights();if(y==null)return null;let N=Wa.getMax(y),C=0;for(let _ of y)if(C+=N-_,_>0)break;let M=m.getCodewords();for(let _=0;C>0&&M[_]==null;_++)C--;let L=0;for(let _=y.length-1;_>=0&&(L+=N-y[_],!(y[_]>0));_--);for(let _=M.length-1;L>0&&M[_]==null;_--)L--;return m.getBoundingBox().addMissingRows(C,L,m.isLeft())}static getMax(m){let y=-1;for(let N of m)y=Math.max(y,N);return y}static getBarcodeMetadata(m,y){let N;if(m==null||(N=m.getBarcodeMetadata())==null)return y==null?null:y.getBarcodeMetadata();let C;return y==null||(C=y.getBarcodeMetadata())==null?N:N.getColumnCount()!==C.getColumnCount()&&N.getErrorCorrectionLevel()!==C.getErrorCorrectionLevel()&&N.getRowCount()!==C.getRowCount()?null:N}static getRowIndicatorColumn(m,y,N,C,M,L){let _=new Oh(y,C);for(let A=0;A<2;A++){let O=A===0?1:-1,z=Math.trunc(Math.trunc(N.getX()));for(let Y=Math.trunc(Math.trunc(N.getY()));Y<=y.getMaxY()&&Y>=y.getMinY();Y+=O){let ee=Wa.detectCodeword(m,0,m.getWidth(),C,z,Y,M,L);ee!=null&&(_.setCodeword(Y,ee),C?z=ee.getStartX():z=ee.getEndX())}}return _}static adjustCodewordCount(m,y){let N=y[0][1],C=N.getValue(),M=m.getBarcodeColumnCount()*m.getBarcodeRowCount()-Wa.getNumberOfECCodeWords(m.getBarcodeECLevel());if(C.length===0){if(M<1||M>va.MAX_CODEWORDS_IN_BARCODE)throw B.getNotFoundInstance();N.setValue(M)}else C[0]!==M&&N.setValue(M)}static createDecoderResult(m){let y=Wa.createBarcodeMatrix(m);Wa.adjustCodewordCount(m,y);let N=new Array,C=new Int32Array(m.getBarcodeRowCount()*m.getBarcodeColumnCount()),M=[],L=new Array;for(let A=0;A<m.getBarcodeRowCount();A++)for(let O=0;O<m.getBarcodeColumnCount();O++){let z=y[A][O+1].getValue(),Y=A*m.getBarcodeColumnCount()+O;z.length===0?N.push(Y):z.length===1?C[Y]=z[0]:(L.push(Y),M.push(z))}let _=new Array(M.length);for(let A=0;A<_.length;A++)_[A]=M[A];return Wa.createDecoderResultFromAmbiguousValues(m.getBarcodeECLevel(),C,va.toIntArray(N),va.toIntArray(L),_)}static createDecoderResultFromAmbiguousValues(m,y,N,C,M){let L=new Int32Array(C.length),_=100;for(;_-- >0;){for(let A=0;A<L.length;A++)y[C[A]]=M[A][L[A]];try{return Wa.decodeCodewords(y,m,N)}catch(A){if(!(A instanceof p))throw A}if(L.length===0)throw p.getChecksumInstance();for(let A=0;A<L.length;A++)if(L[A]<M[A].length-1){L[A]++;break}else if(L[A]=0,A===L.length-1)throw p.getChecksumInstance()}throw p.getChecksumInstance()}static createBarcodeMatrix(m){let y=Array.from({length:m.getBarcodeRowCount()},()=>new Array(m.getBarcodeColumnCount()+2));for(let C=0;C<y.length;C++)for(let M=0;M<y[C].length;M++)y[C][M]=new el;let N=0;for(let C of m.getDetectionResultColumns()){if(C!=null){for(let M of C.getCodewords())if(M!=null){let L=M.getRowNumber();if(L>=0){if(L>=y.length)continue;y[L][N].setValue(M.getValue())}}}N++}return y}static isValidBarcodeColumn(m,y){return y>=0&&y<=m.getBarcodeColumnCount()+1}static getStartColumn(m,y,N,C){let M=C?1:-1,L=null;if(Wa.isValidBarcodeColumn(m,y-M)&&(L=m.getDetectionResultColumn(y-M).getCodeword(N)),L!=null)return C?L.getEndX():L.getStartX();if(L=m.getDetectionResultColumn(y).getCodewordNearby(N),L!=null)return C?L.getStartX():L.getEndX();if(Wa.isValidBarcodeColumn(m,y-M)&&(L=m.getDetectionResultColumn(y-M).getCodewordNearby(N)),L!=null)return C?L.getEndX():L.getStartX();let _=0;for(;Wa.isValidBarcodeColumn(m,y-M);){y-=M;for(let A of m.getDetectionResultColumn(y).getCodewords())if(A!=null)return(C?A.getEndX():A.getStartX())+M*_*(A.getEndX()-A.getStartX());_++}return C?m.getBoundingBox().getMinX():m.getBoundingBox().getMaxX()}static detectCodeword(m,y,N,C,M,L,_,A){M=Wa.adjustCodewordStartColumn(m,y,N,C,M,L);let O=Wa.getModuleBitCount(m,y,N,C,M,L);if(O==null)return null;let z,Y=wt.sum(O);if(C)z=M+Y;else{for(let oe=0;oe<O.length/2;oe++){let fe=O[oe];O[oe]=O[O.length-1-oe],O[O.length-1-oe]=fe}z=M,M=z-Y}if(!Wa.checkCodewordSkew(Y,_,A))return null;let ee=Vn.getDecodedValue(O),ie=va.getCodeword(ee);return ie===-1?null:new vs(M,z,Wa.getCodewordBucketNumber(ee),ie)}static getModuleBitCount(m,y,N,C,M,L){let _=M,A=new Int32Array(8),O=0,z=C?1:-1,Y=C;for(;(C?_<N:_>=y)&&O<A.length;)m.get(_,L)===Y?(A[O]++,_+=z):(O++,Y=!Y);return O===A.length||_===(C?N:y)&&O===A.length-1?A:null}static getNumberOfECCodeWords(m){return 2<<m}static adjustCodewordStartColumn(m,y,N,C,M,L){let _=M,A=C?-1:1;for(let O=0;O<2;O++){for(;(C?_>=y:_<N)&&C===m.get(_,L);){if(Math.abs(M-_)>Wa.CODEWORD_SKEW_SIZE)return M;_+=A}A=-A,C=!C}return _}static checkCodewordSkew(m,y,N){return y-Wa.CODEWORD_SKEW_SIZE<=m&&m<=N+Wa.CODEWORD_SKEW_SIZE}static decodeCodewords(m,y,N){if(m.length===0)throw P.getFormatInstance();let C=1<<y+1,M=Wa.correctErrors(m,N,C);Wa.verifyCodewordCount(m,C);let L=nt.decode(m,""+y);return L.setErrorsCorrected(M),L.setErasures(N.length),L}static correctErrors(m,y,N){if(y!=null&&y.length>N/2+Wa.MAX_ERRORS||N<0||N>Wa.MAX_EC_CODEWORDS)throw p.getChecksumInstance();return Wa.errorCorrection.decode(m,N,y)}static verifyCodewordCount(m,y){if(m.length<4)throw P.getFormatInstance();let N=m[0];if(N>m.length)throw P.getFormatInstance();if(N===0)if(y<m.length)m[0]=m.length-y;else throw P.getFormatInstance()}static getBitCountForCodeword(m){let y=new Int32Array(8),N=0,C=y.length-1;for(;!((m&1)!==N&&(N=m&1,C--,C<0));)y[C]++,m>>=1;return y}static getCodewordBucketNumber(m){return m instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(m):this.getCodewordBucketNumber_number(m)}static getCodewordBucketNumber_number(m){return Wa.getCodewordBucketNumber(Wa.getBitCountForCodeword(m))}static getCodewordBucketNumber_Int32Array(m){return(m[0]-m[2]+m[4]-m[6]+9)%9}static toString(m){let y=new Ls;for(let N=0;N<m.length;N++){y.format("Row %2d: ",N);for(let C=0;C<m[N].length;C++){let M=m[N][C];M.getValue().length===0?y.format("        ",null):y.format("%4d(%2d)",M.getValue()[0],M.getConfidence(M.getValue()[0]))}y.format("%n")}return y.toString()}}Wa.CODEWORD_SKEW_SIZE=2,Wa.MAX_ERRORS=3,Wa.MAX_EC_CODEWORDS=512,Wa.errorCorrection=new gs;class Hn{decode(m,y=null){let N=Hn.decode(m,y,!1);if(N==null||N.length===0||N[0]==null)throw B.getNotFoundInstance();return N[0]}decodeMultiple(m,y=null){try{return Hn.decode(m,y,!0)}catch(N){throw N instanceof P||N instanceof p?B.getNotFoundInstance():N}}static decode(m,y,N){const C=new Array,M=Da.detectMultiple(m,y,N);for(const L of M.getPoints()){const _=Wa.decode(M.getBits(),L[4],L[5],L[6],L[7],Hn.getMinCodewordWidth(L),Hn.getMaxCodewordWidth(L)),A=new de(_.getText(),_.getRawBytes(),void 0,L,pe.PDF_417);A.putMetadata(Te.ERROR_CORRECTION_LEVEL,_.getECLevel());const O=_.getOther();O!=null&&A.putMetadata(Te.PDF417_EXTRA_METADATA,O),C.push(A)}return C.map(L=>L)}static getMaxWidth(m,y){return m==null||y==null?0:Math.trunc(Math.abs(m.getX()-y.getX()))}static getMinWidth(m,y){return m==null||y==null?T.MAX_VALUE:Math.trunc(Math.abs(m.getX()-y.getX()))}static getMaxCodewordWidth(m){return Math.floor(Math.max(Math.max(Hn.getMaxWidth(m[0],m[4]),Hn.getMaxWidth(m[6],m[2])*va.MODULES_IN_CODEWORD/va.MODULES_IN_STOP_PATTERN),Math.max(Hn.getMaxWidth(m[1],m[5]),Hn.getMaxWidth(m[7],m[3])*va.MODULES_IN_CODEWORD/va.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(m){return Math.floor(Math.min(Math.min(Hn.getMinWidth(m[0],m[4]),Hn.getMinWidth(m[6],m[2])*va.MODULES_IN_CODEWORD/va.MODULES_IN_STOP_PATTERN),Math.min(Hn.getMinWidth(m[1],m[5]),Hn.getMinWidth(m[7],m[3])*va.MODULES_IN_CODEWORD/va.MODULES_IN_STOP_PATTERN)))}reset(){}}class al extends d{}al.kind="ReaderException";class Kd{constructor(m,y){this.verbose=m===!0,y&&this.setHints(y)}decode(m,y){return y&&this.setHints(y),this.decodeInternal(m)}decodeWithState(m){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(m)}setHints(m){this.hints=m;const y=!r(m)&&m.get(R.TRY_HARDER)===!0,N=r(m)?null:m.get(R.POSSIBLE_FORMATS),C=new Array;if(!r(N)){const M=N.some(L=>L===pe.UPC_A||L===pe.UPC_E||L===pe.EAN_13||L===pe.EAN_8||L===pe.CODABAR||L===pe.CODE_39||L===pe.CODE_93||L===pe.CODE_128||L===pe.ITF||L===pe.RSS_14||L===pe.RSS_EXPANDED);M&&!y&&C.push(new jn(m,this.verbose)),N.includes(pe.QR_CODE)&&C.push(new Tn),N.includes(pe.DATA_MATRIX)&&C.push(new Ds),N.includes(pe.AZTEC)&&C.push(new je),N.includes(pe.PDF_417)&&C.push(new Hn),M&&y&&C.push(new jn(m,this.verbose))}C.length===0&&(y||C.push(new jn(m,this.verbose)),C.push(new Tn),C.push(new Ds),C.push(new je),C.push(new Hn),y&&C.push(new jn(m,this.verbose))),this.readers=C}reset(){if(this.readers!==null)for(const m of this.readers)m.reset()}decodeInternal(m){if(this.readers===null)throw new al("No readers where selected, nothing can be read.");for(const y of this.readers)try{return y.decode(m,this.hints)}catch(N){if(N instanceof al)continue}throw new B("No MultiFormat Readers were able to detect the code.")}}class Qd extends ce{constructor(m=null,y=500){const N=new Kd;N.setHints(m),super(N,y)}decodeBitmap(m){return this.reader.decodeWithState(m)}}class zh extends ce{constructor(m=500){super(new Hn,m)}}class Bh extends ce{constructor(m=500){super(new Tn,m)}}var Mn;(function(ue){ue[ue.ERROR_CORRECTION=0]="ERROR_CORRECTION",ue[ue.CHARACTER_SET=1]="CHARACTER_SET",ue[ue.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",ue[ue.MIN_SIZE=3]="MIN_SIZE",ue[ue.MAX_SIZE=4]="MAX_SIZE",ue[ue.MARGIN=5]="MARGIN",ue[ue.PDF417_COMPACT=6]="PDF417_COMPACT",ue[ue.PDF417_COMPACTION=7]="PDF417_COMPACTION",ue[ue.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",ue[ue.AZTEC_LAYERS=9]="AZTEC_LAYERS",ue[ue.QR_VERSION=10]="QR_VERSION"})(Mn||(Mn={}));var nn=Mn;class rl{constructor(m){this.field=m,this.cachedGenerators=[],this.cachedGenerators.push(new Ne(m,Int32Array.from([1])))}buildGenerator(m){const y=this.cachedGenerators;if(m>=y.length){let N=y[y.length-1];const C=this.field;for(let M=y.length;M<=m;M++){const L=N.multiply(new Ne(C,Int32Array.from([1,C.exp(M-1+C.getGeneratorBase())])));y.push(L),N=L}}return y[m]}encode(m,y){if(y===0)throw new h("No error correction bytes");const N=m.length-y;if(N<=0)throw new h("No data bytes provided");const C=this.buildGenerator(y),M=new Int32Array(N);b.arraycopy(m,0,M,0,N);let L=new Ne(this.field,M);L=L.multiplyByMonomial(y,1);const A=L.divide(C)[1].getCoefficients(),O=y-A.length;for(let z=0;z<O;z++)m[N+z]=0;b.arraycopy(A,0,m,N+O,A.length)}}class sn{constructor(){}static applyMaskPenaltyRule1(m){return sn.applyMaskPenaltyRule1Internal(m,!0)+sn.applyMaskPenaltyRule1Internal(m,!1)}static applyMaskPenaltyRule2(m){let y=0;const N=m.getArray(),C=m.getWidth(),M=m.getHeight();for(let L=0;L<M-1;L++){const _=N[L];for(let A=0;A<C-1;A++){const O=_[A];O===_[A+1]&&O===N[L+1][A]&&O===N[L+1][A+1]&&y++}}return sn.N2*y}static applyMaskPenaltyRule3(m){let y=0;const N=m.getArray(),C=m.getWidth(),M=m.getHeight();for(let L=0;L<M;L++)for(let _=0;_<C;_++){const A=N[L];_+6<C&&A[_]===1&&A[_+1]===0&&A[_+2]===1&&A[_+3]===1&&A[_+4]===1&&A[_+5]===0&&A[_+6]===1&&(sn.isWhiteHorizontal(A,_-4,_)||sn.isWhiteHorizontal(A,_+7,_+11))&&y++,L+6<M&&N[L][_]===1&&N[L+1][_]===0&&N[L+2][_]===1&&N[L+3][_]===1&&N[L+4][_]===1&&N[L+5][_]===0&&N[L+6][_]===1&&(sn.isWhiteVertical(N,_,L-4,L)||sn.isWhiteVertical(N,_,L+7,L+11))&&y++}return y*sn.N3}static isWhiteHorizontal(m,y,N){y=Math.max(y,0),N=Math.min(N,m.length);for(let C=y;C<N;C++)if(m[C]===1)return!1;return!0}static isWhiteVertical(m,y,N,C){N=Math.max(N,0),C=Math.min(C,m.length);for(let M=N;M<C;M++)if(m[M][y]===1)return!1;return!0}static applyMaskPenaltyRule4(m){let y=0;const N=m.getArray(),C=m.getWidth(),M=m.getHeight();for(let A=0;A<M;A++){const O=N[A];for(let z=0;z<C;z++)O[z]===1&&y++}const L=m.getHeight()*m.getWidth();return Math.floor(Math.abs(y*2-L)*10/L)*sn.N4}static getDataMaskBit(m,y,N){let C,M;switch(m){case 0:C=N+y&1;break;case 1:C=N&1;break;case 2:C=y%3;break;case 3:C=(N+y)%3;break;case 4:C=Math.floor(N/2)+Math.floor(y/3)&1;break;case 5:M=N*y,C=(M&1)+M%3;break;case 6:M=N*y,C=(M&1)+M%3&1;break;case 7:M=N*y,C=M%3+(N+y&1)&1;break;default:throw new h("Invalid mask pattern: "+m)}return C===0}static applyMaskPenaltyRule1Internal(m,y){let N=0;const C=y?m.getHeight():m.getWidth(),M=y?m.getWidth():m.getHeight(),L=m.getArray();for(let _=0;_<C;_++){let A=0,O=-1;for(let z=0;z<M;z++){const Y=y?L[_][z]:L[z][_];Y===O?A++:(A>=5&&(N+=sn.N1+(A-5)),A=1,O=Y)}A>=5&&(N+=sn.N1+(A-5))}return N}}sn.N1=3,sn.N2=3,sn.N3=40,sn.N4=10;class fo{constructor(m,y){this.width=m,this.height=y;const N=new Array(y);for(let C=0;C!==y;C++)N[C]=new Uint8Array(m);this.bytes=N}getHeight(){return this.height}getWidth(){return this.width}get(m,y){return this.bytes[y][m]}getArray(){return this.bytes}setNumber(m,y,N){this.bytes[y][m]=N}setBoolean(m,y,N){this.bytes[y][m]=N?1:0}clear(m){for(const y of this.bytes)k.fill(y,m)}equals(m){if(!(m instanceof fo))return!1;const y=m;if(this.width!==y.width||this.height!==y.height)return!1;for(let N=0,C=this.height;N<C;++N){const M=this.bytes[N],L=y.bytes[N];for(let _=0,A=this.width;_<A;++_)if(M[_]!==L[_])return!1}return!0}toString(){const m=new Z;for(let y=0,N=this.height;y<N;++y){const C=this.bytes[y];for(let M=0,L=this.width;M<L;++M)switch(C[M]){case 0:m.append(" 0");break;case 1:m.append(" 1");break;default:m.append("  ");break}m.append(`
`)}return m.toString()}}class El{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const m=new Z;return m.append(`<<
`),m.append(" mode: "),m.append(this.mode?this.mode.toString():"null"),m.append(`
 ecLevel: `),m.append(this.ecLevel?this.ecLevel.toString():"null"),m.append(`
 version: `),m.append(this.version?this.version.toString():"null"),m.append(`
 maskPattern: `),m.append(this.maskPattern.toString()),this.matrix?(m.append(`
 matrix:
`),m.append(this.matrix.toString())):m.append(`
 matrix: null
`),m.append(`>>
`),m.toString()}setMode(m){this.mode=m}setECLevel(m){this.ecLevel=m}setVersion(m){this.version=m}setMaskPattern(m){this.maskPattern=m}setMatrix(m){this.matrix=m}static isValidMaskPattern(m){return m>=0&&m<El.NUM_MASK_PATTERNS}}El.NUM_MASK_PATTERNS=8;class Cr extends d{}Cr.kind="WriterException";class ba{constructor(){}static clearMatrix(m){m.clear(255)}static buildMatrix(m,y,N,C,M){ba.clearMatrix(M),ba.embedBasicPatterns(N,M),ba.embedTypeInfo(y,C,M),ba.maybeEmbedVersionInfo(N,M),ba.embedDataBits(m,C,M)}static embedBasicPatterns(m,y){ba.embedPositionDetectionPatternsAndSeparators(y),ba.embedDarkDotAtLeftBottomCorner(y),ba.maybeEmbedPositionAdjustmentPatterns(m,y),ba.embedTimingPatterns(y)}static embedTypeInfo(m,y,N){const C=new E;ba.makeTypeInfoBits(m,y,C);for(let M=0,L=C.getSize();M<L;++M){const _=C.get(C.getSize()-1-M),A=ba.TYPE_INFO_COORDINATES[M],O=A[0],z=A[1];if(N.setBoolean(O,z,_),M<8){const Y=N.getWidth()-M-1;N.setBoolean(Y,8,_)}else{const ee=N.getHeight()-7+(M-8);N.setBoolean(8,ee,_)}}}static maybeEmbedVersionInfo(m,y){if(m.getVersionNumber()<7)return;const N=new E;ba.makeVersionInfoBits(m,N);let C=17;for(let M=0;M<6;++M)for(let L=0;L<3;++L){const _=N.get(C);C--,y.setBoolean(M,y.getHeight()-11+L,_),y.setBoolean(y.getHeight()-11+L,M,_)}}static embedDataBits(m,y,N){let C=0,M=-1,L=N.getWidth()-1,_=N.getHeight()-1;for(;L>0;){for(L===6&&(L-=1);_>=0&&_<N.getHeight();){for(let A=0;A<2;++A){const O=L-A;if(!ba.isEmpty(N.get(O,_)))continue;let z;C<m.getSize()?(z=m.get(C),++C):z=!1,y!==255&&sn.getDataMaskBit(y,O,_)&&(z=!z),N.setBoolean(O,_,z)}_+=M}M=-M,_+=M,L-=2}if(C!==m.getSize())throw new Cr("Not all bits consumed: "+C+"/"+m.getSize())}static findMSBSet(m){return 32-T.numberOfLeadingZeros(m)}static calculateBCHCode(m,y){if(y===0)throw new h("0 polynomial");const N=ba.findMSBSet(y);for(m<<=N-1;ba.findMSBSet(m)>=N;)m^=y<<ba.findMSBSet(m)-N;return m}static makeTypeInfoBits(m,y,N){if(!El.isValidMaskPattern(y))throw new Cr("Invalid mask pattern");const C=m.getBits()<<3|y;N.appendBits(C,5);const M=ba.calculateBCHCode(C,ba.TYPE_INFO_POLY);N.appendBits(M,10);const L=new E;if(L.appendBits(ba.TYPE_INFO_MASK_PATTERN,15),N.xor(L),N.getSize()!==15)throw new Cr("should not happen but we got: "+N.getSize())}static makeVersionInfoBits(m,y){y.appendBits(m.getVersionNumber(),6);const N=ba.calculateBCHCode(m.getVersionNumber(),ba.VERSION_INFO_POLY);if(y.appendBits(N,12),y.getSize()!==18)throw new Cr("should not happen but we got: "+y.getSize())}static isEmpty(m){return m===255}static embedTimingPatterns(m){for(let y=8;y<m.getWidth()-8;++y){const N=(y+1)%2;ba.isEmpty(m.get(y,6))&&m.setNumber(y,6,N),ba.isEmpty(m.get(6,y))&&m.setNumber(6,y,N)}}static embedDarkDotAtLeftBottomCorner(m){if(m.get(8,m.getHeight()-8)===0)throw new Cr;m.setNumber(8,m.getHeight()-8,1)}static embedHorizontalSeparationPattern(m,y,N){for(let C=0;C<8;++C){if(!ba.isEmpty(N.get(m+C,y)))throw new Cr;N.setNumber(m+C,y,0)}}static embedVerticalSeparationPattern(m,y,N){for(let C=0;C<7;++C){if(!ba.isEmpty(N.get(m,y+C)))throw new Cr;N.setNumber(m,y+C,0)}}static embedPositionAdjustmentPattern(m,y,N){for(let C=0;C<5;++C){const M=ba.POSITION_ADJUSTMENT_PATTERN[C];for(let L=0;L<5;++L)N.setNumber(m+L,y+C,M[L])}}static embedPositionDetectionPattern(m,y,N){for(let C=0;C<7;++C){const M=ba.POSITION_DETECTION_PATTERN[C];for(let L=0;L<7;++L)N.setNumber(m+L,y+C,M[L])}}static embedPositionDetectionPatternsAndSeparators(m){const y=ba.POSITION_DETECTION_PATTERN[0].length;ba.embedPositionDetectionPattern(0,0,m),ba.embedPositionDetectionPattern(m.getWidth()-y,0,m),ba.embedPositionDetectionPattern(0,m.getWidth()-y,m);const N=8;ba.embedHorizontalSeparationPattern(0,N-1,m),ba.embedHorizontalSeparationPattern(m.getWidth()-N,N-1,m),ba.embedHorizontalSeparationPattern(0,m.getWidth()-N,m);const C=7;ba.embedVerticalSeparationPattern(C,0,m),ba.embedVerticalSeparationPattern(m.getHeight()-C-1,0,m),ba.embedVerticalSeparationPattern(C,m.getHeight()-C,m)}static maybeEmbedPositionAdjustmentPatterns(m,y){if(m.getVersionNumber()<2)return;const N=m.getVersionNumber()-1,C=ba.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[N];for(let M=0,L=C.length;M!==L;M++){const _=C[M];if(_>=0)for(let A=0;A!==L;A++){const O=C[A];O>=0&&ba.isEmpty(y.get(O,_))&&ba.embedPositionAdjustmentPattern(O-2,_-2,y)}}}}ba.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ba.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ba.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ba.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ba.VERSION_INFO_POLY=7973,ba.TYPE_INFO_POLY=1335,ba.TYPE_INFO_MASK_PATTERN=21522;class Fh{constructor(m,y){this.dataBytes=m,this.errorCorrectionBytes=y}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class _r{constructor(){}static calculateMaskPenalty(m){return sn.applyMaskPenaltyRule1(m)+sn.applyMaskPenaltyRule2(m)+sn.applyMaskPenaltyRule3(m)+sn.applyMaskPenaltyRule4(m)}static encode(m,y,N=null){let C=_r.DEFAULT_BYTE_MODE_ENCODING;const M=N!==null&&N.get(nn.CHARACTER_SET)!==void 0;M&&(C=N.get(nn.CHARACTER_SET).toString());const L=this.chooseMode(m,C),_=new E;if(L===ga.BYTE&&(M||_r.DEFAULT_BYTE_MODE_ENCODING!==C)){const we=G.getCharacterSetECIByName(C);we!==void 0&&this.appendECI(we,_)}this.appendModeInfo(L,_);const A=new E;this.appendBytes(m,L,A,C);let O;if(N!==null&&N.get(nn.QR_VERSION)!==void 0){const we=Number.parseInt(N.get(nn.QR_VERSION).toString(),10);O=ia.getVersionForNumber(we);const be=this.calculateBitsNeeded(L,_,A,O);if(!this.willFit(be,O,y))throw new Cr("Data too big for requested version")}else O=this.recommendVersion(y,L,_,A);const z=new E;z.appendBitArray(_);const Y=L===ga.BYTE?A.getSizeInBytes():m.length;this.appendLengthInfo(Y,O,L,z),z.appendBitArray(A);const ee=O.getECBlocksForLevel(y),ie=O.getTotalCodewords()-ee.getTotalECCodewords();this.terminateBits(ie,z);const oe=this.interleaveWithECBytes(z,O.getTotalCodewords(),ie,ee.getNumBlocks()),fe=new El;fe.setECLevel(y),fe.setMode(L),fe.setVersion(O);const ge=O.getDimensionForVersion(),me=new fo(ge,ge),ve=this.chooseMaskPattern(oe,y,O,me);return fe.setMaskPattern(ve),ba.buildMatrix(oe,y,O,ve,me),fe.setMatrix(me),fe}static recommendVersion(m,y,N,C){const M=this.calculateBitsNeeded(y,N,C,ia.getVersionForNumber(1)),L=this.chooseVersion(M,m),_=this.calculateBitsNeeded(y,N,C,L);return this.chooseVersion(_,m)}static calculateBitsNeeded(m,y,N,C){return y.getSize()+m.getCharacterCountBits(C)+N.getSize()}static getAlphanumericCode(m){return m<_r.ALPHANUMERIC_TABLE.length?_r.ALPHANUMERIC_TABLE[m]:-1}static chooseMode(m,y=null){if(G.SJIS.getName()===y&&this.isOnlyDoubleByteKanji(m))return ga.KANJI;let N=!1,C=!1;for(let M=0,L=m.length;M<L;++M){const _=m.charAt(M);if(_r.isDigit(_))N=!0;else if(this.getAlphanumericCode(_.charCodeAt(0))!==-1)C=!0;else return ga.BYTE}return C?ga.ALPHANUMERIC:N?ga.NUMERIC:ga.BYTE}static isOnlyDoubleByteKanji(m){let y;try{y=U.encode(m,G.SJIS)}catch{return!1}const N=y.length;if(N%2!==0)return!1;for(let C=0;C<N;C+=2){const M=y[C]&255;if((M<129||M>159)&&(M<224||M>235))return!1}return!0}static chooseMaskPattern(m,y,N,C){let M=Number.MAX_SAFE_INTEGER,L=-1;for(let _=0;_<El.NUM_MASK_PATTERNS;_++){ba.buildMatrix(m,y,N,_,C);let A=this.calculateMaskPenalty(C);A<M&&(M=A,L=_)}return L}static chooseVersion(m,y){for(let N=1;N<=40;N++){const C=ia.getVersionForNumber(N);if(_r.willFit(m,C,y))return C}throw new Cr("Data too big")}static willFit(m,y,N){const C=y.getTotalCodewords(),L=y.getECBlocksForLevel(N).getTotalECCodewords(),_=C-L,A=(m+7)/8;return _>=A}static terminateBits(m,y){const N=m*8;if(y.getSize()>N)throw new Cr("data bits cannot fit in the QR Code"+y.getSize()+" > "+N);for(let L=0;L<4&&y.getSize()<N;++L)y.appendBit(!1);const C=y.getSize()&7;if(C>0)for(let L=C;L<8;L++)y.appendBit(!1);const M=m-y.getSizeInBytes();for(let L=0;L<M;++L)y.appendBits((L&1)===0?236:17,8);if(y.getSize()!==N)throw new Cr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(m,y,N,C,M,L){if(C>=N)throw new Cr("Block ID too large");const _=m%N,A=N-_,O=Math.floor(m/N),z=O+1,Y=Math.floor(y/N),ee=Y+1,ie=O-Y,oe=z-ee;if(ie!==oe)throw new Cr("EC bytes mismatch");if(N!==A+_)throw new Cr("RS blocks mismatch");if(m!==(Y+ie)*A+(ee+oe)*_)throw new Cr("Total bytes mismatch");C<A?(M[0]=Y,L[0]=ie):(M[0]=ee,L[0]=oe)}static interleaveWithECBytes(m,y,N,C){if(m.getSizeInBytes()!==N)throw new Cr("Number of bits and data bytes does not match");let M=0,L=0,_=0;const A=new Array;for(let z=0;z<C;++z){const Y=new Int32Array(1),ee=new Int32Array(1);_r.getNumDataBytesAndNumECBytesForBlockID(y,N,C,z,Y,ee);const ie=Y[0],oe=new Uint8Array(ie);m.toBytes(8*M,oe,0,ie);const fe=_r.generateECBytes(oe,ee[0]);A.push(new Fh(oe,fe)),L=Math.max(L,ie),_=Math.max(_,fe.length),M+=Y[0]}if(N!==M)throw new Cr("Data bytes does not match offset");const O=new E;for(let z=0;z<L;++z)for(const Y of A){const ee=Y.getDataBytes();z<ee.length&&O.appendBits(ee[z],8)}for(let z=0;z<_;++z)for(const Y of A){const ee=Y.getErrorCorrectionBytes();z<ee.length&&O.appendBits(ee[z],8)}if(y!==O.getSizeInBytes())throw new Cr("Interleaving error: "+y+" and "+O.getSizeInBytes()+" differ.");return O}static generateECBytes(m,y){const N=m.length,C=new Int32Array(N+y);for(let L=0;L<N;L++)C[L]=m[L]&255;new rl(Oe.QR_CODE_FIELD_256).encode(C,y);const M=new Uint8Array(y);for(let L=0;L<y;L++)M[L]=C[N+L];return M}static appendModeInfo(m,y){y.appendBits(m.getBits(),4)}static appendLengthInfo(m,y,N,C){const M=N.getCharacterCountBits(y);if(m>=1<<M)throw new Cr(m+" is bigger than "+((1<<M)-1));C.appendBits(m,M)}static appendBytes(m,y,N,C){switch(y){case ga.NUMERIC:_r.appendNumericBytes(m,N);break;case ga.ALPHANUMERIC:_r.appendAlphanumericBytes(m,N);break;case ga.BYTE:_r.append8BitBytes(m,N,C);break;case ga.KANJI:_r.appendKanjiBytes(m,N);break;default:throw new Cr("Invalid mode: "+y)}}static getDigit(m){return m.charCodeAt(0)-48}static isDigit(m){const y=_r.getDigit(m);return y>=0&&y<=9}static appendNumericBytes(m,y){const N=m.length;let C=0;for(;C<N;){const M=_r.getDigit(m.charAt(C));if(C+2<N){const L=_r.getDigit(m.charAt(C+1)),_=_r.getDigit(m.charAt(C+2));y.appendBits(M*100+L*10+_,10),C+=3}else if(C+1<N){const L=_r.getDigit(m.charAt(C+1));y.appendBits(M*10+L,7),C+=2}else y.appendBits(M,4),C++}}static appendAlphanumericBytes(m,y){const N=m.length;let C=0;for(;C<N;){const M=_r.getAlphanumericCode(m.charCodeAt(C));if(M===-1)throw new Cr;if(C+1<N){const L=_r.getAlphanumericCode(m.charCodeAt(C+1));if(L===-1)throw new Cr;y.appendBits(M*45+L,11),C+=2}else y.appendBits(M,6),C++}}static append8BitBytes(m,y,N){let C;try{C=U.encode(m,N)}catch(M){throw new Cr(M)}for(let M=0,L=C.length;M!==L;M++){const _=C[M];y.appendBits(_,8)}}static appendKanjiBytes(m,y){let N;try{N=U.encode(m,G.SJIS)}catch(M){throw new Cr(M)}const C=N.length;for(let M=0;M<C;M+=2){const L=N[M]&255,_=N[M+1]&255,A=L<<8&4294967295|_;let O=-1;if(A>=33088&&A<=40956?O=A-33088:A>=57408&&A<=60351&&(O=A-49472),O===-1)throw new Cr("Invalid byte sequence");const z=(O>>8)*192+(O&255);y.appendBits(z,13)}}static appendECI(m,y){y.appendBits(ga.ECI.getBits(),4),y.appendBits(m.getValue(),8)}}_r.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),_r.DEFAULT_BYTE_MODE_ENCODING=G.UTF8.getName();class nl{write(m,y,N,C=null){if(m.length===0)throw new h("Found empty contents");if(y<0||N<0)throw new h("Requested dimensions are too small: "+y+"x"+N);let M=Va.L,L=nl.QUIET_ZONE_SIZE;C!==null&&(C.get(nn.ERROR_CORRECTION)!==void 0&&(M=Va.fromString(C.get(nn.ERROR_CORRECTION).toString())),C.get(nn.MARGIN)!==void 0&&(L=Number.parseInt(C.get(nn.MARGIN).toString(),10)));const _=_r.encode(m,M,C);return this.renderResult(_,y,N,L)}writeToDom(m,y,N,C,M=null){typeof m=="string"&&(m=document.querySelector(m));const L=this.write(y,N,C,M);m&&m.appendChild(L)}renderResult(m,y,N,C){const M=m.getMatrix();if(M===null)throw new Ge;const L=M.getWidth(),_=M.getHeight(),A=L+C*2,O=_+C*2,z=Math.max(y,A),Y=Math.max(N,O),ee=Math.min(Math.floor(z/A),Math.floor(Y/O)),ie=Math.floor((z-L*ee)/2),oe=Math.floor((Y-_*ee)/2),fe=this.createSVGElement(z,Y);for(let ge=0,me=oe;ge<_;ge++,me+=ee)for(let ve=0,we=ie;ve<L;ve++,we+=ee)if(M.get(ve,ge)===1){const be=this.createSvgRectElement(we,me,ee,ee);fe.appendChild(be)}return fe}createSVGElement(m,y){const N=document.createElementNS(nl.SVG_NS,"svg");return N.setAttributeNS(null,"height",m.toString()),N.setAttributeNS(null,"width",y.toString()),N}createSvgRectElement(m,y,N,C){const M=document.createElementNS(nl.SVG_NS,"rect");return M.setAttributeNS(null,"x",m.toString()),M.setAttributeNS(null,"y",y.toString()),M.setAttributeNS(null,"height",N.toString()),M.setAttributeNS(null,"width",C.toString()),M.setAttributeNS(null,"fill","#000000"),M}}nl.QUIET_ZONE_SIZE=4,nl.SVG_NS="http://www.w3.org/2000/svg";class Dl{encode(m,y,N,C,M){if(m.length===0)throw new h("Found empty contents");if(y!==pe.QR_CODE)throw new h("Can only encode QR_CODE, but got "+y);if(N<0||C<0)throw new h(`Requested dimensions are too small: ${N}x${C}`);let L=Va.L,_=Dl.QUIET_ZONE_SIZE;M!==null&&(M.get(nn.ERROR_CORRECTION)!==void 0&&(L=Va.fromString(M.get(nn.ERROR_CORRECTION).toString())),M.get(nn.MARGIN)!==void 0&&(_=Number.parseInt(M.get(nn.MARGIN).toString(),10)));const A=_r.encode(m,L,M);return Dl.renderResult(A,N,C,_)}static renderResult(m,y,N,C){const M=m.getMatrix();if(M===null)throw new Ge;const L=M.getWidth(),_=M.getHeight(),A=L+C*2,O=_+C*2,z=Math.max(y,A),Y=Math.max(N,O),ee=Math.min(Math.floor(z/A),Math.floor(Y/O)),ie=Math.floor((z-L*ee)/2),oe=Math.floor((Y-_*ee)/2),fe=new J(z,Y);for(let ge=0,me=oe;ge<_;ge++,me+=ee)for(let ve=0,we=ie;ve<L;ve++,we+=ee)M.get(ve,ge)===1&&fe.setRegion(we,me,ee,ee);return fe}}Dl.QUIET_ZONE_SIZE=4;class Jd{encode(m,y,N,C,M){let L;if(y===pe.QR_CODE)L=new Dl;else throw new h("No encoder available for format "+y);return L.encode(m,y,N,C,M)}}class Qi extends Q{constructor(m,y,N,C,M,L,_,A){if(super(L,_),this.yuvData=m,this.dataWidth=y,this.dataHeight=N,this.left=C,this.top=M,C+L>y||M+_>N)throw new h("Crop rectangle does not fit within image data.");A&&this.reverseHorizontal(L,_)}getRow(m,y){if(m<0||m>=this.getHeight())throw new h("Requested row is outside the image: "+m);const N=this.getWidth();(y==null||y.length<N)&&(y=new Uint8ClampedArray(N));const C=(m+this.top)*this.dataWidth+this.left;return b.arraycopy(this.yuvData,C,y,0,N),y}getMatrix(){const m=this.getWidth(),y=this.getHeight();if(m===this.dataWidth&&y===this.dataHeight)return this.yuvData;const N=m*y,C=new Uint8ClampedArray(N);let M=this.top*this.dataWidth+this.left;if(m===this.dataWidth)return b.arraycopy(this.yuvData,M,C,0,N),C;for(let L=0;L<y;L++){const _=L*m;b.arraycopy(this.yuvData,M,C,_,m),M+=this.dataWidth}return C}isCropSupported(){return!0}crop(m,y,N,C){return new Qi(this.yuvData,this.dataWidth,this.dataHeight,this.left+m,this.top+y,N,C,!1)}renderThumbnail(){const m=this.getWidth()/Qi.THUMBNAIL_SCALE_FACTOR,y=this.getHeight()/Qi.THUMBNAIL_SCALE_FACTOR,N=new Int32Array(m*y),C=this.yuvData;let M=this.top*this.dataWidth+this.left;for(let L=0;L<y;L++){const _=L*m;for(let A=0;A<m;A++){const O=C[M+A*Qi.THUMBNAIL_SCALE_FACTOR]&255;N[_+A]=4278190080|O*65793}M+=this.dataWidth*Qi.THUMBNAIL_SCALE_FACTOR}return N}getThumbnailWidth(){return this.getWidth()/Qi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Qi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(m,y){const N=this.yuvData;for(let C=0,M=this.top*this.dataWidth+this.left;C<y;C++,M+=this.dataWidth){const L=M+m/2;for(let _=M,A=M+m-1;_<L;_++,A--){const O=N[_];N[_]=N[A],N[A]=O}}}invert(){return new ne(this)}}Qi.THUMBNAIL_SCALE_FACTOR=2;class eu extends Q{constructor(m,y,N,C,M,L,_){if(super(y,N),this.dataWidth=C,this.dataHeight=M,this.left=L,this.top=_,m.BYTES_PER_ELEMENT===4){const A=y*N,O=new Uint8ClampedArray(A);for(let z=0;z<A;z++){const Y=m[z],ee=Y>>16&255,ie=Y>>7&510,oe=Y&255;O[z]=(ee+ie+oe)/4&255}this.luminances=O}else this.luminances=m;if(C===void 0&&(this.dataWidth=y),M===void 0&&(this.dataHeight=N),L===void 0&&(this.left=0),_===void 0&&(this.top=0),this.left+y>this.dataWidth||this.top+N>this.dataHeight)throw new h("Crop rectangle does not fit within image data.")}getRow(m,y){if(m<0||m>=this.getHeight())throw new h("Requested row is outside the image: "+m);const N=this.getWidth();(y==null||y.length<N)&&(y=new Uint8ClampedArray(N));const C=(m+this.top)*this.dataWidth+this.left;return b.arraycopy(this.luminances,C,y,0,N),y}getMatrix(){const m=this.getWidth(),y=this.getHeight();if(m===this.dataWidth&&y===this.dataHeight)return this.luminances;const N=m*y,C=new Uint8ClampedArray(N);let M=this.top*this.dataWidth+this.left;if(m===this.dataWidth)return b.arraycopy(this.luminances,M,C,0,N),C;for(let L=0;L<y;L++){const _=L*m;b.arraycopy(this.luminances,M,C,_,m),M+=this.dataWidth}return C}isCropSupported(){return!0}crop(m,y,N,C){return new eu(this.luminances,N,C,this.dataWidth,this.dataHeight,this.left+m,this.top+y)}invert(){return new ne(this)}}class U0 extends G{static forName(m){return this.getCharacterSetECIByName(m)}}class po{}po.ISO_8859_1=G.ISO8859_1;class il{isCompact(){return this.compact}setCompact(m){this.compact=m}getSize(){return this.size}setSize(m){this.size=m}getLayers(){return this.layers}setLayers(m){this.layers=m}getCodeWords(){return this.codeWords}setCodeWords(m){this.codeWords=m}getMatrix(){return this.matrix}setMatrix(m){this.matrix=m}}class G0{static singletonList(m){return[m]}static min(m,y){return m.sort(y)[0]}}class tu{constructor(m){this.previous=m}getPrevious(){return this.previous}}class sl extends tu{constructor(m,y,N){super(m),this.value=y,this.bitCount=N}appendTo(m,y){m.appendBits(this.value,this.bitCount)}add(m,y){return new sl(this,m,y)}addBinaryShift(m,y){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new sl(this,m,y)}toString(){let m=this.value&(1<<this.bitCount)-1;return m|=1<<this.bitCount,"<"+T.toBinaryString(m|1<<this.bitCount).substring(1)+">"}}class au extends sl{constructor(m,y,N){super(m,0,0),this.binaryShiftStart=y,this.binaryShiftByteCount=N}appendTo(m,y){for(let N=0;N<this.binaryShiftByteCount;N++)(N===0||N===31&&this.binaryShiftByteCount<=62)&&(m.appendBits(31,5),this.binaryShiftByteCount>62?m.appendBits(this.binaryShiftByteCount-31,16):N===0?m.appendBits(Math.min(this.binaryShiftByteCount,31),5):m.appendBits(this.binaryShiftByteCount-31,5)),m.appendBits(y[this.binaryShiftStart+N],8)}addBinaryShift(m,y){return new au(this,m,y)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Vh(ue,m,y){return new au(ue,m,y)}function Yo(ue,m,y){return new sl(ue,m,y)}const xo=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ll=0,ru=1,Bi=2,Gc=3,Ji=4,$o=new sl(null,0,0),mo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function im(ue){for(let m of ue)k.fill(m,-1);return ue[ll][Ji]=0,ue[ru][Ji]=0,ue[ru][ll]=28,ue[Gc][Ji]=0,ue[Bi][Ji]=0,ue[Bi][ll]=15,ue}const Wc=im(k.createInt32Array(6,6));class Ci{constructor(m,y,N,C){this.token=m,this.mode=y,this.binaryShiftByteCount=N,this.bitCount=C}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(m,y){let N=this.bitCount,C=this.token;if(m!==this.mode){let L=mo[this.mode][m];C=Yo(C,L&65535,L>>16),N+=L>>16}let M=m===Bi?4:5;return C=Yo(C,y,M),new Ci(C,m,0,N+M)}shiftAndAppend(m,y){let N=this.token,C=this.mode===Bi?4:5;return N=Yo(N,Wc[this.mode][m],C),N=Yo(N,y,5),new Ci(N,this.mode,0,this.bitCount+C+5)}addBinaryShiftChar(m){let y=this.token,N=this.mode,C=this.bitCount;if(this.mode===Ji||this.mode===Bi){let _=mo[N][ll];y=Yo(y,_&65535,_>>16),C+=_>>16,N=ll}let M=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,L=new Ci(y,N,this.binaryShiftByteCount+1,C+M);return L.binaryShiftByteCount===2078&&(L=L.endBinaryShift(m+1)),L}endBinaryShift(m){if(this.binaryShiftByteCount===0)return this;let y=this.token;return y=Vh(y,m-this.binaryShiftByteCount,this.binaryShiftByteCount),new Ci(y,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(m){let y=this.bitCount+(mo[this.mode][m.mode]>>16);return this.binaryShiftByteCount<m.binaryShiftByteCount?y+=Ci.calculateBinaryShiftCost(m)-Ci.calculateBinaryShiftCost(this):this.binaryShiftByteCount>m.binaryShiftByteCount&&m.binaryShiftByteCount>0&&(y+=10),y<=m.bitCount}toBitArray(m){let y=[];for(let C=this.endBinaryShift(m.length).token;C!==null;C=C.getPrevious())y.unshift(C);let N=new E;for(const C of y)C.appendTo(N,m);return N}toString(){return te.format("%s bits=%d bytes=%d",xo[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(m){return m.binaryShiftByteCount>62?21:m.binaryShiftByteCount>31?20:m.binaryShiftByteCount>0?10:0}}Ci.INITIAL_STATE=new Ci($o,ll,0,0);function Ps(ue){const m=te.getCharCode(" "),y=te.getCharCode("."),N=te.getCharCode(",");ue[ll][m]=1;const C=te.getCharCode("Z"),M=te.getCharCode("A");for(let ee=M;ee<=C;ee++)ue[ll][ee]=ee-M+2;ue[ru][m]=1;const L=te.getCharCode("z"),_=te.getCharCode("a");for(let ee=_;ee<=L;ee++)ue[ru][ee]=ee-_+2;ue[Bi][m]=1;const A=te.getCharCode("9"),O=te.getCharCode("0");for(let ee=O;ee<=A;ee++)ue[Bi][ee]=ee-O+2;ue[Bi][N]=12,ue[Bi][y]=13;const z=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let ee=0;ee<z.length;ee++)ue[Gc][te.getCharCode(z[ee])]=ee;const Y=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let ee=0;ee<Y.length;ee++)te.getCharCode(Y[ee])>0&&(ue[Ji][te.getCharCode(Y[ee])]=ee);return ue}const Gr=Ps(k.createInt32Array(5,256));class zs{constructor(m){this.text=m}encode(){const m=te.getCharCode(" "),y=te.getCharCode(`
`);let N=G0.singletonList(Ci.INITIAL_STATE);for(let M=0;M<this.text.length;M++){let L,_=M+1<this.text.length?this.text[M+1]:0;switch(this.text[M]){case te.getCharCode("\r"):L=_===y?2:0;break;case te.getCharCode("."):L=_===m?3:0;break;case te.getCharCode(","):L=_===m?4:0;break;case te.getCharCode(":"):L=_===m?5:0;break;default:L=0}L>0?(N=zs.updateStateListForPair(N,M,L),M++):N=this.updateStateListForChar(N,M)}return G0.min(N,(M,L)=>M.getBitCount()-L.getBitCount()).toBitArray(this.text)}updateStateListForChar(m,y){const N=[];for(let C of m)this.updateStateForChar(C,y,N);return zs.simplifyStates(N)}updateStateForChar(m,y,N){let C=this.text[y]&255,M=Gr[m.getMode()][C]>0,L=null;for(let _=0;_<=Ji;_++){let A=Gr[_][C];if(A>0){if(L==null&&(L=m.endBinaryShift(y)),!M||_===m.getMode()||_===Bi){const O=L.latchAndAppend(_,A);N.push(O)}if(!M&&Wc[m.getMode()][_]>=0){const O=L.shiftAndAppend(_,A);N.push(O)}}}if(m.getBinaryShiftByteCount()>0||Gr[m.getMode()][C]===0){let _=m.addBinaryShiftChar(y);N.push(_)}}static updateStateListForPair(m,y,N){const C=[];for(let M of m)this.updateStateForPair(M,y,N,C);return this.simplifyStates(C)}static updateStateForPair(m,y,N,C){let M=m.endBinaryShift(y);if(C.push(M.latchAndAppend(Ji,N)),m.getMode()!==Ji&&C.push(M.shiftAndAppend(Ji,N)),N===3||N===4){let L=M.latchAndAppend(Bi,16-N).latchAndAppend(Bi,1);C.push(L)}if(m.getBinaryShiftByteCount()>0){let L=m.addBinaryShiftChar(y).addBinaryShiftChar(y+1);C.push(L)}}static simplifyStates(m){let y=[];for(const N of m){let C=!0;for(const M of y){if(M.isBetterThanOrEqualTo(N)){C=!1;break}N.isBetterThanOrEqualTo(M)&&(y=y.filter(L=>L!==M))}C&&y.push(N)}return y}}class Za{constructor(){}static encodeBytes(m){return Za.encode(m,Za.DEFAULT_EC_PERCENT,Za.DEFAULT_AZTEC_LAYERS)}static encode(m,y,N){let C=new zs(m).encode(),M=T.truncDivision(C.getSize()*y,100)+11,L=C.getSize()+M,_,A,O,z,Y;if(N!==Za.DEFAULT_AZTEC_LAYERS){if(_=N<0,A=Math.abs(N),A>(_?Za.MAX_NB_BITS_COMPACT:Za.MAX_NB_BITS))throw new h(te.format("Illegal value %s for layers",N));O=Za.totalBitsInLayer(A,_),z=Za.WORD_SIZE[A];let be=O-O%z;if(Y=Za.stuffBits(C,z),Y.getSize()+M>be)throw new h("Data to large for user specified layer");if(_&&Y.getSize()>z*64)throw new h("Data to large for user specified layer")}else{z=0,Y=null;for(let be=0;;be++){if(be>Za.MAX_NB_BITS)throw new h("Data too large for an Aztec code");if(_=be<=3,A=_?be+1:be,O=Za.totalBitsInLayer(A,_),L>O)continue;(Y==null||z!==Za.WORD_SIZE[A])&&(z=Za.WORD_SIZE[A],Y=Za.stuffBits(C,z));let Ae=O-O%z;if(!(_&&Y.getSize()>z*64)&&Y.getSize()+M<=Ae)break}}let ee=Za.generateCheckWords(Y,O,z),ie=Y.getSize()/z,oe=Za.generateModeMessage(_,A,ie),fe=(_?11:14)+A*4,ge=new Int32Array(fe),me;if(_){me=fe;for(let be=0;be<ge.length;be++)ge[be]=be}else{me=fe+1+2*T.truncDivision(T.truncDivision(fe,2)-1,15);let be=T.truncDivision(fe,2),Ae=T.truncDivision(me,2);for(let Ce=0;Ce<be;Ce++){let Ue=Ce+T.truncDivision(Ce,15);ge[be-Ce-1]=Ae-Ue-1,ge[be+Ce]=Ae+Ue+1}}let ve=new J(me);for(let be=0,Ae=0;be<A;be++){let Ce=(A-be)*4+(_?9:12);for(let Ue=0;Ue<Ce;Ue++){let Xe=Ue*2;for(let Ve=0;Ve<2;Ve++)ee.get(Ae+Xe+Ve)&&ve.set(ge[be*2+Ve],ge[be*2+Ue]),ee.get(Ae+Ce*2+Xe+Ve)&&ve.set(ge[be*2+Ue],ge[fe-1-be*2-Ve]),ee.get(Ae+Ce*4+Xe+Ve)&&ve.set(ge[fe-1-be*2-Ve],ge[fe-1-be*2-Ue]),ee.get(Ae+Ce*6+Xe+Ve)&&ve.set(ge[fe-1-be*2-Ue],ge[be*2+Ve])}Ae+=Ce*8}if(Za.drawModeMessage(ve,_,me,oe),_)Za.drawBullsEye(ve,T.truncDivision(me,2),5);else{Za.drawBullsEye(ve,T.truncDivision(me,2),7);for(let be=0,Ae=0;be<T.truncDivision(fe,2)-1;be+=15,Ae+=16)for(let Ce=T.truncDivision(me,2)&1;Ce<me;Ce+=2)ve.set(T.truncDivision(me,2)-Ae,Ce),ve.set(T.truncDivision(me,2)+Ae,Ce),ve.set(Ce,T.truncDivision(me,2)-Ae),ve.set(Ce,T.truncDivision(me,2)+Ae)}let we=new il;return we.setCompact(_),we.setSize(me),we.setLayers(A),we.setCodeWords(ie),we.setMatrix(ve),we}static drawBullsEye(m,y,N){for(let C=0;C<N;C+=2)for(let M=y-C;M<=y+C;M++)m.set(M,y-C),m.set(M,y+C),m.set(y-C,M),m.set(y+C,M);m.set(y-N,y-N),m.set(y-N+1,y-N),m.set(y-N,y-N+1),m.set(y+N,y-N),m.set(y+N,y-N+1),m.set(y+N,y+N-1)}static generateModeMessage(m,y,N){let C=new E;return m?(C.appendBits(y-1,2),C.appendBits(N-1,6),C=Za.generateCheckWords(C,28,4)):(C.appendBits(y-1,5),C.appendBits(N-1,11),C=Za.generateCheckWords(C,40,4)),C}static drawModeMessage(m,y,N,C){let M=T.truncDivision(N,2);if(y)for(let L=0;L<7;L++){let _=M-3+L;C.get(L)&&m.set(_,M-5),C.get(L+7)&&m.set(M+5,_),C.get(20-L)&&m.set(_,M+5),C.get(27-L)&&m.set(M-5,_)}else for(let L=0;L<10;L++){let _=M-5+L+T.truncDivision(L,5);C.get(L)&&m.set(_,M-7),C.get(L+10)&&m.set(M+7,_),C.get(29-L)&&m.set(_,M+7),C.get(39-L)&&m.set(M-7,_)}}static generateCheckWords(m,y,N){let C=m.getSize()/N,M=new rl(Za.getGF(N)),L=T.truncDivision(y,N),_=Za.bitsToWords(m,N,L);M.encode(_,L-C);let A=y%N,O=new E;O.appendBits(0,A);for(const z of Array.from(_))O.appendBits(z,N);return O}static bitsToWords(m,y,N){let C=new Int32Array(N),M,L;for(M=0,L=m.getSize()/y;M<L;M++){let _=0;for(let A=0;A<y;A++)_|=m.get(M*y+A)?1<<y-A-1:0;C[M]=_}return C}static getGF(m){switch(m){case 4:return Oe.AZTEC_PARAM;case 6:return Oe.AZTEC_DATA_6;case 8:return Oe.AZTEC_DATA_8;case 10:return Oe.AZTEC_DATA_10;case 12:return Oe.AZTEC_DATA_12;default:throw new h("Unsupported word size "+m)}}static stuffBits(m,y){let N=new E,C=m.getSize(),M=(1<<y)-2;for(let L=0;L<C;L+=y){let _=0;for(let A=0;A<y;A++)(L+A>=C||m.get(L+A))&&(_|=1<<y-1-A);(_&M)===M?(N.appendBits(_&M,y),L--):(_&M)===0?(N.appendBits(_|1,y),L--):N.appendBits(_,y)}return N}static totalBitsInLayer(m,y){return((y?88:112)+16*m)*m}}Za.DEFAULT_EC_PERCENT=33,Za.DEFAULT_AZTEC_LAYERS=0,Za.MAX_NB_BITS=32,Za.MAX_NB_BITS_COMPACT=4,Za.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Yc{encode(m,y,N,C){return this.encodeWithHints(m,y,N,C,null)}encodeWithHints(m,y,N,C,M){let L=po.ISO_8859_1,_=Za.DEFAULT_EC_PERCENT,A=Za.DEFAULT_AZTEC_LAYERS;return M!=null&&(M.has(nn.CHARACTER_SET)&&(L=U0.forName(M.get(nn.CHARACTER_SET).toString())),M.has(nn.ERROR_CORRECTION)&&(_=T.parseInt(M.get(nn.ERROR_CORRECTION).toString())),M.has(nn.AZTEC_LAYERS)&&(A=T.parseInt(M.get(nn.AZTEC_LAYERS).toString()))),Yc.encodeLayers(m,y,N,C,L,_,A)}static encodeLayers(m,y,N,C,M,L,_){if(y!==pe.AZTEC)throw new h("Can only encode AZTEC, but got "+y);let A=Za.encode(te.getBytes(m,M),L,_);return Yc.renderResult(A,N,C)}static renderResult(m,y,N){let C=m.getMatrix();if(C==null)throw new Ge;let M=C.getWidth(),L=C.getHeight(),_=Math.max(y,M),A=Math.max(N,L),O=Math.min(_/M,A/L),z=(_-M*O)/2,Y=(A-L*O)/2,ee=new J(_,A);for(let ie=0,oe=Y;ie<L;ie++,oe+=O)for(let fe=0,ge=z;fe<M;fe++,ge+=O)C.get(fe,ie)&&ee.setRegion(ge,oe,O,O);return ee}}t.AbstractExpandedDecoder=It,t.ArgumentException=u,t.ArithmeticException=_e,t.AztecCode=il,t.AztecCodeReader=je,t.AztecCodeWriter=Yc,t.AztecDecoder=dt,t.AztecDetector=zt,t.AztecDetectorResult=xt,t.AztecEncoder=Za,t.AztecHighLevelEncoder=zs,t.AztecPoint=Sa,t.BarcodeFormat=pe,t.Binarizer=g,t.BinaryBitmap=f,t.BitArray=E,t.BitMatrix=J,t.BitSource=gn,t.BrowserAztecCodeReader=He,t.BrowserBarcodeReader=mi,t.BrowserCodeReader=ce,t.BrowserDatamatrixCodeReader=kr,t.BrowserMultiFormatReader=Qd,t.BrowserPDF417Reader=zh,t.BrowserQRCodeReader=Bh,t.BrowserQRCodeSvgWriter=nl,t.CharacterSetECI=G,t.ChecksumException=p,t.Code128Reader=Ye,t.Code39Reader=Ot,t.DataMatrixDecodedBitStreamParser=An,t.DataMatrixReader=Ds,t.DecodeHintType=R,t.DecoderResult=ke,t.DefaultGridSampler=La,t.DetectorResult=na,t.EAN13Reader=xi,t.EncodeHintType=nn,t.Exception=d,t.FormatException=P,t.GenericGF=Oe,t.GenericGFPoly=Ne,t.GlobalHistogramBinarizer=W,t.GridSampler=_a,t.GridSamplerInstance=oa,t.HTMLCanvasElementLuminanceSource=re,t.HybridBinarizer=$,t.ITFReader=st,t.IllegalArgumentException=h,t.IllegalStateException=Ge,t.InvertedLuminanceSource=ne,t.LuminanceSource=Q,t.MathUtils=wt,t.MultiFormatOneDReader=jn,t.MultiFormatReader=Kd,t.MultiFormatWriter=Jd,t.NotFoundException=B,t.OneDReader=it,t.PDF417DecodedBitStreamParser=nt,t.PDF417DecoderErrorCorrection=gs,t.PDF417Reader=Hn,t.PDF417ResultMetadata=tl,t.PerspectiveTransform=Nt,t.PlanarYUVLuminanceSource=Qi,t.QRCodeByteMatrix=fo,t.QRCodeDataMask=ri,t.QRCodeDecodedBitStreamParser=Ur,t.QRCodeDecoderErrorCorrectionLevel=Va,t.QRCodeDecoderFormatInformation=rn,t.QRCodeEncoder=_r,t.QRCodeEncoderQRCode=El,t.QRCodeMaskUtil=sn,t.QRCodeMatrixUtil=ba,t.QRCodeMode=ga,t.QRCodeReader=Tn,t.QRCodeVersion=ia,t.QRCodeWriter=Dl,t.RGBLuminanceSource=eu,t.RSS14Reader=lr,t.RSSExpandedReader=pt,t.ReaderException=al,t.ReedSolomonDecoder=Ee,t.ReedSolomonEncoder=rl,t.ReedSolomonException=De,t.Result=de,t.ResultMetadataType=Te,t.ResultPoint=$e,t.StringUtils=te,t.UnsupportedOperationException=X,t.VideoInputDevice=K,t.WhiteRectangleDetector=Bt,t.WriterException=Cr,t.ZXingArrays=k,t.ZXingCharset=U0,t.ZXingInteger=T,t.ZXingStandardCharsets=po,t.ZXingStringBuilder=Z,t.ZXingStringEncoding=U,t.ZXingSystem=b,t.createAbstractExpandedDecoder=Hr,Object.defineProperty(t,"__esModule",{value:!0})}))})(Og,Og.exports)),Og.exports}var Sn=Ade();const Tde=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var kL=(function(){function a(e,t,r){if(this.formatMap=new Map([[sa.QR_CODE,Sn.BarcodeFormat.QR_CODE],[sa.AZTEC,Sn.BarcodeFormat.AZTEC],[sa.CODABAR,Sn.BarcodeFormat.CODABAR],[sa.CODE_39,Sn.BarcodeFormat.CODE_39],[sa.CODE_93,Sn.BarcodeFormat.CODE_93],[sa.CODE_128,Sn.BarcodeFormat.CODE_128],[sa.DATA_MATRIX,Sn.BarcodeFormat.DATA_MATRIX],[sa.MAXICODE,Sn.BarcodeFormat.MAXICODE],[sa.ITF,Sn.BarcodeFormat.ITF],[sa.EAN_13,Sn.BarcodeFormat.EAN_13],[sa.EAN_8,Sn.BarcodeFormat.EAN_8],[sa.PDF_417,Sn.BarcodeFormat.PDF_417],[sa.RSS_14,Sn.BarcodeFormat.RSS_14],[sa.RSS_EXPANDED,Sn.BarcodeFormat.RSS_EXPANDED],[sa.UPC_A,Sn.BarcodeFormat.UPC_A],[sa.UPC_E,Sn.BarcodeFormat.UPC_E],[sa.UPC_EAN_EXTENSION,Sn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Tde)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=r;var n=this.createZXingFormats(e),i=new Map;i.set(Sn.DecodeHintType.POSSIBLE_FORMATS,n),i.set(Sn.DecodeHintType.TRY_HARDER,!1),this.hints=i}return a.prototype.decodeAsync=function(e){var t=this;return new Promise(function(r,n){try{r(t.decode(e))}catch(i){n(i)}})},a.prototype.decode=function(e){var t=new Sn.MultiFormatReader(this.verbose,this.hints),r=new Sn.HTMLCanvasElementLuminanceSource(e),n=new Sn.BinaryBitmap(new Sn.HybridBinarizer(r)),i=t.decode(n);return{text:i.text,format:QU.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,n){e.set(t,r)}),e},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createZXingFormats=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var i=n[r];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return t},a.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},a})(),Mde=function(a,e,t,r){function n(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function o(u){try{d(r.next(u))}catch(h){l(h)}}function c(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):n(u.value).then(o,c)}d((r=r.apply(a,e||[])).next())})},Ede=function(a,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,l;return l={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(u){return c([d,u])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(t=0)),t;)try{if(r=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,n=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){t.label=d[1];break}if(d[0]===6&&t.label<i[1]){t.label=i[1],i=d;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(d);break}i[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(a,t)}catch(u){d=[6,u],n=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},CL=(function(){function a(e,t,r){if(this.formatMap=new Map([[sa.QR_CODE,"qr_code"],[sa.AZTEC,"aztec"],[sa.CODABAR,"codabar"],[sa.CODE_39,"code_39"],[sa.CODE_93,"code_93"],[sa.CODE_128,"code_128"],[sa.DATA_MATRIX,"data_matrix"],[sa.ITF,"itf"],[sa.EAN_13,"ean_13"],[sa.EAN_8,"ean_8"],[sa.PDF_417,"pdf417"],[sa.UPC_A,"upc_a"],[sa.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!a.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=r;var n=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(n),!this.detector)throw"BarcodeDetector detector not supported"}return a.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},a.prototype.decodeAsync=function(e){return Mde(this,void 0,void 0,function(){var t,r;return Ede(this,function(n){switch(n.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=n.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(t),[2,{text:r.rawValue,format:QU.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},a.prototype.selectLargestBarcode=function(e){for(var t=null,r=0,n=0,i=e;n<i.length;n++){var l=i[n],o=l.boundingBox.width*l.boundingBox.height;o>r&&(r=o,t=l)}if(!t)throw"No largest barcode found";return t},a.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var i=n[r];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,n){e.set(t,r)}),e},a.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},a})(),AL=function(a,e,t,r){function n(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function o(u){try{d(r.next(u))}catch(h){l(h)}}function c(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):n(u.value).then(o,c)}d((r=r.apply(a,e||[])).next())})},TL=function(a,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,l;return l={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(u){return c([d,u])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(t=0)),t;)try{if(r=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,n=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){t.label=d[1];break}if(d[0]===6&&t.label<i[1]){t.label=i[1],i=d;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(d);break}i[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(a,t)}catch(u){d=[6,u],n=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Dde=(function(){function a(e,t,r,n){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,t&&CL.isSupported()?(this.primaryDecoder=new CL(e,r,n),this.secondaryDecoder=new kL(e,r,n)):this.primaryDecoder=new kL(e,r,n)}return a.prototype.decodeAsync=function(e){return AL(this,void 0,void 0,function(){var t;return TL(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},a.prototype.decodeRobustlyAsync=function(e){return AL(this,void 0,void 0,function(){var t,r;return TL(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,n.sent()];case 3:if(r=n.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},a.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},a.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},a.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,r=this.executionResults;t<r.length;t++){var n=r[t];e+=n}var i=e/this.executionResults.length;console.log("".concat(i," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},a})(),mT=(function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},a(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),b2=function(a,e,t,r){function n(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function o(u){try{d(r.next(u))}catch(h){l(h)}}function c(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):n(u.value).then(o,c)}d((r=r.apply(a,e||[])).next())})},y2=function(a,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,l;return l={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(u){return c([d,u])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(t=0)),t;)try{if(r=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,n=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){t.label=d[1];break}if(d[0]===6&&t.label<i[1]){t.label=i[1],i=d;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(d);break}i[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(a,t)}catch(u){d=[6,u],n=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},eG=(function(){function a(e,t){this.name=e,this.track=t}return a.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},a.prototype.apply=function(e){var t={};t[this.name]=e;var r={advanced:[t]};return this.track.applyConstraints(r)},a.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},a})(),Ide=(function(a){mT(e,a);function e(t,r){return a.call(this,t,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var r={};r[this.name]=t;var n={advanced:[r]};return this.track.applyConstraints(n)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),r=t[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(eG),Rde=(function(a){mT(e,a);function e(t){return a.call(this,"zoom",t)||this}return e})(Ide),Lde=(function(a){mT(e,a);function e(t){return a.call(this,"torch",t)||this}return e})(eG),Ode=(function(){function a(e){this.track=e}return a.prototype.zoomFeature=function(){return new Rde(this.track)},a.prototype.torchFeature=function(){return new Lde(this.track)},a})(),Pde=(function(){function a(e,t,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return a.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},a.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var r=e.surface.clientWidth,n=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,n),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},a.create=function(e,t,r,n){return b2(this,void 0,void 0,function(){var i,l;return y2(this,function(o){switch(o.label){case 0:return i=new a(e,t,n),r.aspectRatio?(l={aspectRatio:r.aspectRatio},[4,i.getFirstTrackOrFail().applyConstraints(l)]):[3,2];case 1:o.sent(),o.label=2;case 2:return i.setupSurface(),[2,i]}})})},a.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},a.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},a.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},a.prototype.resume=function(e){this.failIfClosed();var t=this,r=function(){setTimeout(e,200),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},a.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},a.prototype.getSurface=function(){return this.failIfClosed(),this.surface},a.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},a.prototype.applyVideoConstraints=function(e){return b2(this,void 0,void 0,function(){return y2(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},a.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,r){var n=e.mediaStream.getVideoTracks(),i=n.length,l=0;e.mediaStream.getVideoTracks().forEach(function(o){e.mediaStream.removeTrack(o),o.stop(),++l,l>=i&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},a.prototype.getCapabilities=function(){return new Ode(this.getFirstTrackOrFail())},a})(),zde=(function(){function a(e){this.mediaStream=e}return a.prototype.render=function(e,t,r){return b2(this,void 0,void 0,function(){return y2(this,function(n){return[2,Pde.create(e,this.mediaStream,t,r)]})})},a.create=function(e){return b2(this,void 0,void 0,function(){var t,r;return y2(this,function(n){switch(n.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=n.sent(),[2,new a(r)]}})})},a})(),ML=function(a,e,t,r){function n(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function o(u){try{d(r.next(u))}catch(h){l(h)}}function c(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):n(u.value).then(o,c)}d((r=r.apply(a,e||[])).next())})},EL=function(a,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,l;return l={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(u){return c([d,u])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(t=0)),t;)try{if(r=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,n=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){t.label=d[1];break}if(d[0]===6&&t.label<i[1]){t.label=i[1],i=d;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(d);break}i[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(a,t)}catch(u){d=[6,u],n=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Bde=(function(){function a(){}return a.failIfNotSupported=function(){return ML(this,void 0,void 0,function(){return EL(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new a]})})},a.prototype.create=function(e){return ML(this,void 0,void 0,function(){return EL(this,function(t){return[2,zde.create(e)]})})},a})(),Fde=function(a,e,t,r){function n(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function o(u){try{d(r.next(u))}catch(h){l(h)}}function c(u){try{d(r.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):n(u.value).then(o,c)}d((r=r.apply(a,e||[])).next())})},Vde=function(a,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,l;return l={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(u){return c([d,u])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(t=0)),t;)try{if(r=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,n=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){t.label=d[1];break}if(d[0]===6&&t.label<i[1]){t.label=i[1],i=d;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(d);break}i[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(a,t)}catch(u){d=[6,u],n=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Hde=(function(){function a(){}return a.retrieve=function(){if(navigator.mediaDevices)return a.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?a.getCamerasFromMediaStreamTrack():a.rejectWithError()},a.rejectWithError=function(){var e=Kp.unableToQuerySupportedDevices();return a.isHttpsOrLocalhost()||(e=Kp.insecureContextCameraQueryError()),Promise.reject(e)},a.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},a.getCamerasFromMediaDevices=function(){return Fde(this,void 0,void 0,function(){var e,t,r,n,i,l,o;return Vde(this,function(c){switch(c.label){case 0:return e=function(d){for(var u=d.getVideoTracks(),h=0,f=u;h<f.length;h++){var p=f[h];p.enabled=!1,p.stop(),d.removeTrack(p)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=c.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=c.sent(),n=[],i=0,l=r;i<l.length;i++)o=l[i],o.kind==="videoinput"&&n.push({id:o.deviceId,label:o.label});return e(t),[2,n]}})})},a.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var r=function(i){for(var l=[],o=0,c=i;o<c.length;o++){var d=c[o];d.kind==="video"&&l.push({id:d.id,label:d.label})}e(l)},n=MediaStreamTrack;n.getSources(r)})},a})(),Ln;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.NOT_STARTED=1]="NOT_STARTED",a[a.SCANNING=2]="SCANNING",a[a.PAUSED=3]="PAUSED"})(Ln||(Ln={}));var Ude=(function(){function a(){this.state=Ln.NOT_STARTED,this.onGoingTransactionNewState=Ln.UNKNOWN}return a.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},a.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},a.prototype.execute=function(){if(this.onGoingTransactionNewState===Ln.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ln.UNKNOWN,this.directTransition(e)},a.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ln.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ln.UNKNOWN},a.prototype.getState=function(){return this.state},a.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ln.UNKNOWN)throw"Cannot transition to a new state, already under transition"},a.prototype.validateTransition=function(e){switch(this.state){case Ln.UNKNOWN:throw"Transition from unknown is not allowed";case Ln.NOT_STARTED:this.failIfNewStateIs(e,[Ln.PAUSED]);break;case Ln.SCANNING:break;case Ln.PAUSED:break}},a.prototype.failIfNewStateIs=function(e,t){for(var r=0,n=t;r<n.length;r++){var i=n[r];if(e===i)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},a})(),Gde=(function(){function a(e){this.stateManager=e}return a.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},a.prototype.directTransition=function(e){this.stateManager.directTransition(e)},a.prototype.getState=function(){return this.stateManager.getState()},a.prototype.canScanFile=function(){return this.stateManager.getState()===Ln.NOT_STARTED},a.prototype.isScanning=function(){return this.stateManager.getState()!==Ln.NOT_STARTED},a.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ln.SCANNING},a.prototype.isPaused=function(){return this.stateManager.getState()===Ln.PAUSED},a})(),Wde=(function(){function a(){}return a.create=function(){return new Gde(new Ude)},a})(),Yde=(function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},a(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xl=(function(a){Yde(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(jde),$de=(function(){function a(e,t){this.logger=t,this.fps=xl.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=xl.DEFAULT_DISABLE_FLIP}return a.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?JU.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},a.prototype.isShadedBoxEnabled=function(){return!vd(this.qrbox)},a.create=function(e,t){return new a(e,t)},a})(),bh=(function(){function a(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof t=="boolean"?this.verbose=t===!0:t&&(r=t,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new kde(this.verbose),this.qrcode=new Dde(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Wde.create()}return a.prototype.start=function(e,t,r,n){var i=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var l;n?l=n:l=this.verbose?this.logger.log:function(){};var o=$de.create(t,this.logger);this.clearElement();var c=!1;o.videoConstraints&&(o.isMediaStreamConstraintsValid()?c=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var d=c,u=document.getElementById(this.elementId);u.clientWidth?u.clientWidth:xl.DEFAULT_WIDTH,u.style.position="relative",this.shouldScan=!0,this.element=u;var h=this,f=this.stateManagerProxy.startTransition(Ln.SCANNING);return new Promise(function(p,g){var b=d?o.videoConstraints:h.createVideoConstraints(e);if(!b){f.cancel(),g("videoConstraints should be defined");return}var w={};(!d||o.aspectRatio)&&(w.aspectRatio=o.aspectRatio);var j={onRenderSurfaceReady:function(k,T){h.setupUi(k,T,o),h.isScanning=!0,h.foreverScan(o,r,l)}};Bde.failIfNotSupported().then(function(k){k.create(b).then(function(T){return T.render(i.element,w,j).then(function(E){h.renderedCamera=E,f.execute(),p(null)}).catch(function(E){f.cancel(),g(E)})}).catch(function(T){f.cancel(),g(Kp.errorGettingUserMedia(T))})}).catch(function(k){f.cancel(),g(Kp.cameraStreamingNotSupported())})})},a.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ln.PAUSED),this.showPausedState(),(vd(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},a.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(Ln.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},a.prototype.getState=function(){return this.stateManagerProxy.getState()},a.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Ln.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var i=document.getElementById(xl.SHADED_REGION_ELEMENT_ID);i&&e.element.removeChild(i)}},n=this;return this.renderedCamera.close().then(function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),r(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),t.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()})},a.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(r){return r.decodedText})},a.prototype.scanFileV2=function(e,t){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(vd(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(n,i){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var l=new Image;l.onload=function(){var o=l.width,c=l.height,d=document.getElementById(r.elementId),u=d.clientWidth?d.clientWidth:xl.DEFAULT_WIDTH,h=Math.max(d.clientHeight?d.clientHeight:c,xl.FILE_SCAN_MIN_HEIGHT),f=r.computeCanvasDrawConfig(o,c,u,h);if(t){var p=r.createCanvasElement(u,h,"qr-canvas-visible");p.style.display="inline-block",d.appendChild(p);var g=p.getContext("2d");if(!g)throw"Unable to get 2d context from canvas";g.canvas.width=u,g.canvas.height=h,g.drawImage(l,0,0,o,c,f.x,f.y,f.width,f.height)}var b=xl.FILE_SCAN_HIDDEN_CANVAS_PADDING,w=Math.max(l.width,f.width),j=Math.max(l.height,f.height),k=w+2*b,T=j+2*b,E=r.createCanvasElement(k,T);d.appendChild(E);var I=E.getContext("2d");if(!I)throw"Unable to get 2d context from canvas";I.canvas.width=k,I.canvas.height=T,I.drawImage(l,0,0,o,c,b,b,w,j);try{r.qrcode.decodeRobustlyAsync(E).then(function(R){n(jL.createFromQrcodeResult(R))}).catch(i)}catch(R){i("QR code parse error, error = ".concat(R))}},l.onerror=i,l.onabort=i,l.onstalled=i,l.onsuspend=i,l.src=URL.createObjectURL(e)})},a.prototype.clear=function(){this.clearElement()},a.getCameras=function(){return Hde.retrieve()},a.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},a.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},a.prototype.applyVideoConstraints=function(e){if(e){if(!JU.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},a.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},a.prototype.getSupportedFormats=function(e){var t=[sa.QR_CODE,sa.AZTEC,sa.CODABAR,sa.CODE_39,sa.CODE_93,sa.CODE_128,sa.DATA_MATRIX,sa.MAXICODE,sa.ITF,sa.EAN_13,sa.EAN_8,sa.PDF_417,sa.RSS_14,sa.RSS_EXPANDED,sa.UPC_A,sa.UPC_E,sa.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],n=0,i=e.formatsToSupport;n<i.length;n++){var l=i[n];Nde(l)?r.push(l):this.logger.warn("Invalid format: ".concat(l," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},a.prototype.getUseBarCodeDetectorIfSupported=function(e){if(vd(e))return!0;if(!vd(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(vd(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return vd(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},a.prototype.validateQrboxSize=function(e,t,r){var n=this,i=r.qrbox;this.validateQrboxConfig(i);var l=this.toQrdimensions(e,t,i),o=function(d){if(d<xl.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(xl.MIN_QR_BOX_SIZE,"px.")},c=function(d){return d>e&&(n.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),d=e),d};o(l.width),o(l.height),l.width=c(l.width)},a.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},a.prototype.toQrdimensions=function(e,t,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,t)}catch(n){throw new Error("qrbox config was passed as a function but it failed with unknown error"+n)}return r},a.prototype.setupUi=function(e,t,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,r);var n=vd(r.qrbox)?{width:e,height:t}:r.qrbox;this.validateQrboxConfig(n);var i=this.toQrdimensions(e,t,n);i.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var l=r.isShadedBoxEnabled()&&i.height<=t,o={x:0,y:0,width:e,height:t},c=l?this.getShadedRegionBounds(e,t,i):o,d=this.createCanvasElement(c.width,c.height),u={willReadFrequently:!0},h=d.getContext("2d",u);h.canvas.width=c.width,h.canvas.height=c.height,this.element.append(d),l&&this.possiblyInsertShadingElement(this.element,e,t,i),this.createScannerPausedUiElement(this.element),this.qrRegion=c,this.context=h,this.canvasElement=d},a.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=Kp.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},a.prototype.scanContext=function(e,t){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(n){return e(n.text,jL.createFromQrcodeResult(n)),r.possiblyUpdateShaders(!0),!0}).catch(function(n){r.possiblyUpdateShaders(!1);var i=Kp.codeParseError(n);return t(i,Sde.createFrom(i)),!1})},a.prototype.foreverScan=function(e,t,r){var n=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),l=i.videoWidth/i.clientWidth,o=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var c=this.qrRegion.width*l,d=this.qrRegion.height*o,u=this.qrRegion.x*l,h=this.qrRegion.y*o;this.context.drawImage(i,u,h,c,d,0,0,this.qrRegion.width,this.qrRegion.height);var f=function(){n.foreverScanTimeout=setTimeout(function(){n.foreverScan(e,t,r)},n.getTimeoutFps(e.fps))};this.scanContext(t,r).then(function(p){!p&&e.disableFlip!==!0?(n.context.translate(n.context.canvas.width,0),n.context.scale(-1,1),n.scanContext(t,r).finally(function(){f()})):f()}).catch(function(p){n.logger.logError("Error happend while scanning context",p),f()})}},a.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",r="deviceId",n={user:!0,environment:!0},i="exact",l=function(g){if(g in n)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(g,"'")},o=Object.keys(e);if(o.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(o.length," keys");var c=Object.keys(e)[0];if(c!==t&&c!==r)throw"Only '".concat(t,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(c===t){var d=e.facingMode;if(typeof d=="string"){if(l(d))return{facingMode:d}}else if(typeof d=="object")if(i in d){if(l(d["".concat(i)]))return{facingMode:{exact:d["".concat(i)]}}}else throw"'facingMode' should be string or object with"+" ".concat(i," as key.");else{var u=typeof d;throw"Invalid type of 'facingMode' = ".concat(u)}}else{var h=e.deviceId;if(typeof h=="string")return{deviceId:h};if(typeof h=="object"){if(i in h)return{deviceId:{exact:h["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}else{var f=typeof h;throw"Invalid type of 'deviceId' = ".concat(f)}}}var p=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(p)},a.prototype.computeCanvasDrawConfig=function(e,t,r,n){if(e<=r&&t<=n){var i=(r-e)/2,l=(n-t)/2;return{x:i,y:l,width:e,height:t}}else{var o=e,c=t;return e>r&&(t=r/e*t,e=r),t>n&&(e=n/t*e,t=n),this.logger.log("Image downsampled from "+"".concat(o,"X").concat(c)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,r,n)}},a.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},a.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?xl.BORDER_SHADER_MATCH_COLOR:xl.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},a.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},a.prototype.createCanvasElement=function(e,t,r){var n=e,i=t,l=document.createElement("canvas");return l.style.width="".concat(n,"px"),l.style.height="".concat(i,"px"),l.style.display="none",l.id=vd(r)?"qr-canvas":r,l},a.prototype.getShadedRegionBounds=function(e,t,r){if(r.width>e||r.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(t-r.height)/2,width:r.width,height:r.height}},a.prototype.possiblyInsertShadingElement=function(e,t,r,n){if(!(t-n.width<1||r-n.height<1)){var i=document.createElement("div");i.style.position="absolute";var l=(t-n.width)/2,o=(r-n.height)/2;if(i.style.borderLeft="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(xl.SHADED_REGION_ELEMENT_ID),t-n.width<11||r-n.height<11)this.hasBorderShaders=!1;else{var c=5,d=40;this.insertShaderBorders(i,d,c,-c,null,0,!0),this.insertShaderBorders(i,d,c,-c,null,0,!1),this.insertShaderBorders(i,d,c,null,-c,0,!0),this.insertShaderBorders(i,d,c,null,-c,0,!1),this.insertShaderBorders(i,c,d+c,-c,null,-c,!0),this.insertShaderBorders(i,c,d+c,null,-c,-c,!0),this.insertShaderBorders(i,c,d+c,-c,null,-c,!1),this.insertShaderBorders(i,c,d+c,null,-c,-c,!1),this.hasBorderShaders=!0}e.append(i)}},a.prototype.insertShaderBorders=function(e,t,r,n,i,l,o){var c=document.createElement("div");c.style.position="absolute",c.style.backgroundColor=xl.BORDER_SHADER_DEFAULT_COLOR,c.style.width="".concat(t,"px"),c.style.height="".concat(r,"px"),n!==null&&(c.style.top="".concat(n,"px")),i!==null&&(c.style.bottom="".concat(i,"px")),o?c.style.left="".concat(l,"px"):c.style.right="".concat(l,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(c),e.appendChild(c)},a.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},a.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},a.prototype.getTimeoutFps=function(e){return 1e3/e},a})(),DL;(function(a){a[a.STATUS_DEFAULT=0]="STATUS_DEFAULT",a[a.STATUS_SUCCESS=1]="STATUS_SUCCESS",a[a.STATUS_WARNING=2]="STATUS_WARNING",a[a.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(DL||(DL={}));var _x;(function(a){a.Unimplemented="UNIMPLEMENTED",a.Unavailable="UNAVAILABLE"})(_x||(_x={}));class a5 extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const qde=a=>{var e,t;return a?.androidBridge?"android":!((t=(e=a?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},Xde=a=>{const e=a.CapacitorCustomPlatform||null,t=a.Capacitor||{},r=t.Plugins=t.Plugins||{},n=()=>e!==null?e.name:qde(a),i=()=>n()!=="web",l=h=>{const f=d.get(h);return!!(f?.platforms.has(n())||o(h))},o=h=>{var f;return(f=t.PluginHeaders)===null||f===void 0?void 0:f.find(p=>p.name===h)},c=h=>a.console.error(h),d=new Map,u=(h,f={})=>{const p=d.get(h);if(p)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),p.proxy;const g=n(),b=o(h);let w;const j=async()=>(!w&&g in f?w=typeof f[g]=="function"?w=await f[g]():w=f[g]:e!==null&&!w&&"web"in f&&(w=typeof f.web=="function"?w=await f.web():w=f.web),w),k=(H,G)=>{var X,U;if(b){const te=b?.methods.find(Z=>G===Z.name);if(te)return te.rtype==="promise"?Z=>t.nativePromise(h,G.toString(),Z):(Z,J)=>t.nativeCallback(h,G.toString(),Z,J);if(H)return(X=H[G])===null||X===void 0?void 0:X.bind(H)}else{if(H)return(U=H[G])===null||U===void 0?void 0:U.bind(H);throw new a5(`"${h}" plugin is not implemented on ${g}`,_x.Unimplemented)}},T=H=>{let G;const X=(...U)=>{const te=j().then(Z=>{const J=k(Z,H);if(J){const B=J(...U);return G=B?.remove,B}else throw new a5(`"${h}.${H}()" is not implemented on ${g}`,_x.Unimplemented)});return H==="addListener"&&(te.remove=async()=>G()),te};return X.toString=()=>`${H.toString()}() { [capacitor code] }`,Object.defineProperty(X,"name",{value:H,writable:!1,configurable:!1}),X},E=T("addListener"),I=T("removeListener"),R=(H,G)=>{const X=E({eventName:H},G),U=async()=>{const Z=await X;I({eventName:H,callbackId:Z},G)},te=new Promise(Z=>X.then(()=>Z({remove:U})));return te.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await U()},te},P=new Proxy({},{get(H,G){switch(G){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return b?R:E;case"removeListener":return I;default:return T(G)}}});return r[h]=P,d.set(h,{name:h,proxy:P,platforms:new Set([...Object.keys(f),...b?[g]:[]])}),P};return t.convertFileSrc||(t.convertFileSrc=h=>h),t.getPlatform=n,t.handleError=c,t.isNativePlatform=i,t.isPluginAvailable=l,t.registerPlugin=u,t.Exception=a5,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},Zde=a=>a.Capacitor=Xde(a),io=Zde(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),K_=io.registerPlugin;class gT{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const l=async()=>this.removeListener(e,t);return Promise.resolve({remove:l})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const n=this.listeners[e];if(!n){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(t),this.retainedEventArguments[e]=i}return}n.forEach(i=>i(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new io.Exception(e,_x.Unimplemented)}unavailable(e="not available"){return new io.Exception(e,_x.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const n=r.indexOf(t);this.listeners[e].splice(n,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const IL=a=>encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),RL=a=>a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Kde extends gT{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[n,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=RL(n).trim(),i=RL(i).trim(),t[n]=i}),t}async setCookie(e){try{const t=IL(e.key),r=IL(e.value),n=e.expires?`; expires=${e.expires.replace("expires=","")}`:"",i=(e.path||"/").replace("path=",""),l=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${n}; path=${i}; ${l};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}K_("CapacitorCookies",{web:()=>new Kde});const Qde=async a=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const n=r.result;e(n.indexOf(",")>=0?n.split(",")[1]:n)},r.onerror=n=>t(n),r.readAsDataURL(a)}),Jde=(a={})=>{const e=Object.keys(a);return Object.keys(a).map(n=>n.toLocaleLowerCase()).reduce((n,i,l)=>(n[i]=a[e[l]],n),{})},eue=(a,e=!0)=>a?Object.entries(a).reduce((r,n)=>{const[i,l]=n;let o,c;return Array.isArray(l)?(c="",l.forEach(d=>{o=e?encodeURIComponent(d):d,c+=`${i}=${o}&`}),c.slice(0,-1)):(o=e?encodeURIComponent(l):l,c=`${i}=${o}`),`${r}&${c}`},"").substr(1):null,tue=(a,e={})=>{const t=Object.assign({method:a.method||"GET",headers:a.headers},e),n=Jde(a.headers)["content-type"]||"";if(typeof a.data=="string")t.body=a.data;else if(n.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[l,o]of Object.entries(a.data||{}))i.set(l,o);t.body=i.toString()}else if(n.includes("multipart/form-data")||a.data instanceof FormData){const i=new FormData;if(a.data instanceof FormData)a.data.forEach((o,c)=>{i.append(c,o)});else for(const o of Object.keys(a.data))i.append(o,a.data[o]);t.body=i;const l=new Headers(t.headers);l.delete("content-type"),t.headers=l}else(n.includes("application/json")||typeof a.data=="object")&&(t.body=JSON.stringify(a.data));return t};class aue extends gT{async request(e){const t=tue(e,e.webFetchExtra),r=eue(e.params,e.shouldEncodeUrlParams),n=r?`${e.url}?${r}`:e.url,i=await fetch(n,t),l=i.headers.get("content-type")||"";let{responseType:o="text"}=i.ok?e:{};l.includes("application/json")&&(o="json");let c,d;switch(o){case"arraybuffer":case"blob":d=await i.blob(),c=await Qde(d);break;case"json":c=await i.json();break;default:c=await i.text()}const u={};return i.headers.forEach((h,f)=>{u[f]=h}),{data:c,headers:u,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}K_("CapacitorHttp",{web:()=>new aue});var LL;(function(a){a.Dark="DARK",a.Light="LIGHT",a.Default="DEFAULT"})(LL||(LL={}));var OL;(function(a){a.StatusBar="StatusBar",a.NavigationBar="NavigationBar"})(OL||(OL={}));class rue extends gT{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}K_("SystemBars",{web:()=>new rue});const nue="modulepreload",iue=function(a){return"/"+a},PL={},tG=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=l?.nonce||l?.getAttribute("nonce");n=c(t.map(d=>{if(d=iue(d),d in PL)return;PL[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":nue,u||(f.as="script"),f.crossOrigin="",f.href=d,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return n.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};var o4;(function(a){a[a.BACK=1]="BACK",a[a.FRONT=2]="FRONT"})(o4||(o4={}));var c4;(function(a){a[a.PORTRAIT=1]="PORTRAIT",a[a.LANDSCAPE=2]="LANDSCAPE",a[a.ADAPTIVE=3]="ADAPTIVE"})(c4||(c4={}));var d4;(function(a){a[a.ALL=17]="ALL"})(d4||(d4={}));const sue=Object.assign(Object.assign({},sa),d4);var zL;(function(a){a.ZXING="zxing",a.MLKIT="mlkit"})(zL||(zL={}));const lue=[{selector:".scanner-container-display",css:"display: block;"},{selector:".scanner-dialog",css:"display: none; position: fixed; z-index: 999; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);"},{selector:".scanner-dialog-inner",css:"background-color: #fefefe; margin: 2% auto; padding: 20px; border: 1px solid #888; width: 96%;"},{selector:".close-button",css:"color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;"},{selector:".close-button:hover",css:"color: #222;"},{selector:".scanner-container-full-width",css:"width: 100%;"}];function oue(a){const e="custom-style-os-cap-barcode";let t=document.getElementById(e);if(t||(t=document.createElement("style"),t.type="text/css",t.id=e,document.head.appendChild(t)),t.sheet){for(;t.sheet.cssRules.length;)t.sheet.deleteRule(0);for(const{selector:r,css:n}of a)t.sheet.insertRule(`${r} { ${n} }`)}else{t.textContent="";for(const{selector:r,css:n}of a)t.textContent+=`${r} { ${n} }`}}const cue=K_("CapacitorBarcodeScanner",{web:()=>(oue(lue),tG(()=>import("./web-DrF0FNAm.js"),[]).then(a=>new a.CapacitorBarcodeScannerWeb))});class due{static async scanBarcode(e){return e.scanInstructions=e.scanInstructions||" ",e.scanButton=e.scanButton||!1,e.scanText=e.scanText||" ",e.cameraDirection=e.cameraDirection||o4.BACK,e.scanOrientation=e.scanOrientation||c4.ADAPTIVE,cue.scanBarcode(e)}}async function Q_(){if(!io.isNativePlatform())return{isNative:!1};try{const a=await due.scanBarcode({hint:sue.QR_CODE,scanInstructions:"QR    .",scanButton:!1});return a&&a.ScanResult?{isNative:!0,content:a.ScanResult}:{isNative:!0,content:null}}catch(a){throw console.error("Native scan failed:",a),a}}const uue=()=>{an();const{showAlert:a}=wa(),[e,t]=F.useState([]),[r,n]=F.useState([]),[i,l]=F.useState(!0),o=F.useRef(null),{pullDistance:c,isRefreshing:d,bind:u}=KU(async()=>{await Z()},{scrollEltRef:o}),[h,f]=F.useState({log_id:0,batch_id:null,space_id:null,log_date:Wt().format("YYYY-MM-DD"),worker_name:localStorage.getItem("username")||"",work_type:"",work_content:"",input_materials:null,env_data:{temp:"",humi:""},photos:null}),[p,g]=F.useState(null),b=F.useRef(null),w=F.useRef(null),[j,k]=F.useState(!1),[T,E]=F.useState(""),I=F.useRef(null),R=F.useRef(null),P=F.useRef(null),[H,G]=F.useState(null);F.useEffect(()=>{let $=!0;if(j&&!io.isNativePlatform()){const Q=setTimeout(async()=>{if(!(!$||!document.getElementById("reader-worklog")))try{if(R.current)try{R.current.isScanning&&await R.current.stop()}catch(ae){console.warn("Cleanup failed",ae)}const re=new bh("reader-worklog");R.current=re;const K={fps:15,qrbox:{width:250,height:250},aspectRatio:1,disableFlip:!1};try{await re.start({facingMode:"environment"},K,ae=>{$&&(G(null),te(ae))},ae=>{})}catch(ae){console.log("Back camera failed, trying front",ae),await re.start({facingMode:"user"},K,ce=>{$&&(G(null),te(ce))},()=>{})}}catch(re){console.error("Scanner initialization failed:",re),!window.isSecureContext&&window.location.hostname!=="localhost"?G("  (HTTPS) . WiFi(HTTP)       ."):G(`   : ${re.message||"  "}`)}},500);return()=>{if($=!1,clearTimeout(Q),R.current){const ne=R.current;ne.getState&&ne.getState()===2?ne.stop().catch(re=>console.error("Stop failed",re)):ne.isScanning&&ne.stop().catch(re=>console.error("Stop failed",re))}}}},[j]);const X=async $=>{const Q=$.target.files?.[0];if(Q)try{const re=await new bh("reader-worklog").scanFileV2(Q,!1);te(re.decodedText),k(!1)}catch{alert("    .  .")}},U=async()=>{if(io.isNativePlatform()){try{const $=await Q_();$.content&&te($.content)}catch($){console.error("Native scan error",$)}return}G(null),k(!0),E("")},te=async $=>{if(!$)return;const Q=$.trim();if(console.log("WorkLog Processing Scanned QR:",Q),R.current)try{((R.current.getState?R.current.getState():0)===2||R.current.isScanning)&&await R.current.stop()}catch(ae){console.warn("Stop on success failed",ae)}const ne=Q.split("|").map(ae=>ae.trim());if(ne[0]==="BATCH"&&ne[1]){const ae=parseInt(ne[1]),ce=r.find(de=>Number(de.batch_id)===ae);if(ce){f(de=>({...de,batch_id:ce.batch_id})),k(!1),setTimeout(()=>P.current?.focus(),300),a(" ",` [${ce.batch_code}] .`);return}}else if(ne[0]==="SPACE"&&ne[1]){const ae=parseInt(ne[1]),ce=e.find(de=>Number(de.space_id)===ae);if(ce){f(de=>({...de,space_id:ce.space_id})),k(!1),a(" ",` [${ce.space_name}] .`);return}}const re=r.find(ae=>ae.batch_code===Q);if(re){f(ae=>({...ae,batch_id:re.batch_id})),k(!1),a(" ",` [${re.batch_code}] .`);return}const K=e.find(ae=>ae.space_name===Q);if(K){f(ae=>({...ae,space_id:K.space_id})),k(!1),setTimeout(()=>P.current?.focus(),300),a(" ",` [${K.space_name}] .`);return}k(!1),a(" ",`[${Q}]    .`)};F.useEffect(()=>{Z()},[]);const Z=async()=>{try{const[$,Q]=await Promise.all([ht("get_production_spaces"),ht("get_production_batches")]);t($||[]),n(Q||[])}catch($){console.error($),a("  ","    .")}finally{l(!1)}},J=async()=>{if(!h.work_content){a(" ","   .");return}try{const $={...h,batch_id:Number(h.batch_id)||0,space_id:Number(h.space_id)||0,log_date:typeof h.log_date=="object"?h.log_date.format("YYYY-MM-DD"):h.log_date,env_data:{temp:h.env_data.temp?parseFloat(h.env_data.temp):null,humi:h.env_data.humi?parseFloat(h.env_data.humi):null}},Q=await ht("save_farming_log",$);if(Q&&Q.success)a(" ","    ."),f(ne=>({...ne,work_content:"",env_data:{temp:"",humi:""}}));else throw new Error(Q?.error||"Unknown error")}catch($){console.error($),a(" ","    : "+$)}},B=()=>{b.current?.click()},W=$=>{const Q=$.target.files[0];if(Q){const ne=new FileReader;ne.onloadend=()=>{g(ne.result),f(re=>({...re,photos:ne.result}))},ne.readAsDataURL(Q)}};return s.jsxs("div",{ref:o,...u,className:"min-h-screen bg-slate-50 flex flex-col font-sans overflow-hidden",children:[s.jsx("div",{className:"fixed left-0 right-0 top-0 flex justify-center pointer-events-none z-[60] transition-transform",style:{transform:`translateY(${c}px)`,opacity:c>20?1:0},children:s.jsx("div",{className:"bg-white/90 backdrop-blur-md p-2 rounded-full shadow-lg border border-slate-200 mt-2",children:s.jsx(yi,{size:20,className:`text-indigo-600 ${d?"animate-spin":""}`,style:{transform:d?"none":`rotate(${c*3}deg)`,transition:d?"none":"transform 0.1s"}})})}),s.jsx("div",{className:"bg-white px-5 pt-10 pb-4 border-b border-slate-100 shrink-0 flex items-center gap-2 sticky top-0 z-50",children:s.jsx("h1",{className:"text-2xl font-black text-slate-800",children:"  "})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 pb-20 space-y-4",children:[s.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:b,onChange:W,className:"hidden"}),s.jsxs("div",{className:"bg-white rounded-3xl p-5 shadow-sm border border-slate-100 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-3 text-slate-800 font-black",children:[s.jsx(F_,{size:18,className:"text-indigo-500"}),s.jsx("span",{children:" / "})]}),s.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 text-indigo-600 border border-indigo-100 rounded-xl font-black text-xs transition-all active:scale-95",children:[s.jsx(M0,{size:14}),s.jsx("span",{children:"QR "})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("select",{className:"w-full h-14 bg-slate-50 border-none rounded-2xl px-4 text-sm font-bold text-slate-700",value:h.space_id||"",onChange:$=>f({...h,space_id:$.target.value?parseInt($.target.value):null}),children:[s.jsx("option",{value:"",children:"  ( )"}),e.map($=>s.jsx("option",{value:$.space_id,children:$.space_name},$.space_id))]}),s.jsxs("select",{className:"w-full h-14 bg-slate-50 border-none rounded-2xl px-4 text-sm font-bold text-slate-700",value:h.batch_id||"",onChange:$=>f({...h,batch_id:$.target.value?parseInt($.target.value):null}),children:[s.jsx("option",{value:"",children:"   ( )"}),r.map($=>s.jsx("option",{value:$.batch_id,children:$.batch_code},$.batch_id))]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-white p-4 rounded-3xl shadow-sm border border-slate-100 flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-2xl bg-rose-50 text-rose-500 flex items-center justify-center",children:s.jsx(wb,{size:18})}),s.jsx("input",{ref:P,type:"number",placeholder:"",className:"w-full bg-transparent border-none text-sm font-black text-slate-800 placeholder:text-slate-300",value:h.env_data.temp,onChange:$=>f({...h,env_data:{...h.env_data,temp:$.target.value}}),inputMode:"decimal"}),s.jsx("span",{className:"text-xs font-bold text-slate-400",children:"C"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-3xl shadow-sm border border-slate-100 flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-2xl bg-blue-50 text-blue-500 flex items-center justify-center",children:s.jsx(x0,{size:18})}),s.jsx("input",{type:"number",placeholder:"",className:"w-full bg-transparent border-none text-sm font-black text-slate-800 placeholder:text-slate-300",value:h.env_data.humi,onChange:$=>f({...h,env_data:{...h.env_data,humi:$.target.value}})}),s.jsx("span",{className:"text-xs font-bold text-slate-400",children:"%"})]})]}),s.jsxs("div",{className:"bg-white rounded-3xl p-5 shadow-sm border border-slate-100 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 text-slate-800 font-black mb-2",children:[s.jsx(xh,{size:18,className:"text-indigo-500"}),s.jsx("span",{children:"  "})]}),s.jsx("textarea",{className:"w-full min-h-[150px] bg-slate-50 border-none rounded-2xl p-4 text-sm font-medium text-slate-700 placeholder:text-slate-300 resize-none",placeholder:"  ? (:  ,  )",value:h.work_content,onChange:$=>f({...h,work_content:$.target.value})})]}),s.jsx("button",{onClick:B,className:"w-full bg-white p-6 rounded-3xl shadow-sm border-2 border-dashed border-slate-200 flex flex-col items-center justify-center gap-2 group active:bg-slate-50 transition-colors overflow-hidden",children:p?s.jsxs("div",{className:"w-full aspect-video rounded-xl overflow-hidden relative",children:[s.jsx("img",{src:p,alt:"Preview",className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(GC,{size:32,className:"text-white"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-50 text-slate-400 flex items-center justify-center group-hover:bg-indigo-50 group-hover:text-indigo-500 transition-colors",children:s.jsx(GC,{size:24})}),s.jsx("span",{className:"text-sm font-black text-slate-400 group-hover:text-indigo-500",children:"   ()"})]})}),s.jsx("div",{className:"pt-4 pb-12",children:s.jsxs("button",{onClick:J,className:"w-full h-16 bg-indigo-600 rounded-[2rem] text-white font-black text-lg flex items-center justify-center gap-3 shadow-xl shadow-indigo-100 active:scale-[0.98] transition-all",children:[s.jsx(Yi,{size:24})," "]})})]}),j&&s.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-start p-6 pt-12 animate-in fade-in duration-300 overflow-y-auto",children:[s.jsxs("div",{className:"relative w-full max-w-[280px] aspect-square border-2 border-indigo-500/50 rounded-[2.5rem] overflow-hidden bg-slate-950 shadow-2xl flex items-center justify-center shrink-0",children:[s.jsx("div",{id:"reader-worklog",className:"absolute inset-0 z-0"}),H&&s.jsxs("div",{className:"z-20 flex flex-col items-center gap-4 px-6 py-4 bg-slate-800/95 text-white rounded-3xl text-center mx-4 border border-white/10 shadow-2xl",children:[s.jsx("p",{className:"text-xs font-black leading-relaxed",children:H}),s.jsx("button",{onClick:()=>w.current?.click(),className:"px-6 py-3 bg-indigo-600 rounded-2xl text-sm font-black shadow-lg active:scale-95 transition-all",children:"  "}),s.jsx("input",{ref:w,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:X})]}),s.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10",children:[s.jsx("div",{className:"absolute inset-x-0 h-1 bg-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.8)] animate-scan"}),s.jsx("div",{className:"absolute top-8 left-8 w-8 h-8 border-t-4 border-l-4 border-white rounded-tl-lg"}),s.jsx("div",{className:"absolute top-8 right-8 w-8 h-8 border-t-4 border-r-4 border-white rounded-tr-lg"}),s.jsx("div",{className:"absolute bottom-8 left-8 w-8 h-8 border-b-4 border-l-4 border-white rounded-bl-lg"}),s.jsx("div",{className:"absolute bottom-8 right-8 w-8 h-8 border-b-4 border-r-4 border-white rounded-br-lg"})]})]}),s.jsxs("div",{className:"mt-6 text-center text-white space-y-4 w-full",children:[s.jsx("h3",{className:"text-xl font-black",children:" QR  "}),s.jsx("p",{className:"text-sm text-slate-400",children:"  QR  ."}),s.jsxs("div",{className:"max-w-xs mx-auto pt-2 space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest block",children:"   (  )"}),s.jsx("div",{className:"relative opacity-60 focus-within:opacity-100 transition-opacity",children:s.jsx("input",{ref:I,type:"text",className:"w-full h-12 bg-white/5 border border-white/10 rounded-2xl px-6 text-white text-center font-black focus:border-indigo-500/50 focus:ring-0 transition-all outline-none text-xs",placeholder:"  ",value:T,onChange:$=>E($.target.value),onKeyDown:$=>{$.key==="Enter"&&(te(T),$.target.blur())}})})]})]}),s.jsx("button",{onClick:()=>{k(!1),G(null)},className:"mt-8 mb-12 w-16 h-16 bg-white/10 hover:bg-white/20 text-white rounded-full flex items-center justify-center transition-all active:scale-90 shrink-0",children:s.jsx(Ri,{size:32})}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                        @keyframes scan { 0% { top: 0; } 50% { top: 100%; } 100% { top: 0; } }
                        .animate-scan { position: absolute; animation: scan 3s infinite linear; }
                        #reader-worklog video { 
                            object-fit: cover !important;
                            height: 100% !important;
                            width: 100% !important;
                        }
                    `}})]})]})},hue=()=>{an();const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState([]),[n,i]=F.useState(!0),[l,o]=F.useState({harvest_id:0,batch_id:null,harvest_date:Wt().format("YYYY-MM-DD"),quantity:0,defective_quantity:0,loss_quantity:0,unit:"kg",grade:"",traceability_code:"",memo:"",package_count:0,weight_per_package:0,package_unit:"kg"}),[c,d]=F.useState(!1),[u,h]=F.useState(!1),[f,p]=F.useState(""),g=F.useRef(null),b=F.useRef(null),w=F.useRef(null),j=F.useRef(null),[k,T]=F.useState(null);F.useEffect(()=>{let U=!0;if(u&&!io.isNativePlatform()){const te=setTimeout(async()=>{if(!(!U||!document.getElementById("reader-harvest")))try{if(b.current)try{b.current.isScanning&&await b.current.stop()}catch(W){console.warn("Cleanup of old scanner failed",W)}const J=new bh("reader-harvest");b.current=J;const B={fps:15,qrbox:{width:250,height:250},aspectRatio:1,disableFlip:!1};try{await J.start({facingMode:"environment"},B,W=>{U&&(T(null),R(W))},W=>{})}catch(W){console.log("Environment camera start failed, trying any",W),await J.start({facingMode:"user"},B,$=>{U&&(T(null),R($))},()=>{})}}catch(J){console.error("Scanner initialization failed:",J),!window.isSecureContext&&window.location.hostname!=="localhost"?T("  (HTTPS) . WiFi(HTTP)       ."):T(`   : ${J.message||"  "}`)}},500);return()=>{if(U=!1,clearTimeout(te),b.current){const Z=b.current;Z.getState&&Z.getState()===2?Z.stop().catch(J=>console.error("Stop failed",J)):Z.isScanning&&Z.stop().catch(J=>console.error("Stop failed",J))}}}},[u]);const E=async U=>{const te=U.target.files?.[0];if(te)try{const J=await new bh("reader-harvest").scanFileV2(te,!1);R(J.decodedText),h(!1)}catch{alert("    .  .")}},I=async()=>{if(io.isNativePlatform()){try{const U=await Q_();U.content&&R(U.content)}catch(U){console.error("Native scan error",U)}return}T(null),h(!0),p("")},R=async U=>{if(!U)return;const te=U.trim();d(!0);const Z=te.split("|").map(B=>B.trim());let J=null;if(Z[0]==="BATCH"&&Z[1]){const B=parseInt(Z[1]);J=t.find(W=>Number(W.batch_id)===B)}else J=t.find(B=>B.batch_code===te);if(d(!1),J){if(o(B=>({...B,batch_id:J.batch_id})),b.current)try{((b.current.getState?b.current.getState():0)===2||b.current.isScanning)&&await b.current.stop()}catch(B){console.warn("Stop on success failed",B)}h(!1),setTimeout(()=>{j.current?.focus(),j.current?.select()},300),a(" ",`[${J.batch_code}]  .`)}else a(" ",`[${te}]     .`)};F.useEffect(()=>{G()},[]);const[P,H]=F.useState([]),G=async()=>{try{const[U,te]=await Promise.all([ht("get_production_batches"),ht("get_product_list")]);r(U?.filter(Z=>Z.status!=="completed")||[]),H(te||[])}catch(U){console.error(U),a("  ","     .")}finally{i(!1)}},X=async()=>{if(!l.batch_id){a(" ","    .");return}if(l.quantity<=0&&l.defective_quantity<=0){a(" ","   .");return}if(await e("  ",`     ?
(     .)`))try{const te=await ht("save_harvest_record",{record:{...l,quantity:Number(l.quantity)||0,defective_quantity:Number(l.defective_quantity)||0,loss_quantity:Number(l.loss_quantity)||0,package_count:Number(l.package_count)||0,weight_per_package:Number(l.weight_per_package)||0,harvest_date:l.harvest_date},completeBatch:!1});if(te&&te.success)a(" ","   ."),o(Z=>({...Z,quantity:0,defective_quantity:0,loss_quantity:0,memo:""}));else throw new Error(te?.error||"Unknown error")}catch(te){console.error(te),a(" ","   : "+te)}};return s.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col font-sans overflow-hidden",children:[s.jsx("div",{className:"bg-white px-5 pt-10 pb-4 border-b border-slate-100 shrink-0 flex items-center gap-2 sticky top-0 z-50",children:s.jsx("h1",{className:"text-2xl font-black text-slate-800",children:" "})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 pb-20 space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-3xl p-5 shadow-sm border border-slate-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3 text-slate-800 font-black",children:[s.jsx(_c,{size:18,className:"text-indigo-500"}),s.jsx("span",{children:"  "})]}),s.jsx("button",{onClick:I,disabled:c,className:`flex items-center gap-2 px-4 py-2 rounded-xl font-black text-xs transition-all active:scale-95 ${c?"bg-slate-100 text-slate-400":"bg-indigo-50 text-indigo-600 border border-indigo-100"}`,children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-3 h-3 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(M0,{size:14}),s.jsx("span",{children:"QR "})]})})]}),s.jsxs("select",{className:"w-full h-14 bg-slate-50 border-none rounded-2xl px-4 text-sm font-bold text-slate-700",value:l.batch_id||"",onChange:U=>o({...l,batch_id:U.target.value?parseInt(U.target.value):null}),children:[s.jsx("option",{value:"",children:" "}),t.map(U=>{const te=P.find(Z=>Z.product_id===U.product_id);return s.jsxs("option",{value:U.batch_id,children:[U.batch_code," - ",te?`${te.product_name}${te.specification?` (${te.specification})`:""}`:" "]},U.batch_id)})]})]}),s.jsxs("div",{className:"bg-indigo-600 rounded-[2.5rem] p-6 shadow-xl shadow-indigo-100 text-white space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(UH,{size:20}),s.jsx("span",{className:"font-black text-lg",children:" "})]}),s.jsx("div",{className:"px-3 py-1 bg-white/20 rounded-full text-[10px] font-black uppercase tracking-widest",children:"Main Stock"})]}),s.jsxs("div",{className:"flex items-end gap-3",children:[s.jsx("input",{ref:j,type:"number",className:"w-full bg-transparent border-b-2 border-white/30 focus:border-white text-4xl font-black text-white placeholder:text-white/30 outline-none pb-2",placeholder:"0.00",value:l.quantity||"",onChange:U=>o({...l,quantity:U.target.value}),inputMode:"decimal"}),s.jsx("span",{className:"text-2xl font-black mb-2",children:"kg"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-sm border border-slate-100 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-rose-500 font-black text-xs",children:[s.jsx(yb,{size:14}),s.jsx("span",{children:"()"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",className:"w-full bg-slate-50 border-none rounded-xl p-3 text-lg font-black text-slate-700",placeholder:"0",value:l.defective_quantity||"",onChange:U=>o({...l,defective_quantity:U.target.value})}),s.jsx("span",{className:"font-bold text-slate-400",children:"kg"})]})]}),s.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-sm border border-slate-100 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-400 font-black text-xs",children:[s.jsx(Cs,{size:14}),s.jsx("span",{children:" "})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",className:"w-full bg-slate-50 border-none rounded-xl p-3 text-lg font-black text-slate-700",placeholder:"0",value:l.loss_quantity||"",onChange:U=>o({...l,loss_quantity:U.target.value})}),s.jsx("span",{className:"font-bold text-slate-400",children:"kg"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-3xl p-5 shadow-sm border border-slate-100 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 text-slate-800 font-black mb-2",children:[s.jsx(di,{size:18,className:"text-indigo-500"}),s.jsx("span",{children:"   "})]}),s.jsx("div",{className:"flex gap-2",children:["","",""].map(U=>s.jsx("button",{onClick:()=>o({...l,grade:U}),className:`flex-1 h-12 rounded-xl font-black text-sm transition-all ${l.grade===U?"bg-indigo-600 text-white shadow-md shadow-indigo-100":"bg-slate-50 text-slate-400"}`,children:U},U))}),s.jsx("textarea",{className:"w-full min-h-[100px] bg-slate-50 border-none rounded-2xl p-4 text-sm font-medium text-slate-700 placeholder:text-slate-300 resize-none",placeholder:"   .",value:l.memo,onChange:U=>o({...l,memo:U.target.value})})]}),s.jsx("div",{className:"pt-4 pb-12",children:s.jsxs("button",{onClick:X,className:"w-full h-16 bg-indigo-600 rounded-[2rem] text-white font-black text-lg flex items-center justify-center gap-3 shadow-xl shadow-indigo-100 active:scale-[0.98] transition-all",children:[s.jsx(Yi,{size:24}),"  "]})})]}),u&&s.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-start p-6 pt-12 animate-in fade-in duration-300 overflow-y-auto",children:[s.jsxs("div",{className:"relative w-full max-w-[280px] aspect-square border-2 border-indigo-500/50 rounded-[2.5rem] overflow-hidden bg-slate-950 shadow-2xl flex items-center justify-center shrink-0",children:[s.jsx("div",{id:"reader-harvest",className:"absolute inset-0 z-0"}),k&&s.jsxs("div",{className:"z-20 flex flex-col items-center gap-4 px-6 py-4 bg-slate-800/95 text-white rounded-3xl text-center mx-4 border border-white/10 shadow-2xl",children:[s.jsx("p",{className:"text-xs font-black leading-relaxed",children:k}),s.jsx("button",{onClick:()=>w.current?.click(),className:"px-6 py-3 bg-indigo-600 rounded-2xl text-sm font-black shadow-lg active:scale-95 transition-all",children:"  "}),s.jsx("input",{ref:w,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:E})]}),s.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10",children:[s.jsx("div",{className:"absolute inset-x-0 h-1 bg-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.8)] animate-scan"}),s.jsx("div",{className:"absolute top-8 left-8 w-8 h-8 border-t-4 border-l-4 border-white rounded-tl-lg"}),s.jsx("div",{className:"absolute top-8 right-8 w-8 h-8 border-t-4 border-r-4 border-white rounded-tr-lg"}),s.jsx("div",{className:"absolute bottom-8 left-8 w-8 h-8 border-b-4 border-l-4 border-white rounded-bl-lg"}),s.jsx("div",{className:"absolute bottom-8 right-8 w-8 h-8 border-b-4 border-r-4 border-white rounded-br-lg"})]})]}),s.jsxs("div",{className:"mt-6 text-center text-white space-y-4 w-full",children:[s.jsx("h3",{className:"text-xl font-black",children:" QR  "}),s.jsx("p",{className:"text-sm text-slate-400",children:"  QR  ."}),s.jsxs("div",{className:"max-w-xs mx-auto pt-2 space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest block",children:"   (  )"}),s.jsx("div",{className:"relative opacity-60 focus-within:opacity-100 transition-opacity",children:s.jsx("input",{ref:g,type:"text",className:"w-full h-12 bg-white/5 border border-white/10 rounded-2xl px-6 text-white text-center font-black focus:border-indigo-500/50 focus:ring-0 transition-all outline-none text-xs",placeholder:"  ",value:f,onChange:U=>p(U.target.value),onKeyDown:U=>{U.key==="Enter"&&(R(f),U.target.blur())}})})]})]}),s.jsx("button",{onClick:()=>{h(!1),T(null)},className:"mt-8 mb-12 w-16 h-16 bg-white/10 hover:bg-white/20 text-white rounded-full flex items-center justify-center transition-all active:scale-90 shrink-0",children:s.jsx(Ri,{size:32})}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                        @keyframes scan { 0% { top: 0; } 50% { top: 100%; } 100% { top: 0; } }
                        .animate-scan { position: absolute; animation: scan 3s infinite linear; }
                        #reader-harvest video { 
                            object-fit: cover !important;
                            height: 100% !important;
                            width: 100% !important;
                        }
                    `}})]})]})},fue=({searchQuery:a,setSearchQuery:e,handleSearch:t,searchResults:r,handleSelectResult:n,isSearching:i,setShowRegisterForm:l})=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"   ",className:"w-full h-12 bg-slate-50 border-none rounded-2xl pl-4 pr-24 text-sm font-black text-slate-700 placeholder:text-slate-300 focus:ring-2 focus:ring-indigo-500 transition-all border border-slate-100",value:a,onChange:o=>e(o.target.value),onKeyDown:o=>o.key==="Enter"&&t()}),s.jsx("button",{onClick:t,className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 px-4 bg-indigo-600 text-white rounded-xl text-xs font-black shadow-lg shadow-indigo-100 whitespace-nowrap",children:""})]}),r.length>0&&s.jsx("div",{className:"bg-white border border-slate-100 rounded-2xl shadow-xl max-h-48 overflow-auto animate-in slide-in-from-top-2",children:r.map((o,c)=>s.jsxs("button",{onClick:()=>n(o),className:"w-full px-4 py-3 text-left border-b border-slate-50 last:border-0 hover:bg-slate-50 active:bg-slate-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("div",{className:"text-sm font-black text-slate-800 whitespace-nowrap overflow-hidden text-ellipsis",children:o._type==="event"?o.event_name:o.customer_name}),s.jsx("span",{className:`shrink-0 text-[9px] font-black px-1.5 py-0.5 rounded-md ${o._type==="event"?"bg-amber-100 text-amber-600":"bg-indigo-100 text-indigo-600"}`,children:o._type==="event"?"":""})]}),s.jsx("div",{className:"text-[10px] font-bold text-slate-400 truncate",children:o._type==="event"?`${o.start_date} ~ ${o.end_date}`:`${o.mobile_number} | ${o.address_primary||" "}`})]},o._type==="event"?`event-${o.event_id}`:`cust-${o.customer_id}-${c}`))}),a&&r.length===0&&!i&&s.jsxs("button",{onClick:()=>l(!0),className:"w-full h-12 border-2 border-dashed border-slate-200 rounded-2xl flex items-center justify-center gap-2 text-slate-400 hover:text-indigo-600 hover:border-indigo-200 transition-all font-bold text-sm",children:[s.jsx(KA,{size:18}),s.jsxs("span",{children:['"',a,'"   ']})]})]}),pue=({customer:a,onClearCustomer:e,events:t,selectedEventId:r,setSelectedEventId:n})=>s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex items-center gap-4 bg-indigo-50 p-4 rounded-3xl border border-indigo-100",children:[s.jsx("div",{className:"w-12 h-12 bg-indigo-600 text-white rounded-2xl flex items-center justify-center font-black text-lg",children:a?a.customer_name[0]:"G"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-black text-slate-900",children:a?a.customer_name:" "}),s.jsx("span",{className:"bg-white text-indigo-600 px-2 py-0.5 rounded-full text-[9px] font-black border border-indigo-200 uppercase tracking-tight",children:a?"EVENT CUSTOMER":"GUEST"})]}),s.jsx("div",{className:"text-[10px] font-bold text-slate-500 mt-0.5",children:a?a.mobile_number:" "})]}),s.jsx("button",{onClick:e,className:"p-2 text-slate-300 hover:text-rose-500 transition-colors",children:s.jsx(Ri,{size:18})})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-indigo-500 pointer-events-none",children:s.jsx(BH,{size:18})}),s.jsx("select",{className:"w-full h-12 bg-slate-50 border-none rounded-2xl pl-12 pr-10 text-sm font-black text-slate-700 appearance-none focus:ring-2 focus:ring-indigo-500 transition-all border border-slate-100",value:r,onChange:i=>n(i.target.value),children:t.length===0?s.jsx("option",{value:"",children:"  "}):s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"",children:"    ()"}),t.map(i=>s.jsx("option",{value:i.event_id,children:i.event_name},i.event_id))]})}),s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-300 pointer-events-none",children:s.jsx(WA,{size:18})})]})]}),xue=({isScanning:a,onQrScan:e,discountRate:t,setDiscountRate:r})=>s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("button",{onClick:e,className:`bg-indigo-600 h-20 rounded-3xl shadow-lg shadow-indigo-100 flex flex-col items-center justify-center gap-1 text-white active:scale-95 transition-all ${a?"animate-pulse":""}`,children:[s.jsx(M0,{size:24}),s.jsx("span",{className:"text-[11px] font-black",children:a?" ...":" QR "})]}),s.jsxs("div",{className:"bg-white h-20 rounded-3xl shadow-sm border border-slate-100 flex flex-col items-center justify-center gap-1 relative overflow-hidden",children:[s.jsx("div",{className:"flex items-center gap-1",children:s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter",children:" "})}),s.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 p-1.5 rounded-2xl border border-slate-100",children:[s.jsx("button",{type:"button",onClick:()=>r(Math.max(0,t-1)),className:"w-10 h-10 flex items-center justify-center bg-white rounded-xl text-rose-500 shadow-sm border border-slate-200 active:scale-90 transition-all",children:s.jsx("span",{className:"text-2xl font-black leading-none select-none",children:"-"})}),s.jsxs("div",{className:"flex items-center justify-center min-w-[3rem]",children:[s.jsx("input",{type:"number",className:"w-10 text-center bg-transparent border-none text-xl font-black text-rose-600 p-0 focus:ring-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",value:t,onChange:n=>r(Math.min(100,Math.max(0,parseInt(n.target.value)||0)))}),s.jsx(VH,{size:14,className:"text-rose-400 ml-0.5",strokeWidth:3})]}),s.jsx("button",{type:"button",onClick:()=>r(Math.min(100,t+1)),className:"w-10 h-10 flex items-center justify-center bg-rose-500 rounded-xl text-white active:scale-90 transition-all shadow-md shadow-rose-100",children:s.jsx("span",{className:"text-2xl font-black leading-none select-none",children:"+"})})]})]})]}),mue=({products:a,onSelectProduct:e,formatCurrency:t})=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-400 font-black text-xs uppercase tracking-widest pl-1",children:[s.jsx(kl,{size:12,className:"text-indigo-500"}),s.jsx("span",{children:"  "})]}),s.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:a.map(r=>s.jsxs("button",{onClick:()=>e(r.product_name),className:"bg-white px-5 py-3 rounded-2xl shadow-sm border border-slate-100 whitespace-nowrap active:scale-95 transition-all flex flex-col items-center min-w-[120px] max-w-[200px] shrink-0",children:[s.jsx("div",{className:"text-sm font-black text-slate-700 w-full truncate text-center",children:r.product_name}),r.specification&&s.jsx("div",{className:"text-[10px] text-slate-400 font-bold mb-1",children:r.specification}),s.jsxs("div",{className:"text-[10px] text-indigo-500 font-black",children:[t(r.unit_price),""]})]},r.product_id))})]}),gue=({show:a,products:e,inputState:t,handleInputChange:r,onAdd:n,qtyInputRef:i,formatCurrency:l,selectedEventId:o})=>a?s.jsxs("div",{className:`bg-white p-6 rounded-[2.5rem] border border-slate-100 shadow-xl space-y-5 animate-in slide-in-from-top-4 duration-300 transition-opacity ${o?"":"opacity-30 pointer-events-none"}`,children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter ml-1 mb-1.5 block",children:" "}),s.jsxs("select",{name:"product",className:"w-full h-12 bg-slate-50 border-none rounded-2xl px-5 text-[11px] font-black focus:ring-2 focus:ring-indigo-500 transition-all appearance-none",value:t.product,onChange:r,children:[s.jsx("option",{value:"",className:"text-[11px]",children:" "}),e.map(c=>s.jsxs("option",{value:c.product_name,className:"text-[11px]",children:[c.product_name," (",c.specification||" ",") - ",l(c.unit_price),""]},c.product_id))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter ml-1 mb-1.5 block",children:""}),s.jsx("input",{name:"price",className:"w-full h-12 bg-slate-50 border-none rounded-2xl text-sm font-black focus:ring-2 focus:ring-indigo-500 transition-all text-right px-4",value:l(t.price),onChange:c=>r({target:{name:"price",value:c.target.value.replace(/[^0-9]/g,"")}}),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter ml-1 mb-1.5 block",children:""}),s.jsxs("div",{className:"h-12 bg-slate-50 rounded-2xl flex items-center px-1 border border-slate-100 overflow-hidden",children:[s.jsx("button",{type:"button",onClick:()=>r({target:{name:"qty",value:Math.max(1,Number(t.qty)-1)}}),className:"w-10 h-10 shrink-0 flex items-center justify-center bg-white rounded-xl shadow-sm border border-slate-200 text-slate-700 active:scale-90 transition-all",children:s.jsx("span",{className:"text-2xl font-black leading-none select-none",children:"-"})}),s.jsx("input",{ref:i,type:"number",name:"qty",className:"flex-1 w-full bg-transparent border-none text-center font-black text-lg text-slate-800 focus:ring-0 p-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",value:t.qty,onChange:r,inputMode:"numeric"}),s.jsx("button",{type:"button",onClick:()=>r({target:{name:"qty",value:Number(t.qty)+1}}),className:"w-10 h-10 shrink-0 flex items-center justify-center bg-indigo-600 rounded-xl shadow-sm text-white active:scale-90 transition-all",children:s.jsx("span",{className:"text-2xl font-black leading-none select-none",children:"+"})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter ml-1 mb-1.5 block",children:" "}),s.jsxs("div",{className:"h-12 bg-indigo-50/50 rounded-2xl flex items-center px-4 justify-between border border-indigo-100/50",children:[s.jsx(mx,{size:18,className:"text-indigo-300"}),s.jsxs("span",{className:"text-lg font-black text-indigo-600",children:[l(t.amount),""]})]})]}),s.jsxs("button",{onClick:n,className:"w-full h-14 bg-indigo-600 text-white rounded-2xl font-black shadow-lg shadow-indigo-100 flex items-center justify-center gap-3 active:scale-[0.98] transition-all",children:[s.jsx(kl,{size:20}),""]})]}):null,vue=({item:a,discountRate:e,updateQuantity:t})=>s.jsxs("div",{className:"bg-white px-5 py-3 rounded-[1.5rem] border border-slate-100 shadow-sm flex items-center gap-4 animate-in fade-in slide-in-from-left-2 transition-all",children:[s.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[s.jsx("div",{className:"text-sm font-black text-slate-800 truncate",children:a.product_name}),a.specification&&s.jsx("div",{className:"text-[10px] text-slate-400 font-bold mt-0.5",children:a.specification}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("span",{className:"text-[10px] text-slate-400 font-bold line-through",children:[a.unit_price.toLocaleString(),""]}),s.jsxs("span",{className:"text-[10px] text-indigo-600 font-black",children:[Math.round(a.unit_price*(1-e/100)).toLocaleString(),""]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-1.5 rounded-xl border border-slate-100 scale-95 origin-right",children:[s.jsx("button",{type:"button",onClick:()=>t(a.product_id,-1),className:"w-7 h-7 rounded-lg bg-white shadow-sm border border-slate-200 flex items-center justify-center text-slate-700 active:scale-90",children:s.jsx("span",{className:"text-xl font-black leading-none select-none",children:"-"})}),s.jsx("span",{className:"text-sm font-black text-slate-800 min-w-[20px] text-center",children:a.quantity}),s.jsx("button",{type:"button",onClick:()=>t(a.product_id,1),className:"w-7 h-7 rounded-lg bg-indigo-600 shadow-sm flex items-center justify-center text-white active:scale-90",children:s.jsx("span",{className:"text-xl font-black leading-none select-none",children:"+"})})]})]}),bue=({show:a,onClose:e,newCustomer:t,setNewCustomer:r,onRegister:n,formatPhoneNumber:i})=>a?s.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-900/60 backdrop-blur-sm flex items-end animate-in fade-in duration-300",children:s.jsxs("div",{className:"w-full bg-white rounded-t-[3rem] p-8 pb-12 shadow-2xl animate-in slide-in-from-bottom-full duration-500",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"  "}),s.jsx("p",{className:"text-xs font-bold text-slate-400 mt-1 uppercase tracking-widest",children:"Quick Registration"})]}),s.jsx("button",{onClick:e,className:"p-3 bg-slate-50 text-slate-400 rounded-2xl",children:s.jsx(Ri,{size:20})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter ml-1",children:" "}),s.jsx("input",{type:"text",className:"w-full h-14 bg-slate-50 border-none rounded-2xl px-5 text-sm font-black focus:ring-2 focus:ring-indigo-500 transition-all text-slate-700",value:t.name,onChange:l=>r({...t,name:l.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter ml-1",children:""}),s.jsx("input",{type:"tel",className:"w-full h-14 bg-slate-50 border-none rounded-2xl px-5 text-sm font-black focus:ring-2 focus:ring-indigo-500 transition-all text-slate-700",value:t.mobile,onChange:l=>r({...t,mobile:i(l.target.value)}),placeholder:"010-0000-0000"})]}),s.jsxs("button",{onClick:n,className:"w-full h-16 bg-indigo-600 text-white rounded-3xl font-black text-lg shadow-xl shadow-indigo-100 active:scale-[0.98] transition-all flex items-center justify-center gap-3 mt-4",children:[s.jsx(KA,{size:20}),"  "]})]})]})}):null,yue=({isOpen:a,onClose:e,isContinuousScan:t,toggleContinuousScan:r,cameraError:n,fileInputRef:i,handleFileScan:l,scannerInputRef:o,scannerValue:c,setScannerValue:d,processQrCode:u})=>(or.useEffect(()=>{a&&o?.current&&setTimeout(()=>o.current.focus(),300)},[a]),a?s.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 flex flex-col items-center justify-start p-6 pt-16 animate-in fade-in duration-500 overflow-y-auto overflow-x-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-900/20 via-slate-950 to-slate-950 pointer-events-none"}),s.jsxs("div",{className:"relative w-full max-w-[300px] aspect-square border-[3px] border-white/10 rounded-[3rem] overflow-hidden bg-black shadow-[0_0_60px_rgba(99,102,241,0.2)] flex items-center justify-center shrink-0 group",children:[s.jsx("div",{id:"reader-event",className:"absolute inset-0 z-0"}),n&&s.jsxs("div",{className:"z-20 flex flex-col items-center gap-5 px-8 py-6 bg-slate-900/90 backdrop-blur-xl text-white rounded-[2rem] text-center mx-4 border border-white/10 shadow-3xl",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-rose-500/20 flex items-center justify-center text-rose-500 mb-2",children:s.jsx("span",{className:"material-symbols-rounded text-3xl",children:"videocam_off"})}),s.jsx("p",{className:"text-[11px] font-black leading-relaxed text-slate-300",children:n}),s.jsxs("button",{onClick:()=>i.current?.click(),className:"w-full py-4 bg-indigo-600 hover:bg-indigo-500 rounded-2xl text-xs font-black shadow-[0_8px_20px_rgba(99,102,241,0.3)] active:scale-95 transition-all flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"photo_camera"}),"  "]}),s.jsx("input",{ref:i,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:l})]}),s.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10",children:[s.jsx("div",{className:"absolute inset-x-0 h-[2px] bg-gradient-to-r from-transparent via-indigo-500 to-transparent shadow-[0_0_20px_rgba(99,102,241,1)] animate-scan",style:{top:"10%"}}),s.jsx("div",{className:"absolute top-10 left-10 w-10 h-10 border-t-[4px] border-l-[4px] border-white shadow-[0_0_15px_rgba(255,255,255,0.4)] rounded-tl-xl"}),s.jsx("div",{className:"absolute top-10 right-10 w-10 h-10 border-t-[4px] border-r-[4px] border-white shadow-[0_0_15px_rgba(255,255,255,0.4)] rounded-tr-xl"}),s.jsx("div",{className:"absolute bottom-10 left-10 w-10 h-10 border-b-[4px] border-l-[4px] border-white shadow-[0_0_15px_rgba(255,255,255,0.4)] rounded-bl-xl"}),s.jsx("div",{className:"absolute bottom-10 right-10 w-10 h-10 border-b-[4px] border-r-[4px] border-white shadow-[0_0_15px_rgba(255,255,255,0.4)] rounded-br-xl"})]})]}),s.jsxs("div",{className:"mt-10 text-center text-white space-y-6 w-full max-w-sm relative z-10",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-2xl font-black tracking-tight bg-gradient-to-br from-white to-slate-400 bg-clip-text text-transparent",children:"   "}),s.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-[0.2em]",children:"Ready to analyze QR codes"})]}),s.jsx("div",{className:"flex justify-center pt-2",children:s.jsxs("button",{onClick:r,className:`group relative h-12 px-8 rounded-2xl flex items-center gap-3 transition-all duration-500 ${t?"bg-indigo-600 shadow-[0_0_30px_rgba(79,70,229,0.4)] border border-indigo-400/50":"bg-white/5 border border-white/10 opacity-60 hover:opacity-100"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${t?"bg-white animate-pulse":"bg-slate-500"}`}),s.jsx("span",{className:`text-xs font-black uppercase tracking-widest ${t?"text-white":"text-slate-400"}`,children:t?"Continuous Mode ON":"Single Scan Mode"}),s.jsx("div",{className:"absolute -inset-1 bg-indigo-500/20 rounded-[1.5rem] blur opacity-0 group-hover:opacity-100 transition-opacity"})]})}),s.jsxs("div",{className:"pt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 px-4 mb-1",children:[s.jsx("div",{className:"h-px flex-1 bg-white/5"}),s.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] whitespace-nowrap",children:"Manual Entry"}),s.jsx("div",{className:"h-px flex-1 bg-white/5"})]}),s.jsxs("div",{className:"relative group/input",children:[s.jsx("input",{ref:o,type:"text",inputMode:"text",className:"w-full h-14 bg-white/[0.03] border border-white/10 rounded-2xl px-6 text-white text-center font-black focus:border-indigo-500/50 focus:bg-white/[0.07] focus:ring-4 focus:ring-indigo-500/10 transition-all outline-none text-[15px] placeholder:text-slate-700 tracking-wider",placeholder:"  ",value:c,onChange:h=>d(h.target.value),onKeyDown:h=>{h.key==="Enter"&&(u(c),h.target.blur())}}),s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-600 group-focus-within/input:text-indigo-400 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"keyboard_return"})})]})]})]}),s.jsx("button",{onClick:e,className:"mt-8 mb-12 w-16 h-16 bg-white/10 hover:bg-white/20 text-white rounded-full flex items-center justify-center transition-all active:scale-90 shrink-0",children:s.jsx(Ri,{size:32})}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                @keyframes scan { 0% { top: 0; } 50% { top: 100%; } 100% { top: 0; } }
                .animate-scan { position: absolute; animation: scan 3s infinite linear; }
                #reader-event video { 
                    object-fit: cover !important;
                    height: 100% !important;
                    width: 100% !important;
                }
            `}})]}):null),wue=({paymentMethod:a,setPaymentMethod:e,memo:t,setMemo:r,totalAmount:n,onCheckout:i,cartLength:l})=>s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-100 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-black text-sm pl-1",children:[s.jsx(YC,{size:16,className:"text-indigo-500"}),s.jsx("span",{children:" "})]}),s.jsx("div",{className:"flex gap-2",children:["","",""].map(o=>s.jsx("button",{onClick:()=>e(o),className:`flex-1 h-12 rounded-xl font-black text-sm transition-all ${a===o?"bg-indigo-600 text-white shadow-md":"bg-slate-50 text-slate-400"}`,children:o},o))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-black text-sm pl-1",children:[s.jsx(xh,{size:16,className:"text-indigo-500"}),s.jsx("span",{children:"  ()"})]}),s.jsx("input",{type:"text",placeholder:"  ,   ",className:"w-full h-12 bg-slate-50 border-none rounded-2xl px-4 text-sm font-bold text-slate-700 placeholder:text-slate-300",value:t,onChange:o=>r(o.target.value)})]})]}),s.jsx("div",{className:"mt-8 mb-12 animate-in fade-in slide-in-from-bottom-4 duration-500",children:s.jsx("div",{className:"bg-white border border-slate-100 p-5 rounded-[2rem] shadow-xl",children:s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("div",{className:"flex-1 flex flex-col justify-center px-4 h-14 bg-slate-50 rounded-[1.5rem]",children:[s.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:"  "}),s.jsxs("span",{className:"text-lg font-black text-indigo-600 leading-none",children:[n.toLocaleString(),""]})]}),s.jsx("button",{onClick:i,disabled:l===0,className:`w-20 h-14 bg-indigo-600 text-white rounded-[1.5rem] flex items-center justify-center shadow-lg shadow-indigo-100 active:scale-[0.95] transition-all ${l===0?"opacity-50":""}`,children:s.jsx(Yi,{size:24})})]})})})]}),_ue=()=>{an();const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState([]),[n,i]=F.useState([]),[l,o]=F.useState(!0),[c,d]=F.useState([]),[u,h]=F.useState(null),[f,p]=F.useState(""),[g,b]=F.useState([]),[w,j]=F.useState(!1),[k,T]=F.useState(!1),[E,I]=F.useState({name:"",mobile:""}),[R,P]=F.useState(""),[H,G]=F.useState(""),[X,U]=F.useState(""),[te,Z]=F.useState(0),[J,B]=F.useState(!1),[W,$]=F.useState(!1),[Q,ne]=F.useState(!1),[re,K]=F.useState(""),[ae,ce]=F.useState({product:"",price:0,qty:1,amount:0}),[de,he]=F.useState(!1),pe=F.useRef(null),Re=F.useRef(null),Te=F.useRef(null),ke=F.useRef(null),[Le,Ne]=F.useState(null),_e=()=>{window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(100)};F.useEffect(()=>{let zt=!0;if(W&&!io.isNativePlatform()){const je=setTimeout(async()=>{if(!(!zt||!document.getElementById("reader-event")))try{if(Re.current)try{Re.current.isScanning&&await Re.current.stop()}catch(Ot){console.warn("Cleanup failed",Ot)}const it=new bh("reader-event");Re.current=it;const Ye={fps:15,qrbox:{width:250,height:250},aspectRatio:1,disableFlip:!1};try{await it.start({facingMode:"environment"},Ye,Ot=>{zt&&(Ne(null),Bt(Ot))},Ot=>{})}catch(Ot){console.log("Back camera failed, trying front",Ot),await it.start({facingMode:"user"},Ye,st=>{zt&&(Ne(null),Bt(st))},()=>{})}}catch(it){console.error("Scanner initialization failed:",it),!window.isSecureContext&&window.location.hostname!=="localhost"?Ne("  (HTTPS) . WiFi(HTTP)       ."):Ne(`   : ${it.message||"  "}`)}},500);return()=>{if(zt=!1,clearTimeout(je),Re.current){const He=Re.current;He.getState&&He.getState()===2?He.stop().catch(it=>console.error("Stop failed",it)):He.isScanning&&He.stop().catch(it=>console.error("Stop failed",it))}}}},[W]);const Oe=async zt=>{const je=zt.target.files?.[0];if(je)try{const it=await new bh("reader-event").scanFileV2(je,!1);Bt(it.decodedText),$(!1)}catch{alert("    .  .")}},De={product:"",qty:1,price:"",amount:0},Ge=async()=>{if(f.trim()){j(!0);try{const je=(await ht("search_events_by_name",{name:f})||[]).map(He=>({...He,_type:"event"}));b(je),je.length}catch(zt){console.error(zt)}finally{j(!1)}}},Ee=zt=>{zt._type==="event"?(U(zt.event_id),p(""),b([]),a(" ",`[${zt.event_name}]  .`)):(h(zt),p(""),b([]))},rt=async()=>{if(!E.name||!E.mobile)return a("","  .");try{await ht("create_customer",{name:E.name,mobile:kn(E.mobile),joinDate:new Date().toISOString().split("T")[0]});const zt=await ht("search_customers_by_name",{name:E.name});zt&&zt.length>0&&(h(zt[0]),T(!1),a(""," ."))}catch(zt){a("",`  : ${zt}`)}},dt=()=>{d([]),h(null),U(""),Z(0),ce(De)},wt=zt=>(typeof zt!="number"&&(zt=parseFloat(String(zt).replace(/[^0-9.-]/g,""))||0),zt.toLocaleString("ko-KR"));F.useEffect(()=>{const zt=localStorage.getItem("event_cart"),je=localStorage.getItem("event_id"),He=localStorage.getItem("event_discount");zt&&d(JSON.parse(zt)),je&&U(je),He&&Z(parseInt(He)),vt()},[]),F.useEffect(()=>{localStorage.setItem("event_cart",JSON.stringify(c))},[c]),F.useEffect(()=>{localStorage.setItem("event_id",X)},[X]),F.useEffect(()=>{localStorage.setItem("event_discount",te.toString())},[te]);const vt=async()=>{try{const[zt,je]=await Promise.all([ht("get_product_list"),ht("get_all_events")]),He=(zt||[]).filter(it=>(!it.item_type||it.item_type==="product")&&it.status!=="");r(He),i(je||[])}catch(zt){console.error(zt),a("  ","   .")}finally{o(!1)}},$e=zt=>{const{name:je,value:He}=zt.target;let it={...ae,[je]:He};if(je==="product"){const st=t.find(Jt=>Jt.product_name===He);st&&(it.price=st.unit_price)}const Ye=Number(it.qty)||0,Ot=Number(String(it.price).replace(/[^0-9]/g,""))||0;it.amount=Ye*Ot,ce(it)},na=()=>{if(!X)return a(" ","     .");if(!ae.product)return a(" ","   .");if(Number(ae.qty)<=0)return a(" "," 1  .");const zt=t.find(it=>it.product_name===ae.product);if(!zt)return;const je=c.find(it=>it.product_id===zt.product_id),He=Number(String(ae.price).replace(/[^0-9]/g,""));d(je?c.map(it=>it.product_id===zt.product_id?{...it,quantity:it.quantity+Number(ae.qty),unit_price:He}:it):[...c,{...zt,quantity:Number(ae.qty),unit_price:He}]),ce(De)},xt=async()=>{if(io.isNativePlatform()){try{const zt=await Q_();zt.content&&Bt(zt.content)}catch(zt){console.error("Native scan error",zt)}return}Ne(null),$(!0),K("")},Bt=async zt=>{if(!zt)return;const je=zt.trim();if(B(!0),!Q&&Re.current)try{((Re.current.getState?Re.current.getState():0)===2||Re.current.isScanning)&&await Re.current.stop()}catch(Ye){console.warn("Stop on success failed",Ye)}const He=je.split("|").map(Ye=>Ye.trim());let it=null;if(He[0]==="PRODUCT"&&He[1]){const Ye=parseInt(He[1]),Ot=He[3],st=He[4]==="NA"||!He[4]?"":He[4];if(it=t.find(Jt=>Number(Jt.product_id)===Ye),!it||it&&Ot&&it.product_name!==Ot){const Jt=t.find(Ar=>Ar.product_name===Ot&&(st?Ar.specification===st:!0));Jt&&(it=Jt)}}else if(He[0]==="HARVEST"&&He[3]){const Ye=He[3],Ot=He[4]||"";if(it=t.find(st=>st.product_name===Ye&&(st.specification===Ot||st.specification&&Ot&&st.specification.includes(Ot))),!it){const st=t.filter(Jt=>Jt.product_name===Ye);if(st.length===1)it=st[0];else if(st.length>1){a(" ",`[${Ye}]    .    .`),B(!1);return}}}else if(je.includes("ID:")){const Ye=je.split("ID:").pop().trim(),Ot=parseInt(Ye.replace(/[^0-9]/g,""));it=t.find(st=>Number(st.product_id)===Ot)}else if(it=t.find(Ye=>Ye.product_code&&Ye.product_code===je||Ye.product_name===je||`${Ye.product_name} ${Ye.specification||""}`.trim()===je||`${Ye.product_name}(${Ye.specification||""})`.trim()===je),!it&&/^\d+$/.test(je)){const Ye=parseInt(je);it=t.find(Ot=>Number(Ot.product_id)===Ye)}if(B(!1),it)if(_e(),Q){if(!X){a(" ","      ."),K("");return}d(Ye=>Ye.find(st=>st.product_id===it.product_id)?Ye.map(st=>st.product_id===it.product_id?{...st,quantity:st.quantity+1}:st):[...Ye,{...it,quantity:1,unit_price:it.unit_price}]),K("")}else $e({target:{name:"product",value:it.product_name}}),$(!1),setTimeout(()=>{ke.current?.focus(),ke.current?.select()},300);else a(" ",`[${je}]    .`)},_a=(zt,je)=>{d(c.map(He=>{if(He.product_id===zt){const it=Math.max(0,He.quantity+je);return{...He,quantity:it}}return He}).filter(He=>He.quantity>0))},Nt=c.reduce((zt,je)=>zt+je.unit_price*je.quantity,0),La=Math.round(Nt*(te/100)),oa=Nt-La,Sa=async()=>{if(!X){a(" ","     .");return}if(c.length===0){a(" ","  .");return}const zt=n.find(He=>He.event_id===X);if(await e("  ",`${zt?"["+zt.event_name+"] ":""} ${oa.toLocaleString()}    PC ?`))try{const He=c.map(Ye=>({salesId:null,customerId:u?u.customer_id:"EVENT_GUEST",productName:Ye.product_name,specification:Ye.specification||null,unitPrice:Number(Ye.unit_price),quantity:Number(Ye.quantity),totalAmount:Math.round(Ye.unit_price*Ye.quantity*(1-te/100)),status:"",memo:`[:${zt?.event_name||""}] ${R?":"+R:""} / :${te}% / :${H}`,orderDateStr:new Date().toISOString().split("T")[0],paidAmount:Math.round(Ye.unit_price*Ye.quantity*(1-te/100)),paymentStatus:"",discountRate:te,isDirty:"true"})),it=await ht("save_general_sales_batch",{items:He,deleted_ids:[]});if(it&&it.success)a(" ","     ."),dt();else throw new Error(it?.error||"Unknown error")}catch(He){console.error(He),a(" ","    .   .")}};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden",children:[s.jsxs("div",{className:"bg-white px-5 pt-10 pb-4 border-b border-slate-100 shrink-0 sticky top-0 z-50",children:[s.jsxs("div",{className:"flex justify-start items-center gap-2 mb-4",children:[s.jsx("h1",{className:"text-2xl font-black text-slate-900 tracking-tight",children:" "}),s.jsx("div",{className:"flex-1 flex justify-end",children:s.jsx("button",{onClick:dt,className:"p-2 bg-slate-50 text-slate-400 rounded-xl hover:text-rose-500 transition-colors",children:s.jsx(no,{size:18})})})]}),!u&&!X?s.jsx(fue,{searchQuery:f,setSearchQuery:p,handleSearch:Ge,searchResults:g,handleSelectResult:Ee,isSearching:w,setShowRegisterForm:T}):s.jsx(pue,{customer:u,onClearCustomer:()=>h(null),events:n,selectedEventId:X,setSelectedEventId:U})]}),s.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden px-5 pt-4 pb-20 space-y-6",children:(u||X)&&s.jsxs(s.Fragment,{children:[s.jsx(xue,{isScanning:J,onQrScan:xt,discountRate:te,setDiscountRate:Z}),s.jsx(mue,{products:t,onSelectProduct:zt=>$e({target:{name:"product",value:zt}}),formatCurrency:wt}),!X&&s.jsxs("div",{className:"bg-amber-50 border border-amber-100 p-4 rounded-2xl flex items-center gap-3 animate-pulse",children:[s.jsx("div",{className:"w-10 h-10 bg-amber-500 rounded-xl flex items-center justify-center text-white shrink-0",children:s.jsx($H,{size:20})}),s.jsxs("div",{className:"text-sm font-black text-amber-900 leading-tight",children:["     ",s.jsx("br",{}),"  ."]})]}),s.jsxs("div",{className:"flex items-center justify-between px-2",children:[s.jsxs("h2",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:["  (",c.length,")"]}),s.jsx("button",{onClick:()=>he(!de),className:`text-[11px] font-black h-8 px-4 rounded-full transition-all ${de?"bg-indigo-600 text-white shadow-lg":"bg-white border border-slate-100 text-indigo-600"}`,children:de?"":" "})]}),s.jsx(gue,{show:de,products:t,inputState:ae,handleInputChange:$e,onAdd:na,qtyInputRef:ke,formatCurrency:wt,selectedEventId:X}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between px-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-400 font-black text-xs uppercase tracking-widest",children:[s.jsx(mx,{size:12}),s.jsxs("span",{children:["  (",c.length,")"]})]}),s.jsxs("button",{onClick:()=>{c.length>0&&d([])},disabled:c.length===0,className:`flex items-center gap-1 font-black text-xs px-2 py-1.5 rounded-lg transition-all active:scale-95 ${c.length>0?"text-rose-500 bg-rose-50 border border-rose-100 shadow-sm":"text-slate-300 bg-slate-50 opacity-50"}`,children:[s.jsx(Cs,{size:12}),s.jsx("span",{children:" "})]})]}),c.length===0?s.jsxs("div",{className:"bg-white rounded-3xl p-10 flex flex-col items-center justify-center text-slate-300 border border-slate-100 border-dashed",children:[s.jsx(M0,{size:40,className:"mb-2 opacity-20"}),s.jsx("span",{className:"text-sm font-bold text-center px-4",children:" QR    "})]}):s.jsx("div",{className:"space-y-3",children:c.map(zt=>s.jsx(vue,{item:zt,discountRate:te,updateQuantity:_a},zt.product_id))})]}),s.jsx(wue,{paymentMethod:H,setPaymentMethod:G,memo:R,setMemo:P,totalAmount:oa,onCheckout:Sa,cartLength:c.length})]})}),s.jsx(bue,{show:k,onClose:()=>T(!1),newCustomer:E,setNewCustomer:I,onRegister:rt,formatPhoneNumber:kn}),s.jsx(yue,{isOpen:W,onClose:()=>$(!1),isContinuousScan:Q,toggleContinuousScan:()=>ne(!Q),cameraError:Le,fileInputRef:Te,handleFileScan:Oe,scannerInputRef:pe,scannerValue:re,setScannerValue:K,processQrCode:Bt})]})},aG=(a,e)=>{const[t,r]=F.useState(ev(new Date)),[n,i]=F.useState(null),[l,o]=F.useState([]),[c,d]=F.useState([]),[u,h]=F.useState([]),[f,p]=F.useState([]),[g,b]=F.useState(null),[w,j]=F.useState(!1),[k,T]=F.useState(!1),[E,I]=F.useState(null),[R,P]=F.useState(!1),[H,G]=F.useState(!1),[X,U]=F.useState(""),[te,Z]=F.useState(""),J={product:"",spec:"",qty:1,price:"",discountRate:0,amount:0,shipType:"basic",shipZip:"",shipAddr1:"",shipAddr2:"",shipName:"",shipMobile:"",shipMemo:"",isSaveAddr:!0},[B,W]=F.useState(J),$=F.useCallback((vt,$e,na)=>{const xt=Number(vt)||0,Bt=typeof $e=="string"?Yu($e):Number($e)||0,_a=Number(na)||0;let Nt=xt*Bt*(1-_a/100);return Nt=Math.floor(Nt/10)*10,Nt},[]),Q=F.useCallback(async()=>{try{const vt=await ht("get_company_info");I(vt)}catch(vt){console.error(vt)}},[]),ne=F.useCallback(async()=>{try{const $e=(await ht("get_product_list")||[]).filter(na=>(!na.item_type||na.item_type==="product")&&na.status!=="");d($e)}catch(vt){console.error(vt)}},[]),re=F.useCallback(async(vt,$e)=>{try{const xt=(await ht("get_customer_sales_on_date",{customerId:String(vt),date:$e})).map(Bt=>({id:Bt.sales_id,tempId:Bt.sales_id,product:Bt.product_name,spec:Bt.specification,qty:Bt.quantity,price:Bt.unit_price,discountRate:Bt.discount_rate||0,amount:Bt.total_amount,supplyValue:Bt.supply_value,vatAmount:Bt.vat_amount,status:Bt.status,shipName:Bt.shipping_name||"",shipZip:Bt.shipping_zip_code||"",shipAddr1:Bt.shipping_address_primary||"",shipAddr2:Bt.shipping_address_detail||"",shipMobile:Bt.shipping_mobile_number||"",shipMemo:Bt.memo||"",isDirty:!1}));h(xt.reverse()),p([]),T(!1)}catch(na){console.error(na)}},[]),[K,ae]=F.useState(null);F.useEffect(()=>{const vt=localStorage.getItem("mycelium_draft_reception");if(vt)try{const $e=JSON.parse(vt);($e.salesRows?.length>0||$e.customer)&&ae($e)}catch($e){console.error($e)}},[]);const ce=()=>{K&&(i(K.customer),r(K.orderDate||ev(new Date)),h(K.salesRows||[]),p(K.deletedSalesIds||[]),W(vt=>({...vt,...K.inputState})),T(!0),P(!0),ae(null))},de=()=>{he(),ae(null)};F.useEffect(()=>{if(k){const vt={customer:n,orderDate:t,salesRows:u,deletedSalesIds:f,inputState:B};localStorage.setItem("mycelium_draft_reception",JSON.stringify(vt))}},[n,t,u,f,B,k]);const he=()=>{localStorage.removeItem("mycelium_draft_reception"),P(!1)},pe=async vt=>{i(vt);try{const $e=await ht("get_customer_addresses",{customerId:vt.customer_id});o($e||[]);const na=$e.find(xt=>xt.is_default)||$e[0];na?Re(na,vt):Te(vt)}catch{Te(vt)}},Re=(vt,$e)=>{W(na=>({...na,shipType:`addr_${vt.address_id}`,shipZip:vt.zip_code||"",shipAddr1:vt.address_primary||"",shipAddr2:vt.address_detail||"",shipName:vt.recipient_name||$e.customer_name,shipMobile:vt.mobile_number||$e.mobile_number||"",shipMemo:vt.shipping_memo||""}))},Te=vt=>{W($e=>({...$e,shipType:"basic",shipZip:vt.zip_code||"",shipAddr1:vt.address_primary||"",shipAddr2:vt.address_detail||"",shipName:vt.customer_name,shipMobile:vt.mobile_number||"",shipMemo:""}))},ke=vt=>{const{name:$e,value:na,type:xt,checked:Bt}=vt.target;W(_a=>{let Nt={..._a,[$e]:xt==="checkbox"?Bt:na};if($e==="product"){const La=c.find(oa=>oa.product_name===na);La&&(Nt.spec=La.specification||"",Nt.price=La.unit_price)}if(["product","qty","price","discountRate"].includes($e)&&(Nt.amount=$(Nt.qty,Nt.price,Nt.discountRate)),$e==="shipType"){if(na==="new")Nt.shipZip="",Nt.shipAddr1="",Nt.shipAddr2="",Nt.shipName="",Nt.shipMobile="",Nt.shipMemo="";else if(na==="basic"&&n)Nt.shipZip=n.zip_code||"",Nt.shipAddr1=n.address_primary||"",Nt.shipAddr2=n.address_detail||"",Nt.shipName=n.customer_name,Nt.shipMobile=n.mobile_number||"",Nt.shipMemo="";else if(na.startsWith("addr_")){const La=Number(na.split("_")[1]),oa=l.find(Sa=>Sa.address_id===La);oa&&(Nt.shipZip=oa.zip_code,Nt.shipAddr1=oa.address_primary,Nt.shipAddr2=oa.address_detail,Nt.shipName=oa.recipient_name,Nt.shipMobile=oa.mobile_number,Nt.shipMemo=oa.shipping_memo||"")}}return $e==="shipMobile"&&(Nt.shipMobile=kn(na)),Nt}),T(!0)},Le=()=>{if(!n){a("","  .");return}if(!B.product){a(""," .");return}let vt="";g&&(vt=B.status||"");const $e={...B,tempId:g||Date.now()+Math.random(),status:vt,isDirty:!0};g?(h(na=>na.map(xt=>xt.tempId===g?$e:xt)),b(null)):h(na=>[$e,...na]),W(na=>({...na,product:"",spec:"",qty:1,price:"",discountRate:0,amount:0})),T(!0)},Ne=vt=>{b(vt.tempId),W({...vt,shipType:"new"})},_e=vt=>{vt.id&&p($e=>[...$e,String(vt.id)]),h($e=>$e.filter(na=>na.tempId!==vt.tempId)),T(!0)},Oe=(vt,$e)=>{h(na=>na.map(xt=>{if(xt.tempId===vt){const Bt=Math.max(1,Number(xt.qty)+$e),_a=Number(xt.price)||0,Nt=Number(xt.discountRate)||0,La=$(Bt,_a,Nt);return{...xt,qty:Bt,amount:La,isDirty:!0}}return xt})),T(!0)},De=async()=>{if(!(u.length===0&&f.length===0)&&await e(" ","   ?")){j(!0);try{const vt=u.map($e=>({salesId:$e.id?String($e.id):null,customerId:String(n.customer_id),productName:$e.product,specification:$e.spec||null,unitPrice:Number(String($e.price).replace(/[^0-9]/g,"")),quantity:Number($e.qty),totalAmount:Number($e.amount),status:$e.status,memo:$e.shipMemo||te||null,orderDateStr:t,shippingName:$e.shipName||null,shippingZipCode:$e.shipZip||null,shippingAddressPrimary:$e.shipAddr1||null,shippingAddressDetail:$e.shipAddr2||null,shippingMobileNumber:$e.shipMobile||null,paidAmount:X===""||X===""||X===""?Number($e.amount):0,paymentStatus:"",paymentMethod:X,discountRate:Number($e.discountRate),isDirty:$e.isDirty?"true":"false"}));await ht("save_general_sales_batch",{items:vt,deleted_ids:f}),await a(""," ."),he(),re(n.customer_id,t)}catch(vt){a("",`   : ${vt}`)}finally{j(!1)}}},Ge=async()=>{k&&!await e("","   .  ?")||(i(null),h([]),W(J),T(!1),he())},Ee=F.useMemo(()=>{const vt=u.length,$e=u.reduce((_a,Nt)=>_a+Number(Nt.qty),0),na=u.reduce((_a,Nt)=>_a+Number(Nt.amount),0),xt=u.reduce((_a,Nt)=>_a+(Nt.supplyValue||Nt.amount),0),Bt=u.reduce((_a,Nt)=>_a+(Nt.vatAmount||0),0);return{count:vt,qty:$e,amount:na,supply:xt,vat:Bt}},[u]);return{orderDate:t,setOrderDate:r,customer:n,setCustomer:i,addresses:l,products:c,salesRows:u,setSalesRows:h,editingTempId:g,isProcessing:w,isDirty:k,setIsDirty:T,companyInfo:E,inputState:B,setInputState:W,loadProducts:ne,loadCompanyInfo:Q,loadSalesHistory:re,selectCustomer:pe,handleInputChange:ke,handleAddRow:Le,handleEditRow:Ne,handleDeleteRow:_e,handleSaveAll:De,handleReset:Ge,handlePrintStatement:()=>{if(!n){a(""," .");return}if(u.length===0){a("","  .");return}G(!0)},closeStatement:()=>G(!1),showStatement:H,handleCsvUpload:async vt=>{const $e=vt.target.files[0];if(!$e)return;const na=await $e.arrayBuffer();let xt="";try{xt=new TextDecoder("utf-8",{fatal:!0}).decode(na)}catch{xt=new TextDecoder("euc-kr").decode(na)}const Bt=oa=>{const Sa=[];let zt="",je=!1;for(let He=0;He<oa.length;He++){const it=oa[He];it==='"'&&oa[He+1]==='"'?(zt+='"',He++):it==='"'?je=!je:it===","&&!je?(Sa.push(zt.trim()),zt=""):zt+=it}return Sa.push(zt.trim()),Sa},_a=xt.split(/\r?\n/).filter(oa=>oa.trim());if(_a.length===0)return;const Nt=_a[0].includes("")||_a[0].includes("")?1:0,La=_a.slice(Nt).map(oa=>{const Sa=Bt(oa);return Sa.length<2||!Sa[0]?null:{...J,tempId:Date.now()+Math.random(),isDirty:!0,status:"",amount:0,shipName:Sa[0],shipMobile:kn(Sa[1]),shipZip:Sa[2]||"",shipAddr1:Sa[3]||"",shipAddr2:Sa[4]||"",product:Sa[5]||""}}).filter(oa=>oa!==null);h(oa=>[...La,...oa]),T(!0),a("",`${La.length}  .`),vt.target.value=""},summary:Ee,isDraftRestored:R,tempDraft:K,handleRestoreDraft:ce,handleDiscardDraft:de,paymentMethod:X,setPaymentMethod:U,memo:te,setMemo:Z,updateRowQty:Oe}},Nue=()=>{an();const{showAlert:a,showConfirm:e}=wa(),{orderDate:t,setOrderDate:r,customer:n,setCustomer:i,products:l,salesRows:o,isProcessing:c,inputState:d,loadProducts:u,loadSalesHistory:h,selectCustomer:f,handleInputChange:p,handleAddRow:g,handleDeleteRow:b,handleSaveAll:w,handleReset:j,summary:k,paymentMethod:T,setPaymentMethod:E,memo:I,setMemo:R,updateRowQty:P}=aG(a,e),[H,G]=F.useState(!1),[X,U]=F.useState(!1),[te,Z]=F.useState(!1),[J,B]=F.useState(""),W=F.useRef(null),$=F.useRef(null),Q=F.useRef(null),ne=F.useRef(null),[re,K]=F.useState(null),ae=()=>{window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(100)};F.useEffect(()=>{let xt=!0;if(X&&!io.isNativePlatform()){const Bt=setTimeout(async()=>{if(!(!xt||!document.getElementById("reader")))try{if($.current)try{$.current.isScanning&&await $.current.stop()}catch(oa){console.warn("Cleanup of old scanner failed",oa)}const Nt=new bh("reader");$.current=Nt;const La={fps:15,qrbox:{width:250,height:250},aspectRatio:1,disableFlip:!1};try{await Nt.start({facingMode:"environment"},La,oa=>{xt&&(K(null),na(oa))},oa=>{})}catch{await Nt.start({facingMode:"user"},La,Sa=>{xt&&(K(null),na(Sa))},()=>{})}}catch(Nt){console.error("Scanner initialization failed:",Nt),!window.isSecureContext&&window.location.hostname!=="localhost"?K("  (HTTPS) . WiFi(HTTP)       ."):K(`   : ${Nt.message||"  "}`)}},500);return()=>{if(xt=!1,clearTimeout(Bt),$.current){const _a=$.current;_a.getState&&_a.getState()===2?_a.stop().catch(Nt=>console.error("Stop failed",Nt)):_a.isScanning&&_a.stop().catch(Nt=>console.error("Stop failed",Nt))}}}},[X]);const ce=async xt=>{const Bt=xt.target.files?.[0];if(Bt)try{const Nt=await new bh("reader").scanFileV2(Bt,!1);na(Nt.decodedText),U(!1)}catch{alert("    .  .")}},[de,he]=F.useState(""),[pe,Re]=F.useState([]),[Te,ke]=F.useState(!1),[Le,Ne]=F.useState(!0),[_e,Oe]=F.useState(!1),[De,Ge]=F.useState({name:"",mobile:""});F.useEffect(()=>{u()},[u]),F.useEffect(()=>{n&&t&&h(n.customer_id,t)},[n,t,h]);const Ee=async()=>{if(de.trim()){G(!0);try{const xt=await ht("search_customers_by_name",{name:de});Re(xt||[]),xt?.length===0&&Ge(Bt=>({...Bt,name:de}))}catch(xt){console.error(xt)}finally{G(!1)}}},rt=xt=>{f(xt),he(""),Re([])},dt=async()=>{if(!De.name||!De.mobile)return a("","  .");try{await ht("create_customer",{name:De.name,mobile:kn(De.mobile),joinDate:new Date().toISOString().split("T")[0]});const xt=await ht("search_customers_by_name",{name:De.name});xt&&xt.length>0&&(rt(xt[0]),ke(!1),a(""," ."))}catch(xt){a("",`  : ${xt}`)}},wt=xt=>{Ge({...De,mobile:kn(xt.target.value)})},vt=()=>{if(!d.product)return a(""," .");g(),Ne(!1)},$e=async()=>{if(io.isNativePlatform()){try{const xt=await Q_();xt.content&&na(xt.content)}catch(xt){console.error("Native scan error",xt)}return}K(null),U(!0),B("")},na=async xt=>{if(!xt)return;const Bt=xt.trim(),_a=Bt.split("|").map(La=>La.trim());let Nt=null;if(_a[0]==="PRODUCT"&&_a[1]){const La=parseInt(_a[1]);Nt=l.find(oa=>Number(oa.product_id)===La)}else if(_a[0]==="HARVEST"&&_a[3]){const La=_a[3];Nt=l.find(oa=>oa.product_name===La)}else Nt=l.find(La=>La.product_code&&La.product_code===Bt||La.product_name===Bt);if(Nt)if(ae(),te)n&&l.length>0?(g({product:Nt.product_name,qty:1,price:Nt.unit_price,amount:Nt.unit_price}),B("")):(a("","        ."),p({target:{name:"product",value:Nt.product_name}}),U(!1));else{if(p({target:{name:"product",value:Nt.product_name}}),$.current)try{(($.current.getState?$.current.getState():0)===2||$.current.isScanning)&&await $.current.stop()}catch(La){console.warn("Stop on success failed",La)}a(" ",`[${Nt.product_name}]  .`),U(!1),setTimeout(()=>{ne.current?.focus(),ne.current?.select()},300)}else a(" ","   .")};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden",children:[s.jsxs("div",{className:"bg-white px-5 pt-10 pb-4 border-b border-slate-100 shrink-0 sticky top-0 z-50",children:[s.jsxs("div",{className:"flex justify-start items-center gap-2 mb-4",children:[s.jsx("h1",{className:"text-2xl font-black text-slate-900 tracking-tight",children:" "}),s.jsx("div",{className:"flex-1 flex justify-end",children:s.jsx("button",{onClick:j,className:"p-2 bg-slate-50 text-slate-400 rounded-xl hover:text-rose-500 transition-colors",children:s.jsx(no,{size:18})})})]}),n?s.jsxs("div",{className:"flex items-center gap-4 bg-indigo-50 p-4 rounded-3xl border border-indigo-100",children:[s.jsx("div",{className:"w-12 h-12 bg-indigo-600 text-white rounded-2xl flex items-center justify-center font-black text-lg",children:n.customer_name[0]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-black text-slate-900",children:n.customer_name}),s.jsx("span",{className:"bg-white text-indigo-600 px-2 py-0.5 rounded-full text-[9px] font-black border border-indigo-200 uppercase tracking-tighter",children:"VIP CUSTOMER"})]}),s.jsx("div",{className:"text-[10px] font-bold text-slate-500 mt-0.5",children:n.mobile_number})]}),s.jsx("button",{onClick:()=>i(null),className:"p-2 text-slate-300 hover:text-rose-500 transition-colors",children:s.jsx(Ri,{size:18})})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"   ",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl text-sm font-bold focus:ring-2 focus:ring-indigo-500 transition-all",value:de,onChange:xt=>he(xt.target.value),onKeyPress:xt=>xt.key==="Enter"&&Ee()}),s.jsx("button",{onClick:Ee,className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 px-4 bg-indigo-600 text-white rounded-xl text-xs font-black shadow-lg shadow-indigo-100 whitespace-nowrap",children:""})]}),pe.length>0&&s.jsx("div",{className:"bg-white border border-slate-100 rounded-2xl shadow-xl max-h-48 overflow-auto animate-in slide-in-from-top-2",children:pe.map(xt=>s.jsx("button",{onClick:()=>rt(xt),className:"w-full px-4 py-3 text-left border-b border-slate-50 last:border-0 hover:bg-slate-50 active:bg-slate-100 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("div",{className:"text-sm font-black text-slate-800 whitespace-nowrap",children:xt.customer_name}),s.jsxs("div",{className:"text-[10px] font-bold text-slate-400 truncate flex-1 text-right",children:[xt.mobile_number," | ",xt.address_primary||" "]})]})},xt.customer_id))}),de&&pe.length===0&&!H&&s.jsxs("button",{onClick:()=>ke(!0),className:"w-full h-12 border-2 border-dashed border-slate-200 rounded-2xl flex items-center justify-center gap-2 text-slate-400 hover:text-indigo-600 hover:border-indigo-200 transition-all font-bold text-sm",children:[s.jsx(KA,{size:18}),s.jsxs("span",{children:['"',de,'"   ']})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden px-5 pt-4 pb-20 space-y-4",children:[n&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white p-4 rounded-[2rem] border border-slate-100 shadow-sm flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2.5 bg-indigo-50 text-indigo-500 rounded-2xl",children:s.jsx(Eo,{size:18})}),s.jsx("span",{className:"text-sm font-bold text-slate-600",children:" "})]}),s.jsx("input",{type:"date",className:"bg-transparent border-none text-right font-black text-slate-900 focus:ring-0 text-sm w-40",value:t,onChange:xt=>r(xt.target.value)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("button",{onClick:$e,className:"bg-white h-20 rounded-3xl shadow-sm border border-slate-100 flex flex-col items-center justify-center gap-1 text-slate-600 active:scale-95 transition-all",children:[s.jsx(M0,{size:24,className:"text-indigo-500"}),s.jsx("span",{className:"text-[11px] font-black",children:" QR "})]}),s.jsxs("div",{className:"bg-white h-20 rounded-3xl shadow-sm border border-slate-100 flex flex-col items-center justify-center gap-1",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter",children:" "}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>p({target:{name:"discountRate",value:Math.max(0,(Number(d.discountRate)||0)-1)}}),className:"w-8 h-8 flex items-center justify-center bg-slate-50 rounded-lg text-rose-500 active:scale-95 transition-all",children:s.jsx("span",{className:"text-xl font-black leading-none select-none",children:"-"})}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"number",name:"discountRate",className:"w-14 text-center bg-transparent border-none text-xl font-black text-rose-500 p-0 focus:ring-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",value:d.discountRate||0,onChange:p}),s.jsx(VH,{size:14,className:"text-rose-500",strokeWidth:3})]}),s.jsx("button",{onClick:()=>p({target:{name:"discountRate",value:Math.min(100,(Number(d.discountRate)||0)+1)}}),className:"w-8 h-8 flex items-center justify-center bg-rose-500 rounded-lg text-white active:scale-95 transition-all shadow-sm shadow-rose-100",children:s.jsx("span",{className:"text-xl font-black leading-none select-none",children:"+"})})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-400 font-black text-xs uppercase tracking-widest pl-1 mt-2",children:[s.jsx(kl,{size:12,className:"text-indigo-500"}),s.jsx("span",{children:"  "})]}),s.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:l.map(xt=>s.jsxs("button",{onClick:()=>{p({target:{name:"product",value:xt.product_name}})},className:"bg-white px-5 py-3 rounded-2xl shadow-sm border border-slate-100 whitespace-nowrap active:scale-95 transition-all flex flex-col items-center min-w-[120px] max-w-[200px] shrink-0",children:[s.jsx("div",{className:"text-sm font-black text-slate-700 w-full truncate text-center",children:xt.product_name}),xt.specification&&s.jsx("div",{className:"text-[10px] text-slate-400 font-bold mb-1",children:xt.specification}),s.jsxs("div",{className:"text-[10px] text-indigo-500 font-black",children:[Fe(xt.unit_price),""]})]},xt.product_id))})]}),s.jsxs("div",{className:"flex items-center justify-between px-2",children:[s.jsxs("h2",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:["  (",o.length,")"]}),s.jsx("button",{onClick:()=>Ne(!Le),className:`text-[11px] font-black h-8 px-4 rounded-full transition-all ${Le?"bg-indigo-600 text-white shadow-lg":"bg-white border border-slate-100 text-indigo-600"}`,children:Le?"":" "})]}),Le&&s.jsxs("div",{className:"bg-white p-6 rounded-[2.5rem] border border-slate-100 shadow-xl space-y-5 animate-in slide-in-from-top-4 duration-300",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter ml-1 mb-1.5 block",children:" "}),s.jsxs("select",{name:"product",className:"w-full h-12 bg-slate-50 border-none rounded-2xl text-[11px] font-black focus:ring-2 focus:ring-indigo-500 transition-all appearance-none pr-10",value:d.product,onChange:p,children:[s.jsx("option",{value:"",className:"text-[11px]",children:" "}),l.map(xt=>s.jsxs("option",{value:xt.product_name,className:"text-[11px]",children:[xt.product_name," (",xt.specification||" ",") - ",Fe(xt.unit_price),""]},xt.product_id))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter ml-1 mb-1.5 block",children:""}),s.jsx("input",{name:"price",className:"w-full h-12 bg-slate-50 border-none rounded-2xl text-sm font-black focus:ring-2 focus:ring-indigo-500 transition-all text-right",value:Fe(d.price),onChange:xt=>p({target:{name:"price",value:xt.target.value.replace(/[^0-9]/g,"")}}),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter ml-1 mb-1.5 block",children:""}),s.jsxs("div",{className:"h-12 bg-slate-50 rounded-2xl flex items-center px-1 border border-slate-100 overflow-hidden",children:[s.jsx("button",{type:"button",onClick:()=>p({target:{name:"qty",value:Math.max(1,Number(d.qty)-1)}}),className:"w-10 h-10 shrink-0 flex items-center justify-center bg-white rounded-xl shadow-sm border border-slate-200 text-slate-700 active:scale-90 transition-all",children:s.jsx("span",{className:"text-2xl font-black leading-none select-none",children:"-"})}),s.jsx("input",{ref:ne,type:"number",name:"qty",className:"flex-1 w-full bg-transparent border-none text-center font-black text-lg text-slate-800 focus:ring-0 p-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",value:d.qty,onChange:p,inputMode:"numeric"}),s.jsx("button",{type:"button",onClick:()=>p({target:{name:"qty",value:Number(d.qty)+1}}),className:"w-10 h-10 shrink-0 flex items-center justify-center bg-indigo-600 rounded-xl shadow-sm text-white active:scale-90 transition-all",children:s.jsx("span",{className:"text-2xl font-black leading-none select-none",children:"+"})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter ml-1 mb-1.5 block",children:" ( )"}),s.jsxs("div",{className:"h-12 bg-indigo-50/50 rounded-2xl flex items-center px-4 justify-between border border-indigo-100/50",children:[s.jsx(YC,{size:18,className:"text-indigo-300"}),s.jsxs("span",{className:"text-lg font-black text-indigo-600",children:[Fe(d.amount),""]})]})]}),s.jsxs("button",{onClick:vt,className:"w-full h-14 bg-indigo-600 text-white rounded-2xl font-black shadow-lg shadow-indigo-100 flex items-center justify-center gap-3 active:scale-[0.98] transition-all",children:[s.jsx(kl,{size:20})," "]})]}),s.jsxs("div",{className:"space-y-3",children:[o.map(xt=>s.jsxs("div",{className:"bg-white px-5 py-3 rounded-[1.5rem] border border-slate-100 shadow-sm flex items-center gap-4 animate-in fade-in slide-in-from-left-2 transition-all",children:[s.jsx("div",{className:"w-10 h-10 bg-slate-50 text-slate-400 rounded-xl flex items-center justify-center shrink-0",children:s.jsx(_c,{size:20})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-black text-slate-800",children:xt.product}),s.jsxs("div",{className:"text-[10px] font-bold text-slate-400 mt-1",children:[Fe(xt.price),"  ",xt.qty,""]})]}),s.jsxs("div",{className:"text-right flex flex-col items-end gap-1",children:[s.jsxs("div",{className:"text-sm font-black text-indigo-600",children:[Fe(xt.amount),""]}),s.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-1.5 rounded-xl scale-95 origin-right border border-slate-200",children:[s.jsx("button",{type:"button",onClick:()=>P(xt.tempId,-1),className:"w-7 h-7 rounded-lg bg-white shadow-sm border border-slate-200 flex items-center justify-center text-slate-700 active:scale-90",children:s.jsx("span",{className:"text-lg font-black leading-none select-none",children:"-"})}),s.jsx("span",{className:"text-sm font-black text-slate-800 min-w-[20px] text-center",children:xt.qty}),s.jsx("button",{type:"button",onClick:()=>P(xt.tempId,1),className:"w-7 h-7 rounded-lg bg-indigo-600 shadow-sm flex items-center justify-center text-white active:scale-90",children:s.jsx("span",{className:"text-lg font-black leading-none select-none",children:"+"})})]}),s.jsx("button",{onClick:()=>b(xt),className:"text-[9px] font-black text-rose-400 hover:text-rose-600 uppercase",children:""})]})]},xt.tempId)),o.length===0&&!Le&&s.jsxs("div",{className:"py-12 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-slate-50 text-slate-200 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(_c,{size:32})}),s.jsxs("p",{className:"text-sm font-bold text-slate-400",children:["  .",s.jsx("br",{})," ."]})]})]}),o.length>0&&s.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-100 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-black text-sm pl-1",children:[s.jsx(YC,{size:16,className:"text-indigo-500"}),s.jsx("span",{children:" "})]}),s.jsx("div",{className:"flex gap-2",children:["","",""].map(xt=>s.jsx("button",{onClick:()=>E(xt),className:`flex-1 h-12 rounded-xl font-black text-sm transition-all ${T===xt?"bg-indigo-600 text-white shadow-md":"bg-slate-50 text-slate-400"}`,children:xt},xt))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-black text-sm pl-1",children:[s.jsx(xh,{size:16,className:"text-indigo-500"}),s.jsx("span",{children:"  ()"})]}),s.jsx("input",{type:"text",placeholder:"  ",className:"w-full h-12 bg-slate-50 border-none rounded-2xl px-4 text-sm font-bold text-slate-700 placeholder:text-slate-300",value:I,onChange:xt=>R(xt.target.value)})]})]})]}),n&&o.length>0&&s.jsxs("div",{className:"mt-8 mb-12 animate-in fade-in slide-in-from-bottom-4 duration-500 px-1",children:[_e&&s.jsxs("div",{className:"bg-slate-900 backdrop-blur-md text-white p-6 rounded-[2rem] mb-4 space-y-4 shadow-xl border border-slate-800",children:[s.jsxs("div",{className:"flex justify-between items-center text-slate-400 text-xs font-black uppercase tracking-widest",children:[s.jsx("span",{children:"  "}),s.jsx("button",{onClick:()=>Oe(!1),className:"text-slate-500 hover:text-white",children:s.jsx(WA,{})})]}),s.jsxs("div",{className:"space-y-3 pt-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-slate-400 text-sm font-bold",children:" "}),s.jsxs("span",{className:"text-white font-black",children:[Fe(k.supply),""]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-slate-400 text-sm font-bold",children:" "}),s.jsxs("span",{className:"text-white font-black",children:[Fe(k.vat),""]})]}),s.jsx("div",{className:"h-px bg-white/10 my-2"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-indigo-400 text-lg font-black",children:"  "}),s.jsxs("span",{className:"text-2xl font-black text-white",children:[Fe(k.amount),""]})]})]})]}),s.jsx("div",{className:"bg-white border border-slate-100 rounded-[2rem] p-5 shadow-xl",children:s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("button",{onClick:()=>Oe(!_e),className:"flex-1 h-14 bg-slate-900 text-white rounded-[1.5rem] px-5 flex items-center justify-between group active:scale-[0.98] transition-all",children:[s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsxs("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:[" (",o.length,") "]}),s.jsxs("span",{className:"text-lg font-black leading-none",children:[Fe(k.amount),""]})]}),s.jsx("div",{className:`p-1.5 rounded-lg bg-white/10 transition-transform ${_e?"rotate-180":""}`,children:s.jsx(Pae,{size:16})})]}),s.jsx("button",{onClick:w,disabled:c,className:`w-20 h-14 bg-indigo-600 text-white rounded-[1.5rem] flex items-center justify-center shadow-lg shadow-indigo-100 active:scale-[0.95] transition-all ${c?"opacity-50 animate-pulse":""}`,children:c?s.jsx(yi,{size:24,className:"animate-spin"}):s.jsx(Yi,{size:24})})]})})]})]}),Te&&s.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-900/60 backdrop-blur-sm flex items-end animate-in fade-in duration-300",children:s.jsxs("div",{className:"w-full bg-white rounded-t-[3rem] p-8 pb-12 animate-in slide-in-from-bottom-10 duration-500 shadow-2xl",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-black text-slate-800 tracking-tight",children:"  "}),s.jsx("p",{className:"text-sm font-medium text-slate-400 mt-1 font-bold",children:"    ."})]}),s.jsx("button",{onClick:()=>ke(!1),className:"p-3 bg-slate-50 rounded-2xl text-slate-300",children:s.jsx(Ri,{})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 mb-2 block",children:""}),s.jsx("input",{className:"w-full h-14 bg-slate-50 border-none rounded-2xl px-5 text-sm font-black focus:ring-2 focus:ring-indigo-500 transition-all",placeholder:" ",value:De.name,onChange:xt=>Ge({...De,name:xt.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 mb-2 block",children:" "}),s.jsx("input",{className:"w-full h-14 bg-slate-50 border-none rounded-2xl px-5 text-sm font-black focus:ring-2 focus:ring-indigo-500 transition-all",placeholder:"010-0000-0000",value:De.mobile,onChange:wt})]}),s.jsx("button",{onClick:dt,className:"w-full h-16 bg-indigo-600 text-white rounded-2xl animate-in zoom-in-95 duration-500 font-black text-lg shadow-xl shadow-indigo-100 mt-4 active:scale-[0.98]",children:"  "})]})]})}),H&&s.jsx("div",{className:"fixed inset-0 z-[200] bg-white/60 backdrop-blur-sm flex items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-sm font-black text-indigo-600 animate-pulse",children:"   ..."})]})}),X&&s.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-start p-6 pt-12 animate-in fade-in duration-300 overflow-y-auto",children:[s.jsxs("div",{className:"relative w-full max-w-[280px] aspect-square border-2 border-indigo-500/50 rounded-[2.5rem] overflow-hidden bg-slate-950 shadow-2xl flex items-center justify-center shrink-0",children:[s.jsx("div",{id:"reader",className:"absolute inset-0 z-0"}),re&&s.jsxs("div",{className:"z-20 flex flex-col items-center gap-4 px-6 py-4 bg-slate-800/95 text-white rounded-3xl text-center mx-4 border border-white/10 shadow-2xl",children:[s.jsx("p",{className:"text-xs font-black leading-relaxed",children:re}),s.jsx("button",{onClick:()=>Q.current?.click(),className:"px-6 py-3 bg-indigo-600 rounded-2xl text-sm font-black shadow-lg active:scale-95 transition-all",children:"  "}),s.jsx("input",{ref:Q,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:ce})]}),s.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10",children:[s.jsx("div",{className:"absolute inset-x-0 h-1 bg-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.8)] animate-scan"}),s.jsx("div",{className:"absolute top-8 left-8 w-8 h-8 border-t-4 border-l-4 border-white rounded-tl-lg"}),s.jsx("div",{className:"absolute top-8 right-8 w-8 h-8 border-t-4 border-r-4 border-white rounded-tr-lg"}),s.jsx("div",{className:"absolute bottom-8 left-8 w-8 h-8 border-b-4 border-l-4 border-white rounded-bl-lg"}),s.jsx("div",{className:"absolute bottom-8 right-8 w-8 h-8 border-b-4 border-r-4 border-white rounded-br-lg"})]})]}),s.jsxs("div",{className:"mt-6 text-center text-white space-y-4 w-full px-6",children:[s.jsx("div",{className:"flex justify-center mb-2",children:s.jsxs("button",{onClick:()=>Z(!te),className:`h-11 px-6 rounded-2xl flex items-center gap-2 transition-all duration-300 ${te?"bg-indigo-600 shadow-[0_0_20px_rgba(79,70,229,0.4)]":"bg-white/10"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${te?"bg-white animate-pulse":"bg-slate-500"}`}),s.jsx("span",{className:"text-[11px] font-black uppercase tracking-widest",children:te?"Continuous Mode ON":"Single Scan Mode"})]})}),s.jsx("h3",{className:"text-xl font-black",children:"QR   "}),s.jsx("p",{className:"text-xs text-slate-400",children:"  QR  ."}),s.jsxs("div",{className:"max-w-xs mx-auto pt-2 space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest block",children:"   (  )"}),s.jsx("div",{className:"relative opacity-60 focus-within:opacity-100 transition-opacity",children:s.jsx("input",{ref:W,type:"text",className:"w-full h-12 bg-white/5 border border-white/10 rounded-2xl px-6 text-white text-center font-black focus:border-indigo-500/50 focus:ring-0 transition-all outline-none text-xs",placeholder:"  ",value:J,onChange:xt=>B(xt.target.value),onKeyDown:xt=>{xt.key==="Enter"&&(na(J),xt.target.blur())}})})]})]}),s.jsx("button",{onClick:()=>U(!1),className:"mt-8 mb-12 w-16 h-16 bg-white/10 hover:bg-white/20 text-white rounded-full flex items-center justify-center transition-all active:scale-90 shrink-0",children:s.jsx(Ri,{size:32})}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                        @keyframes scan { 0% { top: 0; } 50% { top: 100%; } 100% { top: 0; } }
                        .animate-scan { position: absolute; animation: scan 3s infinite linear; }
                        #reader video { 
                            object-fit: cover !important;
                            height: 100% !important;
                            width: 100% !important;
                        }
                    `}})]})]})},jue=()=>{const{showAlert:a,showConfirm:e}=wa(),t={joinDate:new Date().toISOString().split("T")[0],name:"",level:"",email:"",zip:"",addr1:"",addr2:"",phone:"",mobile:"",marketingConsent:!1,anniversaryDate:"",anniversaryType:"",acquisition:"",purchaseCycle:"",prefProduct:"",prefPackage:"",subInterest:!1,familyType:"",healthConcern:"",memo:""},[r,n]=F.useState(t),[i,l]=F.useState(!1),[o,c]=F.useState(!1),d=F.useRef(null),u=F.useRef(null),h=F.useRef(null),f=F.useRef(null),p=F.useRef(null),g=F.useRef(null),[b,w]=F.useState([]),[j,k]=F.useState(!1),[T,E]=F.useState([]),[I,R]=F.useState([]),[P,H]=F.useState(!1),[G,X]=F.useState(!1),[U,te]=F.useState(null),[Z,J]=F.useState(!1),[B,W]=F.useState(!1);F.useEffect(()=>{d.current&&d.current.focus()},[]),F.useEffect(()=>{const Ee=setTimeout(async()=>{if(Z&&r.name.trim().length>=2)try{const rt=await Ke("search_customers_by_name",{query:r.name});E(rt?rt.slice(0,5):[])}catch(rt){console.error("Name search failed:",rt)}else E([])},300);return()=>clearTimeout(Ee)},[r.name,Z]),F.useEffect(()=>{const Ee=setTimeout(async()=>{const rt=r.mobile.replace(/[^0-9]/g,"");if(B&&rt.length>=4)try{const dt=await Ke("search_customers_by_mobile",{query:r.mobile});R(dt?dt.slice(0,5):[])}catch(dt){console.error("Mobile search failed:",dt)}else R([])},300);return()=>clearTimeout(Ee)},[r.mobile,B]);const $=Ee=>{const{name:rt,value:dt,type:wt,checked:vt}=Ee.target;let $e=wt==="checkbox"?vt:dt;(rt==="mobile"||rt==="phone")&&($e=kn($e)),rt==="name"&&J(!0),rt==="mobile"&&W(!0),n(na=>({...na,[rt]:$e}))},Q=async Ee=>{let rt=`[${Ee.customer_name}]   ?`;Ee.status!==""&&(rt=`[${Ee.customer_name}]  '${Ee.status}' .   ''  ?`),await e(" ",rt)&&(n(dt=>({...dt,name:Ee.customer_name,mobile:Ee.mobile_number,level:Ee.membership_level||"",email:Ee.email||"",zip:Ee.zip_code||"",addr1:Ee.address_primary||"",addr2:Ee.address_detail||"",phone:Ee.phone_number||"",memo:Ee.memo||"",marketingConsent:Ee.marketing_consent||!1,anniversaryDate:Ee.anniversary_date||"",anniversaryType:Ee.anniversary_type||"",acquisition:Ee.acquisition_channel||"",purchaseCycle:Ee.purchase_cycle||"",prefProduct:Ee.pref_product_type||"",prefPackage:Ee.pref_package_type||"",familyType:Ee.family_type||"",healthConcern:Ee.health_concern||"",subInterest:Ee.sub_interest||!1})),te(Ee.customer_id),J(!1),W(!1),E([]),R([]))},ne=(Ee,rt)=>{Ee.key==="Enter"&&(Ee.preventDefault(),rt&&rt.current&&rt.current.focus())},re=()=>{if(!window.daum||!window.daum.Postcode){a("","  (Daum)   .");return}c(!0),setTimeout(()=>{new window.daum.Postcode({oncomplete:Ee=>{let rt=Ee.address,dt="";Ee.addressType==="R"&&(Ee.bname!==""&&(dt+=Ee.bname),Ee.buildingName!==""&&(dt+=dt!==""?`, ${Ee.buildingName}`:Ee.buildingName),rt+=dt!==""?` (${dt})`:""),n(wt=>({...wt,zip:Ee.zonecode,addr1:rt})),c(!1)},width:"100%",height:"100%"}).embed(document.getElementById("addr-layer-container-reg"))},100)},K=async()=>{const{name:Ee,mobile:rt}=r;if(!Ee&&!rt)return[];try{let dt=[];if(Ee){const wt=await Ke("search_customers_by_name",{query:Ee});wt&&(dt=dt.concat(wt))}if(rt&&rt.length>5){const wt=await Ke("search_customers_by_mobile",{query:rt});if(wt){const vt=new Set(dt.map(na=>na.customer_id)),$e=wt.filter(na=>!vt.has(na.customer_id));dt=dt.concat($e)}}return dt}catch(dt){return console.error("Duplicate check failed:",dt),[]}},ae=async Ee=>{if(Ee.preventDefault(),!r.name){await a(""," ."),d.current?.focus();return}if(r.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)){await a("","   .");return}if(!j){const rt=await K();if(rt.length>0){w(rt),k(!0);return}}await e("",U?"  ?":" ?")&&await ce()},ce=async()=>{l(!0);try{const Ee={customerId:U||void 0,customerName:r.name,mobileNumber:r.mobile,membershipLevel:r.level,phoneNumber:r.phone||null,email:r.email||null,zipCode:r.zip||null,addressPrimary:r.addr1||null,addressDetail:r.addr2||null,memo:r.memo||null,anniversaryDate:r.anniversaryDate||null,anniversaryType:r.anniversaryType||null,marketingConsent:r.marketingConsent,acquisitionChannel:r.acquisition||null,prefProductType:r.prefProduct||null,prefPackageType:r.prefPackage||null,familyType:r.familyType||null,healthConcern:r.healthConcern||null,subInterest:r.subInterest,purchaseCycle:r.purchaseCycle||null,status:""};await Ke(U?"update_customer":"create_customer",Ee),U?await a("","   ()."):await a("","  ."),de()}catch(Ee){console.error("Failed to register customer:",Ee),await a(""," : "+Ee)}finally{l(!1)}},de=()=>{n(t),te(null),J(!1),W(!1),d.current&&d.current.focus()},he=async Ee=>{const rt=Ee.target.files[0];if(!rt)return;const dt=new FileReader;dt.onload=async()=>{const wt=dt.result.split(",")[1];await pe(wt,rt.type),Ee.target.value=""},dt.readAsDataURL(rt)},pe=async(Ee,rt)=>{l(!0);try{const dt=await Ke("parse_business_card",{imageBase64:Ee,mimeType:rt});n(wt=>({...wt,name:dt.name||wt.name,mobile:dt.mobile||wt.mobile,phone:dt.phone||wt.phone,email:dt.email||wt.email,addr1:dt.address||wt.addr1,memo:(wt.memo?wt.memo+`
`:"")+[dt.company,dt.job_title,dt.memo].filter(Boolean).join(`
`)})),await a("","    .")}catch(dt){console.error(dt);let wt="  .  .";const vt=String(dt);vt.includes("API ")||vt.includes("400")||vt.includes("403")?wt="AI  : API     .":vt.includes("Network Error")&&(wt="   ."),await a("",wt)}finally{l(!1)}},[Re,Te]=F.useState(!1),ke=F.useRef(null),Le=F.useRef(null),Ne=F.useRef(null),_e=async()=>{Te(!0)};F.useEffect(()=>(Re?Oe():De(),()=>De()),[Re]);const Oe=async()=>{try{const Ee=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});Ne.current=Ee,ke.current&&(ke.current.srcObject=Ee)}catch(Ee){console.error("Camera error:",Ee),a("","   .  ."),Te(!1)}},De=()=>{Ne.current&&(Ne.current.getTracks().forEach(Ee=>Ee.stop()),Ne.current=null)},Ge=async()=>{if(!ke.current||!Le.current)return;const Ee=ke.current,rt=Le.current;rt.width=Ee.videoWidth,rt.height=Ee.videoHeight,rt.getContext("2d").drawImage(Ee,0,0,rt.width,rt.height);const wt=rt.toDataURL("image/jpeg",.8).split(",")[1];De(),Te(!1),await pe(wt,"image/jpeg")};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Customer Relationship Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Registration"})]})]}),s.jsx("div",{className:"flex gap-3",children:s.jsxs("div",{className:"flex items-center gap-3 bg-white px-4 py-2 rounded-2xl border border-slate-200 shadow-sm",children:[s.jsx("span",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-tight",children:"  (OCR)"}),s.jsx("input",{type:"file",ref:g,accept:"image/*",className:"hidden",onChange:he}),s.jsxs("button",{onClick:()=>g.current?.click(),className:"h-10 px-4 rounded-xl bg-slate-50 text-indigo-600 font-bold hover:bg-indigo-50 transition-all flex items-center gap-2 text-sm border border-indigo-100",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"upload_file"}),"  "]}),s.jsxs("button",{onClick:_e,className:"h-10 px-4 rounded-xl bg-indigo-600 text-white font-bold hover:bg-indigo-500 transition-all flex items-center gap-2 text-sm shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"photo_camera"}),"  "]})]})})]})}),s.jsx("form",{onSubmit:ae,className:"px-4 lg:px-6 min-[2000px]:px-10 mt-0.5 flex flex-col gap-2 overflow-hidden flex-1 pb-4 lg:pb-6 min-[2000px]:pb-10",children:s.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2",children:[s.jsxs("div",{className:"bg-white rounded-2xl p-3 shadow-sm border border-slate-100 relative group",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 overflow-hidden pointer-events-none",children:s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-50/30 rounded-full -mr-16 -mt-16 transition-transform group-hover:scale-110"})}),s.jsxs("h3",{className:"text-lg font-black text-slate-800 mb-2 flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-600 flex items-center justify-center text-white",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"info"})}),"  "]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-y-2 gap-x-4",children:[s.jsxs("div",{className:"lg:col-span-3 space-y-1",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"date",name:"joinDate",value:r.joinDate,onChange:$,className:"w-full h-10 bg-slate-50 border-slate-200 border rounded-xl font-bold text-slate-700 px-4 focus:ring-2 focus:ring-indigo-500 transition-all"})})]}),s.jsxs("div",{className:"lg:col-span-2 space-y-1",children:[s.jsxs("label",{className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:[" ",s.jsx("span",{className:"text-rose-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",name:"name",ref:d,value:r.name,onChange:$,onFocus:()=>H(!0),onBlur:()=>setTimeout(()=>H(!1),200),onKeyDown:Ee=>ne(Ee,u),placeholder:" ",required:!0,className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-800 px-4 focus:ring-2 focus:ring-indigo-500 transition-all shadow-sm"}),P&&T.length>0&&s.jsxs("div",{className:"absolute z-[100] top-full left-0 w-80 mt-1 bg-white border border-slate-200 rounded-2xl shadow-2xl overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"bg-slate-50 px-4 py-2 border-b border-slate-100 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"material-symbols-rounded text-xs text-rose-500",children:"warning"}),s.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-tight",children:"   "})]}),s.jsx("span",{className:"text-[9px] bg-rose-100 text-rose-600 px-1.5 py-0.5 rounded-md font-black",children:" "})]}),s.jsx("div",{className:"max-h-60 overflow-y-auto custom-scrollbar",children:T.map(Ee=>s.jsxs("div",{onClick:()=>Ee.status!==""&&Q(Ee),className:`p-3 border-b border-slate-50 last:border-0 transition-colors ${Ee.status!==""?"hover:bg-slate-50 cursor-pointer":"cursor-default opacity-60 bg-slate-50"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-0.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-bold text-slate-800",children:Ee.customer_name}),Ee.status!==""?s.jsx("span",{className:"text-[9px] font-black bg-rose-100 text-rose-600 px-1.5 py-0.5 rounded-md",children:Ee.status}):s.jsx("span",{className:"text-[9px] font-bold text-emerald-600 bg-emerald-50 px-1.5 py-0.5 rounded-md",children:""})]}),s.jsx("span",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-50 px-1.5 py-0.5 rounded-md",children:Ee.membership_level||""})]}),s.jsxs("div",{className:"text-[11px] text-slate-500 flex items-center gap-1 font-medium",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"call"})," ",Ee.mobile_number||"-"]}),s.jsxs("div",{className:"text-[11px] text-slate-400 truncate mt-0.5 font-medium",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"location_on"})," ",Ee.address_primary||"  "]})]},Ee.customer_id))}),s.jsx("div",{className:"bg-slate-50 px-4 py-2 border-t border-slate-100 text-center",children:s.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:"    ."})})]})]})]}),s.jsxs("div",{className:"lg:col-span-2 space-y-1",children:[s.jsx("label",{htmlFor:"reg-level",className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsxs("select",{id:"reg-level",name:"level",value:r.level,onChange:$,className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 focus:ring-2 focus:ring-indigo-500 transition-all appearance-none shadow-sm",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"VIP",children:"VIP"}),s.jsx("option",{value:"VVIP",children:"VVIP"}),s.jsx("option",{value:"/",children:"/"})]})]}),s.jsxs("div",{className:"lg:col-span-5 space-y-1",children:[s.jsx("label",{htmlFor:"reg-email",className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsx("input",{id:"reg-email",type:"email",name:"email",ref:h,value:r.email,onChange:$,onKeyDown:Ee=>ne(Ee,p),placeholder:"example@mail.com",className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 focus:ring-2 focus:ring-indigo-500 transition-all shadow-sm"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-y-2 gap-x-4 mt-3",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-1",children:[s.jsx("label",{htmlFor:"reg-zip",className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:""}),s.jsx("input",{id:"reg-zip",type:"text",name:"zip",value:r.zip,readOnly:!0,onClick:re,placeholder:"",className:"w-full h-10 bg-slate-50 border-slate-200 border rounded-xl font-bold text-slate-700 px-4 cursor-pointer hover:bg-slate-100 transition-all text-center"})]}),s.jsxs("div",{className:"lg:col-span-5 space-y-1",children:[s.jsx("label",{htmlFor:"reg-addr1",className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsx("input",{id:"reg-addr1",type:"text",name:"addr1",value:r.addr1,onClick:re,placeholder:"  ",readOnly:!0,className:"w-full h-10 bg-slate-50 border-slate-200 border rounded-xl font-bold text-slate-700 px-4 cursor-pointer hover:bg-slate-100 transition-all"})]}),s.jsxs("div",{className:"lg:col-span-5 space-y-1",children:[s.jsx("label",{htmlFor:"reg-addr2",className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsx("input",{id:"reg-addr2",type:"text",name:"addr2",ref:f,value:r.addr2,onChange:$,placeholder:" /   ",className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 focus:ring-2 focus:ring-indigo-500 transition-all shadow-sm"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-y-2 gap-x-4 mt-3",children:[s.jsxs("div",{className:"lg:col-span-3 space-y-1",children:[s.jsx("label",{htmlFor:"reg-phone",className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsx("input",{type:"tel",id:"reg-phone",name:"phone",ref:p,value:r.phone,onChange:$,onKeyDown:Ee=>ne(Ee,u),placeholder:"02-000-0000",className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 focus:ring-2 focus:ring-indigo-500 transition-all shadow-sm"})]}),s.jsxs("div",{className:"lg:col-span-3 space-y-1",children:[s.jsx("label",{htmlFor:"reg-mobile",className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"tel",id:"reg-mobile",name:"mobile",ref:u,value:r.mobile,onChange:$,onFocus:()=>X(!0),onBlur:()=>setTimeout(()=>X(!1),200),onKeyDown:Ee=>ne(Ee,h),placeholder:"010-0000-0000",className:"w-full h-10 bg-white border-indigo-200 border-2 rounded-xl font-black text-slate-900 px-4 focus:ring-4 focus:ring-indigo-500/20 transition-all shadow-sm"}),G&&I.length>0&&s.jsxs("div",{className:"absolute z-[100] top-full right-0 w-80 mt-1 bg-white border border-slate-200 rounded-2xl shadow-2xl overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"bg-slate-50 px-4 py-2 border-b border-slate-100 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"material-symbols-rounded text-xs text-rose-500",children:"warning"}),s.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-tight",children:"   "})]}),s.jsx("span",{className:"text-[9px] bg-rose-100 text-rose-600 px-1.5 py-0.5 rounded-md font-black",children:" "})]}),s.jsx("div",{className:"max-h-60 overflow-y-auto custom-scrollbar",children:I.map(Ee=>s.jsxs("div",{onClick:()=>Q(Ee),className:"p-3 hover:bg-slate-50 cursor-pointer border-b border-slate-50 last:border-0 transition-colors text-left",children:[s.jsxs("div",{className:"flex justify-between items-start mb-0.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-bold text-slate-800",children:Ee.customer_name}),Ee.status!==""&&s.jsx("span",{className:"text-[9px] font-black bg-rose-100 text-rose-600 px-1.5 py-0.5 rounded-md",children:Ee.status})]}),s.jsx("span",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-50 px-1.5 py-0.5 rounded-md",children:Ee.membership_level||""})]}),s.jsxs("div",{className:"text-[11px] text-slate-500 flex items-center gap-1 font-medium",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"call"})," ",Ee.mobile_number||"-"]}),s.jsxs("div",{className:"text-[11px] text-slate-400 truncate mt-0.5 font-medium",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"location_on"})," ",Ee.address_primary||"  "]})]},Ee.customer_id))}),s.jsx("div",{className:"bg-slate-50 px-4 py-2 border-t border-slate-100 text-center",children:s.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:"     ."})})]})]})]}),s.jsx("div",{className:"lg:col-span-6 flex items-end pb-1",children:s.jsxs("label",{htmlFor:"reg-marketingConsent",className:"flex items-center gap-3 bg-slate-50 border border-slate-200 px-6 py-3 rounded-2xl cursor-pointer hover:bg-indigo-50 transition-all w-full group/check",children:[s.jsx("div",{className:"relative flex items-center",children:s.jsx("input",{id:"reg-marketingConsent",type:"checkbox",name:"marketingConsent",checked:r.marketingConsent,onChange:$,className:"w-5 h-5 rounded-lg border-2 border-slate-300 text-indigo-600 focus:ring-indigo-500 transition-all cursor-pointer"})}),s.jsx("span",{className:"text-sm font-black text-slate-600 group-hover/check:text-indigo-700",children:"   "})]})})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-3 shadow-sm border border-slate-100 relative group",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 overflow-hidden pointer-events-none",children:s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-purple-50/30 rounded-full -mr-16 -mt-16 transition-transform group-hover:scale-110"})}),s.jsxs("h3",{className:"text-lg font-black text-slate-800 mb-2 flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-600 flex items-center justify-center text-white",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"volunteer_activism"})}),"CRM    "]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-y-2 gap-x-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"reg-anniversaryDate",className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsx("input",{id:"reg-anniversaryDate",type:"date",name:"anniversaryDate",value:r.anniversaryDate,onChange:$,className:"w-full h-10 bg-slate-50 border-slate-200 border rounded-xl font-bold text-slate-700 px-4 focus:ring-2 focus:ring-indigo-500 transition-all"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"reg-anniversaryType",className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsxs("select",{id:"reg-anniversaryType",name:"anniversaryType",value:r.anniversaryType,onChange:$,className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 appearance-none shadow-sm focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"reg-acquisition",className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsxs("select",{id:"reg-acquisition",name:"acquisition",value:r.acquisition,onChange:$,className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 appearance-none shadow-sm focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:"SNS(/)",children:"SNS"}),s.jsx("option",{value:" ",children:" "}),s.jsx("option",{value:" ",children:" "}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"reg-purchaseCycle",className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsxs("select",{id:"reg-purchaseCycle",name:"purchaseCycle",value:r.purchaseCycle,onChange:$,className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 appearance-none shadow-sm focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:" ",children:" "}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"/",children:"/"}),s.jsx("option",{value:" ",children:" "})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-y-2 gap-x-4 mt-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"reg-prefProduct",className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsxs("select",{id:"reg-prefProduct",name:"prefProduct",value:r.prefProduct,onChange:$,className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 appearance-none shadow-sm focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"(/)",children:""}),s.jsx("option",{value:" ",children:" "})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"reg-prefPackage",className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsxs("select",{id:"reg-prefPackage",name:"prefPackage",value:r.prefPackage,onChange:$,className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 appearance-none shadow-sm focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:"()",children:""}),s.jsx("option",{value:"()",children:""})]})]}),s.jsx("div",{className:"lg:col-span-2 flex items-end pb-1",children:s.jsxs("label",{htmlFor:"reg-subInterest",className:"flex items-center gap-3 bg-white border border-indigo-100 px-6 py-3 rounded-2xl cursor-pointer hover:bg-indigo-50 transition-all w-full group/check",children:[s.jsx("input",{id:"reg-subInterest",type:"checkbox",name:"subInterest",checked:r.subInterest,onChange:$,className:"w-5 h-5 rounded-lg border-2 border-slate-300 text-indigo-600 focus:ring-indigo-500 cursor-pointer"}),s.jsx("span",{className:"text-sm font-black text-slate-600 group-hover/check:text-indigo-700",children:" ()  "})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-2 gap-x-4 mt-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"reg-familyType",className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:"  "}),s.jsx("input",{id:"reg-familyType",type:"text",name:"familyType",value:r.familyType,onChange:$,placeholder:":  ,    ",className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 focus:ring-2 focus:ring-indigo-500 shadow-sm"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"reg-healthConcern",className:"text-[11px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsx("input",{id:"reg-healthConcern",type:"text",name:"healthConcern",value:r.healthConcern,onChange:$,placeholder:": ,  ",className:"w-full h-10 bg-white border-slate-200 border rounded-xl font-bold text-slate-700 px-4 focus:ring-2 focus:ring-indigo-500 shadow-sm"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-3 shadow-sm border border-slate-100 mb-2",children:[s.jsx("label",{htmlFor:"reg-memo",className:"text-[11px] font-black text-slate-400 uppercase ml-1 mb-1 block",children:"  "}),s.jsx("textarea",{id:"reg-memo",name:"memo",value:r.memo,onChange:$,rows:"3",placeholder:"   .",className:"w-full bg-slate-50 border-slate-200 border rounded-xl font-bold text-slate-700 p-3 focus:ring-2 focus:ring-indigo-500 transition-all resize-none"})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 pb-2 border-t border-slate-100",children:[s.jsxs("button",{type:"button",onClick:de,className:"h-10 px-8 rounded-2xl bg-white border border-slate-200 text-slate-500 font-black hover:bg-slate-50 transition-all flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"refresh"}),"  "]}),s.jsxs("button",{type:"submit",disabled:i,className:"h-10 px-12 rounded-2xl bg-indigo-600 text-white font-black hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-200 flex items-center gap-2 disabled:opacity-50",children:[s.jsx("span",{className:"material-symbols-rounded",children:i?"sync":"person_add"}),i?" ...":" "]})]})]})}),o&&s.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>c(!1)}),s.jsxs("div",{className:"relative w-full max-w-xl bg-white rounded-[2rem] shadow-2xl overflow-hidden flex flex-col animate-in zoom-in duration-300",children:[s.jsxs("div",{className:"px-8 py-6 border-b border-slate-100 flex justify-between items-center bg-indigo-600 text-white",children:[s.jsx("h3",{className:"text-xl font-black",children:" "}),s.jsx("button",{onClick:()=>c(!1),className:"w-10 h-9 rounded-full hover:bg-white/20 transition-colors flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{id:"addr-layer-container-reg",className:"w-full h-[500px]"})]})]}),Re&&s.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-in fade-in",children:s.jsxs("div",{className:"relative w-full max-w-2xl bg-black rounded-3xl overflow-hidden shadow-2xl flex flex-col",children:[s.jsx("div",{className:"absolute top-4 right-4 z-10",children:s.jsx("button",{onClick:()=>Te(!1),className:"w-10 h-10 rounded-full bg-black/50 text-white flex items-center justify-center hover:bg-black/70 transition-all",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})}),s.jsxs("div",{className:"relative aspect-[4/3] bg-black",children:[s.jsx("video",{ref:ke,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),s.jsx("canvas",{ref:Le,className:"hidden"}),s.jsx("div",{className:"absolute inset-0 border-[3px] border-white/30 m-8 rounded-2xl pointer-events-none flex items-center justify-center",children:s.jsx("div",{className:"text-white/70 font-bold bg-black/40 px-4 py-2 rounded-full backdrop-blur-sm text-sm",children:"   "})})]}),s.jsxs("div",{className:"p-6 bg-slate-900 flex justify-center items-center gap-6",children:[s.jsx("button",{onClick:()=>Te(!1),className:"px-6 py-3 rounded-xl bg-slate-800 text-white font-bold hover:bg-slate-700 transition-all",children:""}),s.jsx("button",{onClick:Ge,className:"w-16 h-16 rounded-full bg-white border-4 border-slate-300 flex items-center justify-center hover:scale-105 transition-transform shadow-lg shadow-indigo-500/30",children:s.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-600 border-2 border-white"})}),s.jsx("div",{className:"w-[88px]"})," "]})]})}),j&&s.jsxs("div",{className:"fixed inset-0 z-[400] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-md",onClick:()=>{k(!1),d.current?.focus()}}),s.jsxs("div",{className:"relative w-full max-w-2xl bg-white rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col animate-in zoom-in duration-300",children:[s.jsxs("div",{className:"p-8 pb-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-10 h-10 rounded-2xl bg-rose-100 flex items-center justify-center text-rose-600",children:s.jsx("span",{className:"material-symbols-rounded",children:"warning"})}),s.jsx("h3",{className:"text-2xl font-black text-slate-800",children:" "})]}),s.jsxs("p",{className:"text-slate-500 font-medium",children:["    ",s.jsxs("span",{className:"text-rose-600 font-black",children:[b.length,""]})," .",s.jsx("br",{}),"   ."]})]}),s.jsx("div",{className:"px-8 py-2 max-h-[400px] overflow-y-auto",children:s.jsx("div",{className:"rounded-2xl border border-slate-100 overflow-hidden shadow-sm",children:s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 border-b border-slate-100",children:[s.jsx("th",{className:"px-4 py-3 text-left text-[11px] font-black text-slate-400 uppercase",children:""}),s.jsx("th",{className:"px-4 py-3 text-left text-[11px] font-black text-slate-400 uppercase",children:""}),s.jsx("th",{className:"px-4 py-3 text-left text-[11px] font-black text-slate-400 uppercase",children:""}),s.jsx("th",{className:"px-4 py-3 text-left text-[11px] font-black text-slate-400 uppercase",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:b.map((Ee,rt)=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsxs("td",{className:"px-4 py-3",children:[s.jsx("div",{className:"font-black text-slate-700",children:Ee.customer_name}),s.jsx("div",{className:"text-[10px] text-slate-400 truncate max-w-[150px]",children:Ee.address_primary||" "})]}),s.jsx("td",{className:"px-4 py-3",children:Ee.status!==""?s.jsx("span",{className:"text-[10px] font-black bg-rose-100 text-rose-600 px-2 py-1 rounded-md",children:Ee.status}):s.jsx("span",{className:"text-[10px] font-black bg-emerald-100 text-emerald-600 px-2 py-1 rounded-md",children:""})}),s.jsx("td",{className:"px-4 py-3 font-bold text-slate-500",children:Ee.mobile_number||"-"}),s.jsx("td",{className:"px-4 py-3",children:Ee.status!==""?s.jsx("button",{onClick:()=>{k(!1),Q(Ee)},className:"px-3 py-1.5 rounded-lg bg-indigo-50 text-indigo-600 font-black text-xs hover:bg-indigo-600 hover:text-white transition-all whitespace-nowrap",children:"  "}):s.jsx("span",{className:"text-[11px] font-bold text-slate-400",children:" "})})]},rt))})]})})}),s.jsxs("div",{className:"p-8 pt-4 flex gap-3",children:[s.jsxs("button",{onClick:()=>{k(!1),d.current?.focus()},className:"h-12 px-6 rounded-2xl bg-slate-100 text-slate-600 font-black hover:bg-slate-200 transition-all flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"close"}),"  ()"]}),s.jsxs("button",{onClick:async()=>{k(!1),await e("",U?"  ?":" ?")&&await ce()},className:"flex-1 h-12 rounded-2xl bg-indigo-600 text-white font-black hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-200 flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"forward"}),"   "]})]})]})]})]})},Sue=()=>{const{showAlert:a,showConfirm:e}=wa(),t={id:"",name:"",level:"",joinDate:"",email:"",zip:"",addr1:"",addr2:"",phone:"",mobile:"",marketingConsent:!1,anniversaryDate:"",anniversaryType:"",acquisition:"",purchaseCycle:"",prefProduct:"",prefPackage:"",subInterest:!1,familyType:"",healthConcern:"",memo:"",status:""},[r,n]=F.useState("view"),[i,l]=F.useState(""),[o,c]=F.useState(null),[d,u]=F.useState(!1),[h,f]=F.useState(t),[p,g]=F.useState([]),[b,w]=F.useState([]),[j,k]=F.useState(!1),[T,E]=F.useState(!1),[I,R]=F.useState(null),[P,H]=F.useState(!1),[G,X]=F.useState(!1),[U,te]=F.useState(!1),[Z,J]=F.useState([]),[B,W]=F.useState([]),[$,Q]=F.useState(!1),ne=F.useRef(null);F.useEffect(()=>{ne.current&&ne.current.focus()},[]);const re=async Ne=>{if(Ne?.preventDefault(),!i){await a("","   .");return}u(!0);try{let _e=[];/[0-9]/.test(i)&&(_e=await Ke("search_customers_by_mobile",{query:i})),(!_e||_e.length===0)&&(_e=await Ke("search_customers_by_name",{query:i})),_e.length===0?await a(" ","  ."):_e.length===1?ce(_e[0]):(W(_e),Q(!0))}catch(_e){await a(""," : "+_e)}finally{u(!1)}},K=async Ne=>{try{const _e=await Ke("get_customer_addresses",{customer_id:Ne});g(_e||[])}catch(_e){console.error("Address fetch error:",_e),a("",`   : ${_e.message}`)}},ae=async Ne=>{if(Ne)try{console.log(`Fetching logs for ${Ne}`);const _e=await Ke("get_customer_logs",{customer_id:Ne});console.log("Logs loaded:",_e),J(_e||[]),te(!0)}catch(_e){console.error("Log fetch error:",_e),a("",`   : ${_e.message}`)}},ce=F.useCallback(async Ne=>{c(Ne),n("view"),f({id:Ne.customer_id,name:Ne.customer_name,level:Ne.membership_level,joinDate:Ne.join_date,email:Ne.email||"",zip:Ne.zip_code||"",addr1:Ne.address_primary||"",addr2:Ne.address_detail||"",phone:Ne.phone_number||"",mobile:Ne.mobile_number||"",marketingConsent:Ne.marketing_consent===!0||Ne.marketing_consent==="true",anniversaryDate:Ne.anniversary_date||"",anniversaryType:Ne.anniversary_type||"",acquisition:Ne.acquisition_channel||"",purchaseCycle:Ne.purchase_cycle||"",prefProduct:Ne.pref_product_type||"",prefPackage:Ne.pref_package_type||"",subInterest:Ne.sub_interest===!0||Ne.sub_interest==="true",familyType:Ne.family_type||"",healthConcern:Ne.health_concern||"",memo:Ne.memo||"",status:Ne.status||""}),K(Ne.customer_id)},[]),de=async Ne=>{if(Ne&&Ne.preventDefault(),!o){await a("","  .");return}if(r==="view"){n("edit");return}if(await e(""," ?")){u(!0);try{const _e={customerId:h.id,customerName:h.name,mobileNumber:h.mobile,membershipLevel:h.level,phoneNumber:h.phone||null,email:h.email||null,zipCode:h.zip||null,addressPrimary:h.addr1||null,addressDetail:h.addr2||null,memo:h.memo||null,anniversaryDate:h.anniversaryDate||null,anniversaryType:h.anniversaryType||null,marketingConsent:h.marketingConsent,acquisitionChannel:h.acquisition||null,status:h.status,prefProductType:h.prefProduct||null,prefPackageType:h.prefPackage||null,familyType:h.familyType||null,healthConcern:h.healthConcern||null,subInterest:h.subInterest||!1,purchaseCycle:h.purchaseCycle||null};await Ke("update_customer",_e),await a("","."),n("view");const Oe=await Ke("get_customer",{customer_id:h.id});Oe&&ce(Oe)}catch(_e){await a(""," : "+_e)}finally{u(!1)}}},he=async()=>{if(!o){await a("","    .");return}if(await e(" ",`     ?
  , ''    .`)){u(!0);try{await Ke("delete_customer",{customer_id:o.customer_id}),await a("","  ."),Re()}catch(Ne){await a("","  : "+Ne)}finally{u(!1)}}},pe=async()=>{if(o&&await e(" ","   ''  ?")){u(!0);try{await Ke("reactivate_customer",{customer_id:o.customer_id}),await a("","  .");const Ne=await Ke("get_customer",{customer_id:o.customer_id});Ne&&ce(Ne)}catch(Ne){await a(""," : "+Ne)}finally{u(!1)}}},Re=()=>{c(null),f(t),l(""),g([]),w([]),n("view"),ne.current&&ne.current.focus()},Te=()=>{r!=="view"&&(H(!0),setTimeout(()=>{new window.daum.Postcode({oncomplete:Ne=>{f(_e=>({..._e,zip:Ne.zonecode,addr1:Ne.address})),H(!1)},width:"100%",height:"100%"}).embed(document.getElementById("addr-layer-list-edit"))},100))},ke=Ne=>{const{name:_e,value:Oe,type:De,checked:Ge}=Ne.target;let Ee=De==="checkbox"?Ge:Oe;(_e==="mobile"||_e==="phone")&&(Ee=kn(Ee)),f(rt=>({...rt,[_e]:Ee}))},Le=()=>{H(!0),setTimeout(()=>{new window.daum.Postcode({oncomplete:Ne=>{setEditingAddress(_e=>({..._e,zip_code:Ne.zonecode,address_primary:Ne.address})),H(!1)},width:"100%",height:"100%"}).embed(document.getElementById("addr-layer-list-edit"))},100)};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 pb-2 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-xs font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Customer Relationship Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter mb-4",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["//  ",s.jsx("span",{className:"text-slate-400 font-light ml-2 text-xl",children:"Inquiry & Management"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("form",{onSubmit:re,className:"flex gap-2",children:[s.jsx("input",{ref:ne,type:"text",value:i,onChange:Ne=>l(Ne.target.value),placeholder:"     Enter",className:"w-80 h-10 px-4 rounded-xl bg-white border border-slate-300 focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all font-bold text-slate-800 shadow-sm text-sm"}),s.jsxs("button",{type:"submit",disabled:d,className:"h-10 px-6 rounded-xl bg-indigo-600 text-white font-black hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-200 flex items-center gap-2",children:[d?s.jsx("span",{className:"material-symbols-rounded animate-spin",children:"refresh"}):s.jsx("span",{className:"material-symbols-rounded",children:"person_search"}),""]})]}),s.jsxs("div",{className:`px-4 py-1.5 rounded-full border font-black text-xs shadow-sm flex items-center gap-2 transition-all ${r==="view"?"bg-slate-100 border-slate-200 text-slate-500":"bg-amber-50 border-amber-200 text-amber-600 shadow-amber-100"}`,children:[s.jsx("span",{className:`material-symbols-rounded text-base ${r==="view"?"text-slate-400":"text-amber-500"}`,children:r==="view"?"visibility":"edit_square"}),r==="view"?" ":" "]})]})]}),s.jsx("div",{className:"flex-1 overflow-hidden bg-slate-50 px-6 lg:px-8 py-4 flex flex-col",children:s.jsxs("div",{className:"space-y-4 overflow-y-auto custom-gray-scrollbar flex-1 p-1",children:[s.jsxs("div",{className:`bg-white rounded-2xl p-4 shadow-sm border transition-all ${r==="edit"?"border-indigo-500 shadow-lg":"border-slate-100"}`,children:[s.jsxs("h3",{className:"text-sm font-black text-slate-800 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-3.5 bg-indigo-600 rounded-full"}),"  ",r==="edit"&&s.jsx("span",{className:"text-amber-500 text-[10px] uppercase ml-2 px-1.5 py-0.5 bg-amber-50 rounded-full font-black",children:"Edit"}),h.status===""&&s.jsxs("span",{className:"text-rose-600 text-[10px] uppercase ml-2 px-2 py-0.5 bg-rose-50 rounded-full font-black flex items-center gap-1 border border-rose-100 animate-pulse",children:[s.jsx("span",{className:"material-symbols-rounded text-xs",children:"block"}),"  "]})]}),s.jsxs("div",{className:"grid grid-cols-12 gap-2.5",children:[s.jsxs("div",{className:"col-span-2 space-y-0.5",children:[s.jsx("label",{htmlFor:"list-name",className:"text-xs font-black text-slate-500 uppercase ml-1",children:""}),s.jsx("input",{id:"list-name",name:"name",value:h.name||"",onChange:ke,readOnly:r==="view",className:`w-full h-11 rounded-lg font-bold px-3 text-sm transition-all border ${r==="view"?"text-black bg-white border-slate-300":"text-indigo-600 bg-indigo-50 border-indigo-400 focus:ring-4 focus:ring-indigo-500/20"}`})]}),s.jsxs("div",{className:"col-span-2 space-y-0.5",children:[s.jsx("label",{htmlFor:"list-level",className:"text-xs font-black text-slate-500 uppercase ml-1",children:" "}),s.jsxs("select",{id:"list-level",name:"level",value:h.level||"",onChange:ke,disabled:r==="view",className:`w-full h-11 rounded-lg font-bold px-3 text-sm border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400"}`,children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"VIP",children:"VIP"}),s.jsx("option",{value:"VVIP",children:"VVIP"}),s.jsx("option",{value:"/",children:"/"})]})]}),s.jsxs("div",{className:"col-span-6 space-y-0.5",children:[s.jsx("label",{htmlFor:"list-email",className:"text-xs font-black text-slate-500 uppercase ml-1",children:""}),s.jsx("input",{id:"list-email",type:"email",name:"email",value:h.email||"",onChange:ke,readOnly:r==="view",className:`w-full h-11 rounded-lg font-bold px-3 text-sm border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400"}`})]}),s.jsx("div",{className:"col-span-2 flex items-end",children:s.jsxs("label",{className:`flex items-center gap-2 px-3 h-11 rounded-lg w-full border transition-all ${h.marketingConsent?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-slate-50 border-slate-200 text-slate-400"}`,children:[s.jsx("input",{type:"checkbox",name:"marketingConsent",checked:h.marketingConsent||!1,onChange:ke,disabled:r==="view",className:"w-4 h-4 rounded text-indigo-600"}),s.jsx("span",{className:"text-xs font-black",children:""})]})})]}),s.jsxs("div",{className:"grid grid-cols-12 gap-2.5 mt-2",children:[s.jsxs("div",{className:"col-span-2 space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:""}),s.jsx("input",{value:h.zip||"",readOnly:!0,onClick:Te,className:`w-full h-11 rounded-lg font-black text-center text-sm border text-black bg-white shadow-sm ${r==="view"?"border-slate-300":"border-slate-400 cursor-pointer"}`})]}),s.jsxs("div",{className:"col-span-5 space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:" "}),s.jsx("input",{value:h.addr1||"",readOnly:!0,onClick:Te,className:`w-full h-11 rounded-lg font-bold px-3 text-sm border text-black bg-white shadow-sm ${r==="view"?"border-slate-300":"border-slate-400 cursor-pointer"}`})]}),s.jsxs("div",{className:"col-span-5 space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:" "}),s.jsx("input",{name:"addr2",value:h.addr2||"",onChange:ke,readOnly:r==="view",className:`w-full h-11 rounded-lg font-bold px-3 text-sm border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400 focus:ring-2 focus:ring-indigo-500 shadow-sm"}`})]})]}),s.jsxs("div",{className:"grid grid-cols-12 gap-2.5 mt-2",children:[s.jsxs("div",{className:"col-span-3 space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:" "}),s.jsx("input",{name:"mobile",value:h.mobile||"",onChange:ke,readOnly:r==="view",className:`w-full h-11 rounded-lg font-black px-3 text-sm border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400 focus:ring-2 focus:ring-indigo-500 shadow-sm"}`})]}),s.jsxs("div",{className:"col-span-3 space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:" "}),s.jsx("input",{name:"phone",value:h.phone||"",onChange:ke,readOnly:r==="view",className:`w-full h-11 rounded-lg font-bold px-3 text-sm border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400"}`})]})]})]}),s.jsxs("div",{className:`bg-white rounded-2xl p-4 shadow-sm border transition-all ${r==="edit"?"border-indigo-500 shadow-lg":"border-slate-100"}`,children:[s.jsxs("h3",{className:"text-sm font-black text-slate-800 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-3.5 bg-indigo-600 rounded-full"}),"CRM    "]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2.5",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:" "}),s.jsx("input",{type:"date",name:"anniversaryDate",value:h.anniversaryDate||"",onChange:ke,readOnly:r==="view",className:`w-full h-11 rounded-lg font-bold px-3 text-sm border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400"}`})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:" "}),s.jsxs("select",{name:"anniversaryType",value:h.anniversaryType||"",onChange:ke,disabled:r==="view",className:`w-full h-11 rounded-lg font-bold px-3 text-sm border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400"}`,children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase ml-1",children:" "}),s.jsxs("select",{name:"prefProduct",value:h.prefProduct||"",onChange:ke,disabled:r==="view",className:`w-full h-11 rounded-lg font-bold px-3 text-sm border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400"}`,children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:" ",children:" "})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("label",{className:`flex items-center gap-2 px-3 h-11 rounded-lg w-full border transition-all ${h.subInterest?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-slate-50 border-slate-200 text-slate-400"}`,children:[s.jsx("input",{type:"checkbox",name:"subInterest",checked:h.subInterest||!1,onChange:ke,disabled:r==="view",className:"w-4 h-4 rounded text-indigo-600"}),s.jsx("span",{className:"text-xs font-black",children:"  "})]})})]})]}),s.jsxs("div",{className:`bg-white rounded-2xl p-4 shadow-sm border transition-all overflow-hidden ${r==="edit"?"border-indigo-500 shadow-lg":"border-slate-100"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("h3",{className:"text-sm font-black text-black flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-3.5 bg-indigo-600 rounded-full"}),"  "]}),s.jsxs("button",{type:"button",disabled:r==="view"||!o,onClick:()=>{setEditingAddress({}),X(!0)},className:"h-7 px-3 rounded-lg bg-indigo-50 text-indigo-600 font-bold hover:bg-indigo-100 transition-all flex items-center gap-1.5 text-[10px] border border-indigo-100 disabled:opacity-30",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"add_location"}),"  "]})]}),s.jsx("div",{className:"overflow-x-auto border border-slate-200 rounded-xl",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-500 border-b border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2.5 font-black uppercase text-xs",children:""}),s.jsx("th",{className:"px-4 py-2.5 font-black uppercase text-xs",children:""}),s.jsx("th",{className:"px-4 py-2.5 font-black uppercase text-xs",children:""}),s.jsx("th",{className:"px-4 py-2.5 font-black uppercase text-xs",children:" "}),s.jsx("th",{className:"px-4 py-2.5 font-black uppercase text-xs text-center",children:""}),s.jsx("th",{className:"px-4 py-2.5 font-black uppercase text-xs text-center",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[p.map(Ne=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsx("td",{className:"px-4 py-2.5",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black ${Ne.address_alias===""?"bg-indigo-600 text-white":"bg-slate-100 text-slate-500"}`,children:Ne.address_alias})}),s.jsx("td",{className:"px-4 py-2.5 font-black text-slate-700",children:Ne.recipient_name}),s.jsx("td",{className:"px-4 py-2.5 font-bold text-slate-500",children:Ne.mobile_number}),s.jsxs("td",{className:"px-4 py-2.5 text-slate-500",children:["(",Ne.zip_code,") ",Ne.address_primary]}),s.jsx("td",{className:"px-4 py-2.5 text-center",children:s.jsx("input",{type:"radio",checked:Ne.is_default,onChange:async()=>{if(!(r==="view"||!o))try{await Ke("set_default_address",{customerId:o.customer_id,addressId:Ne.address_id}),K(o.customer_id);const _e=await Ke("get_customer",{customer_id:o.customer_id});_e&&ce(_e)}catch{a(""," ")}},disabled:r==="view"||!o,className:"w-3.5 h-3.5 text-indigo-600"})}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsxs("div",{className:"flex justify-center gap-1",children:[s.jsx("button",{type:"button",disabled:r==="view"||Ne.address_alias==="",onClick:()=>{setEditingAddress(Ne),X(!0)},className:"w-7 h-7 rounded bg-white border border-slate-200 text-slate-400 hover:text-indigo-600 disabled:opacity-20",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"edit"})}),s.jsx("button",{type:"button",disabled:r==="view"||Ne.address_alias==="",onClick:async()=>{await e(""," ?")&&(await Ke("delete_customer_address",{address_id:Ne.address_id}),K(o.customer_id))},className:"w-7 h-7 rounded bg-white border border-slate-200 text-slate-400 hover:text-rose-600 disabled:opacity-20",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"delete"})})]})})]},Ne.address_id)),p.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"px-4 py-5 text-center text-slate-300 font-bold italic",children:" "})})]})]})})]}),s.jsxs("div",{className:`bg-white rounded-2xl p-4 shadow-sm border transition-all ${r==="edit"?"border-indigo-500 shadow-lg":"border-slate-100"}`,children:[s.jsxs("h3",{className:"text-sm font-black text-slate-800 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-3.5 bg-indigo-600 rounded-full"}),"   ()"]}),s.jsx("textarea",{name:"memo",value:h.memo||"",onChange:ke,readOnly:r==="view",rows:"2",placeholder:"  .",className:`w-full rounded-xl font-bold p-3 transition-all resize-none shadow-inner h-24 text-sm border text-black bg-white ${r==="view"?"border-slate-300":"border-slate-400 focus:ring-2 focus:ring-indigo-500"}`})]})]})}),s.jsxs("div",{className:"px-6 lg:px-8 py-4 border-t border-slate-100 bg-white/95 backdrop-blur-sm shrink-0 flex justify-between items-center",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"button",onClick:Re,className:"h-10 px-6 rounded-xl bg-white border border-slate-200 text-slate-500 font-black hover:bg-slate-50 transition-all flex items-center gap-2 shadow-sm text-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"refresh"}),"  "]}),s.jsx("div",{className:"w-[1px] h-6 bg-slate-200 mx-1 self-center"}),s.jsxs("button",{type:"button",onClick:async()=>{if(o){u(!0);try{const Ne=await Ke("get_customer_ai_insight",{customer_id:o.customer_id});R(Ne),E(!0)}catch(Ne){console.error("AI Error:",Ne),Ne.message?.includes("429")||Ne.message?.includes("403")?a(" AI   ","   ."):a("","AI  : "+Ne.message)}finally{u(!1)}}},disabled:!o||d,className:`h-10 px-4 rounded-xl font-bold text-xs flex items-center gap-2 border transition-all ${o?"bg-indigo-50 text-indigo-600 border-indigo-100 hover:bg-indigo-100 shadow-sm":"bg-slate-50 border-slate-100 text-slate-200 cursor-not-allowed"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"psychology"})," AI  "]}),s.jsxs("button",{type:"button",onClick:()=>ae(o?.customer_id),disabled:!o,className:"h-10 px-6 rounded-xl bg-white border border-slate-200 text-slate-600 font-black hover:bg-slate-50 transition-all flex items-center gap-2 shadow-sm text-sm disabled:opacity-50",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"history"}),"  "]}),s.jsxs("button",{type:"button",onClick:async()=>{if(o){u(!0);try{const Ne=await Ke("get_customer_sales",{customer_id:o.customer_id});w(Ne||[]),k(!0)}catch(Ne){console.error("Sales fetch error:",Ne),a("",`  : ${Ne.message}`)}finally{u(!1)}}},disabled:!o||d,className:`h-10 px-4 rounded-xl font-bold text-xs flex items-center gap-2 border transition-all ${o?"bg-emerald-50 text-emerald-600 border-emerald-100 hover:bg-emerald-100 shadow-sm":"bg-slate-50 border-slate-100 text-slate-200 cursor-not-allowed"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"history"}),"  "]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"button",onClick:de,disabled:d,className:`h-10 px-10 rounded-xl font-black transition-all shadow-md flex items-center gap-2 text-sm ${o?r==="view"?"bg-amber-500 text-white hover:bg-amber-400 shadow-amber-200":"bg-indigo-600 text-white hover:bg-indigo-500 shadow-indigo-200":"bg-slate-200 text-slate-400 cursor-not-allowed shadow-none"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:r==="view"?"edit":d?"sync":"save"}),r==="view"?"  ":"  "]}),s.jsxs("button",{type:"button",onClick:he,disabled:!o||r!=="edit"||d||h.status==="",className:`h-10 px-6 rounded-xl font-black transition-all flex items-center gap-2 shadow-sm text-sm ${!o||r!=="edit"||h.status===""?"bg-slate-50 border-slate-100 text-slate-200 cursor-not-allowed shadow-none":"bg-white border-rose-200 text-rose-500 hover:bg-rose-50"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"person_off"}),"   "]}),h.status===""&&s.jsxs("button",{type:"button",onClick:pe,disabled:d,className:"h-10 px-6 rounded-xl font-black transition-all flex items-center gap-2 shadow-lg bg-emerald-600 text-white hover:bg-emerald-500 shadow-emerald-200 text-sm animate-bounce",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"person_check"}),"   "]})]})]}),T&&I&&s.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 backdrop-blur-md bg-slate-900/40 animate-in fade-in duration-300",children:s.jsxs("div",{className:"relative w-full max-w-xl bg-white rounded-[2rem] shadow-2xl overflow-hidden animate-in zoom-in-95 text-left",children:[s.jsxs("div",{className:"px-6 py-5 bg-indigo-600 text-white flex justify-between items-center relative overflow-hidden",children:[s.jsxs("h3",{className:"text-lg font-black flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded",children:"auto_awesome"})," AI  "]}),s.jsx("button",{onClick:()=>E(!1),className:"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"bg-indigo-50/50 p-4 rounded-2xl border border-indigo-100",children:[s.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest block mb-2 italic",children:"Profile Keywords"}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:I.keywords?.map((Ne,_e)=>s.jsx("span",{className:"px-3 py-1 bg-white text-indigo-700 rounded-lg font-black text-[10px] shadow-sm shadow-indigo-100",children:Ne},_e))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-4 bg-slate-50/80 rounded-2xl border border-slate-100",children:[s.jsx("p",{className:"font-black text-slate-800 text-xs mb-2 flex items-center gap-2",children:"  "}),s.jsx("p",{className:"text-slate-600 text-[13px] leading-relaxed font-bold",children:I.ice_breaking||"  "})]}),s.jsxs("div",{className:"p-4 bg-slate-50/80 rounded-2xl border border-slate-100",children:[s.jsx("p",{className:"font-black text-slate-800 text-xs mb-2 flex items-center gap-2",children:"   "}),s.jsx("p",{className:"text-slate-600 text-[13px] leading-relaxed font-bold",children:I.sales_tip||"  "})]})]})]})]})}),j&&s.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 backdrop-blur-md bg-slate-900/40 h-full",children:s.jsxs("div",{className:"relative w-full max-w-4xl bg-white rounded-[2rem] shadow-2xl overflow-hidden flex flex-col animate-in zoom-in-95 max-h-[80vh] text-left",children:[s.jsxs("div",{className:"px-6 py-5 bg-slate-950 text-white flex justify-between items-center shrink-0",children:[s.jsxs("h3",{className:"text-lg font-black flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-emerald-400",children:"history"})," ",h.name,"   "]}),s.jsx("button",{onClick:()=>k(!1),className:"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto bg-white custom-scrollbar",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"sticky top-0 bg-slate-50 z-20 border-b border-slate-200 shadow-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase",children:""}),s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase",children:""}),s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase text-right",children:""}),s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase text-right",children:""}),s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase text-center",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:b.length>0?b.map((Ne,_e)=>s.jsxs("tr",{className:"hover:bg-slate-50/80",children:[s.jsx("td",{className:"px-6 py-3 font-bold text-slate-400",children:Ne.order_date?.split("T")[0]}),s.jsx("td",{className:"px-6 py-3 font-black text-slate-900",children:Ne.product_name}),s.jsxs("td",{className:"px-6 py-3 text-right font-black text-slate-600",children:[Ne.quantity,""]}),s.jsxs("td",{className:"px-6 py-3 text-right font-black text-indigo-600",children:[Fe(Ne.total_amount),""]}),s.jsx("td",{className:"px-6 py-3 text-center",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-[8px] font-black ${Ne.status===""?"bg-emerald-100 text-emerald-600":"bg-amber-100 text-amber-600"}`,children:Ne.status})})]},_e)):s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"px-6 py-20 text-center text-slate-300 font-black italic",children:" "})})})]})}),s.jsx("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-100 flex justify-end shrink-0",children:s.jsx("button",{onClick:()=>k(!1),className:"px-6 py-2 bg-white border border-slate-200 text-slate-600 rounded-xl font-black text-xs",children:""})})]})}),P&&s.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4 backdrop-blur-sm bg-slate-900/60",children:s.jsxs("div",{className:"relative w-full max-w-[450px] bg-white rounded-2xl shadow-2xl flex flex-col overflow-hidden h-[550px]",children:[s.jsxs("div",{className:"px-5 py-3 bg-slate-900 text-white flex justify-between items-center",children:[s.jsx("h3",{className:"font-black text-sm",children:" "}),s.jsx("button",{onClick:()=>H(!1),className:"w-7 h-7 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{id:"addr-layer-list-edit",className:"flex-1 w-full"})]})}),G&&s.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 backdrop-blur-sm bg-slate-950/40 text-left",children:s.jsxs("div",{className:"relative w-full max-w-lg bg-white rounded-[2rem] shadow-2xl overflow-hidden animate-in zoom-in-95",children:[s.jsxs("div",{className:"px-6 py-5 bg-indigo-600 text-white flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-black",children:" "}),s.jsx("button",{onClick:()=>X(!1),className:"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"p-6",children:s.jsxs("form",{onSubmit:async Ne=>{Ne.preventDefault();const _e={customerId:o.customer_id,alias:Ne.target.alias.value,recipient:Ne.target.recipient.value,mobile:Ne.target.mobile.value,zip:Ne.target.zip.value||null,addr1:Ne.target.addr1.value,addr2:Ne.target.addr2.value||null,isDefault:Ne.target.isDefault.checked,memo:Ne.target.memo.value||null};try{if(editingAddress.address_id){const Oe={..._e,addressId:editingAddress.address_id};await Ke("update_customer_address",Oe)}else await Ke("create_customer_address",_e);K(o.customer_id),X(!1)}catch(Oe){a(""," : "+Oe)}},className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-600 ml-1",children:""}),s.jsx("input",{name:"alias",value:editingAddress?.address_alias||"",onChange:Ne=>setEditingAddress(_e=>({..._e,address_alias:Ne.target.value})),required:!0,className:"w-full h-11 px-3 rounded-lg bg-white border border-slate-400 font-bold text-sm text-black"})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-600 ml-1",children:""}),s.jsx("input",{name:"recipient",value:editingAddress?.recipient_name||"",onChange:Ne=>setEditingAddress(_e=>({..._e,recipient_name:Ne.target.value})),required:!0,className:"w-full h-11 px-3 rounded-lg bg-white border border-slate-400 font-bold text-sm text-black"})]})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-600 ml-1",children:""}),s.jsx("input",{name:"mobile",value:editingAddress?.mobile_number||"",onChange:Ne=>setEditingAddress(_e=>({..._e,mobile_number:kn(Ne.target.value)})),required:!0,className:"w-full h-11 px-3 rounded-lg bg-white border border-slate-400 font-bold text-sm text-black"})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{className:"col-span-1 space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-600 ml-1",children:""}),s.jsx("input",{name:"zip",value:editingAddress?.zip_code||"",readOnly:!0,onClick:Le,className:"w-full h-11 px-3 rounded-lg bg-white border border-slate-400 font-black text-center text-sm cursor-pointer text-black"})]}),s.jsxs("div",{className:"col-span-3 space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-600 ml-1",children:""}),s.jsx("input",{name:"addr1",value:editingAddress?.address_primary||"",readOnly:!0,onClick:Le,className:"w-full h-11 px-3 rounded-lg bg-white border border-slate-400 font-bold text-sm px-3 cursor-pointer text-black"})]})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-600 ml-1",children:" "}),s.jsx("input",{name:"addr2",value:editingAddress?.address_detail||"",onChange:Ne=>setEditingAddress(_e=>({..._e,address_detail:Ne.target.value})),className:"w-full h-11 px-3 rounded-lg bg-white border border-slate-400 font-bold text-sm text-black"})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("label",{className:"text-xs font-black text-slate-600 ml-1",children:" "}),s.jsx("input",{name:"memo",value:editingAddress?.shipping_memo||"",onChange:Ne=>setEditingAddress(_e=>({..._e,shipping_memo:Ne.target.value})),className:"w-full h-11 px-3 rounded-lg bg-white border border-slate-400 font-bold text-sm text-black"})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[s.jsx("input",{type:"checkbox",name:"isDefault",defaultChecked:editingAddress.is_default,className:"w-4 h-4 rounded text-indigo-600"}),s.jsx("span",{className:"text-xs font-black text-slate-500",children:"  "})]}),s.jsx("div",{className:"flex justify-end pt-4",children:s.jsx("button",{type:"submit",className:"h-10 px-10 bg-indigo-600 text-white rounded-xl font-black shadow-lg shadow-indigo-600/20 hover:bg-indigo-500 transition-all text-xs",children:""})})]})})]})}),$&&s.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 backdrop-blur-md bg-slate-900/40 animate-in fade-in duration-300",children:s.jsxs("div",{className:"relative w-full max-w-4xl bg-white rounded-[2rem] shadow-2xl overflow-hidden animate-in zoom-in-95 flex flex-col max-h-[70vh]",children:[s.jsxs("div",{className:"px-6 py-5 bg-slate-800 text-white flex justify-between items-center shrink-0",children:[s.jsxs("h3",{className:"text-lg font-black flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-400",children:"group"}),"   ",s.jsxs("span",{className:"text-slate-400 font-light text-sm",children:[" ",B.length," ."]})]}),s.jsx("button",{onClick:()=>Q(!1),className:"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"sticky top-0 bg-slate-50 z-20 border-b border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase",children:""}),s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase",children:""}),s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase",children:""}),s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase text-center",children:""}),s.jsx("th",{className:"px-6 py-3 font-black text-slate-500 text-xs uppercase text-center",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:B.map(Ne=>s.jsxs("tr",{className:"hover:bg-indigo-50/50 transition-colors cursor-pointer group",onClick:()=>{ce(Ne),Q(!1)},children:[s.jsx("td",{className:"px-6 py-4 font-black text-slate-800",children:Ne.customer_name}),s.jsx("td",{className:"px-6 py-4 font-bold text-slate-600",children:kn(Ne.mobile_number)}),s.jsx("td",{className:"px-6 py-4 text-slate-500 text-xs break-all",children:Ne.address_primary}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black ${(Ne.status||"")===""?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"}`,children:(Ne.status||"")===""?"":""})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("button",{className:"px-4 py-1.5 rounded-lg bg-white border border-slate-200 text-indigo-600 font-black text-xs group-hover:bg-indigo-600 group-hover:text-white group-hover:border-indigo-600 transition-all",children:""})})]},Ne.customer_id))})]})}),s.jsx("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-200 flex justify-end shrink-0",children:s.jsx("button",{onClick:()=>Q(!1),className:"px-6 py-2 bg-white border border-slate-200 text-slate-600 rounded-xl font-black text-xs hover:bg-slate-100 transition-all",children:""})})]})}),U&&s.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col overflow-hidden border border-white/20 scale-in-center",children:[s.jsxs("div",{className:"px-6 py-5 bg-slate-800 text-white flex justify-between items-center shrink-0",children:[s.jsxs("h3",{className:"text-lg font-black flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-400",children:"history"}),"   ",s.jsxs("span",{className:"text-slate-400 font-light text-sm",children:[o?.customer_name," "]})]}),s.jsx("button",{onClick:()=>te(!1),className:"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 bg-slate-50/10",children:Z.length===0?s.jsxs("div",{className:"h-40 flex flex-col items-center justify-center text-slate-400 italic font-bold",children:[s.jsx("span",{className:"material-symbols-rounded text-4xl mb-2 opacity-20",children:"history"}),"   ."]}):s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-slate-200/50"}),s.jsx("div",{className:"space-y-6 relative",children:Z.map(Ne=>s.jsxs("div",{className:"relative pl-10",children:[s.jsx("div",{className:"absolute left-3 w-2.5 h-2.5 rounded-full bg-indigo-500 border-2 border-white translate-x-[-1px] z-10"}),s.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-slate-100/50",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("span",{className:"text-[10px] font-black px-2 py-0.5 bg-slate-100 text-slate-500 rounded-full uppercase tracking-wider",children:[Ne.field_name," "]}),s.jsxs("span",{className:"text-[10px] font-bold text-slate-400 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-xs",children:"schedule"}),Ne.changed_at?new Date(Ne.changed_at).toLocaleString():" "]})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm font-bold",children:[s.jsxs("div",{className:"flex-1 p-2.5 bg-rose-50/50 rounded-xl border border-rose-100/30",children:[s.jsx("div",{className:"text-[9px] font-black text-rose-300 uppercase mb-0.5",children:" "}),s.jsx("div",{className:"text-rose-600 truncate",children:Ne.old_value||"()"})]}),s.jsx("span",{className:"material-symbols-rounded text-slate-300 transform transition-transform",children:"arrow_right_alt"}),s.jsxs("div",{className:"flex-1 p-2.5 bg-emerald-50/50 rounded-xl border border-emerald-100/30",children:[s.jsx("div",{className:"text-[9px] font-black text-emerald-300 uppercase mb-0.5",children:" "}),s.jsx("div",{className:"text-emerald-600 truncate",children:Ne.new_value||"()"})]})]})]})]},Ne.log_id))})]})}),s.jsx("div",{className:"px-6 py-4 bg-white border-t border-slate-100 flex justify-end",children:s.jsx("button",{onClick:()=>te(!1),className:"px-6 h-10 rounded-xl bg-slate-800 text-white font-black text-sm hover:bg-slate-700 transition-all",children:""})})]})})]})};let r5=!1,qm=null;const ps=()=>{const[a,e]=F.useState(!1),[t,r]=F.useState(!1),{promptAdminPassword:n,showAlert:i}=wa(),l=F.useCallback(async()=>{if(r5&&qm){const c=await qm;return c&&e(!0),c}return r5=!0,qm=(async()=>{try{const c=await n();return c===null?!1:(r(!0),await ht("verify_admin_password",{password:c})?(e(!0),!0):(await i(" ","  ."),!1))}catch(c){return await i("","   : "+c),!1}finally{r(!1),r5=!1,qm=null}})(),await qm},[n,i]),o=F.useCallback(async c=>{r(!0);try{return await ht("verify_admin_password",{password:c})?(e(!0),!0):!1}catch(d){return console.error(d),!1}finally{r(!1)}},[]);return{isAuthorized:a,isVerifying:t,checkAdmin:l,verifyPassword:o}},kue=()=>{const a=an(),{showAlert:e,showConfirm:t}=wa(),{isAuthorized:r,checkAdmin:n,isVerifying:i}=ps(),[l,o]=F.useState([]),[c,d]=F.useState(""),[u,h]=F.useState(!1),[f,p]=F.useState(!1),[g,b]=F.useState({id:"",name:"",organizer:"",manager:"",location:"",start:new Date().toISOString().split("T")[0],end:"",memo:""}),w=F.useRef(!1);F.useEffect(()=>{if(w.current)return;w.current=!0,(async()=>await n()||a("/"))()},[n,a]),F.useEffect(()=>{r&&j()},[r]);const j=async(R="")=>{h(!0);try{const P=await Ke("get_all_events",{query:R});o(P||[])}catch(P){console.error(P),e("","  : "+P.message||P),o([])}finally{h(!1)}},k=()=>{j(c)},T=(R=null)=>{b(R?{id:R.event_id,name:R.event_name,organizer:R.organizer||"",manager:R.manager_name||"",location:R.location_address||"",start:R.start_date||"",end:R.end_date||"",memo:R.memo||""}:{id:"",name:"",organizer:"",manager:"",location:"",start:new Date().toISOString().split("T")[0],end:"",memo:""}),p(!0)},E=async()=>{if(!g.name.trim())return e(""," .");if(!await t(" ","  ?"))return;const P={event_id:g.id||null,event_name:g.name,organizer:g.organizer||null,manager_name:g.manager||null,manager_contact:null,location_address:g.location||null,location_detail:null,start_date:g.start||null,end_date:g.end||null,memo:g.memo||null};try{g.id?await Ke("update_event",P):await Ke("create_event",P),p(!1),await e("",g.id?".":"."),j(c)}catch(H){console.error(H),e(""," : "+H)}},I=async()=>{if(g.id&&await t(" ",`   ?
(        )`))try{await Ke("delete_event",{event_id:g.id}),p(!1),await e("","."),j(c)}catch(R){console.error(R),e(""," : "+R)}};return r?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-2 bg-[#f8fafc]",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-blue-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-blue-600 uppercase",children:"Event Location Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["()  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Location Master"})]})]})}),s.jsxs("div",{className:"flex justify-end gap-3 items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-rounded absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-lg",children:"search"}),s.jsx("input",{value:c,onChange:R=>d(R.target.value),onKeyDown:R=>R.key==="Enter"&&k(),className:"pl-10 pr-4 h-11 w-64 bg-white border border-slate-200 rounded-xl text-sm font-bold focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all outline-none shadow-sm",placeholder:" ..."})]}),s.jsx("button",{onClick:k,className:"h-11 px-6 rounded-xl bg-white border border-slate-200 text-slate-600 font-bold text-sm hover:bg-slate-50 transition-all shadow-sm",children:""}),s.jsxs("button",{onClick:()=>T(),className:"h-11 px-6 rounded-xl bg-blue-600 text-white font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2 active:scale-95",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"add"}),"  "]})]})]}),s.jsxs("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pb-6 lg:pb-8 min-[2000px]:pb-12 mt-4 overflow-hidden",children:[s.jsx("div",{className:"h-full bg-white rounded-[1.5rem] border border-slate-200 shadow-sm overflow-hidden flex flex-col relative",children:s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar",children:s.jsxs("table",{className:"w-full text-sm border-collapse table-fixed",children:[s.jsx("thead",{className:"bg-slate-50/80 backdrop-blur-md sticky top-0 z-10 border-b border-slate-200 shadow-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-5 py-4 w-[5%] text-center text-[10px] font-black uppercase text-slate-400 tracking-wider",children:"No"}),s.jsx("th",{className:"px-5 py-4 w-[20%] text-left text-[10px] font-black uppercase text-slate-400 tracking-wider",children:""}),s.jsx("th",{className:"px-5 py-4 w-[14%] text-left text-[10px] font-black uppercase text-slate-400 tracking-wider",children:""}),s.jsx("th",{className:"px-5 py-4 w-[10%] text-left text-[10px] font-black uppercase text-slate-400 tracking-wider",children:""}),s.jsx("th",{className:"px-5 py-4 w-[15%] text-left text-[10px] font-black uppercase text-slate-400 tracking-wider",children:""}),s.jsx("th",{className:"px-5 py-4 w-[18%] text-center text-[10px] font-black uppercase text-slate-400 tracking-wider",children:""}),s.jsx("th",{className:"px-5 py-4 w-[18%] text-left text-[10px] font-black uppercase text-slate-400 tracking-wider",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:u?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"p-10 text-center",children:s.jsx("span",{className:"material-symbols-rounded spin text-slate-400 text-2xl",children:"sync"})})}):l.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"p-10 text-center text-slate-400",children:"  ."})}):l.map(R=>s.jsxs("tr",{onClick:()=>T(R),className:"hover:bg-blue-50/40 cursor-pointer transition-colors group",children:[s.jsx("td",{className:"px-5 py-4 text-center text-slate-400 font-mono text-[11px]",children:l.indexOf(R)+1}),s.jsx("td",{className:"px-5 py-4 font-bold text-slate-700 truncate",title:R.event_name,children:R.event_name}),s.jsx("td",{className:"px-5 py-4 text-slate-600 truncate",title:R.organizer,children:R.organizer||"-"}),s.jsx("td",{className:"px-5 py-4 text-slate-600 truncate",title:R.manager_name,children:R.manager_name||"-"}),s.jsx("td",{className:"px-5 py-4 text-slate-600 truncate",title:R.location_address,children:R.location_address||"-"}),s.jsx("td",{className:"px-5 py-4 text-center",children:s.jsxs("span",{className:"bg-blue-50 text-blue-600 px-3 py-1 rounded-lg text-xs font-bold border border-blue-100",children:[R.start_date||"-"," ~ ",R.end_date||"-"]})}),s.jsx("td",{className:"px-5 py-4 text-slate-500 truncate max-w-[200px]",title:R.memo,children:R.memo||"-"})]},R.event_id))})]})})}),f&&s.jsx("div",{className:"modal flex fixed inset-0 z-50 items-center justify-center bg-black/60 backdrop-blur-md animate-in fade-in duration-300",children:s.jsxs("div",{className:"bg-white w-[850px] rounded-[2.5rem] shadow-2xl overflow-hidden p-0 border border-white/50 relative transform transition-all scale-100",children:[s.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-white p-8 border-b border-slate-100 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[s.jsx("span",{className:"w-10 h-10 rounded-2xl bg-blue-100 text-blue-600 flex items-center justify-center shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded text-2xl","aria-hidden":"true",children:g.id?"edit_calendar":"add_circle"})}),g.id?"  ":"  "]}),s.jsx("p",{className:"text-slate-400 text-sm mt-1 ml-14 font-medium",children:"()    ."})]}),s.jsx("button",{onClick:()=>p(!1),className:"w-10 h-10 rounded-full bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-slate-600 flex items-center justify-center transition-all",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"close"})})]}),s.jsxs("div",{className:"p-8 bg-slate-50/50",children:[s.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[s.jsx("div",{className:"col-span-7 space-y-5",children:s.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"w-1 h-4 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"   "})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"event-name",className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{id:"event-name",value:g.name,onChange:R=>b({...g,name:R.target.value}),className:"w-full h-12 bg-slate-50 border border-slate-200 rounded-2xl font-bold text-slate-800 px-4 focus:bg-white focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all text-sm shadow-inner",placeholder:"  ",autoFocus:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"event-organizer",className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:"/"}),s.jsx("input",{id:"event-organizer",value:g.organizer,onChange:R=>b({...g,organizer:R.target.value}),className:"w-full h-11 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all px-4 text-sm",placeholder:" "})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"event-manager",className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:" "}),s.jsx("input",{id:"event-manager",value:g.manager,onChange:R=>b({...g,manager:R.target.value}),className:"w-full h-11 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all px-4 text-sm",placeholder:" "})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:"   "}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-rounded absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-lg",children:"location_on"}),s.jsx("input",{value:g.location,onChange:R=>b({...g,location:R.target.value}),className:"w-full h-11 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 pl-10 pr-4 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all text-sm",placeholder:"    "})]})]})]})}),s.jsx("div",{className:"col-span-5 space-y-5",children:s.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm space-y-4 h-full",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"w-1 h-4 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"   "})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:" "}),s.jsx("input",{type:"date",value:g.start,onChange:R=>b({...g,start:R.target.value}),className:"w-full h-11 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 px-4 focus:border-blue-500 transition-all text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:" "}),s.jsx("input",{type:"date",value:g.end,onChange:R=>b({...g,end:R.target.value}),className:"w-full h-11 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 px-4 focus:border-blue-500 transition-all text-sm"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:" ()"}),s.jsx("textarea",{value:g.memo,onChange:R=>b({...g,memo:R.target.value}),className:"w-full h-24 bg-slate-50 border border-slate-200 rounded-xl p-4 text-sm font-medium text-slate-600 focus:bg-white focus:border-blue-500 transition-all resize-none shadow-inner",placeholder:"     ..."})]})]})})]}),s.jsxs("div",{className:"flex justify-between items-center mt-8 border-t border-slate-200 pt-6",children:[g.id?s.jsxs("button",{onClick:I,className:"h-12 px-6 rounded-2xl bg-red-50 text-red-500 font-bold hover:bg-red-100 transition-all text-sm flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"delete"}),"  "]}):s.jsx("div",{}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>p(!1),className:"h-12 px-8 rounded-2xl bg-white border border-slate-200 text-slate-500 font-bold hover:bg-slate-50 transition-colors text-sm",children:""}),s.jsxs("button",{onClick:E,className:"h-12 px-10 rounded-2xl bg-blue-600 text-white font-bold hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all hover:scale-105 active:scale-95 text-sm flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded","aria-hidden":"true",children:"save"}),g.id?"  ":"  "]})]})]})]})]})})]})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[i?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Ii,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:i?"  ...":"  ..."})]})})},Cue=()=>{const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState([]),[n,i]=F.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[l,o]=F.useState(!1),[c,d]=F.useState(null),[u,h]=F.useState(null),[f,p]=F.useState(null),[g,b]=F.useState(!1),[w,j]=F.useState(!1),[k,T]=F.useState([]),E={urgent:t.filter($=>$.priority===""&&$.status!=="").length,pending:t.filter($=>["",""].includes($.status)).length};F.useEffect(()=>{I()},[]);const I=async()=>{try{const $=await Ke("get_consultations",{startDate:n.startDate,endDate:n.endDate});r($||[])}catch($){console.error($),a("","   : "+$.message)}},R=async()=>{try{b(!0);const $=await Ke("get_ai_summary");a("AI  ",$.summary||$)}catch($){console.error($),a("","AI  : "+$.message)}finally{b(!1)}},P=($=null)=>{d($?{...$}:{consult_id:null,customer_id:null,guest_name:"",contact:"",channel:"",counselor_name:"",category:" ",priority:"",title:"",content:"",answer:"",status:"",consult_date:new Date().toISOString().split("T")[0],follow_up_date:""}),h(null),p(null),o(!0)},H=async $=>{$.preventDefault();try{c.consult_id?(await Ke("update_consultation",{consultId:c.consult_id,answer:c.answer||null,status:c.status,priority:c.priority,followUpDate:c.follow_up_date||null}),a("","  .")):(await Ke("create_consultation",{customerId:c.customer_id||null,guestName:c.guest_name,contact:c.contact,channel:c.channel,counselorName:c.counselor_name,category:c.category,priority:c.priority,title:c.title,content:c.content}),a("","  .")),o(!1),I()}catch(Q){a(""," : "+Q.message)}},G=async()=>{if(c?.consult_id&&await e(" ","    ?"))try{await Ke("delete_consultation",{consult_id:c.consult_id}),a("","."),o(!1),I()}catch($){a(""," : "+$.message)}},X=async()=>{if(c){b(!0);try{const $=await Ke("get_ai_advisor",{customerId:c.customer_id||null,category:c.category,title:c.title,content:c.content});p($)}catch($){console.error($),$.message==="AI_QUOTA_EXCEEDED"?a("AI ","    ."):a("","AI  : "+$.message)}finally{b(!1)}}},U=async()=>{if(c?.customer_id){b(!0);try{const $=await Ke("get_ai_briefing",{customer_id:c.customer_id});h($.briefing||$)}catch($){console.error($),$.message==="AI_QUOTA_EXCEEDED"?a("AI ","    ."):a("","AI  : "+$.message)}finally{b(!1)}}},te=async $=>{if(!$||$.length<1){a(""," .");return}try{const Q=await Ke("search_customers_by_name",{query:$});!Q||Q.length===0||(Q.length===1?Z(Q[0]):(T(Q),j(!0)))}catch(Q){console.error(Q),a("","    .")}},Z=$=>{d(Q=>({...Q,customer_id:$.customer_id,guest_name:$.customer_name,contact:$.mobile_number,counselor_name:Q.counselor_name||""})),j(!1)},J=$=>{$.key==="Enter"&&($.preventDefault(),te($.target.value))},B=$=>{switch($){case"":return"bg-indigo-100 text-indigo-700 border-indigo-200";case"":return"bg-blue-100 text-blue-700 border-blue-200";case"":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"":return"bg-amber-100 text-amber-700 border-amber-200";default:return"bg-slate-100 text-slate-600 border-slate-200"}},W=$=>{switch($){case"":return"bg-rose-100 text-rose-700 border-rose-200 animate-pulse";case"":return"bg-orange-100 text-orange-700 border-orange-200";case"":return"bg-slate-100 text-slate-600 border-slate-200";default:return"bg-sky-100 text-sky-700 border-sky-200"}};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:[s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Customer Relationship Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["  (CRM) ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Consultation"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 mb-4",children:[s.jsxs("div",{className:"lg:col-span-3 flex gap-3",children:[s.jsxs("div",{className:"flex-1 bg-white rounded-2xl border border-rose-100 p-3 shadow-sm flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-rose-50 flex items-center justify-center text-rose-500",children:s.jsx("span",{className:"material-symbols-rounded",children:"campaign"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-rose-400 uppercase",children:" "}),s.jsxs("div",{className:"text-xl font-black text-slate-700",children:[E.urgent,""]})]})]}),s.jsxs("div",{className:"flex-1 bg-white rounded-2xl border border-indigo-100 p-3 shadow-sm flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 flex items-center justify-center text-indigo-500",children:s.jsx("span",{className:"material-symbols-rounded",children:"pending_actions"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-indigo-400 uppercase",children:" "}),s.jsxs("div",{className:"text-xl font-black text-slate-700",children:[E.pending,""]})]})]})]}),s.jsxs("div",{className:"lg:col-span-9 bg-white rounded-2xl border border-slate-200 p-3 shadow-sm flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-slate-400 ml-2",children:"filter_alt"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-black text-slate-500 uppercase",children:""}),s.jsx("input",{type:"date",value:n.startDate,onChange:$=>i({...n,startDate:$.target.value}),className:"h-9 px-3 rounded-lg bg-slate-50 border border-slate-200 text-sm font-bold text-slate-700"}),s.jsx("span",{className:"text-slate-400",children:"~"}),s.jsx("input",{type:"date",value:n.endDate,onChange:$=>i({...n,endDate:$.target.value}),className:"h-9 px-3 rounded-lg bg-slate-50 border border-slate-200 text-sm font-bold text-slate-700"})]}),s.jsx("div",{className:"h-6 w-px bg-slate-200 mx-1"}),s.jsx("button",{onClick:I,className:"h-9 px-4 rounded-lg bg-slate-800 text-white font-black hover:bg-slate-700 transition-all text-sm shadow-md shadow-slate-200",children:""}),s.jsx("div",{className:"flex-1"}),s.jsxs("button",{onClick:R,className:"h-9 px-4 rounded-lg bg-white border border-indigo-200 text-indigo-600 font-black hover:bg-indigo-50 transition-all text-sm flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"psychology"})," AI "]}),s.jsxs("button",{onClick:()=>P(),className:"h-9 px-5 rounded-lg bg-indigo-600 text-white font-black hover:bg-indigo-500 transition-all text-sm shadow-md shadow-indigo-200 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"add"}),"  "]})]})]})]}),s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 flex flex-col overflow-hidden flex-1 pb-4",children:s.jsxs("div",{className:"bg-white rounded-[1.5rem] border border-slate-200 shadow-sm flex flex-col overflow-hidden h-full",children:[s.jsx("div",{className:"px-5 py-3 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:s.jsxs("span",{className:"text-xs font-black text-slate-500",children:[" : ",s.jsx("span",{className:"text-indigo-600",children:t.length}),""]})}),s.jsx("div",{className:"flex-1 overflow-auto bg-slate-50/30",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-500 font-black text-xs uppercase border-b border-slate-200 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-center w-[10%] min-w-[90px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[8%] min-w-[70px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-left w-[15%] min-w-[120px]",children:" "}),s.jsx("th",{className:"px-4 py-3 text-left w-[12%] min-w-[100px]",children:" /"}),s.jsx("th",{className:"px-4 py-3 text-center w-[10%] min-w-[80px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-left",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[8%] min-w-[60px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[8%] min-w-[60px]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"8",className:"p-20 text-center text-slate-400 font-bold italic",children:"  ."})}):t.map($=>s.jsxs("tr",{onClick:()=>P($),className:"hover:bg-slate-50 group transition-colors bg-white cursor-pointer",children:[s.jsx("td",{className:"px-4 py-3 text-center text-slate-500 text-xs font-mono",children:$.consult_date}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black border ${B($.status)}`,children:$.status})}),s.jsxs("td",{className:"px-4 py-3",children:[s.jsx("div",{className:"font-bold text-slate-700",children:$.guest_name}),s.jsx("div",{className:"text-[10px] text-slate-400",children:$.contact})]}),s.jsxs("td",{className:"px-4 py-3",children:[s.jsx("div",{className:"font-bold text-slate-700 text-xs",children:$.channel}),s.jsx("div",{className:"text-[10px] text-slate-400",children:$.counselor_name})]}),s.jsx("td",{className:"px-4 py-3 text-center text-slate-600 text-xs",children:$.category}),s.jsx("td",{className:"px-4 py-3 font-bold text-slate-700 truncate max-w-[300px]",children:$.title}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black border ${W($.priority)}`,children:$.priority})}),s.jsx("td",{className:"px-4 py-3 text-center",children:$.sentiment?s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black ${$.sentiment.includes("")?"bg-emerald-100 text-emerald-600":$.sentiment.includes("")?"bg-rose-100 text-rose-600":"bg-slate-100 text-slate-500"}`,children:$.sentiment}):s.jsx("span",{className:"text-slate-300",children:"-"})})]},$.consult_id))})]})})]})}),l&&c&&s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:s.jsxs("div",{className:"relative w-full max-w-4xl bg-white rounded-[2rem] shadow-2xl overflow-hidden animate-in zoom-in-95 flex flex-col max-h-[90vh]",children:[s.jsxs("div",{className:"px-8 py-5 bg-slate-800 text-white flex justify-between items-center shrink-0",children:[s.jsxs("h3",{className:"text-xl font-black flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-400",children:"support_agent"}),c.consult_id?"    ":"  "]}),s.jsx("button",{onClick:()=>o(!1),className:"w-9 h-9 rounded-full hover:bg-white/20 transition-colors flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-8 bg-[#f8fafc]",children:s.jsxs("form",{onSubmit:H,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-x-8 gap-y-4 items-start",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between items-center h-7",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:"  ()"}),c.customer_id&&s.jsxs("button",{type:"button",onClick:U,className:"text-[10px] font-bold text-indigo-600 bg-indigo-50 px-2 py-1 rounded border border-indigo-100 hover:bg-indigo-100 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-xs",children:"summarize"})," AI  "]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:c.consult_id?"  ":"  (Tab/  )",value:c.guest_name||"",onChange:$=>d({...c,guest_name:$.target.value,customer_id:null}),onBlur:$=>te($.target.value),onKeyDown:J,disabled:!!c.consult_id,className:`w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700 bg-white focus:ring-2 focus:ring-indigo-500 ${c.consult_id?"bg-slate-100 text-slate-500 cursor-not-allowed":""}`}),c.customer_id&&s.jsxs("span",{className:"absolute right-3 top-2.5 text-[10px] font-bold text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded border border-indigo-100 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-[10px]",children:"link"})," "]})]}),u&&s.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-100 rounded-lg text-xs leading-relaxed text-blue-800 animate-in fade-in",children:[s.jsx("strong",{className:"block mb-1 text-blue-900",children:" AI  :"}),u]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"flex justify-between items-center h-7",children:s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:" "})}),s.jsxs("select",{value:c.channel,onChange:$=>d({...c,channel:$.target.value}),className:"w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700 bg-white",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"flex justify-between items-center h-7",children:s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:" "})}),s.jsx("input",{type:"date",value:c.consult_date,onChange:$=>d({...c,consult_date:$.target.value}),className:"w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700 bg-slate-50"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"flex justify-between items-center h-7",children:s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:" ()"})}),s.jsx("input",{type:"text",value:c.counselor_name,onChange:$=>d({...c,counselor_name:$.target.value}),className:"w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700",placeholder:" "})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"flex justify-between items-center h-7",children:s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:" "})}),s.jsx("input",{type:"text",value:c.guest_name,onChange:$=>d({...c,guest_name:$.target.value}),readOnly:!!c.consult_id,className:`w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700 ${c.consult_id?"bg-slate-100 text-slate-500 focus:ring-0":""}`,placeholder:"   "})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"flex justify-between items-center h-7",children:s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:" "})}),s.jsxs("select",{value:c.category,onChange:$=>d({...c,category:$.target.value}),className:"w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700 bg-white",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"flex justify-between items-center h-7",children:s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:""})}),s.jsxs("select",{value:c.priority,onChange:$=>d({...c,priority:$.target.value}),className:"w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700 bg-white",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"flex justify-between items-center h-7",children:s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:""})}),s.jsx("input",{type:"text",value:c.contact,onChange:$=>d({...c,contact:$.target.value}),className:"w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700",placeholder:""})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:" "}),s.jsx("input",{type:"text",value:c.title,onChange:$=>d({...c,title:$.target.value}),className:"w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-black text-slate-800 placeholder-slate-400 bg-white",placeholder:"  "})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:"  "}),s.jsxs("button",{type:"button",onClick:X,className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white px-3 py-1 rounded-lg text-xs font-black flex items-center gap-1 hover:shadow-lg hover:shadow-indigo-200 transition-all",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"psychology"})," AI   "]})]}),s.jsx("textarea",{value:c.content,onChange:$=>d({...c,content:$.target.value}),rows:"4",className:"w-full bg-white border border-slate-200 rounded-xl p-4 text-sm font-medium text-slate-600 resize-none highlight-focus",placeholder:"   ."})]}),f&&s.jsxs("div",{className:"bg-purple-50 border border-purple-100 rounded-xl p-4 space-y-3 animate-in fade-in slide-in-from-top-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-purple-700",children:[s.jsx("span",{className:"material-symbols-rounded",children:"magic_button"}),s.jsx("h4",{className:"text-xs font-black uppercase",children:"Jenny's AI  "})]}),s.jsxs("div",{className:"space-y-2 text-sm text-slate-700 bg-white/60 p-3 rounded-lg border border-purple-100/50",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:"font-bold shrink-0 w-12 text-purple-600",children:""}),s.jsx("span",{children:f.analysis})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:"font-bold shrink-0 w-12 text-blue-600",children:""}),s.jsx("span",{children:f.strategy})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:"font-bold shrink-0 w-12 text-emerald-600",children:""}),s.jsxs("span",{className:"italic",children:['"',f.recommended_answer,'"']})]}),s.jsxs("div",{className:"flex gap-2 text-rose-600 font-bold bg-rose-50 p-1.5 rounded",children:[s.jsx("span",{className:"shrink-0 w-12",children:""}),s.jsx("span",{children:f.caution_points})]})]})]}),c.consult_id&&s.jsx("div",{className:"pt-6 border-t border-slate-200",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("label",{className:"text-sm font-black text-indigo-600 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"check_circle"}),"    ",f&&s.jsx("button",{type:"button",onClick:()=>d({...c,answer:f.recommended_answer}),className:"ml-auto text-xs bg-emerald-100 text-emerald-600 px-2 py-0.5 rounded font-bold hover:bg-emerald-200",children:"AI  "})]}),s.jsx("textarea",{value:c.answer||"",onChange:$=>d({...c,answer:$.target.value}),rows:"3",className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-4 text-sm font-medium text-slate-700 resize-none focus:bg-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"  "}),s.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:" "}),s.jsxs("select",{value:c.status,onChange:$=>d({...c,status:$.target.value}),className:"w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700 bg-white",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 uppercase",children:" "}),s.jsx("input",{type:"date",value:c.follow_up_date||"",onChange:$=>d({...c,follow_up_date:$.target.value}),className:"w-full h-10 px-3 rounded-lg border border-slate-200 text-sm font-bold text-slate-700 bg-white"})]})]})]})})]})]})}),s.jsxs("div",{className:"p-5 border-t border-slate-200 bg-white flex justify-between shrink-0",children:[c.consult_id?s.jsxs("button",{type:"button",onClick:G,className:"h-10 px-5 rounded-xl bg-rose-50 text-rose-600 font-bold hover:bg-rose-100 transition-colors flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"delete"})," "]}):s.jsx("div",{}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>o(!1),className:"h-10 px-6 rounded-xl bg-white border border-slate-200 text-slate-500 font-bold hover:bg-slate-50 transition-colors",children:""}),s.jsxs("button",{onClick:H,className:"h-10 px-8 rounded-xl bg-indigo-600 text-white font-black hover:bg-indigo-500 transition-colors shadow-lg shadow-indigo-200 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"check"})," "]})]})]})]})}),w&&s.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg overflow-hidden animate-in zoom-in-95",children:[s.jsxs("div",{className:"px-5 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[s.jsx("h3",{className:"font-bold text-slate-800",children:"  "}),s.jsx("button",{onClick:()=>j(!1),className:"text-slate-400 hover:text-slate-600",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"max-h-[400px] overflow-y-auto p-2",children:k.map($=>s.jsxs("div",{onClick:()=>Z($),className:"p-3 hover:bg-indigo-50 rounded-xl cursor-pointer transition-colors border-b border-slate-50 last:border-0 group",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsxs("div",{className:"font-bold text-slate-700 flex items-center gap-2",children:[$.customer_name,s.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${$.level==="VIP"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-500"}`,children:$.level})]}),s.jsx("div",{className:"text-xs font-bold text-indigo-600",children:$.mobile_number})]}),s.jsxs("div",{className:"text-xs text-slate-400 truncate",children:[$.address_primary," ",$.address_detail]})]},$.customer_id))})]})}),g&&s.jsx("div",{className:"fixed inset-0 z-[300] bg-black/20 backdrop-blur-[2px] flex items-center justify-center cursor-wait",children:s.jsxs("div",{className:"bg-white px-6 py-4 rounded-2xl shadow-xl flex items-center gap-4 animate-bounce-custom",children:[s.jsx("span",{className:"material-symbols-rounded text-3xl text-indigo-500 animate-spin",children:"sync"}),s.jsx("div",{className:"text-sm font-bold text-slate-700",children:"AI  ..."})]})})]})},Aue=()=>{const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState([]),[n,i]=F.useState(1),l=20,[o,c]=F.useState({keyword:"",level:"",dateStart:"",dateEnd:"",dormantYears:"3",isDormantMode:!1}),[d,u]=F.useState(new Set),[h,f]=F.useState(!1),[p,g]=F.useState(""),[b,w]=F.useState(!1),[j,k]=F.useState(null),[T,E]=F.useState(!1),[I,R]=F.useState(!1),[P,H]=F.useState([]),[G,X]=F.useState(null);F.useEffect(()=>{U(!0)},[]);const U=async(he=!1)=>{let pe,Re,Te="",ke="";if(he)pe="1900-01-01",Re="2999-12-31",c(Le=>({...Le,dateStart:"",dateEnd:"",level:"",keyword:"",isDormantMode:!1}));else{if(pe=o.dateStart||"1900-01-01",Re=o.dateEnd||"2999-12-31",Te=o.keyword.trim(),ke=o.level||"",Te.length>0&&/^\d+$/.test(Te)&&Te.length<2){await a("","()    2  .");return}c(Le=>({...Le,isDormantMode:!1}))}try{const Le=await Ke("search_customer_batch",{start:pe,end:Re,keyword:Te,membershipLevel:ke});r(Le||[]),i(1),u(new Set)}catch(Le){console.error(Le),a("","   : "+Le.message)}},te=async()=>{c(Re=>({...Re,keyword:"",level:"",dateStart:"",dateEnd:"",isDormantMode:!0}));const he=parseFloat(o.dormantYears)||3,pe=Math.round(he*365);try{const Re=await Ke("search_dormant_customers",{daysThreshold:pe});r(Re||[]),i(1),u(new Set)}catch(Re){console.error(Re),a("","   : "+Re.message)}},Z=async()=>{if(d.size===0){await a("","  .");return}const he=p==="";let pe=he?` ${d.size}    ?`:` ${d.size}  ''  ?`;if(he&&h&&(pe+=`

 :     ( )  !`),pe+=`
    .`,!!await e(he?"  ":"  ",pe))try{await Ke("delete_customers_batch",{ids:Array.from(d),permanent:he,alsoDeleteSales:he?h:!1}),await a("",he?`${d.size}    .`:`${d.size}    .`),o.isDormantMode?te():U(!1)}catch(Re){a(""," : "+Re.message)}},J=async()=>{if(d.size===0){await a("","  .");return}if(await e("  ",` ${d.size}   ''  ?`))try{await Ke("reactivate_customers_batch",{ids:Array.from(d)}),await a("",`${d.size}    .`),o.isDormantMode?te():U(!1)}catch(he){a(""," : "+he.message)}},B=async()=>{if(t.length===0){await a("","  .");return}const he=["No","","","","","","","",""],pe=t.map((Te,ke)=>[ke+1,Te.customer_name,Te.mobile_number,Te.membership_level||"",Te.join_date||"",Te.zip_code||"",Te.address_primary||"",Te.address_detail||"",Te.memo||""]);let Re="\uFEFF";Re+=he.join(",")+`
`,pe.forEach(Te=>{Re+=Te.map(ke=>`"${String(ke).replace(/"/g,'""')}"`).join(",")+`
`});try{const Te=new Blob([Re],{type:"text/csv;charset=utf-8;"}),ke=URL.createObjectURL(Te),Le=document.createElement("a");Le.href=ke,Le.download=`_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(Le),Le.click(),document.body.removeChild(Le),URL.revokeObjectURL(ke),a("","  .")}catch(Te){a("","  : "+Te.message)}},W=async he=>{if(he){E(!0),w(!0),k(null);try{const pe=await Ke("get_customer_ai_insight",{customer_id:he});k(pe)}catch(pe){console.error(pe),pe.message==="AI_QUOTA_EXCEEDED"?k({error:"    ."}):k({error:String(pe.message)})}finally{E(!1)}}},$=async he=>{X(he);try{const pe=await Ke("get_customer_logs",{customer_id:he.customer_id});H(pe||[]),R(!0)}catch(pe){a("","  : "+pe.message)}},Q=t.filter(he=>p===""?!0:((he.status||"")===""?"":he.status||"")===p),ne=Math.ceil(Q.length/l)||1,re=(n-1)*l,K=Q.slice(re,re+l),ae=he=>{if(he){const pe=new Set(K.map(Re=>Re.customer_id));u(Re=>new Set([...Re,...pe]))}else{const pe=new Set(K.map(Re=>Re.customer_id));u(Re=>{const Te=new Set(Re);return pe.forEach(ke=>Te.delete(ke)),Te})}},ce=(he,pe)=>{u(Re=>{const Te=new Set(Re);return pe?Te.add(he):Te.delete(he),Te})},de=K.length>0&&K.every(he=>d.has(he.customer_id));return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:[s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Customer Management System"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Batch View"})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 shadow-sm mb-4",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-black text-slate-500 uppercase",children:""}),s.jsx("input",{type:"date",value:o.dateStart,onChange:he=>c({...o,dateStart:he.target.value}),className:"h-9 px-3 rounded-lg bg-slate-50 border border-slate-200 text-sm font-bold text-slate-700"}),s.jsx("span",{className:"text-slate-400",children:"~"}),s.jsx("input",{type:"date",value:o.dateEnd,onChange:he=>c({...o,dateEnd:he.target.value}),className:"h-9 px-3 rounded-lg bg-slate-50 border border-slate-200 text-sm font-bold text-slate-700"})]}),s.jsx("div",{className:"h-6 w-px bg-slate-200 mx-1"}),s.jsxs("select",{value:o.level,onChange:he=>c({...o,level:he.target.value}),className:"h-10 px-2 rounded-lg bg-slate-50 border border-slate-200 text-sm font-bold text-slate-700",children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"VIP",children:"VIP"}),s.jsx("option",{value:"VVIP",children:"VVIP"}),s.jsx("option",{value:"/",children:"/"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{value:o.keyword,onChange:he=>c({...o,keyword:he.target.value}),placeholder:"   ",className:"h-9 w-48 pl-9 pr-3 rounded-lg bg-slate-50 border border-slate-200 text-sm font-bold text-slate-700 focus:ring-2 focus:ring-indigo-500"}),s.jsx("span",{className:"material-symbols-rounded absolute left-2.5 top-2 text-slate-400 text-lg",children:"search"})]}),s.jsx("button",{onClick:()=>U(!1),className:"h-9 px-4 rounded-lg bg-indigo-600 text-white font-black hover:bg-indigo-500 transition-all text-sm shadow-md shadow-indigo-200",children:""}),s.jsx("button",{onClick:()=>U(!0),className:"h-9 px-4 rounded-lg bg-white border border-slate-200 text-slate-600 font-black hover:bg-slate-50 transition-all text-sm",children:" "}),s.jsx("div",{className:"flex-1"}),s.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 px-3 py-1.5 rounded-lg border border-slate-200",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500 whitespace-nowrap",children:" ()"}),s.jsx("input",{type:"number",value:o.dormantYears,onChange:he=>c({...o,dormantYears:he.target.value}),className:"w-14 h-8 text-center text-sm font-bold bg-white border border-slate-300 rounded focus:ring-2 focus:ring-rose-200 transition-all p-0"}),s.jsx("span",{className:"text-xs font-bold text-slate-500 whitespace-nowrap",children:" "}),s.jsx("button",{onClick:te,className:"h-8 px-3 rounded bg-rose-100 text-rose-600 text-xs font-black hover:bg-rose-200 transition-colors whitespace-nowrap",children:""})]})]})})]}),s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 flex gap-1 mb-4",children:["","",""].map(he=>s.jsxs("button",{onClick:()=>{g(he),i(1),he===""&&u(new Set)},className:`px-6 py-2 rounded-xl font-black text-sm transition-all ${p===he?"bg-indigo-600 text-white shadow-lg shadow-indigo-200":"bg-white border border-slate-200 text-slate-400 hover:bg-slate-50"}`,children:[he," ",p===he&&s.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 bg-white/20 rounded text-[10px]",children:Q.length.toLocaleString()})]},he))}),s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 flex flex-col overflow-hidden flex-1 pb-4",children:s.jsxs("div",{className:"bg-white rounded-[1.5rem] border border-slate-200 shadow-sm flex flex-col overflow-hidden h-full",children:[s.jsxs("div",{className:"px-5 py-3 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[s.jsx("div",{className:"text-xs font-black text-slate-500 flex items-center gap-2",children:s.jsxs("span",{children:[" ",s.jsx("span",{className:"text-indigo-600 text-sm",children:t.length.toLocaleString()}),""]})}),s.jsxs("div",{className:"flex items-center gap-3",children:[p===""&&s.jsxs("button",{onClick:Z,className:"h-8 px-4 rounded-lg bg-rose-600 text-white font-black hover:bg-rose-500 transition-all flex items-center gap-1 text-xs shadow-sm shadow-rose-200",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"person_remove"}),"   "]}),p===""&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:J,className:"h-8 px-4 rounded-lg bg-indigo-600 text-white font-black hover:bg-indigo-500 transition-all flex items-center gap-1 text-xs shadow-sm shadow-indigo-200",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"person_add"}),"   "]}),s.jsxs("div",{className:"flex items-center gap-3 px-3 py-1 bg-rose-50 border border-rose-200 rounded-xl",children:[s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer group",onClick:()=>f(!h),children:[s.jsx("input",{type:"checkbox",checked:h,onChange:he=>f(he.target.checked),className:"w-4 h-4 rounded text-rose-600 focus:ring-rose-500 border-rose-300 cursor-pointer"}),s.jsx("span",{className:"text-xs font-bold text-rose-600 select-none",children:"   "})]}),s.jsx("div",{className:"h-4 w-px bg-rose-200"}),s.jsxs("button",{onClick:Z,className:"h-8 px-4 rounded-lg bg-rose-600 text-white font-black hover:bg-rose-700 transition-all flex items-center gap-1 text-xs shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"delete_forever"}),"  "]})]})]}),(p===""||p==="")&&s.jsx("div",{className:"h-4 w-px bg-slate-200 mx-1"}),s.jsxs("button",{onClick:B,className:"h-8 px-3 rounded-lg bg-white border border-emerald-200 text-emerald-600 font-black hover:bg-emerald-50 hover:border-emerald-300 transition-all flex items-center gap-1 text-xs",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"download"}),"  "]})]})]}),s.jsx("div",{className:"flex-1 overflow-auto bg-slate-50/30",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-500 font-black text-xs uppercase border-b border-slate-200 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-center w-[40px]",children:s.jsx("input",{type:"checkbox",checked:de,onChange:he=>ae(he.target.checked),disabled:p==="",className:`w-4 h-4 rounded text-indigo-600 border-slate-300 focus:ring-indigo-500 ${p===""?"opacity-20 cursor-not-allowed":""}`})}),s.jsx("th",{className:"px-4 py-3 text-center w-[5%] min-w-[50px]",children:"No"}),s.jsx("th",{className:"px-4 py-3 text-center w-[12%] min-w-[80px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[13%] min-w-[100px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[8%] min-w-[60px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[10%] min-w-[90px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[7%] min-w-[60px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-left",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[80px]",children:"AI "})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:K.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"8",className:"p-20 text-center text-slate-400 font-bold italic",children:"  ."})}):K.map((he,pe)=>s.jsxs("tr",{className:"hover:bg-slate-50 group transition-colors bg-white cursor-pointer",onClick:()=>$(he),children:[s.jsx("td",{className:"px-4 py-3 text-center",onClick:Re=>Re.stopPropagation(),children:s.jsx("input",{type:"checkbox",checked:d.has(he.customer_id),onChange:Re=>ce(he.customer_id,Re.target.checked),disabled:p==="",className:`w-4 h-4 rounded text-indigo-600 border-slate-300 focus:ring-indigo-500 ${p===""?"opacity-20 cursor-not-allowed":""}`})}),s.jsx("td",{className:"px-4 py-3 text-center text-slate-400 text-xs font-mono",children:re+pe+1}),s.jsx("td",{className:"px-4 py-3 text-center font-bold text-slate-700 cursor-pointer hover:text-indigo-600",title:he.customer_id,children:he.customer_name}),s.jsx("td",{className:"px-4 py-3 text-center font-mono text-slate-600 text-xs",children:he.mobile_number}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black uppercase ${he.membership_level==="VIP"?"bg-amber-100 text-amber-600":"bg-slate-100 text-slate-500"}`,children:he.membership_level||""})}),s.jsx("td",{className:"px-4 py-3 text-center text-slate-500 text-xs",children:he.join_date||"-"}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black ${(he.status||"")===""?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"}`,children:(he.status||"")===""?"":he.status||""})}),s.jsxs("td",{className:"px-4 py-3 text-slate-600 text-xs truncate max-w-[300px]",title:`${he.address_primary||""} ${he.address_detail||""}`,children:[he.address_primary," ",he.address_detail]}),s.jsx("td",{className:"px-4 py-3 text-center",onClick:Re=>Re.stopPropagation(),children:s.jsx("button",{onClick:()=>W(he.customer_id),className:"w-8 h-8 rounded-full hover:bg-indigo-50 text-indigo-300 hover:text-indigo-600 transition-all flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"auto_awesome"})})})]},he.customer_id))})]})}),s.jsxs("div",{className:"px-5 py-3 border-t border-slate-100 flex justify-between items-center bg-white",children:[s.jsxs("div",{className:"text-xs text-slate-400 font-medium",children:["Page ",n," of ",ne," (Showing ",Q.length," items)"]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>i(he=>Math.max(1,he-1)),disabled:n===1,className:"w-8 h-8 rounded-lg border border-slate-200 flex items-center justify-center text-slate-500 hover:bg-slate-50 disabled:opacity-30 disabled:hover:bg-white transition-all",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"chevron_left"})}),s.jsx("button",{onClick:()=>i(he=>Math.min(ne,he+1)),disabled:n===ne,className:"w-8 h-8 rounded-lg border border-slate-200 flex items-center justify-center text-slate-500 hover:bg-slate-50 disabled:opacity-30 disabled:hover:bg-white transition-all",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"chevron_right"})})]})]})]})}),b&&s.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm animate-in fade-in",children:s.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-[2rem] shadow-2xl overflow-hidden animate-in zoom-in-95 flex flex-col",children:[s.jsxs("div",{className:"px-6 py-5 bg-indigo-600 text-white flex justify-between items-center",children:[s.jsxs("h3",{className:"text-lg font-black flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"auto_awesome"})," AI  "]}),s.jsx("button",{onClick:()=>w(!1),className:"w-8 h-8 rounded-full hover:bg-white/20 transition-colors flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"p-6 min-h-[200px] flex flex-col justify-center",children:T?s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx("span",{className:"material-symbols-rounded text-4xl text-indigo-300 animate-spin",children:"sync"}),s.jsx("p",{className:"font-bold text-slate-500 animate-pulse",children:"   ..."})]}):j?.error?s.jsx("div",{className:"text-center text-rose-500 font-bold p-4 bg-rose-50 rounded-xl",children:j.error}):j?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex flex-wrap gap-2",children:j.keywords?.map((he,pe)=>s.jsx("span",{className:"px-3 py-1 bg-purple-50 text-purple-700 rounded-lg text-sm font-bold border border-purple-100",children:he},pe))}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-xs font-black text-slate-400 uppercase",children:"Ice Breaking"}),s.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl text-slate-700 text-sm font-medium leading-relaxed",children:['"',j.ice_breaking,'"']})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-xs font-black text-slate-400 uppercase",children:"Sales Tip"}),s.jsx("div",{className:"p-3 bg-indigo-50 rounded-xl text-indigo-800 text-sm font-bold leading-relaxed border border-indigo-100",children:j.sales_tip})]})]}):null})]})}),I&&s.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col overflow-hidden border border-white/20 scale-in-center",children:[s.jsxs("div",{className:"px-6 py-5 bg-slate-800 text-white flex justify-between items-center shrink-0",children:[s.jsxs("h3",{className:"text-lg font-black flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-400",children:"history"}),"   ",s.jsxs("span",{className:"text-slate-400 font-light text-sm",children:[G?.customer_name," "]})]}),s.jsx("button",{onClick:()=>R(!1),className:"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 bg-slate-50/10",children:P.length===0?s.jsxs("div",{className:"h-40 flex flex-col items-center justify-center text-slate-400 italic font-bold",children:[s.jsx("span",{className:"material-symbols-rounded text-4xl mb-2 opacity-20",children:"history"}),"   ."]}):s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-slate-200/50"}),s.jsx("div",{className:"space-y-6 relative",children:P.map(he=>s.jsxs("div",{className:"relative pl-10",children:[s.jsx("div",{className:"absolute left-3 w-2.5 h-2.5 rounded-full bg-indigo-500 border-2 border-white translate-x-[-1px] z-10"}),s.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-slate-100/50",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("span",{className:"text-[10px] font-black px-2 py-0.5 bg-slate-100 text-slate-500 rounded-full uppercase tracking-wider",children:[he.field_name," "]}),s.jsxs("span",{className:"text-[10px] font-bold text-slate-400 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-xs",children:"schedule"}),he.changed_at?new Date(he.changed_at).toLocaleString():" "]})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm font-bold",children:[s.jsxs("div",{className:"flex-1 p-2.5 bg-rose-50/50 rounded-xl border border-rose-100/30",children:[s.jsx("div",{className:"text-[9px] font-black text-rose-300 uppercase mb-0.5",children:" "}),s.jsx("div",{className:"text-rose-600 truncate",children:he.old_value||"()"})]}),s.jsx("span",{className:"material-symbols-rounded text-slate-300",children:"arrow_right_alt"}),s.jsxs("div",{className:"flex-1 p-2.5 bg-emerald-50/50 rounded-xl border border-emerald-100/30",children:[s.jsx("div",{className:"text-[9px] font-black text-emerald-300 uppercase mb-0.5",children:" "}),s.jsx("div",{className:"text-emerald-600 truncate",children:he.new_value||"()"})]})]})]})]},he.log_id))})]})}),s.jsx("div",{className:"px-6 py-4 bg-white border-t border-slate-100 flex justify-end",children:s.jsx("button",{onClick:()=>R(!1),className:"px-6 h-10 rounded-xl bg-slate-800 text-white font-black text-sm hover:bg-slate-700 transition-all",children:""})})]})})]})},Tue=()=>{const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState([]),[n,i]=F.useState({minQty:100,minAmt:0,logic:"AND"}),[l,o]=F.useState(!1),c=20,[d,u]=F.useState(1),[h,f]=F.useState(new Set),[p,g]=F.useState(""),[b,w]=F.useState(!1),[j,k]=F.useState(null),[T,E]=F.useState(!1);F.useEffect(()=>{I()},[]);const I=async()=>{o(!0),u(1),f(new Set);try{const J=await Ke("get_best_customers",{minQty:n.minQty,minAmt:n.minAmt,logic:n.logic});r(J||[])}catch(J){console.error(J),a("","   : "+J.message),r([])}finally{o(!1)}},R=J=>{const B=new Set(h);B.has(J)?B.delete(J):B.add(J),f(B)},P=Math.ceil(t.length/c)||1,H=t.slice((d-1)*c,d*c),G=J=>{if(J.target.checked){const B=H.map(W=>W.customer_id);f(new Set([...h,...B]))}else{const B=new Set(h);H.forEach(W=>B.delete(W.customer_id)),f(B)}},X=async()=>{if(!p)return a("","  .");if(h.size===0)return a("","  .");if(await e(" ",` ${h.size}   '${p}'() ?`))try{await Ke("update_customer_membership_batch",{customerIds:Array.from(h),newLevel:p}),await a(""," ."),I()}catch(J){a("","  : "+J.message)}},U=async()=>{if(t.length===0)return a("","  .");let J=`\uFEFFNo,,,,,,,
`;t.forEach((Q,ne)=>{const re=[ne+1,Q.customer_name,Q.mobile_number,Q.membership_level==="Normal"?"":Q.membership_level,Q.total_orders,Q.total_qty,Q.total_amount,(Q.address_primary||"")+" "+(Q.address_detail||"")].map(K=>`"${K||""}"`).join(",");J+=re+`
`});const B=new Blob([J],{type:"text/csv;charset=utf-8;"}),W=URL.createObjectURL(B),$=document.createElement("a");$.href=W,$.setAttribute("download",`_${Wt().format("YYYYMMDD")}.csv`),document.body.appendChild($),$.click(),document.body.removeChild($),a(""," .")},te=async J=>{k(null),w(!0),E(!0);try{const B=await Ke("get_customer_ai_insight",{customer_id:J});k(B)}catch(B){console.error(B),B.message==="AI_QUOTA_EXCEEDED"?a("","    ."):a("","AI  : "+B.message)}finally{E(!1)}},Z=H.length>0&&H.every(J=>h.has(J.customer_id));return s.jsxs("div",{className:"sales-v3-container fade-in flex flex-col h-full bg-slate-50",children:[s.jsx("div",{className:"flex-none px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"VIP Customer & LTV Analysis"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Best Customers"})]})]})})}),s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col px-6 lg:px-8 min-[2000px]:px-12 pb-6",children:[s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-5 shadow-lg border border-slate-200/60 mb-4 flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:"  ()"}),s.jsx("input",{type:"number",value:n.minQty,onChange:J=>i({...n,minQty:J.target.value}),className:"w-32 h-10 rounded-xl bg-slate-50 border-slate-200 font-bold text-center focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),s.jsxs("div",{className:"flex h-10 items-center bg-slate-100 rounded-xl p-1",children:[s.jsx("button",{onClick:()=>i({...n,logic:"AND"}),className:`h-full px-4 rounded-lg text-xs font-black transition-all ${n.logic==="AND"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:"AND"}),s.jsx("button",{onClick:()=>i({...n,logic:"OR"}),className:`h-full px-4 rounded-lg text-xs font-black transition-all ${n.logic==="OR"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:"OR"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:"  ()"}),s.jsx("input",{type:"number",value:n.minAmt,onChange:J=>i({...n,minAmt:J.target.value}),className:"w-40 h-10 rounded-xl bg-slate-50 border-slate-200 font-bold text-right focus:ring-2 focus:ring-indigo-500 px-3",placeholder:"0"})]}),s.jsxs("button",{onClick:I,className:"h-10 px-6 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white font-bold shadow-lg shadow-indigo-200 transition-all flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"search"})," "]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-1.5 px-3 rounded-xl border border-slate-200",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:" "}),s.jsxs("select",{value:p,onChange:J=>g(J.target.value),className:"h-8 py-0 pl-2 rounded-lg border-none bg-white text-xs font-bold w-28 focus:ring-0",children:[s.jsx("option",{value:"",children:"----"}),s.jsx("option",{value:"Normal",children:""}),s.jsx("option",{value:"VIP",children:"VIP"}),s.jsx("option",{value:"VVIP",children:"VVIP"}),s.jsx("option",{value:"Group",children:"/"})]}),s.jsx("button",{onClick:X,className:"h-8 px-3 rounded-lg bg-slate-800 text-white text-xs font-bold hover:bg-slate-700",children:""})]}),s.jsx("div",{className:"w-px h-8 bg-slate-200"}),s.jsx("button",{onClick:U,className:"h-10 w-10 rounded-xl bg-green-50 text-green-600 hover:bg-green-100 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"download"})})]})]}),s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col bg-white rounded-[1.5rem] shadow-xl border border-slate-200 relative",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"}),s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar p-0.5",children:s.jsxs("table",{className:"w-full text-xs border-separate border-spacing-0",children:[s.jsx("thead",{className:"sticky top-0 z-20",children:s.jsxs("tr",{className:"bg-slate-50/80 backdrop-blur-md",children:[s.jsx("th",{className:"px-4 py-3 w-12 text-center border-b border-slate-100",children:s.jsx("input",{type:"checkbox",checked:Z,onChange:G,className:"rounded text-indigo-600 focus:ring-indigo-500 border-slate-300"})}),s.jsx("th",{className:"px-4 py-3 text-left text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-24",children:""}),s.jsx("th",{className:"px-4 py-3 text-right text-[9px] font-black uppercase text-slate-500 border-b border-slate-100 bg-blue-50/50",children:""}),s.jsx("th",{className:"px-4 py-3 text-right text-[9px] font-black uppercase text-slate-500 border-b border-slate-100 bg-green-50/50",children:""}),s.jsx("th",{className:"px-4 py-3 text-right text-[9px] font-black uppercase text-slate-500 border-b border-slate-100 bg-orange-50/50",children:""}),s.jsx("th",{className:"px-4 py-3 text-left text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-20",children:"AI"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:l?s.jsx("tr",{children:s.jsx("td",{colSpan:"9",className:"py-20 text-center",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("span",{className:"material-symbols-rounded spin text-3xl text-indigo-300",children:"sync"})})})}):t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"9",className:"py-20 text-center text-slate-300 font-bold",children:"    ."})}):H.map(J=>s.jsxs("tr",{className:"hover:bg-indigo-50/30 transition-colors group",children:[s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("input",{type:"checkbox",checked:h.has(J.customer_id),onChange:()=>R(J.customer_id),className:"rounded text-indigo-600 focus:ring-indigo-500 border-slate-300"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"font-bold text-slate-700 flex items-center gap-2",children:[J.customer_name,s.jsx("button",{onClick:()=>Vne(J.customer_name),className:"opacity-0 group-hover:opacity-100 text-slate-300 hover:text-indigo-500",children:s.jsx("span",{className:"material-symbols-rounded text-[14px]",children:"content_copy"})})]})}),s.jsx("td",{className:"px-4 py-3 text-center text-slate-500 font-mono tracking-tight",children:J.mobile_number}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-black tracking-tight ${J.membership_level==="VVIP"?"bg-amber-100 text-amber-700":J.membership_level==="VIP"?"bg-purple-100 text-purple-700":J.membership_level==="Group"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-500"}`,children:J.membership_level==="Normal"?"":J.membership_level})}),s.jsx("td",{className:"px-4 py-3 text-right font-mono font-medium text-slate-600 bg-blue-50/30",children:J.total_orders}),s.jsx("td",{className:"px-4 py-3 text-right font-mono font-bold text-green-600 bg-green-50/30",children:Fe(J.total_qty)}),s.jsx("td",{className:"px-4 py-3 text-right font-mono font-black text-orange-600 bg-orange-50/30",children:Fe(J.total_amount)}),s.jsxs("td",{className:"px-4 py-3 text-slate-500 truncate max-w-[300px]",title:`${J.address_primary} ${J.address_detail}`,children:[J.address_primary," ",J.address_detail]}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("button",{onClick:()=>te(J.customer_id),className:"w-8 h-8 rounded-full hover:bg-purple-100 text-purple-300 hover:text-purple-600 transition-colors flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"auto_awesome"})})})]},J.customer_id))})]})}),s.jsxs("div",{className:"p-3 border-t border-slate-100 bg-white flex justify-between items-center px-6",children:[s.jsxs("div",{className:"text-xs font-bold text-slate-400",children:[" ",s.jsx("span",{className:"text-slate-800",children:t.length.toLocaleString()})," "]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>u(d-1),disabled:d===1,className:"w-8 h-8 rounded-lg flex items-center justify-center hover:bg-slate-100 disabled:opacity-30 disabled:hover:bg-white transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-slate-500",children:"chevron_left"})}),s.jsxs("span",{className:"text-xs font-black text-slate-600 min-w-[60px] text-center",children:[d," / ",P]}),s.jsx("button",{onClick:()=>u(d+1),disabled:d===P,className:"w-8 h-8 rounded-lg flex items-center justify-center hover:bg-slate-100 disabled:opacity-30 disabled:hover:bg-white transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-slate-500",children:"chevron_right"})})]})]})]})]}),b&&s.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:()=>w(!1)}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-[450px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"bg-slate-900 px-6 py-4 flex justify-between items-center",children:[s.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-purple-400",children:"auto_awesome"}),"AI  "]}),s.jsx("button",{onClick:()=>w(!1),className:"text-slate-400 hover:text-white",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"p-6",children:T?s.jsxs("div",{className:"py-12 flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-purple-500 rounded-full animate-spin"}),s.jsx("p",{className:"text-sm font-bold text-slate-500 animate-pulse",children:"AI    ..."})]}):j?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2",children:""}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[j.keywords&&j.keywords.map((J,B)=>s.jsx("span",{className:"px-3 py-1 bg-purple-50 text-purple-700 rounded-lg text-xs font-bold border border-purple-100 shadow-sm",children:J},B)),(!j.keywords||j.keywords.length===0)&&s.jsx("span",{className:"text-xs text-slate-400",children:" "})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2",children:"  (Sales Tip)"}),s.jsx("div",{className:"p-4 bg-green-50 rounded-2xl border border-green-100 text-green-900 text-sm font-medium leading-relaxed shadow-sm",children:j.sales_tip||"  ."})]}),j.ice_breaking&&s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2",children:" "}),s.jsx("div",{className:"p-4 bg-blue-50 rounded-2xl border border-blue-100 text-blue-900 text-sm font-medium leading-relaxed shadow-sm",children:j.ice_breaking})]})]}):s.jsx("div",{className:"py-10 text-center text-rose-500 font-bold",children:"  ."})})]})]})]})},Mue=()=>{const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState([]),[n,i]=F.useState({total:0,avgRatio:0,mainReason:"-"}),[l,o]=F.useState(!1);F.useEffect(()=>{c()},[]);const c=async()=>{o(!0);try{const f=(await Ke("get_special_care")||[]).sort((p,g)=>g.claim_ratio-p.claim_ratio);r(f),d(f)}catch(h){console.error(h),a("","  : "+h.message)}finally{o(!1)}},d=h=>{if(!h||h.length===0){i({total:0,avgRatio:0,mainReason:"-"});return}let f=0;const p={};h.forEach(w=>{f+=w.claim_ratio,w.major_reason&&(p[w.major_reason]=(p[w.major_reason]||0)+1)});let g="-",b=0;for(const w in p)p[w]>b&&(b=p[w],g=w);i({total:h.length,avgRatio:h.length>0?(f/h.length).toFixed(1):0,mainReason:g})},u=h=>{h.is_member?a("",`         .
[ /]    .`):a("",`      .
 (CRM)     .`)};return s.jsxs("div",{className:"sales-v3-container fade-in flex flex-col h-full bg-slate-50",children:[s.jsx("div",{className:"flex-none px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:s.jsxs("div",{className:"flex justify-between items-end mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Targeted Care & Churn Risk Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["    ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Special Care"})]})]}),s.jsx("button",{onClick:c,className:"w-10 h-10 rounded-full bg-white border border-slate-200 shadow-sm flex items-center justify-center hover:bg-slate-50 transition-colors",children:s.jsx("span",{className:`material-symbols-rounded text-slate-400 ${l?"animate-spin":""}`,children:"refresh"})})]})}),s.jsxs("div",{className:"flex-none px-6 lg:px-8 min-[2000px]:px-12 grid grid-cols-3 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-white p-5 rounded-[1.5rem] shadow-lg border border-slate-200/60 flex items-center gap-5 relative overflow-hidden group",children:[s.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-24 bg-gradient-to-l from-rose-50 to-transparent opacity-50"}),s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-rose-50 flex items-center justify-center flex-shrink-0 shadow-inner group-hover:scale-110 transition-transform",children:s.jsx("span",{className:"material-symbols-rounded text-rose-500 text-3xl",children:"priority_high"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wide",children:"  "}),s.jsxs("div",{className:"text-3xl font-black text-slate-800 tracking-tight",children:[n.total.toLocaleString(),s.jsx("span",{className:"text-base font-bold text-slate-400 ml-1",children:""})]})]})]}),s.jsxs("div",{className:"bg-white p-5 rounded-[1.5rem] shadow-lg border border-slate-200/60 flex items-center gap-5 relative overflow-hidden group",children:[s.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-24 bg-gradient-to-l from-orange-50 to-transparent opacity-50"}),s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-orange-50 flex items-center justify-center flex-shrink-0 shadow-inner group-hover:scale-110 transition-transform",children:s.jsx("span",{className:"material-symbols-rounded text-orange-500 text-3xl",children:"percent"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wide",children:"  "}),s.jsxs("div",{className:"text-3xl font-black text-slate-800 tracking-tight",children:[n.avgRatio,s.jsx("span",{className:"text-base font-bold text-slate-400 ml-1",children:"%"})]})]})]}),s.jsxs("div",{className:"bg-white p-5 rounded-[1.5rem] shadow-lg border border-slate-200/60 flex items-center gap-5 relative overflow-hidden group",children:[s.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-24 bg-gradient-to-l from-blue-50 to-transparent opacity-50"}),s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-blue-50 flex items-center justify-center flex-shrink-0 shadow-inner group-hover:scale-110 transition-transform",children:s.jsx("span",{className:"material-symbols-rounded text-blue-500 text-3xl",children:"error_outline"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wide",children:"  "}),s.jsx("div",{className:"text-2xl font-black text-slate-800 tracking-tight truncate max-w-[150px]",title:n.mainReason,children:n.mainReason})]})]})]}),s.jsx("div",{className:"flex-1 overflow-hidden flex flex-col px-6 lg:px-8 min-[2000px]:px-12 pb-6",children:s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col bg-white rounded-[1.5rem] shadow-xl border border-slate-200 relative",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-rose-500 via-orange-500 to-yellow-500"}),s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar p-0.5",children:s.jsxs("table",{className:"w-full text-xs border-separate border-spacing-0",children:[s.jsx("thead",{className:"sticky top-0 z-20",children:s.jsxs("tr",{className:"bg-slate-50/80 backdrop-blur-md",children:[s.jsx("th",{className:"px-4 py-3 text-left w-40 text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-3 text-left w-32 text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-20 text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-3 text-right text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:" "}),s.jsx("th",{className:"px-4 py-3 text-right text-[9px] font-black uppercase text-rose-500 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-3 text-left w-40 text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:" (Ratio)"}),s.jsx("th",{className:"px-4 py-3 text-left text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:" "}),s.jsx("th",{className:"px-4 py-3 text-center w-32 text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:" "}),s.jsx("th",{className:"px-4 py-3 text-center w-20 text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:l?s.jsx("tr",{children:s.jsx("td",{colSpan:"9",className:"py-20 text-center",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("span",{className:"material-symbols-rounded spin text-3xl text-rose-300",children:"sync"})})})}):t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"9",className:"py-20 text-center text-slate-300 font-bold",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-4xl text-green-200",children:"check_circle"}),s.jsx("span",{children:"    ."})]})})}):t.map((h,f)=>{let p="text-slate-600",g="bg-slate-300";return h.claim_ratio>=30?(p="text-rose-600",g="bg-rose-500"):h.claim_ratio>=15&&(p="text-orange-500",g="bg-orange-400"),s.jsxs("tr",{className:"hover:bg-rose-50/20 transition-colors group",children:[s.jsx("td",{className:"px-4 py-3 font-bold text-slate-700",children:h.name}),s.jsx("td",{className:"px-4 py-3 text-slate-500 font-mono tracking-tight",children:h.mobile}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-black tracking-tight ${h.is_member?"bg-blue-50 text-blue-600 border-blue-100":"bg-slate-50 text-slate-500 border-slate-100"}`,children:h.is_member?"":""})}),s.jsx("td",{className:"px-4 py-3 text-right font-mono text-slate-600",children:h.total_orders.toLocaleString()}),s.jsx("td",{className:"px-4 py-3 text-right font-mono font-bold text-rose-600 bg-rose-50/30",children:h.claim_count.toLocaleString()}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("span",{className:`font-bold text-[10px] ${p}`,children:[h.claim_ratio.toFixed(1),"%"]})}),s.jsx("div",{className:"w-full h-1.5 bg-slate-100 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${g}`,style:{width:`${Math.min(h.claim_ratio,100)}%`}})})]})}),s.jsx("td",{className:"px-4 py-3 text-slate-600 text-xs truncate max-w-[200px]",title:h.major_reason,children:h.major_reason||"-"}),s.jsx("td",{className:"px-4 py-3 text-center text-slate-500 text-[10px] font-mono",children:h.last_claim_date||"-"}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("button",{onClick:()=>u(h),className:"w-8 h-8 rounded-full hover:bg-slate-100 text-slate-400 hover:text-slate-600 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"edit_note"})})})]},f)})})]})})]})})]})},Eue=()=>{const{showAlert:a,showConfirm:e}=wa(),t={greeting:`[{COMPANY}]  ! 
    .
     ,    .`,promo:`[{COMPANY}/]   !
  ,   20%   .
    !
: 080-1234-5678`,repurchase:`[{COMPANY}]    ! 
       .     .`,seasonal:`[{COMPANY}]        !
    ,    .`,anniversary:`[{COMPANY}]     !
   5,000   .
  !`,recovery:`[{COMPANY}]    . 
      .    ,      [ ]  .    .`},[r,n]=F.useState({all:!1,vvip:!1,vip:!1,normal:!1,corp:!1,recovery:!1}),[i,l]=F.useState([]),[o,c]=F.useState(!1),[d,u]=F.useState([]),[h,f]=F.useState(90),[p,g]=F.useState(!1),[b,w]=F.useState("sms"),[j,k]=F.useState(""),[T,E]=F.useState(0),[I,R]=F.useState("SMS"),[P,H]=F.useState("Mycelium"),[G,X]=F.useState(0);F.useEffect(()=>{U()},[]);const U=async()=>{try{const K=await Ke("get_company_info");K&&K.company_name&&H(K.company_name)}catch(K){console.error("Company Info Error:",K)}};F.useEffect(()=>{Z()},[r,i]),F.useEffect(()=>{J(j)},[j]);const te=(K,ae)=>{n(K==="all"?{all:ae,vvip:ae,vip:ae,normal:ae,corp:ae,recovery:ae&&r.recovery}:ce=>({...{...ce,[K]:ae},all:!1}))},Z=()=>{let K=0;r.all?K=1150:(r.vvip&&(K+=12),r.vip&&(K+=65),r.normal&&(K+=280),r.corp&&(K+=40),r.recovery&&(K+=i.length>0?i.length:15)),X(K)},J=K=>{let ae=0;for(let ce=0;ce<K.length;ce++){const de=K.charCodeAt(ce);ae+=de>127?2:1}E(ae),R(ae>90?"LMS":"SMS")},B=K=>{const ae=K.target.value;if(!ae)return;let ce=t[ae]||"";ce=ce.replace(/\{COMPANY\}/g,P),k(ce)},W=async()=>{if(!(Object.values(r).some(de=>de)||r.all)){a("","    .");return}if(!j.trim()){a("","  .");return}const ae=b==="kakao"?" ":" ";if(await e(" ",` ${G.toLocaleString()} ${ae} ?
(  API  )`))try{const de=Object.keys(r).filter(pe=>r[pe]&&pe!=="all");r.all&&de.push("all");const he=await Ke("send_sms_simulation",{mode:b,recipients:de,content:j,templateCode:b==="kakao"?"TEMPLATE_001":null});he.success?(a(" ",` : ${he.message_id||"N/A"}
 .`,"success"),k("")):a(" ",he.error||"   ")}catch(de){console.error(de),a("","   .")}},$=()=>{c(!0),Q(h)},Q=async K=>{g(!0);try{const ae=await Ke("get_claim_targets",{days:parseInt(K)});u(ae||[])}catch(ae){console.error(ae),a("","   ")}finally{g(!1)}},ne=K=>{l(ae=>ae.includes(K)?ae.filter(ce=>ce!==K):[...ae,K])},re=()=>{te("recovery",!0),c(!1)};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-violet-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-violet-600 uppercase",children:"Promotion"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-700 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"SMS Promotion"})]}),s.jsxs("p",{className:"text-slate-400 text-sm mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"sms"}),"      ."]})]}),s.jsxs("div",{className:"flex-1 overflow-hidden p-6 lg:p-8 pt-0 flex flex-col xl:flex-row gap-6",children:[s.jsxs("div",{className:"flex-1 flex flex-col gap-6 min-w-[350px] overflow-y-auto custom-scrollbar",children:[s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6",children:[s.jsxs("h3",{className:"text-indigo-600 font-bold mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"group"}),"   "]}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("label",{className:"flex items-center gap-4 p-4 border border-slate-200 rounded-xl cursor-pointer hover:bg-slate-50 hover:border-indigo-200 transition-all group bg-white",children:[s.jsx("input",{type:"checkbox",checked:r.all,onChange:K=>te("all",K.target.checked),className:"w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"material-symbols-rounded text-slate-400 group-hover:text-indigo-500 text-2xl",children:"groups"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-bold text-slate-600 group-hover:text-indigo-700",children:" "}),s.jsx("span",{className:"text-xs text-slate-400",children:"   "})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[["VVIP","VIP","","/"].map(K=>{const ae=K==="/"?"corp":K===""?"normal":K.toLowerCase();return s.jsxs("label",{className:`flex items-center justify-center gap-3 p-3 border rounded-xl cursor-pointer transition-all ${r[ae]?"bg-indigo-50 border-indigo-300 text-indigo-700 font-bold":"bg-white border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:[s.jsx("input",{type:"checkbox",checked:r[ae],onChange:ce=>te(ae,ce.target.checked),className:"hidden"}),s.jsx("span",{children:K})]},ae)}),s.jsxs("div",{className:"col-span-2 relative",children:[s.jsxs("label",{className:`flex items-center gap-3 p-3 border rounded-xl cursor-pointer transition-all ${r.recovery?"bg-amber-50 border-amber-300 text-amber-700":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[s.jsx("input",{type:"checkbox",checked:r.recovery,onChange:K=>te("recovery",K.target.checked),className:"w-5 h-5 text-amber-500 rounded focus:ring-amber-500"}),s.jsx("span",{className:"material-symbols-rounded text-amber-500",children:"sentiment_dissatisfied"}),s.jsx("span",{className:`font-bold ${r.recovery?"text-amber-800":"text-slate-500"}`,children:"  "})]}),r.recovery&&s.jsxs("button",{onClick:$,className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 bg-white border border-amber-200 text-amber-600 text-xs font-bold rounded-lg shadow-sm hover:bg-amber-50 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:i.length>0?"check_circle":"list_alt"}),i.length>0?`${i.length} `:" "]})]})]})]}),s.jsxs("div",{className:"mt-6 p-4 bg-slate-50 rounded-xl border border-dashed border-slate-200 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-bold text-slate-500 block",children:"  "}),s.jsx("span",{className:"text-[10px] text-slate-400",children:"*   "})]}),s.jsxs("strong",{className:"text-xl font-black text-indigo-600",children:[G.toLocaleString()," "]})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-violet-50 to-white rounded-2xl border border-violet-200 p-5 shadow-sm",children:[s.jsxs("h4",{className:"text-violet-800 font-bold mb-2 flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"lightbulb"}),"  "]}),s.jsxs("p",{className:"text-xs text-violet-600 leading-relaxed font-medium",children:["       ",s.jsx("strong",{children:"()"}),"   ",s.jsx("strong",{children:"080 "}),"   ."]})]})]}),s.jsxs("div",{className:"flex-[2] bg-white rounded-2xl shadow-lg border border-slate-200 p-6 flex flex-col gap-5 min-h-[500px]",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 border-b border-slate-100 pb-4",children:[s.jsxs("h3",{className:"text-lg font-black text-slate-800 flex items-center gap-2",children:[s.jsx("span",{className:"p-1.5 bg-violet-100 text-violet-600 rounded-lg material-symbols-rounded",children:"edit_square"})," "]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>w("sms"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${b==="sms"?"bg-white text-violet-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"SMS/LMS"}),s.jsx("button",{onClick:()=>w("kakao"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${b==="kakao"?"bg-yellow-400 text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:" "})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:""}),s.jsxs("select",{onChange:B,className:"bg-slate-50 border border-slate-200 text-slate-700 text-xs rounded-lg p-2 outline-none focus:border-violet-500 font-medium",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"greeting",children:"   "}),s.jsx("option",{value:"promo",children:"    "}),s.jsx("option",{value:"repurchase",children:"  "}),s.jsx("option",{value:"seasonal",children:"  "}),s.jsx("option",{value:"anniversary",children:"  "}),s.jsx("option",{value:"recovery",children:"  "})]})]})]})]}),b==="kakao"&&s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-3 flex gap-3 text-xs text-yellow-800 font-medium animate-in fade-in slide-in-from-top-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"info"}),s.jsxs("p",{children:[s.jsx("b",{children:"  :"}),"      .      ."]})]}),s.jsxs("div",{className:"relative flex-1",children:[s.jsx("textarea",{value:j,onChange:K=>k(K.target.value),className:"w-full h-full p-5 bg-slate-50 border border-slate-200 rounded-2xl resize-none outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 transition-all text-slate-700 leading-relaxed font-medium",placeholder:"    ."}),s.jsxs("div",{className:"absolute bottom-4 right-4 flex items-center gap-3 bg-white/90 backdrop-blur border border-slate-200 px-3 py-1.5 rounded-full shadow-sm text-xs font-bold text-slate-500 pointer-events-none",children:[s.jsx("span",{className:`${I==="LMS"?"text-violet-600":"text-slate-500"}`,children:I}),s.jsx("span",{className:"w-px h-3 bg-slate-200"}),s.jsxs("span",{children:[s.jsx("span",{className:"text-slate-800",children:T})," / 2000 bytes"]})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2",children:[s.jsxs("button",{onClick:()=>{k(""),J("")},className:"px-4 py-3 rounded-xl border border-slate-200 text-slate-500 hover:bg-slate-50 hover:text-slate-700 font-bold text-sm flex items-center gap-2 transition-colors",children:[s.jsx("span",{className:"material-symbols-rounded",children:"delete_outline"})," "]}),s.jsxs("button",{onClick:W,className:`px-8 py-3 rounded-xl font-bold text-sm flex items-center gap-2 shadow-lg transition-all transform active:scale-95 ${b==="kakao"?"bg-yellow-400 hover:bg-yellow-500 text-slate-900 shadow-yellow-200":"bg-violet-600 hover:bg-violet-700 text-white shadow-violet-200"}`,children:[s.jsx("span",{className:"material-symbols-rounded",children:b==="kakao"?"chat":"send"}),b==="kakao"?" ":" "]})]})]})]}),o&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-start bg-slate-50/50",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-black text-slate-800",children:"   "}),s.jsx("p",{className:"text-sm text-slate-500 mt-1",children:" (/)      ."})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("select",{value:h,onChange:K=>{f(K.target.value),Q(K.target.value)},className:"bg-white border border-slate-200 text-slate-700 text-sm rounded-lg p-2 outline-none focus:border-indigo-500",children:[s.jsx("option",{value:"7",children:" 7"}),s.jsx("option",{value:"30",children:" 30"}),s.jsx("option",{value:"90",children:" 90"}),s.jsx("option",{value:"365",children:" 1"})]}),s.jsx("button",{onClick:()=>c(!1),className:"bg-slate-100 p-2 rounded-full hover:bg-slate-200",children:s.jsx("span",{className:"material-symbols-rounded text-slate-500",children:"close"})})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-0 min-h-0 custom-scrollbar relative",children:[p&&s.jsx("div",{className:"absolute inset-0 z-10 bg-white/80 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded animate-spin text-4xl text-indigo-500",children:"sync"})}),s.jsxs("table",{className:"w-full text-sm text-left whitespace-nowrap",children:[s.jsx("thead",{className:"bg-slate-50 text-xs uppercase text-slate-500 font-bold border-b border-slate-200 sticky top-0 z-10 shadow-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-3 px-4 w-[50px] text-center",children:""}),s.jsx("th",{className:"py-3 px-4",children:""}),s.jsx("th",{className:"py-3 px-4",children:""}),s.jsx("th",{className:"py-3 px-4 text-center",children:""}),s.jsx("th",{className:"py-3 px-4 text-center",children:" "}),s.jsx("th",{className:"py-3 px-4",children:""}),s.jsx("th",{className:"py-3 px-4 text-center",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[d.map((K,ae)=>{const ce=i.includes(K.mobile);return s.jsxs("tr",{onClick:()=>ne(K.mobile),className:`cursor-pointer transition-colors hover:bg-slate-50 ${ce?"bg-indigo-50/50":""}`,children:[s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("input",{type:"checkbox",checked:ce,readOnly:!0,className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"})}),s.jsx("td",{className:"py-3 px-4 font-bold text-slate-700",children:K.name}),s.jsx("td",{className:"py-3 px-4 text-slate-500 font-mono",children:K.mobile}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold border ${K.is_member?"bg-sky-50 text-sky-700 border-sky-200":"bg-slate-50 text-slate-500 border-slate-200"}`,children:K.is_member?"":""})}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold border ${K.claim_type===""?"bg-red-50 text-red-700 border-red-200":"bg-amber-50 text-amber-700 border-amber-200"}`,children:K.claim_type})}),s.jsx("td",{className:"py-3 px-4 text-slate-600",children:K.reason||"-"}),s.jsx("td",{className:"py-3 px-4 text-center text-slate-400 text-xs",children:K.date})]},ae)}),d.length===0&&!p&&s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"p-8 text-center text-slate-400",children:" ."})})]})]})]}),s.jsxs("div",{className:"p-4 border-t border-slate-100 flex items-center justify-between bg-slate-50",children:[s.jsxs("div",{className:"text-sm text-slate-600 font-bold",children:[" ",s.jsx("span",{className:"text-indigo-600",children:i.length})," "]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>l([]),className:"px-4 py-2 border border-slate-200 rounded-lg text-sm text-slate-500 font-bold hover:bg-white",children:" "}),s.jsx("button",{onClick:re,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700 shadow-sm",children:" "})]})]})]})})]})},Due=()=>{const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState([]),[n,i]=F.useState([]),[l,o]=F.useState([]),[c,d]=F.useState(new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0]),[u,h]=F.useState(new Date().toISOString().split("T")[0]),[f,p]=F.useState(""),g={purchaseId:null,date:new Date().toISOString().split("T")[0],vendorId:"",itemName:"",spec:"",qty:1,price:0,total:0,paymentStatus:"",memo:"",linkProductId:"",isInventoryMode:!1,isSyncMode:!1,syncItems:[]},[b,w]=F.useState(g),[j,k]=F.useState(""),[T,E]=F.useState([]),I=F.useCallback(async()=>{try{const $=await Ke("get_product_list");i($||[])}catch($){console.error("Product load error:",$)}},[]),R=F.useCallback(async()=>{try{const $=await Ke("get_vendors");o($||[])}catch($){console.error("Vendor load error:",$)}},[]),P=F.useCallback(async()=>{try{const $={start_date:c,end_date:u};f&&($.vendor_id=f);const Q=await Ke("get_purchases",$);r(Q||[])}catch($){console.error("Purchase list load error:",$)}},[c,u,f]);F.useEffect(()=>{I(),R(),P()},[I,R,P]);const H=$=>{const{name:Q,value:ne,type:re,checked:K}=$.target;w(ae=>{const ce={...ae,[Q]:re==="checkbox"?K:ne};if(Q==="qty"||Q==="price"){const de=Q==="qty"?Yu(ne):ae.qty,he=Q==="price"?Yu(ne):ae.price;ce.total=de*he,Q==="qty"&&ne===""&&(ce.qty=""),Q==="price"&&ne===""&&(ce.price="")}if(Q==="isInventoryMode"&&!K&&(ce.linkProductId="",ce.isSyncMode=!1,ce.syncItems=[]),Q==="isSyncMode"){if(K&&!ae.linkProductId)return a("",' "   " .'),ae;K?G(ae.itemName):ce.syncItems=[]}if(Q==="linkProductId"){if(!ne)ce.isSyncMode=!1,ce.syncItems=[];else if(!ae.itemName){const de=n.find(he=>String(he.product_id)===String(ne));de&&(ce.itemName=de.product_name)}}return Q==="itemName"&&ae.isSyncMode&&G(ne),ce})},G=$=>{if(!$)return;const Q=/(\d+\s*(kg|g||||))/i,ne=$.match(Q),re=ne?ne[0].toLowerCase():$.toLowerCase();if(re.length<2){E([]);return}const K=n.filter(ae=>ae.item_type==="product"&&(ae.product_name.toLowerCase().includes(re)||ae.specification&&ae.specification.toLowerCase().includes(re))).slice(0,20);E(K)},X=$=>{const Q=$.target.value;k(Q),G(Q)},U=($,Q)=>{w(ne=>ne.syncItems.find(K=>K.product_id===$.product_id)?{...ne,syncItems:ne.syncItems.map(K=>K.product_id===$.product_id?{...K,quantity:Q}:K)}:{...ne,syncItems:[...ne.syncItems,{product_id:$.product_id,quantity:Q,product_name:$.product_name}]})},te=async()=>{if(!b.itemName){a(""," .");return}if(!b.vendorId){a("","() .");return}try{const $={purchase_id:b.purchaseId,vendor_id:parseInt(b.vendorId),purchase_date:b.date,item_name:b.itemName,specification:b.spec,quantity:Number(b.qty)||0,unit_price:Number(b.price)||0,total_amount:Number(b.total)||0,payment_status:b.paymentStatus,memo:b.memo,inventory_synced:!!b.linkProductId,material_item_id:b.linkProductId?parseInt(b.linkProductId):null};let Q=null;b.isSyncMode&&b.syncItems.some(ne=>ne.quantity>0)&&(Q=b.syncItems.filter(ne=>ne.quantity>0).map(ne=>({product_id:ne.product_id,quantity:Number(ne.quantity)}))),await Ke("save_purchase",{purchase:$,inventory_sync_data:Q}),await a("","  ."),Z(),P(),I()}catch($){a("",` : ${$.message||$}`)}},Z=()=>{w(g),E([]),k("")},J=$=>{w({purchaseId:$.purchase_id,date:$.purchase_date,vendorId:$.vendor_id||"",itemName:$.item_name,spec:$.specification||"",qty:$.quantity,price:$.unit_price,total:$.total_amount,paymentStatus:$.payment_status,memo:$.memo||"",isInventoryMode:!!$.material_item_id,linkProductId:$.material_item_id||"",isSyncMode:!1,syncItems:[]})},B=async $=>{if(await e("","    ?"))try{await Ke("delete_purchase",{id:$}),P()}catch(Q){a("",` : ${Q.message||Q}`)}},W=F.useMemo(()=>{const $=t.reduce((ne,re)=>ne+re.total_amount,0),Q=t.filter(ne=>ne.payment_status==="").reduce((ne,re)=>ne+re.total_amount,0);return{total:$,unpaid:Q}},[t]);return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-violet-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-violet-600 uppercase",children:"Start Your Business"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:[" / ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Purchase History"})]})]}),s.jsxs("div",{className:"flex flex-1 gap-6 px-6 lg:px-8 pb-6 min-h-0",children:[s.jsx("div",{className:"w-[360px] flex flex-col gap-4 h-full",children:s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-5 border border-slate-200 shadow-sm relative group overflow-hidden flex flex-col flex-1 h-full",children:[s.jsx("div",{className:"absolute top-0 right-0 w-24 h-full bg-violet-50/50 -skew-x-12 translate-x-12 transition-transform group-hover:translate-x-6"}),s.jsxs("div",{className:"flex items-center gap-2 mb-4 relative z-10 shrink-0",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-violet-100 flex items-center justify-center text-violet-600",children:s.jsx("span",{className:"material-symbols-rounded",children:"edit_square"})}),s.jsx("h3",{className:"text-lg font-bold text-slate-700",children:"  "})]}),s.jsxs("div",{className:"flex flex-col gap-3 relative z-10 overflow-y-auto flex-1 px-1 custom-scrollbar",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"purchase-date",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:" "}),s.jsx("input",{id:"purchase-date",type:"date",name:"date",value:b.date,onChange:H,className:"w-full h-10 rounded-xl bg-slate-50 border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"purchase-vendor",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:" ()"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{id:"purchase-vendor",name:"vendorId",value:b.vendorId,onChange:H,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3 appearance-none",children:[s.jsx("option",{value:"",children:" "}),l.map($=>s.jsx("option",{value:$.vendor_id,children:$.vendor_name},$.vendor_id))]}),s.jsx("span",{className:"material-symbols-rounded absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:"unfold_more"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"purchase-item-name",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:" ( )"}),s.jsx("input",{id:"purchase-item-name",type:"text",name:"itemName",value:b.itemName,onChange:H,placeholder:":   5kg",className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"purchase-spec",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:" ()"}),s.jsx("input",{id:"purchase-spec",type:"text",name:"spec",value:b.spec,onChange:H,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"purchase-qty",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsx("input",{id:"purchase-qty",type:"text",name:"qty",value:Fe(b.qty),onChange:H,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold text-right focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"purchase-price",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsx("input",{id:"purchase-price",type:"text",name:"price",value:Fe(b.price),onChange:H,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold text-right focus:ring-2 focus:ring-violet-500 transition-all px-3"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-bold text-violet-600 uppercase ml-1 mb-1 block",children:" "}),s.jsx("input",{type:"text",value:Fe(b.total),readOnly:!0,className:"w-full h-10 rounded-xl bg-violet-50 border-none text-violet-700 font-black text-right px-4"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"purchase-payment-status",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:" "}),s.jsxs("select",{id:"purchase-payment-status",name:"paymentStatus",value:b.paymentStatus,onChange:H,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:"()"}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsxs("div",{className:"mt-2 bg-slate-50 rounded-xl p-3 border border-slate-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-xs font-bold text-slate-600 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"inventory_2"}),"   "]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",name:"isInventoryMode",checked:b.isInventoryMode,onChange:H,className:"sr-only peer"}),s.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-violet-600"})]})]}),b.isInventoryMode&&s.jsxs("div",{className:"flex flex-col gap-3 animate-in fade-in slide-in-from-top-2 duration-300",children:[s.jsxs("div",{children:[s.jsxs("select",{name:"linkProductId",value:b.linkProductId,onChange:H,className:"w-full h-9 rounded-lg border-orange-200 bg-orange-50 text-xs font-bold text-orange-800 focus:ring-2 focus:ring-orange-400",children:[s.jsx("option",{value:"",children:"   ( )"}),n.filter($=>$.item_type==="material").map($=>s.jsxs("option",{value:$.product_id,children:[$.product_name," ",$.specification?`(${$.specification})`:""]},$.product_id))]}),s.jsx("p",{className:"text-[10px] text-orange-600 mt-1 ml-1",children:"*      ."})]}),s.jsxs("div",{className:"pt-2 border-t border-dashed border-slate-300",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-2",children:[s.jsx("input",{type:"checkbox",name:"isSyncMode",checked:b.isSyncMode,onChange:H,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"}),s.jsx("span",{className:"text-xs font-bold text-blue-600",children:"()   "})]}),b.isSyncMode&&s.jsxs("div",{className:"bg-blue-50/50 rounded-lg p-2 border border-blue-100",children:[s.jsx("input",{type:"text",value:j,onChange:X,placeholder:" ...",className:"w-full h-8 rounded border-blue-200 text-xs mb-2 px-2 focus:ring-1 focus:ring-blue-400"}),s.jsx("div",{className:"max-h-[150px] overflow-y-auto flex flex-col gap-1",children:T.length===0?s.jsx("p",{className:"text-[10px] text-slate-400 text-center py-2",children:"  ."}):T.map($=>{const Q=b.syncItems.find(ne=>ne.product_id===$.product_id)?.quantity||"";return s.jsxs("div",{className:"flex items-center justify-between bg-white px-2 py-1.5 rounded border border-blue-100",children:[s.jsx("span",{className:"text-xs font-medium truncate flex-1",children:$.product_name}),s.jsx("input",{type:"number",placeholder:"",value:Q,onChange:ne=>U($,ne.target.value),className:"w-16 h-6 text-right text-xs border border-slate-200 rounded px-1 focus:border-blue-500 outline-none"})]},$.product_id)})})]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"purchase-memo",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsx("textarea",{id:"purchase-memo",name:"memo",value:b.memo,onChange:H,className:"w-full h-20 rounded-xl bg-white border-slate-200 text-slate-800 text-sm p-3 focus:ring-2 focus:ring-violet-500 transition-all resize-none"})]}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsxs("button",{onClick:te,className:"flex-1 h-11 bg-violet-600 hover:bg-violet-700 text-white rounded-xl font-bold shadow-lg shadow-violet-200 transition-all flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"save"})," "]}),s.jsx("button",{onClick:Z,className:"w-12 h-11 bg-white border border-slate-200 hover:bg-slate-50 text-slate-600 rounded-xl flex items-center justify-center transition-all",children:s.jsx("span",{className:"material-symbols-rounded",children:"restart_alt"})})]})]})]})}),s.jsxs("div",{className:"flex-1 flex flex-col min-w-0 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-4 border border-slate-200 shadow-sm flex flex-wrap items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-50 rounded-lg border border-slate-200",children:[s.jsx("span",{className:"material-symbols-rounded text-slate-400 text-[18px]",children:"calendar_today"}),s.jsx("input",{type:"date",value:c,onChange:$=>d($.target.value),className:"bg-transparent text-sm font-bold text-slate-600 outline-none w-[150px]"}),s.jsx("span",{className:"text-slate-400",children:"~"}),s.jsx("input",{type:"date",value:u,onChange:$=>h($.target.value),className:"bg-transparent text-sm font-bold text-slate-600 outline-none w-[150px]"})]}),s.jsxs("select",{value:f,onChange:$=>p($.target.value),className:"h-10 rounded-lg border-slate-200 text-sm font-bold text-slate-600 w-40",children:[s.jsx("option",{value:"",children:" "}),l.map($=>s.jsx("option",{value:$.vendor_id,children:$.vendor_name},$.vendor_id))]}),s.jsxs("button",{onClick:P,className:"h-10 px-4 bg-slate-800 text-white rounded-lg font-bold hover:bg-slate-700 transition-colors flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-[18px]",children:"search"})," "]}),s.jsxs("div",{className:"ml-auto flex items-center gap-6",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase block",children:" "}),s.jsxs("span",{className:"text-lg font-black text-slate-800",children:[Fe(W.total),""]})]}),s.jsxs("div",{className:"text-right pl-6 border-l border-slate-200",children:[s.jsx("span",{className:"text-[10px] font-bold text-red-400 uppercase block",children:" "}),s.jsxs("span",{className:"text-lg font-black text-red-500",children:[Fe(W.unpaid),""]})]})]})]}),s.jsx("div",{className:"flex-1 bg-white rounded-[1.5rem] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 sticky top-0 z-10 shadow-sm",children:s.jsxs("tr",{className:"text-slate-500 border-b border-slate-200",children:[s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap w-1/3",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-right",children:" "}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100",children:[t.map($=>s.jsxs("tr",{onClick:()=>J($),className:"hover:bg-violet-50/50 cursor-pointer transition-colors group",children:[s.jsx("td",{className:"py-3 px-4 font-medium text-slate-600",children:$.purchase_date}),s.jsx("td",{className:"py-3 px-4 font-bold text-slate-700",children:$.vendor_name||"-"}),s.jsxs("td",{className:"py-3 px-4",children:[s.jsx("div",{className:"font-bold text-slate-800",children:$.item_name}),$.specification&&s.jsxs("div",{className:"text-xs text-slate-500",children:["(",$.specification,")"]})]}),s.jsx("td",{className:"py-3 px-4 text-center font-medium text-slate-600",children:Fe($.quantity)}),s.jsxs("td",{className:"py-3 px-4 text-right font-bold text-slate-800",children:[Fe($.total_amount),""]}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs font-bold border ${$.payment_status===""?"bg-red-50 text-red-600 border-red-200":"bg-green-50 text-green-600 border-green-200"}`,children:$.payment_status})}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("div",{className:"flex items-center justify-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("button",{onClick:Q=>{Q.stopPropagation(),B($.purchase_id)},className:"w-8 h-8 rounded-lg text-slate-400 hover:bg-red-50 hover:text-red-500 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"delete"})})})})]},$.purchase_id)),t.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"py-12 text-center text-slate-400 font-medium",children:"  ."})})]})]})})})]})]})]})},Iue=()=>{const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState([]),[n,i]=F.useState(!1),l=new Date().toISOString().split("T")[0],o=new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],[c,d]=F.useState({start:o,end:l,category:""}),u={id:null,date:l,category:"",amount:"",method:"",memo:""},[h,f]=F.useState(u);F.useEffect(()=>{p()},[]);const p=async()=>{i(!0);try{const I={start_date:c.start,end_date:c.end};c.category&&(I.category=c.category);const R=await Ke("get_expenses",I);r(R||[])}catch(I){console.error(I),a("","  : "+I),r([])}finally{i(!1)}},g=I=>{const{name:R,value:P}=I.target;f(H=>{if(R==="amount"){const G=Yu(P.replace(/,/g,""));return{...H,amount:G}}return{...H,[R]:P}})},b=I=>{const R=I.target.value.replace(/,/g,"");/^\d*$/.test(R)&&f(P=>({...P,amount:R}))},w=async()=>{const I=Number(h.amount);if(I<=0)return a("","  .");const R={expense_id:h.id,expense_date:h.date,category:h.category,amount:I,payment_method:h.method,memo:h.memo};try{await Ke("save_expense",R),await a("","  ."),k(),p()}catch(P){a(""," : "+P.message||P)}},j=async I=>{if(await e(" ","   ?"))try{await Ke("delete_expense",{id:I}),p()}catch(R){a(""," : "+R.message||R)}},k=()=>{f(u)},T=I=>{f({id:I.expense_id,date:I.expense_date,category:I.category,amount:String(I.amount),method:I.payment_method,memo:I.memo||""})},E=t.reduce((I,R)=>I+R.amount,0);return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-violet-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-violet-600 uppercase",children:"Financial Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Expense Management"})]})]}),s.jsxs("div",{className:"flex flex-1 gap-6 px-6 lg:px-8 pb-6 min-h-0",children:[s.jsx("div",{className:"w-[360px] flex flex-col gap-4 h-full",children:s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-5 border border-slate-200 shadow-sm relative group overflow-hidden flex flex-col flex-1 h-full",children:[s.jsx("div",{className:"absolute top-0 right-0 w-24 h-full bg-violet-50/50 -skew-x-12 translate-x-12 transition-transform group-hover:translate-x-6"}),s.jsxs("div",{className:"flex items-center gap-2 mb-4 relative z-10 shrink-0",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-violet-100 flex items-center justify-center text-violet-600",children:s.jsx("span",{className:"material-symbols-rounded",children:"edit_square"})}),s.jsx("h3",{className:"text-lg font-bold text-slate-700",children:"  "})]}),s.jsxs("div",{className:"flex flex-col gap-3 relative z-10 overflow-y-auto flex-1 px-1 custom-scrollbar",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"expense-date",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:" "}),s.jsx("input",{id:"expense-date",type:"date",name:"date",value:h.date,onChange:g,className:"w-full h-10 rounded-xl bg-slate-50 border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"expense-category",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{id:"expense-category",name:"category",value:h.category,onChange:g,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3 appearance-none",children:[s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:"/"}),s.jsx("option",{children:""})]}),s.jsx("span",{className:"material-symbols-rounded absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:"unfold_more"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"expense-amount",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:" "}),s.jsx("input",{id:"expense-amount",type:"text",name:"amount",value:Fe(h.amount),onChange:b,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold text-right focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"expense-method",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:" "}),s.jsxs("select",{id:"expense-method",name:"method",value:h.method,onChange:g,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3",children:[s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"expense-memo",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:" /"}),s.jsx("textarea",{id:"expense-memo",name:"memo",value:h.memo,onChange:g,className:"w-full h-32 rounded-xl bg-white border-slate-200 text-slate-800 text-sm p-3 focus:ring-2 focus:ring-violet-500 transition-all resize-none",placeholder:"  "})]}),s.jsxs("div",{className:"flex gap-2 mt-auto pt-4",children:[s.jsxs("button",{onClick:w,className:"flex-1 h-11 bg-violet-600 hover:bg-violet-700 text-white rounded-xl font-bold shadow-lg shadow-violet-200 transition-all flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"save"})," "]}),s.jsx("button",{onClick:k,className:"w-12 h-11 bg-white border border-slate-200 hover:bg-slate-50 text-slate-600 rounded-xl flex items-center justify-center transition-all",children:s.jsx("span",{className:"material-symbols-rounded",children:"restart_alt"})})]})]})]})}),s.jsxs("div",{className:"flex-1 flex flex-col min-w-0 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-4 border border-slate-200 shadow-sm flex flex-wrap items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-50 rounded-lg border border-slate-200",children:[s.jsx("span",{className:"material-symbols-rounded text-slate-400 text-[18px]",children:"calendar_today"}),s.jsx("input",{type:"date",value:c.start,onChange:I=>d({...c,start:I.target.value}),className:"bg-transparent text-sm font-bold text-slate-600 outline-none w-[150px]"}),s.jsx("span",{className:"text-slate-400",children:"~"}),s.jsx("input",{type:"date",value:c.end,onChange:I=>d({...c,end:I.target.value}),className:"bg-transparent text-sm font-bold text-slate-600 outline-none w-[150px]"})]}),s.jsxs("select",{value:c.category,onChange:I=>d({...c,category:I.target.value}),className:"h-10 rounded-lg border-slate-200 text-sm font-bold text-slate-600 w-32",children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:"/"}),s.jsx("option",{children:""})]}),s.jsxs("button",{onClick:p,className:"h-10 px-4 bg-slate-800 text-white rounded-lg font-bold hover:bg-slate-700 transition-colors flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-[18px]",children:"search"})," "]}),s.jsx("div",{className:"ml-auto flex items-center gap-6",children:s.jsxs("div",{className:"text-right pl-6 border-l border-slate-200",children:[s.jsx("span",{className:"text-[10px] font-bold text-red-400 uppercase block",children:" "}),s.jsxs("span",{className:"text-lg font-black text-red-500",children:[Fe(E),""]})]})})]}),s.jsx("div",{className:"flex-1 bg-white rounded-[1.5rem] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 sticky top-0 z-10 shadow-sm",children:s.jsxs("tr",{className:"text-slate-500 border-b border-slate-200",children:[s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center min-w-[100px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center min-w-[100px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-right min-w-[120px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap w-2/5 min-w-[200px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center w-[80px]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"py-12 text-center text-slate-400 font-medium",children:"  ."})}):t.map(I=>s.jsxs("tr",{onClick:()=>T(I),className:"hover:bg-violet-50/50 cursor-pointer transition-colors group",children:[s.jsx("td",{className:"py-3 px-4 text-center font-medium text-slate-600",children:I.expense_date}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs font-bold bg-slate-100 text-slate-600 border border-slate-200 whitespace-nowrap",children:I.category})}),s.jsxs("td",{className:"py-3 px-4 text-right font-black text-red-500",children:[Fe(I.amount),""]}),s.jsx("td",{className:"py-3 px-4 text-center text-slate-500 text-xs",children:I.payment_method}),s.jsx("td",{className:"py-3 px-4 text-slate-700 break-keep",children:I.memo||"-"}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("div",{className:"flex items-center justify-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("button",{onClick:R=>{R.stopPropagation(),j(I.expense_id)},className:"w-8 h-8 rounded-lg text-slate-400 hover:bg-red-50 hover:text-red-500 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"delete"})})})})]},I.expense_id))})]})})})]})]})]})},Rue=()=>{const{showAlert:a}=wa(),[e,t]=F.useState(""),[r,n]=F.useState("");F.useEffect(()=>{const p=new Date,g=new Date(p.getFullYear(),p.getMonth(),1),b=new Date(p.getFullYear(),p.getMonth()+1,0);t(g.toISOString().split("T")[0]),n(b.toISOString().split("T")[0])},[]);const[i,l]=F.useState({taxableSales:[],exemptSales:[],purchases:[],summary:{taxableSalesAmt:0,taxableSalesSupply:0,taxableSalesVat:0,exemptSalesAmt:0,totalSalesAmt:0,purchaseAmt:0,purchaseSupply:0,purchaseVat:0}}),[o,c]=F.useState(!1),d=async()=>{c(!0);try{const p=await Ke("get_tax_report",{start_date:e,end_date:r});let g=[],b=[],w=[],j={taxableSalesAmt:0,taxableSalesSupply:0,taxableSalesVat:0,exemptSalesAmt:0,totalSalesAmt:0,purchaseAmt:0,purchaseSupply:0,purchaseVat:0};(p||[]).forEach(k=>{const T=k.total_amount||0,E=k.supply_value||0,I=k.vat_amount||0,R=k.tax_exempt_value||0;k.direction===""?(j.totalSalesAmt+=T,k.tax_type===""?(b.push(k),j.exemptSalesAmt+=T):(k.tax_type===""||k.tax_type==="")&&(g.push(k),j.taxableSalesAmt+=T-R,j.taxableSalesSupply+=E,j.taxableSalesVat+=I,R>0&&(b.push({...k,name:`[] ${k.name}`,total_amount:R}),j.exemptSalesAmt+=R))):(w.push(k),j.purchaseAmt+=T,j.purchaseSupply+=E,j.purchaseVat+=I)}),l({taxableSales:g,exemptSales:b,purchases:w,summary:j})}catch(p){console.error(p),a("","  : "+p)}finally{c(!1)}},u=async()=>{if(i.summary.totalSalesAmt===0&&i.summary.purchaseAmt===0){a("","  .");return}let p=`\uFEFF[    ]
`;p+=` : ${e} ~ ${r}

`,p+=`[  (Output VAT)]
`,p+=` ,${i.summary.taxableSalesSupply}
`,p+=` ,${i.summary.taxableSalesVat}
`,p+=` ,${i.summary.exemptSalesAmt}
`,p+=` ,${i.summary.totalSalesAmt}

`,p+=`[  (Input VAT)]
`,p+=` ,${i.summary.purchaseSupply}
`,p+=` ,${i.summary.purchaseVat}
`,p+=` ,${i.summary.purchaseAmt}

`,p+=`,,,,,,,
`,[...i.taxableSales,...i.exemptSales,...i.purchases].forEach(T=>{const E=[T.direction,T.category,T.date,T.name,T.supply_value,T.vat_amount,T.total_amount,T.memo||"-"].join(",");p+=E+`
`});const b=`_${e.replace(/-/g,"")}~${r.replace(/-/g,"")}.csv`,w=new Blob([p],{type:"text/csv;charset=utf-8;"}),j=URL.createObjectURL(w),k=document.createElement("a");k.href=j,k.setAttribute("download",b),document.body.appendChild(k),k.click(),document.body.removeChild(k),a(""," .")},h=async()=>{c(!0);try{const p=new URLSearchParams({start_date:e,end_date:r});let g=localStorage.getItem("API_BASE_URL")||"";g.endsWith("/")&&(g=g.slice(0,-1));const b=localStorage.getItem("token"),w=`${g}/api/finance/report/pdf?${p.toString()}`,j=await fetch(w,{headers:{Authorization:`Bearer ${b}`}});if(!j.ok){const I=await j.text();throw new Error(I||`Status: ${j.status}`)}const k=await j.blob(),T=window.URL.createObjectURL(k),E=document.createElement("a");E.href=T,E.download=`_${e.replace(/-/g,"")}_${r.replace(/-/g,"")}.pdf`,document.body.appendChild(E),E.click(),window.URL.revokeObjectURL(T),document.body.removeChild(E)}catch(p){console.error(p),a("","PDF  : "+p.message)}finally{c(!1)}},f=async()=>{const p=[...i.taxableSales||[],...i.exemptSales||[],...i.purchases||[]];if(p.length===0){a("","  .   .");return}if(window.confirm(`[ ]

 ${p.length}  ( API) ?

       .`)){c(!0);try{const b=await Ke("submit_tax_report",{items:p,start_date:e,end_date:r});a(" ",b)}catch(b){console.error(b),a(" "," : "+b)}finally{c(!1)}}};return s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 p-6 lg:p-8 overflow-hidden font-sans",children:[s.jsxs("div",{className:"mb-8 flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-8 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[10px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Tax & VAT Report"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["/   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Tax Support"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 bg-white p-2 rounded-2xl shadow-sm border border-slate-200",children:[s.jsxs("div",{className:"flex items-center gap-2 px-3 border-r border-slate-100",children:[s.jsx("label",{htmlFor:"tax-start-date",className:"text-[10px] font-bold text-slate-400 uppercase",children:""}),s.jsx("input",{id:"tax-start-date",type:"date",value:e,onChange:p=>t(p.target.value),className:"text-sm font-black text-slate-700 outline-none border-none bg-transparent w-40 font-mono"})]}),s.jsxs("div",{className:"flex items-center gap-2 px-3 border-r border-slate-100",children:[s.jsx("label",{htmlFor:"tax-end-date",className:"text-[10px] font-bold text-slate-400 uppercase",children:""}),s.jsx("input",{id:"tax-end-date",type:"date",value:r,onChange:p=>n(p.target.value),className:"text-sm font-black text-slate-700 outline-none border-none bg-transparent w-40 font-mono"})]}),s.jsxs("button",{onClick:d,disabled:o,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2.5 rounded-xl font-black text-sm transition-all shadow-md shadow-indigo-100 flex items-center gap-2 disabled:opacity-50",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"analytics"}),""]}),s.jsxs("button",{onClick:u,className:"bg-emerald-500 hover:bg-emerald-600 text-white px-5 py-2.5 rounded-xl font-black text-sm transition-all shadow-md shadow-emerald-100 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"download"})," "]}),s.jsxs("button",{onClick:h,className:"bg-slate-700 hover:bg-slate-800 text-white px-5 py-2.5 rounded-xl font-black text-sm transition-all shadow-md shadow-slate-100 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"picture_as_pdf"}),"PDF "]}),s.jsxs("button",{onClick:f,disabled:o,className:"bg-violet-600 hover:bg-violet-700 text-white px-5 py-2.5 rounded-xl font-black text-sm transition-all shadow-md shadow-violet-100 flex items-center gap-2 disabled:opacity-50",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"rocket_launch"})," (API)"]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-8 shrink-0",children:[s.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-200 relative overflow-hidden group hover:shadow-md transition-all",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-50 rounded-bl-full -mr-16 -mt-16 transition-transform group-hover:scale-110"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("p",{className:"text-[11px] font-black text-indigo-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"trending_up"}),"   (Sales/Revenue)"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm font-bold text-slate-500",children:[s.jsx("span",{children:" (+)"}),s.jsxs("span",{className:"text-slate-700",children:[Fe(i.summary.taxableSalesSupply+i.summary.exemptSalesAmt),""]})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm font-bold text-slate-500 border-b border-slate-50 pb-2",children:[s.jsx("span",{children:"  (Output VAT)"}),s.jsxs("span",{className:"text-indigo-600",children:["+",Fe(i.summary.taxableSalesVat),""]})]}),s.jsxs("div",{className:"flex justify-between items-center bg-indigo-50/50 p-2 rounded-lg",children:[s.jsx("span",{className:"text-xs font-black text-indigo-400",children:" "}),s.jsxs("span",{className:"text-xl font-black text-indigo-700 tracking-tight",children:[Fe(i.summary.totalSalesAmt),""]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-200 relative overflow-hidden group hover:shadow-md transition-all",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-rose-50 rounded-bl-full -mr-16 -mt-16 transition-transform group-hover:scale-110"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("p",{className:"text-[11px] font-black text-rose-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"trending_down"})," /  (Expenses)"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm font-bold text-slate-500",children:[s.jsx("span",{children:" (Input)"}),s.jsxs("span",{className:"text-slate-700",children:[Fe(i.summary.purchaseSupply),""]})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm font-bold text-slate-500 border-b border-slate-50 pb-2",children:[s.jsx("span",{children:"  (Input VAT)"}),s.jsxs("span",{className:"text-rose-600",children:["-",Fe(i.summary.purchaseVat),""]})]}),s.jsxs("div",{className:"flex justify-between items-center bg-rose-50/50 p-2 rounded-lg",children:[s.jsx("span",{className:"text-xs font-black text-rose-400",children:" "}),s.jsxs("span",{className:"text-xl font-black text-rose-700 tracking-tight",children:[Fe(i.summary.purchaseAmt),""]})]})]})]})]}),s.jsxs("div",{className:"bg-slate-900 rounded-3xl p-6 shadow-xl relative overflow-hidden group",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/10 to-transparent opacity-50"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("p",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg text-white",children:"account_balance_wallet"}),"    (Estimated VAT)"]}),s.jsxs("div",{className:"flex flex-col justify-center h-[116px]",children:[s.jsx("p",{className:"text-xs font-bold text-slate-500 mb-2",children:" - "}),s.jsxs("p",{className:"text-3xl font-black text-white tracking-tighter tabular-nums",children:[Fe(i.summary.taxableSalesVat-i.summary.purchaseVat)," ",s.jsx("span",{className:"text-base font-medium text-slate-500",children:""})]}),s.jsxs("div",{className:"mt-4 flex gap-4",children:[s.jsxs("div",{className:"text-[10px] text-slate-400",children:[": ",s.jsxs("span",{className:"text-white font-bold",children:[i.taxableSales.length+i.exemptSales.length+i.purchases.length,""]})]}),s.jsxs("div",{className:"text-[10px] text-slate-400",children:[": ",s.jsx("span",{className:"text-emerald-400 font-bold",children:""})]})]})]})]})]})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-6 min-h-0",children:[s.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[s.jsxs("h3",{className:"text-sm font-black text-slate-700 flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"}),"   (Revenue List)"]}),s.jsxs("span",{className:"text-[10px] font-bold text-slate-400 font-mono",children:[(i.taxableSales?.length||0)+(i.exemptSales?.length||0)," "]})]}),s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar",children:s.jsxs("table",{className:"w-full text-[11px] border-collapse",children:[s.jsx("thead",{className:"sticky top-0 bg-white shadow-sm z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 text-left font-bold text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"p-3 text-left font-bold text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"p-3 text-left font-bold text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"p-3 text-right font-bold text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"p-3 text-right font-bold text-slate-400 border-b border-slate-100",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:[...i.taxableSales||[],...i.exemptSales||[]].map((p,g)=>s.jsxs("tr",{className:"hover:bg-indigo-50/30 transition-colors group",children:[s.jsx("td",{className:"p-3 font-bold text-indigo-400",children:p.category}),s.jsx("td",{className:"p-3 font-mono text-slate-400",children:p.date}),s.jsx("td",{className:"p-3 font-bold text-slate-700 truncate max-w-[120px]",title:p.name,children:p.name}),s.jsx("td",{className:"p-3 text-right font-black text-indigo-500",children:Fe(p.vat_amount)}),s.jsx("td",{className:"p-3 text-right font-black text-slate-800 tabular-nums",children:Fe(p.total_amount)})]},g))})]})})]}),s.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[s.jsxs("h3",{className:"text-sm font-black text-slate-700 flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-rose-500"})," /  (Expense List)"]}),s.jsxs("span",{className:"text-[10px] font-bold text-slate-400 font-mono",children:[i.purchases?.length||0," "]})]}),s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar",children:s.jsxs("table",{className:"w-full text-[11px] border-collapse",children:[s.jsx("thead",{className:"sticky top-0 bg-white shadow-sm z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 text-left font-bold text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"p-3 text-left font-bold text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"p-3 text-left font-bold text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"p-3 text-right font-bold text-slate-400 border-b border-slate-100",children:"()"}),s.jsx("th",{className:"p-3 text-right font-bold text-slate-400 border-b border-slate-100",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:(i.purchases||[]).map((p,g)=>s.jsxs("tr",{className:"hover:bg-rose-50/30 transition-colors group",children:[s.jsx("td",{className:"p-3 font-bold text-rose-400",children:p.category}),s.jsx("td",{className:"p-3 font-mono text-slate-400",children:p.date}),s.jsx("td",{className:"p-3 font-bold text-slate-700 truncate max-w-[120px]",title:p.name,children:p.name}),s.jsx("td",{className:"p-3 text-right font-black text-rose-500",children:Fe(p.vat_amount)}),s.jsx("td",{className:"p-3 text-right font-black text-slate-800 tabular-nums",children:Fe(p.total_amount)})]},g))})]})})]})]}),s.jsx("p",{className:"mt-4 text-[10px] text-slate-400 italic",children:"*          ,        /    ."})]})},Lue=()=>{const a=an(),{showAlert:e,showConfirm:t}=wa(),{isAuthorized:r,checkAdmin:n,isVerifying:i}=ps(),[l,o]=F.useState([]),[c,d]=F.useState([]),[u,h]=F.useState(""),f={id:null,name:"",bizNum:"",rep:"",mobile:"",email:"",address:"",items:"",memo:""},[p,g]=F.useState(f),b=F.useRef(!1);F.useEffect(()=>{if(b.current)return;b.current=!0,(async()=>await n()||a("/"))()},[n,a]),F.useEffect(()=>{r&&w()},[r]),F.useEffect(()=>{if(!u)o(c);else{const R=u.toLowerCase(),P=c.filter(H=>H.vendor_name.toLowerCase().includes(R)||H.main_items&&H.main_items.toLowerCase().includes(R));o(P)}},[u,c]);const w=async()=>{try{const R=await Ke("get_vendors");d(R||[]),o(R||[])}catch(R){console.error(R),e("","  : "+R.message||R)}},j=R=>{const{name:P,value:H}=R.target;g(G=>({...G,[P]:H}))},k=async()=>{if(!p.name.trim())return e(""," .");const R={vendor_id:p.id,vendor_name:p.name,business_number:p.bizNum,representative:p.rep,mobile_number:p.mobile,email:p.email,address:p.address,main_items:p.items,memo:p.memo,is_active:!0};try{await Ke("save_vendor",R),await e("","  ."),E(),w()}catch(P){e(""," : "+P.message||P)}},T=async(R,P)=>{if(await t(" ",`'${P}'  ?`))try{await Ke("delete_vendor",{id:R}),w()}catch(H){e(""," : "+H.message||H)}},E=()=>{g(f),h("")},I=R=>{g({id:R.vendor_id,name:R.vendor_name,bizNum:R.business_number||"",rep:R.representative||"",mobile:R.mobile_number||"",email:R.email||"",address:R.address||"",items:R.main_items||"",memo:R.memo||""}),h(R.vendor_name)};return r?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-violet-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-violet-600 uppercase",children:"Vendor Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["/  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Supply Vendors"})]})]}),s.jsxs("div",{className:"flex flex-1 gap-6 px-6 lg:px-8 pb-6 min-h-0",children:[s.jsx("div",{className:"w-[420px] flex flex-col gap-4 h-full",children:s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-5 border border-slate-200 shadow-sm relative group overflow-hidden flex flex-col flex-1 h-full",children:[s.jsx("div",{className:"absolute top-0 right-0 w-24 h-full bg-violet-50/50 -skew-x-12 translate-x-12 transition-transform group-hover:translate-x-6"}),s.jsxs("div",{className:"flex items-center gap-2 mb-4 relative z-10 shrink-0",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-violet-100 flex items-center justify-center text-violet-600",children:s.jsx("span",{className:"material-symbols-rounded",children:"store"})}),s.jsx("h3",{className:"text-lg font-bold text-slate-700",children:"  "})]}),s.jsxs("div",{className:"flex flex-col gap-3 relative z-10 overflow-y-auto flex-1 px-1 custom-scrollbar",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"vendor-name",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:[" () ",s.jsx("span",{className:"text-violet-500",children:"*"})]}),s.jsx("input",{id:"vendor-name",name:"name",value:p.name,onChange:j,placeholder:": OO",autoFocus:!0,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"vendor-rep",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsx("input",{id:"vendor-rep",name:"rep",value:p.rep,onChange:j,placeholder:"",className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"vendor-biznum",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsx("input",{id:"vendor-biznum",name:"bizNum",value:p.bizNum,onChange:j,placeholder:"000-00-00000",className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]})]}),s.jsxs("div",{className:"w-1/2 pr-1.5",children:[s.jsx("label",{htmlFor:"vendor-mobile",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsx("input",{id:"vendor-mobile",name:"mobile",value:p.mobile,onChange:j,placeholder:"010..",className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"vendor-email",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsx("input",{id:"vendor-email",type:"email",name:"email",value:p.email,onChange:j,placeholder:"email@example.com",className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"vendor-address",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsx("input",{id:"vendor-address",name:"address",value:p.address,onChange:j,placeholder:"  ",className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"vendor-items",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:"  "}),s.jsx("input",{id:"vendor-items",name:"items",value:p.items,onChange:j,placeholder:": , ,  ",className:"w-full h-10 rounded-xl bg-white border-slate-200 text-slate-800 font-bold focus:ring-2 focus:ring-violet-500 transition-all px-3"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"vendor-memo",className:"text-[11px] font-bold text-slate-500 uppercase ml-1 mb-1 block",children:""}),s.jsx("textarea",{id:"vendor-memo",name:"memo",value:p.memo,onChange:j,className:"w-full h-24 rounded-xl bg-white border-slate-200 text-slate-800 text-sm p-3 focus:ring-2 focus:ring-violet-500 transition-all resize-none",placeholder:"  "})]}),s.jsxs("div",{className:"flex gap-2 mt-auto pt-4",children:[s.jsxs("button",{onClick:k,className:"flex-1 h-11 bg-violet-600 hover:bg-violet-700 text-white rounded-xl font-bold shadow-lg shadow-violet-200 transition-all flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"save"})," "]}),s.jsx("button",{onClick:E,className:"w-12 h-11 bg-white border border-slate-200 hover:bg-slate-50 text-slate-600 rounded-xl flex items-center justify-center transition-all",children:s.jsx("span",{className:"material-symbols-rounded",children:"restart_alt"})})]})]})]})}),s.jsxs("div",{className:"flex-1 flex flex-col min-w-0 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-4 border border-slate-200 shadow-sm flex flex-wrap items-center justify-between gap-3",children:[s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-rounded absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"search"}),s.jsx("input",{value:u,onChange:R=>h(R.target.value),placeholder:"   ...",className:"pl-10 pr-4 h-10 rounded-xl bg-slate-50 border-slate-200 text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-violet-500 transition-all w-64"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[11px] font-bold text-slate-400 uppercase",children:" "}),s.jsx("span",{className:"text-lg font-black text-violet-600",children:l.length}),s.jsx("span",{className:"text-sm font-medium text-slate-500",children:""})]})]}),s.jsx("div",{className:"flex-1 bg-white rounded-[1.5rem] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 sticky top-0 z-10 shadow-sm",children:s.jsxs("tr",{className:"text-slate-500 border-b border-slate-200",children:[s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap w-[15%] min-w-[120px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap w-[10%] min-w-[80px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap w-[12%] min-w-[100px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap w-[25%] min-w-[200px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap w-[30%] min-w-[150px]",children:" "}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center w-[80px]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:l.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"py-12 text-center text-slate-400 font-medium",children:"  ."})}):l.map(R=>s.jsxs("tr",{onClick:()=>I(R),className:"hover:bg-violet-50/50 cursor-pointer transition-colors group",children:[s.jsx("td",{className:"py-3 px-4 font-bold text-slate-800 break-keep",children:R.vendor_name}),s.jsx("td",{className:"py-3 px-4 font-medium text-slate-600",children:R.representative||"-"}),s.jsx("td",{className:"py-3 px-4 font-mono text-xs text-slate-500",children:R.mobile_number||"-"}),s.jsx("td",{className:"py-3 px-4 text-slate-600 text-xs break-keep",children:R.address||"-"}),s.jsx("td",{className:"py-3 px-4 text-slate-700 text-sm truncate",children:R.main_items||"-"}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("div",{className:"flex items-center justify-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("button",{onClick:P=>{P.stopPropagation(),T(R.vendor_id,R.vendor_name)},className:"w-8 h-8 rounded-lg text-slate-400 hover:bg-red-50 hover:text-red-500 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"delete"})})})})]},R.vendor_id))})]})})})]})]})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[i?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Ii,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:i?"  ...":"  ..."})]})})};qi.register(...Sb);const Oue=`
    @media print {
        @page { size: A4 portrait; margin: 15mm; }
        html, body { 
            background: white !important; 
            color: black !important;
            color-scheme: light !important;
            margin: 0 !important;
            padding: 0 !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }
    }
    .print-report-wrapper { 
        font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; 
        padding: 0; 
        color: #000; 
        width: 100%;
        box-sizing: border-box;
    }
    .report-card {
        border: 1px solid #000;
        padding: 30px;
        margin-bottom: 20px;
        position: relative;
    }
    .report-header { 
        text-align: center; 
        margin-bottom: 40px; 
    }
    .report-header h1 { 
        margin: 0; 
        font-size: 32px; 
        font-weight: 900; 
        letter-spacing: 0.2em; 
        text-decoration: underline;
        text-underline-offset: 10px;
    }
    .report-header .info {
        margin-top: 20px;
        display: flex;
        justify-content: space-between;
        font-size: 14px;
        font-weight: bold;
    }
    .stats-grid {
        display: grid;
        grid-template-cols: repeat(3, 1fr);
        gap: 20px;
        margin-bottom: 30px;
    }
    .stat-box {
        border: 2px solid #000;
        padding: 15px;
        text-align: center;
    }
    .stat-box .label { font-size: 12px; color: #555; margin-bottom: 5px; font-weight: bold; }
    .stat-box .value { font-size: 20px; font-weight: 900; }
    
    .section-title {
        font-size: 18px;
        font-weight: 900;
        margin: 30px 0 15px 0;
        padding-left: 10px;
        border-left: 5px solid #000;
    }
    
    table { 
        width: 100%; 
        border-collapse: collapse; 
        font-size: 12px; 
        border: 2px solid #000; 
    }
    th, td { 
        border: 1px solid #000; 
        padding: 8px 10px; 
        text-align: center; 
    }
    th { 
        background: #f0f0f0 !important; 
        font-weight: 900; 
    }
    .text-right { text-align: right; }
    .chart-placeholder {
        width: 100%;
        height: 300px;
        border: 1px dashed #ccc;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 20px 0;
        background: #fafafa;
    }
`,Pue=()=>{const{showAlert:a}=wa(),[e,t]=F.useState(new Date().getFullYear()),[r,n]=F.useState({revenue:0,cost:0,profit:0,margin:0}),[i,l]=F.useState([]),[o,c]=F.useState([]),[d,u]=F.useState([]),[h,f]=F.useState(!1),p=F.useRef(null),g=F.useRef(null),b=F.useRef(null),w=F.useRef(null),j=new Date().getFullYear(),k=Array.from({length:5},(H,G)=>j-G);F.useEffect(()=>{T()},[e]),F.useEffect(()=>{!h&&i.length>0&&E()},[i,h]),F.useEffect(()=>{!h&&o.length>0&&I()},[o,h]);const T=async()=>{f(!0);try{const[H,G,X]=await Promise.all([Ke("get_monthly_pl",{year:e}),Ke("get_cost_breakdown",{year:e}),Ke("get_vendor_ranking",{year:e})]),U=(H||[]).reduce((B,W)=>B+W.revenue,0),te=(H||[]).reduce((B,W)=>B+W.cost,0),Z=U-te,J=U>0?(Z/U*100).toFixed(1):0;n({revenue:U,cost:te,profit:Z,margin:J}),l(H||[]),c(G||[]),u(X||[])}catch(H){console.error("Analysis Load Error:",H),a("","    : "+H)}finally{f(!1)}},E=()=>{if(!p.current)return;const H=p.current.getContext("2d");b.current&&b.current.destroy(),b.current=new qi(H,{type:"bar",data:{labels:i.map(G=>parseInt(G.month.split("-")[1])+""),datasets:[{label:"",type:"line",data:i.map(G=>G.profit),borderColor:"#10b981",backgroundColor:"#10b981",borderWidth:3,pointBackgroundColor:"#fff",pointBorderColor:"#10b981",pointRadius:4,tension:.3,order:0,yAxisID:"y"},{label:"",data:i.map(G=>G.revenue),backgroundColor:"rgba(59, 130, 246, 0.8)",borderRadius:4,order:1},{label:"",data:i.map(G=>G.cost),backgroundColor:"rgba(239, 68, 68, 0.8)",borderRadius:4,order:2}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{y:{beginAtZero:!0,grid:{borderDash:[4,4],color:"#f1f5f9"},ticks:{callback:G=>G>=1e6?G/1e4+"":G,font:{family:"Pretendard",size:11}}},x:{grid:{display:!1},ticks:{font:{family:"Pretendard",size:11}}}},plugins:{legend:{labels:{usePointStyle:!0,font:{family:"Pretendard",size:12}}},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.9)",padding:10,callbacks:{label:function(G){let X=G.dataset.label||"";return X&&(X+=": "),G.parsed.y!==null&&(X+=Fe(G.parsed.y)+""),X}}}}}})},I=()=>{if(!g.current)return;const H=g.current.getContext("2d");w.current&&w.current.destroy();const G=["#3b82f6","#ef4444","#f59e0b","#10b981","#8b5cf6","#ec4899","#6366f1","#14b8a6","#f43f5e","#64748b"];w.current=new qi(H,{type:"doughnut",data:{labels:o.map(X=>X.category),datasets:[{data:o.map(X=>X.amount),backgroundColor:G.slice(0,o.length),borderWidth:0,hoverOffset:10}]},options:{responsive:!0,maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.9)",callbacks:{label:function(X){const U=X.parsed,te=X.dataset.data.reduce((J,B)=>J+B,0),Z=(U/te*100).toFixed(1);return`${X.label}: ${Fe(U)} (${Z}%)`}}}}}})},R=()=>{if(h)return;const H=p.current?p.current.toDataURL("image/png"):null,G=g.current?g.current.toDataURL("image/png"):null,X=`
            <style>${Oue}</style>
            <div class="print-report-wrapper">
                <div class="report-card">
                    <div class="report-header">
                        <h1>   </h1>
                        <div class="info">
                            <span> : <strong>${e}</strong></span>
                            <span> : <strong>${new Date().toLocaleString()}</strong></span>
                        </div>
                    </div>

                    <div class="section-title">   (Annual Summary)</div>
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="label">  (Revenue)</div>
                            <div class="value" style="color: #2563eb;"> ${Fe(r.revenue)}</div>
                        </div>
                        <div class="stat-box">
                            <div class="label">  (Total Cost)</div>
                            <div class="value" style="color: #dc2626;"> ${Fe(r.cost)}</div>
                        </div>
                        <div class="stat-box">
                            <div class="label">  (Net Profit)</div>
                            <div class="value" style="color: #059669;"> ${Fe(r.profit)} (${r.margin}%)</div>
                        </div>
                    </div>

                    <div class="section-title">   (Monthly Trend)</div>
                    ${H?`<img src="${H}" style="width: 100%; height: auto; max-height: 300px; display: block; margin-bottom: 20px;" />`:'<div class="chart-placeholder">  </div>'}

                    <div class="section-title">   </div>
                    <table>
                        <thead>
                            <tr>
                                <th></th>
                                <th>(A)</th>
                                <th>(B)</th>
                                <th>(A-B)</th>
                                <th>(%)</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${i.map(U=>`
                                <tr>
                                    <td>${parseInt(U.month.split("-")[1])}</td>
                                    <td class="text-right">${Fe(U.revenue)}</td>
                                    <td class="text-right">${Fe(U.cost)}</td>
                                    <td class="text-right" style="font-weight: bold;">${Fe(U.profit)}</td>
                                    <td>${U.revenue>0?(U.profit/U.revenue*100).toFixed(1):0}%</td>
                                </tr>
                            `).join("")}
                        </tbody>
                        <tfoot>
                            <tr style="background: #fafafa; font-weight: 900;">
                                <td> </td>
                                <td class="text-right">${Fe(r.revenue)}</td>
                                <td class="text-right">${Fe(r.cost)}</td>
                                <td class="text-right">${Fe(r.profit)}</td>
                                <td>${r.margin}%</td>
                            </tr>
                        </tfoot>
                    </table>

                    <div style="page-break-before: always;"></div>

                    <div class="section-title">   </div>
                    <div style="display: flex; gap: 40px; align-items: flex-start;">
                        <div style="flex: 1;">
                            ${G?`<img src="${G}" style="width: 100%; max-width: 300px; display: block; margin: 0 auto;" />`:'<div class="chart-placeholder">  </div>'}
                        </div>
                        <div style="flex: 1.5;">
                            <table>
                                <thead>
                                    <tr>
                                        <th> </th>
                                        <th></th>
                                        <th>(%)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${o.map(U=>`
                                        <tr>
                                            <td style="text-align: left;">${U.category}</td>
                                            <td class="text-right">${Fe(U.amount)}</td>
                                            <td class="font-bold">${U.percentage}%</td>
                                        </tr>
                                    `).join("")}
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="section-title">    (TOP 5)</div>
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 60px;"></th>
                                <th style="text-align: left;"></th>
                                <th style="width: 150px;"></th>
                                <th style="width: 80px;"></th>
                            </tr>
                        </thead>
                        <tbody>
                            ${d.map((U,te)=>`
                                <tr>
                                    <td>${te+1}</td>
                                    <td style="text-align: left; font-weight: bold;">${U.vendor_name}</td>
                                    <td class="text-right">${Fe(U.total_amount)}</td>
                                    <td>${U.purchase_count}</td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>

                    <div style="margin-top: 50px; text-align: center; border-top: 1px solid #eee; pt-20px; font-size: 11px; color: #666;">
                        <p>  Mycelium Enterprise Intelligence      .</p>
                        <p> Mycelium ERP - All Rights Reserved.</p>
                    </div>
                </div>
            </div>
        `;oo(X)},P=["bg-blue-500","bg-red-500","bg-amber-500","bg-emerald-500","bg-violet-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-rose-500","bg-slate-500"];return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-violet-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-violet-600 uppercase",children:"Financial Intelligence"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["/  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Profit & Loss Analysis"})]}),s.jsxs("p",{className:"text-slate-400 text-sm mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"info"})," =  - ( + )     "]})]}),s.jsxs("div",{className:"flex flex-col flex-1 gap-6 px-6 lg:px-8 pb-8 min-h-0 overflow-y-auto custom-scrollbar",children:[s.jsxs("div",{className:"flex flex-col xl:flex-row gap-6 shrink-0 h-[420px]",children:[s.jsxs("div",{className:"w-full xl:w-[320px] flex flex-col gap-4",children:[s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-5 border border-slate-200 shadow-sm",children:[s.jsx("label",{htmlFor:"analysis-year",className:"text-xs font-bold text-slate-500 uppercase mb-2 block",children:"  (Fiscal Year)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("select",{id:"analysis-year",value:e,onChange:H=>t(Number(H.target.value)),className:"flex-1 h-11 rounded-xl bg-slate-50 border-slate-200 text-slate-700 font-bold focus:ring-2 focus:ring-violet-500 px-3 outline-none transition-all",children:k.map(H=>s.jsxs("option",{value:H,children:[H,""]},H))}),s.jsx("button",{onClick:T,className:"w-11 h-11 rounded-xl bg-violet-600 text-white flex items-center justify-center hover:bg-violet-700 shadow-lg shadow-violet-200 transition-all",children:s.jsx("span",{className:"material-symbols-rounded",children:"refresh"})}),s.jsxs("button",{onClick:()=>R(),className:"h-11 px-5 rounded-xl bg-white border border-slate-200 text-slate-600 font-bold text-xs flex items-center gap-2 hover:bg-slate-50 transition-all shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-violet-500 filled",children:"print"})," "]})]})]}),s.jsxs("div",{className:"flex-1 bg-white rounded-[1.5rem] p-6 border border-slate-200 shadow-sm flex flex-col justify-between relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-full bg-slate-50 -skew-x-12 translate-x-10 transition-transform group-hover:translate-x-4"}),s.jsxs("div",{className:"relative z-10 space-y-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Total Revenue"}),s.jsxs("div",{className:"text-2xl font-black text-blue-600 tracking-tight",children:[Fe(r.revenue),""]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Total Cost"}),s.jsxs("div",{className:"text-2xl font-black text-red-500 tracking-tight",children:[Fe(r.cost),""]})]}),s.jsxs("div",{className:"pt-4 border-t border-dashed border-slate-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("div",{className:"text-sm font-bold text-slate-700 uppercase",children:"Net Profit"}),s.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${r.profit>=0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:[" ",r.margin,"%"]})]}),s.jsxs("div",{className:`text-3xl font-black tracking-tight ${r.profit>=0?"text-emerald-500":"text-red-500"}`,children:[Fe(r.profit),""]})]})]})]})]}),s.jsxs("div",{className:"flex-1 bg-white rounded-[1.5rem] p-6 border border-slate-200 shadow-sm flex flex-col min-w-0",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-700 mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-blue-500",children:"bar_chart"}),"   "]}),s.jsxs("div",{className:"flex-1 relative w-full h-full min-h-0",children:[h&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/50 z-10 backdrop-blur-sm",children:s.jsx("span",{className:"material-symbols-rounded animate-spin text-3xl text-violet-500",children:"sync"})}),s.jsx("canvas",{ref:p})]})]})]}),s.jsxs("div",{className:"flex flex-col xl:flex-row gap-6 shrink-0 h-[380px]",children:[s.jsxs("div",{className:"flex-1 bg-white rounded-[1.5rem] p-6 border border-slate-200 shadow-sm flex flex-col",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-700 mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-rose-500",children:"pie_chart"}),"   (Cost Breakdown)"]}),s.jsxs("div",{className:"flex flex-1 items-center gap-8 min-h-0",children:[s.jsxs("div",{className:"relative w-[240px] h-[240px] shrink-0",children:[s.jsx("canvas",{ref:g}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:s.jsx("span",{className:"text-xs font-bold text-slate-400",children:"EXPENSES"})})]}),s.jsx("div",{className:"flex-1 h-[240px] overflow-y-auto pr-2 custom-scrollbar",children:o.length===0?s.jsx("div",{className:"h-full flex items-center justify-center text-slate-400 text-sm",children:" "}):s.jsx("div",{className:"grid grid-cols-1 gap-2",children:o.map((H,G)=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-slate-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`w-3 h-3 rounded-full ${P[G%P.length]}`}),s.jsx("span",{className:"text-sm font-bold text-slate-600",children:H.category})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-black text-slate-800",children:[H.percentage,"%"]}),s.jsxs("div",{className:"text-[10px] text-slate-400",children:[Fe(H.amount),""]})]})]},G))})})]})]}),s.jsxs("div",{className:"flex-1 bg-white rounded-[1.5rem] p-6 border border-slate-200 shadow-sm flex flex-col min-w-0",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-700 mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-amber-500",children:"trophy"}),"   (Top 5)"]}),s.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:s.jsx("div",{className:"overflow-y-auto flex-1 custom-scrollbar",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 sticky top-0 z-10",children:s.jsxs("tr",{className:"text-slate-500 border-b border-slate-200",children:[s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center w-[10%] min-w-[60px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap w-[40%] min-w-[120px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-right w-[30%] min-w-[100px]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold whitespace-nowrap text-center w-[20%] min-w-[80px]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:d.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"4",className:"py-12 text-center text-slate-400 font-medium",children:" ."})}):d.map((H,G)=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("span",{className:`inline-flex items-center justify-center w-6 h-6 rounded-full text-xs font-bold ${G<3?"bg-amber-100 text-amber-700":"text-slate-400"}`,children:G+1})}),s.jsx("td",{className:"py-3 px-4 font-bold text-slate-700",children:H.vendor_name}),s.jsxs("td",{className:"py-3 px-4 text-right font-black text-slate-800",children:[Fe(H.total_amount),""]}),s.jsxs("td",{className:"py-3 px-4 text-center text-slate-500 text-xs",children:[H.purchase_count,""]})]},G))})]})})})]})]})]})]})},zue=`
    @media print {
        @page { size: A4 portrait; margin: 15mm; }
        html, body { 
            background: white !important; 
            color: black !important;
            color-scheme: light !important;
            margin: 0 !important;
            padding: 0 !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }
    }
    .print-report-wrapper { 
        font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; 
        padding: 0; 
        color: #000; 
        width: 100%;
    }
    .report-card {
        border: 1px solid #000;
        padding: 30px;
        position: relative;
    }
    .report-header { text-align: center; margin-bottom: 40px; }
    .report-header h1 { 
        margin: 0; 
        font-size: 28px; 
        font-weight: 900; 
        letter-spacing: 0.1em; 
        text-decoration: underline; 
        text-underline-offset: 8px;
    }
    .report-header .meta {
        margin-top: 15px;
        display: flex;
        justify-content: space-between;
        font-size: 13px;
        font-weight: bold;
    }
    .section-title {
        font-size: 18px;
        font-weight: 900;
        margin: 30px 0 15px 0;
        padding-left: 10px;
        border-left: 5px solid #000;
    }
    .summary-box {
        border: 2px solid #000;
        padding: 20px;
        background: #fdfdfd !important;
        margin-bottom: 20px;
    }
    .summary-grid {
        display: grid;
        grid-template-cols: 1fr 1fr;
        gap: 15px;
    }
    .summary-item {
        display: flex;
        justify-content: space-between;
        border-bottom: 1px dashed #ccc;
        padding-bottom: 5px;
    }
    .summary-item .label { font-weight: bold; color: #555; }
    .summary-item .value { font-weight: 900; }
    
    table { width: 100%; border-collapse: collapse; font-size: 12px; border: 2px solid #000; }
    th, td { border: 1px solid #000; padding: 8px; text-align: center; }
    th { background: #f0f0f0 !important; font-weight: 900; }
    .text-right { text-align: right; }
    .advice-content {
        padding: 15px;
        border: 1px solid #eee;
        background: #fafafa;
        font-size: 13px;
        line-height: 1.6;
        white-space: pre-wrap;
    }
`;qi.register(...Sb);const Bue=()=>{const{showAlert:a}=wa(),[e,t]=F.useState("advice"),[r,n]=F.useState(!0),[i,l]=F.useState("  ..."),[o,c]=F.useState({trend:[],topProducts:[]}),[d,u]=F.useState(!1),[h,f]=F.useState(!1),[p,g]=F.useState(""),b=(T,E="  ...")=>{f(T),g(E)},w=T=>{e!==T&&(u(!0),setTimeout(()=>{t(T),setTimeout(()=>u(!1),300)},50))},j=[{id:"advice",label:"AI  ",icon:"psychology",color:"text-indigo-500"},{id:"summary",label:" ",icon:"dashboard",color:"text-slate-600"},{id:"trend",label:" ",icon:"trending_up",color:"text-blue-500"},{id:"product",label:"/",icon:"inventory_2",color:"text-amber-500"},{id:"forecast",label:"AI  ",icon:"auto_awesome",color:"text-violet-600"},{id:"profit",label:" ",icon:"account_balance_wallet",color:"text-emerald-500"}];F.useEffect(()=>{k()},[]);const k=async()=>{try{const[T,E]=await Promise.all([ht("get_ten_year_sales_stats"),ht("get_top3_products_by_qty")]);c({trend:T||[],topProducts:E||[]})}catch(T){console.error("Shared data load failed:",T)}finally{n(!1)}};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative",children:[r&&s.jsx("div",{className:"absolute inset-0 z-[100] bg-white/60 backdrop-blur-sm flex flex-col items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center animate-in zoom-in-95 duration-500",children:[s.jsx("span",{className:"material-symbols-rounded text-6xl text-indigo-500 animate-spin",children:"cyclone"}),s.jsx("div",{className:"mt-6 text-xl font-black text-slate-700",children:i}),s.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"    ."})]})}),h&&s.jsx("div",{className:"absolute inset-0 z-[90] bg-slate-900/5 backdrop-blur-[1px] flex flex-col items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-4 bg-white/90 backdrop-blur-md p-10 rounded-[2.5rem] shadow-2xl shadow-indigo-200/40 border border-white/50 animate-in zoom-in-95 duration-300",children:[s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-rounded text-7xl text-indigo-600 animate-spin",children:"progress_activity"}),s.jsx("span",{className:"material-symbols-rounded text-3xl text-indigo-300 absolute inset-0 flex items-center justify-center",children:"analytics"})]}),s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("span",{className:"text-xl font-black text-slate-800",children:p}),s.jsxs("span",{className:"text-sm text-slate-500 mt-2",children:["     .",s.jsx("br",{}),"     ."]})]})]})}),d&&s.jsx("div",{className:"absolute inset-0 z-[80] bg-white/40 backdrop-blur-[1px] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white/90 backdrop-blur-sm px-6 py-4 rounded-2xl shadow-xl flex items-center gap-4 border border-slate-100",children:[s.jsx("span",{className:"material-symbols-rounded text-2xl animate-spin text-indigo-600",children:"sync"}),s.jsx("span",{className:"text-base font-bold text-slate-700",children:"  ..."})]})}),s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4 shrink-0",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Intelligent Report"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-700 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["    ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Sales Intelligence"})]}),s.jsxs("p",{className:"text-slate-400 text-sm mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"support_agent"}),"   AI      ."]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>window.location.reload(),className:"h-10 px-4 rounded-xl bg-white border border-slate-200 text-slate-600 font-bold hover:bg-slate-50 transition-all flex items-center gap-2 text-sm shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"refresh"})," "]}),s.jsxs("button",{onClick:()=>{const T=o.trend?.[o.trend.length-1]||{},E=o.trend?.[o.trend.length-2]||{},I=E.total_amount>0?((T.total_amount-E.total_amount)/E.total_amount*100).toFixed(1):"0",R=`
                                    <style>${zue}</style>
                                    <div class="print-report-wrapper">
                                        <div class="report-card">
                                            <div class="report-header">
                                                <h1>   </h1>
                                                <div class="meta">
                                                    <span>  : <strong> 10</strong></span>
                                                    <span>: <strong>${new Date().toLocaleString()}</strong></span>
                                                </div>
                                            </div>

                                            <div class="section-title">     (Key Metrics)</div>
                                            <div class="summary-box">
                                                <div class="summary-grid">
                                                    <div class="summary-item">
                                                        <span class="label">(FY ${new Date().getFullYear()})  </span>
                                                        <span class="value">${Fe(T.total_amount||0)}</span>
                                                    </div>
                                                    <div class="summary-item">
                                                        <span class="label">  </span>
                                                        <span class="value" style="color: ${Number(I)>=0?"#d32f2f":"#1976d2"}">${I}%</span>
                                                    </div>
                                                    <div class="summary-item">
                                                        <span class="label">  </span>
                                                        <span class="value">${(T.total_quantity||0).toLocaleString()}</span>
                                                    </div>
                                                    <div class="summary-item">
                                                        <span class="label">()</span>
                                                        <span class="value">${Fe(Math.round((T.total_amount||0)/(T.record_count||1)))}</span>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="section-title">    (10-Year Trend)</div>
                                            <table>
                                                <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th></th>
                                                        <th></th>
                                                        <th> ()</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    ${[...o.trend].reverse().map((P,H,G)=>{const X=G[H+1];let U="-";return X&&X.total_amount>0&&(U=((P.total_amount-X.total_amount)/X.total_amount*100).toFixed(1)+"%"),`
                                                            <tr>
                                                                <td>${P.year}</td>
                                                                <td>${P.record_count.toLocaleString()}</td>
                                                                <td>${P.total_quantity.toLocaleString()}</td>
                                                                <td class="text-right" style="font-weight: bold;">${Fe(P.total_amount)}</td>
                                                                <td style="color: ${U.startsWith("-")?"#1976d2":"#d32f2f"}; font-weight: bold;">${U}</td>
                                                            </tr>
                                                        `}).join("")}
                                                </tbody>
                                            </table>

                                            <div class="section-title">   (Top Products)</div>
                                            <table>
                                                <thead>
                                                    <tr>
                                                        <th style="width: 80px;"></th>
                                                        <th style="text-align: left;"></th>
                                                        <th> </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    ${o.topProducts.map((P,H)=>`
                                                        <tr>
                                                            <td> ${H+1}</td>
                                                            <td style="text-align: left; font-weight: bold;">${P.product_name}</td>
                                                            <td class="text-right">${P.total_quantity.toLocaleString()}</td>
                                                        </tr>
                                                    `).join("")}
                                                </tbody>
                                            </table>

                                            <div style="margin-top: 40px; text-align: center; border-top: 1px solid #eee; padding-top: 20px; font-size: 11px; color: #999;">
                                                  Mycelium ERP Intelligence       .
                                            </div>
                                        </div>
                                    </div>
                                `;oo(R)},className:"h-10 px-4 rounded-xl bg-indigo-600 text-white font-bold hover:bg-indigo-700 transition-all flex items-center gap-2 text-sm shadow-lg shadow-indigo-200",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"print"}),"  "]})]})]}),s.jsx("div",{className:"flex items-center gap-1 mt-6 border-b border-slate-200 overflow-x-auto custom-scrollbar",children:j.map(T=>s.jsxs("button",{onClick:()=>w(T.id),className:`px-4 py-3 text-sm font-bold flex items-center gap-2 border-b-2 transition-all whitespace-nowrap
                                ${e===T.id?"border-indigo-600 text-slate-800 bg-indigo-50/50 rounded-t-lg":"border-transparent text-slate-400 hover:text-slate-600 hover:bg-slate-50/50 rounded-t-lg"}
                            `,children:[s.jsx("span",{className:`material-symbols-rounded text-lg ${e===T.id?T.color:"text-slate-400"}`,children:T.icon}),T.label]},T.id))})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 min-h-0 custom-scrollbar",children:s.jsxs("div",{className:d||h||r?"opacity-70 blur-[0.5px] pointer-events-none transition-all duration-300":"opacity-100 transition-all duration-300",children:[s.jsx("div",{style:{display:e==="advice"?"block":"none"},children:s.jsx(Fue,{sharedData:o,isVisible:e==="advice",showAlert:a,toggleProcessing:b})}),s.jsx("div",{style:{display:e==="summary"?"block":"none"},children:s.jsx(Vue,{sharedData:o,isVisible:e==="summary"})}),s.jsx("div",{style:{display:e==="trend"?"block":"none"},children:s.jsx(Hue,{sharedData:o,isVisible:e==="trend"})}),s.jsx("div",{style:{display:e==="product"?"block":"none"},children:s.jsx(Uue,{isVisible:e==="product",toggleProcessing:b})}),s.jsx("div",{style:{display:e==="forecast"?"block":"none"},children:s.jsx(Gue,{isVisible:e==="forecast",showAlert:a,toggleProcessing:b})}),s.jsx("div",{style:{display:e==="profit"?"block":"none"},children:s.jsx(Wue,{isVisible:e==="profit",toggleProcessing:b})})]})})]})},Fue=({sharedData:a,isVisible:e,showAlert:t,toggleProcessing:r})=>{const[n,i]=F.useState({yearTotal:0,topItem:"-"}),[l,o]=F.useState(null),[c,d]=F.useState("marketing"),[u,h]=F.useState(!1);F.useEffect(()=>{if(a?.trend&&a?.topProducts){const p=new Date().getFullYear(),g=a.trend.find(b=>Number(b.year)===p)||{total_amount:0};i({yearTotal:g.total_amount,topItem:a.topProducts?.[0]?.product_name||"-"})}},[a]);const f=async()=>{h(!0),r(!0,"AI     ..."),o(null);try{const p={marketing:"  ",stock:"   ",loyal:"  "},[g,b]=await Promise.all([ht("get_ten_year_sales_stats"),ht("get_top3_products_by_qty")]),w=g.find(T=>Number(T.year)===new Date().getFullYear())||{total_amount:0},j=` 'Mycelium'    ''. 
  [${p[c]}]      .

[]
-  : ${Fe(w.total_amount)}
-  : ${b.map(T=>T.product_name).join(", ")}

[]
1.   (  )
2. '${p[c]}'     3  
3.   ,    (, )`,k=await Co(t,"call_gemini_ai",{prompt:j});o(k.result||k)}catch(p){console.error(p)}finally{h(!1),r(!1)}};return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-2xl p-8 border-l-[6px] border-indigo-500 shadow-sm flex flex-col md:flex-row gap-6",children:[s.jsx("div",{className:"shrink-0 flex flex-col items-center gap-3",children:s.jsx("div",{className:"w-20 h-20 rounded-full bg-indigo-50 border-4 border-indigo-100 overflow-hidden",children:s.jsx("img",{src:"https://api.dicebear.com/7.x/bottts/svg?seed=jenny",alt:"Jenny AI",className:"w-full h-full"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:"   "}),s.jsx("p",{className:"text-slate-500 mb-6",children:"AI         ."}),!l&&!u&&s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100 flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-indigo-500 shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded",children:"payments"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase",children:"Total Revenue"}),s.jsxs("div",{className:"text-lg font-black text-slate-700",children:[Fe(n.yearTotal),""]})]})]}),s.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100 flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-amber-500 shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded",children:"star"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase",children:"Best Seller"}),s.jsx("div",{className:"text-lg font-black text-slate-700",children:n.topItem})]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-bold text-slate-500 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"list_alt"}),"   "]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[{id:"marketing",title:"  ",desc:"  "},{id:"stock",title:"   ",desc:"  "},{id:"loyal",title:"  ",desc:"  "}].map(p=>s.jsxs("div",{onClick:()=>d(p.id),className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${c===p.id?"border-indigo-500 bg-indigo-50":"border-slate-100 bg-white hover:border-slate-200"}`,children:[s.jsx("div",{className:`font-bold mb-1 ${c===p.id?"text-indigo-700":"text-slate-700"}`,children:p.title}),s.jsx("div",{className:"text-xs text-slate-400",children:p.desc})]},p.id))})]}),s.jsxs("button",{onClick:f,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200 flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"auto_awesome"}),"     "]})]}),l&&!u&&s.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200 animate-in fade-in zoom-in-95 duration-500",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-slate-200",children:[s.jsxs("h3",{className:"font-bold text-lg text-slate-700 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"verified"}),"   "]}),s.jsx("button",{onClick:()=>o(null),className:"text-sm text-slate-400 hover:text-slate-600",children:" "})]}),s.jsx("div",{className:"prose prose-indigo prose-sm max-w-none text-slate-600 leading-relaxed whitespace-pre-line",children:l})]})]})]})})},Vue=({sharedData:a,isVisible:e})=>{const[t,r]=F.useState({yearTotal:0,yearGrowth:0,monthTotal:0,monthGrowth:0,topProduct:"-",topQty:0,forecast:0}),n=F.useRef(null),i=F.useRef(null);F.useEffect(()=>{e&&i.current&&i.current.resize()},[e]),F.useEffect(()=>{a?.trend&&l(a.trend,a.topProducts)},[a]);const l=(c,d)=>{const u=new Date().getFullYear(),h=c.find(g=>Number(g.year)===u)||{total_amount:0},f=c.find(g=>Number(g.year)===u-1)||{total_amount:0},p=f.total_amount>0?((h.total_amount-f.total_amount)/f.total_amount*100).toFixed(1):0;r({yearTotal:h.total_amount,yearGrowth:p,monthTotal:Math.round(h.total_amount/12),monthGrowth:0,topProduct:d?.[0]?.product_name||"-",topQty:d?.[0]?.total_quantity||0,forecast:Math.round(h.total_amount/12*1.05)}),o(c.slice(-5))},o=c=>{if(!n.current)return;i.current&&i.current.destroy();const d=n.current.getContext("2d");i.current=new qi(d,{type:"line",data:{labels:c.map(u=>u.year+""),datasets:[{label:" ",data:c.map(u=>u.total_amount),borderColor:"#6366f1",backgroundColor:"rgba(99, 102, 241, 0.1)",fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{display:!1},x:{grid:{display:!1}}}}})};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"  ",value:Fe(t.yearTotal)+"",sub:`${t.yearGrowth>0?"+":""}${t.yearGrowth}%  `,color:t.yearGrowth>=0?"text-red-500":"text-blue-500"},{label:"  ",value:Fe(t.monthTotal)+"",sub:"  ",color:"text-slate-500"},{label:"  ",value:t.topProduct,sub:`${t.topQty} `,color:"text-emerald-600"},{label:"AI   ",value:Fe(t.forecast)+"",sub:"  ",color:"text-violet-600",bg:"bg-violet-50 border-violet-100"}].map((c,d)=>s.jsxs("div",{className:`p-5 rounded-2xl border ${c.bg||"bg-white border-slate-200"} shadow-sm`,children:[s.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:c.label}),s.jsx("div",{className:`text-2xl font-black ${c.bg?"text-violet-700":"text-slate-800"}`,children:c.value}),s.jsx("div",{className:`text-xs font-bold mt-1 ${c.color}`,children:c.sub})]},d))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[400px]",children:[s.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl border border-slate-200 p-6 flex flex-col",children:[s.jsx("h3",{className:"font-bold text-lg text-slate-700 mb-4",children:"   "}),s.jsx("div",{className:"flex-1 min-h-0 relative",children:s.jsx("canvas",{ref:n})})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 flex flex-col",children:[s.jsxs("h3",{className:"font-bold text-lg text-slate-700 mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"info"}),"  "]}),s.jsxs("div",{className:"flex-1 text-sm text-slate-600 leading-relaxed bg-slate-50 rounded-xl p-4",children:[s.jsxs("p",{className:"mb-3",children:["     ",s.jsxs("strong",{className:t.yearGrowth>=0?"text-red-500":"text-blue-500",children:[t.yearGrowth,"%"]})," ",t.yearGrowth>=0?"":"","."]}),s.jsxs("p",{className:"mb-3",children:[" ",s.jsx("strong",{className:"text-slate-800",children:t.topProduct}),"     ."]}),s.jsx("p",{children:"      5~10%   ."})]})]})]})]})},Hue=({sharedData:a,isVisible:e})=>{const[t,r]=F.useState([]),n=F.useRef(null),i=F.useRef(null);F.useEffect(()=>{e&&i.current&&i.current.resize()},[e]),F.useEffect(()=>{if(a?.trend){const o=[...a.trend];r(o.reverse()),l(o),l(o.reverse())}},[a]);const l=o=>{if(!n.current)return;i.current&&i.current.destroy();const c=n.current.getContext("2d");i.current=new qi(c,{type:"bar",data:{labels:o.map(d=>d.year+""),datasets:[{label:"",data:o.map(d=>d.total_amount),backgroundColor:"rgba(99, 102, 241, 0.6)",order:1},{label:"",data:o.map(d=>d.total_quantity),type:"line",borderColor:"#fb7185",borderWidth:2,yAxisID:"y1",order:0}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0},y1:{position:"right",beginAtZero:!0,grid:{drawOnChartArea:!1}}}}})};return s.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 h-[350px] shrink-0 flex flex-col",children:[s.jsx("h3",{className:"font-bold text-lg text-slate-700 mb-4",children:"   (10)"}),s.jsx("div",{className:"flex-1 min-h-0 relative",children:s.jsx("canvas",{ref:n})})]}),s.jsx("div",{className:"flex-1 bg-white rounded-2xl border border-slate-200 overflow-hidden flex flex-col min-h-0",children:s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 sticky top-0 z-10",children:s.jsxs("tr",{className:"text-slate-500 border-b border-slate-200",children:[s.jsx("th",{className:"py-3 px-4 font-bold text-center w-[15%]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold text-right w-[20%]",children:" "}),s.jsx("th",{className:"py-3 px-4 font-bold text-right w-[20%]",children:""}),s.jsx("th",{className:"py-3 px-4 font-bold text-right w-[25%]",children:" "}),s.jsx("th",{className:"py-3 px-4 font-bold text-right w-[20%]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"p-8 text-center text-slate-400",children:" "})}):t.map((o,c)=>{const d=t[c+1];let u=0;return d&&d.total_amount>0&&(u=((o.total_amount-d.total_amount)/d.total_amount*100).toFixed(1)),s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsxs("td",{className:"py-3 px-4 text-center font-bold text-slate-900",children:[o.year,""]}),s.jsxs("td",{className:"py-3 px-4 text-right text-black",children:[o.record_count.toLocaleString(),""]}),s.jsxs("td",{className:"py-3 px-4 text-right text-black",children:[o.total_quantity.toLocaleString(),""]}),s.jsx("td",{className:"py-3 px-4 text-right font-black text-slate-900",children:Fe(o.total_amount)}),s.jsxs("td",{className:`py-3 px-4 text-right font-bold ${u>=0?"text-red-600":"text-blue-600"}`,children:[u>0&&"+",u,"%"]})]},o.year)})})]})})})]})},Uue=({isVisible:a,toggleProcessing:e})=>{const[t,r]=F.useState([]),[n,i]=F.useState([]),[l,o]=F.useState(!1),c=F.useRef(null),d=F.useRef(null),u=F.useRef(null),h=F.useRef(null);F.useEffect(()=>{a&&(u.current&&u.current.resize(),h.current&&h.current.resize(),l||f())},[a]);const f=async()=>{e(!0,"      ...");try{const g=new Date().getFullYear(),[b,w]=await Promise.all([ht("get_product_sales_stats",{year:g.toString()}),ht("get_sales_by_region_analysis",{year:g})]);r(b||[]),i(w||[]),p(b,w),o(!0)}catch(g){console.error(g)}finally{e(!1)}},p=(g,b)=>{if(u.current&&u.current.destroy(),h.current&&h.current.destroy(),c.current&&g.length>0){const w=[...g].sort((j,k)=>k.total_amount-j.total_amount).slice(0,5);u.current=new qi(c.current.getContext("2d"),{type:"doughnut",data:{labels:w.map(j=>j.product_name),datasets:[{data:w.map(j=>j.total_amount),backgroundColor:["#6366f1","#10b981","#f59e0b","#ef4444","#8b5cf6"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:10},plugins:{legend:{position:"bottom",labels:{boxWidth:10,font:{size:10,weight:"bold"},padding:15}}}}})}if(d.current&&b.length>0){const w=b.slice(0,8);h.current=new qi(d.current.getContext("2d"),{type:"bar",data:{labels:w.map(j=>j.region),datasets:[{label:" ",data:w.map(j=>j.total_amount),backgroundColor:"#10b981",borderRadius:4}]},options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,layout:{padding:{right:20,top:10,bottom:20}},plugins:{legend:{display:!1}},scales:{x:{ticks:{font:{size:10},callback:j=>j>=1e6?(j/1e6).toFixed(1)+"":j>=1e4?(j/1e4).toLocaleString()+"":j.toLocaleString()}},y:{ticks:{font:{weight:"bold",size:11}}}}}})}};return s.jsxs("div",{className:"flex flex-col gap-6 h-full relative",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[400px] shrink-0",children:[s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 flex flex-col shadow-sm",children:[s.jsxs("h3",{className:"font-bold text-lg text-slate-700 mb-2 flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"}),"   (Top 5)"]}),s.jsx("div",{className:"flex-1 relative min-h-0",children:s.jsx("canvas",{ref:c})})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 flex flex-col shadow-sm",children:[s.jsxs("h3",{className:"font-bold text-lg text-slate-700 mb-2 flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),"  "]}),s.jsx("div",{className:"flex-1 relative min-h-0",children:s.jsx("canvas",{ref:d})})]})]}),s.jsxs("div",{className:"flex-1 bg-white rounded-2xl border border-slate-200 overflow-hidden flex flex-col min-h-0 shadow-sm",children:[s.jsxs("div",{className:"px-6 py-4 bg-slate-50 border-b border-slate-200 font-bold text-slate-700 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"analytics"}),"   ( )"]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"flex-1 flex flex-col border-r border-slate-100",children:[s.jsx("div",{className:"p-3 bg-slate-50/50 text-xs font-bold text-slate-500 uppercase text-center border-b border-slate-100 italic",children:"By Product"}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"sticky top-0 bg-white shadow-sm",children:s.jsxs("tr",{className:"text-slate-500",children:[s.jsx("th",{className:"py-2 text-left px-4",children:""}),s.jsx("th",{className:"py-2 text-right px-4",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:t.map(g=>s.jsxs("tr",{className:"hover:bg-indigo-50/30 transition-colors",children:[s.jsx("td",{className:"py-2 px-4 text-slate-700 font-bold",children:g.product_name}),s.jsx("td",{className:"py-2 px-4 text-right font-mono text-slate-900 font-bold",children:Fe(g.total_amount)})]},g.product_id))})]})})]}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx("div",{className:"p-3 bg-slate-50/50 text-xs font-bold text-slate-500 uppercase text-center border-b border-slate-100 italic",children:"By Region"}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"sticky top-0 bg-white shadow-sm",children:s.jsxs("tr",{className:"text-slate-500",children:[s.jsx("th",{className:"py-2 text-left px-4",children:""}),s.jsx("th",{className:"py-2 text-right px-4",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:n.map((g,b)=>s.jsxs("tr",{className:"hover:bg-emerald-50/30 transition-colors",children:[s.jsx("td",{className:"py-2 px-4 text-slate-700 font-bold",children:g.region}),s.jsx("td",{className:"py-2 px-4 text-right font-mono text-slate-900 font-bold",children:Fe(g.total_amount)})]},b))})]})})]})]})]})]})},Gue=({isVisible:a,showAlert:e,toggleProcessing:t})=>{const[r,n]=F.useState([]),[i,l]=F.useState("ALL"),[o,c]=F.useState("90"),[d,u]=F.useState(null),[h,f]=F.useState(!1),p=F.useRef(null),g=F.useRef(null);F.useEffect(()=>{a&&g.current&&g.current.resize(),a&&!h&&b()},[a]);const b=async()=>{try{const k=await ht("get_product_list");n(k||[]),f(!0)}catch{}},w=async()=>{t(!0,"AI       ...");try{const k=await Co(e,"get_ai_demand_forecast",{productName:i==="ALL"?null:i,forecastDays:Number(o)});u(k),j(k)}catch(k){console.error(k)}finally{t(!1)}},j=k=>{if(!p.current)return;g.current&&g.current.destroy();const T=k.history,E=k.forecast;g.current=new qi(p.current.getContext("2d"),{type:"line",data:{labels:[...T.map(I=>I.date),...E.map(I=>I.date)],datasets:[{label:" ",data:T.map(I=>I.count),borderColor:"#94a3b8",fill:!1,tension:.3},{label:" ",data:[...Array(T.length-1).fill(null),T[T.length-1].count,...E.map(I=>I.count)],borderColor:"#6366f1",borderDash:[5,5],fill:!0,backgroundColor:"rgba(99,102,241,0.1)",tension:.3}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}}}})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-slate-200 shadow-sm flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-indigo-500 font-bold px-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"analytics"}),"  "]}),s.jsxs("select",{value:i,onChange:k=>l(k.target.value),className:"h-10 rounded-lg border-slate-200 bg-slate-50 px-3 text-sm font-bold min-w-[200px]",children:[s.jsx("option",{value:"ALL",children:"  "}),r.map(k=>s.jsx("option",{value:k.product_name,children:k.product_name},k.product_id))]}),s.jsxs("select",{value:o,onChange:k=>c(k.target.value),className:"h-10 rounded-lg border-slate-200 bg-slate-50 px-3 text-sm font-bold w-[140px]",children:[s.jsx("option",{value:"30",children:"30 ()"}),s.jsx("option",{value:"90",children:"90 ()"}),s.jsx("option",{value:"180",children:"180 ()"})]}),s.jsxs("button",{onClick:w,className:"ml-auto h-10 px-6 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-bold shadow-md shadow-indigo-200 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"psychology"})," AI  "]})]}),d?s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2 bg-white rounded-2xl border border-slate-200 p-6 h-[400px] flex flex-col",children:s.jsx("canvas",{ref:p})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-indigo-600 text-white rounded-2xl p-6 shadow-lg shadow-indigo-200",children:[s.jsx("div",{className:"opacity-80 text-sm mb-1",children:"  "}),s.jsxs("div",{className:"text-3xl font-black",children:[Fe(d.expected_total_revenue),""]}),s.jsxs("div",{className:"mt-2 text-xs opacity-70 bg-indigo-700 inline-block px-2 py-1 rounded",children:[" : ",d.growth_rate,"%"]})]}),s.jsxs("div",{className:"bg-amber-50 text-amber-900 rounded-2xl p-6 border border-amber-100",children:[s.jsxs("h4",{className:"font-bold flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"inventory"}),"   "]}),s.jsx("p",{className:"text-sm leading-relaxed",children:d.stock_tip})]})]})]}):s.jsxs("div",{className:"h-[400px] border-2 border-dashed border-slate-200 rounded-2xl flex flex-col items-center justify-center text-slate-400 relative",children:[s.jsx("span",{className:"material-symbols-rounded text-6xl opacity-30 mb-4",children:"insights"}),s.jsx("p",{children:"  'AI  '  ."})]})]})},Wue=({isVisible:a,toggleProcessing:e})=>{const[t,r]=F.useState([]),[n,i]=F.useState(!1);F.useEffect(()=>{a&&!n&&l()},[a]);const l=async()=>{e(!0,"       ...");try{const h=await ht("get_profit_margin_analysis",{year:new Date().getFullYear()});r(h||[]),i(!0)}catch(h){console.error(h)}finally{e(!1)}},o=t.reduce((h,f)=>h+f.total_revenue,0),c=t.reduce((h,f)=>h+f.total_cost,0),d=t.reduce((h,f)=>h+f.net_profit,0),u=o?(d/o*100).toFixed(1):0;return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-4 gap-4",children:[{l:" ",v:Fe(d)+"",c:"text-emerald-600"},{l:" ",v:u+"%",c:"text-amber-500"},{l:"  ",v:t.length?t.sort((h,f)=>f.net_profit-h.net_profit)[0].product_name:"-",c:"text-blue-500"},{l:" ",v:Fe(c)+"",c:"text-indigo-500"}].map((h,f)=>s.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm",children:[s.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:h.l}),s.jsx("div",{className:`text-2xl font-black ${h.c}`,children:h.v})]},f))}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden flex flex-col h-[500px]",children:[s.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200 flex justify-between items-center",children:[s.jsx("h3",{className:"font-bold text-slate-700",children:"    "}),s.jsx("div",{className:"text-xs text-slate-500 px-3 py-1 bg-white rounded-full border border-slate-200",children:"*   "})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-white shadow-sm sticky top-0 z-10",children:s.jsxs("tr",{className:"text-slate-500 border-b border-slate-100",children:[s.jsx("th",{className:"py-3 px-4 text-left w-[25%]",children:""}),s.jsx("th",{className:"py-3 px-4 text-right w-[20%]",children:""}),s.jsx("th",{className:"py-3 px-4 text-right w-[15%]",children:" "}),s.jsx("th",{className:"py-3 px-4 text-right w-[15%] text-emerald-600 bg-emerald-50/50",children:""}),s.jsx("th",{className:"py-3 px-4 text-center w-[10%]",children:""}),s.jsx("th",{className:"py-3 px-4 text-right w-[15%]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"p-8 text-center text-slate-400",children:" "})}):t.map((h,f)=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"py-3 px-4 font-bold text-slate-700",children:h.product_name}),s.jsx("td",{className:"py-3 px-4 text-right text-slate-600",children:Fe(h.total_revenue)}),s.jsx("td",{className:"py-3 px-4 text-right text-slate-400",children:Fe(h.total_cost)}),s.jsx("td",{className:"py-3 px-4 text-right font-black text-emerald-600 bg-emerald-50/30",children:Fe(h.net_profit)}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsxs("span",{className:`font-bold ${h.margin_rate>=30?"text-emerald-500":h.margin_rate<15?"text-red-500":"text-amber-500"}`,children:[h.margin_rate.toFixed(1),"%"]})}),s.jsx("td",{className:"py-3 px-4 text-right text-slate-500",children:h.total_quantity.toLocaleString()})]},f))})]})})]})]})};qi.register(...Sb);const Yue=()=>{const{showAlert:a}=wa(),[e,t]=F.useState("rfm"),[r,n]=F.useState(!0),[i,l]=F.useState("   ..."),[o,c]=F.useState(!1),[d,u]=F.useState(""),h=(Q,ne="  ...")=>{c(Q),u(ne)},[f,p]=F.useState([]),[g,b]=F.useState([]),[w,j]=F.useState(!1),[k,T]=F.useState({isOpen:!1,targetCustomers:[],mode:"sms"}),[E,I]=F.useState({isOpen:!1,targetCustomers:[]}),[R,P]=F.useState(null),H=F.useCallback(Q=>P(Q),[]),G=F.useCallback(()=>P(null),[]),X=[{id:"rfm",label:"(RFM) ",icon:"group_work",color:"text-indigo-500"},{id:"repurchase",label:"AI  ",icon:"notifications_active",color:"text-rose-500"},{id:"behavior",label:"  ",icon:"history_edu",color:"text-teal-500"},{id:"membership",label:"  ",icon:"loyalty",color:"text-amber-500"}],U=F.useCallback(Q=>{e!==Q&&(j(!0),setTimeout(()=>{t(Q),setTimeout(()=>j(!1),200)},50))},[e]),te=F.useCallback(async()=>{try{const Q=new Date().getFullYear(),[ne,re]=await Promise.all([Ke("get_rfm_analysis",{}),Ke("get_membership_sales_analysis",{year:Q})]);p(ne||[]),b(re||[])}catch(Q){console.error("Shared data load failed:",Q)}finally{n(!1)}},[]),Z=F.useCallback((Q,ne="sms")=>{const re=Array.isArray(Q)?Q:[Q];T({isOpen:!0,targetCustomers:re,mode:ne})},[]),J=F.useCallback(()=>{T(Q=>({...Q,isOpen:!1}))},[]),B=F.useCallback(Q=>{I({isOpen:!0,targetCustomers:Array.isArray(Q)?Q:[Q]})},[]),W=F.useCallback(()=>{I(Q=>({...Q,isOpen:!1}))},[]);F.useEffect(()=>{te()},[te]);const $=F.useCallback(async()=>{n(!0),await te()},[te]);return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative",children:[r&&s.jsx("div",{className:"absolute inset-0 z-[100] bg-white/60 backdrop-blur-sm flex flex-col items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center animate-in zoom-in-95 duration-500 text-center px-6",children:[s.jsx("span",{className:"material-symbols-rounded text-6xl text-rose-500 animate-spin",children:"cyclone"}),s.jsx("div",{className:"mt-6 text-xl font-black text-slate-700",children:i}),s.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"      ."})]})}),o&&s.jsx("div",{className:"absolute inset-0 z-[90] bg-slate-900/5 backdrop-blur-[1px] flex flex-col items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-4 bg-white/90 backdrop-blur-md p-10 rounded-[2.5rem] shadow-2xl shadow-rose-200/40 border border-white/50 animate-in zoom-in-95 duration-300",children:[s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-rounded text-7xl text-rose-500 animate-spin",children:"progress_activity"}),s.jsx("span",{className:"material-symbols-rounded text-3xl text-rose-300 absolute inset-0 flex items-center justify-center",children:"psychology"})]}),s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("span",{className:"text-xl font-black text-slate-800",children:d}),s.jsxs("span",{className:"text-sm text-slate-500 mt-2",children:["      .",s.jsx("br",{}),"    ."]})]})]})}),w&&s.jsx("div",{className:"absolute inset-0 z-[80] bg-white/40 backdrop-blur-[1px] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white/90 backdrop-blur-sm px-6 py-4 rounded-2xl shadow-xl flex items-center gap-4 border border-slate-100",children:[s.jsx("span",{className:"material-symbols-rounded text-2xl animate-spin text-rose-500",children:"sync"}),s.jsx("span",{className:"text-base font-bold text-slate-700",children:"   ..."})]})}),s.jsxs("div",{className:r||o||w?"opacity-70 blur-[0.5px] pointer-events-none transition-all duration-300 flex flex-col h-full":"flex flex-col h-full transition-all duration-300",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4 shrink-0",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-rose-500 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-rose-500 uppercase",children:"AI Customer Center"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-700 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["AI    ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Customer Intelligence"})]}),s.jsxs("p",{className:"text-slate-400 text-sm mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"support_agent"}),"AI        ."]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("button",{onClick:()=>window.location.reload(),className:"h-10 px-4 rounded-xl bg-white border border-slate-200 text-slate-600 font-bold hover:bg-slate-50 transition-all flex items-center gap-2 text-sm shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"refresh"})," "]})})]}),s.jsx("div",{className:"flex items-center gap-1 mt-6 border-b border-slate-200 overflow-x-auto custom-scrollbar",children:X.map(Q=>s.jsxs("button",{onClick:()=>U(Q.id),className:`px-5 py-3 text-sm font-bold flex items-center gap-2 border-b-2 transition-all whitespace-nowrap rounded-t-lg
                                ${e===Q.id?`border-current ${Q.color.replace("text-","border-")} ${Q.color} bg-white shadow-sm`:"border-transparent text-slate-400 hover:text-slate-600 hover:bg-slate-50"}
                            `,children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:Q.icon}),Q.label]},Q.id))})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 min-h-0 custom-scrollbar relative",children:s.jsxs("div",{children:[s.jsx("div",{style:{display:e==="rfm"?"block":"none"},children:s.jsx($ue,{data:f,isLoading:r,onRefresh:$,isVisible:e==="rfm",showAlert:a,openSmsModal:Z,openBatchMemoModal:B,openSummaryModal:H})}),s.jsx("div",{style:{display:e==="repurchase"?"block":"none"},children:s.jsx(que,{isVisible:e==="repurchase",showAlert:a,toggleProcessing:h,openSmsModal:Z,openBatchMemoModal:B})}),s.jsx("div",{style:{display:e==="behavior"?"block":"none"},children:s.jsx(Xue,{isVisible:e==="behavior",showAlert:a,toggleProcessing:h})}),s.jsx("div",{style:{display:e==="membership"?"block":"none"},children:s.jsx(Zue,{data:g,isVisible:e==="membership"})})]})})]}),k.isOpen&&s.jsx(Que,{customers:k.targetCustomers,mode:k.mode,onClose:J,showAlert:a}),E.isOpen&&s.jsx(Jue,{customers:E.targetCustomers,onClose:W,showAlert:a,onSuccess:$}),R&&s.jsx(Kue,{customerId:R,onClose:G})]})},$ue=or.memo(({data:a,isLoading:e,onRefresh:t,isVisible:r,showAlert:n,openSmsModal:i,openBatchMemoModal:l,openSummaryModal:o})=>{an();const[c,d]=F.useState("all"),[u,h]=F.useState(!1),[f,p]=F.useState(new Set),g=F.useCallback(U=>{c!==U&&(h(!0),p(new Set),setTimeout(()=>{d(U),h(!1)},300))},[c]),b=U=>g(U.target.value),w=F.useMemo(()=>a?c==="all"?a:a.filter(U=>U.rfm_segment.includes(c)):[],[a,c]),j=F.useMemo(()=>a?{champion:a.filter(U=>U.rfm_segment.includes("Champions")).length,promising:a.filter(U=>U.rfm_segment.includes("Promising")).length,atRisk:a.filter(U=>U.rfm_segment.includes("At Risk")).length,hibernating:a.filter(U=>U.rfm_segment.includes("Hibernating")).length,attention:a.filter(U=>U.rfm_segment.includes("Need Attention")).length}:{champion:0,promising:0,atRisk:0,hibernating:0,attention:0},[a]),k=U=>o(U),T=U=>i(U,"sms"),E=U=>i(U,"kakao"),I=()=>{f.size===w.length&&w.length>0?p(new Set):p(new Set(w.map(U=>U.customer_id)))},R=U=>{const te=new Set(f);te.has(U)?te.delete(U):te.add(U),p(te)},P=()=>{if(f.size===0)return n("","  .");const U=a.filter(te=>f.has(te.customer_id));i(U,"sms")},H=()=>{if(f.size===0)return n("","  .");const U=a.filter(te=>f.has(te.customer_id));i(U,"kakao")},G=()=>{if(f.size===0)return n("","  .");const U=a.filter(te=>f.has(te.customer_id));l(U)},X=async(U,te)=>{try{await Ke("update_customer_level",{customerId:U,newLevel:te}),n(" ",`  ${te}() .`,"success"),t()}catch(Z){console.error(Z),n("","  : "+Z)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[{key:"Champions",label:" ()",value:j.champion,icon:"",bg:"bg-amber-50 border-amber-200",activeBg:"bg-amber-500 border-amber-600 text-white",text:"text-amber-800"},{key:"Promising",label:"  (Promising)",value:j.promising,icon:"",bg:"bg-blue-50 border-blue-200",activeBg:"bg-blue-500 border-blue-600 text-white",text:"text-blue-800"},{key:"At Risk",label:"  (At Risk)",value:j.atRisk,icon:"",bg:"bg-rose-50 border-rose-200",activeBg:"bg-rose-500 border-rose-600 text-white",text:"text-rose-800"},{key:"Hibernating",label:"  (Hibernating)",value:j.hibernating,icon:"zzz",bg:"bg-slate-100 border-slate-300",activeBg:"bg-slate-700 border-slate-800 text-white",text:"text-slate-800"},{key:"Need Attention",label:" / ",value:j.attention,icon:"",bg:"bg-emerald-50 border-emerald-200",activeBg:"bg-emerald-500 border-emerald-600 text-white",text:"text-emerald-800"}].map((U,te)=>{const Z=c===U.key;return s.jsxs("button",{onClick:()=>g(Z?"all":U.key),className:`p-4 rounded-2xl border transition-all flex flex-col items-center justify-center text-center shadow-sm relative group overflow-hidden
                                ${Z?U.activeBg:`${U.bg} hover:shadow-md hover:scale-[1.02] active:scale-[0.98]`}
                                ${U.key==="At Risk"?"ring-2 ring-rose-300 ring-offset-2 animate-soft-pulse":""}`,children:[s.jsx("div",{className:`text-3xl mb-2 transition-transform group-hover:scale-110 ${Z?"brightness-0 invert opacity-80":""}`,children:U.icon==="zzz"?s.jsx("span",{className:`material-symbols-rounded ${Z?"text-white":"text-slate-400"}`,children:"snooze"}):U.icon}),s.jsx("div",{className:`text-[10px] font-bold uppercase mb-1 ${Z?"text-white/80":"opacity-60"}`,children:U.label}),s.jsxs("div",{className:`text-xl font-black ${Z?"text-white":U.text}`,children:[U.value.toLocaleString(),""]}),U.key==="At Risk"&&U.value>0&&s.jsx("div",{className:"absolute top-1 left-2",children:s.jsx("span",{className:"flex h-2 w-2 rounded-full bg-rose-500 ring-2 ring-white"})}),Z&&s.jsx("div",{className:"absolute top-2 right-2 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded text-base animate-in zoom-in-50 duration-300",children:"check_circle"})})]},te)})}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden flex flex-col h-[600px] relative",children:[s.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200 flex justify-between items-center shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h3",{className:"font-bold text-slate-700",children:"  "}),s.jsx("div",{className:"h-6 w-[1px] bg-slate-200"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-bold text-slate-400",children:[" ",f.size,""]}),s.jsxs("button",{onClick:P,disabled:f.size===0,className:"h-8 px-3 rounded-lg bg-indigo-50 text-indigo-600 font-bold hover:bg-indigo-100 disabled:opacity-30 transition-all flex items-center gap-1.5 text-[11px] border border-indigo-100",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"sms"}),"  SMS "]}),s.jsxs("button",{onClick:H,disabled:f.size===0,className:"h-8 px-3 rounded-lg bg-yellow-100 text-yellow-800 font-bold hover:bg-yellow-200 disabled:opacity-30 transition-all flex items-center gap-1.5 text-[11px] border border-yellow-200 shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"chat"}),"   "]}),s.jsxs("button",{onClick:G,disabled:f.size===0,className:"h-8 px-3 rounded-lg bg-slate-100 text-slate-700 font-bold hover:bg-slate-200 disabled:opacity-30 transition-all flex items-center gap-1.5 text-[11px] border border-slate-200",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"edit_note"}),"    "]})]})]}),s.jsxs("select",{value:c,onChange:b,className:"h-10 px-4 text-base font-bold text-slate-700 bg-white border border-slate-300 rounded-xl shadow-sm hover:border-indigo-400 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-100 transition-all outline-none",children:[s.jsx("option",{value:"all",children:"  "}),s.jsx("option",{value:"Champions",children:"  ()"}),s.jsx("option",{value:"Promising",children:"  "}),s.jsx("option",{value:"At Risk",children:"  "}),s.jsx("option",{value:"Hibernating",children:"  "}),s.jsx("option",{value:"Need Attention",children:" /"})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar relative",children:[u&&s.jsx("div",{className:"absolute inset-0 z-20 bg-white/60 backdrop-blur-[1px] flex items-center justify-center animate-in fade-in duration-200",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-3xl text-indigo-500 animate-spin",children:"sync"}),s.jsx("span",{className:"text-xs font-bold text-slate-500",children:"  ..."})]})}),s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-white shadow-sm sticky top-0 z-10",children:s.jsxs("tr",{className:"text-slate-500 border-b border-slate-100",children:[s.jsx("th",{className:"py-3 px-4 w-[40px]",children:s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500",checked:w.length>0&&f.size===w.length,onChange:I})}),s.jsx("th",{className:"py-3 px-4 w-[12%]",children:""}),s.jsx("th",{className:"py-3 px-4 w-[15%]",children:""}),s.jsx("th",{className:"py-3 px-4 w-[10%] text-center",children:""}),s.jsx("th",{className:"py-3 px-4 w-[8%] text-center",children:""}),s.jsx("th",{className:"py-3 px-4 w-[12%] text-right",children:" "}),s.jsx("th",{className:"py-3 px-4 w-[10%] text-center",children:" "}),s.jsx("th",{className:"py-3 px-4 w-[10%] text-center",children:"RFM"}),s.jsx("th",{className:"py-3 px-4 w-[8%] text-center",children:" "}),s.jsx("th",{className:"py-3 px-4 w-[10%] text-center",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:e?s.jsx("tr",{children:s.jsx("td",{colSpan:"9",className:"h-64 text-center",children:s.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400",children:[s.jsx("span",{className:"material-symbols-rounded text-4xl text-indigo-400 animate-spin mb-3",children:"cyclone"}),s.jsx("span",{className:"font-bold text-sm",children:"  ..."})]})})}):w.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"10",className:"p-12 text-center text-slate-400 font-bold",children:" ."})}):w.map(U=>s.jsxs("tr",{className:`hover:bg-slate-50 transition-colors ${f.has(U.customer_id)?"bg-indigo-50/30":""}`,children:[s.jsx("td",{className:"py-3 px-4",children:s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500",checked:f.has(U.customer_id),onChange:()=>R(U.customer_id)})}),s.jsx("td",{className:"py-3 px-4 font-bold text-slate-700",children:U.customer_name}),s.jsx("td",{className:"py-3 px-4 text-slate-500 font-mono text-xs",children:U.mobile_number}),s.jsx("td",{className:"py-3 px-4 text-center text-slate-600 text-xs",children:U.last_order_date}),s.jsx("td",{className:"py-3 px-4 text-center text-slate-600",children:U.total_orders.toLocaleString()}),s.jsx("td",{className:"py-3 px-4 text-right font-black text-slate-700",children:Fe(U.total_amount)}),s.jsx("td",{className:"py-3 px-4 text-center font-bold text-indigo-500",children:U.membership_level||""}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold 
                                                ${U.rfm_segment.includes("Champions")?"bg-amber-100 text-amber-600":U.rfm_segment.includes("Promising")?"bg-blue-100 text-blue-600":U.rfm_segment.includes("At Risk")||U.rfm_segment.includes("Hibernating")?"bg-red-100 text-red-600":"bg-emerald-100 text-emerald-600"}`,children:U.rfm_segment.split("(")[0]})}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsxs("select",{className:"bg-slate-50 border border-slate-200 text-slate-600 text-xs rounded px-2 py-1",defaultValue:"",onChange:te=>X(U.customer_id,te.target.value),children:[s.jsx("option",{value:"",disabled:!0,children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"VIP",children:"VIP"}),s.jsx("option",{value:"VVP",children:"VVP"})]})}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsxs("div",{className:"flex justify-center gap-1",children:[s.jsx("button",{onClick:()=>k(U.customer_id),className:"w-8 h-8 rounded bg-white border border-slate-200 text-indigo-500 hover:bg-slate-50 flex items-center justify-center transition-colors shadow-sm",title:"",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"visibility"})}),s.jsx("button",{onClick:()=>T(U),className:"w-8 h-8 rounded bg-slate-50 border border-slate-200 text-slate-500 hover:bg-slate-100 flex items-center justify-center transition-colors shadow-sm",title:"SMS ",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"sms"})}),s.jsx("button",{onClick:()=>E(U),className:"w-8 h-8 rounded bg-yellow-100 border border-yellow-200 text-yellow-800 hover:bg-yellow-200 flex items-center justify-center transition-colors shadow-sm",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"chat"})})]})})]},U.customer_id))})]})]})]})]})}),que=({isVisible:a,showAlert:e,toggleProcessing:t,openSmsModal:r,openBatchMemoModal:n})=>{const[i,l]=F.useState([]),[o,c]=F.useState(!1),[d,u]=F.useState(new Set),h=async()=>{t(!0,"AI        ..."),u(new Set);try{await new Promise(k=>setTimeout(k,1e3));const j=await Ke("get_ai_repurchase_analysis",{});l(j?.candidates||[]),c(!0)}catch(j){console.error(j),e(" ",j.toString())}finally{t(!1)}},f=()=>{d.size===i.length&&i.length>0?u(new Set):u(new Set(i.map((j,k)=>k)))},p=j=>{const k=new Set(d);k.has(j)?k.delete(j):k.add(j),u(k)},g=()=>{if(d.size===0)return e("","  .");const j=i.filter((k,T)=>d.has(T));r(j,"sms")},b=()=>{if(d.size===0)return e("","  .");const j=i.filter((k,T)=>d.has(T));r(j,"kakao")},w=()=>{if(d.size===0)return e("","  .");const j=i.filter((k,T)=>d.has(T));n(j)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl p-6 border-l-[6px] border-rose-500 shadow-sm flex flex-col md:flex-row gap-6",children:[s.jsx("div",{className:"shrink-0 relative",children:s.jsx("div",{className:"w-16 h-16 rounded-full bg-rose-50 border-2 border-rose-100 overflow-hidden",children:s.jsx("img",{src:"https://api.dicebear.com/7.x/bottts/svg?seed=jenny",alt:"AI",className:"w-full h-full"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl font-black text-slate-800 mb-1",children:"   (Alpha)"}),s.jsxs("p",{className:"text-sm text-slate-500 mb-4 leading-relaxed",children:["    ,        .",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-rose-400 font-bold",children:"*     ."})]}),s.jsxs("button",{onClick:h,className:"px-6 py-2 bg-rose-500 text-white font-bold rounded-lg hover:bg-rose-600 transition-colors shadow-lg shadow-rose-200 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"auto_awesome"})," AI   "]})]})]}),o&&s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden flex flex-col h-[500px] animate-in fade-in slide-in-from-bottom-4 duration-500",children:[s.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200 font-bold text-slate-700 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-rose-500",children:"recommend"}),"    "]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-bold text-slate-400 mr-2",children:[" ",d.size,""]}),s.jsxs("button",{onClick:g,disabled:d.size===0,className:"h-8 px-3 rounded-lg bg-rose-50 text-rose-600 font-bold hover:bg-rose-100 disabled:opacity-30 transition-all flex items-center gap-1.5 text-[11px] border border-rose-100",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"sms"}),"  SMS"]}),s.jsxs("button",{onClick:b,disabled:d.size===0,className:"h-8 px-3 rounded-lg bg-yellow-100 text-yellow-800 font-bold hover:bg-yellow-200 disabled:opacity-30 transition-all flex items-center gap-1.5 text-[11px] border border-yellow-200",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"chat"}),"  "]}),s.jsxs("button",{onClick:w,disabled:d.size===0,className:"h-8 px-3 rounded-lg bg-slate-100 text-slate-700 font-bold hover:bg-slate-200 disabled:opacity-30 transition-all flex items-center gap-1.5 text-[11px] border border-slate-200",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"edit_note"}),"  "]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-white shadow-sm sticky top-0 z-10",children:s.jsxs("tr",{className:"text-slate-500 border-b border-slate-100",children:[s.jsx("th",{className:"py-3 px-4 w-[40px]",children:s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-rose-600 focus:ring-rose-500",checked:i.length>0&&d.size===i.length,onChange:f})}),s.jsx("th",{className:"py-3 px-4 w-[12%]",children:""}),s.jsx("th",{className:"py-3 px-4 w-[15%]",children:""}),s.jsx("th",{className:"py-3 px-4 w-[18%]",children:"  "}),s.jsx("th",{className:"py-3 px-4 w-[10%] text-center",children:""}),s.jsx("th",{className:"py-3 px-4 w-[10%] text-center",children:""}),s.jsx("th",{className:"py-3 px-4 w-[15%] text-center",children:" "}),s.jsx("th",{className:"py-3 px-4 w-[10%] text-center",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:i.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"p-8 text-center text-slate-400",children:"  ."})}):i.map((j,k)=>s.jsxs("tr",{className:`hover:bg-slate-50 transition-colors ${d.has(k)?"bg-rose-50/30":""}`,children:[s.jsx("td",{className:"py-3 px-4",children:s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-rose-600 focus:ring-rose-500",checked:d.has(k),onChange:()=>p(k)})}),s.jsx("td",{className:"py-3 px-4 font-bold text-slate-700",children:j.customer_name}),s.jsx("td",{className:"py-3 px-4 text-slate-500 font-mono text-xs",children:j.mobile_number}),s.jsx("td",{className:"py-3 px-4 text-slate-600",children:j.last_product||"-"}),s.jsxs("td",{className:"py-3 px-4 text-center text-slate-500",children:[j.avg_interval_days,""]}),s.jsx("td",{className:"py-3 px-4 text-center text-slate-500 text-xs",children:j.last_order_date}),s.jsx("td",{className:"py-3 px-4 text-center font-bold text-rose-500",children:j.predicted_days_remaining===0?" ":j.predicted_days_remaining>0?`${j.predicted_days_remaining} `:`${Math.abs(j.predicted_days_remaining)} `}),s.jsx("td",{className:"py-3 px-4 text-center",children:s.jsxs("div",{className:"flex justify-center gap-1",children:[s.jsx("button",{onClick:()=>r(j,"sms"),className:"w-8 h-8 rounded bg-rose-50 text-rose-600 flex items-center justify-center hover:bg-rose-100 transition-colors shadow-sm",title:"SMS",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"sms"})}),s.jsx("button",{onClick:()=>r(j,"kakao"),className:"w-8 h-8 rounded bg-yellow-100 text-yellow-800 flex items-center justify-center hover:bg-yellow-200 transition-colors shadow-sm",title:"Kakao",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"chat"})})]})})]},k))})]})})]})]})},Xue=({isVisible:a,showAlert:e,toggleProcessing:t})=>{const[r,n]=F.useState(null),[i,l]=F.useState(!1),o=async()=>{t(!0,"AI        ...");try{const c=await Co(e,"get_ai_behavior_strategy",{});n(c),l(!0)}catch(c){console.error(c)}finally{t(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl p-6 border-l-[6px] border-teal-500 shadow-sm flex flex-col md:flex-row gap-6",children:[s.jsx("div",{className:"shrink-0",children:s.jsx("div",{className:"w-16 h-16 rounded-full bg-teal-50 border-2 border-teal-100 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded text-4xl text-teal-600 animate-pulse",children:"analytics"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl font-black text-slate-800 mb-1",children:"  AI   (Enterprise)"}),s.jsxs("p",{className:"text-sm text-slate-500 mb-4 leading-relaxed",children:["    ,  ,        .",s.jsx("br",{}),"           ."]}),s.jsxs("button",{onClick:o,className:"px-6 py-2 bg-teal-600 text-white font-bold rounded-lg hover:bg-teal-700 transition-colors shadow-lg shadow-teal-200 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"psychology_alt"})," AI    "]})]})]}),i&&r&&s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[s.jsx("div",{className:"xl:col-span-2 space-y-6",children:s.jsxs("div",{className:"bg-white rounded-3xl p-8 border border-slate-100 shadow-sm relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 p-8",children:s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-1",children:"Business Health"}),s.jsxs("div",{className:`text-5xl font-black ${r.overall_health_score>70?"text-emerald-500":r.overall_health_score>40?"text-amber-500":"text-rose-500"}`,children:[r.overall_health_score,s.jsx("span",{className:"text-xl ml-1 text-slate-300",children:"/ 100"})]})]})}),s.jsxs("h3",{className:"text-2xl font-black text-slate-800 mb-6 flex items-center gap-3",children:[s.jsx("span",{className:"w-2 h-8 bg-teal-500 rounded-full"}),"  "]}),s.jsx("p",{className:"text-lg text-slate-600 leading-relaxed font-medium mb-8 pr-32",children:r.summary}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-5 bg-slate-50 rounded-2xl border border-slate-100 hover:border-teal-200 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 text-teal-600",children:[s.jsx("span",{className:"material-symbols-rounded",children:"trending_up"}),s.jsx("span",{className:"font-black text-sm uppercase",children:"Behavioral Trends"})]}),s.jsx("ul",{className:"space-y-2",children:r.behavioral_trends?.map((c,d)=>s.jsxs("li",{className:"text-sm text-slate-600 flex gap-2",children:[s.jsx("span",{className:"text-teal-400",children:""})," ",c]},d))})]}),s.jsxs("div",{className:"p-5 bg-rose-50/30 rounded-2xl border border-rose-100 hover:border-rose-200 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 text-rose-600",children:[s.jsx("span",{className:"material-symbols-rounded",children:"warning"}),s.jsx("span",{className:"font-black text-sm uppercase",children:"Critical Signals"})]}),s.jsx("ul",{className:"space-y-2",children:r.warning_signals?.map((c,d)=>s.jsxs("li",{className:"text-sm text-slate-600 flex gap-2",children:[s.jsx("span",{className:"text-rose-400",children:""})," ",c]},d))})]})]})]})}),s.jsx("div",{className:"xl:col-span-1",children:s.jsxs("div",{className:"bg-slate-900 rounded-3xl p-8 text-white shadow-2xl shadow-slate-200 h-full flex flex-col",children:[s.jsx("div",{className:"w-14 h-14 bg-indigo-500 rounded-2xl flex items-center justify-center mb-6 shadow-lg shadow-indigo-500/30",children:s.jsx("span",{className:"material-symbols-rounded text-white text-3xl",children:"lightbulb"})}),s.jsx("h3",{className:"text-xl font-black mb-4",children:"AI   "}),s.jsxs("div",{className:"flex-1 text-slate-300 leading-relaxed font-medium text-base whitespace-pre-wrap italic",children:['"',r.strategic_advice,'"']}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-white/10 text-xs text-slate-500 font-bold flex items-center justify-between",children:[s.jsx("span",{children:"Powered by Gemini 1.5 Pro"}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," Real-time Analysis"]})]})]})})]})]})},Zue=({data:a,isVisible:e})=>{const t=F.useRef(null),r=F.useRef(null);F.useEffect(()=>{e&&r.current&&r.current.resize()},[e]),F.useEffect(()=>{a&&t.current&&n(a)},[a,e]);const n=i=>{if(!t.current)return;r.current&&r.current.destroy();const l=t.current.getContext("2d");r.current=new qi(l,{type:"doughnut",data:{labels:(i||[]).map(o=>o.membership_level),datasets:[{data:(i||[]).map(o=>o.total_amount),backgroundColor:["#3b82f6","#10b981","#f59e0b","#8b5cf6","#64748b"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})};return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-full",children:[s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 flex flex-col h-[500px]",children:[s.jsx("h3",{className:"font-bold text-lg text-slate-700 mb-4",children:"   "}),s.jsx("div",{className:"flex-1 relative min-h-0",children:s.jsx("canvas",{ref:t})})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden flex flex-col h-[500px]",children:[s.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200 font-bold text-slate-700",children:"   "}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-white shadow-sm sticky top-0 z-10",children:s.jsxs("tr",{className:"text-slate-500 border-b border-slate-100",children:[s.jsx("th",{className:"py-3 px-4 w-[25%] font-bold",children:""}),s.jsx("th",{className:"py-3 px-4 w-[25%] text-right font-bold",children:""}),s.jsx("th",{className:"py-3 px-4 w-[25%] text-right font-bold",children:""}),s.jsx("th",{className:"py-3 px-4 w-[25%] text-right font-bold",children:" (LTV)"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:!a||a.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"4",className:"p-8 text-center text-slate-400",children:" "})}):a.map((i,l)=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"py-3 px-4 font-bold text-slate-800",children:i.membership_level}),s.jsx("td",{className:"py-3 px-4 text-right text-slate-600",children:Fe(i.total_amount)}),s.jsxs("td",{className:"py-3 px-4 text-right text-slate-600",children:[i.customer_count.toLocaleString(),""]}),s.jsx("td",{className:"py-3 px-4 text-right font-black text-indigo-500",children:Fe(i.customer_count>0?Math.floor(i.total_amount/i.customer_count):0)})]},l))})]})})]})]})},Kue=({customerId:a,onClose:e})=>{const[t,r]=F.useState(null),[n,i]=F.useState(!0);return F.useEffect(()=>{(async()=>{try{const o=await Ke("get_customer",{customerId:a});r(o)}catch(o){console.error(o)}finally{i(!1)}})()},[a]),s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"p-5 border-b border-slate-100 flex justify-between items-start bg-slate-50/50",children:[s.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:"  "}),s.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 rounded-full p-1 hover:bg-slate-100 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"p-6",children:n?s.jsxs("div",{className:"py-10 flex flex-col items-center justify-center text-slate-400 gap-3",children:[s.jsx("span",{className:"material-symbols-rounded animate-spin text-3xl text-indigo-500",children:"sync"}),s.jsx("span",{className:"text-xs font-bold",children:"  ..."})]}):t?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-slate-100",children:[s.jsx("div",{className:"w-14 h-14 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-black text-xl border-2 border-white shadow-sm",children:t.customer_name?.[0]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-black text-xl text-slate-800",children:t.customer_name}),s.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-indigo-50 text-indigo-600 border border-indigo-100",children:t.membership_level})]}),s.jsxs("p",{className:"text-sm text-slate-500 font-mono mt-0.5",children:["ID: ",t.customer_id]})]})]}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("span",{className:"w-20 text-slate-400 font-bold shrink-0",children:""}),s.jsx("span",{className:"text-slate-700 font-medium font-mono",children:t.mobile_number||"-"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("span",{className:"w-20 text-slate-400 font-bold shrink-0",children:""}),s.jsx("span",{className:"text-slate-700 font-medium",children:t.join_date||"-"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("span",{className:"w-20 text-slate-400 font-bold shrink-0",children:""}),s.jsxs("div",{className:"flex-1 text-slate-700 font-medium",children:[t.zip_code&&s.jsx("span",{className:"text-xs bg-slate-100 px-1.5 py-0.5 rounded text-slate-500 mr-1",children:t.zip_code}),t.address_primary," ",t.address_detail]})]}),s.jsxs("div",{className:"pt-2",children:[s.jsx("span",{className:"text-xs font-bold text-slate-400 block mb-1",children:""}),s.jsx("div",{className:"bg-amber-50 rounded-lg p-3 text-amber-900 text-xs leading-relaxed border border-amber-100",children:t.memo||"  ."})]})]})]}):s.jsx("div",{className:"text-center py-10 text-slate-400",children:"   ."})}),s.jsx("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-end",children:s.jsx("button",{onClick:e,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold shadow-sm shadow-indigo-200 transition-colors",children:""})})]})})},Que=({customers:a,mode:e,onClose:t,showAlert:r})=>{const[n,i]=F.useState(e),[l,o]=F.useState(""),[c,d]=F.useState(!1),[u,h]=F.useState(!1),f=a.length>1,p=a[0],g=[{id:1,label:"  ()",content:"[],   .    ."},{id:2,label:" ",content:"[],   !    ."},{id:3,label:" ",content:"[],   .   !"},{id:4,label:"  ",content:"[],    .    ."}];F.useEffect(()=>{a.length!==0&&(l||b(n))},[a]);const b=k=>{o(k==="kakao"?`[] .
     .

( )`:"[] . ( )")},w=async()=>{if(!l.trim())return r(" ","  .");d(!0);try{const k=f?["various"]:[],T=await Ke("send_sms_simulation",{mode:n,recipients:f?a.map(E=>E.customer_id):[p.customer_id],content:l,templateCode:null});if(T&&T.success){const E=f?`${a.length} `:"";r(" ",`${E} ${n==="kakao"?"":""} .`,"success"),t()}else r(" ",T?.error||"    .")}catch(k){console.error(k),r("","    .")}finally{d(!0),d(!1)}},j=k=>{o(k),h(!1)};return s.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex h-[700px] max-h-[90vh]",children:[s.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-white",children:[s.jsxs("div",{className:"p-5 border-b border-slate-100 flex justify-between items-center shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-xl ${n==="kakao"?"bg-yellow-100 text-yellow-800":"bg-indigo-100 text-indigo-600"}`,children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:n==="kakao"?"chat":"sms"})}),s.jsx("h3",{className:"font-bold text-lg text-slate-800",children:f?"  ":" "})]}),s.jsx("button",{onClick:t,className:"rounded-full p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"px-6 py-3 bg-indigo-600 text-white flex items-center justify-between shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded animate-pulse",children:"info"}),s.jsxs("div",{className:"text-xs leading-relaxed",children:[s.jsx("span",{className:"font-black underline decoration-white/50 underline-offset-2 text-[13px] mr-2",children:" "})," ",s.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded font-black text-white ml-0.5 mr-0.5",children:"[]"}),"  ,       ."]})]}),s.jsx("div",{className:"text-[10px] font-bold py-1 px-2 bg-white/20 rounded uppercase tracking-tighter",children:"smart logic"})]}),s.jsx("div",{className:"px-6 pt-5",children:s.jsxs("div",{className:"bg-slate-100 p-1 rounded-xl flex font-bold text-sm",children:[s.jsxs("button",{onClick:()=>{i("sms"),l||b("sms")},className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 transition-all ${n==="sms"?"bg-white text-indigo-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"sms"}),"  "]}),s.jsxs("button",{onClick:()=>{i("kakao"),l||b("kakao")},className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 transition-all ${n==="kakao"?"bg-yellow-400 text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"chat"}),"  "]})]})}),s.jsxs("div",{className:"p-6 flex-1 overflow-y-auto flex flex-col",children:[s.jsxs("div",{className:`mb-6 rounded-xl p-4 border flex items-center justify-between transition-colors ${f?"bg-indigo-50 border-indigo-100 shadow-sm shadow-indigo-100/50":"bg-slate-50 border-slate-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${f?"bg-indigo-600 text-white shadow-inner":"bg-white border border-slate-200 text-slate-400"}`,children:s.jsx("span",{className:"material-symbols-rounded",children:f?"groups":"person"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:f?"Recipient Group":"Recipient"}),s.jsx("div",{className:"font-bold text-slate-700 flex items-center gap-2",children:f?s.jsxs("span",{className:"text-indigo-600 font-black",children:[" ",a.length,"  "]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-800",children:p?.customer_name}),s.jsx("span",{className:"text-slate-400 font-normal font-mono text-sm",children:p?.mobile_number})]})})]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-1",children:[s.jsx("div",{className:"text-[10px] font-black px-2 py-0.5 rounded bg-white border border-slate-200 text-slate-500 uppercase tracking-tighter",children:n==="kakao"?"KakaoTalk":"SMS/LMS"}),f&&s.jsxs("span",{className:"text-[10px] font-bold text-rose-500 animate-pulse flex items-center gap-1",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-rose-500 rounded-full"})," LIVE BATCH MODE"]})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-end mb-2",children:[s.jsxs("label",{className:"text-sm font-black text-slate-700 flex items-center gap-2",children:[s.jsx("span",{className:"w-1 h-3.5 bg-indigo-600 rounded-full"}),"  "]}),s.jsxs("button",{onClick:()=>h(!u),className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-indigo-50 hover:bg-indigo-100 transition-colors border border-indigo-100 shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"auto_stories"}),u?" ":" "]})]}),s.jsxs("div",{className:`relative flex-1 rounded-2xl border transition-all flex flex-col shadow-inner
                                ${n==="kakao"?"bg-yellow-50/20 border-yellow-200 focus-within:border-yellow-400 focus-within:ring-4 focus-within:ring-yellow-400/10":"bg-white border-slate-300 focus-within:border-indigo-500 focus-within:ring-4 focus-within:ring-indigo-500/10"}
                            `,children:[s.jsx("textarea",{value:l,onChange:k=>o(k.target.value),className:"w-full h-full p-6 bg-transparent border-none outline-none resize-none font-sans text-slate-700 leading-relaxed text-[16px] custom-scrollbar placeholder:text-slate-300",placeholder:`   .
[]     .`}),s.jsxs("div",{className:"p-3 border-t border-black/5 flex justify-between items-center bg-slate-50/80 rounded-b-xl backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`text-[11px] font-bold px-2 py-1 rounded flex items-center gap-1.5 ${l.length>80?"bg-amber-100 text-amber-700":"bg-indigo-50 text-indigo-600"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"equalizer"}),new Blob([l]).size," BYTES",l.length>80&&n==="sms"&&s.jsx("span",{className:"ml-1 opacity-70 underline decoration-amber-300",children:"LMS "})]}),s.jsxs("div",{className:"text-[11px] font-bold text-slate-400 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"person_pin"})," : ",l.includes("[]")?"YES ()":"NO ()"]})]}),s.jsxs("button",{onClick:()=>o(""),className:"text-[11px] text-slate-400 hover:text-rose-500 font-bold flex items-center gap-1 transition-colors",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"delete_sweep"}),"  "]})]})]})]})]}),s.jsxs("div",{className:"p-5 border-t border-slate-100 flex justify-end gap-3 bg-slate-50/50",children:[s.jsx("button",{onClick:t,className:"px-6 py-3 bg-white border border-slate-300 text-slate-600 rounded-xl font-bold hover:bg-slate-50 transition-colors shadow-sm text-sm",children:""}),s.jsxs("button",{onClick:w,disabled:c,className:`px-8 py-3 rounded-xl font-black text-sm text-white shadow-xl transition-all flex items-center gap-3
                                ${c?"opacity-70 cursor-wait":"hover:scale-[1.02] active:scale-95"}
                                ${n==="kakao"?"bg-[#FAE100] hover:bg-[#FDD835] text-[#371D1E] shadow-yellow-200":"bg-indigo-600 hover:bg-indigo-700 shadow-indigo-200"}
                            `,children:[c?s.jsx("span",{className:"material-symbols-rounded animate-spin",children:"progress_activity"}):s.jsx("span",{className:"material-symbols-rounded",children:"rocket_launch"}),c?" ...":`${n==="kakao"?" ":" "} ${f?" ":""} `]})]})]}),s.jsxs("div",{className:`${u?"w-80 border-l border-slate-200":"w-0"} bg-slate-50 transition-all duration-300 ease-in-out overflow-hidden flex flex-col`,children:[s.jsx("div",{className:"p-5 border-b border-slate-200 bg-white",children:s.jsxs("h4",{className:"font-black text-slate-700 flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"auto_awesome"})," "]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar",children:[s.jsx("div",{className:"p-3 bg-amber-50 rounded-xl border border-amber-100 text-[11px] text-amber-800 font-bold mb-4",children:"    . []    ."}),g.map(k=>s.jsxs("button",{onClick:()=>j(k.content),className:"w-full text-left bg-white p-4 rounded-xl border border-slate-200 hover:border-indigo-400 hover:shadow-lg transition-all group relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("span",{className:"material-symbols-rounded text-indigo-400 text-sm",children:"add_circle"})}),s.jsx("div",{className:"font-black text-slate-800 text-xs mb-1.5 group-hover:text-indigo-600",children:k.label}),s.jsx("div",{className:"text-[11px] text-slate-400 line-clamp-3 leading-relaxed font-medium",children:k.content})]},k.id))]}),s.jsx("div",{className:"p-4 border-t border-slate-200 bg-white",children:s.jsxs("button",{className:"w-full py-3 rounded-xl border-2 border-dashed border-slate-300 text-slate-500 font-black text-xs hover:bg-indigo-50 hover:border-indigo-300 hover:text-indigo-600 transition-all flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"edit_note"}),"   "]})})]})]})})},Jue=({customers:a,onClose:e,showAlert:t,onSuccess:r})=>{const[n,i]=F.useState(""),[l,o]=F.useState(!1),[c,d]=F.useState(!0),u=async()=>{if(!n.trim())return t("","   .");o(!0);try{const h=a.map(f=>f.customer_id);await Ke("update_customer_memo_batch",{customerIds:h,newMemo:n.trim(),append:c}),t("",`${a.length}    .`,"success"),r&&r(),e()}catch(h){console.error(h),t("","   : "+h)}finally{o(!1)}};return s.jsx("div",{className:"fixed inset-0 z-[150] bg-slate-900/40 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-300",children:s.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col animate-in zoom-in-95 slide-in-from-bottom-8 duration-500",children:[s.jsxs("div",{className:"px-8 pt-8 pb-4 flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[s.jsx("span",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded",children:"edit_note"})}),"   "]}),s.jsxs("p",{className:"text-sm text-slate-500 mt-2 font-medium",children:[" ",s.jsxs("span",{className:"text-indigo-600 font-black",children:[a.length,""]}),"     ."]})]}),s.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full flex items-center justify-center text-slate-400 hover:bg-slate-100 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-8 space-y-6",children:[s.jsxs("div",{className:"bg-slate-50 rounded-2xl p-4 border border-slate-100",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-3",children:[s.jsx("span",{className:"material-symbols-rounded text-base text-indigo-500",children:"groups"}),s.jsx("span",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Targets"})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-20 overflow-y-auto custom-scrollbar pr-2",children:a.map(h=>s.jsx("span",{className:"px-2 py-1 bg-white border border-slate-200 rounded-lg text-xs font-bold text-slate-600",children:h.customer_name},h.customer_id))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"text-sm font-black text-slate-700 flex items-center gap-2",children:[s.jsx("span",{className:"w-1 h-3.5 bg-indigo-600 rounded-full"})," "]}),s.jsx("textarea",{value:n,onChange:h=>i(h.target.value),className:"w-full h-40 p-5 rounded-3xl border border-slate-200 bg-slate-50 focus:bg-white focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none transition-all resize-none shadow-inner text-slate-700 leading-relaxed font-medium",placeholder:": []    /    "})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-indigo-50/50 rounded-2xl border border-indigo-100",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center transition-colors ${c?"bg-indigo-600 text-white":"bg-slate-200 text-slate-400"}`,children:s.jsx("span",{className:"material-symbols-rounded",children:c?"add_to_photos":"edit_square"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Update Mode"}),s.jsx("div",{className:"text-sm font-black text-slate-700",children:c?"  ":"  "})]})]}),s.jsx("button",{onClick:()=>d(!c),className:`px-4 py-2 rounded-xl text-xs font-black border transition-all ${c?"border-indigo-200 bg-white text-indigo-600 hover:bg-indigo-50":"border-slate-300 bg-white text-slate-600 hover:bg-slate-50"}`,children:" "})]})]}),s.jsxs("div",{className:"p-8 border-t border-slate-100 flex gap-3 bg-slate-50/50",children:[s.jsx("button",{onClick:e,className:"flex-1 py-4 rounded-2xl bg-white border border-slate-300 text-slate-600 font-bold hover:bg-slate-50 transition-all text-sm",children:""}),s.jsxs("button",{onClick:u,disabled:l||!n.trim(),className:"flex-[2] py-4 rounded-2xl bg-indigo-600 text-white font-black hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-xl shadow-indigo-100 text-sm flex items-center justify-center gap-2",children:[l?s.jsx("span",{className:"material-symbols-rounded animate-spin",children:"progress_activity"}):s.jsx("span",{className:"material-symbols-rounded",children:"save"}),l?" ...":"  "]})]})]})})};var ehe={value:()=>{}};function J_(){for(var a=0,e=arguments.length,t={},r;a<e;++a){if(!(r=arguments[a]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new Ew(t)}function Ew(a){this._=a}function the(a,e){return a.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}Ew.prototype=J_.prototype={constructor:Ew,on:function(a,e){var t=this._,r=the(a+"",t),n,i=-1,l=r.length;if(arguments.length<2){for(;++i<l;)if((n=(a=r[i]).type)&&(n=ahe(t[n],a.name)))return n;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<l;)if(n=(a=r[i]).type)t[n]=BL(t[n],a.name,e);else if(e==null)for(n in t)t[n]=BL(t[n],a.name,null);return this},copy:function(){var a={},e=this._;for(var t in e)a[t]=e[t].slice();return new Ew(a)},call:function(a,e){if((n=arguments.length-2)>0)for(var t=new Array(n),r=0,n,i;r<n;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(i=this._[a],r=0,n=i.length;r<n;++r)i[r].value.apply(e,t)},apply:function(a,e,t){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var r=this._[a],n=0,i=r.length;n<i;++n)r[n].value.apply(e,t)}};function ahe(a,e){for(var t=0,r=a.length,n;t<r;++t)if((n=a[t]).name===e)return n.value}function BL(a,e,t){for(var r=0,n=a.length;r<n;++r)if(a[r].name===e){a[r]=ehe,a=a.slice(0,r).concat(a.slice(r+1));break}return t!=null&&a.push({name:e,value:t}),a}var u4="http://www.w3.org/1999/xhtml";const FL={svg:"http://www.w3.org/2000/svg",xhtml:u4,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function eN(a){var e=a+="",t=e.indexOf(":");return t>=0&&(e=a.slice(0,t))!=="xmlns"&&(a=a.slice(t+1)),FL.hasOwnProperty(e)?{space:FL[e],local:a}:a}function rhe(a){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===u4&&e.documentElement.namespaceURI===u4?e.createElement(a):e.createElementNS(t,a)}}function nhe(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}function rG(a){var e=eN(a);return(e.local?nhe:rhe)(e)}function ihe(){}function vT(a){return a==null?ihe:function(){return this.querySelector(a)}}function she(a){typeof a!="function"&&(a=vT(a));for(var e=this._groups,t=e.length,r=new Array(t),n=0;n<t;++n)for(var i=e[n],l=i.length,o=r[n]=new Array(l),c,d,u=0;u<l;++u)(c=i[u])&&(d=a.call(c,c.__data__,u,i))&&("__data__"in c&&(d.__data__=c.__data__),o[u]=d);return new Cl(r,this._parents)}function lhe(a){return a==null?[]:Array.isArray(a)?a:Array.from(a)}function ohe(){return[]}function nG(a){return a==null?ohe:function(){return this.querySelectorAll(a)}}function che(a){return function(){return lhe(a.apply(this,arguments))}}function dhe(a){typeof a=="function"?a=che(a):a=nG(a);for(var e=this._groups,t=e.length,r=[],n=[],i=0;i<t;++i)for(var l=e[i],o=l.length,c,d=0;d<o;++d)(c=l[d])&&(r.push(a.call(c,c.__data__,d,l)),n.push(c));return new Cl(r,n)}function iG(a){return function(){return this.matches(a)}}function sG(a){return function(e){return e.matches(a)}}var uhe=Array.prototype.find;function hhe(a){return function(){return uhe.call(this.children,a)}}function fhe(){return this.firstElementChild}function phe(a){return this.select(a==null?fhe:hhe(typeof a=="function"?a:sG(a)))}var xhe=Array.prototype.filter;function mhe(){return Array.from(this.children)}function ghe(a){return function(){return xhe.call(this.children,a)}}function vhe(a){return this.selectAll(a==null?mhe:ghe(typeof a=="function"?a:sG(a)))}function bhe(a){typeof a!="function"&&(a=iG(a));for(var e=this._groups,t=e.length,r=new Array(t),n=0;n<t;++n)for(var i=e[n],l=i.length,o=r[n]=[],c,d=0;d<l;++d)(c=i[d])&&a.call(c,c.__data__,d,i)&&o.push(c);return new Cl(r,this._parents)}function lG(a){return new Array(a.length)}function yhe(){return new Cl(this._enter||this._groups.map(lG),this._parents)}function w2(a,e){this.ownerDocument=a.ownerDocument,this.namespaceURI=a.namespaceURI,this._next=null,this._parent=a,this.__data__=e}w2.prototype={constructor:w2,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,e){return this._parent.insertBefore(a,e)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};function whe(a){return function(){return a}}function _he(a,e,t,r,n,i){for(var l=0,o,c=e.length,d=i.length;l<d;++l)(o=e[l])?(o.__data__=i[l],r[l]=o):t[l]=new w2(a,i[l]);for(;l<c;++l)(o=e[l])&&(n[l]=o)}function Nhe(a,e,t,r,n,i,l){var o,c,d=new Map,u=e.length,h=i.length,f=new Array(u),p;for(o=0;o<u;++o)(c=e[o])&&(f[o]=p=l.call(c,c.__data__,o,e)+"",d.has(p)?n[o]=c:d.set(p,c));for(o=0;o<h;++o)p=l.call(a,i[o],o,i)+"",(c=d.get(p))?(r[o]=c,c.__data__=i[o],d.delete(p)):t[o]=new w2(a,i[o]);for(o=0;o<u;++o)(c=e[o])&&d.get(f[o])===c&&(n[o]=c)}function jhe(a){return a.__data__}function She(a,e){if(!arguments.length)return Array.from(this,jhe);var t=e?Nhe:_he,r=this._parents,n=this._groups;typeof a!="function"&&(a=whe(a));for(var i=n.length,l=new Array(i),o=new Array(i),c=new Array(i),d=0;d<i;++d){var u=r[d],h=n[d],f=h.length,p=khe(a.call(u,u&&u.__data__,d,r)),g=p.length,b=o[d]=new Array(g),w=l[d]=new Array(g),j=c[d]=new Array(f);t(u,h,b,w,j,p,e);for(var k=0,T=0,E,I;k<g;++k)if(E=b[k]){for(k>=T&&(T=k+1);!(I=w[T])&&++T<g;);E._next=I||null}}return l=new Cl(l,r),l._enter=o,l._exit=c,l}function khe(a){return typeof a=="object"&&"length"in a?a:Array.from(a)}function Che(){return new Cl(this._exit||this._groups.map(lG),this._parents)}function Ahe(a,e,t){var r=this.enter(),n=this,i=this.exit();return typeof a=="function"?(r=a(r),r&&(r=r.selection())):r=r.append(a+""),e!=null&&(n=e(n),n&&(n=n.selection())),t==null?i.remove():t(i),r&&n?r.merge(n).order():n}function The(a){for(var e=a.selection?a.selection():a,t=this._groups,r=e._groups,n=t.length,i=r.length,l=Math.min(n,i),o=new Array(n),c=0;c<l;++c)for(var d=t[c],u=r[c],h=d.length,f=o[c]=new Array(h),p,g=0;g<h;++g)(p=d[g]||u[g])&&(f[g]=p);for(;c<n;++c)o[c]=t[c];return new Cl(o,this._parents)}function Mhe(){for(var a=this._groups,e=-1,t=a.length;++e<t;)for(var r=a[e],n=r.length-1,i=r[n],l;--n>=0;)(l=r[n])&&(i&&l.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(l,i),i=l);return this}function Ehe(a){a||(a=Dhe);function e(h,f){return h&&f?a(h.__data__,f.__data__):!h-!f}for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i){for(var l=t[i],o=l.length,c=n[i]=new Array(o),d,u=0;u<o;++u)(d=l[u])&&(c[u]=d);c.sort(e)}return new Cl(n,this._parents).order()}function Dhe(a,e){return a<e?-1:a>e?1:a>=e?0:NaN}function Ihe(){var a=arguments[0];return arguments[0]=this,a.apply(null,arguments),this}function Rhe(){return Array.from(this)}function Lhe(){for(var a=this._groups,e=0,t=a.length;e<t;++e)for(var r=a[e],n=0,i=r.length;n<i;++n){var l=r[n];if(l)return l}return null}function Ohe(){let a=0;for(const e of this)++a;return a}function Phe(){return!this.node()}function zhe(a){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,l=n.length,o;i<l;++i)(o=n[i])&&a.call(o,o.__data__,i,n);return this}function Bhe(a){return function(){this.removeAttribute(a)}}function Fhe(a){return function(){this.removeAttributeNS(a.space,a.local)}}function Vhe(a,e){return function(){this.setAttribute(a,e)}}function Hhe(a,e){return function(){this.setAttributeNS(a.space,a.local,e)}}function Uhe(a,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(a):this.setAttribute(a,t)}}function Ghe(a,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,t)}}function Whe(a,e){var t=eN(a);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?Fhe:Bhe:typeof e=="function"?t.local?Ghe:Uhe:t.local?Hhe:Vhe)(t,e))}function oG(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView}function Yhe(a){return function(){this.style.removeProperty(a)}}function $he(a,e,t){return function(){this.style.setProperty(a,e,t)}}function qhe(a,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(a):this.style.setProperty(a,r,t)}}function Xhe(a,e,t){return arguments.length>1?this.each((e==null?Yhe:typeof e=="function"?qhe:$he)(a,e,t??"")):Nx(this.node(),a)}function Nx(a,e){return a.style.getPropertyValue(e)||oG(a).getComputedStyle(a,null).getPropertyValue(e)}function Zhe(a){return function(){delete this[a]}}function Khe(a,e){return function(){this[a]=e}}function Qhe(a,e){return function(){var t=e.apply(this,arguments);t==null?delete this[a]:this[a]=t}}function Jhe(a,e){return arguments.length>1?this.each((e==null?Zhe:typeof e=="function"?Qhe:Khe)(a,e)):this.node()[a]}function cG(a){return a.trim().split(/^|\s+/)}function bT(a){return a.classList||new dG(a)}function dG(a){this._node=a,this._names=cG(a.getAttribute("class")||"")}dG.prototype={add:function(a){var e=this._names.indexOf(a);e<0&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var e=this._names.indexOf(a);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};function uG(a,e){for(var t=bT(a),r=-1,n=e.length;++r<n;)t.add(e[r])}function hG(a,e){for(var t=bT(a),r=-1,n=e.length;++r<n;)t.remove(e[r])}function efe(a){return function(){uG(this,a)}}function tfe(a){return function(){hG(this,a)}}function afe(a,e){return function(){(e.apply(this,arguments)?uG:hG)(this,a)}}function rfe(a,e){var t=cG(a+"");if(arguments.length<2){for(var r=bT(this.node()),n=-1,i=t.length;++n<i;)if(!r.contains(t[n]))return!1;return!0}return this.each((typeof e=="function"?afe:e?efe:tfe)(t,e))}function nfe(){this.textContent=""}function ife(a){return function(){this.textContent=a}}function sfe(a){return function(){var e=a.apply(this,arguments);this.textContent=e??""}}function lfe(a){return arguments.length?this.each(a==null?nfe:(typeof a=="function"?sfe:ife)(a)):this.node().textContent}function ofe(){this.innerHTML=""}function cfe(a){return function(){this.innerHTML=a}}function dfe(a){return function(){var e=a.apply(this,arguments);this.innerHTML=e??""}}function ufe(a){return arguments.length?this.each(a==null?ofe:(typeof a=="function"?dfe:cfe)(a)):this.node().innerHTML}function hfe(){this.nextSibling&&this.parentNode.appendChild(this)}function ffe(){return this.each(hfe)}function pfe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xfe(){return this.each(pfe)}function mfe(a){var e=typeof a=="function"?a:rG(a);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function gfe(){return null}function vfe(a,e){var t=typeof a=="function"?a:rG(a),r=e==null?gfe:typeof e=="function"?e:vT(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function bfe(){var a=this.parentNode;a&&a.removeChild(this)}function yfe(){return this.each(bfe)}function wfe(){var a=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(a,this.nextSibling):a}function _fe(){var a=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(a,this.nextSibling):a}function Nfe(a){return this.select(a?_fe:wfe)}function jfe(a){return arguments.length?this.property("__data__",a):this.node().__data__}function Sfe(a){return function(e){a.call(this,e,this.__data__)}}function kfe(a){return a.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function Cfe(a){return function(){var e=this.__on;if(e){for(var t=0,r=-1,n=e.length,i;t<n;++t)i=e[t],(!a.type||i.type===a.type)&&i.name===a.name?this.removeEventListener(i.type,i.listener,i.options):e[++r]=i;++r?e.length=r:delete this.__on}}}function Afe(a,e,t){return function(){var r=this.__on,n,i=Sfe(e);if(r){for(var l=0,o=r.length;l<o;++l)if((n=r[l]).type===a.type&&n.name===a.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=i,n.options=t),n.value=e;return}}this.addEventListener(a.type,i,t),n={type:a.type,name:a.name,value:e,listener:i,options:t},r?r.push(n):this.__on=[n]}}function Tfe(a,e,t){var r=kfe(a+""),n,i=r.length,l;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,d=o.length,u;c<d;++c)for(n=0,u=o[c];n<i;++n)if((l=r[n]).type===u.type&&l.name===u.name)return u.value}return}for(o=e?Afe:Cfe,n=0;n<i;++n)this.each(o(r[n],e,t));return this}function fG(a,e,t){var r=oG(a),n=r.CustomEvent;typeof n=="function"?n=new n(e,t):(n=r.document.createEvent("Event"),t?(n.initEvent(e,t.bubbles,t.cancelable),n.detail=t.detail):n.initEvent(e,!1,!1)),a.dispatchEvent(n)}function Mfe(a,e){return function(){return fG(this,a,e)}}function Efe(a,e){return function(){return fG(this,a,e.apply(this,arguments))}}function Dfe(a,e){return this.each((typeof e=="function"?Efe:Mfe)(a,e))}function*Ife(){for(var a=this._groups,e=0,t=a.length;e<t;++e)for(var r=a[e],n=0,i=r.length,l;n<i;++n)(l=r[n])&&(yield l)}var pG=[null];function Cl(a,e){this._groups=a,this._parents=e}function kb(){return new Cl([[document.documentElement]],pG)}function Rfe(){return this}Cl.prototype=kb.prototype={constructor:Cl,select:she,selectAll:dhe,selectChild:phe,selectChildren:vhe,filter:bhe,data:She,enter:yhe,exit:Che,join:Ahe,merge:The,selection:Rfe,order:Mhe,sort:Ehe,call:Ihe,nodes:Rhe,node:Lhe,size:Ohe,empty:Phe,each:zhe,attr:Whe,style:Xhe,property:Jhe,classed:rfe,text:lfe,html:ufe,raise:ffe,lower:xfe,append:mfe,insert:vfe,remove:yfe,clone:Nfe,datum:jfe,on:Tfe,dispatch:Dfe,[Symbol.iterator]:Ife};function a0(a){return typeof a=="string"?new Cl([[document.querySelector(a)]],[document.documentElement]):new Cl([[a]],pG)}function Lfe(a){let e;for(;e=a.sourceEvent;)a=e;return a}function VL(a,e){if(a=Lfe(a),e===void 0&&(e=a.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var r=t.createSVGPoint();return r.x=a.clientX,r.y=a.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var n=e.getBoundingClientRect();return[a.clientX-n.left-e.clientLeft,a.clientY-n.top-e.clientTop]}}return[a.pageX,a.pageY]}const Ofe={passive:!1},Iv={capture:!0,passive:!1};function n5(a){a.stopImmediatePropagation()}function ox(a){a.preventDefault(),a.stopImmediatePropagation()}function Pfe(a){var e=a.document.documentElement,t=a0(a).on("dragstart.drag",ox,Iv);"onselectstart"in e?t.on("selectstart.drag",ox,Iv):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function zfe(a,e){var t=a.document.documentElement,r=a0(a).on("dragstart.drag",null);e&&(r.on("click.drag",ox,Iv),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in t?r.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const sy=a=>()=>a;function h4(a,{sourceEvent:e,subject:t,target:r,identifier:n,active:i,x:l,y:o,dx:c,dy:d,dispatch:u}){Object.defineProperties(this,{type:{value:a,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:n,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:u}})}h4.prototype.on=function(){var a=this._.on.apply(this._,arguments);return a===this._?this:a};function Bfe(a){return!a.ctrlKey&&!a.button}function Ffe(){return this.parentNode}function Vfe(a,e){return e??{x:a.x,y:a.y}}function Hfe(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ufe(){var a=Bfe,e=Ffe,t=Vfe,r=Hfe,n={},i=J_("start","drag","end"),l=0,o,c,d,u,h=0;function f(E){E.on("mousedown.drag",p).filter(r).on("touchstart.drag",w).on("touchmove.drag",j,Ofe).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(E,I){if(!(u||!a.call(this,E,I))){var R=T(this,e.call(this,E,I),E,I,"mouse");R&&(a0(E.view).on("mousemove.drag",g,Iv).on("mouseup.drag",b,Iv),Pfe(E.view),n5(E),d=!1,o=E.clientX,c=E.clientY,R("start",E))}}function g(E){if(ox(E),!d){var I=E.clientX-o,R=E.clientY-c;d=I*I+R*R>h}n.mouse("drag",E)}function b(E){a0(E.view).on("mousemove.drag mouseup.drag",null),zfe(E.view,d),ox(E),n.mouse("end",E)}function w(E,I){if(a.call(this,E,I)){var R=E.changedTouches,P=e.call(this,E,I),H=R.length,G,X;for(G=0;G<H;++G)(X=T(this,P,E,I,R[G].identifier,R[G]))&&(n5(E),X("start",E,R[G]))}}function j(E){var I=E.changedTouches,R=I.length,P,H;for(P=0;P<R;++P)(H=n[I[P].identifier])&&(ox(E),H("drag",E,I[P]))}function k(E){var I=E.changedTouches,R=I.length,P,H;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),P=0;P<R;++P)(H=n[I[P].identifier])&&(n5(E),H("end",E,I[P]))}function T(E,I,R,P,H,G){var X=i.copy(),U=VL(G||R,I),te,Z,J;if((J=t.call(E,new h4("beforestart",{sourceEvent:R,target:f,identifier:H,active:l,x:U[0],y:U[1],dx:0,dy:0,dispatch:X}),P))!=null)return te=J.x-U[0]||0,Z=J.y-U[1]||0,function B(W,$,Q){var ne=U,re;switch(W){case"start":n[H]=B,re=l++;break;case"end":delete n[H],--l;case"drag":U=VL(Q||$,I),re=l;break}X.call(W,E,new h4(W,{sourceEvent:$,subject:J,target:f,identifier:H,active:re,x:U[0]+te,y:U[1]+Z,dx:U[0]-ne[0],dy:U[1]-ne[1],dispatch:X}),P)}}return f.filter=function(E){return arguments.length?(a=typeof E=="function"?E:sy(!!E),f):a},f.container=function(E){return arguments.length?(e=typeof E=="function"?E:sy(E),f):e},f.subject=function(E){return arguments.length?(t=typeof E=="function"?E:sy(E),f):t},f.touchable=function(E){return arguments.length?(r=typeof E=="function"?E:sy(!!E),f):r},f.on=function(){var E=i.on.apply(i,arguments);return E===i?f:E},f.clickDistance=function(E){return arguments.length?(h=(E=+E)*E,f):Math.sqrt(h)},f}function yT(a,e,t){a.prototype=e.prototype=t,t.constructor=a}function xG(a,e){var t=Object.create(a.prototype);for(var r in e)t[r]=e[r];return t}function Cb(){}var Rv=.7,_2=1/Rv,cx="\\s*([+-]?\\d+)\\s*",Lv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gfe=/^#([0-9a-f]{3,8})$/,Wfe=new RegExp(`^rgb\\(${cx},${cx},${cx}\\)$`),Yfe=new RegExp(`^rgb\\(${jc},${jc},${jc}\\)$`),$fe=new RegExp(`^rgba\\(${cx},${cx},${cx},${Lv}\\)$`),qfe=new RegExp(`^rgba\\(${jc},${jc},${jc},${Lv}\\)$`),Xfe=new RegExp(`^hsl\\(${Lv},${jc},${jc}\\)$`),Zfe=new RegExp(`^hsla\\(${Lv},${jc},${jc},${Lv}\\)$`),HL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yT(Cb,Ov,{copy(a){return Object.assign(new this.constructor,this,a)},displayable(){return this.rgb().displayable()},hex:UL,formatHex:UL,formatHex8:Kfe,formatHsl:Qfe,formatRgb:GL,toString:GL});function UL(){return this.rgb().formatHex()}function Kfe(){return this.rgb().formatHex8()}function Qfe(){return mG(this).formatHsl()}function GL(){return this.rgb().formatRgb()}function Ov(a){var e,t;return a=(a+"").trim().toLowerCase(),(e=Gfe.exec(a))?(t=e[1].length,e=parseInt(e[1],16),t===6?WL(e):t===3?new Zs(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?ly(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?ly(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Wfe.exec(a))?new Zs(e[1],e[2],e[3],1):(e=Yfe.exec(a))?new Zs(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=$fe.exec(a))?ly(e[1],e[2],e[3],e[4]):(e=qfe.exec(a))?ly(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Xfe.exec(a))?qL(e[1],e[2]/100,e[3]/100,1):(e=Zfe.exec(a))?qL(e[1],e[2]/100,e[3]/100,e[4]):HL.hasOwnProperty(a)?WL(HL[a]):a==="transparent"?new Zs(NaN,NaN,NaN,0):null}function WL(a){return new Zs(a>>16&255,a>>8&255,a&255,1)}function ly(a,e,t,r){return r<=0&&(a=e=t=NaN),new Zs(a,e,t,r)}function Jfe(a){return a instanceof Cb||(a=Ov(a)),a?(a=a.rgb(),new Zs(a.r,a.g,a.b,a.opacity)):new Zs}function f4(a,e,t,r){return arguments.length===1?Jfe(a):new Zs(a,e,t,r??1)}function Zs(a,e,t,r){this.r=+a,this.g=+e,this.b=+t,this.opacity=+r}yT(Zs,f4,xG(Cb,{brighter(a){return a=a==null?_2:Math.pow(_2,a),new Zs(this.r*a,this.g*a,this.b*a,this.opacity)},darker(a){return a=a==null?Rv:Math.pow(Rv,a),new Zs(this.r*a,this.g*a,this.b*a,this.opacity)},rgb(){return this},clamp(){return new Zs(r0(this.r),r0(this.g),r0(this.b),N2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YL,formatHex:YL,formatHex8:e0e,formatRgb:$L,toString:$L}));function YL(){return`#${Yf(this.r)}${Yf(this.g)}${Yf(this.b)}`}function e0e(){return`#${Yf(this.r)}${Yf(this.g)}${Yf(this.b)}${Yf((isNaN(this.opacity)?1:this.opacity)*255)}`}function $L(){const a=N2(this.opacity);return`${a===1?"rgb(":"rgba("}${r0(this.r)}, ${r0(this.g)}, ${r0(this.b)}${a===1?")":`, ${a})`}`}function N2(a){return isNaN(a)?1:Math.max(0,Math.min(1,a))}function r0(a){return Math.max(0,Math.min(255,Math.round(a)||0))}function Yf(a){return a=r0(a),(a<16?"0":"")+a.toString(16)}function qL(a,e,t,r){return r<=0?a=e=t=NaN:t<=0||t>=1?a=e=NaN:e<=0&&(a=NaN),new jo(a,e,t,r)}function mG(a){if(a instanceof jo)return new jo(a.h,a.s,a.l,a.opacity);if(a instanceof Cb||(a=Ov(a)),!a)return new jo;if(a instanceof jo)return a;a=a.rgb();var e=a.r/255,t=a.g/255,r=a.b/255,n=Math.min(e,t,r),i=Math.max(e,t,r),l=NaN,o=i-n,c=(i+n)/2;return o?(e===i?l=(t-r)/o+(t<r)*6:t===i?l=(r-e)/o+2:l=(e-t)/o+4,o/=c<.5?i+n:2-i-n,l*=60):o=c>0&&c<1?0:l,new jo(l,o,c,a.opacity)}function t0e(a,e,t,r){return arguments.length===1?mG(a):new jo(a,e,t,r??1)}function jo(a,e,t,r){this.h=+a,this.s=+e,this.l=+t,this.opacity=+r}yT(jo,t0e,xG(Cb,{brighter(a){return a=a==null?_2:Math.pow(_2,a),new jo(this.h,this.s,this.l*a,this.opacity)},darker(a){return a=a==null?Rv:Math.pow(Rv,a),new jo(this.h,this.s,this.l*a,this.opacity)},rgb(){var a=this.h%360+(this.h<0)*360,e=isNaN(a)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,n=2*t-r;return new Zs(i5(a>=240?a-240:a+120,n,r),i5(a,n,r),i5(a<120?a+240:a-120,n,r),this.opacity)},clamp(){return new jo(XL(this.h),oy(this.s),oy(this.l),N2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const a=N2(this.opacity);return`${a===1?"hsl(":"hsla("}${XL(this.h)}, ${oy(this.s)*100}%, ${oy(this.l)*100}%${a===1?")":`, ${a})`}`}}));function XL(a){return a=(a||0)%360,a<0?a+360:a}function oy(a){return Math.max(0,Math.min(1,a||0))}function i5(a,e,t){return(a<60?e+(t-e)*a/60:a<180?t:a<240?e+(t-e)*(240-a)/60:e)*255}const gG=a=>()=>a;function a0e(a,e){return function(t){return a+t*e}}function r0e(a,e,t){return a=Math.pow(a,t),e=Math.pow(e,t)-a,t=1/t,function(r){return Math.pow(a+r*e,t)}}function n0e(a){return(a=+a)==1?vG:function(e,t){return t-e?r0e(e,t,a):gG(isNaN(e)?t:e)}}function vG(a,e){var t=e-a;return t?a0e(a,t):gG(isNaN(a)?e:a)}const ZL=(function a(e){var t=n0e(e);function r(n,i){var l=t((n=f4(n)).r,(i=f4(i)).r),o=t(n.g,i.g),c=t(n.b,i.b),d=vG(n.opacity,i.opacity);return function(u){return n.r=l(u),n.g=o(u),n.b=c(u),n.opacity=d(u),n+""}}return r.gamma=a,r})(1);function Fu(a,e){return a=+a,e=+e,function(t){return a*(1-t)+e*t}}var p4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s5=new RegExp(p4.source,"g");function i0e(a){return function(){return a}}function s0e(a){return function(e){return a(e)+""}}function l0e(a,e){var t=p4.lastIndex=s5.lastIndex=0,r,n,i,l=-1,o=[],c=[];for(a=a+"",e=e+"";(r=p4.exec(a))&&(n=s5.exec(e));)(i=n.index)>t&&(i=e.slice(t,i),o[l]?o[l]+=i:o[++l]=i),(r=r[0])===(n=n[0])?o[l]?o[l]+=n:o[++l]=n:(o[++l]=null,c.push({i:l,x:Fu(r,n)})),t=s5.lastIndex;return t<e.length&&(i=e.slice(t),o[l]?o[l]+=i:o[++l]=i),o.length<2?c[0]?s0e(c[0].x):i0e(e):(e=c.length,function(d){for(var u=0,h;u<e;++u)o[(h=c[u]).i]=h.x(d);return o.join("")})}var KL=180/Math.PI,x4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bG(a,e,t,r,n,i){var l,o,c;return(l=Math.sqrt(a*a+e*e))&&(a/=l,e/=l),(c=a*t+e*r)&&(t-=a*c,r-=e*c),(o=Math.sqrt(t*t+r*r))&&(t/=o,r/=o,c/=o),a*r<e*t&&(a=-a,e=-e,c=-c,l=-l),{translateX:n,translateY:i,rotate:Math.atan2(e,a)*KL,skewX:Math.atan(c)*KL,scaleX:l,scaleY:o}}var cy;function o0e(a){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(a+"");return e.isIdentity?x4:bG(e.a,e.b,e.c,e.d,e.e,e.f)}function c0e(a){return a==null||(cy||(cy=document.createElementNS("http://www.w3.org/2000/svg","g")),cy.setAttribute("transform",a),!(a=cy.transform.baseVal.consolidate()))?x4:(a=a.matrix,bG(a.a,a.b,a.c,a.d,a.e,a.f))}function yG(a,e,t,r){function n(d){return d.length?d.pop()+" ":""}function i(d,u,h,f,p,g){if(d!==h||u!==f){var b=p.push("translate(",null,e,null,t);g.push({i:b-4,x:Fu(d,h)},{i:b-2,x:Fu(u,f)})}else(h||f)&&p.push("translate("+h+e+f+t)}function l(d,u,h,f){d!==u?(d-u>180?u+=360:u-d>180&&(d+=360),f.push({i:h.push(n(h)+"rotate(",null,r)-2,x:Fu(d,u)})):u&&h.push(n(h)+"rotate("+u+r)}function o(d,u,h,f){d!==u?f.push({i:h.push(n(h)+"skewX(",null,r)-2,x:Fu(d,u)}):u&&h.push(n(h)+"skewX("+u+r)}function c(d,u,h,f,p,g){if(d!==h||u!==f){var b=p.push(n(p)+"scale(",null,",",null,")");g.push({i:b-4,x:Fu(d,h)},{i:b-2,x:Fu(u,f)})}else(h!==1||f!==1)&&p.push(n(p)+"scale("+h+","+f+")")}return function(d,u){var h=[],f=[];return d=a(d),u=a(u),i(d.translateX,d.translateY,u.translateX,u.translateY,h,f),l(d.rotate,u.rotate,h,f),o(d.skewX,u.skewX,h,f),c(d.scaleX,d.scaleY,u.scaleX,u.scaleY,h,f),d=u=null,function(p){for(var g=-1,b=f.length,w;++g<b;)h[(w=f[g]).i]=w.x(p);return h.join("")}}}var d0e=yG(o0e,"px, ","px)","deg)"),u0e=yG(c0e,", ",")",")"),jx=0,Pg=0,Xm=0,wG=1e3,j2,zg,S2=0,b0=0,tN=0,Pv=typeof performance=="object"&&performance.now?performance:Date,_G=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(a){setTimeout(a,17)};function wT(){return b0||(_G(h0e),b0=Pv.now()+tN)}function h0e(){b0=0}function k2(){this._call=this._time=this._next=null}k2.prototype=_T.prototype={constructor:k2,restart:function(a,e,t){if(typeof a!="function")throw new TypeError("callback is not a function");t=(t==null?wT():+t)+(e==null?0:+e),!this._next&&zg!==this&&(zg?zg._next=this:j2=this,zg=this),this._call=a,this._time=t,m4()},stop:function(){this._call&&(this._call=null,this._time=1/0,m4())}};function _T(a,e,t){var r=new k2;return r.restart(a,e,t),r}function f0e(){wT(),++jx;for(var a=j2,e;a;)(e=b0-a._time)>=0&&a._call.call(void 0,e),a=a._next;--jx}function QL(){b0=(S2=Pv.now())+tN,jx=Pg=0;try{f0e()}finally{jx=0,x0e(),b0=0}}function p0e(){var a=Pv.now(),e=a-S2;e>wG&&(tN-=e,S2=a)}function x0e(){for(var a,e=j2,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),a=e,e=e._next):(t=e._next,e._next=null,e=a?a._next=t:j2=t);zg=a,m4(r)}function m4(a){if(!jx){Pg&&(Pg=clearTimeout(Pg));var e=a-b0;e>24?(a<1/0&&(Pg=setTimeout(QL,a-Pv.now()-tN)),Xm&&(Xm=clearInterval(Xm))):(Xm||(S2=Pv.now(),Xm=setInterval(p0e,wG)),jx=1,_G(QL))}}function JL(a,e,t){var r=new k2;return e=e==null?0:+e,r.restart(n=>{r.stop(),a(n+e)},e,t),r}var m0e=J_("start","end","cancel","interrupt"),g0e=[],NG=0,eO=1,g4=2,Dw=3,tO=4,v4=5,Iw=6;function aN(a,e,t,r,n,i){var l=a.__transition;if(!l)a.__transition={};else if(t in l)return;v0e(a,t,{name:e,index:r,group:n,on:m0e,tween:g0e,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:NG})}function NT(a,e){var t=Po(a,e);if(t.state>NG)throw new Error("too late; already scheduled");return t}function zc(a,e){var t=Po(a,e);if(t.state>Dw)throw new Error("too late; already running");return t}function Po(a,e){var t=a.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function v0e(a,e,t){var r=a.__transition,n;r[e]=t,t.timer=_T(i,0,t.time);function i(d){t.state=eO,t.timer.restart(l,t.delay,t.time),t.delay<=d&&l(d-t.delay)}function l(d){var u,h,f,p;if(t.state!==eO)return c();for(u in r)if(p=r[u],p.name===t.name){if(p.state===Dw)return JL(l);p.state===tO?(p.state=Iw,p.timer.stop(),p.on.call("interrupt",a,a.__data__,p.index,p.group),delete r[u]):+u<e&&(p.state=Iw,p.timer.stop(),p.on.call("cancel",a,a.__data__,p.index,p.group),delete r[u])}if(JL(function(){t.state===Dw&&(t.state=tO,t.timer.restart(o,t.delay,t.time),o(d))}),t.state=g4,t.on.call("start",a,a.__data__,t.index,t.group),t.state===g4){for(t.state=Dw,n=new Array(f=t.tween.length),u=0,h=-1;u<f;++u)(p=t.tween[u].value.call(a,a.__data__,t.index,t.group))&&(n[++h]=p);n.length=h+1}}function o(d){for(var u=d<t.duration?t.ease.call(null,d/t.duration):(t.timer.restart(c),t.state=v4,1),h=-1,f=n.length;++h<f;)n[h].call(a,u);t.state===v4&&(t.on.call("end",a,a.__data__,t.index,t.group),c())}function c(){t.state=Iw,t.timer.stop(),delete r[e];for(var d in r)return;delete a.__transition}}function b0e(a,e){var t=a.__transition,r,n,i=!0,l;if(t){e=e==null?null:e+"";for(l in t){if((r=t[l]).name!==e){i=!1;continue}n=r.state>g4&&r.state<v4,r.state=Iw,r.timer.stop(),r.on.call(n?"interrupt":"cancel",a,a.__data__,r.index,r.group),delete t[l]}i&&delete a.__transition}}function y0e(a){return this.each(function(){b0e(this,a)})}function w0e(a,e){var t,r;return function(){var n=zc(this,a),i=n.tween;if(i!==t){r=t=i;for(var l=0,o=r.length;l<o;++l)if(r[l].name===e){r=r.slice(),r.splice(l,1);break}}n.tween=r}}function _0e(a,e,t){var r,n;if(typeof t!="function")throw new Error;return function(){var i=zc(this,a),l=i.tween;if(l!==r){n=(r=l).slice();for(var o={name:e,value:t},c=0,d=n.length;c<d;++c)if(n[c].name===e){n[c]=o;break}c===d&&n.push(o)}i.tween=n}}function N0e(a,e){var t=this._id;if(a+="",arguments.length<2){for(var r=Po(this.node(),t).tween,n=0,i=r.length,l;n<i;++n)if((l=r[n]).name===a)return l.value;return null}return this.each((e==null?w0e:_0e)(t,a,e))}function jT(a,e,t){var r=a._id;return a.each(function(){var n=zc(this,r);(n.value||(n.value={}))[e]=t.apply(this,arguments)}),function(n){return Po(n,r).value[e]}}function jG(a,e){var t;return(typeof e=="number"?Fu:e instanceof Ov?ZL:(t=Ov(e))?(e=t,ZL):l0e)(a,e)}function j0e(a){return function(){this.removeAttribute(a)}}function S0e(a){return function(){this.removeAttributeNS(a.space,a.local)}}function k0e(a,e,t){var r,n=t+"",i;return function(){var l=this.getAttribute(a);return l===n?null:l===r?i:i=e(r=l,t)}}function C0e(a,e,t){var r,n=t+"",i;return function(){var l=this.getAttributeNS(a.space,a.local);return l===n?null:l===r?i:i=e(r=l,t)}}function A0e(a,e,t){var r,n,i;return function(){var l,o=t(this),c;return o==null?void this.removeAttribute(a):(l=this.getAttribute(a),c=o+"",l===c?null:l===r&&c===n?i:(n=c,i=e(r=l,o)))}}function T0e(a,e,t){var r,n,i;return function(){var l,o=t(this),c;return o==null?void this.removeAttributeNS(a.space,a.local):(l=this.getAttributeNS(a.space,a.local),c=o+"",l===c?null:l===r&&c===n?i:(n=c,i=e(r=l,o)))}}function M0e(a,e){var t=eN(a),r=t==="transform"?u0e:jG;return this.attrTween(a,typeof e=="function"?(t.local?T0e:A0e)(t,r,jT(this,"attr."+a,e)):e==null?(t.local?S0e:j0e)(t):(t.local?C0e:k0e)(t,r,e))}function E0e(a,e){return function(t){this.setAttribute(a,e.call(this,t))}}function D0e(a,e){return function(t){this.setAttributeNS(a.space,a.local,e.call(this,t))}}function I0e(a,e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&D0e(a,i)),t}return n._value=e,n}function R0e(a,e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&E0e(a,i)),t}return n._value=e,n}function L0e(a,e){var t="attr."+a;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=eN(a);return this.tween(t,(r.local?I0e:R0e)(r,e))}function O0e(a,e){return function(){NT(this,a).delay=+e.apply(this,arguments)}}function P0e(a,e){return e=+e,function(){NT(this,a).delay=e}}function z0e(a){var e=this._id;return arguments.length?this.each((typeof a=="function"?O0e:P0e)(e,a)):Po(this.node(),e).delay}function B0e(a,e){return function(){zc(this,a).duration=+e.apply(this,arguments)}}function F0e(a,e){return e=+e,function(){zc(this,a).duration=e}}function V0e(a){var e=this._id;return arguments.length?this.each((typeof a=="function"?B0e:F0e)(e,a)):Po(this.node(),e).duration}function H0e(a,e){if(typeof e!="function")throw new Error;return function(){zc(this,a).ease=e}}function U0e(a){var e=this._id;return arguments.length?this.each(H0e(e,a)):Po(this.node(),e).ease}function G0e(a,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;zc(this,a).ease=t}}function W0e(a){if(typeof a!="function")throw new Error;return this.each(G0e(this._id,a))}function Y0e(a){typeof a!="function"&&(a=iG(a));for(var e=this._groups,t=e.length,r=new Array(t),n=0;n<t;++n)for(var i=e[n],l=i.length,o=r[n]=[],c,d=0;d<l;++d)(c=i[d])&&a.call(c,c.__data__,d,i)&&o.push(c);return new Rd(r,this._parents,this._name,this._id)}function $0e(a){if(a._id!==this._id)throw new Error;for(var e=this._groups,t=a._groups,r=e.length,n=t.length,i=Math.min(r,n),l=new Array(r),o=0;o<i;++o)for(var c=e[o],d=t[o],u=c.length,h=l[o]=new Array(u),f,p=0;p<u;++p)(f=c[p]||d[p])&&(h[p]=f);for(;o<r;++o)l[o]=e[o];return new Rd(l,this._parents,this._name,this._id)}function q0e(a){return(a+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function X0e(a,e,t){var r,n,i=q0e(e)?NT:zc;return function(){var l=i(this,a),o=l.on;o!==r&&(n=(r=o).copy()).on(e,t),l.on=n}}function Z0e(a,e){var t=this._id;return arguments.length<2?Po(this.node(),t).on.on(a):this.each(X0e(t,a,e))}function K0e(a){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==a)return;e&&e.removeChild(this)}}function Q0e(){return this.on("end.remove",K0e(this._id))}function J0e(a){var e=this._name,t=this._id;typeof a!="function"&&(a=vT(a));for(var r=this._groups,n=r.length,i=new Array(n),l=0;l<n;++l)for(var o=r[l],c=o.length,d=i[l]=new Array(c),u,h,f=0;f<c;++f)(u=o[f])&&(h=a.call(u,u.__data__,f,o))&&("__data__"in u&&(h.__data__=u.__data__),d[f]=h,aN(d[f],e,t,f,d,Po(u,t)));return new Rd(i,this._parents,e,t)}function epe(a){var e=this._name,t=this._id;typeof a!="function"&&(a=nG(a));for(var r=this._groups,n=r.length,i=[],l=[],o=0;o<n;++o)for(var c=r[o],d=c.length,u,h=0;h<d;++h)if(u=c[h]){for(var f=a.call(u,u.__data__,h,c),p,g=Po(u,t),b=0,w=f.length;b<w;++b)(p=f[b])&&aN(p,e,t,b,f,g);i.push(f),l.push(u)}return new Rd(i,l,e,t)}var tpe=kb.prototype.constructor;function ape(){return new tpe(this._groups,this._parents)}function rpe(a,e){var t,r,n;return function(){var i=Nx(this,a),l=(this.style.removeProperty(a),Nx(this,a));return i===l?null:i===t&&l===r?n:n=e(t=i,r=l)}}function SG(a){return function(){this.style.removeProperty(a)}}function npe(a,e,t){var r,n=t+"",i;return function(){var l=Nx(this,a);return l===n?null:l===r?i:i=e(r=l,t)}}function ipe(a,e,t){var r,n,i;return function(){var l=Nx(this,a),o=t(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(a),Nx(this,a))),l===c?null:l===r&&c===n?i:(n=c,i=e(r=l,o))}}function spe(a,e){var t,r,n,i="style."+e,l="end."+i,o;return function(){var c=zc(this,a),d=c.on,u=c.value[i]==null?o||(o=SG(e)):void 0;(d!==t||n!==u)&&(r=(t=d).copy()).on(l,n=u),c.on=r}}function lpe(a,e,t){var r=(a+="")=="transform"?d0e:jG;return e==null?this.styleTween(a,rpe(a,r)).on("end.style."+a,SG(a)):typeof e=="function"?this.styleTween(a,ipe(a,r,jT(this,"style."+a,e))).each(spe(this._id,a)):this.styleTween(a,npe(a,r,e),t).on("end.style."+a,null)}function ope(a,e,t){return function(r){this.style.setProperty(a,e.call(this,r),t)}}function cpe(a,e,t){var r,n;function i(){var l=e.apply(this,arguments);return l!==n&&(r=(n=l)&&ope(a,l,t)),r}return i._value=e,i}function dpe(a,e,t){var r="style."+(a+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,cpe(a,e,t??""))}function upe(a){return function(){this.textContent=a}}function hpe(a){return function(){var e=a(this);this.textContent=e??""}}function fpe(a){return this.tween("text",typeof a=="function"?hpe(jT(this,"text",a)):upe(a==null?"":a+""))}function ppe(a){return function(e){this.textContent=a.call(this,e)}}function xpe(a){var e,t;function r(){var n=a.apply(this,arguments);return n!==t&&(e=(t=n)&&ppe(n)),e}return r._value=a,r}function mpe(a){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(a==null)return this.tween(e,null);if(typeof a!="function")throw new Error;return this.tween(e,xpe(a))}function gpe(){for(var a=this._name,e=this._id,t=kG(),r=this._groups,n=r.length,i=0;i<n;++i)for(var l=r[i],o=l.length,c,d=0;d<o;++d)if(c=l[d]){var u=Po(c,e);aN(c,a,t,d,l,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Rd(r,this._parents,a,t)}function vpe(){var a,e,t=this,r=t._id,n=t.size();return new Promise(function(i,l){var o={value:l},c={value:function(){--n===0&&i()}};t.each(function(){var d=zc(this,r),u=d.on;u!==a&&(e=(a=u).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(c)),d.on=e}),n===0&&i()})}var bpe=0;function Rd(a,e,t,r){this._groups=a,this._parents=e,this._name=t,this._id=r}function kG(){return++bpe}var cd=kb.prototype;Rd.prototype={constructor:Rd,select:J0e,selectAll:epe,selectChild:cd.selectChild,selectChildren:cd.selectChildren,filter:Y0e,merge:$0e,selection:ape,transition:gpe,call:cd.call,nodes:cd.nodes,node:cd.node,size:cd.size,empty:cd.empty,each:cd.each,on:Z0e,attr:M0e,attrTween:L0e,style:lpe,styleTween:dpe,text:fpe,textTween:mpe,remove:Q0e,tween:N0e,delay:z0e,duration:V0e,ease:U0e,easeVarying:W0e,end:vpe,[Symbol.iterator]:cd[Symbol.iterator]};function ype(a){return((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}var wpe={time:null,delay:0,duration:250,ease:ype};function _pe(a,e){for(var t;!(t=a.__transition)||!(t=t[e]);)if(!(a=a.parentNode))throw new Error(`transition ${e} not found`);return t}function Npe(a){var e,t;a instanceof Rd?(e=a._id,a=a._name):(e=kG(),(t=wpe).time=wT(),a=a==null?null:a+"");for(var r=this._groups,n=r.length,i=0;i<n;++i)for(var l=r[i],o=l.length,c,d=0;d<o;++d)(c=l[d])&&aN(c,a,e,d,l,t||_pe(c,e));return new Rd(r,this._parents,a,e)}kb.prototype.interrupt=y0e;kb.prototype.transition=Npe;function jpe(a,e){var t,r=1;a==null&&(a=0),e==null&&(e=0);function n(){var i,l=t.length,o,c=0,d=0;for(i=0;i<l;++i)o=t[i],c+=o.x,d+=o.y;for(c=(c/l-a)*r,d=(d/l-e)*r,i=0;i<l;++i)o=t[i],o.x-=c,o.y-=d}return n.initialize=function(i){t=i},n.x=function(i){return arguments.length?(a=+i,n):a},n.y=function(i){return arguments.length?(e=+i,n):e},n.strength=function(i){return arguments.length?(r=+i,n):r},n}function Spe(a){const e=+this._x.call(null,a),t=+this._y.call(null,a);return CG(this.cover(e,t),e,t,a)}function CG(a,e,t,r){if(isNaN(e)||isNaN(t))return a;var n,i=a._root,l={data:r},o=a._x0,c=a._y0,d=a._x1,u=a._y1,h,f,p,g,b,w,j,k;if(!i)return a._root=l,a;for(;i.length;)if((b=e>=(h=(o+d)/2))?o=h:d=h,(w=t>=(f=(c+u)/2))?c=f:u=f,n=i,!(i=i[j=w<<1|b]))return n[j]=l,a;if(p=+a._x.call(null,i.data),g=+a._y.call(null,i.data),e===p&&t===g)return l.next=i,n?n[j]=l:a._root=l,a;do n=n?n[j]=new Array(4):a._root=new Array(4),(b=e>=(h=(o+d)/2))?o=h:d=h,(w=t>=(f=(c+u)/2))?c=f:u=f;while((j=w<<1|b)===(k=(g>=f)<<1|p>=h));return n[k]=i,n[j]=l,a}function kpe(a){var e,t,r=a.length,n,i,l=new Array(r),o=new Array(r),c=1/0,d=1/0,u=-1/0,h=-1/0;for(t=0;t<r;++t)isNaN(n=+this._x.call(null,e=a[t]))||isNaN(i=+this._y.call(null,e))||(l[t]=n,o[t]=i,n<c&&(c=n),n>u&&(u=n),i<d&&(d=i),i>h&&(h=i));if(c>u||d>h)return this;for(this.cover(c,d).cover(u,h),t=0;t<r;++t)CG(this,l[t],o[t],a[t]);return this}function Cpe(a,e){if(isNaN(a=+a)||isNaN(e=+e))return this;var t=this._x0,r=this._y0,n=this._x1,i=this._y1;if(isNaN(t))n=(t=Math.floor(a))+1,i=(r=Math.floor(e))+1;else{for(var l=n-t||1,o=this._root,c,d;t>a||a>=n||r>e||e>=i;)switch(d=(e<r)<<1|a<t,c=new Array(4),c[d]=o,o=c,l*=2,d){case 0:n=t+l,i=r+l;break;case 1:t=n-l,i=r+l;break;case 2:n=t+l,r=i-l;break;case 3:t=n-l,r=i-l;break}this._root&&this._root.length&&(this._root=o)}return this._x0=t,this._y0=r,this._x1=n,this._y1=i,this}function Ape(){var a=[];return this.visit(function(e){if(!e.length)do a.push(e.data);while(e=e.next)}),a}function Tpe(a){return arguments.length?this.cover(+a[0][0],+a[0][1]).cover(+a[1][0],+a[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ks(a,e,t,r,n){this.node=a,this.x0=e,this.y0=t,this.x1=r,this.y1=n}function Mpe(a,e,t){var r,n=this._x0,i=this._y0,l,o,c,d,u=this._x1,h=this._y1,f=[],p=this._root,g,b;for(p&&f.push(new ks(p,n,i,u,h)),t==null?t=1/0:(n=a-t,i=e-t,u=a+t,h=e+t,t*=t);g=f.pop();)if(!(!(p=g.node)||(l=g.x0)>u||(o=g.y0)>h||(c=g.x1)<n||(d=g.y1)<i))if(p.length){var w=(l+c)/2,j=(o+d)/2;f.push(new ks(p[3],w,j,c,d),new ks(p[2],l,j,w,d),new ks(p[1],w,o,c,j),new ks(p[0],l,o,w,j)),(b=(e>=j)<<1|a>=w)&&(g=f[f.length-1],f[f.length-1]=f[f.length-1-b],f[f.length-1-b]=g)}else{var k=a-+this._x.call(null,p.data),T=e-+this._y.call(null,p.data),E=k*k+T*T;if(E<t){var I=Math.sqrt(t=E);n=a-I,i=e-I,u=a+I,h=e+I,r=p.data}}return r}function Epe(a){if(isNaN(u=+this._x.call(null,a))||isNaN(h=+this._y.call(null,a)))return this;var e,t=this._root,r,n,i,l=this._x0,o=this._y0,c=this._x1,d=this._y1,u,h,f,p,g,b,w,j;if(!t)return this;if(t.length)for(;;){if((g=u>=(f=(l+c)/2))?l=f:c=f,(b=h>=(p=(o+d)/2))?o=p:d=p,e=t,!(t=t[w=b<<1|g]))return this;if(!t.length)break;(e[w+1&3]||e[w+2&3]||e[w+3&3])&&(r=e,j=w)}for(;t.data!==a;)if(n=t,!(t=t.next))return this;return(i=t.next)&&delete t.next,n?(i?n.next=i:delete n.next,this):e?(i?e[w]=i:delete e[w],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[j]=t:this._root=t),this):(this._root=i,this)}function Dpe(a){for(var e=0,t=a.length;e<t;++e)this.remove(a[e]);return this}function Ipe(){return this._root}function Rpe(){var a=0;return this.visit(function(e){if(!e.length)do++a;while(e=e.next)}),a}function Lpe(a){var e=[],t,r=this._root,n,i,l,o,c;for(r&&e.push(new ks(r,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!a(r=t.node,i=t.x0,l=t.y0,o=t.x1,c=t.y1)&&r.length){var d=(i+o)/2,u=(l+c)/2;(n=r[3])&&e.push(new ks(n,d,u,o,c)),(n=r[2])&&e.push(new ks(n,i,u,d,c)),(n=r[1])&&e.push(new ks(n,d,l,o,u)),(n=r[0])&&e.push(new ks(n,i,l,d,u))}return this}function Ope(a){var e=[],t=[],r;for(this._root&&e.push(new ks(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var n=r.node;if(n.length){var i,l=r.x0,o=r.y0,c=r.x1,d=r.y1,u=(l+c)/2,h=(o+d)/2;(i=n[0])&&e.push(new ks(i,l,o,u,h)),(i=n[1])&&e.push(new ks(i,u,o,c,h)),(i=n[2])&&e.push(new ks(i,l,h,u,d)),(i=n[3])&&e.push(new ks(i,u,h,c,d))}t.push(r)}for(;r=t.pop();)a(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Ppe(a){return a[0]}function zpe(a){return arguments.length?(this._x=a,this):this._x}function Bpe(a){return a[1]}function Fpe(a){return arguments.length?(this._y=a,this):this._y}function ST(a,e,t){var r=new kT(e??Ppe,t??Bpe,NaN,NaN,NaN,NaN);return a==null?r:r.addAll(a)}function kT(a,e,t,r,n,i){this._x=a,this._y=e,this._x0=t,this._y0=r,this._x1=n,this._y1=i,this._root=void 0}function aO(a){for(var e={data:a.data},t=e;a=a.next;)t=t.next={data:a.data};return e}var Es=ST.prototype=kT.prototype;Es.copy=function(){var a=new kT(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,r;if(!e)return a;if(!e.length)return a._root=aO(e),a;for(t=[{source:e,target:a._root=new Array(4)}];e=t.pop();)for(var n=0;n<4;++n)(r=e.source[n])&&(r.length?t.push({source:r,target:e.target[n]=new Array(4)}):e.target[n]=aO(r));return a};Es.add=Spe;Es.addAll=kpe;Es.cover=Cpe;Es.data=Ape;Es.extent=Tpe;Es.find=Mpe;Es.remove=Epe;Es.removeAll=Dpe;Es.root=Ipe;Es.size=Rpe;Es.visit=Lpe;Es.visitAfter=Ope;Es.x=zpe;Es.y=Fpe;function n0(a){return function(){return a}}function Ku(a){return(a()-.5)*1e-6}function Vpe(a){return a.x+a.vx}function Hpe(a){return a.y+a.vy}function Upe(a){var e,t,r,n=1,i=1;typeof a!="function"&&(a=n0(a==null?1:+a));function l(){for(var d,u=e.length,h,f,p,g,b,w,j=0;j<i;++j)for(h=ST(e,Vpe,Hpe).visitAfter(o),d=0;d<u;++d)f=e[d],b=t[f.index],w=b*b,p=f.x+f.vx,g=f.y+f.vy,h.visit(k);function k(T,E,I,R,P){var H=T.data,G=T.r,X=b+G;if(H){if(H.index>f.index){var U=p-H.x-H.vx,te=g-H.y-H.vy,Z=U*U+te*te;Z<X*X&&(U===0&&(U=Ku(r),Z+=U*U),te===0&&(te=Ku(r),Z+=te*te),Z=(X-(Z=Math.sqrt(Z)))/Z*n,f.vx+=(U*=Z)*(X=(G*=G)/(w+G)),f.vy+=(te*=Z)*X,H.vx-=U*(X=1-X),H.vy-=te*X)}return}return E>p+X||R<p-X||I>g+X||P<g-X}}function o(d){if(d.data)return d.r=t[d.data.index];for(var u=d.r=0;u<4;++u)d[u]&&d[u].r>d.r&&(d.r=d[u].r)}function c(){if(e){var d,u=e.length,h;for(t=new Array(u),d=0;d<u;++d)h=e[d],t[h.index]=+a(h,d,e)}}return l.initialize=function(d,u){e=d,r=u,c()},l.iterations=function(d){return arguments.length?(i=+d,l):i},l.strength=function(d){return arguments.length?(n=+d,l):n},l.radius=function(d){return arguments.length?(a=typeof d=="function"?d:n0(+d),c(),l):a},l}function Gpe(a){return a.index}function rO(a,e){var t=a.get(e);if(!t)throw new Error("node not found: "+e);return t}function Wpe(a){var e=Gpe,t=h,r,n=n0(30),i,l,o,c,d,u=1;a==null&&(a=[]);function h(w){return 1/Math.min(o[w.source.index],o[w.target.index])}function f(w){for(var j=0,k=a.length;j<u;++j)for(var T=0,E,I,R,P,H,G,X;T<k;++T)E=a[T],I=E.source,R=E.target,P=R.x+R.vx-I.x-I.vx||Ku(d),H=R.y+R.vy-I.y-I.vy||Ku(d),G=Math.sqrt(P*P+H*H),G=(G-i[T])/G*w*r[T],P*=G,H*=G,R.vx-=P*(X=c[T]),R.vy-=H*X,I.vx+=P*(X=1-X),I.vy+=H*X}function p(){if(l){var w,j=l.length,k=a.length,T=new Map(l.map((I,R)=>[e(I,R,l),I])),E;for(w=0,o=new Array(j);w<k;++w)E=a[w],E.index=w,typeof E.source!="object"&&(E.source=rO(T,E.source)),typeof E.target!="object"&&(E.target=rO(T,E.target)),o[E.source.index]=(o[E.source.index]||0)+1,o[E.target.index]=(o[E.target.index]||0)+1;for(w=0,c=new Array(k);w<k;++w)E=a[w],c[w]=o[E.source.index]/(o[E.source.index]+o[E.target.index]);r=new Array(k),g(),i=new Array(k),b()}}function g(){if(l)for(var w=0,j=a.length;w<j;++w)r[w]=+t(a[w],w,a)}function b(){if(l)for(var w=0,j=a.length;w<j;++w)i[w]=+n(a[w],w,a)}return f.initialize=function(w,j){l=w,d=j,p()},f.links=function(w){return arguments.length?(a=w,p(),f):a},f.id=function(w){return arguments.length?(e=w,f):e},f.iterations=function(w){return arguments.length?(u=+w,f):u},f.strength=function(w){return arguments.length?(t=typeof w=="function"?w:n0(+w),g(),f):t},f.distance=function(w){return arguments.length?(n=typeof w=="function"?w:n0(+w),b(),f):n},f}const Ype=1664525,$pe=1013904223,nO=4294967296;function qpe(){let a=1;return()=>(a=(Ype*a+$pe)%nO)/nO}function Xpe(a){return a.x}function Zpe(a){return a.y}var Kpe=10,Qpe=Math.PI*(3-Math.sqrt(5));function Jpe(a){var e,t=1,r=.001,n=1-Math.pow(r,1/300),i=0,l=.6,o=new Map,c=_T(h),d=J_("tick","end"),u=qpe();a==null&&(a=[]);function h(){f(),d.call("tick",e),t<r&&(c.stop(),d.call("end",e))}function f(b){var w,j=a.length,k;b===void 0&&(b=1);for(var T=0;T<b;++T)for(t+=(i-t)*n,o.forEach(function(E){E(t)}),w=0;w<j;++w)k=a[w],k.fx==null?k.x+=k.vx*=l:(k.x=k.fx,k.vx=0),k.fy==null?k.y+=k.vy*=l:(k.y=k.fy,k.vy=0);return e}function p(){for(var b=0,w=a.length,j;b<w;++b){if(j=a[b],j.index=b,j.fx!=null&&(j.x=j.fx),j.fy!=null&&(j.y=j.fy),isNaN(j.x)||isNaN(j.y)){var k=Kpe*Math.sqrt(.5+b),T=b*Qpe;j.x=k*Math.cos(T),j.y=k*Math.sin(T)}(isNaN(j.vx)||isNaN(j.vy))&&(j.vx=j.vy=0)}}function g(b){return b.initialize&&b.initialize(a,u),b}return p(),e={tick:f,restart:function(){return c.restart(h),e},stop:function(){return c.stop(),e},nodes:function(b){return arguments.length?(a=b,p(),o.forEach(g),e):a},alpha:function(b){return arguments.length?(t=+b,e):t},alphaMin:function(b){return arguments.length?(r=+b,e):r},alphaDecay:function(b){return arguments.length?(n=+b,e):+n},alphaTarget:function(b){return arguments.length?(i=+b,e):i},velocityDecay:function(b){return arguments.length?(l=1-b,e):1-l},randomSource:function(b){return arguments.length?(u=b,o.forEach(g),e):u},force:function(b,w){return arguments.length>1?(w==null?o.delete(b):o.set(b,g(w)),e):o.get(b)},find:function(b,w,j){var k=0,T=a.length,E,I,R,P,H;for(j==null?j=1/0:j*=j,k=0;k<T;++k)P=a[k],E=b-P.x,I=w-P.y,R=E*E+I*I,R<j&&(H=P,j=R);return H},on:function(b,w){return arguments.length>1?(d.on(b,w),e):d.on(b)}}}function exe(){var a,e,t,r,n=n0(-30),i,l=1,o=1/0,c=.81;function d(p){var g,b=a.length,w=ST(a,Xpe,Zpe).visitAfter(h);for(r=p,g=0;g<b;++g)e=a[g],w.visit(f)}function u(){if(a){var p,g=a.length,b;for(i=new Array(g),p=0;p<g;++p)b=a[p],i[b.index]=+n(b,p,a)}}function h(p){var g=0,b,w,j=0,k,T,E;if(p.length){for(k=T=E=0;E<4;++E)(b=p[E])&&(w=Math.abs(b.value))&&(g+=b.value,j+=w,k+=w*b.x,T+=w*b.y);p.x=k/j,p.y=T/j}else{b=p,b.x=b.data.x,b.y=b.data.y;do g+=i[b.data.index];while(b=b.next)}p.value=g}function f(p,g,b,w){if(!p.value)return!0;var j=p.x-e.x,k=p.y-e.y,T=w-g,E=j*j+k*k;if(T*T/c<E)return E<o&&(j===0&&(j=Ku(t),E+=j*j),k===0&&(k=Ku(t),E+=k*k),E<l&&(E=Math.sqrt(l*E)),e.vx+=j*p.value*r/E,e.vy+=k*p.value*r/E),!0;if(p.length||E>=o)return;(p.data!==e||p.next)&&(j===0&&(j=Ku(t),E+=j*j),k===0&&(k=Ku(t),E+=k*k),E<l&&(E=Math.sqrt(l*E)));do p.data!==e&&(T=i[p.data.index]*r/E,e.vx+=j*T,e.vy+=k*T);while(p=p.next)}return d.initialize=function(p,g){a=p,t=g,u()},d.strength=function(p){return arguments.length?(n=typeof p=="function"?p:n0(+p),u(),d):n},d.distanceMin=function(p){return arguments.length?(l=p*p,d):Math.sqrt(l)},d.distanceMax=function(p){return arguments.length?(o=p*p,d):Math.sqrt(o)},d.theta=function(p){return arguments.length?(c=p*p,d):Math.sqrt(c)},d}function Bg(a,e,t){this.k=a,this.x=e,this.y=t}Bg.prototype={constructor:Bg,scale:function(a){return a===1?this:new Bg(this.k*a,this.x,this.y)},translate:function(a,e){return a===0&e===0?this:new Bg(this.k,this.x+this.k*a,this.y+this.k*e)},apply:function(a){return[a[0]*this.k+this.x,a[1]*this.k+this.y]},applyX:function(a){return a*this.k+this.x},applyY:function(a){return a*this.k+this.y},invert:function(a){return[(a[0]-this.x)/this.k,(a[1]-this.y)/this.k]},invertX:function(a){return(a-this.x)/this.k},invertY:function(a){return(a-this.y)/this.k},rescaleX:function(a){return a.copy().domain(a.range().map(this.invertX,this).map(a.invert,a))},rescaleY:function(a){return a.copy().domain(a.range().map(this.invertY,this).map(a.invert,a))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Bg.prototype;const txe=()=>{const{showAlert:a}=wa(),[e,t]=F.useState([]),[r,n]=F.useState(!1),[i,l]=F.useState(""),[o,c]=F.useState(!1),[d,u]=F.useState(!1),[h,f]=F.useState(null),[p,g]=F.useState(""),[b,w]=F.useState(!1),[j,k]=F.useState(null),[T,E]=F.useState(""),[I,R]=F.useState(""),[P,H]=F.useState(!1),G=F.useRef(null),X=F.useRef(null);F.useEffect(()=>{U()},[]);const U=async()=>{n(!0),l("   .     ...");try{const Q=await Ke("get_product_associations",{});t(Q||[])}catch(Q){console.error("Association Analysis Error:",Q),a("","    : "+Q)}finally{n(!1)}};F.useEffect(()=>{if(!e||e.length===0||!G.current){G.current&&(G.current.innerHTML="");return}te()},[e]);const te=()=>{const Q=G.current,ne=Q.clientWidth,re=Q.clientHeight||500;Q.innerHTML="";const K=new Map,ae=[];e.forEach(ke=>{K.has(ke.product_a)||K.set(ke.product_a,{id:ke.product_a,group:1,value:0}),K.has(ke.product_b)||K.set(ke.product_b,{id:ke.product_b,group:2,value:0}),K.get(ke.product_a).value++,K.get(ke.product_b).value++,ae.push({source:ke.product_a,target:ke.product_b,value:ke.pair_count,weight:ke.support_percent})});const ce=Array.from(K.values()),de=a0(Q).append("svg").attr("width",ne).attr("height",re).style("background","transparent"),he=Jpe(ce).force("link",Wpe(ae).id(ke=>ke.id).distance(150)).force("charge",exe().strength(-400)).force("center",jpe(ne/2,re/2)).force("collide",Upe().radius(ke=>ke.value*3+30)),pe=de.append("g").attr("stroke","#94a3b8").attr("stroke-opacity",.6).selectAll("line").data(ae).join("line").attr("stroke-width",ke=>Math.max(1,Math.sqrt(ke.value))),Re=ke=>{const Le=Oe=>{Oe.active||ke.alphaTarget(.3).restart(),Oe.subject.fx=Oe.subject.x,Oe.subject.fy=Oe.subject.y},Ne=Oe=>{Oe.subject.fx=Oe.x,Oe.subject.fy=Oe.y},_e=Oe=>{Oe.active||ke.alphaTarget(0),Oe.subject.fx=null,Oe.subject.fy=null};return Ufe().on("start",Le).on("drag",Ne).on("end",_e)},Te=de.append("g").selectAll("g").data(ce).join("g").call(Re(he));Te.append("circle").attr("r",ke=>ke.value*2+8).attr("fill",ke=>ke.value>5?"#fbbf24":"#6366f1").attr("stroke","#fff").attr("stroke-width",2).style("cursor","pointer").style("filter","drop-shadow(0 4px 3px rgb(0 0 0 / 0.07))").on("mouseover",(ke,Le)=>{a0(ke.currentTarget).attr("stroke","#1e293b").attr("stroke-width",3),Z(ke,Le,ae)}).on("mouseout",ke=>{a0(ke.currentTarget).attr("stroke","#fff").attr("stroke-width",2),J()}).on("click",(ke,Le)=>{const Ne=ae.filter(_e=>_e.source.id===Le.id||_e.target.id===Le.id).sort((_e,Oe)=>Oe.weight-_e.weight)[0];if(Ne){const _e=Ne.source.id===Le.id?Ne.target.id:Ne.source.id;B(Le.id,_e)}}),Te.append("text").text(ke=>ke.id).attr("x",14).attr("y",5).style("font-size","12px").style("font-weight","600").style("fill","#334155").style("pointer-events","none").style("text-shadow","2px 2px 0 #fff, -2px -2px 0 #fff, 2px -2px 0 #fff, -2px 2px 0 #fff"),he.on("tick",()=>{pe.attr("x1",ke=>ke.source.x).attr("y1",ke=>ke.source.y).attr("x2",ke=>ke.target.x).attr("y2",ke=>ke.target.y),Te.attr("transform",ke=>`translate(${ke.x},${ke.y})`)})},Z=(Q,ne,re)=>{if(!X.current)return;const K=re.filter(ae=>ae.source.id===ne.id||ae.target.id===ne.id).length;X.current.style.display="block",X.current.style.left=Q.nativeEvent.offsetX+20+"px",X.current.style.top=Q.nativeEvent.offsetY-20+"px",X.current.innerHTML=`<strong>${ne.id}</strong><br> : ${K}`},J=()=>{X.current&&(X.current.style.display="none")},B=async(Q,ne)=>{c(!0),u(!0),f(null),g("     (Lift & Confidence)  ...");try{g("    ...");const re=await Co(a,"get_ai_marketing_proposal",{p1:Q,p2:ne});f(re)}catch(re){console.error("AI Promo Error:",re),c(!1)}finally{u(!1)}},W=async(Q,ne,re,K)=>{w(!0),H(!0),k(null),E(Q==="VIRAL"?"  ":"  (Action Plan)"),R(`${ne} + ${re} | : ${K}`);try{const ae=await Co(a,"get_ai_detailed_plan",{planType:Q,p1:ne,p2:re,strategyTitle:K});k($(ae))}catch(ae){console.error("Detailed Plan Error:",ae),k(s.jsxs("div",{className:"text-red-600 p-4",children:[" : ",ae]}))}finally{H(!1)}},$=Q=>Q.split(`
`).map((re,K)=>{if(re.startsWith("### "))return s.jsx("h4",{className:"mt-6 mb-3 text-lg font-bold text-indigo-700 bg-slate-50 p-3 rounded-lg border-l-4 border-indigo-500 text-center",children:re.replace("### ","")},K);if(re.startsWith("## "))return s.jsx("h3",{className:"mt-8 mb-4 text-xl font-bold text-slate-800 border-b-2 border-slate-200 pb-2 text-center",children:re.replace("## ","")},K);if(re.startsWith("- "))return s.jsxs("div",{className:"ml-4 mb-2 flex gap-2 text-slate-600",children:[s.jsx("span",{className:"text-slate-300",children:""}),re.replace("- ","").replace(/\*\*(.*?)\*\*/g,"$1")]},K);if(re.match(/^\d+\./)){const ae=re.split(" "),ce=ae.shift();return s.jsxs("div",{className:"mt-4 mb-2 font-bold text-slate-800 flex gap-2",children:[s.jsx("span",{className:"text-indigo-600",children:ce}),ae.join(" ")]},K)}return re.startsWith("|")?s.jsx("div",{className:"overflow-x-auto my-4 text-xs text-slate-500",children:"[   -    ]"},K):s.jsx("p",{className:"mb-2 leading-relaxed text-slate-700",children:re.replace(/\*\*(.*?)\*\*/g,"$1")},K)});return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-amber-500 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-amber-500 uppercase",children:"Market Intelligence"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Basket Analysis"})]}),s.jsxs("p",{className:"text-slate-400 text-sm mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"hub"}),"         ."]})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 gap-6 px-6 lg:px-8 pb-8 min-h-0 overflow-hidden",children:[s.jsxs("div",{className:"flex-[2] bg-white rounded-[1.5rem] border border-slate-200 shadow-sm relative flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"p-5 border-b border-slate-100 flex justify-between items-center bg-white/50 backdrop-blur-sm z-10",children:[s.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"bubble_chart"}),"  "]}),s.jsxs("div",{className:"text-xs font-medium text-slate-400 flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-amber-400"})," "]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-indigo-500"})," "]})]})]}),s.jsxs("div",{className:"flex-1 relative bg-slate-50/30",children:[s.jsx("div",{className:"absolute inset-0 z-0",ref:G}),r&&s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white/80 z-20 backdrop-blur-sm",children:[s.jsx("span",{className:"material-symbols-rounded animate-spin text-4xl text-indigo-500 mb-4",children:"sync"}),s.jsx("p",{className:"text-slate-500 font-medium",children:i})]}),!r&&e.length===0&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-slate-400 z-10 pointer-events-none",children:"  ."}),s.jsx("div",{ref:X,className:"absolute hidden bg-slate-900/90 text-white text-xs px-3 py-2 rounded-lg pointer-events-none z-30 shadow-xl backdrop-blur-md border border-slate-700/50"})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col gap-6 min-w-[350px] overflow-y-auto custom-scrollbar",children:[s.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-[1.5rem] p-6 text-white shadow-xl relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/20 rounded-full blur-3xl -translate-y-10 translate-x-10 group-hover:bg-indigo-500/30 transition-all duration-700"}),s.jsxs("div",{className:"flex items-center gap-2 mb-6 relative z-10",children:[s.jsx("span",{className:"material-symbols-rounded text-amber-400 text-2xl animate-pulse",children:"lightbulb"}),s.jsx("h3",{className:"text-lg font-bold",children:"In-Depth Insights"})]}),s.jsx("div",{className:"space-y-4 relative z-10",children:e.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-amber-400 mb-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-amber-400 animate-ping"}),"LIVE AI ANALYSIS"]}),s.jsxs("p",{className:"text-slate-200 leading-relaxed text-sm",children:["   ",s.jsx("strong",{className:"text-white bg-indigo-600/50 px-1 rounded mx-1",children:e[0].product_a}),"",s.jsx("strong",{className:"text-white bg-indigo-600/50 px-1 rounded mx-1",children:e[0].product_b}),"     ."]}),s.jsx("div",{className:"bg-white/10 border-l-4 border-amber-400 p-4 rounded-r-xl backdrop-blur-md",children:s.jsxs("p",{className:"text-sm font-medium text-amber-50 leading-relaxed",children:['"    ',s.jsx("strong",{className:"text-white",children:"  "}),'      ."']})})]}):s.jsx("p",{className:"text-slate-400 text-sm",children:"     ."})}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-white/10",children:[s.jsx("h4",{className:"text-xs font-bold text-slate-400 mb-3 uppercase tracking-wider",children:"Strategic Recommendations"}),s.jsxs("ul",{className:"space-y-3 text-sm text-slate-300",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-400 text-lg",children:"check_circle"}),s.jsxs("span",{children:["  ",s.jsx("strong",{className:"text-white",children:" "})," ."]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-400 text-lg",children:"check_circle"}),s.jsxs("span",{children:["   ",s.jsx("strong",{className:"text-white",children:"   "})," ."]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-[1.5rem] p-6 border border-slate-200 shadow-sm",children:[s.jsx("h4",{className:"text-sm font-bold text-slate-500 mb-4",children:"ANALYSIS SUMMARY"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 rounded-xl bg-slate-50",children:[s.jsx("span",{className:"text-sm text-slate-500 font-medium",children:" "}),s.jsx("span",{className:"text-sm font-black text-slate-800",children:r?"Loading...":"Complete"})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 rounded-xl bg-slate-50",children:[s.jsx("span",{className:"text-sm text-slate-500 font-medium",children:"  "}),s.jsx("span",{className:"text-sm font-black text-slate-800",children:"2 "})]})]})]})]})]}),o&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-violet-600 p-8 text-white relative flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-md",children:s.jsx("span",{className:"material-symbols-rounded text-3xl",children:"psychology"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-black tracking-tight",children:"Jenny's AI Marketing Lab"}),s.jsx("p",{className:"text-indigo-100 text-sm mt-1",children:"      ."})]})]}),s.jsx("button",{onClick:()=>c(!1),className:"absolute top-6 right-6 p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-white",children:"close"})})]}),s.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar flex-1 relative",children:d?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[s.jsx("span",{className:"material-symbols-rounded text-6xl text-indigo-500 animate-pulse mb-6",children:"auto_awesome"}),s.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"AI    ..."}),s.jsx("p",{className:"text-slate-500",children:p})]}):h?s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-indigo-50 rounded-2xl p-5 border-l-4 border-indigo-500",children:[s.jsx("h4",{className:"text-xs font-bold text-indigo-400 uppercase tracking-widest mb-2",children:"Confidence Score"}),s.jsxs("p",{className:"text-slate-800 font-medium leading-relaxed",children:[s.jsx("strong",{className:"text-indigo-700",children:h.product_a}),"  ",s.jsxs("strong",{className:"text-indigo-700",children:[h.confidence_score,"%"]})," ",s.jsx("strong",{className:"text-indigo-700",children:h.product_b}),"  ."]})]}),s.jsxs("div",{className:"bg-pink-50 rounded-2xl p-5 border-l-4 border-pink-500",children:[s.jsx("h4",{className:"text-xs font-bold text-pink-400 uppercase tracking-widest mb-2",children:"Lift Score"}),s.jsxs("p",{className:"text-slate-800 font-medium leading-relaxed",children:[" (Lift) ",s.jsx("strong",{className:"text-pink-600",children:h.lift_score}),"       ."]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"flex items-center gap-2 text-lg font-bold text-slate-800 mb-4",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"campaign"}),"  "]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.strategies.map((Q,ne)=>s.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 hover:shadow-lg hover:border-indigo-400 transition-all group",children:[s.jsx("div",{className:"flex justify-between items-start mb-3",children:s.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-black uppercase ${ne===0?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:Q.impact})}),s.jsx("h4",{className:"font-bold text-slate-800 mb-2 group-hover:text-indigo-600 transition-colors",children:Q.title}),s.jsx("p",{className:"text-sm text-slate-500 leading-relaxed mb-4",children:Q.description}),s.jsx("div",{className:"pt-4 border-t border-slate-100 flex gap-2",children:s.jsx("button",{onClick:()=>W(ne===0?"ACTION":"VIRAL",h.product_a,h.product_b,Q.title),className:"flex-1 py-2 rounded-xl bg-slate-800 text-white text-xs font-bold hover:bg-indigo-600 transition-colors",children:"  "})})]},ne))})]}),s.jsxs("div",{className:"bg-orange-50 rounded-2xl p-6 border border-orange-100",children:[s.jsxs("h4",{className:"flex items-center gap-2 text-sm font-bold text-orange-700 mb-4",children:[s.jsx("span",{className:"material-symbols-rounded",children:"magic_button"})," AI  "]}),s.jsx("ul",{className:"space-y-3",children:h.ad_copies.map((Q,ne)=>s.jsxs("li",{className:"flex gap-3 text-sm text-orange-900 font-medium",children:[s.jsx("span",{className:"text-orange-400",children:""}),Q]},ne))})]})]}):null})]})}),b&&s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-white/95 backdrop-blur-md animate-in zoom-in-95 duration-200",children:s.jsxs("div",{className:"w-full max-w-5xl h-full max-h-screen flex flex-col p-8 overflow-hidden",children:[s.jsxs("div",{className:"flex justify-between items-start mb-8 pb-6 border-b border-slate-200 shrink-0",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-black text-slate-800",children:T}),s.jsx("p",{className:"text-slate-500 mt-2 font-medium",children:I})]}),s.jsx("button",{onClick:()=>w(!1),className:"w-10 h-10 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-slate-600",children:"close"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-4",children:P?s.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[s.jsx("span",{className:"material-symbols-rounded animate-spin text-4xl mb-4 text-indigo-300",children:"sync"}),s.jsx("p",{children:"   ..."})]}):s.jsx("div",{className:"max-w-4xl mx-auto bg-white p-10 shadow-sm border border-slate-100 rounded-2xl",children:j})}),s.jsxs("div",{className:"shrink-0 pt-6 mt-4 border-t border-slate-100 flex justify-center gap-4",children:[s.jsxs("button",{className:"h-12 px-8 rounded-xl bg-indigo-600 text-white font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 transition-all flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"print"}),"  / PDF "]}),s.jsx("button",{onClick:()=>w(!1),className:"h-12 px-8 rounded-xl bg-slate-200 text-slate-700 font-bold hover:bg-slate-300 transition-all",children:""})]})]})})]})};var b4=function(a,e){return b4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},b4(a,e)};function Ie(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");b4(a,e);function t(){this.constructor=a}a.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var axe=(function(){function a(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return a})(),rxe=(function(){function a(){this.browser=new axe,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return a})(),Ba=new rxe;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Ba.wxa=!0,Ba.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Ba.worker=!0:!Ba.hasGlobalWindow||"Deno"in window||typeof navigator<"u"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Node.js")>-1?(Ba.node=!0,Ba.svgSupported=!0):nxe(navigator.userAgent,Ba);function nxe(a,e){var t=e.browser,r=a.match(/Firefox\/([\d.]+)/),n=a.match(/MSIE\s([\d.]+)/)||a.match(/Trident\/.+?rv:(([\d.]+))/),i=a.match(/Edge?\/([\d.]+)/),l=/micromessenger/i.test(a);r&&(t.firefox=!0,t.version=r[1]),n&&(t.ie=!0,t.version=n[1]),i&&(t.edge=!0,t.version=i[1],t.newEdge=+i[1].split(".")[0]>18),l&&(t.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!t.ie&&!t.edge,e.pointerEventsSupported="onpointerdown"in window&&(t.edge||t.ie&&+t.version>=11);var o=e.domSupported=typeof document<"u";if(o){var c=document.documentElement.style;e.transform3dSupported=(t.ie&&"transition"in c||t.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in c)&&!("OTransition"in c),e.transformSupported=e.transform3dSupported||t.ie&&+t.version>=9}}var CT=12,AG="sans-serif",Ld=CT+"px "+AG,ixe=20,sxe=100,lxe="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function oxe(a){var e={};if(typeof JSON>"u")return e;for(var t=0;t<a.length;t++){var r=String.fromCharCode(t+32),n=(a.charCodeAt(t)-ixe)/sxe;e[r]=n}return e}var cxe=oxe(lxe),Do={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:(function(){var a,e;return function(t,r){if(!a){var n=Do.createCanvas();a=n&&n.getContext("2d")}if(a)return e!==r&&(e=a.font=r||Ld),a.measureText(t);t=t||"",r=r||Ld;var i=/((?:\d+)?\.?\d*)px/.exec(r),l=i&&+i[1]||CT,o=0;if(r.indexOf("mono")>=0)o=l*t.length;else for(var c=0;c<t.length;c++){var d=cxe[t[c]];o+=d==null?l:d*l}return{width:o}}})(),loadImage:function(a,e,t){var r=new Image;return r.onload=e,r.onerror=t,r.src=a,r}},TG=Mc(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(a,e){return a["[object "+e+"]"]=!0,a},{}),MG=Mc(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(a,e){return a["[object "+e+"Array]"]=!0,a},{}),Ux=Object.prototype.toString,rN=Array.prototype,dxe=rN.forEach,uxe=rN.filter,AT=rN.slice,hxe=rN.map,iO=(function(){}).constructor,dy=iO?iO.prototype:null,TT="__proto__",fxe=2311;function EG(){return fxe++}function MT(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];typeof console<"u"&&console.error.apply(console,a)}function Xt(a){if(a==null||typeof a!="object")return a;var e=a,t=Ux.call(a);if(t==="[object Array]"){if(!iv(a)){e=[];for(var r=0,n=a.length;r<n;r++)e[r]=Xt(a[r])}}else if(MG[t]){if(!iv(a)){var i=a.constructor;if(i.from)e=i.from(a);else{e=new i(a.length);for(var r=0,n=a.length;r<n;r++)e[r]=a[r]}}}else if(!TG[t]&&!iv(a)&&!Sx(a)){e={};for(var l in a)a.hasOwnProperty(l)&&l!==TT&&(e[l]=Xt(a[l]))}return e}function Ca(a,e,t){if(!aa(e)||!aa(a))return t?Xt(e):a;for(var r in e)if(e.hasOwnProperty(r)&&r!==TT){var n=a[r],i=e[r];aa(i)&&aa(n)&&!lt(i)&&!lt(n)&&!Sx(i)&&!Sx(n)&&!sO(i)&&!sO(n)&&!iv(i)&&!iv(n)?Ca(n,i,t):(t||!(r in a))&&(a[r]=Xt(e[r]))}return a}function ET(a,e){for(var t=a[0],r=1,n=a.length;r<n;r++)t=Ca(t,a[r],e);return t}function et(a,e){if(Object.assign)Object.assign(a,e);else for(var t in e)e.hasOwnProperty(t)&&t!==TT&&(a[t]=e[t]);return a}function ta(a,e,t){for(var r=Ua(e),n=0,i=r.length;n<i;n++){var l=r[n];(t?e[l]!=null:a[l]==null)&&(a[l]=e[l])}return a}function ja(a,e){if(a){if(a.indexOf)return a.indexOf(e);for(var t=0,r=a.length;t<r;t++)if(a[t]===e)return t}return-1}function pxe(a,e){var t=a.prototype;function r(){}r.prototype=e.prototype,a.prototype=new r;for(var n in t)t.hasOwnProperty(n)&&(a.prototype[n]=t[n]);a.prototype.constructor=a,a.superClass=e}function ei(a,e,t){if(a="prototype"in a?a.prototype:a,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++){var i=r[n];i!=="constructor"&&(t?e[i]!=null:a[i]==null)&&(a[i]=e[i])}else ta(a,e,t)}function ds(a){return!a||typeof a=="string"?!1:typeof a.length=="number"}function se(a,e,t){if(a&&e)if(a.forEach&&a.forEach===dxe)a.forEach(e,t);else if(a.length===+a.length)for(var r=0,n=a.length;r<n;r++)e.call(t,a[r],r,a);else for(var i in a)a.hasOwnProperty(i)&&e.call(t,a[i],i,a)}function ct(a,e,t){if(!a)return[];if(!e)return DT(a);if(a.map&&a.map===hxe)return a.map(e,t);for(var r=[],n=0,i=a.length;n<i;n++)r.push(e.call(t,a[n],n,a));return r}function Mc(a,e,t,r){if(a&&e){for(var n=0,i=a.length;n<i;n++)t=e.call(r,t,a[n],n,a);return t}}function pr(a,e,t){if(!a)return[];if(!e)return DT(a);if(a.filter&&a.filter===uxe)return a.filter(e,t);for(var r=[],n=0,i=a.length;n<i;n++)e.call(t,a[n],n,a)&&r.push(a[n]);return r}function E0(a,e,t){if(a&&e){for(var r=0,n=a.length;r<n;r++)if(e.call(t,a[r],r,a))return a[r]}}function Ua(a){if(!a)return[];if(Object.keys)return Object.keys(a);var e=[];for(var t in a)a.hasOwnProperty(t)&&e.push(t);return e}function xxe(a,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return function(){return a.apply(e,t.concat(AT.call(arguments)))}}var Tt=dy&&Yt(dy.bind)?dy.call.bind(dy.bind):xxe;function ya(a){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){return a.apply(this,e.concat(AT.call(arguments)))}}function lt(a){return Array.isArray?Array.isArray(a):Ux.call(a)==="[object Array]"}function Yt(a){return typeof a=="function"}function At(a){return typeof a=="string"}function y4(a){return Ux.call(a)==="[object String]"}function Ka(a){return typeof a=="number"}function aa(a){var e=typeof a;return e==="function"||!!a&&e==="object"}function sO(a){return!!TG[Ux.call(a)]}function Qs(a){return!!MG[Ux.call(a)]}function Sx(a){return typeof a=="object"&&typeof a.nodeType=="number"&&typeof a.ownerDocument=="object"}function nN(a){return a.colorStops!=null}function mxe(a){return a.image!=null}function gxe(a){return Ux.call(a)==="[object RegExp]"}function os(a){return a!==a}function $i(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];for(var t=0,r=a.length;t<r;t++)if(a[t]!=null)return a[t]}function Ht(a,e){return a??e}function jl(a,e,t){return a??e??t}function DT(a){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return AT.apply(a,e)}function iN(a){if(typeof a=="number")return[a,a,a,a];var e=a.length;return e===2?[a[0],a[1],a[0],a[1]]:e===3?[a[0],a[1],a[2],a[1]]:a}function us(a,e){if(!a)throw new Error(e)}function eo(a){return a==null?null:typeof a.trim=="function"?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var DG="__ec_primitive__";function C2(a){a[DG]=!0}function iv(a){return a[DG]}var vxe=(function(){function a(){this.data={}}return a.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},a.prototype.has=function(e){return this.data.hasOwnProperty(e)},a.prototype.get=function(e){return this.data[e]},a.prototype.set=function(e,t){return this.data[e]=t,this},a.prototype.keys=function(){return Ua(this.data)},a.prototype.forEach=function(e){var t=this.data;for(var r in t)t.hasOwnProperty(r)&&e(t[r],r)},a})(),IG=typeof Map=="function";function bxe(){return IG?new Map:new vxe}var yxe=(function(){function a(e){var t=lt(e);this.data=bxe();var r=this;e instanceof a?e.each(n):e&&se(e,n);function n(i,l){t?r.set(i,l):r.set(l,i)}}return a.prototype.hasKey=function(e){return this.data.has(e)},a.prototype.get=function(e){return this.data.get(e)},a.prototype.set=function(e,t){return this.data.set(e,t),t},a.prototype.each=function(e,t){this.data.forEach(function(r,n){e.call(t,r,n)})},a.prototype.keys=function(){var e=this.data.keys();return IG?Array.from(e):e},a.prototype.removeKey=function(e){this.data.delete(e)},a})();function Pt(a){return new yxe(a)}function zv(a,e){for(var t=new a.constructor(a.length+e.length),r=0;r<a.length;r++)t[r]=a[r];for(var n=a.length,r=0;r<e.length;r++)t[r+n]=e[r];return t}function sN(a,e){var t;if(Object.create)t=Object.create(a);else{var r=function(){};r.prototype=a,t=new r}return e&&et(t,e),t}function RG(a){var e=a.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function Rt(a,e){return a.hasOwnProperty(e)}function Bn(){}var Rw=180/Math.PI;function D0(a,e){return a==null&&(a=0),e==null&&(e=0),[a,e]}function _s(a,e){return a[0]=e[0],a[1]=e[1],a}function Td(a){return[a[0],a[1]]}function IT(a,e,t){return a[0]=e,a[1]=t,a}function lO(a,e,t){return a[0]=e[0]+t[0],a[1]=e[1]+t[1],a}function w4(a,e,t,r){return a[0]=e[0]+t[0]*r,a[1]=e[1]+t[1]*r,a}function $f(a,e,t){return a[0]=e[0]-t[0],a[1]=e[1]-t[1],a}function _4(a){return Math.sqrt(wxe(a))}function wxe(a){return a[0]*a[0]+a[1]*a[1]}function Lw(a,e,t){return a[0]=e[0]*t,a[1]=e[1]*t,a}function Gx(a,e){var t=_4(e);return t===0?(a[0]=0,a[1]=0):(a[0]=e[0]/t,a[1]=e[1]/t),a}function N4(a,e){return Math.sqrt((a[0]-e[0])*(a[0]-e[0])+(a[1]-e[1])*(a[1]-e[1]))}var Qu=N4;function _xe(a,e){return(a[0]-e[0])*(a[0]-e[0])+(a[1]-e[1])*(a[1]-e[1])}var i0=_xe;function Ow(a,e,t,r){return a[0]=e[0]+r*(t[0]-e[0]),a[1]=e[1]+r*(t[1]-e[1]),a}function Fn(a,e,t){var r=e[0],n=e[1];return a[0]=t[0]*r+t[2]*n+t[4],a[1]=t[1]*r+t[3]*n+t[5],a}function Ju(a,e,t){return a[0]=Math.min(e[0],t[0]),a[1]=Math.min(e[1],t[1]),a}function eh(a,e,t){return a[0]=Math.max(e[0],t[0]),a[1]=Math.max(e[1],t[1]),a}var vp=(function(){function a(e,t){this.target=e,this.topTarget=t&&t.topTarget}return a})(),Nxe=(function(){function a(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return a.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new vp(t,e),"dragstart",e.event))},a.prototype._drag=function(e){var t=this._draggingTarget;if(t){var r=e.offsetX,n=e.offsetY,i=r-this._x,l=n-this._y;this._x=r,this._y=n,t.drift(i,l,e),this.handler.dispatchToElement(new vp(t,e),"drag",e.event);var o=this.handler.findHover(r,n,t).target,c=this._dropTarget;this._dropTarget=o,t!==o&&(c&&o!==c&&this.handler.dispatchToElement(new vp(c,e),"dragleave",e.event),o&&o!==c&&this.handler.dispatchToElement(new vp(o,e),"dragenter",e.event))}},a.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new vp(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new vp(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},a})(),co=(function(){function a(e){e&&(this._$eventProcessor=e)}return a.prototype.on=function(e,t,r,n){this._$handlers||(this._$handlers={});var i=this._$handlers;if(typeof t=="function"&&(n=r,r=t,t=null),!r||!e)return this;var l=this._$eventProcessor;t!=null&&l&&l.normalizeQuery&&(t=l.normalizeQuery(t)),i[e]||(i[e]=[]);for(var o=0;o<i[e].length;o++)if(i[e][o].h===r)return this;var c={h:r,query:t,ctx:n||this,callAtLast:r.zrEventfulCallAtLast},d=i[e].length-1,u=i[e][d];return u&&u.callAtLast?i[e].splice(d,0,c):i[e].push(c),this},a.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},a.prototype.off=function(e,t){var r=this._$handlers;if(!r)return this;if(!e)return this._$handlers={},this;if(t){if(r[e]){for(var n=[],i=0,l=r[e].length;i<l;i++)r[e][i].h!==t&&n.push(r[e][i]);r[e]=n}r[e]&&r[e].length===0&&delete r[e]}else delete r[e];return this},a.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var n=this._$handlers[e],i=this._$eventProcessor;if(n)for(var l=t.length,o=n.length,c=0;c<o;c++){var d=n[c];if(!(i&&i.filter&&d.query!=null&&!i.filter(e,d.query)))switch(l){case 0:d.h.call(d.ctx);break;case 1:d.h.call(d.ctx,t[0]);break;case 2:d.h.call(d.ctx,t[0],t[1]);break;default:d.h.apply(d.ctx,t);break}}return i&&i.afterTrigger&&i.afterTrigger(e),this},a.prototype.triggerWithContext=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var n=this._$handlers[e],i=this._$eventProcessor;if(n)for(var l=t.length,o=t[l-1],c=n.length,d=0;d<c;d++){var u=n[d];if(!(i&&i.filter&&u.query!=null&&!i.filter(e,u.query)))switch(l){case 0:u.h.call(o);break;case 1:u.h.call(o,t[0]);break;case 2:u.h.call(o,t[0],t[1]);break;default:u.h.apply(o,t.slice(1,l-1));break}}return i&&i.afterTrigger&&i.afterTrigger(e),this},a})(),jxe=Math.log(2);function j4(a,e,t,r,n,i){var l=r+"-"+n,o=a.length;if(i.hasOwnProperty(l))return i[l];if(e===1){var c=Math.round(Math.log((1<<o)-1&~n)/jxe);return a[t][c]}for(var d=r|1<<t,u=t+1;r&1<<u;)u++;for(var h=0,f=0,p=0;f<o;f++){var g=1<<f;g&n||(h+=(p%2?-1:1)*a[t][f]*j4(a,e-1,u,d,n|g,i),p++)}return i[l]=h,h}function oO(a,e){var t=[[a[0],a[1],1,0,0,0,-e[0]*a[0],-e[0]*a[1]],[0,0,0,a[0],a[1],1,-e[1]*a[0],-e[1]*a[1]],[a[2],a[3],1,0,0,0,-e[2]*a[2],-e[2]*a[3]],[0,0,0,a[2],a[3],1,-e[3]*a[2],-e[3]*a[3]],[a[4],a[5],1,0,0,0,-e[4]*a[4],-e[4]*a[5]],[0,0,0,a[4],a[5],1,-e[5]*a[4],-e[5]*a[5]],[a[6],a[7],1,0,0,0,-e[6]*a[6],-e[6]*a[7]],[0,0,0,a[6],a[7],1,-e[7]*a[6],-e[7]*a[7]]],r={},n=j4(t,8,0,0,0,r);if(n!==0){for(var i=[],l=0;l<8;l++)for(var o=0;o<8;o++)i[o]==null&&(i[o]=0),i[o]+=((l+o)%2?-1:1)*j4(t,7,l===0?1:0,1<<l,1<<o,r)/n*e[l];return function(c,d,u){var h=d*i[6]+u*i[7]+1;c[0]=(d*i[0]+u*i[1]+i[2])/h,c[1]=(d*i[3]+u*i[4]+i[5])/h}}}var A2="___zrEVENTSAVED",l5=[];function Sxe(a,e,t,r,n){return S4(l5,e,r,n,!0)&&S4(a,t,l5[0],l5[1])}function kxe(a,e){a&&t(a),e&&t(e);function t(r){var n=r[A2];n&&(n.clearMarkers&&n.clearMarkers(),delete r[A2])}}function S4(a,e,t,r,n){if(e.getBoundingClientRect&&Ba.domSupported&&!LG(e)){var i=e[A2]||(e[A2]={}),l=Cxe(e,i),o=Axe(l,i,n);if(o)return o(a,t,r),!0}return!1}function Cxe(a,e){var t=e.markers;if(t)return t;t=e.markers=[];for(var r=["left","right"],n=["top","bottom"],i=0;i<4;i++){var l=document.createElement("div"),o=l.style,c=i%2,d=(i>>1)%2;o.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[c]+":0",n[d]+":0",r[1-c]+":auto",n[1-d]+":auto",""].join("!important;"),a.appendChild(l),t.push(l)}return e.clearMarkers=function(){se(t,function(u){u.parentNode&&u.parentNode.removeChild(u)})},t}function Axe(a,e,t){for(var r=t?"invTrans":"trans",n=e[r],i=e.srcCoords,l=[],o=[],c=!0,d=0;d<4;d++){var u=a[d].getBoundingClientRect(),h=2*d,f=u.left,p=u.top;l.push(f,p),c=c&&i&&f===i[h]&&p===i[h+1],o.push(a[d].offsetLeft,a[d].offsetTop)}return c&&n?n:(e.srcCoords=l,e[r]=t?oO(o,l):oO(l,o))}function LG(a){return a.nodeName.toUpperCase()==="CANVAS"}var Txe=/([&<>"'])/g,Mxe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ss(a){return a==null?"":(a+"").replace(Txe,function(e,t){return Mxe[t]})}var Exe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,o5=[],Dxe=Ba.browser.firefox&&+Ba.browser.version.split(".")[0]<39;function k4(a,e,t,r){return t=t||{},r?cO(a,e,t):Dxe&&e.layerX!=null&&e.layerX!==e.offsetX?(t.zrX=e.layerX,t.zrY=e.layerY):e.offsetX!=null?(t.zrX=e.offsetX,t.zrY=e.offsetY):cO(a,e,t),t}function cO(a,e,t){if(Ba.domSupported&&a.getBoundingClientRect){var r=e.clientX,n=e.clientY;if(LG(a)){var i=a.getBoundingClientRect();t.zrX=r-i.left,t.zrY=n-i.top;return}else if(S4(o5,a,r,n)){t.zrX=o5[0],t.zrY=o5[1];return}}t.zrX=t.zrY=0}function RT(a){return a||window.event}function Wl(a,e,t){if(e=RT(e),e.zrX!=null)return e;var r=e.type,n=r&&r.indexOf("touch")>=0;if(n){var l=r!=="touchend"?e.targetTouches[0]:e.changedTouches[0];l&&k4(a,l,e,t)}else{k4(a,e,e,t);var i=Ixe(e);e.zrDelta=i?i/120:-(e.detail||0)/3}var o=e.button;return e.which==null&&o!==void 0&&Exe.test(e.type)&&(e.which=o&1?1:o&2?3:o&4?2:0),e}function Ixe(a){var e=a.wheelDelta;if(e)return e;var t=a.deltaX,r=a.deltaY;if(t==null||r==null)return e;var n=Math.abs(r!==0?r:t),i=r>0?-1:r<0?1:t>0?-1:1;return 3*n*i}function C4(a,e,t,r){a.addEventListener(e,t,r)}function Rxe(a,e,t,r){a.removeEventListener(e,t,r)}var Od=function(a){a.preventDefault(),a.stopPropagation(),a.cancelBubble=!0};function dO(a){return a.which===2||a.which===3}var Lxe=(function(){function a(){this._track=[]}return a.prototype.recognize=function(e,t,r){return this._doTrack(e,t,r),this._recognize(e)},a.prototype.clear=function(){return this._track.length=0,this},a.prototype._doTrack=function(e,t,r){var n=e.touches;if(n){for(var i={points:[],touches:[],target:t,event:e},l=0,o=n.length;l<o;l++){var c=n[l],d=k4(r,c,{});i.points.push([d.zrX,d.zrY]),i.touches.push(c)}this._track.push(i)}},a.prototype._recognize=function(e){for(var t in c5)if(c5.hasOwnProperty(t)){var r=c5[t](this._track,e);if(r)return r}},a})();function uO(a){var e=a[1][0]-a[0][0],t=a[1][1]-a[0][1];return Math.sqrt(e*e+t*t)}function Oxe(a){return[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]}var c5={pinch:function(a,e){var t=a.length;if(t){var r=(a[t-1]||{}).points,n=(a[t-2]||{}).points||r;if(n&&n.length>1&&r&&r.length>1){var i=uO(r)/uO(n);!isFinite(i)&&(i=1),e.pinchScale=i;var l=Oxe(r);return e.pinchX=l[0],e.pinchY=l[1],{type:"pinch",target:a[0].target,event:e}}}}};function Li(){return[1,0,0,1,0,0]}function lN(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a}function oN(a,e){return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[4]=e[4],a[5]=e[5],a}function Sc(a,e,t){var r=e[0]*t[0]+e[2]*t[1],n=e[1]*t[0]+e[3]*t[1],i=e[0]*t[2]+e[2]*t[3],l=e[1]*t[2]+e[3]*t[3],o=e[0]*t[4]+e[2]*t[5]+e[4],c=e[1]*t[4]+e[3]*t[5]+e[5];return a[0]=r,a[1]=n,a[2]=i,a[3]=l,a[4]=o,a[5]=c,a}function Ec(a,e,t){return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[4]=e[4]+t[0],a[5]=e[5]+t[1],a}function Mh(a,e,t,r){r===void 0&&(r=[0,0]);var n=e[0],i=e[2],l=e[4],o=e[1],c=e[3],d=e[5],u=Math.sin(t),h=Math.cos(t);return a[0]=n*h+o*u,a[1]=-n*u+o*h,a[2]=i*h+c*u,a[3]=-i*u+h*c,a[4]=h*(l-r[0])+u*(d-r[1])+r[0],a[5]=h*(d-r[1])-u*(l-r[0])+r[1],a}function LT(a,e,t){var r=t[0],n=t[1];return a[0]=e[0]*r,a[1]=e[1]*n,a[2]=e[2]*r,a[3]=e[3]*n,a[4]=e[4]*r,a[5]=e[5]*n,a}function Io(a,e){var t=e[0],r=e[2],n=e[4],i=e[1],l=e[3],o=e[5],c=t*l-i*r;return c?(c=1/c,a[0]=l*c,a[1]=-i*c,a[2]=-r*c,a[3]=t*c,a[4]=(r*o-l*n)*c,a[5]=(i*n-t*o)*c,a):null}function Pxe(a){var e=Li();return oN(e,a),e}var Qt=(function(){function a(e,t){this.x=e||0,this.y=t||0}return a.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.set=function(e,t){return this.x=e,this.y=t,this},a.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},a.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},a.prototype.scale=function(e){this.x*=e,this.y*=e},a.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},a.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},a.prototype.dot=function(e){return this.x*e.x+this.y*e.y},a.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},a.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},a.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},a.prototype.distance=function(e){var t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)},a.prototype.distanceSquare=function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},a.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},a.prototype.transform=function(e){if(e){var t=this.x,r=this.y;return this.x=e[0]*t+e[2]*r+e[4],this.y=e[1]*t+e[3]*r+e[5],this}},a.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},a.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},a.set=function(e,t,r){e.x=t,e.y=r},a.copy=function(e,t){e.x=t.x,e.y=t.y},a.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},a.lenSquare=function(e){return e.x*e.x+e.y*e.y},a.dot=function(e,t){return e.x*t.x+e.y*t.y},a.add=function(e,t,r){e.x=t.x+r.x,e.y=t.y+r.y},a.sub=function(e,t,r){e.x=t.x-r.x,e.y=t.y-r.y},a.scale=function(e,t,r){e.x=t.x*r,e.y=t.y*r},a.scaleAndAdd=function(e,t,r,n){e.x=t.x+r.x*n,e.y=t.y+r.y*n},a.lerp=function(e,t,r,n){var i=1-n;e.x=i*t.x+n*r.x,e.y=i*t.y+n*r.y},a})(),qf=Math.min,Qp=Math.max,A4=Math.abs,hO=["x","y"],zxe=["width","height"],nf=new Qt,sf=new Qt,lf=new Qt,of=new Qt,yl=OG(),Fg=yl.minTv,T4=yl.maxTv,sv=[0,0],ra=(function(){function a(e,t,r,n){a.set(this,e,t,r,n)}return a.set=function(e,t,r,n,i){return n<0&&(t=t+n,n=-n),i<0&&(r=r+i,i=-i),e.x=t,e.y=r,e.width=n,e.height=i,e},a.prototype.union=function(e){var t=qf(e.x,this.x),r=qf(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Qp(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=Qp(e.y+e.height,this.y+this.height)-r:this.height=e.height,this.x=t,this.y=r},a.prototype.applyTransform=function(e){a.applyTransform(this,this,e)},a.prototype.calculateTransform=function(e){var t=this,r=e.width/t.width,n=e.height/t.height,i=Li();return Ec(i,i,[-t.x,-t.y]),LT(i,i,[r,n]),Ec(i,i,[e.x,e.y]),i},a.prototype.intersect=function(e,t,r){return a.intersect(this,e,t,r)},a.intersect=function(e,t,r,n){r&&Qt.set(r,0,0);var i=n&&n.outIntersectRect||null,l=n&&n.clamp;if(i&&(i.x=i.y=i.width=i.height=NaN),!e||!t)return!1;e instanceof a||(e=a.set(Bxe,e.x,e.y,e.width,e.height)),t instanceof a||(t=a.set(Fxe,t.x,t.y,t.width,t.height));var o=!!r;yl.reset(n,o);var c=yl.touchThreshold,d=e.x+c,u=e.x+e.width-c,h=e.y+c,f=e.y+e.height-c,p=t.x+c,g=t.x+t.width-c,b=t.y+c,w=t.y+t.height-c;if(d>u||h>f||p>g||b>w)return!1;var j=!(u<p||g<d||f<b||w<h);return(o||i)&&(sv[0]=1/0,sv[1]=0,fO(d,u,p,g,0,o,i,l),fO(h,f,b,w,1,o,i,l),o&&Qt.copy(r,j?yl.useDir?yl.dirMinTv:Fg:T4)),j},a.contain=function(e,t,r){return t>=e.x&&t<=e.x+e.width&&r>=e.y&&r<=e.y+e.height},a.prototype.contain=function(e,t){return a.contain(this,e,t)},a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.copy=function(e){a.copy(this,e)},a.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},a.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},a.prototype.isZero=function(){return this.width===0||this.height===0},a.create=function(e){return new a(e.x,e.y,e.width,e.height)},a.copy=function(e,t){return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e},a.applyTransform=function(e,t,r){if(!r){e!==t&&a.copy(e,t);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var n=r[0],i=r[3],l=r[4],o=r[5];e.x=t.x*n+l,e.y=t.y*i+o,e.width=t.width*n,e.height=t.height*i,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}nf.x=lf.x=t.x,nf.y=of.y=t.y,sf.x=of.x=t.x+t.width,sf.y=lf.y=t.y+t.height,nf.transform(r),of.transform(r),sf.transform(r),lf.transform(r),e.x=qf(nf.x,sf.x,lf.x,of.x),e.y=qf(nf.y,sf.y,lf.y,of.y);var c=Qp(nf.x,sf.x,lf.x,of.x),d=Qp(nf.y,sf.y,lf.y,of.y);e.width=c-e.x,e.height=d-e.y},a})(),Bxe=new ra(0,0,0,0),Fxe=new ra(0,0,0,0);function fO(a,e,t,r,n,i,l,o){var c=A4(e-t),d=A4(r-a),u=qf(c,d),h=hO[n],f=hO[1-n],p=zxe[n];e<t||r<a?c<d?(i&&(T4[h]=-c),o&&(l[h]=e,l[p]=0)):(i&&(T4[h]=d),o&&(l[h]=a,l[p]=0)):(l&&(l[h]=Qp(a,t),l[p]=qf(e,r)-l[h]),i&&(u<sv[0]||yl.useDir)&&(sv[0]=qf(u,sv[0]),(c<d||!yl.bidirectional)&&(Fg[h]=c,Fg[f]=0,yl.useDir&&yl.calcDirMTV()),(c>=d||!yl.bidirectional)&&(Fg[h]=-d,Fg[f]=0,yl.useDir&&yl.calcDirMTV())))}function OG(){var a=0,e=new Qt,t=new Qt,r={minTv:new Qt,maxTv:new Qt,useDir:!1,dirMinTv:new Qt,touchThreshold:0,bidirectional:!0,negativeSize:!1,reset:function(i,l){r.touchThreshold=0,i&&i.touchThreshold!=null&&(r.touchThreshold=Qp(0,i.touchThreshold)),r.negativeSize=!1,l&&(r.minTv.set(1/0,1/0),r.maxTv.set(0,0),r.useDir=!1,i&&i.direction!=null&&(r.useDir=!0,r.dirMinTv.copy(r.minTv),t.copy(r.minTv),a=i.direction,r.bidirectional=i.bidirectional==null||!!i.bidirectional,r.bidirectional||e.set(Math.cos(a),Math.sin(a))))},calcDirMTV:function(){var i=r.minTv,l=r.dirMinTv,o=i.y*i.y+i.x*i.x,c=Math.sin(a),d=Math.cos(a),u=c*i.y+d*i.x;if(n(u)){n(i.x)&&n(i.y)&&l.set(0,0);return}if(t.x=o*d/u,t.y=o*c/u,n(t.x)&&n(t.y)){l.set(0,0);return}(r.bidirectional||e.dot(t)>0)&&t.len()<l.len()&&l.copy(t)}};function n(i){return A4(i)<1e-10}return r}var PG="silent";function Vxe(a,e,t){return{type:a,event:t,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:t.zrX,offsetY:t.zrY,gestureEvent:t.gestureEvent,pinchX:t.pinchX,pinchY:t.pinchY,pinchScale:t.pinchScale,wheelDelta:t.zrDelta,zrByTouch:t.zrByTouch,which:t.which,stop:Hxe}}function Hxe(){Od(this.event)}var Uxe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.handler=null,t}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e})(co),Zm=(function(){function a(e,t){this.x=e,this.y=t}return a})(),Gxe=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],d5=new ra(0,0,0,0),zG=(function(a){Ie(e,a);function e(t,r,n,i,l){var o=a.call(this)||this;return o._hovered=new Zm(0,0),o.storage=t,o.painter=r,o.painterRoot=i,o._pointerSize=l,n=n||new Uxe,o.proxy=null,o.setHandlerProxy(n),o._draggingMgr=new Nxe(o),o}return e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(se(Gxe,function(r){t.on&&t.on(r,this[r],this)},this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var r=t.zrX,n=t.zrY,i=BG(this,r,n),l=this._hovered,o=l.target;o&&!o.__zr&&(l=this.findHover(l.x,l.y),o=l.target);var c=this._hovered=i?new Zm(r,n):this.findHover(r,n),d=c.target,u=this.proxy;u.setCursor&&u.setCursor(d?d.cursor:"default"),o&&d!==o&&this.dispatchToElement(l,"mouseout",t),this.dispatchToElement(c,"mousemove",t),d&&d!==o&&this.dispatchToElement(c,"mouseover",t)},e.prototype.mouseout=function(t){var r=t.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",t),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new Zm(0,0)},e.prototype.dispatch=function(t,r){var n=this[t];n&&n.call(this,r)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var r=this.proxy;r.setCursor&&r.setCursor(t)},e.prototype.dispatchToElement=function(t,r,n){t=t||{};var i=t.target;if(!(i&&i.silent)){for(var l="on"+r,o=Vxe(r,t,n);i&&(i[l]&&(o.cancelBubble=!!i[l].call(i,o)),i.trigger(r,o),i=i.__hostTarget?i.__hostTarget:i.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(r,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(c){typeof c[l]=="function"&&c[l].call(c,o),c.trigger&&c.trigger(r,o)}))}},e.prototype.findHover=function(t,r,n){var i=this.storage.getDisplayList(),l=new Zm(t,r);if(pO(i,l,t,r,n),this._pointerSize&&!l.target){for(var o=[],c=this._pointerSize,d=c/2,u=new ra(t-d,r-d,c,c),h=i.length-1;h>=0;h--){var f=i[h];f!==n&&!f.ignore&&!f.ignoreCoarsePointer&&(!f.parent||!f.parent.ignoreCoarsePointer)&&(d5.copy(f.getBoundingRect()),f.transform&&d5.applyTransform(f.transform),d5.intersect(u)&&o.push(f))}if(o.length)for(var p=4,g=Math.PI/12,b=Math.PI*2,w=0;w<d;w+=p)for(var j=0;j<b;j+=g){var k=t+w*Math.cos(j),T=r+w*Math.sin(j);if(pO(o,l,k,T,n),l.target)return l}}return l},e.prototype.processGesture=function(t,r){this._gestureMgr||(this._gestureMgr=new Lxe);var n=this._gestureMgr;r==="start"&&n.clear();var i=n.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if(r==="end"&&n.clear(),i){var l=i.type;t.gestureEvent=l;var o=new Zm;o.target=i.target,this.dispatchToElement(o,l,i.event)}},e})(co);se(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(a){zG.prototype[a]=function(e){var t=e.zrX,r=e.zrY,n=BG(this,t,r),i,l;if((a!=="mouseup"||!n)&&(i=this.findHover(t,r),l=i.target),a==="mousedown")this._downEl=l,this._downPoint=[e.zrX,e.zrY],this._upEl=l;else if(a==="mouseup")this._upEl=l;else if(a==="click"){if(this._downEl!==this._upEl||!this._downPoint||Qu(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(i,a,e)}});function Wxe(a,e,t){if(a[a.rectHover?"rectContain":"contain"](e,t)){for(var r=a,n=void 0,i=!1;r;){if(r.ignoreClip&&(i=!0),!i){var l=r.getClipPath();if(l&&!l.contain(e,t))return!1}r.silent&&(n=!0);var o=r.__hostTarget;r=o?r.ignoreHostSilent?null:o:r.parent}return n?PG:!0}return!1}function pO(a,e,t,r,n){for(var i=a.length-1;i>=0;i--){var l=a[i],o=void 0;if(l!==n&&!l.ignore&&(o=Wxe(l,t,r))&&(!e.topTarget&&(e.topTarget=l),o!==PG)){e.target=l;break}}}function BG(a,e,t){var r=a.painter;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var FG=32,Km=7;function Yxe(a){for(var e=0;a>=FG;)e|=a&1,a>>=1;return a+e}function xO(a,e,t,r){var n=e+1;if(n===t)return 1;if(r(a[n++],a[e])<0){for(;n<t&&r(a[n],a[n-1])<0;)n++;$xe(a,e,n)}else for(;n<t&&r(a[n],a[n-1])>=0;)n++;return n-e}function $xe(a,e,t){for(t--;e<t;){var r=a[e];a[e++]=a[t],a[t--]=r}}function mO(a,e,t,r,n){for(r===e&&r++;r<t;r++){for(var i=a[r],l=e,o=r,c;l<o;)c=l+o>>>1,n(i,a[c])<0?o=c:l=c+1;var d=r-l;switch(d){case 3:a[l+3]=a[l+2];case 2:a[l+2]=a[l+1];case 1:a[l+1]=a[l];break;default:for(;d>0;)a[l+d]=a[l+d-1],d--}a[l]=i}}function u5(a,e,t,r,n,i){var l=0,o=0,c=1;if(i(a,e[t+n])>0){for(o=r-n;c<o&&i(a,e[t+n+c])>0;)l=c,c=(c<<1)+1,c<=0&&(c=o);c>o&&(c=o),l+=n,c+=n}else{for(o=n+1;c<o&&i(a,e[t+n-c])<=0;)l=c,c=(c<<1)+1,c<=0&&(c=o);c>o&&(c=o);var d=l;l=n-c,c=n-d}for(l++;l<c;){var u=l+(c-l>>>1);i(a,e[t+u])>0?l=u+1:c=u}return c}function h5(a,e,t,r,n,i){var l=0,o=0,c=1;if(i(a,e[t+n])<0){for(o=n+1;c<o&&i(a,e[t+n-c])<0;)l=c,c=(c<<1)+1,c<=0&&(c=o);c>o&&(c=o);var d=l;l=n-c,c=n-d}else{for(o=r-n;c<o&&i(a,e[t+n+c])>=0;)l=c,c=(c<<1)+1,c<=0&&(c=o);c>o&&(c=o),l+=n,c+=n}for(l++;l<c;){var u=l+(c-l>>>1);i(a,e[t+u])<0?c=u:l=u+1}return c}function qxe(a,e){var t=Km,r,n,i=0,l=[];r=[],n=[];function o(p,g){r[i]=p,n[i]=g,i+=1}function c(){for(;i>1;){var p=i-2;if(p>=1&&n[p-1]<=n[p]+n[p+1]||p>=2&&n[p-2]<=n[p]+n[p-1])n[p-1]<n[p+1]&&p--;else if(n[p]>n[p+1])break;u(p)}}function d(){for(;i>1;){var p=i-2;p>0&&n[p-1]<n[p+1]&&p--,u(p)}}function u(p){var g=r[p],b=n[p],w=r[p+1],j=n[p+1];n[p]=b+j,p===i-3&&(r[p+1]=r[p+2],n[p+1]=n[p+2]),i--;var k=h5(a[w],a,g,b,0,e);g+=k,b-=k,b!==0&&(j=u5(a[g+b-1],a,w,j,j-1,e),j!==0&&(b<=j?h(g,b,w,j):f(g,b,w,j)))}function h(p,g,b,w){var j=0;for(j=0;j<g;j++)l[j]=a[p+j];var k=0,T=b,E=p;if(a[E++]=a[T++],--w===0){for(j=0;j<g;j++)a[E+j]=l[k+j];return}if(g===1){for(j=0;j<w;j++)a[E+j]=a[T+j];a[E+w]=l[k];return}for(var I=t,R,P,H;;){R=0,P=0,H=!1;do if(e(a[T],l[k])<0){if(a[E++]=a[T++],P++,R=0,--w===0){H=!0;break}}else if(a[E++]=l[k++],R++,P=0,--g===1){H=!0;break}while((R|P)<I);if(H)break;do{if(R=h5(a[T],l,k,g,0,e),R!==0){for(j=0;j<R;j++)a[E+j]=l[k+j];if(E+=R,k+=R,g-=R,g<=1){H=!0;break}}if(a[E++]=a[T++],--w===0){H=!0;break}if(P=u5(l[k],a,T,w,0,e),P!==0){for(j=0;j<P;j++)a[E+j]=a[T+j];if(E+=P,T+=P,w-=P,w===0){H=!0;break}}if(a[E++]=l[k++],--g===1){H=!0;break}I--}while(R>=Km||P>=Km);if(H)break;I<0&&(I=0),I+=2}if(t=I,t<1&&(t=1),g===1){for(j=0;j<w;j++)a[E+j]=a[T+j];a[E+w]=l[k]}else{if(g===0)throw new Error;for(j=0;j<g;j++)a[E+j]=l[k+j]}}function f(p,g,b,w){var j=0;for(j=0;j<w;j++)l[j]=a[b+j];var k=p+g-1,T=w-1,E=b+w-1,I=0,R=0;if(a[E--]=a[k--],--g===0){for(I=E-(w-1),j=0;j<w;j++)a[I+j]=l[j];return}if(w===1){for(E-=g,k-=g,R=E+1,I=k+1,j=g-1;j>=0;j--)a[R+j]=a[I+j];a[E]=l[T];return}for(var P=t;;){var H=0,G=0,X=!1;do if(e(l[T],a[k])<0){if(a[E--]=a[k--],H++,G=0,--g===0){X=!0;break}}else if(a[E--]=l[T--],G++,H=0,--w===1){X=!0;break}while((H|G)<P);if(X)break;do{if(H=g-h5(l[T],a,p,g,g-1,e),H!==0){for(E-=H,k-=H,g-=H,R=E+1,I=k+1,j=H-1;j>=0;j--)a[R+j]=a[I+j];if(g===0){X=!0;break}}if(a[E--]=l[T--],--w===1){X=!0;break}if(G=w-u5(a[k],l,0,w,w-1,e),G!==0){for(E-=G,T-=G,w-=G,R=E+1,I=T+1,j=0;j<G;j++)a[R+j]=l[I+j];if(w<=1){X=!0;break}}if(a[E--]=a[k--],--g===0){X=!0;break}P--}while(H>=Km||G>=Km);if(X)break;P<0&&(P=0),P+=2}if(t=P,t<1&&(t=1),w===1){for(E-=g,k-=g,R=E+1,I=k+1,j=g-1;j>=0;j--)a[R+j]=a[I+j];a[E]=l[T]}else{if(w===0)throw new Error;for(I=E-(w-1),j=0;j<w;j++)a[I+j]=l[j]}}return{mergeRuns:c,forceMergeRuns:d,pushRun:o}}function Pw(a,e,t,r){t||(t=0),r||(r=a.length);var n=r-t;if(!(n<2)){var i=0;if(n<FG){i=xO(a,t,r,e),mO(a,t,r,t+i,e);return}var l=qxe(a,e),o=Yxe(n);do{if(i=xO(a,t,r,e),i<o){var c=n;c>o&&(c=o),mO(a,t,t+c,t+i,e),i=c}l.pushRun(t,i),l.mergeRuns(),n-=i,t+=i}while(n!==0);l.forceMergeRuns()}}var wl=1,Vg=2,Wp=4,gO=!1;function f5(){gO||(gO=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function vO(a,e){return a.zlevel===e.zlevel?a.z===e.z?a.z2-e.z2:a.z-e.z:a.zlevel-e.zlevel}var Xxe=(function(){function a(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=vO}return a.prototype.traverse=function(e,t){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(e,t)},a.prototype.getDisplayList=function(e,t){t=t||!1;var r=this._displayList;return(e||!r.length)&&this.updateDisplayList(t),r},a.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,r=this._displayList,n=0,i=t.length;n<i;n++)this._updateAndAddDisplayable(t[n],null,e);r.length=this._displayListLen,Pw(r,vO)},a.prototype._updateAndAddDisplayable=function(e,t,r){if(!(e.ignore&&!r)){e.beforeUpdate(),e.update(),e.afterUpdate();var n=e.getClipPath(),i=t&&t.length,l=0,o=e.__clipPaths;if(!e.ignoreClip&&(i||n)){if(o||(o=e.__clipPaths=[]),i)for(var c=0;c<t.length;c++)o[l++]=t[c];for(var d=n,u=e;d;)d.parent=u,d.updateTransform(),o[l++]=d,u=d,d=d.getClipPath()}if(o&&(o.length=l),e.childrenRef){for(var h=e.childrenRef(),f=0;f<h.length;f++){var p=h[f];e.__dirty&&(p.__dirty|=wl),this._updateAndAddDisplayable(p,o,r)}e.__dirty=0}else{var g=e;isNaN(g.z)&&(f5(),g.z=0),isNaN(g.z2)&&(f5(),g.z2=0),isNaN(g.zlevel)&&(f5(),g.zlevel=0),this._displayList[this._displayListLen++]=g}var b=e.getDecalElement&&e.getDecalElement();b&&this._updateAndAddDisplayable(b,o,r);var w=e.getTextGuideLine();w&&this._updateAndAddDisplayable(w,o,r);var j=e.getTextContent();j&&this._updateAndAddDisplayable(j,o,r)}},a.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},a.prototype.delRoot=function(e){if(e instanceof Array){for(var t=0,r=e.length;t<r;t++)this.delRoot(e[t]);return}var n=ja(this._roots,e);n>=0&&this._roots.splice(n,1)},a.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},a.prototype.getRoots=function(){return this._roots},a.prototype.dispose=function(){this._displayList=null,this._roots=null},a})(),T2;T2=Ba.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(a){return setTimeout(a,16)};var lv={linear:function(a){return a},quadraticIn:function(a){return a*a},quadraticOut:function(a){return a*(2-a)},quadraticInOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)},cubicIn:function(a){return a*a*a},cubicOut:function(a){return--a*a*a+1},cubicInOut:function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},quarticIn:function(a){return a*a*a*a},quarticOut:function(a){return 1- --a*a*a*a},quarticInOut:function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},quinticIn:function(a){return a*a*a*a*a},quinticOut:function(a){return--a*a*a*a*a+1},quinticInOut:function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},sinusoidalIn:function(a){return 1-Math.cos(a*Math.PI/2)},sinusoidalOut:function(a){return Math.sin(a*Math.PI/2)},sinusoidalInOut:function(a){return .5*(1-Math.cos(Math.PI*a))},exponentialIn:function(a){return a===0?0:Math.pow(1024,a-1)},exponentialOut:function(a){return a===1?1:1-Math.pow(2,-10*a)},exponentialInOut:function(a){return a===0?0:a===1?1:(a*=2)<1?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)},circularIn:function(a){return 1-Math.sqrt(1-a*a)},circularOut:function(a){return Math.sqrt(1- --a*a)},circularInOut:function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},elasticIn:function(a){var e,t=.1,r=.4;return a===0?0:a===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(a-=1))*Math.sin((a-e)*(2*Math.PI)/r)))},elasticOut:function(a){var e,t=.1,r=.4;return a===0?0:a===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*a)*Math.sin((a-e)*(2*Math.PI)/r)+1)},elasticInOut:function(a){var e,t=.1,r=.4;return a===0?0:a===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),(a*=2)<1?-.5*(t*Math.pow(2,10*(a-=1))*Math.sin((a-e)*(2*Math.PI)/r)):t*Math.pow(2,-10*(a-=1))*Math.sin((a-e)*(2*Math.PI)/r)*.5+1)},backIn:function(a){var e=1.70158;return a*a*((e+1)*a-e)},backOut:function(a){var e=1.70158;return--a*a*((e+1)*a+e)+1},backInOut:function(a){var e=2.5949095;return(a*=2)<1?.5*(a*a*((e+1)*a-e)):.5*((a-=2)*a*((e+1)*a+e)+2)},bounceIn:function(a){return 1-lv.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},bounceInOut:function(a){return a<.5?lv.bounceIn(a*2)*.5:lv.bounceOut(a*2-1)*.5+.5}},uy=Math.pow,oh=Math.sqrt,M2=1e-8,VG=1e-4,bO=oh(3),hy=1/3,hc=D0(),Zl=D0(),dx=D0();function th(a){return a>-M2&&a<M2}function HG(a){return a>M2||a<-M2}function bi(a,e,t,r,n){var i=1-n;return i*i*(i*a+3*n*e)+n*n*(n*r+3*i*t)}function yO(a,e,t,r,n){var i=1-n;return 3*(((e-a)*i+2*(t-e)*n)*i+(r-t)*n*n)}function E2(a,e,t,r,n,i){var l=r+3*(e-t)-a,o=3*(t-e*2+a),c=3*(e-a),d=a-n,u=o*o-3*l*c,h=o*c-9*l*d,f=c*c-3*o*d,p=0;if(th(u)&&th(h))if(th(o))i[0]=0;else{var g=-c/o;g>=0&&g<=1&&(i[p++]=g)}else{var b=h*h-4*u*f;if(th(b)){var w=h/u,g=-o/l+w,j=-w/2;g>=0&&g<=1&&(i[p++]=g),j>=0&&j<=1&&(i[p++]=j)}else if(b>0){var k=oh(b),T=u*o+1.5*l*(-h+k),E=u*o+1.5*l*(-h-k);T<0?T=-uy(-T,hy):T=uy(T,hy),E<0?E=-uy(-E,hy):E=uy(E,hy);var g=(-o-(T+E))/(3*l);g>=0&&g<=1&&(i[p++]=g)}else{var I=(2*u*o-3*l*h)/(2*oh(u*u*u)),R=Math.acos(I)/3,P=oh(u),H=Math.cos(R),g=(-o-2*P*H)/(3*l),j=(-o+P*(H+bO*Math.sin(R)))/(3*l),G=(-o+P*(H-bO*Math.sin(R)))/(3*l);g>=0&&g<=1&&(i[p++]=g),j>=0&&j<=1&&(i[p++]=j),G>=0&&G<=1&&(i[p++]=G)}}return p}function UG(a,e,t,r,n){var i=6*t-12*e+6*a,l=9*e+3*r-3*a-9*t,o=3*e-3*a,c=0;if(th(l)){if(HG(i)){var d=-o/i;d>=0&&d<=1&&(n[c++]=d)}}else{var u=i*i-4*l*o;if(th(u))n[0]=-i/(2*l);else if(u>0){var h=oh(u),d=(-i+h)/(2*l),f=(-i-h)/(2*l);d>=0&&d<=1&&(n[c++]=d),f>=0&&f<=1&&(n[c++]=f)}}return c}function yh(a,e,t,r,n,i){var l=(e-a)*n+a,o=(t-e)*n+e,c=(r-t)*n+t,d=(o-l)*n+l,u=(c-o)*n+o,h=(u-d)*n+d;i[0]=a,i[1]=l,i[2]=d,i[3]=h,i[4]=h,i[5]=u,i[6]=c,i[7]=r}function GG(a,e,t,r,n,i,l,o,c,d,u){var h,f=.005,p=1/0,g,b,w,j;hc[0]=c,hc[1]=d;for(var k=0;k<1;k+=.05)Zl[0]=bi(a,t,n,l,k),Zl[1]=bi(e,r,i,o,k),w=i0(hc,Zl),w<p&&(h=k,p=w);p=1/0;for(var T=0;T<32&&!(f<VG);T++)g=h-f,b=h+f,Zl[0]=bi(a,t,n,l,g),Zl[1]=bi(e,r,i,o,g),w=i0(Zl,hc),g>=0&&w<p?(h=g,p=w):(dx[0]=bi(a,t,n,l,b),dx[1]=bi(e,r,i,o,b),j=i0(dx,hc),b<=1&&j<p?(h=b,p=j):f*=.5);return u&&(u[0]=bi(a,t,n,l,h),u[1]=bi(e,r,i,o,h)),oh(p)}function Zxe(a,e,t,r,n,i,l,o,c){for(var d=a,u=e,h=0,f=1/c,p=1;p<=c;p++){var g=p*f,b=bi(a,t,n,l,g),w=bi(e,r,i,o,g),j=b-d,k=w-u;h+=Math.sqrt(j*j+k*k),d=b,u=w}return h}function Ei(a,e,t,r){var n=1-r;return n*(n*a+2*r*e)+r*r*t}function M4(a,e,t,r){return 2*((1-r)*(e-a)+r*(t-e))}function Kxe(a,e,t,r,n){var i=a-2*e+t,l=2*(e-a),o=a-r,c=0;if(th(i)){if(HG(l)){var d=-o/l;d>=0&&d<=1&&(n[c++]=d)}}else{var u=l*l-4*i*o;if(th(u)){var d=-l/(2*i);d>=0&&d<=1&&(n[c++]=d)}else if(u>0){var h=oh(u),d=(-l+h)/(2*i),f=(-l-h)/(2*i);d>=0&&d<=1&&(n[c++]=d),f>=0&&f<=1&&(n[c++]=f)}}return c}function WG(a,e,t){var r=a+t-2*e;return r===0?.5:(a-e)/r}function Bv(a,e,t,r,n){var i=(e-a)*r+a,l=(t-e)*r+e,o=(l-i)*r+i;n[0]=a,n[1]=i,n[2]=o,n[3]=o,n[4]=l,n[5]=t}function YG(a,e,t,r,n,i,l,o,c){var d,u=.005,h=1/0;hc[0]=l,hc[1]=o;for(var f=0;f<1;f+=.05){Zl[0]=Ei(a,t,n,f),Zl[1]=Ei(e,r,i,f);var p=i0(hc,Zl);p<h&&(d=f,h=p)}h=1/0;for(var g=0;g<32&&!(u<VG);g++){var b=d-u,w=d+u;Zl[0]=Ei(a,t,n,b),Zl[1]=Ei(e,r,i,b);var p=i0(Zl,hc);if(b>=0&&p<h)d=b,h=p;else{dx[0]=Ei(a,t,n,w),dx[1]=Ei(e,r,i,w);var j=i0(dx,hc);w<=1&&j<h?(d=w,h=j):u*=.5}}return c&&(c[0]=Ei(a,t,n,d),c[1]=Ei(e,r,i,d)),oh(h)}function Qxe(a,e,t,r,n,i,l){for(var o=a,c=e,d=0,u=1/l,h=1;h<=l;h++){var f=h*u,p=Ei(a,t,n,f),g=Ei(e,r,i,f),b=p-o,w=g-c;d+=Math.sqrt(b*b+w*w),o=p,c=g}return d}var Jxe=/cubic-bezier\(([0-9,\.e ]+)\)/;function OT(a){var e=a&&Jxe.exec(a);if(e){var t=e[1].split(","),r=+eo(t[0]),n=+eo(t[1]),i=+eo(t[2]),l=+eo(t[3]);if(isNaN(r+n+i+l))return;var o=[];return function(c){return c<=0?0:c>=1?1:E2(0,r,i,1,c,o)&&bi(0,n,l,1,o[0])}}}var eme=(function(){function a(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||Bn,this.ondestroy=e.ondestroy||Bn,this.onrestart=e.onrestart||Bn,e.easing&&this.setEasing(e.easing)}return a.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=t;return}var r=this._life,n=e-this._startTime-this._pausedTime,i=n/r;i<0&&(i=0),i=Math.min(i,1);var l=this.easingFunc,o=l?l(i):i;if(this.onframe(o),i===1)if(this.loop){var c=n%r;this._startTime=e-c,this._pausedTime=0,this.onrestart()}else return!0;return!1},a.prototype.pause=function(){this._paused=!0},a.prototype.resume=function(){this._paused=!1},a.prototype.setEasing=function(e){this.easing=e,this.easingFunc=Yt(e)?e:lv[e]||OT(e)},a})(),$G=(function(){function a(e){this.value=e}return a})(),tme=(function(){function a(){this._len=0}return a.prototype.insert=function(e){var t=new $G(e);return this.insertEntry(t),t},a.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},a.prototype.remove=function(e){var t=e.prev,r=e.next;t?t.next=r:this.head=r,r?r.prev=t:this.tail=t,e.next=e.prev=null,this._len--},a.prototype.len=function(){return this._len},a.prototype.clear=function(){this.head=this.tail=null,this._len=0},a})(),kx=(function(){function a(e){this._list=new tme,this._maxSize=10,this._map={},this._maxSize=e}return a.prototype.put=function(e,t){var r=this._list,n=this._map,i=null;if(n[e]==null){var l=r.len(),o=this._lastRemovedEntry;if(l>=this._maxSize&&l>0){var c=r.head;r.remove(c),delete n[c.key],i=c.value,this._lastRemovedEntry=c}o?o.value=t:o=new $G(t),o.key=e,r.insertEntry(o),n[e]=o}return i},a.prototype.get=function(e){var t=this._map[e],r=this._list;if(t!=null)return t!==r.tail&&(r.remove(t),r.insertEntry(t)),t.value},a.prototype.clear=function(){this._list.clear(),this._map={}},a.prototype.len=function(){return this._list.len()},a})(),wO={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ao(a){return a=Math.round(a),a<0?0:a>255?255:a}function ame(a){return a=Math.round(a),a<0?0:a>360?360:a}function Fv(a){return a<0?0:a>1?1:a}function p5(a){var e=a;return e.length&&e.charAt(e.length-1)==="%"?Ao(parseFloat(e)/100*255):Ao(parseInt(e,10))}function ch(a){var e=a;return e.length&&e.charAt(e.length-1)==="%"?Fv(parseFloat(e)/100):Fv(parseFloat(e))}function x5(a,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?a+(e-a)*t*6:t*2<1?e:t*3<2?a+(e-a)*(2/3-t)*6:a}function ah(a,e,t){return a+(e-a)*t}function Gl(a,e,t,r,n){return a[0]=e,a[1]=t,a[2]=r,a[3]=n,a}function E4(a,e){return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a}var qG=new kx(20),fy=null;function bp(a,e){fy&&E4(fy,e),fy=qG.put(a,fy||e.slice())}function Ks(a,e){if(a){e=e||[];var t=qG.get(a);if(t)return E4(e,t);a=a+"";var r=a.replace(/ /g,"").toLowerCase();if(r in wO)return E4(e,wO[r]),bp(a,e),e;var n=r.length;if(r.charAt(0)==="#"){if(n===4||n===5){var i=parseInt(r.slice(1,4),16);if(!(i>=0&&i<=4095)){Gl(e,0,0,0,1);return}return Gl(e,(i&3840)>>4|(i&3840)>>8,i&240|(i&240)>>4,i&15|(i&15)<<4,n===5?parseInt(r.slice(4),16)/15:1),bp(a,e),e}else if(n===7||n===9){var i=parseInt(r.slice(1,7),16);if(!(i>=0&&i<=16777215)){Gl(e,0,0,0,1);return}return Gl(e,(i&16711680)>>16,(i&65280)>>8,i&255,n===9?parseInt(r.slice(7),16)/255:1),bp(a,e),e}return}var l=r.indexOf("("),o=r.indexOf(")");if(l!==-1&&o+1===n){var c=r.substr(0,l),d=r.substr(l+1,o-(l+1)).split(","),u=1;switch(c){case"rgba":if(d.length!==4)return d.length===3?Gl(e,+d[0],+d[1],+d[2],1):Gl(e,0,0,0,1);u=ch(d.pop());case"rgb":if(d.length>=3)return Gl(e,p5(d[0]),p5(d[1]),p5(d[2]),d.length===3?u:ch(d[3])),bp(a,e),e;Gl(e,0,0,0,1);return;case"hsla":if(d.length!==4){Gl(e,0,0,0,1);return}return d[3]=ch(d[3]),D4(d,e),bp(a,e),e;case"hsl":if(d.length!==3){Gl(e,0,0,0,1);return}return D4(d,e),bp(a,e),e;default:return}}Gl(e,0,0,0,1)}}function D4(a,e){var t=(parseFloat(a[0])%360+360)%360/360,r=ch(a[1]),n=ch(a[2]),i=n<=.5?n*(r+1):n+r-n*r,l=n*2-i;return e=e||[],Gl(e,Ao(x5(l,i,t+1/3)*255),Ao(x5(l,i,t)*255),Ao(x5(l,i,t-1/3)*255),1),a.length===4&&(e[3]=a[3]),e}function rme(a){if(a){var e=a[0]/255,t=a[1]/255,r=a[2]/255,n=Math.min(e,t,r),i=Math.max(e,t,r),l=i-n,o=(i+n)/2,c,d;if(l===0)c=0,d=0;else{o<.5?d=l/(i+n):d=l/(2-i-n);var u=((i-e)/6+l/2)/l,h=((i-t)/6+l/2)/l,f=((i-r)/6+l/2)/l;e===i?c=f-h:t===i?c=1/3+u-f:r===i&&(c=2/3+h-u),c<0&&(c+=1),c>1&&(c-=1)}var p=[c*360,d,o];return a[3]!=null&&p.push(a[3]),p}}function I4(a,e){var t=Ks(a);if(t){for(var r=0;r<3;r++)e<0?t[r]=t[r]*(1-e)|0:t[r]=(255-t[r])*e+t[r]|0,t[r]>255?t[r]=255:t[r]<0&&(t[r]=0);return kc(t,t.length===4?"rgba":"rgb")}}function m5(a,e,t){if(!(!(e&&e.length)||!(a>=0&&a<=1))){t=t||[];var r=a*(e.length-1),n=Math.floor(r),i=Math.ceil(r),l=e[n],o=e[i],c=r-n;return t[0]=Ao(ah(l[0],o[0],c)),t[1]=Ao(ah(l[1],o[1],c)),t[2]=Ao(ah(l[2],o[2],c)),t[3]=Fv(ah(l[3],o[3],c)),t}}function nme(a,e,t){if(!(!(e&&e.length)||!(a>=0&&a<=1))){var r=a*(e.length-1),n=Math.floor(r),i=Math.ceil(r),l=Ks(e[n]),o=Ks(e[i]),c=r-n,d=kc([Ao(ah(l[0],o[0],c)),Ao(ah(l[1],o[1],c)),Ao(ah(l[2],o[2],c)),Fv(ah(l[3],o[3],c))],"rgba");return t?{color:d,leftIndex:n,rightIndex:i,value:r}:d}}function dh(a,e,t,r){var n=Ks(a);if(a)return n=rme(n),e!=null&&(n[0]=ame(Yt(e)?e(n[0]):e)),t!=null&&(n[1]=ch(Yt(t)?t(n[1]):t)),r!=null&&(n[2]=ch(Yt(r)?r(n[2]):r)),kc(D4(n),"rgba")}function D2(a,e){var t=Ks(a);if(t&&e!=null)return t[3]=Fv(e),kc(t,"rgba")}function kc(a,e){if(!(!a||!a.length)){var t=a[0]+","+a[1]+","+a[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(t+=","+a[3]),e+"("+t+")"}}function I2(a,e){var t=Ks(a);return t?(.299*t[0]+.587*t[1]+.114*t[2])*t[3]/255+(1-t[3])*e:0}var _O=new kx(100);function R4(a){if(At(a)){var e=_O.get(a);return e||(e=I4(a,-.1),_O.put(a,e)),e}else if(nN(a)){var t=et({},a);return t.colorStops=ct(a.colorStops,function(r){return{offset:r.offset,color:I4(r.color,-.1)}}),t}return a}var R2=Math.round;function Vv(a){var e;if(!a||a==="transparent")a="none";else if(typeof a=="string"&&a.indexOf("rgba")>-1){var t=Ks(a);t&&(a="rgb("+t[0]+","+t[1]+","+t[2]+")",e=t[3])}return{color:a,opacity:e??1}}var NO=1e-4;function rh(a){return a<NO&&a>-NO}function py(a){return R2(a*1e3)/1e3}function L4(a){return R2(a*1e4)/1e4}function ime(a){return"matrix("+py(a[0])+","+py(a[1])+","+py(a[2])+","+py(a[3])+","+L4(a[4])+","+L4(a[5])+")"}var sme={left:"start",right:"end",center:"middle",middle:"middle"};function lme(a,e,t){return t==="top"?a+=e/2:t==="bottom"&&(a-=e/2),a}function ome(a){return a&&(a.shadowBlur||a.shadowOffsetX||a.shadowOffsetY)}function cme(a){var e=a.style,t=a.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),t[0],t[1]].join(",")}function XG(a){return a&&!!a.image}function dme(a){return a&&!!a.svgElement}function PT(a){return XG(a)||dme(a)}function ZG(a){return a.type==="linear"}function KG(a){return a.type==="radial"}function QG(a){return a&&(a.type==="linear"||a.type==="radial")}function cN(a){return"url(#"+a+")"}function JG(a){var e=a.getGlobalScale(),t=Math.max(e[0],e[1]);return Math.max(Math.ceil(Math.log(t)/Math.log(10)),1)}function eW(a){var e=a.x||0,t=a.y||0,r=(a.rotation||0)*Rw,n=Ht(a.scaleX,1),i=Ht(a.scaleY,1),l=a.skewX||0,o=a.skewY||0,c=[];return(e||t)&&c.push("translate("+e+"px,"+t+"px)"),r&&c.push("rotate("+r+")"),(n!==1||i!==1)&&c.push("scale("+n+","+i+")"),(l||o)&&c.push("skew("+R2(l*Rw)+"deg, "+R2(o*Rw)+"deg)"),c.join(" ")}var ume=(function(){return Ba.hasGlobalWindow&&Yt(window.btoa)?function(a){return window.btoa(unescape(encodeURIComponent(a)))}:typeof Buffer<"u"?function(a){return Buffer.from(a).toString("base64")}:function(a){return null}})(),O4=Array.prototype.slice;function bd(a,e,t){return(e-a)*t+a}function g5(a,e,t,r){for(var n=e.length,i=0;i<n;i++)a[i]=bd(e[i],t[i],r);return a}function hme(a,e,t,r){for(var n=e.length,i=n&&e[0].length,l=0;l<n;l++){a[l]||(a[l]=[]);for(var o=0;o<i;o++)a[l][o]=bd(e[l][o],t[l][o],r)}return a}function xy(a,e,t,r){for(var n=e.length,i=0;i<n;i++)a[i]=e[i]+t[i]*r;return a}function jO(a,e,t,r){for(var n=e.length,i=n&&e[0].length,l=0;l<n;l++){a[l]||(a[l]=[]);for(var o=0;o<i;o++)a[l][o]=e[l][o]+t[l][o]*r}return a}function fme(a,e){for(var t=a.length,r=e.length,n=t>r?e:a,i=Math.min(t,r),l=n[i-1]||{color:[0,0,0,0],offset:0},o=i;o<Math.max(t,r);o++)n.push({offset:l.offset,color:l.color.slice()})}function pme(a,e,t){var r=a,n=e;if(!(!r.push||!n.push)){var i=r.length,l=n.length;if(i!==l){var o=i>l;if(o)r.length=l;else for(var c=i;c<l;c++)r.push(t===1?n[c]:O4.call(n[c]))}for(var d=r[0]&&r[0].length,c=0;c<r.length;c++)if(t===1)isNaN(r[c])&&(r[c]=n[c]);else for(var u=0;u<d;u++)isNaN(r[c][u])&&(r[c][u]=n[c][u])}}function ov(a){if(ds(a)){var e=a.length;if(ds(a[0])){for(var t=[],r=0;r<e;r++)t.push(O4.call(a[r]));return t}return O4.call(a)}return a}function zw(a){return a[0]=Math.floor(a[0])||0,a[1]=Math.floor(a[1])||0,a[2]=Math.floor(a[2])||0,a[3]=a[3]==null?1:a[3],"rgba("+a.join(",")+")"}function xme(a){return ds(a&&a[0])?2:1}var my=0,Bw=1,tW=2,Hg=3,P4=4,z4=5,SO=6;function kO(a){return a===P4||a===z4}function gy(a){return a===Bw||a===tW}var Qm=[0,0,0,0],mme=(function(){function a(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return a.prototype.isFinished=function(){return this._finished},a.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},a.prototype.needsAnimate=function(){return this.keyframes.length>=1},a.prototype.getAdditiveTrack=function(){return this._additiveTrack},a.prototype.addKeyframe=function(e,t,r){this._needsSort=!0;var n=this.keyframes,i=n.length,l=!1,o=SO,c=t;if(ds(t)){var d=xme(t);o=d,(d===1&&!Ka(t[0])||d===2&&!Ka(t[0][0]))&&(l=!0)}else if(Ka(t)&&!os(t))o=my;else if(At(t))if(!isNaN(+t))o=my;else{var u=Ks(t);u&&(c=u,o=Hg)}else if(nN(t)){var h=et({},c);h.colorStops=ct(t.colorStops,function(p){return{offset:p.offset,color:Ks(p.color)}}),ZG(t)?o=P4:KG(t)&&(o=z4),c=h}i===0?this.valType=o:(o!==this.valType||o===SO)&&(l=!0),this.discrete=this.discrete||l;var f={time:e,value:c,rawValue:t,percent:0};return r&&(f.easing=r,f.easingFunc=Yt(r)?r:lv[r]||OT(r)),n.push(f),f},a.prototype.prepare=function(e,t){var r=this.keyframes;this._needsSort&&r.sort(function(b,w){return b.time-w.time});for(var n=this.valType,i=r.length,l=r[i-1],o=this.discrete,c=gy(n),d=kO(n),u=0;u<i;u++){var h=r[u],f=h.value,p=l.value;h.percent=h.time/e,o||(c&&u!==i-1?pme(f,p,n):d&&fme(f.colorStops,p.colorStops))}if(!o&&n!==z4&&t&&this.needsAnimate()&&t.needsAnimate()&&n===t.valType&&!t._finished){this._additiveTrack=t;for(var g=r[0].value,u=0;u<i;u++)n===my?r[u].additiveValue=r[u].value-g:n===Hg?r[u].additiveValue=xy([],r[u].value,g,-1):gy(n)&&(r[u].additiveValue=n===Bw?xy([],r[u].value,g,-1):jO([],r[u].value,g,-1))}},a.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,n=r?"additiveValue":"value",i=this.valType,l=this.keyframes,o=l.length,c=this.propName,d=i===Hg,u,h=this._lastFr,f=Math.min,p,g;if(o===1)p=g=l[0];else{if(t<0)u=0;else if(t<this._lastFrP){var b=f(h+1,o-1);for(u=b;u>=0&&!(l[u].percent<=t);u--);u=f(u,o-2)}else{for(u=h;u<o&&!(l[u].percent>t);u++);u=f(u-1,o-2)}g=l[u+1],p=l[u]}if(p&&g){this._lastFr=u,this._lastFrP=t;var w=g.percent-p.percent,j=w===0?1:f((t-p.percent)/w,1);g.easingFunc&&(j=g.easingFunc(j));var k=r?this._additiveValue:d?Qm:e[c];if((gy(i)||d)&&!k&&(k=this._additiveValue=[]),this.discrete)e[c]=j<1?p.rawValue:g.rawValue;else if(gy(i))i===Bw?g5(k,p[n],g[n],j):hme(k,p[n],g[n],j);else if(kO(i)){var T=p[n],E=g[n],I=i===P4;e[c]={type:I?"linear":"radial",x:bd(T.x,E.x,j),y:bd(T.y,E.y,j),colorStops:ct(T.colorStops,function(P,H){var G=E.colorStops[H];return{offset:bd(P.offset,G.offset,j),color:zw(g5([],P.color,G.color,j))}}),global:E.global},I?(e[c].x2=bd(T.x2,E.x2,j),e[c].y2=bd(T.y2,E.y2,j)):e[c].r=bd(T.r,E.r,j)}else if(d)g5(k,p[n],g[n],j),r||(e[c]=zw(k));else{var R=bd(p[n],g[n],j);r?this._additiveValue=R:e[c]=R}r&&this._addToTarget(e)}}},a.prototype._addToTarget=function(e){var t=this.valType,r=this.propName,n=this._additiveValue;t===my?e[r]=e[r]+n:t===Hg?(Ks(e[r],Qm),xy(Qm,Qm,n,1),e[r]=zw(Qm)):t===Bw?xy(e[r],e[r],n,1):t===tW&&jO(e[r],e[r],n,1)},a})(),zT=(function(){function a(e,t,r,n){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&n){MT("Can' use additive animation on looped animation.");return}this._additiveAnimators=n,this._allowDiscrete=r}return a.prototype.getMaxTime=function(){return this._maxTime},a.prototype.getDelay=function(){return this._delay},a.prototype.getLoop=function(){return this._loop},a.prototype.getTarget=function(){return this._target},a.prototype.changeTarget=function(e){this._target=e},a.prototype.when=function(e,t,r){return this.whenWithKeys(e,t,Ua(t),r)},a.prototype.whenWithKeys=function(e,t,r,n){for(var i=this._tracks,l=0;l<r.length;l++){var o=r[l],c=i[o];if(!c){c=i[o]=new mme(o);var d=void 0,u=this._getAdditiveTrack(o);if(u){var h=u.keyframes,f=h[h.length-1];d=f&&f.value,u.valType===Hg&&d&&(d=zw(d))}else d=this._target[o];if(d==null)continue;e>0&&c.addKeyframe(0,ov(d),n),this._trackKeys.push(o)}c.addKeyframe(e,ov(t[o]),n)}return this._maxTime=Math.max(this._maxTime,e),this},a.prototype.pause=function(){this._clip.pause(),this._paused=!0},a.prototype.resume=function(){this._clip.resume(),this._paused=!1},a.prototype.isPaused=function(){return!!this._paused},a.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},a.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,r=0;r<t;r++)e[r].call(this)},a.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var r=0;r<t.length;r++)t[r].call(this)},a.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,r=0;r<t.length;r++)e[t[r]].setFinished()},a.prototype._getAdditiveTrack=function(e){var t,r=this._additiveAnimators;if(r)for(var n=0;n<r.length;n++){var i=r[n].getTrack(e);i&&(t=i)}return t},a.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,r=[],n=this._maxTime||0,i=0;i<this._trackKeys.length;i++){var l=this._trackKeys[i],o=this._tracks[l],c=this._getAdditiveTrack(l),d=o.keyframes,u=d.length;if(o.prepare(n,c),o.needsAnimate())if(!this._allowDiscrete&&o.discrete){var h=d[u-1];h&&(t._target[o.propName]=h.rawValue),o.setFinished()}else r.push(o)}if(r.length||this._force){var f=new eme({life:n,loop:this._loop,delay:this._delay||0,onframe:function(p){t._started=2;var g=t._additiveAnimators;if(g){for(var b=!1,w=0;w<g.length;w++)if(g[w]._clip){b=!0;break}b||(t._additiveAnimators=null)}for(var w=0;w<r.length;w++)r[w].step(t._target,p);var j=t._onframeCbs;if(j)for(var w=0;w<j.length;w++)j[w](t._target,p)},ondestroy:function(){t._doneCallback()}});this._clip=f,this.animation&&this.animation.addClip(f),e&&f.setEasing(e)}else this._doneCallback();return this}},a.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},a.prototype.delay=function(e){return this._delay=e,this},a.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},a.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},a.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},a.prototype.getClip=function(){return this._clip},a.prototype.getTrack=function(e){return this._tracks[e]},a.prototype.getTracks=function(){var e=this;return ct(this._trackKeys,function(t){return e._tracks[t]})},a.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var r=this._tracks,n=this._trackKeys,i=0;i<e.length;i++){var l=r[e[i]];l&&!l.isFinished()&&(t?l.step(this._target,1):this._started===1&&l.step(this._target,0),l.setFinished())}for(var o=!0,i=0;i<n.length;i++)if(!r[n[i]].isFinished()){o=!1;break}return o&&this._abortedCallback(),o},a.prototype.saveTo=function(e,t,r){if(e){t=t||this._trackKeys;for(var n=0;n<t.length;n++){var i=t[n],l=this._tracks[i];if(!(!l||l.isFinished())){var o=l.keyframes,c=o[r?0:o.length-1];c&&(e[i]=ov(c.rawValue))}}}},a.prototype.__changeFinalValue=function(e,t){t=t||Ua(e);for(var r=0;r<t.length;r++){var n=t[r],i=this._tracks[n];if(i){var l=i.keyframes;if(l.length>1){var o=l.pop();i.addKeyframe(o.time,e[n]),i.prepare(this._maxTime,i.getAdditiveTrack())}}}},a})();function Jp(){return new Date().getTime()}var gme=(function(a){Ie(e,a);function e(t){var r=a.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,t=t||{},r.stage=t.stage||{},r}return e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var r=t.getClip();r&&this.addClip(r)},e.prototype.removeClip=function(t){if(t.animation){var r=t.prev,n=t.next;r?r.next=n:this._head=n,n?n.prev=r:this._tail=r,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var r=t.getClip();r&&this.removeClip(r),t.animation=null},e.prototype.update=function(t){for(var r=Jp()-this._pausedTime,n=r-this._time,i=this._head;i;){var l=i.next,o=i.step(r,n);o&&(i.ondestroy(),this.removeClip(i)),i=l}this._time=r,t||(this.trigger("frame",n),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0;function r(){t._running&&(T2(r),!t._paused&&t.update())}T2(r)},e.prototype.start=function(){this._running||(this._time=Jp(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=Jp(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=Jp()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var r=t.next;t.prev=t.next=t.animation=null,t=r}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(t,r){r=r||{},this.start();var n=new zT(t,r.loop);return this.addAnimator(n),n},e})(co),vme=300,v5=Ba.domSupported,b5=(function(){var a=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=ct(a,function(n){var i=n.replace("mouse","pointer");return t.hasOwnProperty(i)?i:n});return{mouse:a,touch:e,pointer:r}})(),CO={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},AO=!1;function B4(a){var e=a.pointerType;return e==="pen"||e==="touch"}function bme(a){a.touching=!0,a.touchTimer!=null&&(clearTimeout(a.touchTimer),a.touchTimer=null),a.touchTimer=setTimeout(function(){a.touching=!1,a.touchTimer=null},700)}function y5(a){a&&(a.zrByTouch=!0)}function yme(a,e){return Wl(a.dom,new wme(a,e),!0)}function aW(a,e){for(var t=e,r=!1;t&&t.nodeType!==9&&!(r=t.domBelongToZr||t!==e&&t===a.painterRoot);)t=t.parentNode;return r}var wme=(function(){function a(e,t){this.stopPropagation=Bn,this.stopImmediatePropagation=Bn,this.preventDefault=Bn,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}return a})(),wo={mousedown:function(a){a=Wl(this.dom,a),this.__mayPointerCapture=[a.zrX,a.zrY],this.trigger("mousedown",a)},mousemove:function(a){a=Wl(this.dom,a);var e=this.__mayPointerCapture;e&&(a.zrX!==e[0]||a.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",a)},mouseup:function(a){a=Wl(this.dom,a),this.__togglePointerCapture(!1),this.trigger("mouseup",a)},mouseout:function(a){a=Wl(this.dom,a);var e=a.toElement||a.relatedTarget;aW(this,e)||(this.__pointerCapturing&&(a.zrEventControl="no_globalout"),this.trigger("mouseout",a))},wheel:function(a){AO=!0,a=Wl(this.dom,a),this.trigger("mousewheel",a)},mousewheel:function(a){AO||(a=Wl(this.dom,a),this.trigger("mousewheel",a))},touchstart:function(a){a=Wl(this.dom,a),y5(a),this.__lastTouchMoment=new Date,this.handler.processGesture(a,"start"),wo.mousemove.call(this,a),wo.mousedown.call(this,a)},touchmove:function(a){a=Wl(this.dom,a),y5(a),this.handler.processGesture(a,"change"),wo.mousemove.call(this,a)},touchend:function(a){a=Wl(this.dom,a),y5(a),this.handler.processGesture(a,"end"),wo.mouseup.call(this,a),+new Date-+this.__lastTouchMoment<vme&&wo.click.call(this,a)},pointerdown:function(a){wo.mousedown.call(this,a)},pointermove:function(a){B4(a)||wo.mousemove.call(this,a)},pointerup:function(a){wo.mouseup.call(this,a)},pointerout:function(a){B4(a)||wo.mouseout.call(this,a)}};se(["click","dblclick","contextmenu"],function(a){wo[a]=function(e){e=Wl(this.dom,e),this.trigger(a,e)}});var F4={pointermove:function(a){B4(a)||F4.mousemove.call(this,a)},pointerup:function(a){F4.mouseup.call(this,a)},mousemove:function(a){this.trigger("mousemove",a)},mouseup:function(a){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",a),e&&(a.zrEventControl="only_globalout",this.trigger("mouseout",a))}};function _me(a,e){var t=e.domHandlers;Ba.pointerEventsSupported?se(b5.pointer,function(r){Fw(e,r,function(n){t[r].call(a,n)})}):(Ba.touchEventsSupported&&se(b5.touch,function(r){Fw(e,r,function(n){t[r].call(a,n),bme(e)})}),se(b5.mouse,function(r){Fw(e,r,function(n){n=RT(n),e.touching||t[r].call(a,n)})}))}function Nme(a,e){Ba.pointerEventsSupported?se(CO.pointer,t):Ba.touchEventsSupported||se(CO.mouse,t);function t(r){function n(i){i=RT(i),aW(a,i.target)||(i=yme(a,i),e.domHandlers[r].call(a,i))}Fw(e,r,n,{capture:!0})}}function Fw(a,e,t,r){a.mounted[e]=t,a.listenerOpts[e]=r,C4(a.domTarget,e,t,r)}function w5(a){var e=a.mounted;for(var t in e)e.hasOwnProperty(t)&&Rxe(a.domTarget,t,e[t],a.listenerOpts[t]);a.mounted={}}var TO=(function(){function a(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t}return a})(),jme=(function(a){Ie(e,a);function e(t,r){var n=a.call(this)||this;return n.__pointerCapturing=!1,n.dom=t,n.painterRoot=r,n._localHandlerScope=new TO(t,wo),v5&&(n._globalHandlerScope=new TO(document,F4)),_me(n,n._localHandlerScope),n}return e.prototype.dispose=function(){w5(this._localHandlerScope),v5&&w5(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,v5&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var r=this._globalHandlerScope;t?Nme(this,r):w5(r)}},e})(co),rW=1;Ba.hasGlobalWindow&&(rW=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var L2=rW,V4=.4,H4="#333",U4="#ccc",Sme="#eee",MO=lN,EO=5e-5;function cf(a){return a>EO||a<-EO}var df=[],yp=[],_5=Li(),N5=Math.abs,Cd=(function(){function a(){}return a.prototype.getLocalTransform=function(e){return a.getLocalTransform(this,e)},a.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},a.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},a.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},a.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},a.prototype.needLocalTransform=function(){return cf(this.rotation)||cf(this.x)||cf(this.y)||cf(this.scaleX-1)||cf(this.scaleY-1)||cf(this.skewX)||cf(this.skewY)},a.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),r=this.transform;if(!(t||e)){r&&(MO(r),this.invTransform=null);return}r=r||Li(),t?this.getLocalTransform(r):MO(r),e&&(t?Sc(r,e,r):oN(r,e)),this.transform=r,this._resolveGlobalScaleRatio(r)},a.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(t!=null&&t!==1){this.getGlobalScale(df);var r=df[0]<0?-1:1,n=df[1]<0?-1:1,i=((df[0]-r)*t+r)/df[0]||0,l=((df[1]-n)*t+n)/df[1]||0;e[0]*=i,e[1]*=i,e[2]*=l,e[3]*=l}this.invTransform=this.invTransform||Li(),Io(this.invTransform,e)},a.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},a.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],r=e[2]*e[2]+e[3]*e[3],n=Math.atan2(e[1],e[0]),i=Math.PI/2+n-Math.atan2(e[3],e[2]);r=Math.sqrt(r)*Math.cos(i),t=Math.sqrt(t),this.skewX=i,this.skewY=0,this.rotation=-n,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=r,this.originX=0,this.originY=0}},a.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(e.invTransform=e.invTransform||Li(),Sc(yp,e.invTransform,t),t=yp);var r=this.originX,n=this.originY;(r||n)&&(_5[4]=r,_5[5]=n,Sc(yp,t,_5),yp[4]-=r,yp[5]-=n,t=yp),this.setLocalTransform(t)}},a.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},a.prototype.transformCoordToLocal=function(e,t){var r=[e,t],n=this.invTransform;return n&&Fn(r,r,n),r},a.prototype.transformCoordToGlobal=function(e,t){var r=[e,t],n=this.transform;return n&&Fn(r,r,n),r},a.prototype.getLineScale=function(){var e=this.transform;return e&&N5(e[0]-1)>1e-10&&N5(e[3]-1)>1e-10?Math.sqrt(N5(e[0]*e[3]-e[2]*e[1])):1},a.prototype.copyTransform=function(e){O2(this,e)},a.getLocalTransform=function(e,t){t=t||[];var r=e.originX||0,n=e.originY||0,i=e.scaleX,l=e.scaleY,o=e.anchorX,c=e.anchorY,d=e.rotation||0,u=e.x,h=e.y,f=e.skewX?Math.tan(e.skewX):0,p=e.skewY?Math.tan(-e.skewY):0;if(r||n||o||c){var g=r+o,b=n+c;t[4]=-g*i-f*b*l,t[5]=-b*l-p*g*i}else t[4]=t[5]=0;return t[0]=i,t[3]=l,t[1]=p*i,t[2]=f*l,d&&Mh(t,t,d),t[4]+=r+u,t[5]+=n+h,t},a.initDefaultProps=(function(){var e=a.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0})(),a})(),Dc=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function O2(a,e){for(var t=0;t<Dc.length;t++){var r=Dc[t];a[r]=e[r]}}function Cc(a){vy||(vy=new kx(100)),a=a||Ld;var e=vy.get(a);return e||(e={font:a,strWidthCache:new kx(500),asciiWidthMap:null,asciiWidthMapTried:!1,stWideCharWidth:Do.measureText("",a).width,asciiCharWidth:Do.measureText("a",a).width},vy.put(a,e)),e}var vy;function kme(a){if(!(j5>=DO)){a=a||Ld;for(var e=[],t=+new Date,r=0;r<=127;r++)e[r]=Do.measureText(String.fromCharCode(r),a).width;var n=+new Date-t;return n>16?j5=DO:n>2&&j5++,e}}var j5=0,DO=5;function nW(a,e){return a.asciiWidthMapTried||(a.asciiWidthMap=kme(a.font),a.asciiWidthMapTried=!0),0<=e&&e<=127?a.asciiWidthMap!=null?a.asciiWidthMap[e]:a.asciiCharWidth:a.stWideCharWidth}function Ac(a,e){var t=a.strWidthCache,r=t.get(e);return r==null&&(r=Do.measureText(e,a.font).width,t.put(e,r)),r}function IO(a,e,t,r){var n=Ac(Cc(e),a),i=Ab(e),l=Cx(0,n,t),o=s0(0,i,r),c=new ra(l,o,n,i);return c}function dN(a,e,t,r){var n=((a||"")+"").split(`
`),i=n.length;if(i===1)return IO(n[0],e,t,r);for(var l=new ra(0,0,0,0),o=0;o<n.length;o++){var c=IO(n[o],e,t,r);o===0?l.copy(c):l.union(c)}return l}function Cx(a,e,t,r){return t==="right"?r?a+=e:a-=e:t==="center"&&(r?a+=e/2:a-=e/2),a}function s0(a,e,t,r){return t==="middle"?r?a+=e/2:a-=e/2:t==="bottom"&&(r?a+=e:a-=e),a}function Ab(a){return Cc(a).stWideCharWidth}function Ro(a,e){return typeof a=="string"?a.lastIndexOf("%")>=0?parseFloat(a)/100*e:parseFloat(a):a}function P2(a,e,t){var r=e.position||"inside",n=e.distance!=null?e.distance:5,i=t.height,l=t.width,o=i/2,c=t.x,d=t.y,u="left",h="top";if(r instanceof Array)c+=Ro(r[0],t.width),d+=Ro(r[1],t.height),u=null,h=null;else switch(r){case"left":c-=n,d+=o,u="right",h="middle";break;case"right":c+=n+l,d+=o,h="middle";break;case"top":c+=l/2,d-=n,u="center",h="bottom";break;case"bottom":c+=l/2,d+=i+n,u="center";break;case"inside":c+=l/2,d+=o,u="center",h="middle";break;case"insideLeft":c+=n,d+=o,h="middle";break;case"insideRight":c+=l-n,d+=o,u="right",h="middle";break;case"insideTop":c+=l/2,d+=n,u="center";break;case"insideBottom":c+=l/2,d+=i-n,u="center",h="bottom";break;case"insideTopLeft":c+=n,d+=n;break;case"insideTopRight":c+=l-n,d+=n,u="right";break;case"insideBottomLeft":c+=n,d+=i-n,h="bottom";break;case"insideBottomRight":c+=l-n,d+=i-n,u="right",h="bottom";break}return a=a||{},a.x=c,a.y=d,a.align=u,a.verticalAlign=h,a}var S5="__zr_normal__",k5=Dc.concat(["ignore"]),Cme=Mc(Dc,function(a,e){return a[e]=!0,a},{ignore:!1}),wp={},Ame=new ra(0,0,0,0),by=[],uN=(function(){function a(e){this.id=EG(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return a.prototype._init=function(e){this.attr(e)},a.prototype.drift=function(e,t,r){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0;break}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=e,n[5]+=t,this.decomposeTransform(),this.markRedraw()},a.prototype.beforeUpdate=function(){},a.prototype.afterUpdate=function(){},a.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},a.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var r=this.textConfig,n=r.local,i=t.innerTransformable,l=void 0,o=void 0,c=!1;i.parent=n?this:null;var d=!1;i.copyTransform(t);var u=r.position!=null,h=r.autoOverflowArea,f=void 0;if((h||u)&&(f=Ame,r.layoutRect?f.copy(r.layoutRect):f.copy(this.getBoundingRect()),n||f.applyTransform(this.transform)),u){this.calculateTextPosition?this.calculateTextPosition(wp,r,f):P2(wp,r,f),i.x=wp.x,i.y=wp.y,l=wp.align,o=wp.verticalAlign;var p=r.origin;if(p&&r.rotation!=null){var g=void 0,b=void 0;p==="center"?(g=f.width*.5,b=f.height*.5):(g=Ro(p[0],f.width),b=Ro(p[1],f.height)),d=!0,i.originX=-i.x+g+(n?0:f.x),i.originY=-i.y+b+(n?0:f.y)}}r.rotation!=null&&(i.rotation=r.rotation);var w=r.offset;w&&(i.x+=w[0],i.y+=w[1],d||(i.originX=-w[0],i.originY=-w[1]));var j=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={});if(h){var k=j.overflowRect=j.overflowRect||new ra(0,0,0,0);i.getLocalTransform(by),Io(by,by),ra.copy(k,f),k.applyTransform(by)}else j.overflowRect=null;var T=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,E=void 0,I=void 0,R=void 0;T&&this.canBeInsideText()?(E=r.insideFill,I=r.insideStroke,(E==null||E==="auto")&&(E=this.getInsideTextFill()),(I==null||I==="auto")&&(I=this.getInsideTextStroke(E),R=!0)):(E=r.outsideFill,I=r.outsideStroke,(E==null||E==="auto")&&(E=this.getOutsideFill()),(I==null||I==="auto")&&(I=this.getOutsideStroke(E),R=!0)),E=E||"#000",(E!==j.fill||I!==j.stroke||R!==j.autoStroke||l!==j.align||o!==j.verticalAlign)&&(c=!0,j.fill=E,j.stroke=I,j.autoStroke=R,j.align=l,j.verticalAlign=o,t.setDefaultTextStyle(j)),t.__dirty|=wl,c&&t.dirtyStyle(!0)}},a.prototype.canBeInsideText=function(){return!0},a.prototype.getInsideTextFill=function(){return"#fff"},a.prototype.getInsideTextStroke=function(e){return"#000"},a.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?U4:H4},a.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),r=typeof t=="string"&&Ks(t);r||(r=[255,255,255,1]);for(var n=r[3],i=this.__zr.isDarkMode(),l=0;l<3;l++)r[l]=r[l]*n+(i?0:255)*(1-n);return r[3]=1,kc(r,"rgba")},a.prototype.traverse=function(e,t){},a.prototype.attrKV=function(e,t){e==="textConfig"?this.setTextConfig(t):e==="textContent"?this.setTextContent(t):e==="clipPath"?this.setClipPath(t):e==="extra"?(this.extra=this.extra||{},et(this.extra,t)):this[e]=t},a.prototype.hide=function(){this.ignore=!0,this.markRedraw()},a.prototype.show=function(){this.ignore=!1,this.markRedraw()},a.prototype.attr=function(e,t){if(typeof e=="string")this.attrKV(e,t);else if(aa(e))for(var r=e,n=Ua(r),i=0;i<n.length;i++){var l=n[i];this.attrKV(l,e[l])}return this.markRedraw(),this},a.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,r=0;r<this.animators.length;r++){var n=this.animators[r],i=n.__fromStateTransition;if(!(n.getLoop()||i&&i!==S5)){var l=n.targetName,o=l?t[l]:t;n.saveTo(o)}}},a.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,k5)},a.prototype._savePrimaryToNormal=function(e,t,r){for(var n=0;n<r.length;n++){var i=r[n];e[i]!=null&&!(i in t)&&(t[i]=this[i])}},a.prototype.hasState=function(){return this.currentStates.length>0},a.prototype.getState=function(e){return this.states[e]},a.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},a.prototype.clearStates=function(e){this.useState(S5,!1,e)},a.prototype.useState=function(e,t,r,n){var i=e===S5,l=this.hasState();if(!(!l&&i)){var o=this.currentStates,c=this.stateTransition;if(!(ja(o,e)>=0&&(t||o.length===1))){var d;if(this.stateProxy&&!i&&(d=this.stateProxy(e)),d||(d=this.states&&this.states[e]),!d&&!i){MT("State "+e+" not exists.");return}i||this.saveCurrentToNormalState(d);var u=!!(d&&d.hoverLayer||n);u&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,d,this._normalState,t,!r&&!this.__inHover&&c&&c.duration>0,c);var h=this._textContent,f=this._textGuide;return h&&h.useState(e,t,r,u),f&&f.useState(e,t,r,u),i?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!u&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~wl),d}}},a.prototype.useStates=function(e,t,r){if(!e.length)this.clearStates();else{var n=[],i=this.currentStates,l=e.length,o=l===i.length;if(o){for(var c=0;c<l;c++)if(e[c]!==i[c]){o=!1;break}}if(o)return;for(var c=0;c<l;c++){var d=e[c],u=void 0;this.stateProxy&&(u=this.stateProxy(d,e)),u||(u=this.states[d]),u&&n.push(u)}var h=n[l-1],f=!!(h&&h.hoverLayer||r);f&&this._toggleHoverLayerFlag(!0);var p=this._mergeStates(n),g=this.stateTransition;this.saveCurrentToNormalState(p),this._applyStateObj(e.join(","),p,this._normalState,!1,!t&&!this.__inHover&&g&&g.duration>0,g);var b=this._textContent,w=this._textGuide;b&&b.useStates(e,t,f),w&&w.useStates(e,t,f),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!f&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~wl)}},a.prototype.isSilent=function(){for(var e=this;e;){if(e.silent)return!0;var t=e.__hostTarget;e=t?e.ignoreHostSilent?null:t:e.parent}return!1},a.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},a.prototype.removeState=function(e){var t=ja(this.currentStates,e);if(t>=0){var r=this.currentStates.slice();r.splice(t,1),this.useStates(r)}},a.prototype.replaceState=function(e,t,r){var n=this.currentStates.slice(),i=ja(n,e),l=ja(n,t)>=0;i>=0?l?n.splice(i,1):n[i]=t:r&&!l&&n.push(t),this.useStates(n)},a.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},a.prototype._mergeStates=function(e){for(var t={},r,n=0;n<e.length;n++){var i=e[n];et(t,i),i.textConfig&&(r=r||{},et(r,i.textConfig))}return r&&(t.textConfig=r),t},a.prototype._applyStateObj=function(e,t,r,n,i,l){var o=!(t&&n);t&&t.textConfig?(this.textConfig=et({},n?this.textConfig:r.textConfig),et(this.textConfig,t.textConfig)):o&&r.textConfig&&(this.textConfig=r.textConfig);for(var c={},d=!1,u=0;u<k5.length;u++){var h=k5[u],f=i&&Cme[h];t&&t[h]!=null?f?(d=!0,c[h]=t[h]):this[h]=t[h]:o&&r[h]!=null&&(f?(d=!0,c[h]=r[h]):this[h]=r[h])}if(!i)for(var u=0;u<this.animators.length;u++){var p=this.animators[u],g=p.targetName;p.getLoop()||p.__changeFinalValue(g?(t||r)[g]:t||r)}d&&this._transitionState(e,c,l)},a.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},a.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},a.prototype.getClipPath=function(){return this._clipPath},a.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},a.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},a.prototype.getTextContent=function(){return this._textContent},a.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new Cd,this._attachComponent(e),this._textContent=e,this.markRedraw())},a.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),et(this.textConfig,e),this.markRedraw()},a.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},a.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},a.prototype.getTextGuideLine=function(){return this._textGuide},a.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},a.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},a.prototype.markRedraw=function(){this.__dirty|=wl;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},a.prototype.dirty=function(){this.markRedraw()},a.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,r=this._textGuide;t&&(t.__inHover=e),r&&(r.__inHover=e)},a.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.addAnimator(t[r]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},a.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.removeAnimator(t[r]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},a.prototype.animate=function(e,t,r){var n=e?this[e]:this,i=new zT(n,t,r);return e&&(i.targetName=e),this.addAnimator(i,e),i},a.prototype.addAnimator=function(e,t){var r=this.__zr,n=this;e.during(function(){n.updateDuringAnimation(t)}).done(function(){var i=n.animators,l=ja(i,e);l>=0&&i.splice(l,1)}),this.animators.push(e),r&&r.animation.addAnimator(e),r&&r.wakeUp()},a.prototype.updateDuringAnimation=function(e){this.markRedraw()},a.prototype.stopAnimation=function(e,t){for(var r=this.animators,n=r.length,i=[],l=0;l<n;l++){var o=r[l];!e||e===o.scope?o.stop(t):i.push(o)}return this.animators=i,this},a.prototype.animateTo=function(e,t,r){C5(this,e,t,r)},a.prototype.animateFrom=function(e,t,r){C5(this,e,t,r,!0)},a.prototype._transitionState=function(e,t,r,n){for(var i=C5(this,t,r,n),l=0;l<i.length;l++)i[l].__fromStateTransition=e},a.prototype.getBoundingRect=function(){return null},a.prototype.getPaintRect=function(){return null},a.initDefaultProps=(function(){var e=a.prototype;e.type="element",e.name="",e.ignore=e.silent=e.ignoreHostSilent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=wl;function t(r,n,i,l){Object.defineProperty(e,r,{get:function(){if(!this[n]){var c=this[n]=[];o(this,c)}return this[n]},set:function(c){this[i]=c[0],this[l]=c[1],this[n]=c,o(this,c)}});function o(c,d){Object.defineProperty(d,0,{get:function(){return c[i]},set:function(u){c[i]=u}}),Object.defineProperty(d,1,{get:function(){return c[l]},set:function(u){c[l]=u}})}}Object.defineProperty&&(t("position","_legacyPos","x","y"),t("scale","_legacyScale","scaleX","scaleY"),t("origin","_legacyOrigin","originX","originY"))})(),a})();ei(uN,co);ei(uN,Cd);function C5(a,e,t,r,n){t=t||{};var i=[];iW(a,"",a,e,t,r,i,n);var l=i.length,o=!1,c=t.done,d=t.aborted,u=function(){o=!0,l--,l<=0&&(o?c&&c():d&&d())},h=function(){l--,l<=0&&(o?c&&c():d&&d())};l||c&&c(),i.length>0&&t.during&&i[0].during(function(g,b){t.during(b)});for(var f=0;f<i.length;f++){var p=i[f];u&&p.done(u),h&&p.aborted(h),t.force&&p.duration(t.duration),p.start(t.easing)}return i}function A5(a,e,t){for(var r=0;r<t;r++)a[r]=e[r]}function Tme(a){return ds(a[0])}function Mme(a,e,t){if(ds(e[t]))if(ds(a[t])||(a[t]=[]),Qs(e[t])){var r=e[t].length;a[t].length!==r&&(a[t]=new e[t].constructor(r),A5(a[t],e[t],r))}else{var n=e[t],i=a[t],l=n.length;if(Tme(n))for(var o=n[0].length,c=0;c<l;c++)i[c]?A5(i[c],n[c],o):i[c]=Array.prototype.slice.call(n[c]);else A5(i,n,l);i.length=n.length}else a[t]=e[t]}function Eme(a,e){return a===e||ds(a)&&ds(e)&&Dme(a,e)}function Dme(a,e){var t=a.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(a[r]!==e[r])return!1;return!0}function iW(a,e,t,r,n,i,l,o){for(var c=Ua(r),d=n.duration,u=n.delay,h=n.additive,f=n.setToFinal,p=!aa(i),g=a.animators,b=[],w=0;w<c.length;w++){var j=c[w],k=r[j];if(k!=null&&t[j]!=null&&(p||i[j]))if(aa(k)&&!ds(k)&&!nN(k)){if(e){o||(t[j]=k,a.updateDuringAnimation(e));continue}iW(a,j,t[j],k,n,i&&i[j],l,o)}else b.push(j);else o||(t[j]=k,a.updateDuringAnimation(e),b.push(j))}var T=b.length;if(!h&&T)for(var E=0;E<g.length;E++){var I=g[E];if(I.targetName===e){var R=I.stopTracks(b);if(R){var P=ja(g,I);g.splice(P,1)}}}if(n.force||(b=pr(b,function(U){return!Eme(r[U],t[U])}),T=b.length),T>0||n.force&&!l.length){var H=void 0,G=void 0,X=void 0;if(o){G={},f&&(H={});for(var E=0;E<T;E++){var j=b[E];G[j]=t[j],f?H[j]=r[j]:t[j]=r[j]}}else if(f){X={};for(var E=0;E<T;E++){var j=b[E];X[j]=ov(t[j]),Mme(t,r,j)}}var I=new zT(t,!1,!1,h?pr(g,function(te){return te.targetName===e}):null);I.targetName=e,n.scope&&(I.scope=n.scope),f&&H&&I.whenWithKeys(0,H,b),X&&I.whenWithKeys(0,X,b),I.whenWithKeys(d??500,o?G:r,b).delay(u||0),a.addAnimator(I,e),l.push(I)}}var $t=(function(a){Ie(e,a);function e(t){var r=a.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var r=this._children,n=0;n<r.length;n++)if(r[n].name===t)return r[n]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,r){if(t&&t!==this&&t.parent!==this&&r&&r.parent===this){var n=this._children,i=n.indexOf(r);i>=0&&(n.splice(i,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,r){var n=ja(this._children,t);return n>=0&&this.replaceAt(r,n),this},e.prototype.replaceAt=function(t,r){var n=this._children,i=n[r];if(t&&t!==this&&t.parent!==this&&t!==i){n[r]=t,i.parent=null;var l=this.__zr;l&&i.removeSelfFromZr(l),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var r=this.__zr;r&&r!==t.__zr&&t.addSelfToZr(r),r&&r.refresh()},e.prototype.remove=function(t){var r=this.__zr,n=this._children,i=ja(n,t);return i<0?this:(n.splice(i,1),t.parent=null,r&&t.removeSelfFromZr(r),r&&r.refresh(),this)},e.prototype.removeAll=function(){for(var t=this._children,r=this.__zr,n=0;n<t.length;n++){var i=t[n];r&&i.removeSelfFromZr(r),i.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,r){for(var n=this._children,i=0;i<n.length;i++){var l=n[i];t.call(r,l,i)}return this},e.prototype.traverse=function(t,r){for(var n=0;n<this._children.length;n++){var i=this._children[n],l=t.call(r,i);i.isGroup&&!l&&i.traverse(t,r)}return this},e.prototype.addSelfToZr=function(t){a.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++){var n=this._children[r];n.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){a.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++){var n=this._children[r];n.removeSelfFromZr(t)}},e.prototype.getBoundingRect=function(t){for(var r=new ra(0,0,0,0),n=t||this._children,i=[],l=null,o=0;o<n.length;o++){var c=n[o];if(!(c.ignore||c.invisible)){var d=c.getBoundingRect(),u=c.getLocalTransform(i);u?(ra.applyTransform(r,d,u),l=l||r.clone(),l.union(r)):(l=l||d.clone(),l.union(d))}}return l||r},e})(uN);$t.prototype.type="group";var Vw={},sW={};function Ime(a){delete sW[a]}function Rme(a){if(!a)return!1;if(typeof a=="string")return I2(a,1)<V4;if(a.colorStops){for(var e=a.colorStops,t=0,r=e.length,n=0;n<r;n++)t+=I2(e[n].color,1);return t/=r,t<V4}return!1}var Lme=(function(){function a(e,t,r){var n=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=t,this.id=e;var i=new Xxe,l=r.renderer||"canvas";Vw[l]||(l=Ua(Vw)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var o=new Vw[l](t,i,r,e),c=r.ssr||o.ssrOnly;this.storage=i,this.painter=o;var d=!Ba.node&&!Ba.worker&&!c?new jme(o.getViewportRoot(),o.root):null,u=r.useCoarsePointer,h=u==null||u==="auto"?Ba.touchEventsSupported:!!u,f=44,p;h&&(p=Ht(r.pointerSize,f)),this.handler=new zG(i,o,d,o.root,p),this.animation=new gme({stage:{update:c?null:function(){return n._flush(!0)}}}),c||this.animation.start()}return a.prototype.add=function(e){this._disposed||!e||(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},a.prototype.remove=function(e){this._disposed||!e||(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},a.prototype.configLayer=function(e,t){this._disposed||(this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh())},a.prototype.setBackgroundColor=function(e){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=Rme(e))},a.prototype.getBackgroundColor=function(){return this._backgroundColor},a.prototype.setDarkMode=function(e){this._darkMode=e},a.prototype.isDarkMode=function(){return this._darkMode},a.prototype.refreshImmediately=function(e){this._disposed||(e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},a.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},a.prototype.flush=function(){this._disposed||this._flush(!1)},a.prototype._flush=function(e){var t,r=Jp();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var n=Jp();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:n-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},a.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},a.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},a.prototype.refreshHover=function(){this._needsRefreshHover=!0},a.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},a.prototype.resize=function(e){this._disposed||(e=e||{},this.painter.resize(e.width,e.height),this.handler.resize())},a.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},a.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},a.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},a.prototype.setCursorStyle=function(e){this._disposed||this.handler.setCursorStyle(e)},a.prototype.findHover=function(e,t){if(!this._disposed)return this.handler.findHover(e,t)},a.prototype.on=function(e,t,r){return this._disposed||this.handler.on(e,t,r),this},a.prototype.off=function(e,t){this._disposed||this.handler.off(e,t)},a.prototype.trigger=function(e,t){this._disposed||this.handler.trigger(e,t)},a.prototype.clear=function(){if(!this._disposed){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof $t&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},a.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,Ime(this.id))},a})();function RO(a,e){var t=new Lme(EG(),a,e);return sW[t.id]=t,t}function Ome(a,e){Vw[a]=e}var G4;function Pme(a){if(typeof G4=="function")return G4(a)}function zme(a){G4=a}var LO=1e-4,lW=20;function Bme(a){return a.replace(/^\s+|\s+$/g,"")}var Sl=Math.min,zn=Math.max,xc=Math.abs;function fr(a,e,t,r){var n=e[0],i=e[1],l=t[0],o=t[1],c=i-n,d=o-l;if(c===0)return d===0?l:(l+o)/2;if(r)if(c>0){if(a<=n)return l;if(a>=i)return o}else{if(a>=n)return l;if(a<=i)return o}else{if(a===n)return l;if(a===i)return o}return(a-n)/c*d+l}var kt=Fme;function Fme(a,e,t){switch(a){case"center":case"middle":a="50%";break;case"left":case"top":a="0%";break;case"right":case"bottom":a="100%";break}return z2(a,e,t)}function z2(a,e,t){return At(a)?Bme(a).match(/%$/)?parseFloat(a)/100*e+(t||0):parseFloat(a):a==null?NaN:+a}function $n(a,e,t){return e==null&&(e=10),e=Math.min(Math.max(0,e),lW),a=(+a).toFixed(e),t?a:+a}function to(a){return a.sort(function(e,t){return e-t}),a}function mc(a){if(a=+a,isNaN(a))return 0;if(a>1e-14){for(var e=1,t=0;t<15;t++,e*=10)if(Math.round(a*e)/e===a)return t}return Vme(a)}function Vme(a){var e=a.toString().toLowerCase(),t=e.indexOf("e"),r=t>0?+e.slice(t+1):0,n=t>0?t:e.length,i=e.indexOf("."),l=i<0?0:n-1-i;return Math.max(0,l-r)}function oW(a,e){var t=Math.log,r=Math.LN10,n=Math.floor(t(a[1]-a[0])/r),i=Math.round(t(xc(e[1]-e[0]))/r),l=Math.min(Math.max(-n+i,0),20);return isFinite(l)?l:20}function Hme(a,e){var t=Mc(a,function(p,g){return p+(isNaN(g)?0:g)},0);if(t===0)return[];for(var r=Math.pow(10,e),n=ct(a,function(p){return(isNaN(p)?0:p)/t*r*100}),i=r*100,l=ct(n,function(p){return Math.floor(p)}),o=Mc(l,function(p,g){return p+g},0),c=ct(n,function(p,g){return p-l[g]});o<i;){for(var d=Number.NEGATIVE_INFINITY,u=null,h=0,f=c.length;h<f;++h)c[h]>d&&(d=c[h],u=h);++l[u],c[u]=0,++o}return ct(l,function(p){return p/r})}function Ume(a,e){var t=Math.max(mc(a),mc(e)),r=a+e;return t>lW?r:$n(r,t)}var OO=9007199254740991;function cW(a){var e=Math.PI*2;return(a%e+e)%e}function Hv(a){return a>-LO&&a<LO}var Gme=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function I0(a){if(a instanceof Date)return a;if(At(a)){var e=Gme.exec(a);if(!e)return new Date(NaN);if(e[8]){var t=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(t-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,t,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(a==null)return new Date(NaN);return new Date(Math.round(a))}function Wme(a){return Math.pow(10,BT(a))}function BT(a){if(a===0)return 0;var e=Math.floor(Math.log(a)/Math.LN10);return a/Math.pow(10,e)>=10&&e++,e}function dW(a,e){var t=BT(a),r=Math.pow(10,t),n=a/r,i;return n<1.5?i=1:n<2.5?i=2:n<4?i=3:n<7?i=5:i=10,a=i*r,t>=-20?+a.toFixed(t<0?-t:0):a}function T5(a,e){var t=(a.length-1)*e+1,r=Math.floor(t),n=+a[r-1],i=t-r;return i?n+i*(a[r]-n):n}function PO(a){a.sort(function(c,d){return o(c,d,0)?-1:1});for(var e=-1/0,t=1,r=0;r<a.length;){for(var n=a[r].interval,i=a[r].close,l=0;l<2;l++)n[l]<=e&&(n[l]=e,i[l]=l?1:1-t),e=n[l],t=i[l];n[0]===n[1]&&i[0]*i[1]!==1?a.splice(r,1):r++}return a;function o(c,d,u){return c.interval[u]<d.interval[u]||c.interval[u]===d.interval[u]&&(c.close[u]-d.close[u]===(u?-1:1)||!u&&o(c,d,1))}}function Pd(a){var e=parseFloat(a);return e==a&&(e!==0||!At(a)||a.indexOf("x")<=0)?e:NaN}function uW(a){return!isNaN(Pd(a))}function hW(){return Math.round(Math.random()*9)}function fW(a,e){return e===0?a:fW(e,a%e)}function zO(a,e){return a==null?e:e==null?a:a*e/fW(a,e)}var Yme="[ECharts] ",$me=typeof console<"u"&&console.warn&&console.log;function qme(a,e,t){$me&&console[a](Yme+e)}function pW(a,e){qme("error",a)}function cr(a){throw new Error(a)}function BO(a,e,t){return(e-a)*t+a}var xW="series\0",mW="\0_ec_\0";function Or(a){return a instanceof Array?a:a==null?[]:[a]}function y0(a,e,t){if(a){a[e]=a[e]||{},a.emphasis=a.emphasis||{},a.emphasis[e]=a.emphasis[e]||{};for(var r=0,n=t.length;r<n;r++){var i=t[r];!a.emphasis[e].hasOwnProperty(i)&&a[e].hasOwnProperty(i)&&(a.emphasis[e][i]=a[e][i])}}}var FO=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Wx(a){return aa(a)&&!lt(a)&&!(a instanceof Date)?a.value:a}function Xme(a){return aa(a)&&!(a instanceof Array)}function gW(a,e,t){var r=t==="normalMerge",n=t==="replaceMerge",i=t==="replaceAll";a=a||[],e=(e||[]).slice();var l=Pt();se(e,function(c,d){if(!aa(c)){e[d]=null;return}});var o=Zme(a,l,t);return(r||n)&&Kme(o,a,l,e),r&&Qme(o,e),r||n?Jme(o,e,n):i&&ege(o,e),tge(o),o}function Zme(a,e,t){var r=[];if(t==="replaceAll")return r;for(var n=0;n<a.length;n++){var i=a[n];i&&i.id!=null&&e.set(i.id,n),r.push({existing:t==="replaceMerge"||Uv(i)?null:i,newOption:null,keyInfo:null,brandNew:null})}return r}function Kme(a,e,t,r){se(r,function(n,i){if(!(!n||n.id==null)){var l=cv(n.id),o=t.get(l);if(o!=null){var c=a[o];us(!c.newOption,'Duplicated option on id "'+l+'".'),c.newOption=n,c.existing=e[o],r[i]=null}}})}function Qme(a,e){se(e,function(t,r){if(!(!t||t.name==null))for(var n=0;n<a.length;n++){var i=a[n].existing;if(!a[n].newOption&&i&&(i.id==null||t.id==null)&&!Uv(t)&&!Uv(i)&&vW("name",i,t)){a[n].newOption=t,e[r]=null;return}}})}function Jme(a,e,t){se(e,function(r){if(r){for(var n,i=0;(n=a[i])&&(n.newOption||Uv(n.existing)||n.existing&&r.id!=null&&!vW("id",r,n.existing));)i++;n?(n.newOption=r,n.brandNew=t):a.push({newOption:r,brandNew:t,existing:null,keyInfo:null}),i++}})}function ege(a,e){se(e,function(t){a.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}function tge(a){var e=Pt();se(a,function(t){var r=t.existing;r&&e.set(r.id,t)}),se(a,function(t){var r=t.newOption;us(!r||r.id==null||!e.get(r.id)||e.get(r.id)===t,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&e.set(r.id,t),!t.keyInfo&&(t.keyInfo={})}),se(a,function(t,r){var n=t.existing,i=t.newOption,l=t.keyInfo;if(aa(i)){if(l.name=i.name!=null?cv(i.name):n?n.name:xW+r,n)l.id=cv(n.id);else if(i.id!=null)l.id=cv(i.id);else{var o=0;do l.id="\0"+l.name+"\0"+o++;while(e.get(l.id))}e.set(l.id,t)}})}function vW(a,e,t){var r=ui(e[a],null),n=ui(t[a],null);return r!=null&&n!=null&&r===n}function cv(a){return ui(a,"")}function ui(a,e){return a==null?e:At(a)?a:Ka(a)||y4(a)?a+"":e}function FT(a){var e=a.name;return!!(e&&e.indexOf(xW))}function Uv(a){return a&&a.id!=null&&cv(a.id).indexOf(mW)===0}function age(a){return mW+a}function rge(a,e,t){se(a,function(r){var n=r.newOption;aa(n)&&(r.keyInfo.mainType=e,r.keyInfo.subType=nge(e,n,r.existing,t))})}function nge(a,e,t,r){var n=e.type?e.type:t?t.subType:r.determineSubType(a,e);return n}function ige(a,e){var t={},r={};return n(a||[],t),n(e||[],r,t),[i(t),i(r)];function n(l,o,c){for(var d=0,u=l.length;d<u;d++){var h=ui(l[d].seriesId,null);if(h==null)return;for(var f=Or(l[d].dataIndex),p=c&&c[h],g=0,b=f.length;g<b;g++){var w=f[g];p&&p[w]?p[w]=null:(o[h]||(o[h]={}))[w]=1}}}function i(l,o){var c=[];for(var d in l)if(l.hasOwnProperty(d)&&l[d]!=null)if(o)c.push(+d);else{var u=i(l[d],!0);u.length&&c.push({seriesId:d,dataIndex:u})}return c}}function w0(a,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return lt(e.dataIndex)?ct(e.dataIndex,function(t){return a.indexOfRawIndex(t)}):a.indexOfRawIndex(e.dataIndex);if(e.name!=null)return lt(e.name)?ct(e.name,function(t){return a.indexOfName(t)}):a.indexOfName(e.name)}function Ia(){var a="__ec_inner_"+sge++;return function(e){return e[a]||(e[a]={})}}var sge=hW();function ux(a,e,t){var r=VT(e,t),n=r.mainTypeSpecified,i=r.queryOptionMap,l=r.others,o=l,c=t?t.defaultMainType:null;return!n&&c&&i.set(c,{}),i.each(function(d,u){var h=Yx(a,u,d,{useDefault:c===u,enableAll:t&&t.enableAll!=null?t.enableAll:!0,enableNone:t&&t.enableNone!=null?t.enableNone:!0});o[u+"Models"]=h.models,o[u+"Model"]=h.models[0]}),o}function VT(a,e){var t;if(At(a)){var r={};r[a+"Index"]=0,t=r}else t=a;var n=Pt(),i={},l=!1;return se(t,function(o,c){if(c==="dataIndex"||c==="dataIndexInside"){i[c]=o;return}var d=c.match(/^(\w+)(Index|Id|Name)$/)||[],u=d[1],h=(d[2]||"").toLowerCase();if(!(!u||!h||e&&e.includeMainTypes&&ja(e.includeMainTypes,u)<0)){l=l||!!u;var f=n.get(u)||n.set(u,{});f[h]=o}}),{mainTypeSpecified:l,queryOptionMap:n,others:i}}var wn={useDefault:!0,enableAll:!1,enableNone:!1},lge={useDefault:!1,enableAll:!0,enableNone:!0};function Yx(a,e,t,r){r=r||wn;var n=t.index,i=t.id,l=t.name,o={models:null,specified:n!=null||i!=null||l!=null};if(!o.specified){var c=void 0;return o.models=r.useDefault&&(c=a.getComponent(e))?[c]:[],o}if(n==="none"||n===!1){if(r.enableNone)return o.models=[],o;n=-1}return n==="all"&&(r.enableAll?n=i=l=null:n=-1),o.models=a.queryComponents({mainType:e,index:n,id:i,name:l}),o}function bW(a,e,t){a.setAttribute?a.setAttribute(e,t):a[e]=t}function oge(a,e){return a.getAttribute?a.getAttribute(e):a[e]}function cge(a){return a==="auto"?Ba.domSupported?"html":"richText":a||"html"}function W4(a,e){var t=Pt(),r=[];return se(a,function(n){var i=e(n);(t.get(i)||(r.push(i),t.set(i,[]))).push(n)}),{keys:r,buckets:t}}function yW(a,e,t,r,n){var i=e==null||e==="auto";if(r==null)return r;if(Ka(r)){var l=BO(t||0,r,n);return $n(l,i?Math.max(mc(t||0),mc(r)):e)}else{if(At(r))return n<1?t:r;for(var o=[],c=t,d=r,u=Math.max(c?c.length:0,d.length),h=0;h<u;++h){var f=a.getDimensionInfo(h);if(f&&f.type==="ordinal")o[h]=(n<1&&c?c:d)[h];else{var p=c&&c[h]?c[h]:0,g=d[h],l=BO(p,g,n);o[h]=$n(l,i?Math.max(mc(p),mc(g)):e)}}return o}}var uh=(function(){function a(){}return a.prototype.reset=function(e,t,r,n){return this._list=e,this._step=n=n||1,this._idx=t,this._end=r??(n>0?e.length:0),this.item=null,this.key=NaN,this},a.prototype.next=function(){return(this._step>0?this._idx<this._end:this._idx>=this._end)?(this.item=this._list[this._idx],this.key=this._idx=this._idx+this._step,!0):!1},a})();function M5(a){a.option=a.parentModel=a.ecModel=null}var dge=".",uf="___EC__COMPONENT__CONTAINER___",wW="___EC__EXTENDED_CLASS___";function gc(a){var e={main:"",sub:""};if(a){var t=a.split(dge);e.main=t[0]||"",e.sub=t[1]||""}return e}function uge(a){us(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(a),'componentType "'+a+'" illegal')}function hge(a){return!!(a&&a[wW])}function HT(a,e){a.$constructor=a,a.extend=function(t){var r=this,n;return fge(r)?n=(function(i){Ie(l,i);function l(){return i.apply(this,arguments)||this}return l})(r):(n=function(){(t.$constructor||r).apply(this,arguments)},pxe(n,this)),et(n.prototype,t),n[wW]=!0,n.extend=this.extend,n.superCall=mge,n.superApply=gge,n.superClass=r,n}}function fge(a){return Yt(a)&&/^class\s/.test(Function.prototype.toString.call(a))}function _W(a,e){a.extend=e.extend}var pge=Math.round(Math.random()*10);function xge(a){var e=["__\0is_clz",pge++].join("_");a.prototype[e]=!0,a.isInstance=function(t){return!!(t&&t[e])}}function mge(a,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return this.superClass.prototype[e].apply(a,t)}function gge(a,e,t){return this.superClass.prototype[e].apply(a,t)}function hN(a){var e={};a.registerClass=function(r){var n=r.type||r.prototype.type;if(n){uge(n),r.prototype.type=n;var i=gc(n);if(!i.sub)e[i.main]=r;else if(i.sub!==uf){var l=t(i);l[i.sub]=r}}return r},a.getClass=function(r,n,i){var l=e[r];if(l&&l[uf]&&(l=n?l[n]:null),i&&!l)throw new Error(n?"Component "+r+"."+(n||"")+" is used but not imported.":r+".type should be specified.");return l},a.getClassesByMainType=function(r){var n=gc(r),i=[],l=e[n.main];return l&&l[uf]?se(l,function(o,c){c!==uf&&i.push(o)}):i.push(l),i},a.hasClass=function(r){var n=gc(r);return!!e[n.main]},a.getAllClassMainTypes=function(){var r=[];return se(e,function(n,i){r.push(i)}),r},a.hasSubTypes=function(r){var n=gc(r),i=e[n.main];return i&&i[uf]};function t(r){var n=e[r.main];return(!n||!n[uf])&&(n=e[r.main]={},n[uf]=!0),n}}function _0(a,e){for(var t=0;t<a.length;t++)a[t][1]||(a[t][1]=a[t][0]);return e=e||!1,function(r,n,i){for(var l={},o=0;o<a.length;o++){var c=a[o][1];if(!(n&&ja(n,c)>=0||i&&ja(i,c)<0)){var d=r.getShallow(c,e);d!=null&&(l[a[o][0]]=d)}}return l}}var vge=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],bge=_0(vge),yge=(function(){function a(){}return a.prototype.getAreaStyle=function(e,t){return bge(this,e,t)},a})(),Y4=new kx(50);function wge(a){if(typeof a=="string"){var e=Y4.get(a);return e&&e.image}else return a}function UT(a,e,t,r,n){if(a)if(typeof a=="string"){if(e&&e.__zrImageSrc===a||!t)return e;var i=Y4.get(a),l={hostEl:t,cb:r,cbPayload:n};return i?(e=i.image,!fN(e)&&i.pending.push(l)):(e=Do.loadImage(a,VO,VO),e.__zrImageSrc=a,Y4.put(a,e.__cachedImgObj={image:e,pending:[l]})),e}else return a;else return e}function VO(){var a=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<a.pending.length;e++){var t=a.pending[e],r=t.cb;r&&r(this,t.cbPayload),t.hostEl.dirty()}a.pending.length=0}function fN(a){return a&&a.width&&a.height}var E5=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function _ge(a,e,t,r,n,i){if(!t){a.text="",a.isTruncated=!1;return}var l=(e+"").split(`
`);i=NW(t,r,n,i);for(var o=!1,c={},d=0,u=l.length;d<u;d++)jW(c,l[d],i),l[d]=c.textLine,o=o||c.isTruncated;a.text=l.join(`
`),a.isTruncated=o}function NW(a,e,t,r){r=r||{};var n=et({},r);t=Ht(t,"..."),n.maxIterations=Ht(r.maxIterations,2);var i=n.minChar=Ht(r.minChar,0),l=n.fontMeasureInfo=Cc(e),o=l.asciiCharWidth;n.placeholder=Ht(r.placeholder,"");for(var c=a=Math.max(0,a-1),d=0;d<i&&c>=o;d++)c-=o;var u=Ac(l,t);return u>c&&(t="",u=0),c=a-u,n.ellipsis=t,n.ellipsisWidth=u,n.contentWidth=c,n.containerWidth=a,n}function jW(a,e,t){var r=t.containerWidth,n=t.contentWidth,i=t.fontMeasureInfo;if(!r){a.textLine="",a.isTruncated=!1;return}var l=Ac(i,e);if(l<=r){a.textLine=e,a.isTruncated=!1;return}for(var o=0;;o++){if(l<=n||o>=t.maxIterations){e+=t.ellipsis;break}var c=o===0?Nge(e,n,i):l>0?Math.floor(e.length*n/l):0;e=e.substr(0,c),l=Ac(i,e)}e===""&&(e=t.placeholder),a.textLine=e,a.isTruncated=!0}function Nge(a,e,t){for(var r=0,n=0,i=a.length;n<i&&r<e;n++)r+=nW(t,a.charCodeAt(n));return n}function jge(a,e,t,r){var n=GT(a),i=e.overflow,l=e.padding,o=l?l[1]+l[3]:0,c=l?l[0]+l[2]:0,d=e.font,u=i==="truncate",h=Ab(d),f=Ht(e.lineHeight,h),p=e.lineOverflow==="truncate",g=!1,b=e.width;b==null&&t!=null&&(b=t-o);var w=e.height;w==null&&r!=null&&(w=r-c);var j;b!=null&&(i==="break"||i==="breakAll")?j=n?SW(n,e.font,b,i==="breakAll",0).lines:[]:j=n?n.split(`
`):[];var k=j.length*f;if(w==null&&(w=k),k>w&&p){var T=Math.floor(w/f);g=g||j.length>T,j=j.slice(0,T),k=j.length*f}if(n&&u&&b!=null)for(var E=NW(b,d,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),I={},R=0;R<j.length;R++)jW(I,j[R],E),j[R]=I.textLine,g=g||I.isTruncated;for(var P=w,H=0,G=Cc(d),R=0;R<j.length;R++)H=Math.max(Ac(G,j[R]),H);b==null&&(b=H);var X=b;return P+=c,X+=o,{lines:j,height:w,outerWidth:X,outerHeight:P,lineHeight:f,calculatedLineHeight:h,contentWidth:H,contentHeight:k,width:b,isTruncated:g}}var Sge=(function(){function a(){}return a})(),HO=(function(){function a(e){this.tokens=[],e&&(this.tokens=e)}return a})(),kge=(function(){function a(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return a})();function Cge(a,e,t,r,n){var i=new kge,l=GT(a);if(!l)return i;var o=e.padding,c=o?o[1]+o[3]:0,d=o?o[0]+o[2]:0,u=e.width;u==null&&t!=null&&(u=t-c);var h=e.height;h==null&&r!=null&&(h=r-d);for(var f=e.overflow,p=(f==="break"||f==="breakAll")&&u!=null?{width:u,accumWidth:0,breakAll:f==="breakAll"}:null,g=E5.lastIndex=0,b;(b=E5.exec(l))!=null;){var w=b.index;w>g&&D5(i,l.substring(g,w),e,p),D5(i,b[2],e,p,b[1]),g=E5.lastIndex}g<l.length&&D5(i,l.substring(g,l.length),e,p);var j=[],k=0,T=0,E=f==="truncate",I=e.lineOverflow==="truncate",R={};function P(pe,Re,Te){pe.width=Re,pe.lineHeight=Te,k+=Te,T=Math.max(T,Re)}e:for(var H=0;H<i.lines.length;H++){for(var G=i.lines[H],X=0,U=0,te=0;te<G.tokens.length;te++){var Z=G.tokens[te],J=Z.styleName&&e.rich[Z.styleName]||{},B=Z.textPadding=J.padding,W=B?B[1]+B[3]:0,$=Z.font=J.font||e.font;Z.contentHeight=Ab($);var Q=Ht(J.height,Z.contentHeight);if(Z.innerHeight=Q,B&&(Q+=B[0]+B[2]),Z.height=Q,Z.lineHeight=jl(J.lineHeight,e.lineHeight,Q),Z.align=J&&J.align||n,Z.verticalAlign=J&&J.verticalAlign||"middle",I&&h!=null&&k+Z.lineHeight>h){var ne=i.lines.length;te>0?(G.tokens=G.tokens.slice(0,te),P(G,U,X),i.lines=i.lines.slice(0,H+1)):i.lines=i.lines.slice(0,H),i.isTruncated=i.isTruncated||i.lines.length<ne;break e}var re=J.width,K=re==null||re==="auto";if(typeof re=="string"&&re.charAt(re.length-1)==="%")Z.percentWidth=re,j.push(Z),Z.contentWidth=Ac(Cc($),Z.text);else{if(K){var ae=J.backgroundColor,ce=ae&&ae.image;ce&&(ce=wge(ce),fN(ce)&&(Z.width=Math.max(Z.width,ce.width*Q/ce.height)))}var de=E&&u!=null?u-U:null;de!=null&&de<Z.width?!K||de<W?(Z.text="",Z.width=Z.contentWidth=0):(_ge(R,Z.text,de-W,$,e.ellipsis,{minChar:e.truncateMinChar}),Z.text=R.text,i.isTruncated=i.isTruncated||R.isTruncated,Z.width=Z.contentWidth=Ac(Cc($),Z.text)):Z.contentWidth=Ac(Cc($),Z.text)}Z.width+=W,U+=Z.width,J&&(X=Math.max(X,Z.lineHeight))}P(G,U,X)}i.outerWidth=i.width=Ht(u,T),i.outerHeight=i.height=Ht(h,k),i.contentHeight=k,i.contentWidth=T,i.outerWidth+=c,i.outerHeight+=d;for(var H=0;H<j.length;H++){var Z=j[H],he=Z.percentWidth;Z.width=parseInt(he,10)/100*i.width}return i}function D5(a,e,t,r,n){var i=e==="",l=n&&t.rich[n]||{},o=a.lines,c=l.font||t.font,d=!1,u,h;if(r){var f=l.padding,p=f?f[1]+f[3]:0;if(l.width!=null&&l.width!=="auto"){var g=Ro(l.width,r.width)+p;o.length>0&&g+r.accumWidth>r.width&&(u=e.split(`
`),d=!0),r.accumWidth=g}else{var b=SW(e,c,r.width,r.breakAll,r.accumWidth);r.accumWidth=b.accumWidth+p,h=b.linesWidths,u=b.lines}}u||(u=e.split(`
`));for(var w=Cc(c),j=0;j<u.length;j++){var k=u[j],T=new Sge;if(T.styleName=n,T.text=k,T.isLineHolder=!k&&!i,typeof l.width=="number"?T.width=l.width:T.width=h?h[j]:Ac(w,k),!j&&!d){var E=(o[o.length-1]||(o[0]=new HO)).tokens,I=E.length;I===1&&E[0].isLineHolder?E[0]=T:(k||!I||i)&&E.push(T)}else o.push(new HO([T]))}}function Age(a){var e=a.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var Tge=Mc(",&?/;] ".split(""),function(a,e){return a[e]=!0,a},{});function Mge(a){return Age(a)?!!Tge[a]:!0}function SW(a,e,t,r,n){for(var i=[],l=[],o="",c="",d=0,u=0,h=Cc(e),f=0;f<a.length;f++){var p=a.charAt(f);if(p===`
`){c&&(o+=c,u+=d),i.push(o),l.push(u),o="",c="",d=0,u=0;continue}var g=nW(h,p.charCodeAt(0)),b=r?!1:!Mge(p);if(i.length?u+g>t:n+u+g>t){u?(o||c)&&(b?(o||(o=c,c="",d=0,u=d),i.push(o),l.push(u-d),c+=p,d+=g,o="",u=d):(c&&(o+=c,c="",d=0),i.push(o),l.push(u),o=p,u=g)):b?(i.push(c),l.push(d),c=p,d=g):(i.push(p),l.push(g));continue}u+=g,b?(c+=p,d+=g):(c&&(o+=c,c="",d=0),o+=p)}return c&&(o+=c),o&&(i.push(o),l.push(u)),i.length===1&&(u+=n),{accumWidth:u,lines:i,linesWidths:l}}function UO(a,e,t,r,n,i){if(a.baseX=t,a.baseY=r,a.outerWidth=a.outerHeight=null,!!e){var l=e.width*2,o=e.height*2;ra.set(GO,Cx(t,l,n),s0(r,o,i),l,o),ra.intersect(e,GO,null,WO);var c=WO.outIntersectRect;a.outerWidth=c.width,a.outerHeight=c.height,a.baseX=Cx(c.x,c.width,n,!0),a.baseY=s0(c.y,c.height,i,!0)}}var GO=new ra(0,0,0,0),WO={outIntersectRect:{},clamp:!0};function GT(a){return a!=null?a+="":a=""}function Ege(a){var e=GT(a.text),t=a.font,r=Ac(Cc(t),e),n=Ab(t);return $4(a,r,n,null)}function $4(a,e,t,r){var n=new ra(Cx(a.x||0,e,a.textAlign),s0(a.y||0,t,a.textBaseline),e,t),i=r??(kW(a)?a.lineWidth:0);return i>0&&(n.x-=i/2,n.y-=i/2,n.width+=i,n.height+=i),n}function kW(a){var e=a.stroke;return e!=null&&e!=="none"&&a.lineWidth>0}var q4="__zr_style_"+Math.round(Math.random()*10),l0={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},pN={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};l0[q4]=!0;var YO=["z","z2","invisible"],Dge=["invisible"],so=(function(a){Ie(e,a);function e(t){return a.call(this,t)||this}return e.prototype._init=function(t){for(var r=Ua(t),n=0;n<r.length;n++){var i=r[n];i==="style"?this.useStyle(t[i]):a.prototype.attrKV.call(this,i,t[i])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,r,n,i){var l=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&Ige(this,t,r)||l&&!l[0]&&!l[3])return!1;if(n&&this.__clipPaths&&this.__clipPaths.length){for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1}if(i&&this.parent)for(var c=this.parent;c;){if(c.ignore)return!1;c=c.parent}return!0},e.prototype.contain=function(t,r){return this.rectContain(t,r)},e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.rectContain=function(t,r){var n=this.transformCoordToLocal(t,r),i=this.getBoundingRect();return i.contain(n[0],n[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,n=this.getBoundingRect(),i=this.style,l=i.shadowBlur||0,o=i.shadowOffsetX||0,c=i.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new ra(0,0,0,0)),r?ra.applyTransform(t,n,r):t.copy(n),(l||o||c)&&(t.width+=l*2+Math.abs(o),t.height+=l*2+Math.abs(c),t.x=Math.min(t.x,t.x+o-l),t.y=Math.min(t.y,t.y+c-l));var d=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-d),t.y=Math.floor(t.y-d),t.width=Math.ceil(t.width+1+d*2),t.height=Math.ceil(t.height+1+d*2))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new ra(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(t,r){t!=="style"?a.prototype.attrKV.call(this,t,r):this.style?this.setStyle(r):this.useStyle(r)},e.prototype.setStyle=function(t,r){return typeof t=="string"?this.style[t]=r:et(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=Vg,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&Vg)},e.prototype.styleUpdated=function(){this.__dirty&=~Vg},e.prototype.createStyle=function(t){return sN(l0,t)},e.prototype.useStyle=function(t){t[q4]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[q4]},e.prototype._innerSaveToNormal=function(t){a.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,r,YO)},e.prototype._applyStateObj=function(t,r,n,i,l,o){a.prototype._applyStateObj.call(this,t,r,n,i,l,o);var c=!(r&&i),d;if(r&&r.style?l?i?d=r.style:(d=this._mergeStyle(this.createStyle(),n.style),this._mergeStyle(d,r.style)):(d=this._mergeStyle(this.createStyle(),i?this.style:n.style),this._mergeStyle(d,r.style)):c&&(d=n.style),d)if(l){var u=this.style;if(this.style=this.createStyle(c?{}:u),c)for(var h=Ua(u),f=0;f<h.length;f++){var p=h[f];p in d&&(d[p]=d[p],this.style[p]=u[p])}for(var g=Ua(d),f=0;f<g.length;f++){var p=g[f];this.style[p]=this.style[p]}this._transitionState(t,{style:d},o,this.getAnimationStyleProps())}else this.useStyle(d);for(var b=this.__inHover?Dge:YO,f=0;f<b.length;f++){var p=b[f];r&&r[p]!=null?this[p]=r[p]:c&&n[p]!=null&&(this[p]=n[p])}},e.prototype._mergeStates=function(t){for(var r=a.prototype._mergeStates.call(this,t),n,i=0;i<t.length;i++){var l=t[i];l.style&&(n=n||{},this._mergeStyle(n,l.style))}return n&&(r.style=n),r},e.prototype._mergeStyle=function(t,r){return et(t,r),t},e.prototype.getAnimationStyleProps=function(){return pN},e.initDefaultProps=(function(){var t=e.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=wl|Vg})(),e})(uN),I5=new ra(0,0,0,0),R5=new ra(0,0,0,0);function Ige(a,e,t){return I5.copy(a.getBoundingRect()),a.transform&&I5.applyTransform(a.transform),R5.width=e,R5.height=t,!I5.intersect(R5)}var Ys=Math.min,$s=Math.max,L5=Math.sin,O5=Math.cos,hf=Math.PI*2,yy=D0(),wy=D0(),_y=D0();function xN(a,e,t){if(a.length!==0){for(var r=a[0],n=r[0],i=r[0],l=r[1],o=r[1],c=1;c<a.length;c++)r=a[c],n=Ys(n,r[0]),i=$s(i,r[0]),l=Ys(l,r[1]),o=$s(o,r[1]);e[0]=n,e[1]=l,t[0]=i,t[1]=o}}function $O(a,e,t,r,n,i){n[0]=Ys(a,t),n[1]=Ys(e,r),i[0]=$s(a,t),i[1]=$s(e,r)}var qO=[],XO=[];function Rge(a,e,t,r,n,i,l,o,c,d){var u=UG,h=bi,f=u(a,t,n,l,qO);c[0]=1/0,c[1]=1/0,d[0]=-1/0,d[1]=-1/0;for(var p=0;p<f;p++){var g=h(a,t,n,l,qO[p]);c[0]=Ys(g,c[0]),d[0]=$s(g,d[0])}f=u(e,r,i,o,XO);for(var p=0;p<f;p++){var b=h(e,r,i,o,XO[p]);c[1]=Ys(b,c[1]),d[1]=$s(b,d[1])}c[0]=Ys(a,c[0]),d[0]=$s(a,d[0]),c[0]=Ys(l,c[0]),d[0]=$s(l,d[0]),c[1]=Ys(e,c[1]),d[1]=$s(e,d[1]),c[1]=Ys(o,c[1]),d[1]=$s(o,d[1])}function Lge(a,e,t,r,n,i,l,o){var c=WG,d=Ei,u=$s(Ys(c(a,t,n),1),0),h=$s(Ys(c(e,r,i),1),0),f=d(a,t,n,u),p=d(e,r,i,h);l[0]=Ys(a,n,f),l[1]=Ys(e,i,p),o[0]=$s(a,n,f),o[1]=$s(e,i,p)}function Oge(a,e,t,r,n,i,l,o,c){var d=Ju,u=eh,h=Math.abs(n-i);if(h%hf<1e-4&&h>1e-4){o[0]=a-t,o[1]=e-r,c[0]=a+t,c[1]=e+r;return}if(yy[0]=O5(n)*t+a,yy[1]=L5(n)*r+e,wy[0]=O5(i)*t+a,wy[1]=L5(i)*r+e,d(o,yy,wy),u(c,yy,wy),n=n%hf,n<0&&(n=n+hf),i=i%hf,i<0&&(i=i+hf),n>i&&!l?i+=hf:n<i&&l&&(n+=hf),l){var f=i;i=n,n=f}for(var p=0;p<i;p+=Math.PI/2)p>n&&(_y[0]=O5(p)*t+a,_y[1]=L5(p)*r+e,d(o,_y,o),u(c,_y,c))}var Br={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},ff=[],pf=[],Jo=[],Tu=[],ec=[],tc=[],P5=Math.min,z5=Math.max,xf=Math.cos,mf=Math.sin,dd=Math.abs,X4=Math.PI,zu=X4*2,B5=typeof Float32Array<"u",Jm=[];function F5(a){var e=Math.round(a/X4*1e8)/1e8;return e%2*X4}function mN(a,e){var t=F5(a[0]);t<0&&(t+=zu);var r=t-a[0],n=a[1];n+=r,!e&&n-t>=zu?n=t+zu:e&&t-n>=zu?n=t-zu:!e&&t>n?n=t+(zu-F5(t-n)):e&&t<n&&(n=t-(zu-F5(n-t))),a[0]=t,a[1]=n}var Ic=(function(){function a(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return a.prototype.increaseVersion=function(){this._version++},a.prototype.getVersion=function(){return this._version},a.prototype.setScale=function(e,t,r){r=r||0,r>0&&(this._ux=dd(r/L2/e)||0,this._uy=dd(r/L2/t)||0)},a.prototype.setDPR=function(e){this.dpr=e},a.prototype.setContext=function(e){this._ctx=e},a.prototype.getContext=function(){return this._ctx},a.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},a.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},a.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(Br.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},a.prototype.lineTo=function(e,t){var r=dd(e-this._xi),n=dd(t-this._yi),i=r>this._ux||n>this._uy;if(this.addData(Br.L,e,t),this._ctx&&i&&this._ctx.lineTo(e,t),i)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var l=r*r+n*n;l>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=l)}return this},a.prototype.bezierCurveTo=function(e,t,r,n,i,l){return this._drawPendingPt(),this.addData(Br.C,e,t,r,n,i,l),this._ctx&&this._ctx.bezierCurveTo(e,t,r,n,i,l),this._xi=i,this._yi=l,this},a.prototype.quadraticCurveTo=function(e,t,r,n){return this._drawPendingPt(),this.addData(Br.Q,e,t,r,n),this._ctx&&this._ctx.quadraticCurveTo(e,t,r,n),this._xi=r,this._yi=n,this},a.prototype.arc=function(e,t,r,n,i,l){this._drawPendingPt(),Jm[0]=n,Jm[1]=i,mN(Jm,l),n=Jm[0],i=Jm[1];var o=i-n;return this.addData(Br.A,e,t,r,r,n,o,0,l?0:1),this._ctx&&this._ctx.arc(e,t,r,n,i,l),this._xi=xf(i)*r+e,this._yi=mf(i)*r+t,this},a.prototype.arcTo=function(e,t,r,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,r,n,i),this},a.prototype.rect=function(e,t,r,n){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,r,n),this.addData(Br.R,e,t,r,n),this},a.prototype.closePath=function(){this._drawPendingPt(),this.addData(Br.Z);var e=this._ctx,t=this._x0,r=this._y0;return e&&e.closePath(),this._xi=t,this._yi=r,this},a.prototype.fill=function(e){e&&e.fill(),this.toStatic()},a.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},a.prototype.len=function(){return this._len},a.prototype.setData=function(e){if(this._saveData){var t=e.length;!(this.data&&this.data.length===t)&&B5&&(this.data=new Float32Array(t));for(var r=0;r<t;r++)this.data[r]=e[r];this._len=t}},a.prototype.appendPath=function(e){if(this._saveData){e instanceof Array||(e=[e]);for(var t=e.length,r=0,n=this._len,i=0;i<t;i++)r+=e[i].len();var l=this.data;if(B5&&(l instanceof Float32Array||!l)&&(this.data=new Float32Array(n+r),n>0&&l))for(var o=0;o<n;o++)this.data[o]=l[o];for(var i=0;i<t;i++)for(var c=e[i].data,o=0;o<c.length;o++)this.data[n++]=c[o];this._len=n}},a.prototype.addData=function(e,t,r,n,i,l,o,c,d){if(this._saveData){var u=this.data;this._len+arguments.length>u.length&&(this._expandData(),u=this.data);for(var h=0;h<arguments.length;h++)u[this._len++]=arguments[h]}},a.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},a.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},a.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,B5&&this._len>11&&(this.data=new Float32Array(e)))}},a.prototype.getBoundingRect=function(){Jo[0]=Jo[1]=ec[0]=ec[1]=Number.MAX_VALUE,Tu[0]=Tu[1]=tc[0]=tc[1]=-Number.MAX_VALUE;var e=this.data,t=0,r=0,n=0,i=0,l;for(l=0;l<this._len;){var o=e[l++],c=l===1;switch(c&&(t=e[l],r=e[l+1],n=t,i=r),o){case Br.M:t=n=e[l++],r=i=e[l++],ec[0]=n,ec[1]=i,tc[0]=n,tc[1]=i;break;case Br.L:$O(t,r,e[l],e[l+1],ec,tc),t=e[l++],r=e[l++];break;case Br.C:Rge(t,r,e[l++],e[l++],e[l++],e[l++],e[l],e[l+1],ec,tc),t=e[l++],r=e[l++];break;case Br.Q:Lge(t,r,e[l++],e[l++],e[l],e[l+1],ec,tc),t=e[l++],r=e[l++];break;case Br.A:var d=e[l++],u=e[l++],h=e[l++],f=e[l++],p=e[l++],g=e[l++]+p;l+=1;var b=!e[l++];c&&(n=xf(p)*h+d,i=mf(p)*f+u),Oge(d,u,h,f,p,g,b,ec,tc),t=xf(g)*h+d,r=mf(g)*f+u;break;case Br.R:n=t=e[l++],i=r=e[l++];var w=e[l++],j=e[l++];$O(n,i,n+w,i+j,ec,tc);break;case Br.Z:t=n,r=i;break}Ju(Jo,Jo,ec),eh(Tu,Tu,tc)}return l===0&&(Jo[0]=Jo[1]=Tu[0]=Tu[1]=0),new ra(Jo[0],Jo[1],Tu[0]-Jo[0],Tu[1]-Jo[1])},a.prototype._calculateLength=function(){var e=this.data,t=this._len,r=this._ux,n=this._uy,i=0,l=0,o=0,c=0;this._pathSegLen||(this._pathSegLen=[]);for(var d=this._pathSegLen,u=0,h=0,f=0;f<t;){var p=e[f++],g=f===1;g&&(i=e[f],l=e[f+1],o=i,c=l);var b=-1;switch(p){case Br.M:i=o=e[f++],l=c=e[f++];break;case Br.L:{var w=e[f++],j=e[f++],k=w-i,T=j-l;(dd(k)>r||dd(T)>n||f===t-1)&&(b=Math.sqrt(k*k+T*T),i=w,l=j);break}case Br.C:{var E=e[f++],I=e[f++],w=e[f++],j=e[f++],R=e[f++],P=e[f++];b=Zxe(i,l,E,I,w,j,R,P,10),i=R,l=P;break}case Br.Q:{var E=e[f++],I=e[f++],w=e[f++],j=e[f++];b=Qxe(i,l,E,I,w,j,10),i=w,l=j;break}case Br.A:var H=e[f++],G=e[f++],X=e[f++],U=e[f++],te=e[f++],Z=e[f++],J=Z+te;f+=1,g&&(o=xf(te)*X+H,c=mf(te)*U+G),b=z5(X,U)*P5(zu,Math.abs(Z)),i=xf(J)*X+H,l=mf(J)*U+G;break;case Br.R:{o=i=e[f++],c=l=e[f++];var B=e[f++],W=e[f++];b=B*2+W*2;break}case Br.Z:{var k=o-i,T=c-l;b=Math.sqrt(k*k+T*T),i=o,l=c;break}}b>=0&&(d[h++]=b,u+=b)}return this._pathLen=u,u},a.prototype.rebuildPath=function(e,t){var r=this.data,n=this._ux,i=this._uy,l=this._len,o,c,d,u,h,f,p=t<1,g,b,w=0,j=0,k,T=0,E,I;if(!(p&&(this._pathSegLen||this._calculateLength(),g=this._pathSegLen,b=this._pathLen,k=t*b,!k)))e:for(var R=0;R<l;){var P=r[R++],H=R===1;switch(H&&(d=r[R],u=r[R+1],o=d,c=u),P!==Br.L&&T>0&&(e.lineTo(E,I),T=0),P){case Br.M:o=d=r[R++],c=u=r[R++],e.moveTo(d,u);break;case Br.L:{h=r[R++],f=r[R++];var G=dd(h-d),X=dd(f-u);if(G>n||X>i){if(p){var U=g[j++];if(w+U>k){var te=(k-w)/U;e.lineTo(d*(1-te)+h*te,u*(1-te)+f*te);break e}w+=U}e.lineTo(h,f),d=h,u=f,T=0}else{var Z=G*G+X*X;Z>T&&(E=h,I=f,T=Z)}break}case Br.C:{var J=r[R++],B=r[R++],W=r[R++],$=r[R++],Q=r[R++],ne=r[R++];if(p){var U=g[j++];if(w+U>k){var te=(k-w)/U;yh(d,J,W,Q,te,ff),yh(u,B,$,ne,te,pf),e.bezierCurveTo(ff[1],pf[1],ff[2],pf[2],ff[3],pf[3]);break e}w+=U}e.bezierCurveTo(J,B,W,$,Q,ne),d=Q,u=ne;break}case Br.Q:{var J=r[R++],B=r[R++],W=r[R++],$=r[R++];if(p){var U=g[j++];if(w+U>k){var te=(k-w)/U;Bv(d,J,W,te,ff),Bv(u,B,$,te,pf),e.quadraticCurveTo(ff[1],pf[1],ff[2],pf[2]);break e}w+=U}e.quadraticCurveTo(J,B,W,$),d=W,u=$;break}case Br.A:var re=r[R++],K=r[R++],ae=r[R++],ce=r[R++],de=r[R++],he=r[R++],pe=r[R++],Re=!r[R++],Te=ae>ce?ae:ce,ke=dd(ae-ce)>.001,Le=de+he,Ne=!1;if(p){var U=g[j++];w+U>k&&(Le=de+he*(k-w)/U,Ne=!0),w+=U}if(ke&&e.ellipse?e.ellipse(re,K,ae,ce,pe,de,Le,Re):e.arc(re,K,Te,de,Le,Re),Ne)break e;H&&(o=xf(de)*ae+re,c=mf(de)*ce+K),d=xf(Le)*ae+re,u=mf(Le)*ce+K;break;case Br.R:o=d=r[R],c=u=r[R+1],h=r[R++],f=r[R++];var _e=r[R++],Oe=r[R++];if(p){var U=g[j++];if(w+U>k){var De=k-w;e.moveTo(h,f),e.lineTo(h+P5(De,_e),f),De-=_e,De>0&&e.lineTo(h+_e,f+P5(De,Oe)),De-=Oe,De>0&&e.lineTo(h+z5(_e-De,0),f+Oe),De-=_e,De>0&&e.lineTo(h,f+z5(Oe-De,0));break e}w+=U}e.rect(h,f,_e,Oe);break;case Br.Z:if(p){var U=g[j++];if(w+U>k){var te=(k-w)/U;e.lineTo(d*(1-te)+o*te,u*(1-te)+c*te);break e}w+=U}e.closePath(),d=o,u=c}}},a.prototype.clone=function(){var e=new a,t=this.data;return e.data=t.slice?t.slice():Array.prototype.slice.call(t),e._len=this._len,e},a.prototype.canSave=function(){return!!this._saveData},a.CMD=Br,a.initDefaultProps=(function(){var e=a.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0})(),a})();function Vu(a,e,t,r,n,i,l){if(n===0)return!1;var o=n,c=0,d=a;if(l>e+o&&l>r+o||l<e-o&&l<r-o||i>a+o&&i>t+o||i<a-o&&i<t-o)return!1;if(a!==t)c=(e-r)/(a-t),d=(a*r-t*e)/(a-t);else return Math.abs(i-a)<=o/2;var u=c*i-l+d,h=u*u/(c*c+1);return h<=o/2*o/2}function Pge(a,e,t,r,n,i,l,o,c,d,u){if(c===0)return!1;var h=c;if(u>e+h&&u>r+h&&u>i+h&&u>o+h||u<e-h&&u<r-h&&u<i-h&&u<o-h||d>a+h&&d>t+h&&d>n+h&&d>l+h||d<a-h&&d<t-h&&d<n-h&&d<l-h)return!1;var f=GG(a,e,t,r,n,i,l,o,d,u,null);return f<=h/2}function CW(a,e,t,r,n,i,l,o,c){if(l===0)return!1;var d=l;if(c>e+d&&c>r+d&&c>i+d||c<e-d&&c<r-d&&c<i-d||o>a+d&&o>t+d&&o>n+d||o<a-d&&o<t-d&&o<n-d)return!1;var u=YG(a,e,t,r,n,i,o,c,null);return u<=d/2}var ZO=Math.PI*2;function _l(a){return a%=ZO,a<0&&(a+=ZO),a}var eg=Math.PI*2;function zge(a,e,t,r,n,i,l,o,c){if(l===0)return!1;var d=l;o-=a,c-=e;var u=Math.sqrt(o*o+c*c);if(u-d>t||u+d<t)return!1;if(Math.abs(r-n)%eg<1e-4)return!0;if(i){var h=r;r=_l(n),n=_l(h)}else r=_l(r),n=_l(n);r>n&&(n+=eg);var f=Math.atan2(c,o);return f<0&&(f+=eg),f>=r&&f<=n||f+eg>=r&&f+eg<=n}function yd(a,e,t,r,n,i){if(i>e&&i>r||i<e&&i<r||r===e)return 0;var l=(i-e)/(r-e),o=r<e?1:-1;(l===1||l===0)&&(o=r<e?.5:-.5);var c=l*(t-a)+a;return c===n?1/0:c>n?o:0}var Mu=Ic.CMD,gf=Math.PI*2,Bge=1e-4;function Fge(a,e){return Math.abs(a-e)<Bge}var Ns=[-1,-1,-1],ql=[-1,-1];function Vge(){var a=ql[0];ql[0]=ql[1],ql[1]=a}function Hge(a,e,t,r,n,i,l,o,c,d){if(d>e&&d>r&&d>i&&d>o||d<e&&d<r&&d<i&&d<o)return 0;var u=E2(e,r,i,o,d,Ns);if(u===0)return 0;for(var h=0,f=-1,p=void 0,g=void 0,b=0;b<u;b++){var w=Ns[b],j=w===0||w===1?.5:1,k=bi(a,t,n,l,w);k<c||(f<0&&(f=UG(e,r,i,o,ql),ql[1]<ql[0]&&f>1&&Vge(),p=bi(e,r,i,o,ql[0]),f>1&&(g=bi(e,r,i,o,ql[1]))),f===2?w<ql[0]?h+=p<e?j:-j:w<ql[1]?h+=g<p?j:-j:h+=o<g?j:-j:w<ql[0]?h+=p<e?j:-j:h+=o<p?j:-j)}return h}function Uge(a,e,t,r,n,i,l,o){if(o>e&&o>r&&o>i||o<e&&o<r&&o<i)return 0;var c=Kxe(e,r,i,o,Ns);if(c===0)return 0;var d=WG(e,r,i);if(d>=0&&d<=1){for(var u=0,h=Ei(e,r,i,d),f=0;f<c;f++){var p=Ns[f]===0||Ns[f]===1?.5:1,g=Ei(a,t,n,Ns[f]);g<l||(Ns[f]<d?u+=h<e?p:-p:u+=i<h?p:-p)}return u}else{var p=Ns[0]===0||Ns[0]===1?.5:1,g=Ei(a,t,n,Ns[0]);return g<l?0:i<e?p:-p}}function Gge(a,e,t,r,n,i,l,o){if(o-=e,o>t||o<-t)return 0;var c=Math.sqrt(t*t-o*o);Ns[0]=-c,Ns[1]=c;var d=Math.abs(r-n);if(d<1e-4)return 0;if(d>=gf-1e-4){r=0,n=gf;var u=i?1:-1;return l>=Ns[0]+a&&l<=Ns[1]+a?u:0}if(r>n){var h=r;r=n,n=h}r<0&&(r+=gf,n+=gf);for(var f=0,p=0;p<2;p++){var g=Ns[p];if(g+a>l){var b=Math.atan2(o,g),u=i?1:-1;b<0&&(b=gf+b),(b>=r&&b<=n||b+gf>=r&&b+gf<=n)&&(b>Math.PI/2&&b<Math.PI*1.5&&(u=-u),f+=u)}}return f}function AW(a,e,t,r,n){for(var i=a.data,l=a.len(),o=0,c=0,d=0,u=0,h=0,f,p,g=0;g<l;){var b=i[g++],w=g===1;switch(b===Mu.M&&g>1&&(t||(o+=yd(c,d,u,h,r,n))),w&&(c=i[g],d=i[g+1],u=c,h=d),b){case Mu.M:u=i[g++],h=i[g++],c=u,d=h;break;case Mu.L:if(t){if(Vu(c,d,i[g],i[g+1],e,r,n))return!0}else o+=yd(c,d,i[g],i[g+1],r,n)||0;c=i[g++],d=i[g++];break;case Mu.C:if(t){if(Pge(c,d,i[g++],i[g++],i[g++],i[g++],i[g],i[g+1],e,r,n))return!0}else o+=Hge(c,d,i[g++],i[g++],i[g++],i[g++],i[g],i[g+1],r,n)||0;c=i[g++],d=i[g++];break;case Mu.Q:if(t){if(CW(c,d,i[g++],i[g++],i[g],i[g+1],e,r,n))return!0}else o+=Uge(c,d,i[g++],i[g++],i[g],i[g+1],r,n)||0;c=i[g++],d=i[g++];break;case Mu.A:var j=i[g++],k=i[g++],T=i[g++],E=i[g++],I=i[g++],R=i[g++];g+=1;var P=!!(1-i[g++]);f=Math.cos(I)*T+j,p=Math.sin(I)*E+k,w?(u=f,h=p):o+=yd(c,d,f,p,r,n);var H=(r-j)*E/T+j;if(t){if(zge(j,k,E,I,I+R,P,e,H,n))return!0}else o+=Gge(j,k,E,I,I+R,P,H,n);c=Math.cos(I+R)*T+j,d=Math.sin(I+R)*E+k;break;case Mu.R:u=c=i[g++],h=d=i[g++];var G=i[g++],X=i[g++];if(f=u+G,p=h+X,t){if(Vu(u,h,f,h,e,r,n)||Vu(f,h,f,p,e,r,n)||Vu(f,p,u,p,e,r,n)||Vu(u,p,u,h,e,r,n))return!0}else o+=yd(f,h,f,p,r,n),o+=yd(u,p,u,h,r,n);break;case Mu.Z:if(t){if(Vu(c,d,u,h,e,r,n))return!0}else o+=yd(c,d,u,h,r,n);c=u,d=h;break}}return!t&&!Fge(d,h)&&(o+=yd(c,d,u,h,r,n)||0),o!==0}function Wge(a,e,t){return AW(a,0,!1,e,t)}function Yge(a,e,t,r){return AW(a,e,!0,t,r)}var B2=ta({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},l0),$ge={style:ta({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},pN.style)},V5=Dc.concat(["invisible","culling","z","z2","zlevel","parent"]),Ra=(function(a){Ie(e,a);function e(t){return a.call(this,t)||this}return e.prototype.update=function(){var t=this;a.prototype.update.call(this);var r=this.style;if(r.decal){var n=this._decalEl=this._decalEl||new e;n.buildPath===e.prototype.buildPath&&(n.buildPath=function(c){t.buildPath(c,t.shape)}),n.silent=!0;var i=n.style;for(var l in r)i[l]!==r[l]&&(i[l]=r[l]);i.fill=r.fill?r.decal:null,i.decal=null,i.shadowColor=null,r.strokeFirst&&(i.stroke=null);for(var o=0;o<V5.length;++o)n[V5[o]]=this[V5[o]];n.__dirty|=wl}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(t){var r=Ua(t);this.shape=this.getDefaultShape();var n=this.getDefaultStyle();n&&this.useStyle(n);for(var i=0;i<r.length;i++){var l=r[i],o=t[l];l==="style"?this.style?et(this.style,o):this.useStyle(o):l==="shape"?et(this.shape,o):a.prototype.attrKV.call(this,l,o)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if(t!=="none"){if(At(t)){var r=I2(t,0);return r>.5?H4:r>.2?Sme:U4}else if(t)return U4}return H4},e.prototype.getInsideTextStroke=function(t){var r=this.style.fill;if(At(r)){var n=this.__zr,i=!!(n&&n.isDarkMode()),l=I2(t,0)<V4;if(i===l)return r}},e.prototype.buildPath=function(t,r,n){},e.prototype.pathUpdated=function(){this.__dirty&=~Wp},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new Ic(!1)},e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return!(r==null||r==="none"||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.getBoundingRect=function(){var t=this._rect,r=this.style,n=!t;if(n){var i=!1;this.path||(i=!0,this.createPathProxy());var l=this.path;(i||this.__dirty&Wp)&&(l.beginPath(),this.buildPath(l,this.shape,!1),this.pathUpdated()),t=l.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||n){o.copy(t);var c=r.strokeNoScale?this.getLineScale():1,d=r.lineWidth;if(!this.hasFill()){var u=this.strokeContainThreshold;d=Math.max(d,u??4)}c>1e-10&&(o.width+=d/c,o.height+=d/c,o.x-=d/c/2,o.y-=d/c/2)}return o}return t},e.prototype.contain=function(t,r){var n=this.transformCoordToLocal(t,r),i=this.getBoundingRect(),l=this.style;if(t=n[0],r=n[1],i.contain(t,r)){var o=this.path;if(this.hasStroke()){var c=l.lineWidth,d=l.strokeNoScale?this.getLineScale():1;if(d>1e-10&&(this.hasFill()||(c=Math.max(c,this.strokeContainThreshold)),Yge(o,c/d,t,r)))return!0}if(this.hasFill())return Wge(o,t,r)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=Wp,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():t==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(t,r){t==="shape"?this.setShape(r):a.prototype.attrKV.call(this,t,r)},e.prototype.setShape=function(t,r){var n=this.shape;return n||(n=this.shape={}),typeof t=="string"?n[t]=r:et(n,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&Wp)},e.prototype.createStyle=function(t){return sN(B2,t)},e.prototype._innerSaveToNormal=function(t){a.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.shape&&!r.shape&&(r.shape=et({},this.shape))},e.prototype._applyStateObj=function(t,r,n,i,l,o){a.prototype._applyStateObj.call(this,t,r,n,i,l,o);var c=!(r&&i),d;if(r&&r.shape?l?i?d=r.shape:(d=et({},n.shape),et(d,r.shape)):(d=et({},i?this.shape:n.shape),et(d,r.shape)):c&&(d=n.shape),d)if(l){this.shape=et({},this.shape);for(var u={},h=Ua(d),f=0;f<h.length;f++){var p=h[f];typeof d[p]=="object"?this.shape[p]=d[p]:u[p]=d[p]}this._transitionState(t,{shape:u},o)}else this.shape=d,this.dirtyShape()},e.prototype._mergeStates=function(t){for(var r=a.prototype._mergeStates.call(this,t),n,i=0;i<t.length;i++){var l=t[i];l.shape&&(n=n||{},this._mergeStyle(n,l.shape))}return n&&(r.shape=n),r},e.prototype.getAnimationStyleProps=function(){return $ge},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var r=(function(i){Ie(l,i);function l(o){var c=i.call(this,o)||this;return t.init&&t.init.call(c,o),c}return l.prototype.getDefaultStyle=function(){return Xt(t.style)},l.prototype.getDefaultShape=function(){return Xt(t.shape)},l})(e);for(var n in t)typeof t[n]=="function"&&(r.prototype[n]=t[n]);return r},e.initDefaultProps=(function(){var t=e.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=wl|Vg|Wp})(),e})(so),qge=ta({strokeFirst:!0,font:Ld,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},B2),Ax=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.hasStroke=function(){return kW(this.style)},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.createStyle=function(t){return sN(qge,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){return this._rect||(this._rect=Ege(this.style)),this._rect},e.initDefaultProps=(function(){var t=e.prototype;t.dirtyRectTolerance=10})(),e})(so);Ax.prototype.type="tspan";var Xge=ta({x:0,y:0},l0),Zge={style:ta({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},pN.style)};function Kge(a){return!!(a&&typeof a!="string"&&a.width&&a.height)}var Pi=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.createStyle=function(t){return sN(Xge,t)},e.prototype._getSize=function(t){var r=this.style,n=r[t];if(n!=null)return n;var i=Kge(r.image)?r.image:this.__image;if(!i)return 0;var l=t==="width"?"height":"width",o=r[l];return o==null?i[t]:i[t]/i[l]*o},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return Zge},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new ra(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e})(so);Pi.prototype.type="image";function Qge(a,e){var t=e.x,r=e.y,n=e.width,i=e.height,l=e.r,o,c,d,u;n<0&&(t=t+n,n=-n),i<0&&(r=r+i,i=-i),typeof l=="number"?o=c=d=u=l:l instanceof Array?l.length===1?o=c=d=u=l[0]:l.length===2?(o=d=l[0],c=u=l[1]):l.length===3?(o=l[0],c=u=l[1],d=l[2]):(o=l[0],c=l[1],d=l[2],u=l[3]):o=c=d=u=0;var h;o+c>n&&(h=o+c,o*=n/h,c*=n/h),d+u>n&&(h=d+u,d*=n/h,u*=n/h),c+d>i&&(h=c+d,c*=i/h,d*=i/h),o+u>i&&(h=o+u,o*=i/h,u*=i/h),a.moveTo(t+o,r),a.lineTo(t+n-c,r),c!==0&&a.arc(t+n-c,r+c,c,-Math.PI/2,0),a.lineTo(t+n,r+i-d),d!==0&&a.arc(t+n-d,r+i-d,d,0,Math.PI/2),a.lineTo(t+u,r+i),u!==0&&a.arc(t+u,r+i-u,u,Math.PI/2,Math.PI),a.lineTo(t,r+o),o!==0&&a.arc(t+o,r+o,o,Math.PI,Math.PI*1.5)}var ex=Math.round;function gN(a,e,t){if(e){var r=e.x1,n=e.x2,i=e.y1,l=e.y2;a.x1=r,a.x2=n,a.y1=i,a.y2=l;var o=t&&t.lineWidth;return o&&(ex(r*2)===ex(n*2)&&(a.x1=a.x2=Nl(r,o,!0)),ex(i*2)===ex(l*2)&&(a.y1=a.y2=Nl(i,o,!0))),a}}function TW(a,e,t){if(e){var r=e.x,n=e.y,i=e.width,l=e.height;a.x=r,a.y=n,a.width=i,a.height=l;var o=t&&t.lineWidth;return o&&(a.x=Nl(r,o,!0),a.y=Nl(n,o,!0),a.width=Math.max(Nl(r+i,o,!1)-a.x,i===0?0:1),a.height=Math.max(Nl(n+l,o,!1)-a.y,l===0?0:1)),a}}function Nl(a,e,t){if(!e)return a;var r=ex(a*2);return(r+ex(e))%2===0?r/2:(r+(t?1:-1))/2}var Jge=(function(){function a(){this.x=0,this.y=0,this.width=0,this.height=0}return a})(),eve={},Ea=(function(a){Ie(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Jge},e.prototype.buildPath=function(t,r){var n,i,l,o;if(this.subPixelOptimize){var c=TW(eve,r,this.style);n=c.x,i=c.y,l=c.width,o=c.height,c.r=r.r,r=c}else n=r.x,i=r.y,l=r.width,o=r.height;r.r?Qge(t,r):t.rect(n,i,l,o)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e})(Ra);Ea.prototype.type="rect";var KO={fill:"#000"},QO=2,ac={},tve={style:ta({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},pN.style)},tr=(function(a){Ie(e,a);function e(t){var r=a.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=KO,r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){a.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var r=this._children[t];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},e.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):a.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(t){var r=this.innerTransformable;return r?r.getLocalTransform(t):a.prototype.getLocalTransform.call(this,t)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),a.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,nve(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(t){a.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=t},e.prototype.removeSelfFromZr=function(t){a.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new ra(0,0,0,0),r=this._children,n=[],i=null,l=0;l<r.length;l++){var o=r[l],c=o.getBoundingRect(),d=o.getLocalTransform(n);d?(t.copy(c),t.applyTransform(d),i=i||t.clone(),i.union(t)):(i=i||c.clone(),i.union(c))}this._rect=i||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||KO},e.prototype.setTextContent=function(t){},e.prototype._mergeStyle=function(t,r){if(!r)return t;var n=r.rich,i=t.rich||n&&{};return et(t,r),n&&i?(this._mergeRich(i,n),t.rich=i):i&&(t.rich=i),t},e.prototype._mergeRich=function(t,r){for(var n=Ua(r),i=0;i<n.length;i++){var l=n[i];t[l]=t[l]||{},et(t[l],r[l])}},e.prototype.getAnimationStyleProps=function(){return tve},e.prototype._getOrCreateChild=function(t){var r=this._children[this._childCursor];return(!r||!(r instanceof t))&&(r=new t),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},e.prototype._updatePlainTexts=function(){var t=this.style,r=t.font||Ld,n=t.padding,i=this._defaultStyle,l=t.x||0,o=t.y||0,c=t.align||i.align||"left",d=t.verticalAlign||i.verticalAlign||"top";UO(ac,i.overflowRect,l,o,c,d),l=ac.baseX,o=ac.baseY;var u=iP(t),h=jge(u,t,ac.outerWidth,ac.outerHeight),f=H5(t),p=!!t.backgroundColor,g=h.outerHeight,b=h.outerWidth,w=h.lines,j=h.lineHeight;this.isTruncated=!!h.isTruncated;var k=l,T=s0(o,h.contentHeight,d);if(f||n){var E=Cx(l,b,c),I=s0(o,g,d);f&&this._renderBackground(t,t,E,I,b,g)}T+=j/2,n&&(k=nP(l,c,n),d==="top"?T+=n[0]:d==="bottom"&&(T-=n[2]));for(var R=0,P=!1,H=!1,G=rP("fill"in t?t.fill:(H=!0,i.fill)),X=aP("stroke"in t?t.stroke:!p&&(!i.autoStroke||H)?(R=QO,P=!0,i.stroke):null),U=t.textShadowBlur>0,te=0;te<w.length;te++){var Z=this._getOrCreateChild(Ax),J=Z.createStyle();Z.useStyle(J),J.text=w[te],J.x=k,J.y=T,J.textAlign=c,J.textBaseline="middle",J.opacity=t.opacity,J.strokeFirst=!0,U&&(J.shadowBlur=t.textShadowBlur||0,J.shadowColor=t.textShadowColor||"transparent",J.shadowOffsetX=t.textShadowOffsetX||0,J.shadowOffsetY=t.textShadowOffsetY||0),J.stroke=X,J.fill=G,X&&(J.lineWidth=t.lineWidth||R,J.lineDash=t.lineDash,J.lineDashOffset=t.lineDashOffset||0),J.font=r,eP(J,t),T+=j,Z.setBoundingRect($4(J,h.contentWidth,h.calculatedLineHeight,P?0:null))}},e.prototype._updateRichTexts=function(){var t=this.style,r=this._defaultStyle,n=t.align||r.align,i=t.verticalAlign||r.verticalAlign,l=t.x||0,o=t.y||0;UO(ac,r.overflowRect,l,o,n,i),l=ac.baseX,o=ac.baseY;var c=iP(t),d=Cge(c,t,ac.outerWidth,ac.outerHeight,n),u=d.width,h=d.outerWidth,f=d.outerHeight,p=t.padding;this.isTruncated=!!d.isTruncated;var g=Cx(l,h,n),b=s0(o,f,i),w=g,j=b;p&&(w+=p[3],j+=p[0]);var k=w+u;H5(t)&&this._renderBackground(t,t,g,b,h,f);for(var T=!!t.backgroundColor,E=0;E<d.lines.length;E++){for(var I=d.lines[E],R=I.tokens,P=R.length,H=I.lineHeight,G=I.width,X=0,U=w,te=k,Z=P-1,J=void 0;X<P&&(J=R[X],!J.align||J.align==="left");)this._placeToken(J,t,H,j,U,"left",T),G-=J.width,U+=J.width,X++;for(;Z>=0&&(J=R[Z],J.align==="right");)this._placeToken(J,t,H,j,te,"right",T),G-=J.width,te-=J.width,Z--;for(U+=(u-(U-w)-(k-te)-G)/2;X<=Z;)J=R[X],this._placeToken(J,t,H,j,U+J.width/2,"center",T),U+=J.width,X++;j+=H}},e.prototype._placeToken=function(t,r,n,i,l,o,c){var d=r.rich[t.styleName]||{};d.text=t.text;var u=t.verticalAlign,h=i+n/2;u==="top"?h=i+t.height/2:u==="bottom"&&(h=i+n-t.height/2);var f=!t.isLineHolder&&H5(d);f&&this._renderBackground(d,r,o==="right"?l-t.width:o==="center"?l-t.width/2:l,h-t.height/2,t.width,t.height);var p=!!d.backgroundColor,g=t.textPadding;g&&(l=nP(l,o,g),h-=t.height/2-g[0]-t.innerHeight/2);var b=this._getOrCreateChild(Ax),w=b.createStyle();b.useStyle(w);var j=this._defaultStyle,k=!1,T=0,E=!1,I=rP("fill"in d?d.fill:"fill"in r?r.fill:(k=!0,j.fill)),R=aP("stroke"in d?d.stroke:"stroke"in r?r.stroke:!p&&!c&&(!j.autoStroke||k)?(T=QO,E=!0,j.stroke):null),P=d.textShadowBlur>0||r.textShadowBlur>0;w.text=t.text,w.x=l,w.y=h,P&&(w.shadowBlur=d.textShadowBlur||r.textShadowBlur||0,w.shadowColor=d.textShadowColor||r.textShadowColor||"transparent",w.shadowOffsetX=d.textShadowOffsetX||r.textShadowOffsetX||0,w.shadowOffsetY=d.textShadowOffsetY||r.textShadowOffsetY||0),w.textAlign=o,w.textBaseline="middle",w.font=t.font||Ld,w.opacity=jl(d.opacity,r.opacity,1),eP(w,d),R&&(w.lineWidth=jl(d.lineWidth,r.lineWidth,T),w.lineDash=Ht(d.lineDash,r.lineDash),w.lineDashOffset=r.lineDashOffset||0,w.stroke=R),I&&(w.fill=I),b.setBoundingRect($4(w,t.contentWidth,t.contentHeight,E?0:null))},e.prototype._renderBackground=function(t,r,n,i,l,o){var c=t.backgroundColor,d=t.borderWidth,u=t.borderColor,h=c&&c.image,f=c&&!h,p=t.borderRadius,g=this,b,w;if(f||t.lineHeight||d&&u){b=this._getOrCreateChild(Ea),b.useStyle(b.createStyle()),b.style.fill=null;var j=b.shape;j.x=n,j.y=i,j.width=l,j.height=o,j.r=p,b.dirtyShape()}if(f){var k=b.style;k.fill=c||null,k.fillOpacity=Ht(t.fillOpacity,1)}else if(h){w=this._getOrCreateChild(Pi),w.onload=function(){g.dirtyStyle()};var T=w.style;T.image=c.image,T.x=n,T.y=i,T.width=l,T.height=o}if(d&&u){var k=b.style;k.lineWidth=d,k.stroke=u,k.strokeOpacity=Ht(t.strokeOpacity,1),k.lineDash=t.borderDash,k.lineDashOffset=t.borderDashOffset||0,b.strokeContainThreshold=0,b.hasFill()&&b.hasStroke()&&(k.strokeFirst=!0,k.lineWidth*=2)}var E=(b||w).style;E.shadowBlur=t.shadowBlur||0,E.shadowColor=t.shadowColor||"transparent",E.shadowOffsetX=t.shadowOffsetX||0,E.shadowOffsetY=t.shadowOffsetY||0,E.opacity=jl(t.opacity,r.opacity,1)},e.makeFont=function(t){var r="";return EW(t)&&(r=[t.fontStyle,t.fontWeight,MW(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),r&&eo(r)||t.textFont||t.font},e})(so),ave={left:!0,right:1,center:1},rve={top:1,bottom:1,middle:1},JO=["fontStyle","fontWeight","fontSize","fontFamily"];function MW(a){return typeof a=="string"&&(a.indexOf("px")!==-1||a.indexOf("rem")!==-1||a.indexOf("em")!==-1)?a:isNaN(+a)?CT+"px":a+"px"}function eP(a,e){for(var t=0;t<JO.length;t++){var r=JO[t],n=e[r];n!=null&&(a[r]=n)}}function EW(a){return a.fontSize!=null||a.fontFamily||a.fontWeight}function nve(a){return tP(a),se(a.rich,tP),a}function tP(a){if(a){a.font=tr.makeFont(a);var e=a.align;e==="middle"&&(e="center"),a.align=e==null||ave[e]?e:"left";var t=a.verticalAlign;t==="center"&&(t="middle"),a.verticalAlign=t==null||rve[t]?t:"top";var r=a.padding;r&&(a.padding=iN(a.padding))}}function aP(a,e){return a==null||e<=0||a==="transparent"||a==="none"?null:a.image||a.colorStops?"#000":a}function rP(a){return a==null||a==="none"?null:a.image||a.colorStops?"#000":a}function nP(a,e,t){return e==="right"?a-t[1]:e==="center"?a+t[3]/2-t[1]/2:a+t[3]}function iP(a){var e=a.text;return e!=null&&(e+=""),e}function H5(a){return!!(a.backgroundColor||a.lineHeight||a.borderWidth&&a.borderColor)}var la=Ia(),Z4=function(a,e,t,r){if(r){var n=la(r);n.dataIndex=t,n.dataType=e,n.seriesIndex=a,n.ssrType="chart",r.type==="group"&&r.traverse(function(i){var l=la(i);l.seriesIndex=a,l.dataIndex=t,l.dataType=e,l.ssrType="chart"})}},sP=1,lP={},DW=Ia(),WT=Ia(),YT=0,Tb=1,vN=2,Ms=["emphasis","blur","select"],Gv=["normal","emphasis","blur","select"],$x=10,ive=9,o0="highlight",Hw="downplay",F2="select",K4="unselect",V2="toggleSelect",$T="selectchanged";function _p(a){return a!=null&&a!=="none"}function bN(a,e,t){a.onHoverStateChange&&(a.hoverState||0)!==t&&a.onHoverStateChange(e),a.hoverState=t}function IW(a){bN(a,"emphasis",vN)}function RW(a){a.hoverState===vN&&bN(a,"normal",YT)}function qT(a){bN(a,"blur",Tb)}function LW(a){a.hoverState===Tb&&bN(a,"normal",YT)}function sve(a){a.selected=!0}function lve(a){a.selected=!1}function oP(a,e,t){e(a,t)}function Gd(a,e,t){oP(a,e,t),a.isGroup&&a.traverse(function(r){oP(r,e,t)})}function H2(a,e){switch(e){case"emphasis":a.hoverState=vN;break;case"normal":a.hoverState=YT;break;case"blur":a.hoverState=Tb;break;case"select":a.selected=!0}}function ove(a,e,t,r){for(var n=a.style,i={},l=0;l<e.length;l++){var o=e[l],c=n[o];i[o]=c??(r&&r[o])}for(var l=0;l<a.animators.length;l++){var d=a.animators[l];d.__fromStateTransition&&d.__fromStateTransition.indexOf(t)<0&&d.targetName==="style"&&d.saveTo(i,e)}return i}function cve(a,e,t,r){var n=t&&ja(t,"select")>=0,i=!1;if(a instanceof Ra){var l=DW(a),o=n&&l.selectFill||l.normalFill,c=n&&l.selectStroke||l.normalStroke;if(_p(o)||_p(c)){r=r||{};var d=r.style||{};d.fill==="inherit"?(i=!0,r=et({},r),d=et({},d),d.fill=o):!_p(d.fill)&&_p(o)?(i=!0,r=et({},r),d=et({},d),d.fill=R4(o)):!_p(d.stroke)&&_p(c)&&(i||(r=et({},r),d=et({},d)),d.stroke=R4(c)),r.style=d}}if(r&&r.z2==null){i||(r=et({},r));var u=a.z2EmphasisLift;r.z2=a.z2+(u??$x)}return r}function dve(a,e,t){if(t&&t.z2==null){t=et({},t);var r=a.z2SelectLift;t.z2=a.z2+(r??ive)}return t}function uve(a,e,t){var r=ja(a.currentStates,e)>=0,n=a.style.opacity,i=r?null:ove(a,["opacity"],e,{opacity:1});t=t||{};var l=t.style||{};return l.opacity==null&&(t=et({},t),l=et({opacity:r?n:i.opacity*.1},l),t.style=l),t}function U5(a,e){var t=this.states[a];if(this.style){if(a==="emphasis")return cve(this,a,e,t);if(a==="blur")return uve(this,a,t);if(a==="select")return dve(this,a,t)}return t}function N0(a){a.stateProxy=U5;var e=a.getTextContent(),t=a.getTextGuideLine();e&&(e.stateProxy=U5),t&&(t.stateProxy=U5)}function cP(a,e){!BW(a,e)&&!a.__highByOuter&&Gd(a,IW)}function dP(a,e){!BW(a,e)&&!a.__highByOuter&&Gd(a,RW)}function zd(a,e){a.__highByOuter|=1<<(e||0),Gd(a,IW)}function Bd(a,e){!(a.__highByOuter&=~(1<<(e||0)))&&Gd(a,RW)}function OW(a){Gd(a,qT)}function XT(a){Gd(a,LW)}function PW(a){Gd(a,sve)}function zW(a){Gd(a,lve)}function BW(a,e){return a.__highDownSilentOnTouch&&e.zrByTouch}function FW(a){var e=a.getModel(),t=[],r=[];e.eachComponent(function(n,i){var l=WT(i),o=n==="series",c=o?a.getViewOfSeriesModel(i):a.getViewOfComponentModel(i);!o&&r.push(c),l.isBlured&&(c.group.traverse(function(d){LW(d)}),o&&t.push(i)),l.isBlured=!1}),se(r,function(n){n&&n.toggleBlurSeries&&n.toggleBlurSeries(t,!1,e)})}function Q4(a,e,t,r){var n=r.getModel();t=t||"coordinateSystem";function i(d,u){for(var h=0;h<u.length;h++){var f=d.getItemGraphicEl(u[h]);f&&XT(f)}}if(a!=null&&!(!e||e==="none")){var l=n.getSeriesByIndex(a),o=l.coordinateSystem;o&&o.master&&(o=o.master);var c=[];n.eachSeries(function(d){var u=l===d,h=d.coordinateSystem;h&&h.master&&(h=h.master);var f=h&&o?h===o:u;if(!(t==="series"&&!u||t==="coordinateSystem"&&!f||e==="series"&&u)){var p=r.getViewOfSeriesModel(d);if(p.group.traverse(function(w){w.__highByOuter&&u&&e==="self"||qT(w)}),ds(e))i(d.getData(),e);else if(aa(e))for(var g=Ua(e),b=0;b<g.length;b++)i(d.getData(g[b]),e[g[b]]);c.push(d),WT(d).isBlured=!0}}),n.eachComponent(function(d,u){if(d!=="series"){var h=r.getViewOfComponentModel(u);h&&h.toggleBlurSeries&&h.toggleBlurSeries(c,!0,n)}})}}function J4(a,e,t){if(!(a==null||e==null)){var r=t.getModel().getComponent(a,e);if(r){WT(r).isBlured=!0;var n=t.getViewOfComponentModel(r);!n||!n.focusBlurEnabled||n.group.traverse(function(i){qT(i)})}}}function hve(a,e,t){var r=a.seriesIndex,n=a.getData(e.dataType);if(n){var i=w0(n,e);i=(lt(i)?i[0]:i)||0;var l=n.getItemGraphicEl(i);if(!l)for(var o=n.count(),c=0;!l&&c<o;)l=n.getItemGraphicEl(c++);if(l){var d=la(l);Q4(r,d.focus,d.blurScope,t)}else{var u=a.get(["emphasis","focus"]),h=a.get(["emphasis","blurScope"]);u!=null&&Q4(r,u,h,t)}}}function ZT(a,e,t,r){var n={focusSelf:!1,dispatchers:null};if(a==null||a==="series"||e==null||t==null)return n;var i=r.getModel().getComponent(a,e);if(!i)return n;var l=r.getViewOfComponentModel(i);if(!l||!l.findHighDownDispatchers)return n;for(var o=l.findHighDownDispatchers(t),c,d=0;d<o.length;d++)if(la(o[d]).focus==="self"){c=!0;break}return{focusSelf:c,dispatchers:o}}function fve(a,e,t){var r=la(a),n=ZT(r.componentMainType,r.componentIndex,r.componentHighDownName,t),i=n.dispatchers,l=n.focusSelf;i?(l&&J4(r.componentMainType,r.componentIndex,t),se(i,function(o){return cP(o,e)})):(Q4(r.seriesIndex,r.focus,r.blurScope,t),r.focus==="self"&&J4(r.componentMainType,r.componentIndex,t),cP(a,e))}function pve(a,e,t){FW(t);var r=la(a),n=ZT(r.componentMainType,r.componentIndex,r.componentHighDownName,t).dispatchers;n?se(n,function(i){return dP(i,e)}):dP(a,e)}function xve(a,e,t){if(t3(e)){var r=e.dataType,n=a.getData(r),i=w0(n,e);lt(i)||(i=[i]),a[e.type===V2?"toggleSelect":e.type===F2?"select":"unselect"](i,r)}}function uP(a){var e=a.getAllData();se(e,function(t){var r=t.data,n=t.type;r.eachItemGraphicEl(function(i,l){a.isSelected(l,n)?PW(i):zW(i)})})}function mve(a){var e=[];return a.eachSeries(function(t){var r=t.getAllData();se(r,function(n){n.data;var i=n.type,l=t.getSelectedDataIndices();if(l.length>0){var o={dataIndex:l,seriesIndex:t.seriesIndex};i!=null&&(o.dataType=i),e.push(o)}})}),e}function c0(a,e,t){Xf(a,!0),Gd(a,N0),e3(a,e,t)}function gve(a){Xf(a,!1)}function on(a,e,t,r){r?gve(a):c0(a,e,t)}function e3(a,e,t){var r=la(a);e!=null?(r.focus=e,r.blurScope=t):r.focus&&(r.focus=null)}var hP=["emphasis","blur","select"],vve={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function hi(a,e,t,r){t=t||"itemStyle";for(var n=0;n<hP.length;n++){var i=hP[n],l=e.getModel([i,t]),o=a.ensureState(i);o.style=r?r(l):l[vve[t]]()}}function Xf(a,e){var t=e===!1,r=a;a.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=a.highDownSilentOnTouch),(!t||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!t)}function Wv(a){return!!(a&&a.__highDownDispatcher)}function bve(a,e,t){var r=la(a);r.componentMainType=e.mainType,r.componentIndex=e.componentIndex,r.componentHighDownName=t}function yve(a){var e=lP[a];return e==null&&sP<=32&&(e=lP[a]=sP++),e}function t3(a){var e=a.type;return e===F2||e===K4||e===V2}function fP(a){var e=a.type;return e===o0||e===Hw}function wve(a){var e=DW(a);e.normalFill=a.style.fill,e.normalStroke=a.style.stroke;var t=a.states.select||{};e.selectFill=t.style&&t.style.fill||null,e.selectStroke=t.style&&t.style.stroke||null}var Np=Ic.CMD,_ve=[[],[],[]],pP=Math.sqrt,Nve=Math.atan2;function VW(a,e){if(e){var t=a.data,r=a.len(),n,i,l,o,c,d,u=Np.M,h=Np.C,f=Np.L,p=Np.R,g=Np.A,b=Np.Q;for(l=0,o=0;l<r;){switch(n=t[l++],o=l,i=0,n){case u:i=1;break;case f:i=1;break;case h:i=3;break;case b:i=2;break;case g:var w=e[4],j=e[5],k=pP(e[0]*e[0]+e[1]*e[1]),T=pP(e[2]*e[2]+e[3]*e[3]),E=Nve(-e[1]/T,e[0]/k);t[l]*=k,t[l++]+=w,t[l]*=T,t[l++]+=j,t[l++]*=k,t[l++]*=T,t[l++]+=E,t[l++]+=E,l+=2,o=l;break;case p:d[0]=t[l++],d[1]=t[l++],Fn(d,d,e),t[o++]=d[0],t[o++]=d[1],d[0]+=t[l++],d[1]+=t[l++],Fn(d,d,e),t[o++]=d[0],t[o++]=d[1]}for(c=0;c<i;c++){var I=_ve[c];I[0]=t[l++],I[1]=t[l++],Fn(I,I,e),t[o++]=I[0],t[o++]=I[1]}}a.increaseVersion()}}var G5=Math.sqrt,Ny=Math.sin,jy=Math.cos,tg=Math.PI;function xP(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function a3(a,e){return(a[0]*e[0]+a[1]*e[1])/(xP(a)*xP(e))}function mP(a,e){return(a[0]*e[1]<a[1]*e[0]?-1:1)*Math.acos(a3(a,e))}function gP(a,e,t,r,n,i,l,o,c,d,u){var h=c*(tg/180),f=jy(h)*(a-t)/2+Ny(h)*(e-r)/2,p=-1*Ny(h)*(a-t)/2+jy(h)*(e-r)/2,g=f*f/(l*l)+p*p/(o*o);g>1&&(l*=G5(g),o*=G5(g));var b=(n===i?-1:1)*G5((l*l*(o*o)-l*l*(p*p)-o*o*(f*f))/(l*l*(p*p)+o*o*(f*f)))||0,w=b*l*p/o,j=b*-o*f/l,k=(a+t)/2+jy(h)*w-Ny(h)*j,T=(e+r)/2+Ny(h)*w+jy(h)*j,E=mP([1,0],[(f-w)/l,(p-j)/o]),I=[(f-w)/l,(p-j)/o],R=[(-1*f-w)/l,(-1*p-j)/o],P=mP(I,R);if(a3(I,R)<=-1&&(P=tg),a3(I,R)>=1&&(P=0),P<0){var H=Math.round(P/tg*1e6)/1e6;P=tg*2+H%2*tg}u.addData(d,k,T,l,o,E,P,h,i)}var jve=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,Sve=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function kve(a){var e=new Ic;if(!a)return e;var t=0,r=0,n=t,i=r,l,o=Ic.CMD,c=a.match(jve);if(!c)return e;for(var d=0;d<c.length;d++){for(var u=c[d],h=u.charAt(0),f=void 0,p=u.match(Sve)||[],g=p.length,b=0;b<g;b++)p[b]=parseFloat(p[b]);for(var w=0;w<g;){var j=void 0,k=void 0,T=void 0,E=void 0,I=void 0,R=void 0,P=void 0,H=t,G=r,X=void 0,U=void 0;switch(h){case"l":t+=p[w++],r+=p[w++],f=o.L,e.addData(f,t,r);break;case"L":t=p[w++],r=p[w++],f=o.L,e.addData(f,t,r);break;case"m":t+=p[w++],r+=p[w++],f=o.M,e.addData(f,t,r),n=t,i=r,h="l";break;case"M":t=p[w++],r=p[w++],f=o.M,e.addData(f,t,r),n=t,i=r,h="L";break;case"h":t+=p[w++],f=o.L,e.addData(f,t,r);break;case"H":t=p[w++],f=o.L,e.addData(f,t,r);break;case"v":r+=p[w++],f=o.L,e.addData(f,t,r);break;case"V":r=p[w++],f=o.L,e.addData(f,t,r);break;case"C":f=o.C,e.addData(f,p[w++],p[w++],p[w++],p[w++],p[w++],p[w++]),t=p[w-2],r=p[w-1];break;case"c":f=o.C,e.addData(f,p[w++]+t,p[w++]+r,p[w++]+t,p[w++]+r,p[w++]+t,p[w++]+r),t+=p[w-2],r+=p[w-1];break;case"S":j=t,k=r,X=e.len(),U=e.data,l===o.C&&(j+=t-U[X-4],k+=r-U[X-3]),f=o.C,H=p[w++],G=p[w++],t=p[w++],r=p[w++],e.addData(f,j,k,H,G,t,r);break;case"s":j=t,k=r,X=e.len(),U=e.data,l===o.C&&(j+=t-U[X-4],k+=r-U[X-3]),f=o.C,H=t+p[w++],G=r+p[w++],t+=p[w++],r+=p[w++],e.addData(f,j,k,H,G,t,r);break;case"Q":H=p[w++],G=p[w++],t=p[w++],r=p[w++],f=o.Q,e.addData(f,H,G,t,r);break;case"q":H=p[w++]+t,G=p[w++]+r,t+=p[w++],r+=p[w++],f=o.Q,e.addData(f,H,G,t,r);break;case"T":j=t,k=r,X=e.len(),U=e.data,l===o.Q&&(j+=t-U[X-4],k+=r-U[X-3]),t=p[w++],r=p[w++],f=o.Q,e.addData(f,j,k,t,r);break;case"t":j=t,k=r,X=e.len(),U=e.data,l===o.Q&&(j+=t-U[X-4],k+=r-U[X-3]),t+=p[w++],r+=p[w++],f=o.Q,e.addData(f,j,k,t,r);break;case"A":T=p[w++],E=p[w++],I=p[w++],R=p[w++],P=p[w++],H=t,G=r,t=p[w++],r=p[w++],f=o.A,gP(H,G,t,r,R,P,T,E,I,f,e);break;case"a":T=p[w++],E=p[w++],I=p[w++],R=p[w++],P=p[w++],H=t,G=r,t+=p[w++],r+=p[w++],f=o.A,gP(H,G,t,r,R,P,T,E,I,f,e);break}}(h==="z"||h==="Z")&&(f=o.Z,e.addData(f),t=n,r=i),l=f}return e.toStatic(),e}var HW=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.applyTransform=function(t){},e})(Ra);function UW(a){return a.setData!=null}function GW(a,e){var t=kve(a),r=et({},e);return r.buildPath=function(n){var i=UW(n);if(i&&n.canSave()){n.appendPath(t);var l=n.getContext();l&&n.rebuildPath(l,1)}else{var l=i?n.getContext():n;l&&t.rebuildPath(l,1)}},r.applyTransform=function(n){VW(t,n),this.dirtyShape()},r}function WW(a,e){return new HW(GW(a,e))}function Cve(a,e){var t=GW(a,e),r=(function(n){Ie(i,n);function i(l){var o=n.call(this,l)||this;return o.applyTransform=t.applyTransform,o.buildPath=t.buildPath,o}return i})(HW);return r}function Ave(a,e){for(var t=[],r=a.length,n=0;n<r;n++){var i=a[n];t.push(i.getUpdatedPathProxy(!0))}var l=new Ra(e);return l.createPathProxy(),l.buildPath=function(o){if(UW(o)){o.appendPath(t);var c=o.getContext();c&&o.rebuildPath(c,1)}},l}function KT(a,e){e=e||{};var t=new Ra;return a.shape&&t.setShape(a.shape),t.setStyle(a.style),e.bakeTransform?VW(t.path,a.getComputedTransform()):e.toLocal?t.setLocalTransform(a.getComputedTransform()):t.copyTransform(a),t.buildPath=a.buildPath,t.applyTransform=t.applyTransform,t.z=a.z,t.z2=a.z2,t.zlevel=a.zlevel,t}var Tve=(function(){function a(){this.cx=0,this.cy=0,this.r=0}return a})(),Wd=(function(a){Ie(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Tve},e.prototype.buildPath=function(t,r){t.moveTo(r.cx+r.r,r.cy),t.arc(r.cx,r.cy,r.r,0,Math.PI*2)},e})(Ra);Wd.prototype.type="circle";var Mve=(function(){function a(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return a})(),yN=(function(a){Ie(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Mve},e.prototype.buildPath=function(t,r){var n=.5522848,i=r.cx,l=r.cy,o=r.rx,c=r.ry,d=o*n,u=c*n;t.moveTo(i-o,l),t.bezierCurveTo(i-o,l-u,i-d,l-c,i,l-c),t.bezierCurveTo(i+d,l-c,i+o,l-u,i+o,l),t.bezierCurveTo(i+o,l+u,i+d,l+c,i,l+c),t.bezierCurveTo(i-d,l+c,i-o,l+u,i-o,l),t.closePath()},e})(Ra);yN.prototype.type="ellipse";var YW=Math.PI,W5=YW*2,vf=Math.sin,jp=Math.cos,Eve=Math.acos,as=Math.atan2,vP=Math.abs,dv=Math.sqrt,Ug=Math.max,rc=Math.min,yo=1e-4;function Dve(a,e,t,r,n,i,l,o){var c=t-a,d=r-e,u=l-n,h=o-i,f=h*c-u*d;if(!(f*f<yo))return f=(u*(e-i)-h*(a-n))/f,[a+f*c,e+f*d]}function Sy(a,e,t,r,n,i,l){var o=a-t,c=e-r,d=(l?i:-i)/dv(o*o+c*c),u=d*c,h=-d*o,f=a+u,p=e+h,g=t+u,b=r+h,w=(f+g)/2,j=(p+b)/2,k=g-f,T=b-p,E=k*k+T*T,I=n-i,R=f*b-g*p,P=(T<0?-1:1)*dv(Ug(0,I*I*E-R*R)),H=(R*T-k*P)/E,G=(-R*k-T*P)/E,X=(R*T+k*P)/E,U=(-R*k+T*P)/E,te=H-w,Z=G-j,J=X-w,B=U-j;return te*te+Z*Z>J*J+B*B&&(H=X,G=U),{cx:H,cy:G,x0:-u,y0:-h,x1:H*(n/I-1),y1:G*(n/I-1)}}function Ive(a){var e;if(lt(a)){var t=a.length;if(!t)return a;t===1?e=[a[0],a[0],0,0]:t===2?e=[a[0],a[0],a[1],a[1]]:t===3?e=a.concat(a[2]):e=a}else e=[a,a,a,a];return e}function Rve(a,e){var t,r=Ug(e.r,0),n=Ug(e.r0||0,0),i=r>0,l=n>0;if(!(!i&&!l)){if(i||(r=n,n=0),n>r){var o=r;r=n,n=o}var c=e.startAngle,d=e.endAngle;if(!(isNaN(c)||isNaN(d))){var u=e.cx,h=e.cy,f=!!e.clockwise,p=vP(d-c),g=p>W5&&p%W5;if(g>yo&&(p=g),!(r>yo))a.moveTo(u,h);else if(p>W5-yo)a.moveTo(u+r*jp(c),h+r*vf(c)),a.arc(u,h,r,c,d,!f),n>yo&&(a.moveTo(u+n*jp(d),h+n*vf(d)),a.arc(u,h,n,d,c,f));else{var b=void 0,w=void 0,j=void 0,k=void 0,T=void 0,E=void 0,I=void 0,R=void 0,P=void 0,H=void 0,G=void 0,X=void 0,U=void 0,te=void 0,Z=void 0,J=void 0,B=r*jp(c),W=r*vf(c),$=n*jp(d),Q=n*vf(d),ne=p>yo;if(ne){var re=e.cornerRadius;re&&(t=Ive(re),b=t[0],w=t[1],j=t[2],k=t[3]);var K=vP(r-n)/2;if(T=rc(K,j),E=rc(K,k),I=rc(K,b),R=rc(K,w),G=P=Ug(T,E),X=H=Ug(I,R),(P>yo||H>yo)&&(U=r*jp(d),te=r*vf(d),Z=n*jp(c),J=n*vf(c),p<YW)){var ae=Dve(B,W,Z,J,U,te,$,Q);if(ae){var ce=B-ae[0],de=W-ae[1],he=U-ae[0],pe=te-ae[1],Re=1/vf(Eve((ce*he+de*pe)/(dv(ce*ce+de*de)*dv(he*he+pe*pe)))/2),Te=dv(ae[0]*ae[0]+ae[1]*ae[1]);G=rc(P,(r-Te)/(Re+1)),X=rc(H,(n-Te)/(Re-1))}}}if(!ne)a.moveTo(u+B,h+W);else if(G>yo){var ke=rc(j,G),Le=rc(k,G),Ne=Sy(Z,J,B,W,r,ke,f),_e=Sy(U,te,$,Q,r,Le,f);a.moveTo(u+Ne.cx+Ne.x0,h+Ne.cy+Ne.y0),G<P&&ke===Le?a.arc(u+Ne.cx,h+Ne.cy,G,as(Ne.y0,Ne.x0),as(_e.y0,_e.x0),!f):(ke>0&&a.arc(u+Ne.cx,h+Ne.cy,ke,as(Ne.y0,Ne.x0),as(Ne.y1,Ne.x1),!f),a.arc(u,h,r,as(Ne.cy+Ne.y1,Ne.cx+Ne.x1),as(_e.cy+_e.y1,_e.cx+_e.x1),!f),Le>0&&a.arc(u+_e.cx,h+_e.cy,Le,as(_e.y1,_e.x1),as(_e.y0,_e.x0),!f))}else a.moveTo(u+B,h+W),a.arc(u,h,r,c,d,!f);if(!(n>yo)||!ne)a.lineTo(u+$,h+Q);else if(X>yo){var ke=rc(b,X),Le=rc(w,X),Ne=Sy($,Q,U,te,n,-Le,f),_e=Sy(B,W,Z,J,n,-ke,f);a.lineTo(u+Ne.cx+Ne.x0,h+Ne.cy+Ne.y0),X<H&&ke===Le?a.arc(u+Ne.cx,h+Ne.cy,X,as(Ne.y0,Ne.x0),as(_e.y0,_e.x0),!f):(Le>0&&a.arc(u+Ne.cx,h+Ne.cy,Le,as(Ne.y0,Ne.x0),as(Ne.y1,Ne.x1),!f),a.arc(u,h,n,as(Ne.cy+Ne.y1,Ne.cx+Ne.x1),as(_e.cy+_e.y1,_e.cx+_e.x1),f),ke>0&&a.arc(u+_e.cx,h+_e.cy,ke,as(_e.y1,_e.x1),as(_e.y0,_e.x0),!f))}else a.lineTo(u+$,h+Q),a.arc(u,h,n,d,c,f)}a.closePath()}}}var Lve=(function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return a})(),hs=(function(a){Ie(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Lve},e.prototype.buildPath=function(t,r){Rve(t,r)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e})(Ra);hs.prototype.type="sector";var Ove=(function(){function a(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return a})(),Mb=(function(a){Ie(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Ove},e.prototype.buildPath=function(t,r){var n=r.cx,i=r.cy,l=Math.PI*2;t.moveTo(n+r.r,i),t.arc(n,i,r.r,0,l,!1),t.moveTo(n+r.r0,i),t.arc(n,i,r.r0,0,l,!0)},e})(Ra);Mb.prototype.type="ring";function Pve(a,e,t,r){var n=[],i=[],l=[],o=[],c,d,u,h;if(r){u=[1/0,1/0],h=[-1/0,-1/0];for(var f=0,p=a.length;f<p;f++)Ju(u,u,a[f]),eh(h,h,a[f]);Ju(u,u,r[0]),eh(h,h,r[1])}for(var f=0,p=a.length;f<p;f++){var g=a[f];if(t)c=a[f?f-1:p-1],d=a[(f+1)%p];else if(f===0||f===p-1){n.push(Td(a[f]));continue}else c=a[f-1],d=a[f+1];$f(i,d,c),Lw(i,i,e);var b=N4(g,c),w=N4(g,d),j=b+w;j!==0&&(b/=j,w/=j),Lw(l,i,-b),Lw(o,i,w);var k=lO([],g,l),T=lO([],g,o);r&&(eh(k,k,u),Ju(k,k,h),eh(T,T,u),Ju(T,T,h)),n.push(k),n.push(T)}return t&&n.push(n.shift()),n}function $W(a,e,t){var r=e.smooth,n=e.points;if(n&&n.length>=2){if(r){var i=Pve(n,r,t,e.smoothConstraint);a.moveTo(n[0][0],n[0][1]);for(var l=n.length,o=0;o<(t?l:l-1);o++){var c=i[o*2],d=i[o*2+1],u=n[(o+1)%l];a.bezierCurveTo(c[0],c[1],d[0],d[1],u[0],u[1])}}else{a.moveTo(n[0][0],n[0][1]);for(var o=1,h=n.length;o<h;o++)a.lineTo(n[o][0],n[o][1])}t&&a.closePath()}}var zve=(function(){function a(){this.points=null,this.smooth=0,this.smoothConstraint=null}return a})(),fs=(function(a){Ie(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new zve},e.prototype.buildPath=function(t,r){$W(t,r,!0)},e})(Ra);fs.prototype.type="polygon";var Bve=(function(){function a(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return a})(),Xi=(function(a){Ie(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Bve},e.prototype.buildPath=function(t,r){$W(t,r,!1)},e})(Ra);Xi.prototype.type="polyline";var Fve={},Vve=(function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a})(),qn=(function(a){Ie(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Vve},e.prototype.buildPath=function(t,r){var n,i,l,o;if(this.subPixelOptimize){var c=gN(Fve,r,this.style);n=c.x1,i=c.y1,l=c.x2,o=c.y2}else n=r.x1,i=r.y1,l=r.x2,o=r.y2;var d=r.percent;d!==0&&(t.moveTo(n,i),d<1&&(l=n*(1-d)+l*d,o=i*(1-d)+o*d),t.lineTo(l,o))},e.prototype.pointAt=function(t){var r=this.shape;return[r.x1*(1-t)+r.x2*t,r.y1*(1-t)+r.y2*t]},e})(Ra);qn.prototype.type="line";var Ws=[],Hve=(function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return a})();function bP(a,e,t){var r=a.cpx2,n=a.cpy2;return r!=null||n!=null?[(t?yO:bi)(a.x1,a.cpx1,a.cpx2,a.x2,e),(t?yO:bi)(a.y1,a.cpy1,a.cpy2,a.y2,e)]:[(t?M4:Ei)(a.x1,a.cpx1,a.x2,e),(t?M4:Ei)(a.y1,a.cpy1,a.y2,e)]}var Eb=(function(a){Ie(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Hve},e.prototype.buildPath=function(t,r){var n=r.x1,i=r.y1,l=r.x2,o=r.y2,c=r.cpx1,d=r.cpy1,u=r.cpx2,h=r.cpy2,f=r.percent;f!==0&&(t.moveTo(n,i),u==null||h==null?(f<1&&(Bv(n,c,l,f,Ws),c=Ws[1],l=Ws[2],Bv(i,d,o,f,Ws),d=Ws[1],o=Ws[2]),t.quadraticCurveTo(c,d,l,o)):(f<1&&(yh(n,c,u,l,f,Ws),c=Ws[1],u=Ws[2],l=Ws[3],yh(i,d,h,o,f,Ws),d=Ws[1],h=Ws[2],o=Ws[3]),t.bezierCurveTo(c,d,u,h,l,o)))},e.prototype.pointAt=function(t){return bP(this.shape,t,!1)},e.prototype.tangentAt=function(t){var r=bP(this.shape,t,!0);return Gx(r,r)},e})(Ra);Eb.prototype.type="bezier-curve";var Uve=(function(){function a(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a})(),wN=(function(a){Ie(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Uve},e.prototype.buildPath=function(t,r){var n=r.cx,i=r.cy,l=Math.max(r.r,0),o=r.startAngle,c=r.endAngle,d=r.clockwise,u=Math.cos(o),h=Math.sin(o);t.moveTo(u*l+n,h*l+i),t.arc(n,i,l,o,c,!d)},e})(Ra);wN.prototype.type="arc";var _N=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="compound",t}return e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,r=this.shapeChanged(),n=0;n<t.length;n++)r=r||t[n].shapeChanged();r&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],r=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(r[0],r[1],t[n].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,r){for(var n=r.paths||[],i=0;i<n.length;i++)n[i].buildPath(t,n[i].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],r=0;r<t.length;r++)t[r].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Ra.prototype.getBoundingRect.call(this)},e})(Ra),qW=(function(){function a(e){this.colorStops=e||[]}return a.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},a})(),qx=(function(a){Ie(e,a);function e(t,r,n,i,l,o){var c=a.call(this,l)||this;return c.x=t??0,c.y=r??0,c.x2=n??1,c.y2=i??0,c.type="linear",c.global=o||!1,c}return e})(qW),XW=(function(a){Ie(e,a);function e(t,r,n,i,l){var o=a.call(this,i)||this;return o.x=t??.5,o.y=r??.5,o.r=n??.5,o.type="radial",o.global=l||!1,o}return e})(qW),Y5=Math.min,Gve=Math.max,ky=Math.abs,bf=[0,0],yf=[0,0],Mi=OG(),Cy=Mi.minTv,Ay=Mi.maxTv,ZW=(function(){function a(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new Qt;for(var r=0;r<2;r++)this._axes[r]=new Qt;e&&this.fromBoundingRect(e,t)}return a.prototype.fromBoundingRect=function(e,t){var r=this._corners,n=this._axes,i=e.x,l=e.y,o=i+e.width,c=l+e.height;if(r[0].set(i,l),r[1].set(o,l),r[2].set(o,c),r[3].set(i,c),t)for(var d=0;d<4;d++)r[d].transform(t);Qt.sub(n[0],r[1],r[0]),Qt.sub(n[1],r[3],r[0]),n[0].normalize(),n[1].normalize();for(var d=0;d<2;d++)this._origin[d]=n[d].dot(r[0])},a.prototype.intersect=function(e,t,r){var n=!0,i=!t;return t&&Qt.set(t,0,0),Mi.reset(r,!i),!this._intersectCheckOneSide(this,e,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(e,this,i,-1)&&(n=!1,i)||!i&&!Mi.negativeSize&&Qt.copy(t,n?Mi.useDir?Mi.dirMinTv:Cy:Ay),n},a.prototype._intersectCheckOneSide=function(e,t,r,n){for(var i=!0,l=0;l<2;l++){var o=e._axes[l];if(e._getProjMinMaxOnAxis(l,e._corners,bf),e._getProjMinMaxOnAxis(l,t._corners,yf),Mi.negativeSize||bf[1]<yf[0]||bf[0]>yf[1]){if(i=!1,Mi.negativeSize||r)return i;var c=ky(yf[0]-bf[1]),d=ky(bf[0]-yf[1]);Y5(c,d)>Ay.len()&&(c<d?Qt.scale(Ay,o,-c*n):Qt.scale(Ay,o,d*n))}else if(!r){var c=ky(yf[0]-bf[1]),d=ky(bf[0]-yf[1]);(Mi.useDir||Y5(c,d)<Cy.len())&&((c<d||!Mi.bidirectional)&&(Qt.scale(Cy,o,c*n),Mi.useDir&&Mi.calcDirMTV()),(c>=d||!Mi.bidirectional)&&(Qt.scale(Cy,o,-d*n),Mi.useDir&&Mi.calcDirMTV()))}}return i},a.prototype._getProjMinMaxOnAxis=function(e,t,r){for(var n=this._axes[e],i=this._origin,l=t[0].dot(n)+i[e],o=l,c=l,d=1;d<t.length;d++){var u=t[d].dot(n)+i[e];o=Y5(u,o),c=Gve(u,c)}r[0]=o+Mi.touchThreshold,r[1]=c-Mi.touchThreshold,Mi.negativeSize=r[1]<r[0]},a})(),Wve=[],Yve=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,r){r?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,r){r=r||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],r)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var r=this._cursor;r<this._displayables.length;r++)t&&t(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)t&&t(this._temporaryDisplayables[r])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var r=this._displayables[t];r.parent=this,r.update(),r.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var r=this._temporaryDisplayables[t];r.parent=this,r.update(),r.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new ra(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var n=this._displayables[r],i=n.getBoundingRect().clone();n.needLocalTransform()&&i.applyTransform(n.getLocalTransform(Wve)),t.union(i)}this._rect=t}return this._rect},e.prototype.contain=function(t,r){var n=this.transformCoordToLocal(t,r),i=this.getBoundingRect();if(i.contain(n[0],n[1]))for(var l=0;l<this._displayables.length;l++){var o=this._displayables[l];if(o.contain(t,r))return!0}return!1},e})(so),KW=Ia();function Xx(a,e,t,r,n){var i;if(e&&e.ecModel){var l=e.ecModel.getUpdatePayload();i=l&&l.animation}var o=e&&e.isAnimationEnabled(),c=a==="update";if(o){var d=void 0,u=void 0,h=void 0;r?(d=Ht(r.duration,200),u=Ht(r.easing,"cubicOut"),h=0):(d=e.getShallow(c?"animationDurationUpdate":"animationDuration"),u=e.getShallow(c?"animationEasingUpdate":"animationEasing"),h=e.getShallow(c?"animationDelayUpdate":"animationDelay")),i&&(i.duration!=null&&(d=i.duration),i.easing!=null&&(u=i.easing),i.delay!=null&&(h=i.delay)),Yt(h)&&(h=h(t,n)),Yt(d)&&(d=d(t));var f={duration:d||0,delay:h,easing:u};return f}else return null}function QT(a,e,t,r,n,i,l){var o=!1,c;Yt(n)?(l=i,i=n,n=null):aa(n)&&(i=n.cb,l=n.during,o=n.isFrom,c=n.removeOpt,n=n.dataIndex);var d=a==="leave";d||e.stopAnimation("leave");var u=Xx(a,r,n,d?c||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(e,n):null);if(u&&u.duration>0){var h=u.duration,f=u.delay,p=u.easing,g={duration:h,delay:f||0,easing:p,done:i,force:!!i||!!l,setToFinal:!d,scope:a,during:l};o?e.animateFrom(t,g):e.animateTo(t,g)}else e.stopAnimation(),!o&&e.attr(t),l&&l(1),i&&i()}function nr(a,e,t,r,n,i){QT("update",a,e,t,r,n,i)}function en(a,e,t,r,n,i){QT("enter",a,e,t,r,n,i)}function hx(a){if(!a.__zr)return!0;for(var e=0;e<a.animators.length;e++){var t=a.animators[e];if(t.scope==="leave")return!0}return!1}function wh(a,e,t,r,n,i){hx(a)||QT("leave",a,e,t,r,n,i)}function yP(a,e,t,r){a.removeTextContent(),a.removeTextGuideLine(),wh(a,{style:{opacity:0}},e,t,r)}function Md(a,e,t){function r(){a.parent&&a.parent.remove(a)}a.isGroup?a.traverse(function(n){n.isGroup||yP(n,e,t,r)}):yP(a,e,t,r)}function lo(a){KW(a).oldStyle=a.style}function $ve(a){return KW(a).oldStyle}var r3={},fa=["x","y"],Kn=["width","height"];function qve(a){return Ra.extend(a)}var Xve=Cve;function Zve(a,e){return Xve(a,e)}function zo(a,e){r3[a]=e}function U2(a){if(r3.hasOwnProperty(a))return r3[a]}function Yv(a,e,t,r){var n=WW(a,e);return t&&(r==="center"&&(t=JW(t,n.getBoundingRect())),eY(n,t)),n}function QW(a,e,t){var r=new Pi({style:{image:a,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(n){if(t==="center"){var i={width:n.width,height:n.height};r.setStyle(JW(e,i))}}});return r}function JW(a,e){var t=e.width/e.height,r=a.height*t,n;r<=a.width?n=a.height:(r=a.width,n=r/t);var i=a.x+a.width/2,l=a.y+a.height/2;return{x:i-r/2,y:l-n/2,width:r,height:n}}var Ql=Ave;function eY(a,e){if(a.applyTransform){var t=a.getBoundingRect(),r=t.calculateTransform(e);a.applyTransform(r)}}function Tx(a,e){return gN(a,a,{lineWidth:e}),a}function Kve(a,e){return TW(a,a,e),a}var Uw=Nl;function d0(a,e){for(var t=lN([]);a&&a!==e;)Sc(t,a.getLocalTransform(),t),a=a.parent;return t}function To(a,e,t){return e&&!ds(e)&&(e=Cd.getLocalTransform(e)),t&&(e=Io([],e)),Fn([],a,e)}function NN(a,e,t){var r=e[4]===0||e[5]===0||e[0]===0?1:xc(2*e[4]/e[0]),n=e[4]===0||e[5]===0||e[2]===0?1:xc(2*e[4]/e[2]),i=[a==="left"?-r:a==="right"?r:0,a==="top"?-n:a==="bottom"?n:0];return i=To(i,e,t),xc(i[0])>xc(i[1])?i[0]>0?"right":"left":i[1]>0?"bottom":"top"}function wP(a){return!a.isGroup}function Qve(a){return a.shape!=null}function Db(a,e,t){if(!a||!e)return;function r(l){var o={};return l.traverse(function(c){wP(c)&&c.anid&&(o[c.anid]=c)}),o}function n(l){var o={x:l.x,y:l.y,rotation:l.rotation};return Qve(l)&&(o.shape=Xt(l.shape)),o}var i=r(a);e.traverse(function(l){if(wP(l)&&l.anid){var o=i[l.anid];if(o){var c=n(l);l.attr(n(o)),nr(l,c,t,la(l).dataIndex)}}})}function tY(a,e){return ct(a,function(t){var r=t[0];r=zn(r,e.x),r=Sl(r,e.x+e.width);var n=t[1];return n=zn(n,e.y),n=Sl(n,e.y+e.height),[r,n]})}function Jve(a,e){var t=zn(a.x,e.x),r=Sl(a.x+a.width,e.x+e.width),n=zn(a.y,e.y),i=Sl(a.y+a.height,e.y+e.height);if(r>=t&&i>=n)return{x:t,y:n,width:r-t,height:i-n}}function Ib(a,e,t){var r=et({rectHover:!0},e),n=r.style={strokeNoScale:!0};if(t=t||{x:-1,y:-1,width:2,height:2},a)return a.indexOf("image://")===0?(n.image=a.slice(8),ta(n,t),new Pi(r)):Yv(a.replace("path://",""),r,t,"center")}function Gg(a,e,t,r,n){for(var i=0,l=n[n.length-1];i<n.length;i++){var o=n[i];if(aY(a,e,t,r,o[0],o[1],l[0],l[1]))return!0;l=o}}function aY(a,e,t,r,n,i,l,o){var c=t-a,d=r-e,u=l-n,h=o-i,f=$5(u,h,c,d);if(ebe(f))return!1;var p=a-n,g=e-i,b=$5(p,g,c,d)/f;if(b<0||b>1)return!1;var w=$5(p,g,u,h)/f;return!(w<0||w>1)}function $5(a,e,t,r){return a*r-t*e}function ebe(a){return a<=1e-6&&a>=-1e-6}function j0(a,e,t,r,n){return e==null||(Ka(e)?hn[0]=hn[1]=hn[2]=hn[3]=e:(hn[0]=e[0],hn[1]=e[1],hn[2]=e[2],hn[3]=e[3]),r&&(hn[0]=zn(0,hn[0]),hn[1]=zn(0,hn[1]),hn[2]=zn(0,hn[2]),hn[3]=zn(0,hn[3])),t&&(hn[0]=-hn[0],hn[1]=-hn[1],hn[2]=-hn[2],hn[3]=-hn[3]),_P(a,hn,"x","width",3,1,n&&n[0]||0),_P(a,hn,"y","height",0,2,n&&n[1]||0)),a}var hn=[0,0,0,0];function _P(a,e,t,r,n,i,l){var o=e[i]+e[n],c=a[r];a[r]+=o,l=zn(0,Sl(l,c)),a[r]<l?(a[r]=l,a[t]+=e[n]>=0?-e[n]:e[i]>=0?c+e[i]:xc(o)>1e-8?(c-l)*e[n]/o:0):a[t]-=e[n]}function Yd(a){var e=a.itemTooltipOption,t=a.componentModel,r=a.itemName,n=At(e)?{formatter:e}:e,i=t.mainType,l=t.componentIndex,o={componentType:i,name:r,$vars:["name"]};o[i+"Index"]=l;var c=a.formatterParamsExtra;c&&se(Ua(c),function(u){Rt(o,u)||(o[u]=c[u],o.$vars.push(u))});var d=la(a.el);d.componentMainType=i,d.componentIndex=l,d.tooltipConfig={name:r,option:ta({content:r,encodeHTMLContent:!0,formatterParams:o},n)}}function n3(a,e){var t;a.isGroup&&(t=e(a)),t||a.traverse(e)}function Eh(a,e){if(a)if(lt(a))for(var t=0;t<a.length;t++)n3(a[t],e);else n3(a,e)}function JT(a){return!a||xc(a[1])<Ty&&xc(a[2])<Ty||xc(a[0])<Ty&&xc(a[3])<Ty}var Ty=1e-5;function $v(a,e){return a?ra.copy(a,e):e.clone()}function eM(a,e){return e?oN(a||Li(),e):void 0}function S0(a){return{z:a.get("z")||0,zlevel:a.get("zlevel")||0}}function rY(a){var e=-1/0,t=1/0;n3(a,function(i){r(i),r(i.getTextContent()),r(i.getTextGuideLine())});function r(i){if(!(!i||i.isGroup)){var l=i.currentStates;if(l.length)for(var o=0;o<l.length;o++)n(i.states[l[o]]);n(i)}}function n(i){if(i){var l=i.z2;l>e&&(e=l),l<t&&(t=l)}}return t>e&&(t=e=0),{min:t,max:e}}function jN(a,e,t){nY(a,e,t,-1/0)}function nY(a,e,t,r){if(a.ignoreModelZ)return r;var n=a.getTextContent(),i=a.getTextGuideLine(),l=a.isGroup;if(l)for(var o=a.childrenRef(),c=0;c<o.length;c++)r=zn(nY(o[c],e,t,r),r);else a.z=e,a.zlevel=t,r=zn(a.z2||0,r);if(n&&(n.z=e,n.zlevel=t,isFinite(r)&&(n.z2=r+2)),i){var d=a.textGuideLineConfig;i.z=e,i.zlevel=t,isFinite(r)&&(i.z2=r+(d&&d.showAbove?1:-1))}return r}zo("circle",Wd);zo("ellipse",yN);zo("sector",hs);zo("ring",Mb);zo("polygon",fs);zo("polyline",Xi);zo("rect",Ea);zo("line",qn);zo("bezierCurve",Eb);zo("arc",wN);const R0=Object.freeze(Object.defineProperty({__proto__:null,Arc:wN,BezierCurve:Eb,BoundingRect:ra,Circle:Wd,CompoundPath:_N,Ellipse:yN,Group:$t,Image:Pi,IncrementalDisplayable:Yve,Line:qn,LinearGradient:qx,OrientedBoundingRect:ZW,Path:Ra,Point:Qt,Polygon:fs,Polyline:Xi,RadialGradient:XW,Rect:Ea,Ring:Mb,Sector:hs,Text:tr,WH:Kn,XY:fa,applyTransform:To,calcZ2Range:rY,clipPointsByRect:tY,clipRectByRect:Jve,createIcon:Ib,ensureCopyRect:$v,ensureCopyTransform:eM,expandOrShrinkRect:j0,extendPath:Zve,extendShape:qve,getShapeClass:U2,getTransform:d0,groupTransition:Db,initProps:en,isBoundingRectAxisAligned:JT,isElementRemoved:hx,lineLineIntersect:aY,linePolygonIntersect:Gg,makeImage:QW,makePath:Yv,mergePath:Ql,registerShape:zo,removeElement:wh,removeElementWithFadeOut:Md,resizePath:eY,retrieveZInfo:S0,setTooltipConfig:Yd,subPixelOptimize:Uw,subPixelOptimizeLine:Tx,subPixelOptimizeRect:Kve,transformDirection:NN,traverseElements:Eh,traverseUpdateZ:jN,updateProps:nr},Symbol.toStringTag,{value:"Module"}));var SN={};function iY(a,e){for(var t=0;t<Ms.length;t++){var r=Ms[t],n=e[r],i=a.ensureState(r);i.style=i.style||{},i.style.text=n}var l=a.currentStates.slice();a.clearStates(!0),a.setStyle({text:e.normal}),a.useStates(l,!0)}function i3(a,e,t){var r=a.labelFetcher,n=a.labelDataIndex,i=a.labelDimIndex,l=e.normal,o;r&&(o=r.getFormattedLabel(n,"normal",null,i,l&&l.get("formatter"),t!=null?{interpolatedValue:t}:null)),o==null&&(o=Yt(a.defaultText)?a.defaultText(n,a,t):a.defaultText);for(var c={normal:o},d=0;d<Ms.length;d++){var u=Ms[d],h=e[u];c[u]=Ht(r?r.getFormattedLabel(n,u,null,i,h&&h.get("formatter")):null,o)}return c}function ji(a,e,t,r){t=t||SN;for(var n=a instanceof tr,i=!1,l=0;l<Gv.length;l++){var o=e[Gv[l]];if(o&&o.getShallow("show")){i=!0;break}}var c=n?a:a.getTextContent();if(i){n||(c||(c=new tr,a.setTextContent(c)),a.stateProxy&&(c.stateProxy=a.stateProxy));var d=i3(t,e),u=e.normal,h=!!u.getShallow("show"),f=Fr(u,r&&r.normal,t,!1,!n);f.text=d.normal,n||a.setTextConfig(G2(u,t,!1));for(var l=0;l<Ms.length;l++){var p=Ms[l],o=e[p];if(o){var g=c.ensureState(p),b=!!Ht(o.getShallow("show"),h);if(b!==h&&(g.ignore=!b),g.style=Fr(o,r&&r[p],t,!0,!n),g.style.text=d[p],!n){var w=a.ensureState(p);w.textConfig=G2(o,t,!0)}}}c.silent=!!u.getShallow("silent"),c.style.x!=null&&(f.x=c.style.x),c.style.y!=null&&(f.y=c.style.y),c.ignore=!h,c.useStyle(f),c.dirty(),t.enableTextSetter&&(Zx(c).setLabelText=function(j){var k=i3(t,e,j);iY(c,k)})}else c&&(c.ignore=!0);a.dirty()}function fi(a,e){e=e||"label";for(var t={normal:a.getModel(e)},r=0;r<Ms.length;r++){var n=Ms[r];t[n]=a.getModel([n,e])}return t}function Fr(a,e,t,r,n){var i={};return tbe(i,a,t,r,n),e&&et(i,e),i}function G2(a,e,t){e=e||{};var r={},n,i=a.getShallow("rotate"),l=Ht(a.getShallow("distance"),t?null:5),o=a.getShallow("offset");return n=a.getShallow("position")||(t?null:"inside"),n==="outside"&&(n=e.defaultOutsidePosition||"top"),n!=null&&(r.position=n),o!=null&&(r.offset=o),i!=null&&(i*=Math.PI/180,r.rotation=i),l!=null&&(r.distance=l),r.outsideFill=a.get("color")==="inherit"?e.inheritColor||null:"auto",e.autoOverflowArea!=null&&(r.autoOverflowArea=e.autoOverflowArea),e.layoutRect!=null&&(r.layoutRect=e.layoutRect),r}function tbe(a,e,t,r,n){t=t||SN;var i=e.ecModel,l=i&&i.option.textStyle,o=abe(e),c;if(o){c={};var d="richInheritPlainLabel",u=Ht(e.get(d),i?i.get(d):void 0);for(var h in o)if(o.hasOwnProperty(h)){var f=e.getModel(["rich",h]);kP(c[h]={},f,l,e,u,t,r,n,!1,!0)}}c&&(a.rich=c);var p=e.get("overflow");p&&(a.overflow=p);var g=e.get("lineOverflow");g&&(a.lineOverflow=g);var b=a,w=e.get("minMargin");if(w!=null)w=Ka(w)?w/2:0,b.margin=[w,w,w,w],b.__marginType=tx.minMargin;else{var j=e.get("textMargin");j!=null&&(b.margin=iN(j),b.__marginType=tx.textMargin)}kP(a,e,l,null,null,t,r,n,!0,!1)}function abe(a){for(var e;a&&a!==a.ecModel;){var t=(a.option||SN).rich;if(t){e=e||{};for(var r=Ua(t),n=0;n<r.length;n++){var i=r[n];e[i]=1}}a=a.parentModel}return e}var NP=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],jP=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],SP=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function kP(a,e,t,r,n,i,l,o,c,d){t=!l&&t||SN;var u=i&&i.inheritColor,h=e.getShallow("color"),f=e.getShallow("textBorderColor"),p=Ht(e.getShallow("opacity"),t.opacity);(h==="inherit"||h==="auto")&&(u?h=u:h=null),(f==="inherit"||f==="auto")&&(u?f=u:f=null),o||(h=h||t.color,f=f||t.textBorderColor),h!=null&&(a.fill=h),f!=null&&(a.stroke=f);var g=Ht(e.getShallow("textBorderWidth"),t.textBorderWidth);g!=null&&(a.lineWidth=g);var b=Ht(e.getShallow("textBorderType"),t.textBorderType);b!=null&&(a.lineDash=b);var w=Ht(e.getShallow("textBorderDashOffset"),t.textBorderDashOffset);w!=null&&(a.lineDashOffset=w),!l&&p==null&&!d&&(p=i&&i.defaultOpacity),p!=null&&(a.opacity=p),!l&&!o&&a.fill==null&&i.inheritColor&&(a.fill=i.inheritColor);for(var j=0;j<NP.length;j++){var k=NP[j],T=n!==!1&&r?jl(e.getShallow(k),r.getShallow(k),t[k]):Ht(e.getShallow(k),t[k]);T!=null&&(a[k]=T)}for(var j=0;j<jP.length;j++){var k=jP[j],T=e.getShallow(k);T!=null&&(a[k]=T)}if(a.verticalAlign==null){var E=e.getShallow("baseline");E!=null&&(a.verticalAlign=E)}if(!c||!i.disableBox){for(var j=0;j<SP.length;j++){var k=SP[j],T=e.getShallow(k);T!=null&&(a[k]=T)}var I=e.getShallow("borderType");I!=null&&(a.borderDash=I),(a.backgroundColor==="auto"||a.backgroundColor==="inherit")&&u&&(a.backgroundColor=u),(a.borderColor==="auto"||a.borderColor==="inherit")&&u&&(a.borderColor=u)}}function tM(a,e){var t=e&&e.getModel("textStyle");return eo([a.fontStyle||t&&t.getShallow("fontStyle")||"",a.fontWeight||t&&t.getShallow("fontWeight")||"",(a.fontSize||t&&t.getShallow("fontSize")||12)+"px",a.fontFamily||t&&t.getShallow("fontFamily")||"sans-serif"].join(" "))}var Zx=Ia();function sY(a,e,t,r){if(a){var n=Zx(a);n.prevValue=n.value,n.value=t;var i=e.normal;n.valueAnimation=i.get("valueAnimation"),n.valueAnimation&&(n.precision=i.get("precision"),n.defaultInterpolatedText=r,n.statesModels=e)}}function lY(a,e,t,r,n){var i=Zx(a);if(!i.valueAnimation||i.prevValue===i.value)return;var l=i.defaultInterpolatedText,o=Ht(i.interpolatedValue,i.prevValue),c=i.value;function d(u){var h=yW(t,i.precision,o,c,u);i.interpolatedValue=u===1?null:h;var f=i3({labelDataIndex:e,labelFetcher:n,defaultText:l?l(h):h+""},i.statesModels,h);iY(a,f)}a.percent=0,(i.prevValue==null?en:nr)(a,{percent:1},r,e,null,d)}var tx={minMargin:1,textMargin:2},rbe=["textStyle","color"],q5=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],X5=new tr,nbe=(function(){function a(){}return a.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(rbe):null)},a.prototype.getFont=function(){return tM({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},a.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<q5.length;r++)t[q5[r]]=this.getShallow(q5[r]);return X5.useStyle(t),X5.update(),X5.getBoundingRect()},a})(),oY=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],ibe=_0(oY),sbe=(function(){function a(){}return a.prototype.getLineStyle=function(e){return ibe(this,e)},a})(),cY=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],lbe=_0(cY),obe=(function(){function a(){}return a.prototype.getItemStyle=function(e,t){return lbe(this,e,t)},a})(),Fa=(function(){function a(e,t,r){this.parentModel=t,this.ecModel=r,this.option=e}return a.prototype.init=function(e,t,r){},a.prototype.mergeOption=function(e,t){Ca(this.option,e,!0)},a.prototype.get=function(e,t){return e==null?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},a.prototype.getShallow=function(e,t){var r=this.option,n=r==null?r:r[e];if(n==null&&!t){var i=this.parentModel;i&&(n=i.getShallow(e))}return n},a.prototype.getModel=function(e,t){var r=e!=null,n=r?this.parsePath(e):null,i=r?this._doGet(n):this.option;return t=t||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(n)),new a(i,t,this.ecModel)},a.prototype.isEmpty=function(){return this.option==null},a.prototype.restoreData=function(){},a.prototype.clone=function(){var e=this.constructor;return new e(Xt(this.option))},a.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},a.prototype.resolveParentPath=function(e){return e},a.prototype.isAnimationEnabled=function(){if(!Ba.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},a.prototype._doGet=function(e,t){var r=this.option;if(!e)return r;for(var n=0;n<e.length&&!(e[n]&&(r=r&&typeof r=="object"?r[e[n]]:null,r==null));n++);return r==null&&t&&(r=t._doGet(this.resolveParentPath(e),t.parentModel)),r},a})();HT(Fa);xge(Fa);ei(Fa,sbe);ei(Fa,obe);ei(Fa,yge);ei(Fa,nbe);var cbe=Math.round(Math.random()*10);function Kx(a){return[a||"",cbe++].join("_")}function dbe(a){var e={};a.registerSubTypeDefaulter=function(t,r){var n=gc(t);e[n.main]=r},a.determineSubType=function(t,r){var n=r.type;if(!n){var i=gc(t).main;a.hasSubTypes(t)&&e[i]&&(n=e[i](r))}return n}}function ube(a,e){a.topologicalTravel=function(i,l,o,c){if(!i.length)return;var d=t(l),u=d.graph,h=d.noEntryList,f={};for(se(i,function(k){f[k]=!0});h.length;){var p=h.pop(),g=u[p],b=!!f[p];b&&(o.call(c,p,g.originalDeps.slice()),delete f[p]),se(g.successor,b?j:w)}se(f,function(){var k="";throw new Error(k)});function w(k){u[k].entryCount--,u[k].entryCount===0&&h.push(k)}function j(k){f[k]=!0,w(k)}};function t(i){var l={},o=[];return se(i,function(c){var d=r(l,c),u=d.originalDeps=e(c),h=n(u,i);d.entryCount=h.length,d.entryCount===0&&o.push(c),se(h,function(f){ja(d.predecessor,f)<0&&d.predecessor.push(f);var p=r(l,f);ja(p.successor,f)<0&&p.successor.push(c)})}),{graph:l,noEntryList:o}}function r(i,l){return i[l]||(i[l]={predecessor:[],successor:[]}),i[l]}function n(i,l){var o=[];return se(i,function(c){ja(l,c)>=0&&o.push(c)}),o}}function Dh(a,e){return Ca(Ca({},a,!0),e,!0)}const hbe={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},fbe={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var W2="ZH",aM="EN",fx=aM,Gw={},rM={},dY=Ba.domSupported?(function(){var a=(document.documentElement.lang||navigator.language||navigator.browserLanguage||fx).toUpperCase();return a.indexOf(W2)>-1?W2:fx})():fx;function uY(a,e){a=a.toUpperCase(),rM[a]=new Fa(e),Gw[a]=e}function pbe(a){if(At(a)){var e=Gw[a.toUpperCase()]||{};return a===W2||a===aM?Xt(e):Ca(Xt(e),Xt(Gw[fx]),!1)}else return Ca(Xt(a),Xt(Gw[fx]),!1)}function s3(a){return rM[a]}function xbe(){return rM[fx]}uY(aM,hbe);uY(W2,fbe);var l3=null;function mbe(a){l3||(l3=a)}function Xn(){return l3}var nM=1e3,iM=nM*60,uv=iM*60,Jl=uv*24,CP=Jl*365,gbe={year:/({yyyy}|{yy})/,month:/({MMMM}|{MMM}|{MM}|{M})/,day:/({dd}|{d})/,hour:/({HH}|{H}|{hh}|{h})/,minute:/({mm}|{m})/,second:/({ss}|{s})/,millisecond:/({SSS}|{S})/},Ww={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}"},vbe="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}",My="{yyyy}-{MM}-{dd}",AP={year:"{yyyy}",month:"{yyyy}-{MM}",day:My,hour:My+" "+Ww.hour,minute:My+" "+Ww.minute,second:My+" "+Ww.second,millisecond:vbe},vl=["year","month","day","hour","minute","second","millisecond"],bbe=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function ybe(a){return!At(a)&&!Yt(a)?wbe(a):a}function wbe(a){a=a||{};var e={},t=!0;return se(vl,function(r){t&&(t=a[r]==null)}),se(vl,function(r,n){var i=a[r];e[r]={};for(var l=null,o=n;o>=0;o--){var c=vl[o],d=aa(i)&&!lt(i)?i[c]:i,u=void 0;lt(d)?(u=d.slice(),l=u[0]||""):At(d)?(l=d,u=[l]):(l==null?l=Ww[r]:gbe[c].test(l)||(l=e[c][c][0]+" "+l),u=[l],t&&(u[1]="{primary|"+l+"}")),e[r][c]=u}}),e}function Eu(a,e){return a+="","0000".substr(0,e-a.length)+a}function hv(a){switch(a){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return a}}function _be(a){return a===hv(a)}function Nbe(a){switch(a){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function kN(a,e,t,r){var n=I0(a),i=n[hY(t)](),l=n[sM(t)]()+1,o=Math.floor((l-1)/3)+1,c=n[lM(t)](),d=n["get"+(t?"UTC":"")+"Day"](),u=n[oM(t)](),h=(u-1)%12+1,f=n[cM(t)](),p=n[dM(t)](),g=n[uM(t)](),b=u>=12?"pm":"am",w=b.toUpperCase(),j=r instanceof Fa?r:s3(r||dY)||xbe(),k=j.getModel("time"),T=k.get("month"),E=k.get("monthAbbr"),I=k.get("dayOfWeek"),R=k.get("dayOfWeekAbbr");return(e||"").replace(/{a}/g,b+"").replace(/{A}/g,w+"").replace(/{yyyy}/g,i+"").replace(/{yy}/g,Eu(i%100+"",2)).replace(/{Q}/g,o+"").replace(/{MMMM}/g,T[l-1]).replace(/{MMM}/g,E[l-1]).replace(/{MM}/g,Eu(l,2)).replace(/{M}/g,l+"").replace(/{dd}/g,Eu(c,2)).replace(/{d}/g,c+"").replace(/{eeee}/g,I[d]).replace(/{ee}/g,R[d]).replace(/{e}/g,d+"").replace(/{HH}/g,Eu(u,2)).replace(/{H}/g,u+"").replace(/{hh}/g,Eu(h+"",2)).replace(/{h}/g,h+"").replace(/{mm}/g,Eu(f,2)).replace(/{m}/g,f+"").replace(/{ss}/g,Eu(p,2)).replace(/{s}/g,p+"").replace(/{SSS}/g,Eu(g,3)).replace(/{S}/g,g+"")}function jbe(a,e,t,r,n){var i=null;if(At(t))i=t;else if(Yt(t)){var l={time:a.time,level:a.time.level},o=Xn();o&&o.makeAxisLabelFormatterParamBreak(l,a.break),i=t(a.value,e,l)}else{var c=a.time;if(c){var d=t[c.lowerTimeUnit][c.upperTimeUnit];i=d[Math.min(c.level,d.length-1)]||""}else{var u=ax(a.value,n);i=t[u][u][0]}}return kN(new Date(a.value),i,n,r)}function ax(a,e){var t=I0(a),r=t[sM(e)]()+1,n=t[lM(e)](),i=t[oM(e)](),l=t[cM(e)](),o=t[dM(e)](),c=t[uM(e)](),d=c===0,u=d&&o===0,h=u&&l===0,f=h&&i===0,p=f&&n===1,g=p&&r===1;return g?"year":p?"month":f?"day":h?"hour":u?"minute":d?"second":"millisecond"}function o3(a,e,t){switch(e){case"year":a[fY(t)](0);case"month":a[pY(t)](1);case"day":a[xY(t)](0);case"hour":a[mY(t)](0);case"minute":a[gY(t)](0);case"second":a[vY(t)](0)}return a}function hY(a){return a?"getUTCFullYear":"getFullYear"}function sM(a){return a?"getUTCMonth":"getMonth"}function lM(a){return a?"getUTCDate":"getDate"}function oM(a){return a?"getUTCHours":"getHours"}function cM(a){return a?"getUTCMinutes":"getMinutes"}function dM(a){return a?"getUTCSeconds":"getSeconds"}function uM(a){return a?"getUTCMilliseconds":"getMilliseconds"}function Sbe(a){return a?"setUTCFullYear":"setFullYear"}function fY(a){return a?"setUTCMonth":"setMonth"}function pY(a){return a?"setUTCDate":"setDate"}function xY(a){return a?"setUTCHours":"setHours"}function mY(a){return a?"setUTCMinutes":"setMinutes"}function gY(a){return a?"setUTCSeconds":"setSeconds"}function vY(a){return a?"setUTCMilliseconds":"setMilliseconds"}function bY(a){if(!uW(a))return At(a)?a:"-";var e=(a+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function yY(a,e){return a=(a||"").toLowerCase().replace(/-(.)/g,function(t,r){return r.toUpperCase()}),e&&a&&(a=a.charAt(0).toUpperCase()+a.slice(1)),a}var Rb=iN;function c3(a,e,t){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function n(u){return u&&eo(u)?u:"-"}function i(u){return!!(u!=null&&!isNaN(u)&&isFinite(u))}var l=e==="time",o=a instanceof Date;if(l||o){var c=l?I0(a):a;if(isNaN(+c)){if(o)return"-"}else return kN(c,r,t)}if(e==="ordinal")return y4(a)?n(a):Ka(a)&&i(a)?a+"":"-";var d=Pd(a);return i(d)?bY(d):y4(a)?n(a):typeof a=="boolean"?a+"":"-"}var TP=["a","b","c","d","e","f","g"],Z5=function(a,e){return"{"+a+(e??"")+"}"};function wY(a,e,t){lt(e)||(e=[e]);var r=e.length;if(!r)return"";for(var n=e[0].$vars||[],i=0;i<n.length;i++){var l=TP[i];a=a.replace(Z5(l),Z5(l,0))}for(var o=0;o<r;o++)for(var c=0;c<n.length;c++){var d=e[o][n[c]];a=a.replace(Z5(TP[c],o),t?Ss(d):d)}return a}function kbe(a,e,t){return se(e,function(r,n){a=a.replace("{"+n+"}",r)}),a}function Cbe(a,e){var t=At(a)?{color:a,extraCssText:e}:a||{},r=t.color,n=t.type;e=t.extraCssText;var i=t.renderMode||"html";if(!r)return"";if(i==="html")return n==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Ss(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Ss(r)+";"+(e||"")+'"></span>';var l=t.markerId||"markerX";return{renderMode:i,content:"{"+l+"|}  ",style:n==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function k0(a,e){return e=e||"transparent",At(a)?a:aa(a)&&a.colorStops&&(a.colorStops[0]||{}).color||e}function Y2(a,e){if(e==="_blank"||e==="blank"){var t=window.open();t.opener=null,t.location.href=a}else window.open(a,e)}var Yw={},K5={},Lb=(function(){function a(){this._normalMasterList=[],this._nonSeriesBoxMasterList=[]}return a.prototype.create=function(e,t){this._nonSeriesBoxMasterList=r(Yw),this._normalMasterList=r(K5);function r(n,i){var l=[];return se(n,function(o,c){var d=o.create(e,t);l=l.concat(d||[])}),l}},a.prototype.update=function(e,t){se(this._normalMasterList,function(r){r.update&&r.update(e,t)})},a.prototype.getCoordinateSystems=function(){return this._normalMasterList.concat(this._nonSeriesBoxMasterList)},a.register=function(e,t){if(e==="matrix"||e==="calendar"){Yw[e]=t;return}K5[e]=t},a.get=function(e){return K5[e]||Yw[e]},a})();function Abe(a){return!!Yw[a]}var d3={coord:1,coord2:2};function Tbe(a){_Y.set(a.fullType,{getCoord2:void 0}).getCoord2=a.getCoord2}var _Y=Pt();function Mbe(a){var e=a.getShallow("coord",!0),t=d3.coord;if(e==null){var r=_Y.get(a.type);r&&r.getCoord2&&(t=d3.coord2,e=r.getCoord2(a))}return{coord:e,from:t}}var fc={none:0,dataCoordSys:1,boxCoordSys:2};function NY(a,e){var t=a.getShallow("coordinateSystem"),r=a.getShallow("coordinateSystemUsage",!0),n=fc.none;if(t){var i=a.mainType==="series";r==null&&(r=i?"data":"box"),r==="data"?(n=fc.dataCoordSys,i||(n=fc.none)):r==="box"&&(n=fc.boxCoordSys,!i&&!Abe(t)&&(n=fc.none))}return{coordSysType:t,kind:n}}function Ob(a){var e=a.targetModel,t=a.coordSysType,r=a.coordSysProvider,n=a.isDefaultDataCoordSys;a.allowNotFound;var i=NY(e),l=i.kind,o=i.coordSysType;if(n&&l!==fc.dataCoordSys&&(l=fc.dataCoordSys,o=t),l===fc.none||o!==t)return!1;var c=r(t,e);return c?(l===fc.dataCoordSys?e.coordinateSystem=c:e.boxCoordinateSystem=c,!0):!1}var jY=function(a,e){var t=e.getReferringComponents(a,wn).models[0];return t&&t.coordinateSystem},$w=se,SY=["left","right","top","bottom","width","height"],Zf=[["width","left","right"],["height","top","bottom"]];function hM(a,e,t,r,n){var i=0,l=0;r==null&&(r=1/0),n==null&&(n=1/0);var o=0;e.eachChild(function(c,d){var u=c.getBoundingRect(),h=e.childAt(d+1),f=h&&h.getBoundingRect(),p,g;if(a==="horizontal"){var b=u.width+(f?-f.x+u.x:0);p=i+b,p>r||c.newline?(i=0,p=b,l+=o+t,o=u.height):o=Math.max(o,u.height)}else{var w=u.height+(f?-f.y+u.y:0);g=l+w,g>n||c.newline?(i+=o+t,l=0,g=w,o=u.width):o=Math.max(o,u.width)}c.newline||(c.x=i,c.y=l,c.markRedraw(),a==="horizontal"?i=p+t:l=g+t)})}var u0=hM;ya(hM,"vertical");ya(hM,"horizontal");function kY(a,e){return{left:a.getShallow("left",e),top:a.getShallow("top",e),right:a.getShallow("right",e),bottom:a.getShallow("bottom",e),width:a.getShallow("width",e),height:a.getShallow("height",e)}}function Ebe(a,e){var t=pi(a,e,{enableLayoutOnlyByCenter:!0}),r=a.getBoxLayoutParams(),n,i;if(t.type===Wg.point)i=t.refPoint,n=cn(r,{width:e.getWidth(),height:e.getHeight()});else{var l=a.get("center"),o=lt(l)?l:[l,l];n=cn(r,t.refContainer),i=t.boxCoordFrom===d3.coord2?t.refPoint:[kt(o[0],n.width)+n.x,kt(o[1],n.height)+n.y]}return{viewRect:n,center:i}}function CY(a,e){var t=Ebe(a,e),r=t.viewRect,n=t.center,i=a.get("radius");lt(i)||(i=[0,i]);var l=kt(r.width,e.getWidth()),o=kt(r.height,e.getHeight()),c=Math.min(l,o),d=kt(i[0],c/2),u=kt(i[1],c/2);return{cx:n[0],cy:n[1],r0:d,r:u,viewRect:r}}function cn(a,e,t){t=Rb(t||0);var r=e.width,n=e.height,i=kt(a.left,r),l=kt(a.top,n),o=kt(a.right,r),c=kt(a.bottom,n),d=kt(a.width,r),u=kt(a.height,n),h=t[2]+t[0],f=t[1]+t[3],p=a.aspect;switch(isNaN(d)&&(d=r-o-f-i),isNaN(u)&&(u=n-c-h-l),p!=null&&(isNaN(d)&&isNaN(u)&&(p>r/n?d=r*.8:u=n*.8),isNaN(d)&&(d=p*u),isNaN(u)&&(u=d/p)),isNaN(i)&&(i=r-o-d-f),isNaN(l)&&(l=n-c-u-h),a.left||a.right){case"center":i=r/2-d/2-t[3];break;case"right":i=r-d-f;break}switch(a.top||a.bottom){case"middle":case"center":l=n/2-u/2-t[0];break;case"bottom":l=n-u-h;break}i=i||0,l=l||0,isNaN(d)&&(d=r-f-i-(o||0)),isNaN(u)&&(u=n-h-l-(c||0));var g=new ra((e.x||0)+i+t[3],(e.y||0)+l+t[0],d,u);return g.margin=t,g}function AY(a,e,t){var r=a.getShallow("preserveAspect",!0);if(!r)return e;var n=e.width/e.height;if(Math.abs(Math.atan(t)-Math.atan(n))<1e-9)return e;var i=a.getShallow("preserveAspectAlign",!0),l=a.getShallow("preserveAspectVerticalAlign",!0),o={width:e.width,height:e.height},c=r==="cover";return n>t&&!c||n<t&&c?(o.width=e.height*t,i==="left"?o.left=0:i==="right"?o.right=0:o.left="center"):(o.height=e.width/t,l==="top"?o.top=0:l==="bottom"?o.bottom=0:o.top="middle"),cn(o,e)}var Wg={rect:1,point:2};function pi(a,e,t){var r,n,i,l=a.boxCoordinateSystem,o;if(l){var c=Mbe(a),d=c.coord,u=c.from;if(l.dataToLayout){i=Wg.rect,o=u;var h=l.dataToLayout(d);r=h.contentRect||h.rect}else t&&t.enableLayoutOnlyByCenter&&l.dataToPoint&&(i=Wg.point,o=u,n=l.dataToPoint(d))}return i==null&&(i=Wg.rect),i===Wg.rect&&(r||(r={x:0,y:0,width:e.getWidth(),height:e.getHeight()}),n=[r.x+r.width/2,r.y+r.height/2]),{type:i,refContainer:r,refPoint:n,boxCoordFrom:o}}function CN(a,e,t,r,n,i){var l=!n||!n.hv||n.hv[0],o=!n||!n.hv||n.hv[1],c=n&&n.boundingMode||"all";if(i=i||a,i.x=a.x,i.y=a.y,!l&&!o)return!1;var d;if(c==="raw")d=a.type==="group"?new ra(0,0,+e.width||0,+e.height||0):a.getBoundingRect();else if(d=a.getBoundingRect(),a.needLocalTransform()){var u=a.getLocalTransform();d=d.clone(),d.applyTransform(u)}var h=cn(ta({width:d.width,height:d.height},e),t,r),f=l?h.x-d.x:0,p=o?h.y-d.y:0;return c==="raw"?(i.x=f,i.y=p):(i.x+=f,i.y+=p),i===a&&a.markRedraw(),!0}function Dbe(a,e){return a[Zf[e][0]]!=null||a[Zf[e][1]]!=null&&a[Zf[e][2]]!=null}function qv(a){var e=a.layoutMode||a.constructor.layoutMode;return aa(e)?e:e?{type:e}:null}function Rc(a,e,t){var r=t&&t.ignoreSize;!lt(r)&&(r=[r,r]);var n=l(Zf[0],0),i=l(Zf[1],1);c(Zf[0],a,n),c(Zf[1],a,i);function l(d,u){var h={},f=0,p={},g=0,b=2;if($w(d,function(k){p[k]=a[k]}),$w(d,function(k){Rt(e,k)&&(h[k]=p[k]=e[k]),o(h,k)&&f++,o(p,k)&&g++}),r[u])return o(e,d[1])?p[d[2]]=null:o(e,d[2])&&(p[d[1]]=null),p;if(g===b||!f)return p;if(f>=b)return h;for(var w=0;w<d.length;w++){var j=d[w];if(!Rt(h,j)&&Rt(a,j)){h[j]=a[j];break}}return h}function o(d,u){return d[u]!=null&&d[u]!=="auto"}function c(d,u,h){$w(d,function(f){u[f]=h[f]})}}function L0(a){return TY({},a)}function TY(a,e){return e&&a&&$w(SY,function(t){Rt(e,t)&&(a[t]=e[t])}),a}var Ibe=Ia(),za=(function(a){Ie(e,a);function e(t,r,n){var i=a.call(this,t,r,n)||this;return i.uid=Kx("ec_cpt_model"),i}return e.prototype.init=function(t,r,n){this.mergeDefaultAndTheme(t,n)},e.prototype.mergeDefaultAndTheme=function(t,r){var n=qv(this),i=n?L0(t):{},l=r.getTheme();Ca(t,l.get(this.mainType)),Ca(t,this.getDefaultOption()),n&&Rc(t,i,n)},e.prototype.mergeOption=function(t,r){Ca(this.option,t,!0);var n=qv(this);n&&Rc(this.option,t,n)},e.prototype.optionUpdated=function(t,r){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!hge(t))return t.defaultOption;var r=Ibe(this);if(!r.defaultOption){for(var n=[],i=t;i;){var l=i.prototype.defaultOption;l&&n.push(l),i=i.superClass}for(var o={},c=n.length-1;c>=0;c--)o=Ca(o,n[c],!0);r.defaultOption=o}return r.defaultOption},e.prototype.getReferringComponents=function(t,r){var n=t+"Index",i=t+"Id";return Yx(this.ecModel,t,{index:this.get(n,!0),id:this.get(i,!0)},r)},e.prototype.getBoxLayoutParams=function(){return kY(this,!1)},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(t){this.option.zlevel=t},e.protoInitialize=(function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0})(),e})(Fa);_W(za,Fa);hN(za);dbe(za);ube(za,Rbe);function Rbe(a){var e=[];return se(za.getClassesByMainType(a),function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])}),e=ct(e,function(t){return gc(t).main}),a!=="dataset"&&ja(e,"dataset")<=0&&e.unshift("dataset"),e}var Be={color:{},darkColor:{},size:{}},Rn=Be.color={theme:["#5070dd","#b6d634","#505372","#ff994d","#0ca8df","#ffd10a","#fb628b","#785db0","#3fbe95"],neutral00:"#fff",neutral05:"#f4f7fd",neutral10:"#e8ebf0",neutral15:"#dbdee4",neutral20:"#cfd2d7",neutral25:"#c3c5cb",neutral30:"#b7b9be",neutral35:"#aaacb2",neutral40:"#9ea0a5",neutral45:"#929399",neutral50:"#86878c",neutral55:"#797b7f",neutral60:"#6d6e73",neutral65:"#616266",neutral70:"#54555a",neutral75:"#48494d",neutral80:"#3c3c41",neutral85:"#303034",neutral90:"#232328",neutral95:"#17171b",neutral99:"#000",accent05:"#eff1f9",accent10:"#e0e4f2",accent15:"#d0d6ec",accent20:"#c0c9e6",accent25:"#b1bbdf",accent30:"#a1aed9",accent35:"#91a0d3",accent40:"#8292cc",accent45:"#7285c6",accent50:"#6578ba",accent55:"#5c6da9",accent60:"#536298",accent65:"#4a5787",accent70:"#404c76",accent75:"#374165",accent80:"#2e3654",accent85:"#252b43",accent90:"#1b2032",accent95:"#121521",transparent:"rgba(0,0,0,0)",highlight:"rgba(255,231,130,0.8)"};et(Rn,{primary:Rn.neutral80,secondary:Rn.neutral70,tertiary:Rn.neutral60,quaternary:Rn.neutral50,disabled:Rn.neutral20,border:Rn.neutral30,borderTint:Rn.neutral20,borderShade:Rn.neutral40,background:Rn.neutral05,backgroundTint:"rgba(234,237,245,0.5)",backgroundTransparent:"rgba(255,255,255,0)",backgroundShade:Rn.neutral10,shadow:"rgba(0,0,0,0.2)",shadowTint:"rgba(129,130,136,0.2)",axisLine:Rn.neutral70,axisLineTint:Rn.neutral40,axisTick:Rn.neutral70,axisTickMinor:Rn.neutral60,axisLabel:Rn.neutral70,axisSplitLine:Rn.neutral15,axisMinorSplitLine:Rn.neutral05});for(var wf in Rn)if(Rn.hasOwnProperty(wf)){var MP=Rn[wf];wf==="theme"?Be.darkColor.theme=Rn.theme.slice():wf==="highlight"?Be.darkColor.highlight="rgba(255,231,130,0.4)":wf.indexOf("accent")===0?Be.darkColor[wf]=dh(MP,null,function(a){return a*.5},function(a){return Math.min(1,1.3-a)}):Be.darkColor[wf]=dh(MP,null,function(a){return a*.9},function(a){return 1-Math.pow(a,1.5)})}Be.size={xxs:2,xs:5,s:10,m:15,l:20,xl:30,xxl:40,xxxl:50};var MY="";typeof navigator<"u"&&(MY=navigator.platform||"");var Sp="rgba(0, 0, 0, 0.2)",EY=Be.color.theme[0],Lbe=dh(EY,null,null,.9);const Obe={darkMode:"auto",colorBy:"series",color:Be.color.theme,gradientColor:[Lbe,EY],aria:{decal:{decals:[{color:Sp,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Sp,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Sp,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Sp,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Sp,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Sp,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:MY.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var DY=Pt(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),Tl="original",Oi="arrayRows",Ml="objectRows",Bo="keyedColumns",hh="typedArray",IY="unknown",Mo="column",O0="row",Gi={Must:1,Might:2,Not:3},RY=Ia();function Pbe(a){RY(a).datasetMap=Pt()}function LY(a,e,t){var r={},n=pM(e);if(!n||!a)return r;var i=[],l=[],o=e.ecModel,c=RY(o).datasetMap,d=n.uid+"_"+t.seriesLayoutBy,u,h;a=a.slice(),se(a,function(b,w){var j=aa(b)?b:a[w]={name:b};j.type==="ordinal"&&u==null&&(u=w,h=g(j)),r[j.name]=[]});var f=c.get(d)||c.set(d,{categoryWayDim:h,valueWayDim:0});se(a,function(b,w){var j=b.name,k=g(b);if(u==null){var T=f.valueWayDim;p(r[j],T,k),p(l,T,k),f.valueWayDim+=k}else if(u===w)p(r[j],0,k),p(i,0,k);else{var T=f.categoryWayDim;p(r[j],T,k),p(l,T,k),f.categoryWayDim+=k}});function p(b,w,j){for(var k=0;k<j;k++)b.push(w+k)}function g(b){var w=b.dimsDef;return w?w.length:1}return i.length&&(r.itemName=i),l.length&&(r.seriesName=l),r}function fM(a,e,t){var r={},n=pM(a);if(!n)return r;var i=e.sourceFormat,l=e.dimensionsDefine,o;(i===Ml||i===Bo)&&se(l,function(u,h){(aa(u)?u.name:u)==="name"&&(o=h)});var c=(function(){for(var u={},h={},f=[],p=0,g=Math.min(5,t);p<g;p++){var b=PY(e.data,i,e.seriesLayoutBy,l,e.startIndex,p);f.push(b);var w=b===Gi.Not;if(w&&u.v==null&&p!==o&&(u.v=p),(u.n==null||u.n===u.v||!w&&f[u.n]===Gi.Not)&&(u.n=p),j(u)&&f[u.n]!==Gi.Not)return u;w||(b===Gi.Might&&h.v==null&&p!==o&&(h.v=p),(h.n==null||h.n===h.v)&&(h.n=p))}function j(k){return k.v!=null&&k.n!=null}return j(u)?u:j(h)?h:null})();if(c){r.value=[c.v];var d=o??c.n;r.itemName=[d],r.seriesName=[d]}return r}function pM(a){var e=a.get("data",!0);if(!e)return Yx(a.ecModel,"dataset",{index:a.get("datasetIndex",!0),id:a.get("datasetId",!0)},wn).models[0]}function zbe(a){return!a.get("transform",!0)&&!a.get("fromTransformResult",!0)?[]:Yx(a.ecModel,"dataset",{index:a.get("fromDatasetIndex",!0),id:a.get("fromDatasetId",!0)},wn).models}function OY(a,e){return PY(a.data,a.sourceFormat,a.seriesLayoutBy,a.dimensionsDefine,a.startIndex,e)}function PY(a,e,t,r,n,i){var l,o=5;if(Qs(a))return Gi.Not;var c,d;if(r){var u=r[i];aa(u)?(c=u.name,d=u.type):At(u)&&(c=u)}if(d!=null)return d==="ordinal"?Gi.Must:Gi.Not;if(e===Oi){var h=a;if(t===O0){for(var f=h[i],p=0;p<(f||[]).length&&p<o;p++)if((l=E(f[n+p]))!=null)return l}else for(var p=0;p<h.length&&p<o;p++){var g=h[n+p];if(g&&(l=E(g[i]))!=null)return l}}else if(e===Ml){var b=a;if(!c)return Gi.Not;for(var p=0;p<b.length&&p<o;p++){var w=b[p];if(w&&(l=E(w[c]))!=null)return l}}else if(e===Bo){var j=a;if(!c)return Gi.Not;var f=j[c];if(!f||Qs(f))return Gi.Not;for(var p=0;p<f.length&&p<o;p++)if((l=E(f[p]))!=null)return l}else if(e===Tl)for(var k=a,p=0;p<k.length&&p<o;p++){var w=k[p],T=Wx(w);if(!lt(T))return Gi.Not;if((l=E(T[i]))!=null)return l}function E(I){var R=At(I);if(I!=null&&Number.isFinite(Number(I))&&I!=="")return R?Gi.Might:Gi.Not;if(R&&I!=="-")return Gi.Must}return Gi.Not}var u3=Pt();function Bbe(a,e){us(u3.get(a)==null&&e),u3.set(a,e)}function Fbe(a,e,t){var r=u3.get(e);if(!r)return t;var n=r(a);return n?t.concat(n):t}var EP=Ia(),Vbe=Ia(),xM=(function(){function a(){}return a.prototype.getColorFromPalette=function(e,t,r){var n=Or(this.get("color",!0)),i=this.get("colorLayer",!0);return zY(this,EP,n,i,e,t,r)},a.prototype.clearColorPalette=function(){Ube(this,EP)},a})();function h3(a,e,t,r){var n=Or(a.get(["aria","decal","decals"]));return zY(a,Vbe,n,null,e,t,r)}function Hbe(a,e){for(var t=a.length,r=0;r<t;r++)if(a[r].length>e)return a[r];return a[t-1]}function zY(a,e,t,r,n,i,l){i=i||a;var o=e(i),c=o.paletteIdx||0,d=o.paletteNameMap=o.paletteNameMap||{};if(d.hasOwnProperty(n))return d[n];var u=l==null||!r?t:Hbe(r,l);if(u=u||t,!(!u||!u.length)){var h=u[c];return n&&(d[n]=h),o.paletteIdx=(c+1)%u.length,h}}function Ube(a,e){e(a).paletteIdx=0,e(a).paletteNameMap={}}var Ey,ag,DP,IP="\0_ec_inner",Gbe=1,mM=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.init=function(t,r,n,i,l,o){i=i||{},this.option=null,this._theme=new Fa(i),this._locale=new Fa(l),this._optionManager=o},e.prototype.setOption=function(t,r,n){var i=OP(r);this._optionManager.setOption(t,n,i),this._resetOption(null,i)},e.prototype.resetOption=function(t,r){return this._resetOption(t,OP(r))},e.prototype._resetOption=function(t,r){var n=!1,i=this._optionManager;if(!t||t==="recreate"){var l=i.mountOption(t==="recreate");!this.option||t==="recreate"?DP(this,l):(this.restoreData(),this._mergeOption(l,r)),n=!0}if((t==="timeline"||t==="media")&&this.restoreData(),!t||t==="recreate"||t==="timeline"){var o=i.getTimelineOption(this);o&&(n=!0,this._mergeOption(o,r))}if(!t||t==="recreate"||t==="media"){var c=i.getMediaOption(this);c.length&&se(c,function(d){n=!0,this._mergeOption(d,r)},this)}return n},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,r){var n=this.option,i=this._componentsMap,l=this._componentsCount,o=[],c=Pt(),d=r&&r.replaceMergeMainTypeMap;Pbe(this),se(t,function(h,f){h!=null&&(za.hasClass(f)?f&&(o.push(f),c.set(f,!0)):n[f]=n[f]==null?Xt(h):Ca(n[f],h,!0))}),d&&d.each(function(h,f){za.hasClass(f)&&!c.get(f)&&(o.push(f),c.set(f,!0))}),za.topologicalTravel(o,za.getAllClassMainTypes(),u,this);function u(h){var f=Fbe(this,h,Or(t[h])),p=i.get(h),g=p?d&&d.get(h)?"replaceMerge":"normalMerge":"replaceAll",b=gW(p,f,g);rge(b,h,za),n[h]=null,i.set(h,null),l.set(h,0);var w=[],j=[],k=0,T;se(b,function(E,I){var R=E.existing,P=E.newOption;if(!P)R&&(R.mergeOption({},this),R.optionUpdated({},!1));else{var H=h==="series",G=za.getClass(h,E.keyInfo.subType,!H);if(!G)return;if(h==="tooltip"){if(T)return;T=!0}if(R&&R.constructor===G)R.name=E.keyInfo.name,R.mergeOption(P,this),R.optionUpdated(P,!1);else{var X=et({componentIndex:I},E.keyInfo);R=new G(P,this,this,X),et(R,X),E.brandNew&&(R.__requireNewView=!0),R.init(P,this,this),R.optionUpdated(null,!0)}}R?(w.push(R.option),j.push(R),k++):(w.push(void 0),j.push(void 0))},this),n[h]=w,i.set(h,j),l.set(h,k),h==="series"&&Ey(this)}this._seriesIndices||Ey(this)},e.prototype.getOption=function(){var t=Xt(this.option);return se(t,function(r,n){if(za.hasClass(n)){for(var i=Or(r),l=i.length,o=!1,c=l-1;c>=0;c--)i[c]&&!Uv(i[c])?o=!0:(i[c]=null,!o&&l--);i.length=l,t[n]=i}}),delete t[IP],t},e.prototype.setTheme=function(t){this._theme=new Fa(t),this._resetOption("recreate",null)},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,r){var n=this._componentsMap.get(t);if(n){var i=n[r||0];if(i)return i;if(r==null){for(var l=0;l<n.length;l++)if(n[l])return n[l]}}},e.prototype.queryComponents=function(t){var r=t.mainType;if(!r)return[];var n=t.index,i=t.id,l=t.name,o=this._componentsMap.get(r);if(!o||!o.length)return[];var c;return n!=null?(c=[],se(Or(n),function(d){o[d]&&c.push(o[d])})):i!=null?c=RP("id",i,o):l!=null?c=RP("name",l,o):c=pr(o,function(d){return!!d}),LP(c,t)},e.prototype.findComponents=function(t){var r=t.query,n=t.mainType,i=o(r),l=i?this.queryComponents(i):pr(this._componentsMap.get(n),function(d){return!!d});return c(LP(l,t));function o(d){var u=n+"Index",h=n+"Id",f=n+"Name";return d&&(d[u]!=null||d[h]!=null||d[f]!=null)?{mainType:n,index:d[u],id:d[h],name:d[f]}:null}function c(d){return t.filter?pr(d,t.filter):d}},e.prototype.eachComponent=function(t,r,n){var i=this._componentsMap;if(Yt(t)){var l=r,o=t;i.each(function(h,f){for(var p=0;h&&p<h.length;p++){var g=h[p];g&&o.call(l,f,g,g.componentIndex)}})}else for(var c=At(t)?i.get(t):aa(t)?this.findComponents(t):null,d=0;c&&d<c.length;d++){var u=c[d];u&&r.call(n,u,u.componentIndex)}},e.prototype.getSeriesByName=function(t){var r=ui(t,null);return pr(this._componentsMap.get("series"),function(n){return!!n&&r!=null&&n.name===r})},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return pr(this._componentsMap.get("series"),function(r){return!!r&&r.subType===t})},e.prototype.getSeries=function(){return pr(this._componentsMap.get("series"),function(t){return!!t})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,r){ag(this),se(this._seriesIndices,function(n){var i=this._componentsMap.get("series")[n];t.call(r,i,n)},this)},e.prototype.eachRawSeries=function(t,r){se(this._componentsMap.get("series"),function(n){n&&t.call(r,n,n.componentIndex)})},e.prototype.eachSeriesByType=function(t,r,n){ag(this),se(this._seriesIndices,function(i){var l=this._componentsMap.get("series")[i];l.subType===t&&r.call(n,l,i)},this)},e.prototype.eachRawSeriesByType=function(t,r,n){return se(this.getSeriesByType(t),r,n)},e.prototype.isSeriesFiltered=function(t){return ag(this),this._seriesIndicesMap.get(t.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,r){ag(this);var n=[];se(this._seriesIndices,function(i){var l=this._componentsMap.get("series")[i];t.call(r,l,i)&&n.push(i)},this),this._seriesIndices=n,this._seriesIndicesMap=Pt(n)},e.prototype.restoreData=function(t){Ey(this);var r=this._componentsMap,n=[];r.each(function(i,l){za.hasClass(l)&&n.push(l)}),za.topologicalTravel(n,za.getAllClassMainTypes(),function(i){se(r.get(i),function(l){l&&(i!=="series"||!Wbe(l,t))&&l.restoreData()})})},e.internalField=(function(){Ey=function(t){var r=t._seriesIndices=[];se(t._componentsMap.get("series"),function(n){n&&r.push(n.componentIndex)}),t._seriesIndicesMap=Pt(r)},ag=function(t){},DP=function(t,r){t.option={},t.option[IP]=Gbe,t._componentsMap=Pt({series:[]}),t._componentsCount=Pt();var n=r.aria;aa(n)&&n.enabled==null&&(n.enabled=!0),Ybe(r,t._theme.option),Ca(r,Obe,!1),t._mergeOption(r,null)}})(),e})(Fa);function Wbe(a,e){if(e){var t=e.seriesIndex,r=e.seriesId,n=e.seriesName;return t!=null&&a.componentIndex!==t||r!=null&&a.id!==r||n!=null&&a.name!==n}}function Ybe(a,e){var t=a.color&&!a.colorLayer;se(e,function(r,n){n==="colorLayer"&&t||n==="color"&&a.color||za.hasClass(n)||(typeof r=="object"?a[n]=a[n]?Ca(a[n],r,!1):Xt(r):a[n]==null&&(a[n]=r))})}function RP(a,e,t){if(lt(e)){var r=Pt();return se(e,function(i){if(i!=null){var l=ui(i,null);l!=null&&r.set(i,!0)}}),pr(t,function(i){return i&&r.get(i[a])})}else{var n=ui(e,null);return pr(t,function(i){return i&&n!=null&&i[a]===n})}}function LP(a,e){return e.hasOwnProperty("subType")?pr(a,function(t){return t&&t.subType===e.subType}):a}function OP(a){var e=Pt();return a&&se(Or(a.replaceMerge),function(t){e.set(t,!0)}),{replaceMergeMainTypeMap:e}}ei(mM,xM);var $be=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],BY=(function(){function a(e){se($be,function(t){this[t]=Tt(e[t],e)},this)}return a})(),qbe=/^(min|max)?(.+)$/,Xbe=(function(){function a(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return a.prototype.setOption=function(e,t,r){e&&(se(Or(e.series),function(l){l&&l.data&&Qs(l.data)&&C2(l.data)}),se(Or(e.dataset),function(l){l&&l.source&&Qs(l.source)&&C2(l.source)})),e=Xt(e);var n=this._optionBackup,i=Zbe(e,t,!n);this._newBaseOption=i.baseOption,n?(i.timelineOptions.length&&(n.timelineOptions=i.timelineOptions),i.mediaList.length&&(n.mediaList=i.mediaList),i.mediaDefault&&(n.mediaDefault=i.mediaDefault)):this._optionBackup=i},a.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],Xt(e?t.baseOption:this._newBaseOption)},a.prototype.getTimelineOption=function(e){var t,r=this._timelineOptions;if(r.length){var n=e.getComponent("timeline");n&&(t=Xt(r[n.getCurrentIndex()]))}return t},a.prototype.getMediaOption=function(e){var t=this._api.getWidth(),r=this._api.getHeight(),n=this._mediaList,i=this._mediaDefault,l=[],o=[];if(!n.length&&!i)return o;for(var c=0,d=n.length;c<d;c++)Kbe(n[c].query,t,r)&&l.push(c);return!l.length&&i&&(l=[-1]),l.length&&!Jbe(l,this._currentMediaIndices)&&(o=ct(l,function(u){return Xt(u===-1?i.option:n[u].option)})),this._currentMediaIndices=l,o},a})();function Zbe(a,e,t){var r=[],n,i,l=a.baseOption,o=a.timeline,c=a.options,d=a.media,u=!!a.media,h=!!(c||o||l&&l.timeline);l?(i=l,i.timeline||(i.timeline=o)):((h||u)&&(a.options=a.media=null),i=a),u&&lt(d)&&se(d,function(p){p&&p.option&&(p.query?r.push(p):n||(n=p))}),f(i),se(c,function(p){return f(p)}),se(r,function(p){return f(p.option)});function f(p){se(e,function(g){g(p,t)})}return{baseOption:i,timelineOptions:c||[],mediaDefault:n,mediaList:r}}function Kbe(a,e,t){var r={width:e,height:t,aspectratio:e/t},n=!0;return se(a,function(i,l){var o=l.match(qbe);if(!(!o||!o[1]||!o[2])){var c=o[1],d=o[2].toLowerCase();Qbe(r[d],i,c)||(n=!1)}}),n}function Qbe(a,e,t){return t==="min"?a>=e:t==="max"?a<=e:a===e}function Jbe(a,e){return a.join(",")===e.join(",")}var bo=se,Xv=aa,PP=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Q5(a){var e=a&&a.itemStyle;if(e)for(var t=0,r=PP.length;t<r;t++){var n=PP[t],i=e.normal,l=e.emphasis;i&&i[n]&&(a[n]=a[n]||{},a[n].normal?Ca(a[n].normal,i[n]):a[n].normal=i[n],i[n]=null),l&&l[n]&&(a[n]=a[n]||{},a[n].emphasis?Ca(a[n].emphasis,l[n]):a[n].emphasis=l[n],l[n]=null)}}function is(a,e,t){if(a&&a[e]&&(a[e].normal||a[e].emphasis)){var r=a[e].normal,n=a[e].emphasis;r&&(t?(a[e].normal=a[e].emphasis=null,ta(a[e],r)):a[e]=r),n&&(a.emphasis=a.emphasis||{},a.emphasis[e]=n,n.focus&&(a.emphasis.focus=n.focus),n.blurScope&&(a.emphasis.blurScope=n.blurScope))}}function Yg(a){is(a,"itemStyle"),is(a,"lineStyle"),is(a,"areaStyle"),is(a,"label"),is(a,"labelLine"),is(a,"upperLabel"),is(a,"edgeLabel")}function Wn(a,e){var t=Xv(a)&&a[e],r=Xv(t)&&t.textStyle;if(r)for(var n=0,i=FO.length;n<i;n++){var l=FO[n];r.hasOwnProperty(l)&&(t[l]=r[l])}}function Yl(a){a&&(Yg(a),Wn(a,"label"),a.emphasis&&Wn(a.emphasis,"label"))}function e1e(a){if(Xv(a)){Q5(a),Yg(a),Wn(a,"label"),Wn(a,"upperLabel"),Wn(a,"edgeLabel"),a.emphasis&&(Wn(a.emphasis,"label"),Wn(a.emphasis,"upperLabel"),Wn(a.emphasis,"edgeLabel"));var e=a.markPoint;e&&(Q5(e),Yl(e));var t=a.markLine;t&&(Q5(t),Yl(t));var r=a.markArea;r&&Yl(r);var n=a.data;if(a.type==="graph"){n=n||a.nodes;var i=a.links||a.edges;if(i&&!Qs(i))for(var l=0;l<i.length;l++)Yl(i[l]);se(a.categories,function(d){Yg(d)})}if(n&&!Qs(n))for(var l=0;l<n.length;l++)Yl(n[l]);if(e=a.markPoint,e&&e.data)for(var o=e.data,l=0;l<o.length;l++)Yl(o[l]);if(t=a.markLine,t&&t.data)for(var c=t.data,l=0;l<c.length;l++)lt(c[l])?(Yl(c[l][0]),Yl(c[l][1])):Yl(c[l]);a.type==="gauge"?(Wn(a,"axisLabel"),Wn(a,"title"),Wn(a,"detail")):a.type==="treemap"?(is(a.breadcrumb,"itemStyle"),se(a.levels,function(d){Yg(d)})):a.type==="tree"&&Yg(a.leaves)}}function ud(a){return lt(a)?a:a?[a]:[]}function zP(a){return(lt(a)?a[0]:a)||{}}function t1e(a,e){bo(ud(a.series),function(r){Xv(r)&&e1e(r)});var t=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&t.push("valueAxis","categoryAxis","logAxis","timeAxis"),bo(t,function(r){bo(ud(a[r]),function(n){n&&(Wn(n,"axisLabel"),Wn(n.axisPointer,"label"))})}),bo(ud(a.parallel),function(r){var n=r&&r.parallelAxisDefault;Wn(n,"axisLabel"),Wn(n&&n.axisPointer,"label")}),bo(ud(a.calendar),function(r){is(r,"itemStyle"),Wn(r,"dayLabel"),Wn(r,"monthLabel"),Wn(r,"yearLabel")}),bo(ud(a.radar),function(r){Wn(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),bo(ud(a.geo),function(r){Xv(r)&&(Yl(r),bo(ud(r.regions),function(n){Yl(n)}))}),bo(ud(a.timeline),function(r){Yl(r),is(r,"label"),is(r,"itemStyle"),is(r,"controlStyle",!0);var n=r.data;lt(n)&&se(n,function(i){aa(i)&&(is(i,"label"),is(i,"itemStyle"))})}),bo(ud(a.toolbox),function(r){is(r,"iconStyle"),bo(r.feature,function(n){is(n,"iconStyle")})}),Wn(zP(a.axisPointer),"label"),Wn(zP(a.tooltip).axisPointer,"label")}function a1e(a,e){for(var t=e.split(","),r=a,n=0;n<t.length&&(r=r&&r[t[n]],r!=null);n++);return r}function r1e(a,e,t,r){for(var n=e.split(","),i=a,l,o=0;o<n.length-1;o++)l=n[o],i[l]==null&&(i[l]={}),i=i[l];i[n[o]]==null&&(i[n[o]]=t)}function BP(a){a&&se(n1e,function(e){e[0]in a&&!(e[1]in a)&&(a[e[1]]=a[e[0]])})}var n1e=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],i1e=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],J5=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function rg(a){var e=a&&a.itemStyle;if(e)for(var t=0;t<J5.length;t++){var r=J5[t][1],n=J5[t][0];e[r]!=null&&(e[n]=e[r])}}function FP(a){a&&a.alignTo==="edge"&&a.margin!=null&&a.edgeDistance==null&&(a.edgeDistance=a.margin)}function VP(a){a&&a.downplay&&!a.blur&&(a.blur=a.downplay)}function s1e(a){a&&a.focusNodeAdjacency!=null&&(a.emphasis=a.emphasis||{},a.emphasis.focus==null&&(a.emphasis.focus="adjacency"))}function FY(a,e){if(a)for(var t=0;t<a.length;t++)e(a[t]),a[t]&&FY(a[t].children,e)}function VY(a,e){t1e(a,e),a.series=Or(a.series),se(a.series,function(t){if(aa(t)){var r=t.type;if(r==="line")t.clipOverflow!=null&&(t.clip=t.clipOverflow);else if(r==="pie"||r==="gauge"){t.clockWise!=null&&(t.clockwise=t.clockWise),FP(t.label);var n=t.data;if(n&&!Qs(n))for(var i=0;i<n.length;i++)FP(n[i]);t.hoverOffset!=null&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if(r==="gauge"){var l=a1e(t,"pointer.color");l!=null&&r1e(t,"itemStyle.color",l)}else if(r==="bar"){rg(t),rg(t.backgroundStyle),rg(t.emphasis);var n=t.data;if(n&&!Qs(n))for(var i=0;i<n.length;i++)typeof n[i]=="object"&&(rg(n[i]),rg(n[i]&&n[i].emphasis))}else if(r==="sunburst"){var o=t.highlightPolicy;o&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=o)),VP(t),FY(t.data,VP)}else r==="graph"||r==="sankey"?s1e(t):r==="map"&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&ta(t,t.mapLocation));t.hoverAnimation!=null&&(t.emphasis=t.emphasis||{},t.emphasis&&t.emphasis.scale==null&&(t.emphasis.scale=t.hoverAnimation)),BP(t)}}),a.dataRange&&(a.visualMap=a.dataRange),se(i1e,function(t){var r=a[t];r&&(lt(r)||(r=[r]),se(r,function(n){BP(n)}))})}function l1e(a){var e=Pt();a.eachSeries(function(t){var r=t.get("stack");if(r){var n=e.get(r)||e.set(r,[]),i=t.getData(),l={stackResultDimension:i.getCalculationInfo("stackResultDimension"),stackedOverDimension:i.getCalculationInfo("stackedOverDimension"),stackedDimension:i.getCalculationInfo("stackedDimension"),stackedByDimension:i.getCalculationInfo("stackedByDimension"),isStackedByIndex:i.getCalculationInfo("isStackedByIndex"),data:i,seriesModel:t};if(!l.stackedDimension||!(l.isStackedByIndex||l.stackedByDimension))return;n.push(l)}}),e.each(function(t){if(t.length!==0){var r=t[0].seriesModel,n=r.get("stackOrder")||"seriesAsc";n==="seriesDesc"&&t.reverse(),se(t,function(i,l){i.data.setCalculationInfo("stackedOnSeries",l>0?t[l-1].seriesModel:null)}),o1e(t)}})}function o1e(a){se(a,function(e,t){var r=[],n=[NaN,NaN],i=[e.stackResultDimension,e.stackedOverDimension],l=e.data,o=e.isStackedByIndex,c=e.seriesModel.get("stackStrategy")||"samesign";l.modify(i,function(d,u,h){var f=l.get(e.stackedDimension,h);if(isNaN(f))return n;var p,g;o?g=l.getRawIndex(h):p=l.get(e.stackedByDimension,h);for(var b=NaN,w=t-1;w>=0;w--){var j=a[w];if(o||(g=j.data.rawIndexOf(j.stackedByDimension,p)),g>=0){var k=j.data.getByRawIndex(j.stackResultDimension,g);if(c==="all"||c==="positive"&&k>0||c==="negative"&&k<0||c==="samesign"&&f>=0&&k>0||c==="samesign"&&f<=0&&k<0){f=Ume(f,k),b=k;break}}}return r[0]=f,r[1]=b,r})})}var AN=(function(){function a(e){this.data=e.data||(e.sourceFormat===Bo?{}:[]),this.sourceFormat=e.sourceFormat||IY,this.seriesLayoutBy=e.seriesLayoutBy||Mo,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var r=0;r<t.length;r++){var n=t[r];n.type==null&&OY(this,r)===Gi.Must&&(n.type="ordinal")}}return a})();function gM(a){return a instanceof AN}function f3(a,e,t){t=t||HY(a);var r=e.seriesLayoutBy,n=d1e(a,t,r,e.sourceHeader,e.dimensions),i=new AN({data:a,sourceFormat:t,seriesLayoutBy:r,dimensionsDefine:n.dimensionsDefine,startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount,metaRawOption:Xt(e)});return i}function vM(a){return new AN({data:a,sourceFormat:Qs(a)?hh:Tl})}function c1e(a){return new AN({data:a.data,sourceFormat:a.sourceFormat,seriesLayoutBy:a.seriesLayoutBy,dimensionsDefine:Xt(a.dimensionsDefine),startIndex:a.startIndex,dimensionsDetectedCount:a.dimensionsDetectedCount})}function HY(a){var e=IY;if(Qs(a))e=hh;else if(lt(a)){a.length===0&&(e=Oi);for(var t=0,r=a.length;t<r;t++){var n=a[t];if(n!=null){if(lt(n)||Qs(n)){e=Oi;break}else if(aa(n)){e=Ml;break}}}}else if(aa(a)){for(var i in a)if(Rt(a,i)&&ds(a[i])){e=Bo;break}}return e}function d1e(a,e,t,r,n){var i,l;if(!a)return{dimensionsDefine:HP(n),startIndex:l,dimensionsDetectedCount:i};if(e===Oi){var o=a;r==="auto"||r==null?UP(function(d){d!=null&&d!=="-"&&(At(d)?l==null&&(l=1):l=0)},t,o,10):l=Ka(r)?r:r?1:0,!n&&l===1&&(n=[],UP(function(d,u){n[u]=d!=null?d+"":""},t,o,1/0)),i=n?n.length:t===O0?o.length:o[0]?o[0].length:null}else if(e===Ml)n||(n=u1e(a));else if(e===Bo)n||(n=[],se(a,function(d,u){n.push(u)}));else if(e===Tl){var c=Wx(a[0]);i=lt(c)&&c.length||1}return{startIndex:l,dimensionsDefine:HP(n),dimensionsDetectedCount:i}}function u1e(a){for(var e=0,t;e<a.length&&!(t=a[e++]););if(t)return Ua(t)}function HP(a){if(a){var e=Pt();return ct(a,function(t,r){t=aa(t)?t:{name:t};var n={name:t.name,displayName:t.displayName,type:t.type};if(n.name==null)return n;n.name+="",n.displayName==null&&(n.displayName=n.name);var i=e.get(n.name);return i?n.name+="-"+i.count++:e.set(n.name,{count:1}),n})}}function UP(a,e,t,r){if(e===O0)for(var n=0;n<t.length&&n<r;n++)a(t[n]?t[n][0]:null,n);else for(var i=t[0]||[],n=0;n<i.length&&n<r;n++)a(i[n],n)}function UY(a){var e=a.sourceFormat;return e===Ml||e===Bo}var _f,Nf,jf,Sf,GP,WP,GY=(function(){function a(e,t){var r=gM(e)?e:vM(e);this._source=r;var n=this._data=r.data,i=r.sourceFormat;r.seriesLayoutBy,i===hh&&(this._offset=0,this._dimSize=t,this._data=n),WP(this,n,r)}return a.prototype.getSource=function(){return this._source},a.prototype.count=function(){return 0},a.prototype.getItem=function(e,t){},a.prototype.appendData=function(e){},a.prototype.clean=function(){},a.protoInitialize=(function(){var e=a.prototype;e.pure=!1,e.persistent=!0})(),a.internalField=(function(){var e;WP=function(l,o,c){var d=c.sourceFormat,u=c.seriesLayoutBy,h=c.startIndex,f=c.dimensionsDefine,p=GP[bM(d,u)];if(et(l,p),d===hh)l.getItem=t,l.count=n,l.fillStorage=r;else{var g=WY(d,u);l.getItem=Tt(g,null,o,h,f);var b=YY(d,u);l.count=Tt(b,null,o,h,f)}};var t=function(l,o){l=l-this._offset,o=o||[];for(var c=this._data,d=this._dimSize,u=d*l,h=0;h<d;h++)o[h]=c[u+h];return o},r=function(l,o,c,d){for(var u=this._data,h=this._dimSize,f=0;f<h;f++){for(var p=d[f],g=p[0]==null?1/0:p[0],b=p[1]==null?-1/0:p[1],w=o-l,j=c[f],k=0;k<w;k++){var T=u[k*h+f];j[l+k]=T,T<g&&(g=T),T>b&&(b=T)}p[0]=g,p[1]=b}},n=function(){return this._data?this._data.length/this._dimSize:0};GP=(e={},e[Oi+"_"+Mo]={pure:!0,appendData:i},e[Oi+"_"+O0]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[Ml]={pure:!0,appendData:i},e[Bo]={pure:!0,appendData:function(l){var o=this._data;se(l,function(c,d){for(var u=o[d]||(o[d]=[]),h=0;h<(c||[]).length;h++)u.push(c[h])})}},e[Tl]={appendData:i},e[hh]={persistent:!1,pure:!0,appendData:function(l){this._data=l},clean:function(){this._offset+=this.count(),this._data=null}},e);function i(l){for(var o=0;o<l.length;o++)this._data.push(l[o])}})(),a})(),Dy=function(a){lt(a)||pW("series.data or dataset.source must be an array.")};_f={},_f[Oi+"_"+Mo]=Dy,_f[Oi+"_"+O0]=Dy,_f[Ml]=Dy,_f[Bo]=function(a,e){for(var t=0;t<e.length;t++){var r=e[t].name;r==null&&pW("dimension name must not be null/undefined.")}},_f[Tl]=Dy;var YP=function(a,e,t,r){return a[r]},h1e=(Nf={},Nf[Oi+"_"+Mo]=function(a,e,t,r){return a[r+e]},Nf[Oi+"_"+O0]=function(a,e,t,r,n){r+=e;for(var i=n||[],l=a,o=0;o<l.length;o++){var c=l[o];i[o]=c?c[r]:null}return i},Nf[Ml]=YP,Nf[Bo]=function(a,e,t,r,n){for(var i=n||[],l=0;l<t.length;l++){var o=t[l].name,c=o!=null?a[o]:null;i[l]=c?c[r]:null}return i},Nf[Tl]=YP,Nf);function WY(a,e){var t=h1e[bM(a,e)];return t}var $P=function(a,e,t){return a.length},f1e=(jf={},jf[Oi+"_"+Mo]=function(a,e,t){return Math.max(0,a.length-e)},jf[Oi+"_"+O0]=function(a,e,t){var r=a[0];return r?Math.max(0,r.length-e):0},jf[Ml]=$P,jf[Bo]=function(a,e,t){var r=t[0].name,n=r!=null?a[r]:null;return n?n.length:0},jf[Tl]=$P,jf);function YY(a,e){var t=f1e[bM(a,e)];return t}var ek=function(a,e,t){return a[e]},p1e=(Sf={},Sf[Oi]=ek,Sf[Ml]=function(a,e,t){return a[t]},Sf[Bo]=ek,Sf[Tl]=function(a,e,t){var r=Wx(a);return r instanceof Array?r[e]:r},Sf[hh]=ek,Sf);function $Y(a){var e=p1e[a];return e}function bM(a,e){return a===Oi?a+"_"+e:a}function Mx(a,e,t){if(a){var r=a.getRawDataItem(e);if(r!=null){var n=a.getStore(),i=n.getSource().sourceFormat;if(t!=null){var l=a.getDimensionIndex(t),o=n.getDimensionProperty(l);return $Y(i)(r,l,o)}else{var c=r;return i===Tl&&(c=Wx(r)),c}}}}var x1e=/\{@(.+?)\}/g,TN=(function(){function a(){}return a.prototype.getDataParams=function(e,t){var r=this.getData(t),n=this.getRawValue(e,t),i=r.getRawIndex(e),l=r.getName(e),o=r.getRawDataItem(e),c=r.getItemVisual(e,"style"),d=c&&c[r.getItemVisual(e,"drawType")||"fill"],u=c&&c.stroke,h=this.mainType,f=h==="series",p=r.userOutput&&r.userOutput.get();return{componentType:h,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:f?this.subType:null,seriesIndex:this.seriesIndex,seriesId:f?this.id:null,seriesName:f?this.name:null,name:l,dataIndex:i,data:o,dataType:t,value:n,color:d,borderColor:u,dimensionNames:p?p.fullDimensions:null,encode:p?p.encode:null,$vars:["seriesName","name","value"]}},a.prototype.getFormattedLabel=function(e,t,r,n,i,l){t=t||"normal";var o=this.getData(r),c=this.getDataParams(e,r);if(l&&(c.value=l.interpolatedValue),n!=null&&lt(c.value)&&(c.value=c.value[n]),!i){var d=o.getItemModel(e);i=d.get(t==="normal"?["label","formatter"]:[t,"label","formatter"])}if(Yt(i))return c.status=t,c.dimensionIndex=n,i(c);if(At(i)){var u=wY(i,c);return u.replace(x1e,function(h,f){var p=f.length,g=f;g.charAt(0)==="["&&g.charAt(p-1)==="]"&&(g=+g.slice(1,p-1));var b=Mx(o,e,g);if(l&&lt(l.interpolatedValue)){var w=o.getDimensionIndex(g);w>=0&&(b=l.interpolatedValue[w])}return b!=null?b+"":""})}},a.prototype.getRawValue=function(e,t){return Mx(this.getData(t),e)},a.prototype.formatTooltip=function(e,t,r){},a})();function qP(a){var e,t;return aa(a)?a.type&&(t=a):e=a,{text:e,frag:t}}function fv(a){return new m1e(a)}var m1e=(function(){function a(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return a.prototype.perform=function(e){var t=this._upstream,r=e&&e.skip;if(this._dirty&&t){var n=this.context;n.data=n.outputData=t.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var i;this._plan&&!r&&(i=this._plan(this.context));var l=u(this._modBy),o=this._modDataCount||0,c=u(e&&e.modBy),d=e&&e.modDataCount||0;(l!==c||o!==d)&&(i="reset");function u(k){return!(k>=1)&&(k=1),k}var h;(this._dirty||i==="reset")&&(this._dirty=!1,h=this._doReset(r)),this._modBy=c,this._modDataCount=d;var f=e&&e.step;if(t?this._dueEnd=t._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var p=this._dueIndex,g=Math.min(f!=null?this._dueIndex+f:1/0,this._dueEnd);if(!r&&(h||p<g)){var b=this._progress;if(lt(b))for(var w=0;w<b.length;w++)this._doProgress(b[w],p,g,c,d);else this._doProgress(b,p,g,c,d)}this._dueIndex=g;var j=this._settedOutputEnd!=null?this._settedOutputEnd:g;this._outputDueEnd=j}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},a.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},a.prototype._doProgress=function(e,t,r,n,i){XP.reset(t,r,n,i),this._callingProgress=e,this._callingProgress({start:t,end:r,count:r-t,next:XP.next},this.context)},a.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var t,r;!e&&this._reset&&(t=this._reset(this.context),t&&t.progress&&(r=t.forceFirstProgress,t=t.progress),lt(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var n=this._downstream;return n&&n.dirty(),r},a.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},a.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},a.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},a.prototype.getUpstream=function(){return this._upstream},a.prototype.getDownstream=function(){return this._downstream},a.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},a})(),XP=(function(){var a,e,t,r,n,i={reset:function(c,d,u,h){e=c,a=d,t=u,r=h,n=Math.ceil(r/t),i.next=t>1&&r>0?o:l}};return i;function l(){return e<a?e++:null}function o(){var c=e%n*t+Math.ceil(e/n),d=e>=a?null:c<r?c:e;return e++,d}})();function fh(a,e){var t=e&&e.type;return t==="ordinal"?a:(t==="time"&&!Ka(a)&&a!=null&&a!=="-"&&(a=+I0(a)),a==null||a===""?NaN:Number(a))}var g1e=Pt({number:function(a){return parseFloat(a)},time:function(a){return+I0(a)},trim:function(a){return At(a)?eo(a):a}});function qY(a){return g1e.get(a)}var XY={lt:function(a,e){return a<e},lte:function(a,e){return a<=e},gt:function(a,e){return a>e},gte:function(a,e){return a>=e}},v1e=(function(){function a(e,t){if(!Ka(t)){var r="";cr(r)}this._opFn=XY[e],this._rvalFloat=Pd(t)}return a.prototype.evaluate=function(e){return Ka(e)?this._opFn(e,this._rvalFloat):this._opFn(Pd(e),this._rvalFloat)},a})(),ZY=(function(){function a(e,t){var r=e==="desc";this._resultLT=r?1:-1,t==null&&(t=r?"min":"max"),this._incomparable=t==="min"?-1/0:1/0}return a.prototype.evaluate=function(e,t){var r=Ka(e)?e:Pd(e),n=Ka(t)?t:Pd(t),i=isNaN(r),l=isNaN(n);if(i&&(r=this._incomparable),l&&(n=this._incomparable),i&&l){var o=At(e),c=At(t);o&&(r=c?e:0),c&&(n=o?t:0)}return r<n?this._resultLT:r>n?-this._resultLT:0},a})(),b1e=(function(){function a(e,t){this._rval=t,this._isEQ=e,this._rvalTypeof=typeof t,this._rvalFloat=Pd(t)}return a.prototype.evaluate=function(e){var t=e===this._rval;if(!t){var r=typeof e;r!==this._rvalTypeof&&(r==="number"||this._rvalTypeof==="number")&&(t=Pd(e)===this._rvalFloat)}return this._isEQ?t:!t},a})();function y1e(a,e){return a==="eq"||a==="ne"?new b1e(a==="eq",e):Rt(XY,a)?new v1e(a,e):null}var w1e=(function(){function a(){}return a.prototype.getRawData=function(){throw new Error("not supported")},a.prototype.getRawDataItem=function(e){throw new Error("not supported")},a.prototype.cloneRawData=function(){},a.prototype.getDimensionInfo=function(e){},a.prototype.cloneAllDimensionInfo=function(){},a.prototype.count=function(){},a.prototype.retrieveValue=function(e,t){},a.prototype.retrieveValueFromItem=function(e,t){},a.prototype.convertValue=function(e,t){return fh(e,t)},a})();function _1e(a,e){var t=new w1e,r=a.data,n=t.sourceFormat=a.sourceFormat,i=a.startIndex,l="";a.seriesLayoutBy!==Mo&&cr(l);var o=[],c={},d=a.dimensionsDefine;if(d)se(d,function(b,w){var j=b.name,k={index:w,name:j,displayName:b.displayName};if(o.push(k),j!=null){var T="";Rt(c,j)&&cr(T),c[j]=k}});else for(var u=0;u<a.dimensionsDetectedCount;u++)o.push({index:u});var h=WY(n,Mo);e.__isBuiltIn&&(t.getRawDataItem=function(b){return h(r,i,o,b)},t.getRawData=Tt(N1e,null,a)),t.cloneRawData=Tt(j1e,null,a);var f=YY(n,Mo);t.count=Tt(f,null,r,i,o);var p=$Y(n);t.retrieveValue=function(b,w){var j=h(r,i,o,b);return g(j,w)};var g=t.retrieveValueFromItem=function(b,w){if(b!=null){var j=o[w];if(j)return p(b,w,j.name)}};return t.getDimensionInfo=Tt(S1e,null,o,c),t.cloneAllDimensionInfo=Tt(k1e,null,o),t}function N1e(a){var e=a.sourceFormat;if(!yM(e)){var t="";cr(t)}return a.data}function j1e(a){var e=a.sourceFormat,t=a.data;if(!yM(e)){var r="";cr(r)}if(e===Oi){for(var n=[],i=0,l=t.length;i<l;i++)n.push(t[i].slice());return n}else if(e===Ml){for(var n=[],i=0,l=t.length;i<l;i++)n.push(et({},t[i]));return n}}function S1e(a,e,t){if(t!=null){if(Ka(t)||!isNaN(t)&&!Rt(e,t))return a[t];if(Rt(e,t))return e[t]}}function k1e(a){return Xt(a)}var KY=Pt();function C1e(a){a=Xt(a);var e=a.type,t="";e||cr(t);var r=e.split(":");r.length!==2&&cr(t);var n=!1;r[0]==="echarts"&&(e=r[1],n=!0),a.__isBuiltIn=n,KY.set(e,a)}function A1e(a,e,t){var r=Or(a),n=r.length,i="";n||cr(i);for(var l=0,o=n;l<o;l++){var c=r[l];e=T1e(c,e),l!==o-1&&(e.length=Math.max(e.length,1))}return e}function T1e(a,e,t,r){var n="";e.length||cr(n),aa(a)||cr(n);var i=a.type,l=KY.get(i);l||cr(n);var o=ct(e,function(d){return _1e(d,l)}),c=Or(l.transform({upstream:o[0],upstreamList:o,config:Xt(a.config)}));return ct(c,function(d,u){var h="";aa(d)||cr(h),d.data||cr(h);var f=HY(d.data);yM(f)||cr(h);var p,g=e[0];if(g&&u===0&&!d.dimensions){var b=g.startIndex;b&&(d.data=g.data.slice(0,b).concat(d.data)),p={seriesLayoutBy:Mo,sourceHeader:b,dimensions:g.metaRawOption.dimensions}}else p={seriesLayoutBy:Mo,sourceHeader:0,dimensions:d.dimensions};return f3(d.data,p,null)})}function yM(a){return a===Oi||a===Ml}var MN="undefined",M1e=typeof Uint32Array===MN?Array:Uint32Array,E1e=typeof Uint16Array===MN?Array:Uint16Array,QY=typeof Int32Array===MN?Array:Int32Array,ZP=typeof Float64Array===MN?Array:Float64Array,JY={float:ZP,int:QY,ordinal:Array,number:Array,time:ZP},tk;function kp(a){return a>65535?M1e:E1e}function Cp(){return[1/0,-1/0]}function D1e(a){var e=a.constructor;return e===Array?a.slice():new e(a)}function KP(a,e,t,r,n){var i=JY[t||"float"];if(n){var l=a[e],o=l&&l.length;if(o!==r){for(var c=new i(r),d=0;d<o;d++)c[d]=l[d];a[e]=c}}else a[e]=new i(r)}var p3=(function(){function a(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Pt()}return a.prototype.initData=function(e,t,r){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var n=e.getSource(),i=this.defaultDimValueGetter=tk[n.sourceFormat];this._dimValueGetter=r||i,this._rawExtent=[],UY(n),this._dimensions=ct(t,function(l){return{type:l.type,property:l.property}}),this._initDataFromProvider(0,e.count())},a.prototype.getProvider=function(){return this._provider},a.prototype.getSource=function(){return this._provider.getSource()},a.prototype.ensureCalculationDimension=function(e,t){var r=this._calcDimNameToIdx,n=this._dimensions,i=r.get(e);if(i!=null){if(n[i].type===t)return i}else i=n.length;return n[i]={type:t},r.set(e,i),this._chunks[i]=new JY[t||"float"](this._rawCount),this._rawExtent[i]=Cp(),i},a.prototype.collectOrdinalMeta=function(e,t){var r=this._chunks[e],n=this._dimensions[e],i=this._rawExtent,l=n.ordinalOffset||0,o=r.length;l===0&&(i[e]=Cp());for(var c=i[e],d=l;d<o;d++){var u=r[d]=t.parseAndCollect(r[d]);isNaN(u)||(c[0]=Math.min(u,c[0]),c[1]=Math.max(u,c[1]))}n.ordinalMeta=t,n.ordinalOffset=o,n.type="ordinal"},a.prototype.getOrdinalMeta=function(e){var t=this._dimensions[e],r=t.ordinalMeta;return r},a.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},a.prototype.appendData=function(e){var t=this._provider,r=this.count();t.appendData(e);var n=t.count();return t.persistent||(n+=r),r<n&&this._initDataFromProvider(r,n,!0),[r,n]},a.prototype.appendValues=function(e,t){for(var r=this._chunks,n=this._dimensions,i=n.length,l=this._rawExtent,o=this.count(),c=o+Math.max(e.length,t||0),d=0;d<i;d++){var u=n[d];KP(r,d,u.type,c,!0)}for(var h=[],f=o;f<c;f++)for(var p=f-o,g=0;g<i;g++){var u=n[g],b=tk.arrayRows.call(this,e[p]||h,u.property,p,g);r[g][f]=b;var w=l[g];b<w[0]&&(w[0]=b),b>w[1]&&(w[1]=b)}return this._rawCount=this._count=c,{start:o,end:c}},a.prototype._initDataFromProvider=function(e,t,r){for(var n=this._provider,i=this._chunks,l=this._dimensions,o=l.length,c=this._rawExtent,d=ct(l,function(k){return k.property}),u=0;u<o;u++){var h=l[u];c[u]||(c[u]=Cp()),KP(i,u,h.type,t,r)}if(n.fillStorage)n.fillStorage(e,t,i,c);else for(var f=[],p=e;p<t;p++){f=n.getItem(p,f);for(var g=0;g<o;g++){var b=i[g],w=this._dimValueGetter(f,d[g],p,g);b[p]=w;var j=c[g];w<j[0]&&(j[0]=w),w>j[1]&&(j[1]=w)}}!n.persistent&&n.clean&&n.clean(),this._rawCount=this._count=t,this._extent=[]},a.prototype.count=function(){return this._count},a.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var r=this._chunks[e];return r?r[this.getRawIndex(t)]:NaN},a.prototype.getValues=function(e,t){var r=[],n=[];if(t==null){t=e,e=[];for(var i=0;i<this._dimensions.length;i++)n.push(i)}else n=e;for(var i=0,l=n.length;i<l;i++)r.push(this.get(n[i],t));return r},a.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var r=this._chunks[e];return r?r[t]:NaN},a.prototype.getSum=function(e){var t=this._chunks[e],r=0;if(t)for(var n=0,i=this.count();n<i;n++){var l=this.get(e,n);isNaN(l)||(r+=l)}return r},a.prototype.getMedian=function(e){var t=[];this.each([e],function(i){isNaN(i)||t.push(i)});var r=t.sort(function(i,l){return i-l}),n=this.count();return n===0?0:n%2===1?r[(n-1)/2]:(r[n/2]+r[n/2-1])/2},a.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,r=t[e];if(r!=null&&r<this._count&&r===e)return e;for(var n=0,i=this._count-1;n<=i;){var l=(n+i)/2|0;if(t[l]<e)n=l+1;else if(t[l]>e)i=l-1;else return l}return-1},a.prototype.getIndices=function(){var e,t=this._indices;if(t){var r=t.constructor,n=this._count;if(r===Array){e=new r(n);for(var i=0;i<n;i++)e[i]=t[i]}else e=new r(t.buffer,0,n)}else{var r=kp(this._rawCount);e=new r(this.count());for(var i=0;i<e.length;i++)e[i]=i}return e},a.prototype.filter=function(e,t){if(!this._count)return this;for(var r=this.clone(),n=r.count(),i=kp(r._rawCount),l=new i(n),o=[],c=e.length,d=0,u=e[0],h=r._chunks,f=0;f<n;f++){var p=void 0,g=r.getRawIndex(f);if(c===0)p=t(f);else if(c===1){var b=h[u][g];p=t(b,f)}else{for(var w=0;w<c;w++)o[w]=h[e[w]][g];o[w]=f,p=t.apply(null,o)}p&&(l[d++]=g)}return d<n&&(r._indices=l),r._count=d,r._extent=[],r._updateGetRawIdx(),r},a.prototype.selectRange=function(e){var t=this.clone(),r=t._count;if(!r)return this;var n=Ua(e),i=n.length;if(!i)return this;var l=t.count(),o=kp(t._rawCount),c=new o(l),d=0,u=n[0],h=e[u][0],f=e[u][1],p=t._chunks,g=!1;if(!t._indices){var b=0;if(i===1){for(var w=p[n[0]],j=0;j<r;j++){var k=w[j];(k>=h&&k<=f||isNaN(k))&&(c[d++]=b),b++}g=!0}else if(i===2){for(var w=p[n[0]],T=p[n[1]],E=e[n[1]][0],I=e[n[1]][1],j=0;j<r;j++){var k=w[j],R=T[j];(k>=h&&k<=f||isNaN(k))&&(R>=E&&R<=I||isNaN(R))&&(c[d++]=b),b++}g=!0}}if(!g)if(i===1)for(var j=0;j<l;j++){var P=t.getRawIndex(j),k=p[n[0]][P];(k>=h&&k<=f||isNaN(k))&&(c[d++]=P)}else for(var j=0;j<l;j++){for(var H=!0,P=t.getRawIndex(j),G=0;G<i;G++){var X=n[G],k=p[X][P];(k<e[X][0]||k>e[X][1])&&(H=!1)}H&&(c[d++]=t.getRawIndex(j))}return d<l&&(t._indices=c),t._count=d,t._extent=[],t._updateGetRawIdx(),t},a.prototype.map=function(e,t){var r=this.clone(e);return this._updateDims(r,e,t),r},a.prototype.modify=function(e,t){this._updateDims(this,e,t)},a.prototype._updateDims=function(e,t,r){for(var n=e._chunks,i=[],l=t.length,o=e.count(),c=[],d=e._rawExtent,u=0;u<t.length;u++)d[t[u]]=Cp();for(var h=0;h<o;h++){for(var f=e.getRawIndex(h),p=0;p<l;p++)c[p]=n[t[p]][f];c[l]=h;var g=r&&r.apply(null,c);if(g!=null){typeof g!="object"&&(i[0]=g,g=i);for(var u=0;u<g.length;u++){var b=t[u],w=g[u],j=d[b],k=n[b];k&&(k[f]=w),w<j[0]&&(j[0]=w),w>j[1]&&(j[1]=w)}}}},a.prototype.lttbDownSample=function(e,t){var r=this.clone([e],!0),n=r._chunks,i=n[e],l=this.count(),o=0,c=Math.floor(1/t),d=this.getRawIndex(0),u,h,f,p=new(kp(this._rawCount))(Math.min((Math.ceil(l/c)+2)*2,l));p[o++]=d;for(var g=1;g<l-1;g+=c){for(var b=Math.min(g+c,l-1),w=Math.min(g+c*2,l),j=(w+b)/2,k=0,T=b;T<w;T++){var E=this.getRawIndex(T),I=i[E];isNaN(I)||(k+=I)}k/=w-b;var R=g,P=Math.min(g+c,l),H=g-1,G=i[d];u=-1,f=R;for(var X=-1,U=0,T=R;T<P;T++){var E=this.getRawIndex(T),I=i[E];if(isNaN(I)){U++,X<0&&(X=E);continue}h=Math.abs((H-j)*(I-G)-(H-T)*(k-G)),h>u&&(u=h,f=E)}U>0&&U<P-R&&(p[o++]=Math.min(X,f),f=Math.max(X,f)),p[o++]=f,d=f}return p[o++]=this.getRawIndex(l-1),r._count=o,r._indices=p,r.getRawIndex=this._getRawIdx,r},a.prototype.minmaxDownSample=function(e,t){for(var r=this.clone([e],!0),n=r._chunks,i=Math.floor(1/t),l=n[e],o=this.count(),c=new(kp(this._rawCount))(Math.ceil(o/i)*2),d=0,u=0;u<o;u+=i){var h=u,f=l[this.getRawIndex(h)],p=u,g=l[this.getRawIndex(p)],b=i;u+i>o&&(b=o-u);for(var w=0;w<b;w++){var j=this.getRawIndex(u+w),k=l[j];k<f&&(f=k,h=u+w),k>g&&(g=k,p=u+w)}var T=this.getRawIndex(h),E=this.getRawIndex(p);h<p?(c[d++]=T,c[d++]=E):(c[d++]=E,c[d++]=T)}return r._count=d,r._indices=c,r._updateGetRawIdx(),r},a.prototype.downSample=function(e,t,r,n){for(var i=this.clone([e],!0),l=i._chunks,o=[],c=Math.floor(1/t),d=l[e],u=this.count(),h=i._rawExtent[e]=Cp(),f=new(kp(this._rawCount))(Math.ceil(u/c)),p=0,g=0;g<u;g+=c){c>u-g&&(c=u-g,o.length=c);for(var b=0;b<c;b++){var w=this.getRawIndex(g+b);o[b]=d[w]}var j=r(o),k=this.getRawIndex(Math.min(g+n(o,j)||0,u-1));d[k]=j,j<h[0]&&(h[0]=j),j>h[1]&&(h[1]=j),f[p++]=k}return i._count=p,i._indices=f,i._updateGetRawIdx(),i},a.prototype.each=function(e,t){if(this._count)for(var r=e.length,n=this._chunks,i=0,l=this.count();i<l;i++){var o=this.getRawIndex(i);switch(r){case 0:t(i);break;case 1:t(n[e[0]][o],i);break;case 2:t(n[e[0]][o],n[e[1]][o],i);break;default:for(var c=0,d=[];c<r;c++)d[c]=n[e[c]][o];d[c]=i,t.apply(null,d)}}},a.prototype.getDataExtent=function(e){var t=this._chunks[e],r=Cp();if(!t)return r;var n=this.count(),i=!this._indices,l;if(i)return this._rawExtent[e].slice();if(l=this._extent[e],l)return l.slice();l=r;for(var o=l[0],c=l[1],d=0;d<n;d++){var u=this.getRawIndex(d),h=t[u];h<o&&(o=h),h>c&&(c=h)}return l=[o,c],this._extent[e]=l,l},a.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var r=[],n=this._chunks,i=0;i<n.length;i++)r.push(n[i][t]);return r},a.prototype.clone=function(e,t){var r=new a,n=this._chunks,i=e&&Mc(e,function(o,c){return o[c]=!0,o},{});if(i)for(var l=0;l<n.length;l++)r._chunks[l]=i[l]?D1e(n[l]):n[l];else r._chunks=n;return this._copyCommonProps(r),t||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},a.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Xt(this._extent),e._rawExtent=Xt(this._rawExtent)},a.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var r=this._indices.length;t=new e(r);for(var n=0;n<r;n++)t[n]=this._indices[n]}else t=new e(this._indices);return t}return null},a.prototype._getRawIdxIdentity=function(e){return e},a.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},a.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},a.internalField=(function(){function e(t,r,n,i){return fh(t[i],this._dimensions[i])}tk={arrayRows:e,objectRows:function(t,r,n,i){return fh(t[r],this._dimensions[i])},keyedColumns:e,original:function(t,r,n,i){var l=t&&(t.value==null?t:t.value);return fh(l instanceof Array?l[i]:l,this._dimensions[i])},typedArray:function(t,r,n,i){return t[i]}}})(),a})(),e$=(function(){function a(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return a.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},a.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},a.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},a.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},a.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,t=this._getUpstreamSourceManagers(),r=!!t.length,n,i;if(Iy(e)){var l=e,o=void 0,c=void 0,d=void 0;if(r){var u=t[0];u.prepareSource(),d=u.getSource(),o=d.data,c=d.sourceFormat,i=[u._getVersionSign()]}else o=l.get("data",!0),c=Qs(o)?hh:Tl,i=[];var h=this._getSourceMetaRawOption()||{},f=d&&d.metaRawOption||{},p=Ht(h.seriesLayoutBy,f.seriesLayoutBy)||null,g=Ht(h.sourceHeader,f.sourceHeader),b=Ht(h.dimensions,f.dimensions),w=p!==f.seriesLayoutBy||!!g!=!!f.sourceHeader||b;n=w?[f3(o,{seriesLayoutBy:p,sourceHeader:g,dimensions:b},c)]:[]}else{var j=e;if(r){var k=this._applyTransform(t);n=k.sourceList,i=k.upstreamSignList}else{var T=j.get("source",!0);n=[f3(T,this._getSourceMetaRawOption(),null)],i=[]}}this._setLocalSource(n,i)},a.prototype._applyTransform=function(e){var t=this._sourceHost,r=t.get("transform",!0),n=t.get("fromTransformResult",!0);if(n!=null){var i="";e.length!==1&&JP(i)}var l,o=[],c=[];return se(e,function(d){d.prepareSource();var u=d.getSource(n||0),h="";n!=null&&!u&&JP(h),o.push(u),c.push(d._getVersionSign())}),r?l=A1e(r,o,{datasetIndex:t.componentIndex}):n!=null&&(l=[c1e(o[0])]),{sourceList:l,upstreamSignList:c}},a.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var r=e[t];if(r._isDirty()||this._upstreamSignList[t]!==r._getVersionSign())return!0}},a.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(e)}return t},a.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},a.prototype._innerGetDataStore=function(e,t,r){var n=0,i=this._storeList,l=i[n];l||(l=i[n]={});var o=l[r];if(!o){var c=this._getUpstreamSourceManagers()[0];Iy(this._sourceHost)&&c?o=c._innerGetDataStore(e,t,r):(o=new p3,o.initData(new GY(t,e.length),e)),l[r]=o}return o},a.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(Iy(e)){var t=pM(e);return t?[t.getSourceManager()]:[]}else return ct(zbe(e),function(r){return r.getSourceManager()})},a.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,t,r,n;if(Iy(e))t=e.get("seriesLayoutBy",!0),r=e.get("sourceHeader",!0),n=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var i=e;t=i.get("seriesLayoutBy",!0),r=i.get("sourceHeader",!0),n=i.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:r,dimensions:n}},a})();function QP(a){var e=a.option.transform;e&&C2(a.option.transform)}function Iy(a){return a.mainType==="series"}function JP(a){throw new Error(a)}var I1e="line-height:1";function t$(a){var e=a.lineHeight;return e==null?I1e:"line-height:"+Ss(e+"")+"px"}function a$(a,e){var t=a.color||Be.color.tertiary,r=a.fontSize||12,n=a.fontWeight||"400",i=a.color||Be.color.secondary,l=a.fontSize||14,o=a.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+Ss(r+"")+"px;color:"+Ss(t)+";font-weight:"+Ss(n+""),valueStyle:"font-size:"+Ss(l+"")+"px;color:"+Ss(i)+";font-weight:"+Ss(o+"")}:{nameStyle:{fontSize:r,fill:t,fontWeight:n},valueStyle:{fontSize:l,fill:i,fontWeight:o}}}var R1e=[0,10,20,30],L1e=["",`
`,`

`,`


`];function Qn(a,e){return e.type=a,e}function x3(a){return a.type==="section"}function r$(a){return x3(a)?O1e:P1e}function n$(a){if(x3(a)){var e=0,t=a.blocks.length,r=t>1||t>0&&!a.noHeader;return se(a.blocks,function(n){var i=n$(n);i>=e&&(e=i+ +(r&&(!i||x3(n)&&!n.noHeader)))}),e}return 0}function O1e(a,e,t,r){var n=e.noHeader,i=z1e(n$(e)),l=[],o=e.blocks||[];us(!o||lt(o)),o=o||[];var c=a.orderMode;if(e.sortBlocks&&c){o=o.slice();var d={valueAsc:"asc",valueDesc:"desc"};if(Rt(d,c)){var u=new ZY(d[c],null);o.sort(function(b,w){return u.evaluate(b.sortParam,w.sortParam)})}else c==="seriesDesc"&&o.reverse()}se(o,function(b,w){var j=e.valueFormatter,k=r$(b)(j?et(et({},a),{valueFormatter:j}):a,b,w>0?i.html:0,r);k!=null&&l.push(k)});var h=a.renderMode==="richText"?l.join(i.richText):m3(r,l.join(""),n?t:i.html);if(n)return h;var f=c3(e.header,"ordinal",a.useUTC),p=a$(r,a.renderMode).nameStyle,g=t$(r);return a.renderMode==="richText"?i$(a,f,p)+i.richText+h:m3(r,'<div style="'+p+";"+g+';">'+Ss(f)+"</div>"+h,t)}function P1e(a,e,t,r){var n=a.renderMode,i=e.noName,l=e.noValue,o=!e.markerType,c=e.name,d=a.useUTC,u=e.valueFormatter||a.valueFormatter||function(E){return E=lt(E)?E:[E],ct(E,function(I,R){return c3(I,lt(p)?p[R]:p,d)})};if(!(i&&l)){var h=o?"":a.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||Be.color.secondary,n),f=i?"":c3(c,"ordinal",d),p=e.valueType,g=l?[]:u(e.value,e.dataIndex),b=!o||!i,w=!o&&i,j=a$(r,n),k=j.nameStyle,T=j.valueStyle;return n==="richText"?(o?"":h)+(i?"":i$(a,f,k))+(l?"":V1e(a,g,b,w,T)):m3(r,(o?"":h)+(i?"":B1e(f,!o,k))+(l?"":F1e(g,b,w,T)),t)}}function e9(a,e,t,r,n,i){if(a){var l=r$(a),o={useUTC:n,renderMode:t,orderMode:r,markupStyleCreator:e,valueFormatter:a.valueFormatter};return l(o,a,0,i)}}function z1e(a){return{html:R1e[a],richText:L1e[a]}}function m3(a,e,t){var r='<div style="clear:both"></div>',n="margin: "+t+"px 0 0",i=t$(a);return'<div style="'+n+";"+i+';">'+e+r+"</div>"}function B1e(a,e,t){var r=e?"margin-left:2px":"";return'<span style="'+t+";"+r+'">'+Ss(a)+"</span>"}function F1e(a,e,t,r){var n=t?"10px":"20px",i=e?"float:right;margin-left:"+n:"";return a=lt(a)?a:[a],'<span style="'+i+";"+r+'">'+ct(a,function(l){return Ss(l)}).join("&nbsp;&nbsp;")+"</span>"}function i$(a,e,t){return a.markupStyleCreator.wrapRichTextStyle(e,t)}function V1e(a,e,t,r,n){var i=[n],l=r?10:20;return t&&i.push({padding:[0,0,0,l],align:"right"}),a.markupStyleCreator.wrapRichTextStyle(lt(e)?e.join("  "):e,i)}function s$(a,e){var t=a.getData().getItemVisual(e,"style"),r=t[a.visualDrawType];return k0(r)}function l$(a,e){var t=a.get("padding");return t??(e==="richText"?[8,10]:10)}var ak=(function(){function a(){this.richTextStyles={},this._nextStyleNameId=hW()}return a.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},a.prototype.makeTooltipMarker=function(e,t,r){var n=r==="richText"?this._generateStyleName():null,i=Cbe({color:t,type:e,renderMode:r,markerId:n});return At(i)?i:(this.richTextStyles[n]=i.style,i.content)},a.prototype.wrapRichTextStyle=function(e,t){var r={};lt(t)?se(t,function(i){return et(r,i)}):et(r,t);var n=this._generateStyleName();return this.richTextStyles[n]=r,"{"+n+"|"+e+"}"},a})();function o$(a){var e=a.series,t=a.dataIndex,r=a.multipleSeries,n=e.getData(),i=n.mapDimensionsAll("defaultedTooltip"),l=i.length,o=e.getRawValue(t),c=lt(o),d=s$(e,t),u,h,f,p;if(l>1||c&&!l){var g=H1e(o,e,t,i,d);u=g.inlineValues,h=g.inlineValueTypes,f=g.blocks,p=g.inlineValues[0]}else if(l){var b=n.getDimensionInfo(i[0]);p=u=Mx(n,t,i[0]),h=b.type}else p=u=c?o[0]:o;var w=FT(e),j=w&&e.name||"",k=n.getName(t),T=r?j:k;return Qn("section",{header:j,noHeader:r||!w,sortParam:p,blocks:[Qn("nameValue",{markerType:"item",markerColor:d,name:T,noName:!eo(T),value:u,valueType:h,dataIndex:t})].concat(f||[])})}function H1e(a,e,t,r,n){var i=e.getData(),l=Mc(a,function(h,f,p){var g=i.getDimensionInfo(p);return h=h||g&&g.tooltip!==!1&&g.displayName!=null},!1),o=[],c=[],d=[];r.length?se(r,function(h){u(Mx(i,t,h),h)}):se(a,u);function u(h,f){var p=i.getDimensionInfo(f);!p||p.otherDims.tooltip===!1||(l?d.push(Qn("nameValue",{markerType:"subItem",markerColor:n,name:p.displayName,value:h,valueType:p.type})):(o.push(h),c.push(p.type)))}return{inlineValues:o,inlineValueTypes:c,blocks:d}}var Du=Ia();function Ry(a,e){return a.getName(e)||a.getId(e)}var qw="__universalTransitionEnabled",Vr=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return e.prototype.init=function(t,r,n){this.seriesIndex=this.componentIndex,this.dataTask=fv({count:G1e,reset:W1e}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,n);var i=Du(this).sourceManager=new e$(this);i.prepareSource();var l=this.getInitialData(t,n);a9(l,this),this.dataTask.context.data=l,Du(this).dataBeforeProcessed=l,t9(this),this._initSelectedMapFromData(l)},e.prototype.mergeDefaultAndTheme=function(t,r){var n=qv(this),i=n?L0(t):{},l=this.subType;za.hasClass(l)&&(l+="Series"),Ca(t,r.getTheme().get(this.subType)),Ca(t,this.getDefaultOption()),y0(t,"label",["show"]),this.fillDataTextStyle(t.data),n&&Rc(t,i,n)},e.prototype.mergeOption=function(t,r){t=Ca(this.option,t,!0),this.fillDataTextStyle(t.data);var n=qv(this);n&&Rc(this.option,t,n);var i=Du(this).sourceManager;i.dirty(),i.prepareSource();var l=this.getInitialData(t,r);a9(l,this),this.dataTask.dirty(),this.dataTask.context.data=l,Du(this).dataBeforeProcessed=l,t9(this),this._initSelectedMapFromData(l)},e.prototype.fillDataTextStyle=function(t){if(t&&!Qs(t))for(var r=["show"],n=0;n<t.length;n++)t[n]&&t[n].label&&y0(t[n],"label",r)},e.prototype.getInitialData=function(t,r){},e.prototype.appendData=function(t){var r=this.getRawData();r.appendData(t.data)},e.prototype.getData=function(t){var r=g3(this);if(r){var n=r.context.data;return t==null||!n.getLinkedData?n:n.getLinkedData(t)}else return Du(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var r=g3(this);if(r){var n=r.context;n.outputData=t,r!==this.dataTask&&(n.data=t)}Du(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return Pt(t)},e.prototype.getSourceManager=function(){return Du(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return Du(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var t=this.get("colorBy");return t||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.indicesOfNearest=function(t,r,n,i){var l=this.getData(),o=this.coordinateSystem,c=o&&o.getAxis(t);if(!o||!c)return[];var d=c.dataToCoord(n);i==null&&(i=1/0);var u=[],h=1/0,f=-1,p=0;return l.each(r,function(g,b){var w=c.dataToCoord(g),j=d-w,k=Math.abs(j);k<=i&&((k<h||k===h&&j>=0&&f<0)&&(h=k,f=j,p=0),j===f&&(u[p++]=b))}),u.length=p,u},e.prototype.formatTooltip=function(t,r,n){return o$({series:this,dataIndex:t,multipleSeries:r})},e.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(Ba.node&&!(t&&t.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,r,n){var i=this.ecModel,l=xM.prototype.getColorFromPalette.call(this,t,r,n);return l||(l=i.getColorFromPalette(t,r,n)),l},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,r){this._innerSelect(this.getData(r),t)},e.prototype.unselect=function(t,r){var n=this.option.selectedMap;if(n){var i=this.option.selectedMode,l=this.getData(r);if(i==="series"||n==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var o=0;o<t.length;o++){var c=t[o],d=Ry(l,c);n[d]=!1,this._selectedDataIndicesMap[d]=-1}}},e.prototype.toggleSelect=function(t,r){for(var n=[],i=0;i<t.length;i++)n[0]=t[i],this.isSelected(t[i],r)?this.unselect(n,r):this.select(n,r)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,r=Ua(t),n=[],i=0;i<r.length;i++){var l=t[r[i]];l>=0&&n.push(l)}return n},e.prototype.isSelected=function(t,r){var n=this.option.selectedMap;if(!n)return!1;var i=this.getData(r);return(n==="all"||n[Ry(i,t)])&&!i.getItemModel(t).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[qw])return!0;var t=this.option.universalTransition;return t?t===!0?!0:t&&t.enabled:!1},e.prototype._innerSelect=function(t,r){var n,i,l=this.option,o=l.selectedMode,c=r.length;if(!(!o||!c)){if(o==="series")l.selectedMap="all";else if(o==="multiple"){aa(l.selectedMap)||(l.selectedMap={});for(var d=l.selectedMap,u=0;u<c;u++){var h=r[u],f=Ry(t,h);d[f]=!0,this._selectedDataIndicesMap[f]=t.getRawIndex(h)}}else if(o==="single"||o===!0){var p=r[c-1],f=Ry(t,p);l.selectedMap=(n={},n[f]=!0,n),this._selectedDataIndicesMap=(i={},i[f]=t.getRawIndex(p),i)}}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var r=[];t.hasItemOption&&t.each(function(n){var i=t.getRawDataItem(n);i&&i.selected&&r.push(n)}),r.length>0&&this._innerSelect(t,r)}},e.registerClass=function(t){return za.registerClass(t)},e.protoInitialize=(function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"})(),e})(za);ei(Vr,TN);ei(Vr,xM);_W(Vr,za);function t9(a){var e=a.name;FT(a)||(a.name=U1e(a)||e)}function U1e(a){var e=a.getRawData(),t=e.mapDimensionsAll("seriesName"),r=[];return se(t,function(n){var i=e.getDimensionInfo(n);i.displayName&&r.push(i.displayName)}),r.join(" ")}function G1e(a){return a.model.getRawData().count()}function W1e(a){var e=a.model;return e.setData(e.getRawData().cloneShallow()),Y1e}function Y1e(a,e){e.outputData&&a.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function a9(a,e){se(zv(a.CHANGABLE_METHODS,a.DOWNSAMPLE_METHODS),function(t){a.wrapMethod(t,ya($1e,e))})}function $1e(a,e){var t=g3(a);return t&&t.setOutputEnd((e||this).count()),e}function g3(a){var e=(a.ecModel||{}).scheduler,t=e&&e.getPipeline(a.uid);if(t){var r=t.currentTask;if(r){var n=r.agentStubMap;n&&(r=n.get(a.uid))}return r}}var tn=(function(){function a(){this.group=new $t,this.uid=Kx("viewComponent")}return a.prototype.init=function(e,t){},a.prototype.render=function(e,t,r,n){},a.prototype.dispose=function(e,t){},a.prototype.updateView=function(e,t,r,n){},a.prototype.updateLayout=function(e,t,r,n){},a.prototype.updateVisual=function(e,t,r,n){},a.prototype.toggleBlurSeries=function(e,t,r){},a.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},a})();HT(tn);hN(tn);function Qx(){var a=Ia();return function(e){var t=a(e),r=e.pipelineContext,n=!!t.large,i=!!t.progressiveRender,l=t.large=!!(r&&r.large),o=t.progressiveRender=!!(r&&r.progressiveRender);return(n!==l||i!==o)&&"reset"}}var c$=Ia(),q1e=Qx(),Dr=(function(){function a(){this.group=new $t,this.uid=Kx("viewChart"),this.renderTask=fv({plan:X1e,reset:Z1e}),this.renderTask.context={view:this}}return a.prototype.init=function(e,t){},a.prototype.render=function(e,t,r,n){},a.prototype.highlight=function(e,t,r,n){var i=e.getData(n&&n.dataType);i&&n9(i,n,"emphasis")},a.prototype.downplay=function(e,t,r,n){var i=e.getData(n&&n.dataType);i&&n9(i,n,"normal")},a.prototype.remove=function(e,t){this.group.removeAll()},a.prototype.dispose=function(e,t){},a.prototype.updateView=function(e,t,r,n){this.render(e,t,r,n)},a.prototype.updateLayout=function(e,t,r,n){this.render(e,t,r,n)},a.prototype.updateVisual=function(e,t,r,n){this.render(e,t,r,n)},a.prototype.eachRendered=function(e){Eh(this.group,e)},a.markUpdateMethod=function(e,t){c$(e).updateMethod=t},a.protoInitialize=(function(){var e=a.prototype;e.type="chart"})(),a})();function r9(a,e,t){a&&Wv(a)&&(e==="emphasis"?zd:Bd)(a,t)}function n9(a,e,t){var r=w0(a,e),n=e&&e.highlightKey!=null?yve(e.highlightKey):null;r!=null?se(Or(r),function(i){r9(a.getItemGraphicEl(i),t,n)}):a.eachItemGraphicEl(function(i){r9(i,t,n)})}HT(Dr);hN(Dr);function X1e(a){return q1e(a.model)}function Z1e(a){var e=a.model,t=a.ecModel,r=a.api,n=a.payload,i=e.pipelineContext.progressiveRender,l=a.view,o=n&&c$(n).updateMethod,c=i?"incrementalPrepareRender":o&&l[o]?o:"render";return c!=="render"&&l[c](e,t,r,n),K1e[c]}var K1e={incrementalPrepareRender:{progress:function(a,e){e.view.incrementalRender(a,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(a,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},$2="\0__throttleOriginMethod",i9="\0__throttleRate",s9="\0__throttleType";function wM(a,e,t){var r,n=0,i=0,l=null,o,c,d,u;e=e||0;function h(){i=new Date().getTime(),l=null,a.apply(c,d||[])}var f=function(){for(var p=[],g=0;g<arguments.length;g++)p[g]=arguments[g];r=new Date().getTime(),c=this,d=p;var b=u||e,w=u||t;u=null,o=r-(w?n:i)-b,clearTimeout(l),w?l=setTimeout(h,b):o>=0?h():l=setTimeout(h,-o),n=r};return f.clear=function(){l&&(clearTimeout(l),l=null)},f.debounceNextCall=function(p){u=p},f}function Jx(a,e,t,r){var n=a[e];if(n){var i=n[$2]||n,l=n[s9],o=n[i9];if(o!==t||l!==r){if(t==null||!r)return a[e]=i;n=a[e]=wM(i,t,r==="debounce"),n[$2]=i,n[s9]=r,n[i9]=t}return n}}function Zv(a,e){var t=a[e];t&&t[$2]&&(t.clear&&t.clear(),a[e]=t[$2])}var l9=Ia(),o9={itemStyle:_0(cY,!0),lineStyle:_0(oY,!0)},Q1e={lineStyle:"stroke",itemStyle:"fill"};function d$(a,e){var t=a.visualStyleMapper||o9[e];return t||(console.warn("Unknown style type '"+e+"'."),o9.itemStyle)}function u$(a,e){var t=a.visualDrawType||Q1e[e];return t||(console.warn("Unknown style type '"+e+"'."),"fill")}var J1e={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,e){var t=a.getData(),r=a.visualStyleAccessPath||"itemStyle",n=a.getModel(r),i=d$(a,r),l=i(n),o=n.getShallow("decal");o&&(t.setVisual("decal",o),o.dirty=!0);var c=u$(a,r),d=l[c],u=Yt(d)?d:null,h=l.fill==="auto"||l.stroke==="auto";if(!l[c]||u||h){var f=a.getColorFromPalette(a.name,null,e.getSeriesCount());l[c]||(l[c]=f,t.setVisual("colorFromPalette",!0)),l.fill=l.fill==="auto"||Yt(l.fill)?f:l.fill,l.stroke=l.stroke==="auto"||Yt(l.stroke)?f:l.stroke}if(t.setVisual("style",l),t.setVisual("drawType",c),!e.isSeriesFiltered(a)&&u)return t.setVisual("colorFromPalette",!1),{dataEach:function(p,g){var b=a.getDataParams(g),w=et({},l);w[c]=u(b),p.setItemVisual(g,"style",w)}}}},ng=new Fa,eye={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,e){if(!(a.ignoreStyleOnData||e.isSeriesFiltered(a))){var t=a.getData(),r=a.visualStyleAccessPath||"itemStyle",n=d$(a,r),i=t.getVisual("drawType");return{dataEach:t.hasItemOption?function(l,o){var c=l.getRawDataItem(o);if(c&&c[r]){ng.option=c[r];var d=n(ng),u=l.ensureUniqueItemVisual(o,"style");et(u,d),ng.option.decal&&(l.setItemVisual(o,"decal",ng.option.decal),ng.option.decal.dirty=!0),i in d&&l.setItemVisual(o,"colorFromPalette",!1)}}:null}}}},tye={performRawSeries:!0,overallReset:function(a){var e=Pt();a.eachSeries(function(t){var r=t.getColorBy();if(!t.isColorBySeries()){var n=t.type+"-"+r,i=e.get(n);i||(i={},e.set(n,i)),l9(t).scope=i}}),a.eachSeries(function(t){if(!(t.isColorBySeries()||a.isSeriesFiltered(t))){var r=t.getRawData(),n={},i=t.getData(),l=l9(t).scope,o=t.visualStyleAccessPath||"itemStyle",c=u$(t,o);i.each(function(d){var u=i.getRawIndex(d);n[u]=d}),r.each(function(d){var u=n[d],h=i.getItemVisual(u,"colorFromPalette");if(h){var f=i.ensureUniqueItemVisual(u,"style"),p=r.getName(d)||d+"",g=r.count();f[c]=t.getColorFromPalette(p,l,g)}})}})}},Ly=Math.PI;function aye(a,e){e=e||{},ta(e,{text:"loading",textColor:Be.color.primary,fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255,255,255,0.8)",showSpinner:!0,color:Be.color.theme[0],spinnerRadius:10,lineWidth:5,zlevel:0});var t=new $t,r=new Ea({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});t.add(r);var n=new tr({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),i=new Ea({style:{fill:"none"},textContent:n,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});t.add(i);var l;return e.showSpinner&&(l=new wN({shape:{startAngle:-Ly/2,endAngle:-Ly/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),l.animateShape(!0).when(1e3,{endAngle:Ly*3/2}).start("circularInOut"),l.animateShape(!0).when(1e3,{startAngle:Ly*3/2}).delay(300).start("circularInOut"),t.add(l)),t.resize=function(){var o=n.getBoundingRect().width,c=e.showSpinner?e.spinnerRadius:0,d=(a.getWidth()-c*2-(e.showSpinner&&o?10:0)-o)/2-(e.showSpinner&&o?0:5+o/2)+(e.showSpinner?0:o/2)+(o?0:c),u=a.getHeight()/2;e.showSpinner&&l.setShape({cx:d,cy:u}),i.setShape({x:d-c,y:u-c,width:c*2,height:c*2}),r.setShape({x:0,y:0,width:a.getWidth(),height:a.getHeight()})},t.resize(),t}var h$=(function(){function a(e,t,r,n){this._stageTaskMap=Pt(),this.ecInstance=e,this.api=t,r=this._dataProcessorHandlers=r.slice(),n=this._visualHandlers=n.slice(),this._allHandlers=r.concat(n)}return a.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(r){var n=r.overallTask;n&&n.dirty()})},a.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var r=this._pipelineMap.get(e.__pipeline.id),n=r.context,i=!t&&r.progressiveEnabled&&(!n||n.progressiveRender)&&e.__idxInPipeline>r.blockIndex,l=i?r.step:null,o=n&&n.modDataCount,c=o!=null?Math.ceil(o/l):null;return{step:l,modBy:c,modDataCount:o}}},a.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},a.prototype.updateStreamModes=function(e,t){var r=this._pipelineMap.get(e.uid),n=e.getData(),i=n.count(),l=r.progressiveEnabled&&t.incrementalPrepareRender&&i>=r.threshold,o=e.get("large")&&i>=e.get("largeThreshold"),c=e.get("progressiveChunkMode")==="mod"?i:null;e.pipelineContext=r.context={progressiveRender:l,modDataCount:c,large:o}},a.prototype.restorePipelines=function(e){var t=this,r=t._pipelineMap=Pt();e.eachSeries(function(n){var i=n.getProgressive(),l=n.uid;r.set(l,{id:l,head:null,tail:null,threshold:n.getProgressiveThreshold(),progressiveEnabled:i&&!(n.preventIncremental&&n.preventIncremental()),blockIndex:-1,step:Math.round(i||700),count:0}),t._pipe(n,n.dataTask)})},a.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),r=this.api;se(this._allHandlers,function(n){var i=e.get(n.uid)||e.set(n.uid,{}),l="";us(!(n.reset&&n.overallReset),l),n.reset&&this._createSeriesStageTask(n,i,t,r),n.overallReset&&this._createOverallStageTask(n,i,t,r)},this)},a.prototype.prepareView=function(e,t,r,n){var i=e.renderTask,l=i.context;l.model=t,l.ecModel=r,l.api=n,i.__block=!e.incrementalPrepareRender,this._pipe(t,i)},a.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},a.prototype.performVisualTasks=function(e,t,r){this._performStageTasks(this._visualHandlers,e,t,r)},a.prototype._performStageTasks=function(e,t,r,n){n=n||{};var i=!1,l=this;se(e,function(c,d){if(!(n.visualType&&n.visualType!==c.visualType)){var u=l._stageTaskMap.get(c.uid),h=u.seriesTaskMap,f=u.overallTask;if(f){var p,g=f.agentStubMap;g.each(function(w){o(n,w)&&(w.dirty(),p=!0)}),p&&f.dirty(),l.updatePayload(f,r);var b=l.getPerformArgs(f,n.block);g.each(function(w){w.perform(b)}),f.perform(b)&&(i=!0)}else h&&h.each(function(w,j){o(n,w)&&w.dirty();var k=l.getPerformArgs(w,n.block);k.skip=!c.performRawSeries&&t.isSeriesFiltered(w.context.model),l.updatePayload(w,r),w.perform(k)&&(i=!0)})}});function o(c,d){return c.setDirty&&(!c.dirtyMap||c.dirtyMap.get(d.__pipeline.id))}this.unfinished=i||this.unfinished},a.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(r){t=r.dataTask.perform()||t}),this.unfinished=t||this.unfinished},a.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},a.prototype.updatePayload=function(e,t){t!=="remain"&&(e.context.payload=t)},a.prototype._createSeriesStageTask=function(e,t,r,n){var i=this,l=t.seriesTaskMap,o=t.seriesTaskMap=Pt(),c=e.seriesType,d=e.getTargetSeries;e.createOnAllSeries?r.eachRawSeries(u):c?r.eachRawSeriesByType(c,u):d&&d(r,n).each(u);function u(h){var f=h.uid,p=o.set(f,l&&l.get(f)||fv({plan:lye,reset:oye,count:dye}));p.context={model:h,ecModel:r,api:n,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:i},i._pipe(h,p)}},a.prototype._createOverallStageTask=function(e,t,r,n){var i=this,l=t.overallTask=t.overallTask||fv({reset:rye});l.context={ecModel:r,api:n,overallReset:e.overallReset,scheduler:i};var o=l.agentStubMap,c=l.agentStubMap=Pt(),d=e.seriesType,u=e.getTargetSeries,h=!0,f=!1,p="";us(!e.createOnAllSeries,p),d?r.eachRawSeriesByType(d,g):u?u(r,n).each(g):(h=!1,se(r.getSeries(),g));function g(b){var w=b.uid,j=c.set(w,o&&o.get(w)||(f=!0,fv({reset:nye,onDirty:sye})));j.context={model:b,overallProgress:h},j.agent=l,j.__block=h,i._pipe(b,j)}f&&l.dirty()},a.prototype._pipe=function(e,t){var r=e.uid,n=this._pipelineMap.get(r);!n.head&&(n.head=t),n.tail&&n.tail.pipe(t),n.tail=t,t.__idxInPipeline=n.count++,t.__pipeline=n},a.wrapStageHandler=function(e,t){return Yt(e)&&(e={overallReset:e,seriesType:uye(e)}),e.uid=Kx("stageHandler"),t&&(e.visualType=t),e},a})();function rye(a){a.overallReset(a.ecModel,a.api,a.payload)}function nye(a){return a.overallProgress&&iye}function iye(){this.agent.dirty(),this.getDownstream().dirty()}function sye(){this.agent&&this.agent.dirty()}function lye(a){return a.plan?a.plan(a.model,a.ecModel,a.api,a.payload):null}function oye(a){a.useClearVisual&&a.data.clearAllVisual();var e=a.resetDefines=Or(a.reset(a.model,a.ecModel,a.api,a.payload));return e.length>1?ct(e,function(t,r){return f$(r)}):cye}var cye=f$(0);function f$(a){return function(e,t){var r=t.data,n=t.resetDefines[a];if(n&&n.dataEach)for(var i=e.start;i<e.end;i++)n.dataEach(r,i);else n&&n.progress&&n.progress(e,r)}}function dye(a){return a.data.count()}function uye(a){q2=null;try{a(Kv,p$)}catch{}return q2}var Kv={},p$={},q2;x$(Kv,mM);x$(p$,BY);Kv.eachSeriesByType=Kv.eachRawSeriesByType=function(a){q2=a};Kv.eachComponent=function(a){a.mainType==="series"&&a.subType&&(q2=a.subType)};function x$(a,e){for(var t in e.prototype)a[t]=Bn}var Kt=Be.darkColor,hye=Kt.background,ig=function(){return{axisLine:{lineStyle:{color:Kt.axisLine}},splitLine:{lineStyle:{color:Kt.axisSplitLine}},splitArea:{areaStyle:{color:[Kt.backgroundTint,Kt.backgroundTransparent]}},minorSplitLine:{lineStyle:{color:Kt.axisMinorSplitLine}},axisLabel:{color:Kt.axisLabel},axisName:{}}},c9={label:{color:Kt.secondary},itemStyle:{borderColor:Kt.borderTint},dividerLineStyle:{color:Kt.border}},m$={darkMode:!0,color:Kt.theme,backgroundColor:hye,axisPointer:{lineStyle:{color:Kt.border},crossStyle:{color:Kt.borderShade},label:{color:Kt.tertiary}},legend:{textStyle:{color:Kt.secondary},pageTextStyle:{color:Kt.tertiary}},textStyle:{color:Kt.secondary},title:{textStyle:{color:Kt.primary},subtextStyle:{color:Kt.quaternary}},toolbox:{iconStyle:{borderColor:Kt.accent50}},tooltip:{backgroundColor:Kt.neutral20,defaultBorderColor:Kt.border,textStyle:{color:Kt.tertiary}},dataZoom:{borderColor:Kt.accent10,textStyle:{color:Kt.tertiary},brushStyle:{color:Kt.backgroundTint},handleStyle:{color:Kt.neutral00,borderColor:Kt.accent20},moveHandleStyle:{color:Kt.accent40},emphasis:{handleStyle:{borderColor:Kt.accent50}},dataBackground:{lineStyle:{color:Kt.accent30},areaStyle:{color:Kt.accent20}},selectedDataBackground:{lineStyle:{color:Kt.accent50},areaStyle:{color:Kt.accent30}}},visualMap:{textStyle:{color:Kt.secondary},handleStyle:{borderColor:Kt.neutral30}},timeline:{lineStyle:{color:Kt.accent10},label:{color:Kt.tertiary},controlStyle:{color:Kt.accent30,borderColor:Kt.accent30}},calendar:{itemStyle:{color:Kt.neutral00,borderColor:Kt.neutral20},dayLabel:{color:Kt.tertiary},monthLabel:{color:Kt.secondary},yearLabel:{color:Kt.secondary}},matrix:{x:c9,y:c9,backgroundColor:{borderColor:Kt.axisLine},body:{itemStyle:{borderColor:Kt.borderTint}}},timeAxis:ig(),logAxis:ig(),valueAxis:ig(),categoryAxis:ig(),line:{symbol:"circle"},graph:{color:Kt.theme},gauge:{title:{color:Kt.secondary},axisLine:{lineStyle:{color:[[1,Kt.neutral05]]}},axisLabel:{color:Kt.axisLabel},detail:{color:Kt.primary}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}},funnel:{itemStyle:{borderColor:Kt.background}},radar:(function(){var a=ig();return a.axisName={color:Kt.axisLabel},a.axisLine.lineStyle.color=Kt.neutral20,a})(),treemap:{breadcrumb:{itemStyle:{color:Kt.neutral20,textStyle:{color:Kt.secondary}},emphasis:{itemStyle:{color:Kt.neutral30}}}},sunburst:{itemStyle:{borderColor:Kt.background}},map:{itemStyle:{borderColor:Kt.border,areaColor:Kt.neutral10},label:{color:Kt.tertiary},emphasis:{label:{color:Kt.primary},itemStyle:{areaColor:Kt.highlight}},select:{label:{color:Kt.primary},itemStyle:{areaColor:Kt.highlight}}},geo:{itemStyle:{borderColor:Kt.border,areaColor:Kt.neutral10},emphasis:{label:{color:Kt.primary},itemStyle:{areaColor:Kt.highlight}},select:{label:{color:Kt.primary},itemStyle:{color:Kt.highlight}}}};m$.categoryAxis.splitLine.show=!1;var fye=(function(){function a(){}return a.prototype.normalizeQuery=function(e){var t={},r={},n={};if(At(e)){var i=gc(e);t.mainType=i.main||null,t.subType=i.sub||null}else{var l=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};se(e,function(c,d){for(var u=!1,h=0;h<l.length;h++){var f=l[h],p=d.lastIndexOf(f);if(p>0&&p===d.length-f.length){var g=d.slice(0,p);g!=="data"&&(t.mainType=g,t[f.toLowerCase()]=c,u=!0)}}o.hasOwnProperty(d)&&(r[d]=c,u=!0),u||(n[d]=c)})}return{cptQuery:t,dataQuery:r,otherQuery:n}},a.prototype.filter=function(e,t){var r=this.eventInfo;if(!r)return!0;var n=r.targetEl,i=r.packedEvent,l=r.model,o=r.view;if(!l||!o)return!0;var c=t.cptQuery,d=t.dataQuery;return u(c,l,"mainType")&&u(c,l,"subType")&&u(c,l,"index","componentIndex")&&u(c,l,"name")&&u(c,l,"id")&&u(d,i,"name")&&u(d,i,"dataIndex")&&u(d,i,"dataType")&&(!o.filterForExposedEvent||o.filterForExposedEvent(e,t.otherQuery,n,i));function u(h,f,p,g){return h[p]==null||f[g||p]===h[p]}},a.prototype.afterTrigger=function(){this.eventInfo=null},a})(),v3=["symbol","symbolSize","symbolRotate","symbolOffset"],d9=v3.concat(["symbolKeepAspect"]),pye={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,e){var t=a.getData();if(a.legendIcon&&t.setVisual("legendIcon",a.legendIcon),!a.hasSymbolVisual)return;for(var r={},n={},i=!1,l=0;l<v3.length;l++){var o=v3[l],c=a.get(o);Yt(c)?(i=!0,n[o]=c):r[o]=c}if(r.symbol=r.symbol||a.defaultSymbol,t.setVisual(et({legendIcon:a.legendIcon||r.symbol,symbolKeepAspect:a.get("symbolKeepAspect")},r)),e.isSeriesFiltered(a))return;var d=Ua(n);function u(h,f){for(var p=a.getRawValue(f),g=a.getDataParams(f),b=0;b<d.length;b++){var w=d[b];h.setItemVisual(f,w,n[w](p,g))}}return{dataEach:i?u:null}}},xye={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,e){if(!a.hasSymbolVisual||e.isSeriesFiltered(a))return;var t=a.getData();function r(n,i){for(var l=n.getItemModel(i),o=0;o<d9.length;o++){var c=d9[o],d=l.getShallow(c,!0);d!=null&&n.setItemVisual(i,c,d)}}return{dataEach:t.hasItemOption?r:null}}};function _M(a,e,t){switch(t){case"color":var r=a.getItemVisual(e,"style");return r[a.getVisual("drawType")];case"opacity":return a.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return a.getItemVisual(e,t)}}function Pb(a,e){switch(e){case"color":var t=a.getVisual("style");return t[a.getVisual("drawType")];case"opacity":return a.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return a.getVisual(e)}}function g$(a,e,t,r){switch(t){case"color":var n=a.ensureUniqueItemVisual(e,"style");n[a.getVisual("drawType")]=r,a.setItemVisual(e,"colorFromPalette",!1);break;case"opacity":a.ensureUniqueItemVisual(e,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":a.setItemVisual(e,t,r);break}}function v$(a,e){function t(r,n){var i=[];return r.eachComponent({mainType:"series",subType:a,query:n},function(l){i.push(l.seriesIndex)}),i}se([[a+"ToggleSelect","toggleSelect"],[a+"Select","select"],[a+"UnSelect","unselect"]],function(r){e(r[0],function(n,i,l){n=et({},n),l.dispatchAction(et(n,{type:r[1],seriesIndex:t(i,n)}))})})}function Ap(a,e,t,r,n){var i=a+e;t.isSilent(i)||r.eachComponent({mainType:"series",subType:"pie"},function(l){for(var o=l.seriesIndex,c=l.option.selectedMap,d=n.selected,u=0;u<d.length;u++)if(d[u].seriesIndex===o){var h=l.getData(),f=w0(h,n.fromActionPayload);t.trigger(i,{type:i,seriesId:l.id,name:lt(f)?h.getName(f[0]):h.getName(f),selected:At(c)?c:et({},c)})}})}function mye(a,e,t){a.on("selectchanged",function(r){var n=t.getModel();r.isFromClick?(Ap("map","selectchanged",e,n,r),Ap("pie","selectchanged",e,n,r)):r.fromAction==="select"?(Ap("map","selected",e,n,r),Ap("pie","selected",e,n,r)):r.fromAction==="unselect"&&(Ap("map","unselected",e,n,r),Ap("pie","unselected",e,n,r))})}function Kf(a,e,t){for(var r;a&&!(e(a)&&(r=a,t));)a=a.__hostTarget||a.parent;return r}var gye=Math.round(Math.random()*9),vye=typeof Object.defineProperty=="function",bye=(function(){function a(){this._id="__ec_inner_"+gye++}return a.prototype.get=function(e){return this._guard(e)[this._id]},a.prototype.set=function(e,t){var r=this._guard(e);return vye?Object.defineProperty(r,this._id,{value:t,enumerable:!1,configurable:!0}):r[this._id]=t,this},a.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},a.prototype.has=function(e){return!!this._guard(e)[this._id]},a.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},a})(),yye=Ra.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(a,e){var t=e.cx,r=e.cy,n=e.width/2,i=e.height/2;a.moveTo(t,r-i),a.lineTo(t+n,r+i),a.lineTo(t-n,r+i),a.closePath()}}),wye=Ra.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(a,e){var t=e.cx,r=e.cy,n=e.width/2,i=e.height/2;a.moveTo(t,r-i),a.lineTo(t+n,r),a.lineTo(t,r+i),a.lineTo(t-n,r),a.closePath()}}),_ye=Ra.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(a,e){var t=e.x,r=e.y,n=e.width/5*3,i=Math.max(n,e.height),l=n/2,o=l*l/(i-l),c=r-i+l+o,d=Math.asin(o/l),u=Math.cos(d)*l,h=Math.sin(d),f=Math.cos(d),p=l*.6,g=l*.7;a.moveTo(t-u,c+o),a.arc(t,c,l,Math.PI-d,Math.PI*2+d),a.bezierCurveTo(t+u-h*p,c+o+f*p,t,r-g,t,r),a.bezierCurveTo(t,r-g,t-u+h*p,c+o+f*p,t-u,c+o),a.closePath()}}),Nye=Ra.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(a,e){var t=e.height,r=e.width,n=e.x,i=e.y,l=r/3*2;a.moveTo(n,i),a.lineTo(n+l,i+t),a.lineTo(n,i+t/4*3),a.lineTo(n-l,i+t),a.lineTo(n,i),a.closePath()}}),jye={line:qn,rect:Ea,roundRect:Ea,square:Ea,circle:Wd,diamond:wye,pin:_ye,arrow:Nye,triangle:yye},Sye={line:function(a,e,t,r,n){n.x1=a,n.y1=e+r/2,n.x2=a+t,n.y2=e+r/2},rect:function(a,e,t,r,n){n.x=a,n.y=e,n.width=t,n.height=r},roundRect:function(a,e,t,r,n){n.x=a,n.y=e,n.width=t,n.height=r,n.r=Math.min(t,r)/4},square:function(a,e,t,r,n){var i=Math.min(t,r);n.x=a,n.y=e,n.width=i,n.height=i},circle:function(a,e,t,r,n){n.cx=a+t/2,n.cy=e+r/2,n.r=Math.min(t,r)/2},diamond:function(a,e,t,r,n){n.cx=a+t/2,n.cy=e+r/2,n.width=t,n.height=r},pin:function(a,e,t,r,n){n.x=a+t/2,n.y=e+r/2,n.width=t,n.height=r},arrow:function(a,e,t,r,n){n.x=a+t/2,n.y=e+r/2,n.width=t,n.height=r},triangle:function(a,e,t,r,n){n.cx=a+t/2,n.cy=e+r/2,n.width=t,n.height=r}},X2={};se(jye,function(a,e){X2[e]=new a});var kye=Ra.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(a,e,t){var r=P2(a,e,t),n=this.shape;return n&&n.symbolType==="pin"&&e.position==="inside"&&(r.y=t.y+t.height*.4),r},buildPath:function(a,e,t){var r=e.symbolType;if(r!=="none"){var n=X2[r];n||(r="rect",n=X2[r]),Sye[r](e.x,e.y,e.width,e.height,n.shape),n.buildPath(a,n.shape,t)}}});function Cye(a,e){if(this.type!=="image"){var t=this.style;this.__isEmptyBrush?(t.stroke=a,t.fill=e||Be.color.neutral00,t.lineWidth=2):this.shape.symbolType==="line"?t.stroke=a:t.fill=a,this.markRedraw()}}function Jn(a,e,t,r,n,i,l){var o=a.indexOf("empty")===0;o&&(a=a.substr(5,1).toLowerCase()+a.substr(6));var c;return a.indexOf("image://")===0?c=QW(a.slice(8),new ra(e,t,r,n),l?"center":"cover"):a.indexOf("path://")===0?c=Yv(a.slice(7),{},new ra(e,t,r,n),l?"center":"cover"):c=new kye({shape:{symbolType:a,x:e,y:t,width:r,height:n}}),c.__isEmptyBrush=o,c.setColor=Cye,i&&c.setColor(i),c}function em(a){return lt(a)||(a=[+a,+a]),[a[0]||0,a[1]||0]}function P0(a,e){if(a!=null)return lt(a)||(a=[a,a]),[kt(a[0],e[0])||0,kt(Ht(a[1],a[0]),e[1])||0]}function Qf(a){return isFinite(a)}function Aye(a,e,t){var r=e.x==null?0:e.x,n=e.x2==null?1:e.x2,i=e.y==null?0:e.y,l=e.y2==null?0:e.y2;e.global||(r=r*t.width+t.x,n=n*t.width+t.x,i=i*t.height+t.y,l=l*t.height+t.y),r=Qf(r)?r:0,n=Qf(n)?n:1,i=Qf(i)?i:0,l=Qf(l)?l:0;var o=a.createLinearGradient(r,i,n,l);return o}function Tye(a,e,t){var r=t.width,n=t.height,i=Math.min(r,n),l=e.x==null?.5:e.x,o=e.y==null?.5:e.y,c=e.r==null?.5:e.r;e.global||(l=l*r+t.x,o=o*n+t.y,c=c*i),l=Qf(l)?l:.5,o=Qf(o)?o:.5,c=c>=0&&Qf(c)?c:.5;var d=a.createRadialGradient(l,o,0,l,o,c);return d}function b3(a,e,t){for(var r=e.type==="radial"?Tye(a,e,t):Aye(a,e,t),n=e.colorStops,i=0;i<n.length;i++)r.addColorStop(n[i].offset,n[i].color);return r}function Mye(a,e){if(a===e||!a&&!e)return!1;if(!a||!e||a.length!==e.length)return!0;for(var t=0;t<a.length;t++)if(a[t]!==e[t])return!0;return!1}function Oy(a){return parseInt(a,10)}function rx(a,e,t){var r=["width","height"][e],n=["clientWidth","clientHeight"][e],i=["paddingLeft","paddingTop"][e],l=["paddingRight","paddingBottom"][e];if(t[r]!=null&&t[r]!=="auto")return parseFloat(t[r]);var o=document.defaultView.getComputedStyle(a);return(a[n]||Oy(o[r])||Oy(a.style[r]))-(Oy(o[i])||0)-(Oy(o[l])||0)|0}function Eye(a,e){return!a||a==="solid"||!(e>0)?null:a==="dashed"?[4*e,2*e]:a==="dotted"?[e]:Ka(a)?[a]:lt(a)?a:null}function NM(a){var e=a.style,t=e.lineDash&&e.lineWidth>0&&Eye(e.lineDash,e.lineWidth),r=e.lineDashOffset;if(t){var n=e.strokeNoScale&&a.getLineScale?a.getLineScale():1;n&&n!==1&&(t=ct(t,function(i){return i/n}),r/=n)}return[t,r]}var Dye=new Ic(!0);function Z2(a){var e=a.stroke;return!(e==null||e==="none"||!(a.lineWidth>0))}function u9(a){return typeof a=="string"&&a!=="none"}function K2(a){var e=a.fill;return e!=null&&e!=="none"}function h9(a,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var t=a.globalAlpha;a.globalAlpha=e.fillOpacity*e.opacity,a.fill(),a.globalAlpha=t}else a.fill()}function f9(a,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var t=a.globalAlpha;a.globalAlpha=e.strokeOpacity*e.opacity,a.stroke(),a.globalAlpha=t}else a.stroke()}function y3(a,e,t){var r=UT(e.image,e.__image,t);if(fN(r)){var n=a.createPattern(r,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&n&&n.setTransform){var i=new DOMMatrix;i.translateSelf(e.x||0,e.y||0),i.rotateSelf(0,0,(e.rotation||0)*Rw),i.scaleSelf(e.scaleX||1,e.scaleY||1),n.setTransform(i)}return n}}function Iye(a,e,t,r){var n,i=Z2(t),l=K2(t),o=t.strokePercent,c=o<1,d=!e.path;(!e.silent||c)&&d&&e.createPathProxy();var u=e.path||Dye,h=e.__dirty;if(!r){var f=t.fill,p=t.stroke,g=l&&!!f.colorStops,b=i&&!!p.colorStops,w=l&&!!f.image,j=i&&!!p.image,k=void 0,T=void 0,E=void 0,I=void 0,R=void 0;(g||b)&&(R=e.getBoundingRect()),g&&(k=h?b3(a,f,R):e.__canvasFillGradient,e.__canvasFillGradient=k),b&&(T=h?b3(a,p,R):e.__canvasStrokeGradient,e.__canvasStrokeGradient=T),w&&(E=h||!e.__canvasFillPattern?y3(a,f,e):e.__canvasFillPattern,e.__canvasFillPattern=E),j&&(I=h||!e.__canvasStrokePattern?y3(a,p,e):e.__canvasStrokePattern,e.__canvasStrokePattern=I),g?a.fillStyle=k:w&&(E?a.fillStyle=E:l=!1),b?a.strokeStyle=T:j&&(I?a.strokeStyle=I:i=!1)}var P=e.getGlobalScale();u.setScale(P[0],P[1],e.segmentIgnoreThreshold);var H,G;a.setLineDash&&t.lineDash&&(n=NM(e),H=n[0],G=n[1]);var X=!0;(d||h&Wp)&&(u.setDPR(a.dpr),c?u.setContext(null):(u.setContext(a),X=!1),u.reset(),e.buildPath(u,e.shape,r),u.toStatic(),e.pathUpdated()),X&&u.rebuildPath(a,c?o:1),H&&(a.setLineDash(H),a.lineDashOffset=G),r||(t.strokeFirst?(i&&f9(a,t),l&&h9(a,t)):(l&&h9(a,t),i&&f9(a,t))),H&&a.setLineDash([])}function Rye(a,e,t){var r=e.__image=UT(t.image,e.__image,e,e.onload);if(!(!r||!fN(r))){var n=t.x||0,i=t.y||0,l=e.getWidth(),o=e.getHeight(),c=r.width/r.height;if(l==null&&o!=null?l=o*c:o==null&&l!=null?o=l/c:l==null&&o==null&&(l=r.width,o=r.height),t.sWidth&&t.sHeight){var d=t.sx||0,u=t.sy||0;a.drawImage(r,d,u,t.sWidth,t.sHeight,n,i,l,o)}else if(t.sx&&t.sy){var d=t.sx,u=t.sy,h=l-d,f=o-u;a.drawImage(r,d,u,h,f,n,i,l,o)}else a.drawImage(r,n,i,l,o)}}function Lye(a,e,t){var r,n=t.text;if(n!=null&&(n+=""),n){a.font=t.font||Ld,a.textAlign=t.textAlign,a.textBaseline=t.textBaseline;var i=void 0,l=void 0;a.setLineDash&&t.lineDash&&(r=NM(e),i=r[0],l=r[1]),i&&(a.setLineDash(i),a.lineDashOffset=l),t.strokeFirst?(Z2(t)&&a.strokeText(n,t.x,t.y),K2(t)&&a.fillText(n,t.x,t.y)):(K2(t)&&a.fillText(n,t.x,t.y),Z2(t)&&a.strokeText(n,t.x,t.y)),i&&a.setLineDash([])}}var p9=["shadowBlur","shadowOffsetX","shadowOffsetY"],x9=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function b$(a,e,t,r,n){var i=!1;if(!r&&(t=t||{},e===t))return!1;if(r||e.opacity!==t.opacity){Xs(a,n),i=!0;var l=Math.max(Math.min(e.opacity,1),0);a.globalAlpha=isNaN(l)?l0.opacity:l}(r||e.blend!==t.blend)&&(i||(Xs(a,n),i=!0),a.globalCompositeOperation=e.blend||l0.blend);for(var o=0;o<p9.length;o++){var c=p9[o];(r||e[c]!==t[c])&&(i||(Xs(a,n),i=!0),a[c]=a.dpr*(e[c]||0))}return(r||e.shadowColor!==t.shadowColor)&&(i||(Xs(a,n),i=!0),a.shadowColor=e.shadowColor||l0.shadowColor),i}function m9(a,e,t,r,n){var i=Qv(e,n.inHover),l=r?null:t&&Qv(t,n.inHover)||{};if(i===l)return!1;var o=b$(a,i,l,r,n);if((r||i.fill!==l.fill)&&(o||(Xs(a,n),o=!0),u9(i.fill)&&(a.fillStyle=i.fill)),(r||i.stroke!==l.stroke)&&(o||(Xs(a,n),o=!0),u9(i.stroke)&&(a.strokeStyle=i.stroke)),(r||i.opacity!==l.opacity)&&(o||(Xs(a,n),o=!0),a.globalAlpha=i.opacity==null?1:i.opacity),e.hasStroke()){var c=i.lineWidth,d=c/(i.strokeNoScale&&e.getLineScale?e.getLineScale():1);a.lineWidth!==d&&(o||(Xs(a,n),o=!0),a.lineWidth=d)}for(var u=0;u<x9.length;u++){var h=x9[u],f=h[0];(r||i[f]!==l[f])&&(o||(Xs(a,n),o=!0),a[f]=i[f]||h[1])}return o}function Oye(a,e,t,r,n){return b$(a,Qv(e,n.inHover),t&&Qv(t,n.inHover),r,n)}function y$(a,e){var t=e.transform,r=a.dpr||1;t?a.setTransform(r*t[0],r*t[1],r*t[2],r*t[3],r*t[4],r*t[5]):a.setTransform(r,0,0,r,0,0)}function Pye(a,e,t){for(var r=!1,n=0;n<a.length;n++){var i=a[n];r=r||i.isZeroArea(),y$(e,i),e.beginPath(),i.buildPath(e,i.shape),e.clip()}t.allClipped=r}function zye(a,e){return a&&e?a[0]!==e[0]||a[1]!==e[1]||a[2]!==e[2]||a[3]!==e[3]||a[4]!==e[4]||a[5]!==e[5]:!(!a&&!e)}var g9=1,v9=2,b9=3,y9=4;function Bye(a){var e=K2(a),t=Z2(a);return!(a.lineDash||!(+e^+t)||e&&typeof a.fill!="string"||t&&typeof a.stroke!="string"||a.strokePercent<1||a.strokeOpacity<1||a.fillOpacity<1)}function Xs(a,e){e.batchFill&&a.fill(),e.batchStroke&&a.stroke(),e.batchFill="",e.batchStroke=""}function Qv(a,e){return e&&a.__hoverStyle||a.style}function w$(a,e){Jf(a,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Jf(a,e,t,r){var n=e.transform;if(!e.shouldBePainted(t.viewWidth,t.viewHeight,!1,!1)){e.__dirty&=~wl,e.__isRendered=!1;return}var i=e.__clipPaths,l=t.prevElClipPaths,o=!1,c=!1;if((!l||Mye(i,l))&&(l&&l.length&&(Xs(a,t),a.restore(),c=o=!0,t.prevElClipPaths=null,t.allClipped=!1,t.prevEl=null),i&&i.length&&(Xs(a,t),a.save(),Pye(i,a,t),o=!0),t.prevElClipPaths=i),t.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var d=t.prevEl;d||(c=o=!0);var u=e instanceof Ra&&e.autoBatch&&Bye(e.style);o||zye(n,d.transform)?(Xs(a,t),y$(a,e)):u||Xs(a,t);var h=Qv(e,t.inHover);e instanceof Ra?(t.lastDrawType!==g9&&(c=!0,t.lastDrawType=g9),m9(a,e,d,c,t),(!u||!t.batchFill&&!t.batchStroke)&&a.beginPath(),Iye(a,e,h,u),u&&(t.batchFill=h.fill||"",t.batchStroke=h.stroke||"")):e instanceof Ax?(t.lastDrawType!==b9&&(c=!0,t.lastDrawType=b9),m9(a,e,d,c,t),Lye(a,e,h)):e instanceof Pi?(t.lastDrawType!==v9&&(c=!0,t.lastDrawType=v9),Oye(a,e,d,c,t),Rye(a,e,h)):e.getTemporalDisplayables&&(t.lastDrawType!==y9&&(c=!0,t.lastDrawType=y9),Fye(a,e,t)),u&&r&&Xs(a,t),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),t.prevEl=e,e.__dirty=0,e.__isRendered=!0}function Fye(a,e,t){var r=e.getDisplayables(),n=e.getTemporalDisplayables();a.save();var i={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:t.viewWidth,viewHeight:t.viewHeight,inHover:t.inHover},l,o;for(l=e.getCursor(),o=r.length;l<o;l++){var c=r[l];c.beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),Jf(a,c,i,l===o-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),i.prevEl=c}for(var d=0,u=n.length;d<u;d++){var c=n[d];c.beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),Jf(a,c,i,d===u-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),i.prevEl=c}e.clearTemporalDisplayables(),e.notClear=!0,a.restore()}var rk=new bye,w9=new kx(100),_9=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function Ex(a,e){if(a==="none")return null;var t=e.getDevicePixelRatio(),r=e.getZr(),n=r.painter.type==="svg";a.dirty&&rk.delete(a);var i=rk.get(a);if(i)return i;var l=ta(a,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});l.backgroundColor==="none"&&(l.backgroundColor=null);var o={repeat:"repeat"};return c(o),o.rotation=l.rotation,o.scaleX=o.scaleY=n?1:1/t,rk.set(a,o),a.dirty=!1,o;function c(d){for(var u=[t],h=!0,f=0;f<_9.length;++f){var p=l[_9[f]];if(p!=null&&!lt(p)&&!At(p)&&!Ka(p)&&typeof p!="boolean"){h=!1;break}u.push(p)}var g;if(h){g=u.join(",")+(n?"-svg":"");var b=w9.get(g);b&&(n?d.svgElement=b:d.image=b)}var w=N$(l.dashArrayX),j=Vye(l.dashArrayY),k=_$(l.symbol),T=Hye(w),E=j$(j),I=!n&&Do.createCanvas(),R=n&&{tag:"g",attrs:{},key:"dcl",children:[]},P=G(),H;I&&(I.width=P.width*t,I.height=P.height*t,H=I.getContext("2d")),X(),h&&w9.put(g,I||R),d.image=I,d.svgElement=R,d.svgWidth=P.width,d.svgHeight=P.height;function G(){for(var U=1,te=0,Z=T.length;te<Z;++te)U=zO(U,T[te]);for(var J=1,te=0,Z=k.length;te<Z;++te)J=zO(J,k[te].length);U*=J;var B=E*T.length*k.length;return{width:Math.max(1,Math.min(U,l.maxTileWidth)),height:Math.max(1,Math.min(B,l.maxTileHeight))}}function X(){H&&(H.clearRect(0,0,I.width,I.height),l.backgroundColor&&(H.fillStyle=l.backgroundColor,H.fillRect(0,0,I.width,I.height)));for(var U=0,te=0;te<j.length;++te)U+=j[te];if(U<=0)return;for(var Z=-E,J=0,B=0,W=0;Z<P.height;){if(J%2===0){for(var $=B/2%k.length,Q=0,ne=0,re=0;Q<P.width*2;){for(var K=0,te=0;te<w[W].length;++te)K+=w[W][te];if(K<=0)break;if(ne%2===0){var ae=(1-l.symbolSize)*.5,ce=Q+w[W][ne]*ae,de=Z+j[J]*ae,he=w[W][ne]*l.symbolSize,pe=j[J]*l.symbolSize,Re=re/2%k[$].length;Te(ce,de,he,pe,k[$][Re])}Q+=w[W][ne],++re,++ne,ne===w[W].length&&(ne=0)}++W,W===w.length&&(W=0)}Z+=j[J],++B,++J,J===j.length&&(J=0)}function Te(ke,Le,Ne,_e,Oe){var De=n?1:t,Ge=Jn(Oe,ke*De,Le*De,Ne*De,_e*De,l.color,l.symbolKeepAspect);if(n){var Ee=r.painter.renderOneToVNode(Ge);Ee&&R.children.push(Ee)}else w$(H,Ge)}}}}function _$(a){if(!a||a.length===0)return[["rect"]];if(At(a))return[[a]];for(var e=!0,t=0;t<a.length;++t)if(!At(a[t])){e=!1;break}if(e)return _$([a]);for(var r=[],t=0;t<a.length;++t)At(a[t])?r.push([a[t]]):r.push(a[t]);return r}function N$(a){if(!a||a.length===0)return[[0,0]];if(Ka(a)){var e=Math.ceil(a);return[[e,e]]}for(var t=!0,r=0;r<a.length;++r)if(!Ka(a[r])){t=!1;break}if(t)return N$([a]);for(var n=[],r=0;r<a.length;++r)if(Ka(a[r])){var e=Math.ceil(a[r]);n.push([e,e])}else{var e=ct(a[r],function(o){return Math.ceil(o)});e.length%2===1?n.push(e.concat(e)):n.push(e)}return n}function Vye(a){if(!a||typeof a=="object"&&a.length===0)return[0,0];if(Ka(a)){var e=Math.ceil(a);return[e,e]}var t=ct(a,function(r){return Math.ceil(r)});return a.length%2?t.concat(t):t}function Hye(a){return ct(a,function(e){return j$(e)})}function j$(a){for(var e=0,t=0;t<a.length;++t)e+=a[t];return a.length%2===1?e*2:e}function Uye(a,e){a.eachRawSeries(function(t){if(!a.isSeriesFiltered(t)){var r=t.getData();r.hasItemVisual()&&r.each(function(l){var o=r.getItemVisual(l,"decal");if(o){var c=r.ensureUniqueItemVisual(l,"style");c.decal=Ex(o,e)}});var n=r.getVisual("decal");if(n){var i=r.getVisual("style");i.decal=Ex(n,e)}}})}var _o=new co,S$={};function Gye(a,e){S$[a]=e}function k$(a){return S$[a]}var C$={};function Wye(a,e){C$[a]=e}function Yye(a){return C$[a]}var $ye=1,qye=800,Xye=900,Zye=1e3,Kye=2e3,Qye=5e3,A$=1e3,Jye=1100,jM=2e3,T$=3e3,ewe=4e3,EN=4500,twe=4600,awe=5e3,rwe=6e3,M$=7e3,nwe={PROCESSOR:{FILTER:Zye,SERIES_FILTER:qye,STATISTIC:Qye},VISUAL:{LAYOUT:A$,PROGRESSIVE_LAYOUT:Jye,GLOBAL:jM,CHART:T$,POST_CHART_LAYOUT:twe,COMPONENT:ewe,BRUSH:awe,CHART_ITEM:EN,ARIA:rwe,DECAL:M$}},ci="__flagInMainProcess",Py="__mainProcessVersion",Ti="__pendingUpdate",nk="__needsUpdateStatus",N9=/^[a-zA-Z0-9_]+$/,ik="__connectUpdateStatus",j9=0,iwe=1,swe=2;function E$(a){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.isDisposed()){this.id;return}return I$(this,a,e)}}function D$(a){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return I$(this,a,e)}}function I$(a,e,t){return t[0]=t[0]&&t[0].toLowerCase(),co.prototype[e].apply(a,t)}var R$=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e})(co),L$=R$.prototype;L$.on=D$("on");L$.off=D$("off");var kf,sk,zy,hd,By,lk,ok,Tp,Mp,S9,k9,ck,C9,Fy,A9,O$,Vl,T9,Ep,P$=(function(a){Ie(e,a);function e(t,r,n){var i=a.call(this,new fye)||this;i._chartsViews=[],i._chartsMap={},i._componentsViews=[],i._componentsMap={},i._pendingActions=[],n=n||{},i._dom=t;var l="canvas",o="auto",c=!1;i[Py]=1,n.ssr&&zme(function(f){var p=la(f),g=p.dataIndex;if(g!=null){var b=Pt();return b.set("series_index",p.seriesIndex),b.set("data_index",g),p.ssrType&&b.set("ssr_type",p.ssrType),b}});var d=i._zr=RO(t,{renderer:n.renderer||l,devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height,ssr:n.ssr,useDirtyRect:Ht(n.useDirtyRect,c),useCoarsePointer:Ht(n.useCoarsePointer,o),pointerSize:n.pointerSize});i._ssr=n.ssr,i._throttledZrFlush=wM(Tt(d.flush,d),17),i._updateTheme(r),i._locale=pbe(n.locale||dY),i._coordSysMgr=new Lb;var u=i._api=A9(i);function h(f,p){return f.__prio-p.__prio}return Pw(J2,h),Pw(N3,h),i._scheduler=new h$(i,u,N3,J2),i._messageCenter=new R$,i._initEvents(),i.resize=Tt(i.resize,i),d.animation.on("frame",i._onframe,i),S9(d,i),k9(d,i),C2(i),i}return e.prototype._onframe=function(){if(!this._disposed){T9(this);var t=this._scheduler;if(this[Ti]){var r=this[Ti].silent;this[ci]=!0,Ep(this);try{kf(this),hd.update.call(this,null,this[Ti].updateParams)}catch(c){throw this[ci]=!1,this[Ti]=null,c}this._zr.flush(),this[ci]=!1,this[Ti]=null,Tp.call(this,r),Mp.call(this,r)}else if(t.unfinished){var n=$ye,i=this._model,l=this._api;t.unfinished=!1;do{var o=+new Date;t.performSeriesTasks(i),t.performDataProcessorTasks(i),lk(this,i),t.performVisualTasks(i),Fy(this,this._model,l,"remain",{}),n-=+new Date-o}while(n>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(t,r,n){if(!this[ci]){if(this._disposed){this.id;return}var i,l,o;if(aa(r)&&(n=r.lazyUpdate,i=r.silent,l=r.replaceMerge,o=r.transition,r=r.notMerge),this[ci]=!0,Ep(this),!this._model||r){var c=new Xbe(this._api),d=this._theme,u=this._model=new mM;u.scheduler=this._scheduler,u.ssr=this._ssr,u.init(null,null,null,d,this._locale,c)}this._model.setOption(t,{replaceMerge:l},j3);var h={seriesTransition:o,optionChanged:!0};if(n)this[Ti]={silent:i,updateParams:h},this[ci]=!1,this.getZr().wakeUp();else{try{kf(this),hd.update.call(this,null,h)}catch(f){throw this[Ti]=null,this[ci]=!1,f}this._ssr||this._zr.flush(),this[Ti]=null,this[ci]=!1,Tp.call(this,i),Mp.call(this,i)}}},e.prototype.setTheme=function(t,r){if(!this[ci]){if(this._disposed){this.id;return}var n=this._model;if(n){var i=r&&r.silent,l=null;this[Ti]&&(i==null&&(i=this[Ti].silent),l=this[Ti].updateParams,this[Ti]=null),this[ci]=!0,Ep(this);try{this._updateTheme(t),n.setTheme(this._theme),kf(this),hd.update.call(this,{type:"setTheme"},l)}catch(o){throw this[ci]=!1,o}this[ci]=!1,Tp.call(this,i),Mp.call(this,i)}}},e.prototype._updateTheme=function(t){At(t)&&(t=z$[t]),t&&(t=Xt(t),t&&VY(t,!0),this._theme=t)},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Ba.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},e.prototype.renderToCanvas=function(t){t=t||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(t){t=t||{};var r=this._zr.painter;return r.renderToString({useViewBox:t.useViewBox})},e.prototype.getSvgDataURL=function(){var t=this._zr,r=t.storage.getDisplayList();return se(r,function(n){n.stopAnimation(null,!0)}),t.painter.toDataURL()},e.prototype.getDataURL=function(t){if(this._disposed){this.id;return}t=t||{};var r=t.excludeComponents,n=this._model,i=[],l=this;se(r,function(c){n.eachComponent({mainType:c},function(d){var u=l._componentsMap[d.__viewId];u.group.ignore||(i.push(u),u.group.ignore=!0)})});var o=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return se(i,function(c){c.group.ignore=!1}),o},e.prototype.getConnectedDataURL=function(t){if(this._disposed){this.id;return}var r=t.type==="svg",n=this.group,i=Math.min,l=Math.max,o=1/0;if(M9[n]){var c=o,d=o,u=-o,h=-o,f=[],p=t&&t.pixelRatio||this.getDevicePixelRatio();se(pv,function(T,E){if(T.group===n){var I=r?T.getZr().painter.getSvgDom().innerHTML:T.renderToCanvas(Xt(t)),R=T.getDom().getBoundingClientRect();c=i(R.left,c),d=i(R.top,d),u=l(R.right,u),h=l(R.bottom,h),f.push({dom:I,left:R.left,top:R.top})}}),c*=p,d*=p,u*=p,h*=p;var g=u-c,b=h-d,w=Do.createCanvas(),j=RO(w,{renderer:r?"svg":"canvas"});if(j.resize({width:g,height:b}),r){var k="";return se(f,function(T){var E=T.left-c,I=T.top-d;k+='<g transform="translate('+E+","+I+')">'+T.dom+"</g>"}),j.painter.getSvgRoot().innerHTML=k,t.connectedBackgroundColor&&j.painter.setBackgroundColor(t.connectedBackgroundColor),j.refreshImmediately(),j.painter.toDataURL()}else return t.connectedBackgroundColor&&j.add(new Ea({shape:{x:0,y:0,width:g,height:b},style:{fill:t.connectedBackgroundColor}})),se(f,function(T){var E=new Pi({style:{x:T.left*p-c,y:T.top*p-d,image:T.dom}});j.add(E)}),j.refreshImmediately(),w.toDataURL("image/"+(t&&t.type||"png"))}else return this.getDataURL(t)},e.prototype.convertToPixel=function(t,r,n){return By(this,"convertToPixel",t,r,n)},e.prototype.convertToLayout=function(t,r,n){return By(this,"convertToLayout",t,r,n)},e.prototype.convertFromPixel=function(t,r,n){return By(this,"convertFromPixel",t,r,n)},e.prototype.containPixel=function(t,r){if(this._disposed){this.id;return}var n=this._model,i,l=ux(n,t);return se(l,function(o,c){c.indexOf("Models")>=0&&se(o,function(d){var u=d.coordinateSystem;if(u&&u.containPoint)i=i||!!u.containPoint(r);else if(c==="seriesModels"){var h=this._chartsMap[d.__viewId];h&&h.containPoint&&(i=i||h.containPoint(r,d))}},this)},this),!!i},e.prototype.getVisual=function(t,r){var n=this._model,i=ux(n,t,{defaultMainType:"series"}),l=i.seriesModel,o=l.getData(),c=i.hasOwnProperty("dataIndexInside")?i.dataIndexInside:i.hasOwnProperty("dataIndex")?o.indexOfRawIndex(i.dataIndex):null;return c!=null?_M(o,c,r):Pb(o,r)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;se(lwe,function(n){var i=function(l){var o=t.getModel(),c=l.target,d,u=n==="globalout";if(u?d={}:c&&Kf(c,function(b){var w=la(b);if(w&&w.dataIndex!=null){var j=w.dataModel||o.getSeriesByIndex(w.seriesIndex);return d=j&&j.getDataParams(w.dataIndex,w.dataType,c)||{},!0}else if(w.eventData)return d=et({},w.eventData),!0},!0),d){var h=d.componentType,f=d.componentIndex;(h==="markLine"||h==="markPoint"||h==="markArea")&&(h="series",f=d.seriesIndex);var p=h&&f!=null&&o.getComponent(h,f),g=p&&t[p.mainType==="series"?"_chartsMap":"_componentsMap"][p.__viewId];d.event=l,d.type=n,t._$eventProcessor.eventInfo={targetEl:c,packedEvent:d,model:p,view:g},t.trigger(n,d)}};i.zrEventfulCallAtLast=!0,t._zr.on(n,i,t)});var r=this._messageCenter;se(_3,function(n,i){r.on(i,function(l){t.trigger(i,l)})}),mye(r,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var t=this.getDom();t&&bW(this.getDom(),kM,"");var r=this,n=r._api,i=r._model;se(r._componentsViews,function(l){l.dispose(i,n)}),se(r._chartsViews,function(l){l.dispose(i,n)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete pv[r.id]},e.prototype.resize=function(t){if(!this[ci]){if(this._disposed){this.id;return}this._zr.resize(t);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var n=r.resetOption("media"),i=t&&t.silent;this[Ti]&&(i==null&&(i=this[Ti].silent),n=!0,this[Ti]=null),this[ci]=!0,Ep(this);try{n&&kf(this),hd.update.call(this,{type:"resize",animation:et({duration:0},t&&t.animation)})}catch(l){throw this[ci]=!1,l}this[ci]=!1,Tp.call(this,i),Mp.call(this,i)}}},e.prototype.showLoading=function(t,r){if(this._disposed){this.id;return}if(aa(t)&&(r=t,t=""),t=t||"default",this.hideLoading(),!!S3[t]){var n=S3[t](this._api,r),i=this._zr;this._loadingFX=n,i.add(n)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(t){var r=et({},t);return r.type=w3[t.type],r},e.prototype.dispatchAction=function(t,r){if(this._disposed){this.id;return}if(aa(r)||(r={silent:!!r}),!!Q2[t.type]&&this._model){if(this[ci]){this._pendingActions.push(t);return}var n=r.silent;ok.call(this,t,n);var i=r.flush;i?this._zr.flush():i!==!1&&Ba.browser.weChat&&this._throttledZrFlush(),Tp.call(this,n),Mp.call(this,n)}},e.prototype.updateLabelLayout=function(){_o.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed){this.id;return}var r=t.seriesIndex,n=this.getModel(),i=n.getSeriesByIndex(r);i.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=(function(){kf=function(h){var f=h._scheduler;f.restorePipelines(h._model),f.prepareStageTasks(),sk(h,!0),sk(h,!1),f.plan()},sk=function(h,f){for(var p=h._model,g=h._scheduler,b=f?h._componentsViews:h._chartsViews,w=f?h._componentsMap:h._chartsMap,j=h._zr,k=h._api,T=0;T<b.length;T++)b[T].__alive=!1;f?p.eachComponent(function(R,P){R!=="series"&&E(P)}):p.eachSeries(E);function E(R){var P=R.__requireNewView;R.__requireNewView=!1;var H="_ec_"+R.id+"_"+R.type,G=!P&&w[H];if(!G){var X=gc(R.type),U=f?tn.getClass(X.main,X.sub):Dr.getClass(X.sub);G=new U,G.init(p,k),w[H]=G,b.push(G),j.add(G.group)}R.__viewId=G.__id=H,G.__alive=!0,G.__model=R,G.group.__ecComponentInfo={mainType:R.mainType,index:R.componentIndex},!f&&g.prepareView(G,R,p,k)}for(var T=0;T<b.length;){var I=b[T];I.__alive?T++:(!f&&I.renderTask.dispose(),j.remove(I.group),I.dispose(p,k),b.splice(T,1),w[I.__id]===I&&delete w[I.__id],I.__id=I.group.__ecComponentInfo=null)}},zy=function(h,f,p,g,b){var w=h._model;if(w.setUpdatePayload(p),!g){se([].concat(h._componentsViews).concat(h._chartsViews),I);return}var j={};j[g+"Id"]=p[g+"Id"],j[g+"Index"]=p[g+"Index"],j[g+"Name"]=p[g+"Name"];var k={mainType:g,query:j};b&&(k.subType=b);var T=p.excludeSeriesId,E;T!=null&&(E=Pt(),se(Or(T),function(R){var P=ui(R,null);P!=null&&E.set(P,!0)})),w&&w.eachComponent(k,function(R){var P=E&&E.get(R.id)!=null;if(!P)if(fP(p))if(R instanceof Vr)p.type===o0&&!p.notBlur&&!R.get(["emphasis","disabled"])&&hve(R,p,h._api);else{var H=ZT(R.mainType,R.componentIndex,p.name,h._api),G=H.focusSelf,X=H.dispatchers;p.type===o0&&G&&!p.notBlur&&J4(R.mainType,R.componentIndex,h._api),X&&se(X,function(U){p.type===o0?zd(U):Bd(U)})}else t3(p)&&R instanceof Vr&&(xve(R,p,h._api),uP(R),Vl(h))},h),w&&w.eachComponent(k,function(R){var P=E&&E.get(R.id)!=null;P||I(h[g==="series"?"_chartsMap":"_componentsMap"][R.__viewId])},h);function I(R){R&&R.__alive&&R[f]&&R[f](R.__model,w,h._api,p)}},hd={prepareAndUpdate:function(h){kf(this),hd.update.call(this,h,h&&{optionChanged:h.newOption!=null})},update:function(h,f){var p=this._model,g=this._api,b=this._zr,w=this._coordSysMgr,j=this._scheduler;if(p){p.setUpdatePayload(h),j.restoreData(p,h),j.performSeriesTasks(p),w.create(p,g),j.performDataProcessorTasks(p,h),lk(this,p),w.update(p,g),r(p),j.performVisualTasks(p,h);var k=p.get("backgroundColor")||"transparent";b.setBackgroundColor(k);var T=p.get("darkMode");T!=null&&T!=="auto"&&b.setDarkMode(T),ck(this,p,g,h,f),_o.trigger("afterupdate",p,g)}},updateTransform:function(h){var f=this,p=this._model,g=this._api;if(p){p.setUpdatePayload(h);var b=[];p.eachComponent(function(j,k){if(j!=="series"){var T=f.getViewOfComponentModel(k);if(T&&T.__alive)if(T.updateTransform){var E=T.updateTransform(k,p,g,h);E&&E.update&&b.push(T)}else b.push(T)}});var w=Pt();p.eachSeries(function(j){var k=f._chartsMap[j.__viewId];if(k.updateTransform){var T=k.updateTransform(j,p,g,h);T&&T.update&&w.set(j.uid,1)}else w.set(j.uid,1)}),r(p),this._scheduler.performVisualTasks(p,h,{setDirty:!0,dirtyMap:w}),Fy(this,p,g,h,{},w),_o.trigger("afterupdate",p,g)}},updateView:function(h){var f=this._model;f&&(f.setUpdatePayload(h),Dr.markUpdateMethod(h,"updateView"),r(f),this._scheduler.performVisualTasks(f,h,{setDirty:!0}),ck(this,f,this._api,h,{}),_o.trigger("afterupdate",f,this._api))},updateVisual:function(h){var f=this,p=this._model;p&&(p.setUpdatePayload(h),p.eachSeries(function(g){g.getData().clearAllVisual()}),Dr.markUpdateMethod(h,"updateVisual"),r(p),this._scheduler.performVisualTasks(p,h,{visualType:"visual",setDirty:!0}),p.eachComponent(function(g,b){if(g!=="series"){var w=f.getViewOfComponentModel(b);w&&w.__alive&&w.updateVisual(b,p,f._api,h)}}),p.eachSeries(function(g){var b=f._chartsMap[g.__viewId];b.updateVisual(g,p,f._api,h)}),_o.trigger("afterupdate",p,this._api))},updateLayout:function(h){hd.update.call(this,h)}};function t(h,f,p,g,b){if(h._disposed){h.id;return}for(var w=h._model,j=h._coordSysMgr.getCoordinateSystems(),k,T=ux(w,p),E=0;E<j.length;E++){var I=j[E];if(I[f]&&(k=I[f](w,T,g,b))!=null)return k}}By=t,lk=function(h,f){var p=h._chartsMap,g=h._scheduler;f.eachSeries(function(b){g.updateStreamModes(b,p[b.__viewId])})},ok=function(h,f){var p=this,g=this.getModel(),b=h.type,w=h.escapeConnect,j=Q2[b],k=(j.update||"update").split(":"),T=k.pop(),E=k[0]!=null&&gc(k[0]);this[ci]=!0,Ep(this);var I=[h],R=!1;h.batch&&(R=!0,I=ct(h.batch,function(W){return W=ta(et({},W),h),W.batch=null,W}));var P=[],H,G=[],X=j.nonRefinedEventType,U=t3(h),te=fP(h);if(te&&FW(this._api),se(I,function(W){var $=j.action(W,g,p._api);if(j.refineEvent?G.push($):H=$,H=H||et({},W),H.type=X,P.push(H),te){var Q=VT(h),ne=Q.queryOptionMap,re=Q.mainTypeSpecified,K=re?ne.keys()[0]:"series";zy(p,T,W,K),Vl(p)}else U?(zy(p,T,W,"series"),Vl(p)):E&&zy(p,T,W,E.main,E.sub)}),T!=="none"&&!te&&!U&&!E)try{this[Ti]?(kf(this),hd.update.call(this,h),this[Ti]=null):hd[T].call(this,h)}catch(W){throw this[ci]=!1,W}if(R?H={type:X,escapeConnect:w,batch:P}:H=P[0],this[ci]=!1,!f){var Z=void 0;if(j.refineEvent){var J=j.refineEvent(G,h,g,this._api).eventContent;us(aa(J)),Z=ta({type:j.refinedEventType},J),Z.fromAction=h.type,Z.fromActionPayload=h,Z.escapeConnect=!0}var B=this._messageCenter;B.trigger(H.type,H),Z&&B.trigger(Z.type,Z)}},Tp=function(h){for(var f=this._pendingActions;f.length;){var p=f.shift();ok.call(this,p,h)}},Mp=function(h){!h&&this.trigger("updated")},S9=function(h,f){h.on("rendered",function(p){f.trigger("rendered",p),h.animation.isFinished()&&!f[Ti]&&!f._scheduler.unfinished&&!f._pendingActions.length&&f.trigger("finished")})},k9=function(h,f){h.on("mouseover",function(p){var g=p.target,b=Kf(g,Wv);b&&(fve(b,p,f._api),Vl(f))}).on("mouseout",function(p){var g=p.target,b=Kf(g,Wv);b&&(pve(b,p,f._api),Vl(f))}).on("click",function(p){var g=p.target,b=Kf(g,function(k){return la(k).dataIndex!=null},!0);if(b){var w=b.selected?"unselect":"select",j=la(b);f._api.dispatchAction({type:w,dataType:j.dataType,dataIndexInside:j.dataIndex,seriesIndex:j.seriesIndex,isFromClick:!0})}})};function r(h){h.clearColorPalette(),h.eachSeries(function(f){f.clearColorPalette()})}function n(h){var f=[],p=[],g=!1;if(h.eachComponent(function(k,T){var E=T.get("zlevel")||0,I=T.get("z")||0,R=T.getZLevelKey();g=g||!!R,(k==="series"?p:f).push({zlevel:E,z:I,idx:T.componentIndex,type:k,key:R})}),g){var b=f.concat(p),w,j;Pw(b,function(k,T){return k.zlevel===T.zlevel?k.z-T.z:k.zlevel-T.zlevel}),se(b,function(k){var T=h.getComponent(k.type,k.idx),E=k.zlevel,I=k.key;w!=null&&(E=Math.max(w,E)),I?(E===w&&I!==j&&E++,j=I):j&&(E===w&&E++,j=""),w=E,T.setZLevel(E)})}}ck=function(h,f,p,g,b){n(f),C9(h,f,p,g,b),se(h._chartsViews,function(w){w.__alive=!1}),Fy(h,f,p,g,b),se(h._chartsViews,function(w){w.__alive||w.remove(f,p)})},C9=function(h,f,p,g,b,w){se(w||h._componentsViews,function(j){var k=j.__model;d(k,j),j.render(k,f,p,g),c(k,j),u(k,j)})},Fy=function(h,f,p,g,b,w){var j=h._scheduler;b=et(b||{},{updatedSeries:f.getSeries()}),_o.trigger("series:beforeupdate",f,p,b);var k=!1;f.eachSeries(function(T){var E=h._chartsMap[T.__viewId];E.__alive=!0;var I=E.renderTask;j.updatePayload(I,g),d(T,E),w&&w.get(T.uid)&&I.dirty(),I.perform(j.getPerformArgs(I))&&(k=!0),E.group.silent=!!T.get("silent"),o(T,E),uP(T)}),j.unfinished=k||j.unfinished,_o.trigger("series:layoutlabels",f,p,b),_o.trigger("series:transition",f,p,b),f.eachSeries(function(T){var E=h._chartsMap[T.__viewId];c(T,E),u(T,E)}),l(h,f),_o.trigger("series:afterupdate",f,p,b)},Vl=function(h){h[nk]=!0,h.getZr().wakeUp()},Ep=function(h){h[Py]=(h[Py]+1)%1e3},T9=function(h){h[nk]&&(h.getZr().storage.traverse(function(f){hx(f)||i(f)}),h[nk]=!1)};function i(h){for(var f=[],p=h.currentStates,g=0;g<p.length;g++){var b=p[g];b==="emphasis"||b==="blur"||b==="select"||f.push(b)}h.selected&&h.states.select&&f.push("select"),h.hoverState===vN&&h.states.emphasis?f.push("emphasis"):h.hoverState===Tb&&h.states.blur&&f.push("blur"),h.useStates(f)}function l(h,f){var p=h._zr,g=p.storage,b=0;g.traverse(function(w){w.isGroup||b++}),b>f.get("hoverLayerThreshold")&&!Ba.node&&!Ba.worker&&f.eachSeries(function(w){if(!w.preventUsingHoverLayer){var j=h._chartsMap[w.__viewId];j.__alive&&j.eachRendered(function(k){k.states.emphasis&&(k.states.emphasis.hoverLayer=!0)})}})}function o(h,f){var p=h.get("blendMode")||null;f.eachRendered(function(g){g.isGroup||(g.style.blend=p)})}function c(h,f){if(!h.preventAutoZ){var p=S0(h);f.eachRendered(function(g){return jN(g,p.z,p.zlevel),!0})}}function d(h,f){f.eachRendered(function(p){if(!hx(p)){var g=p.getTextContent(),b=p.getTextGuideLine();p.stateTransition&&(p.stateTransition=null),g&&g.stateTransition&&(g.stateTransition=null),b&&b.stateTransition&&(b.stateTransition=null),p.hasState()?(p.prevStates=p.currentStates,p.clearStates()):p.prevStates&&(p.prevStates=null)}})}function u(h,f){var p=h.getModel("stateAnimation"),g=h.isAnimationEnabled(),b=p.get("duration"),w=b>0?{duration:b,delay:p.get("delay"),easing:p.get("easing")}:null;f.eachRendered(function(j){if(j.states&&j.states.emphasis){if(hx(j))return;if(j instanceof Ra&&wve(j),j.__dirty){var k=j.prevStates;k&&j.useStates(k)}if(g){j.stateTransition=w;var T=j.getTextContent(),E=j.getTextGuideLine();T&&(T.stateTransition=w),E&&(E.stateTransition=w)}j.__dirty&&i(j)}})}A9=function(h){return new((function(f){Ie(p,f);function p(){return f!==null&&f.apply(this,arguments)||this}return p.prototype.getCoordinateSystems=function(){return h._coordSysMgr.getCoordinateSystems()},p.prototype.getComponentByElement=function(g){for(;g;){var b=g.__ecComponentInfo;if(b!=null)return h._model.getComponent(b.mainType,b.index);g=g.parent}},p.prototype.enterEmphasis=function(g,b){zd(g,b),Vl(h)},p.prototype.leaveEmphasis=function(g,b){Bd(g,b),Vl(h)},p.prototype.enterBlur=function(g){OW(g),Vl(h)},p.prototype.leaveBlur=function(g){XT(g),Vl(h)},p.prototype.enterSelect=function(g){PW(g),Vl(h)},p.prototype.leaveSelect=function(g){zW(g),Vl(h)},p.prototype.getModel=function(){return h.getModel()},p.prototype.getViewOfComponentModel=function(g){return h.getViewOfComponentModel(g)},p.prototype.getViewOfSeriesModel=function(g){return h.getViewOfSeriesModel(g)},p.prototype.getMainProcessVersion=function(){return h[Py]},p})(BY))(h)},O$=function(h){function f(p,g){for(var b=0;b<p.length;b++){var w=p[b];w[ik]=g}}se(w3,function(p,g){h._messageCenter.on(g,function(b){if(M9[h.group]&&h[ik]!==j9){if(b&&b.escapeConnect)return;var w=h.makeActionFromEvent(b),j=[];se(pv,function(k){k!==h&&k.group===h.group&&j.push(k)}),f(j,j9),se(j,function(k){k[ik]!==iwe&&k.dispatchAction(w)}),f(j,swe)}})})}})(),e})(co),SM=P$.prototype;SM.on=E$("on");SM.off=E$("off");SM.one=function(a,e,t){var r=this;function n(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];e&&e.apply&&e.apply(this,i),r.off(a,n)}this.on.call(this,a,n,t)};var lwe=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var Q2={},w3={},_3={},N3=[],j3=[],J2=[],z$={},S3={},pv={},M9={},owe=+new Date-0,kM="_echarts_instance_";function B$(a,e,t){{var r=cwe(a);if(r)return r}var n=new P$(a,e,t);return n.id="ec_"+owe++,pv[n.id]=n,bW(a,kM,n.id),O$(n),_o.trigger("afterinit",n),n}function cwe(a){return pv[oge(a,kM)]}function F$(a,e){z$[a]=e}function V$(a){ja(j3,a)<0&&j3.push(a)}function H$(a,e){AM(N3,a,e,Kye)}function dwe(a){CM("afterinit",a)}function uwe(a){CM("afterupdate",a)}function CM(a,e){_o.on(a,e)}function Bc(a,e,t){var r,n,i,l,o;Yt(e)&&(t=e,e=""),aa(a)?(r=a.type,n=a.event,l=a.update,o=a.publishNonRefinedEvent,t||(t=a.action),i=a.refineEvent):(r=a,n=e);function c(u){return u.toLowerCase()}n=c(n||r);var d=i?c(r):n;Q2[r]||(us(N9.test(r)&&N9.test(n)),i&&us(n!==r),Q2[r]={actionType:r,refinedEventType:n,nonRefinedEventType:d,update:l,action:t,refineEvent:i},_3[n]=1,i&&o&&(_3[d]=1),w3[d]=r)}function hwe(a,e){Lb.register(a,e)}function fwe(a,e){AM(J2,a,e,A$,"layout")}function z0(a,e){AM(J2,a,e,T$,"visual")}var E9=[];function AM(a,e,t,r,n){if((Yt(e)||aa(e))&&(t=e,e=r),!(ja(E9,t)>=0)){E9.push(t);var i=h$.wrapStageHandler(t,n);i.__prio=e,i.__raw=t,a.push(i)}}function U$(a,e){S3[a]=e}function G$(a,e,t){var r=k$("registerMap");r&&r(a,e,t)}function pwe(a){var e=k$("getMap");return e&&e(a)}var xwe=C1e;z0(jM,J1e);z0(EN,eye);z0(EN,tye);z0(jM,pye);z0(EN,xye);z0(M$,Uye);V$(VY);H$(Xye,l1e);U$("default",aye);Bc({type:o0,event:o0,update:o0},Bn);Bc({type:Hw,event:Hw,update:Hw},Bn);Bc({type:F2,event:$T,update:F2,action:Bn,refineEvent:TM,publishNonRefinedEvent:!0});Bc({type:K4,event:$T,update:K4,action:Bn,refineEvent:TM,publishNonRefinedEvent:!0});Bc({type:V2,event:$T,update:V2,action:Bn,refineEvent:TM,publishNonRefinedEvent:!0});function TM(a,e,t,r){return{eventContent:{selected:mve(t),isFromClick:e.isFromClick||!1}}}F$("default",{});F$("dark",m$);var D9=[],mwe={registerPreprocessor:V$,registerProcessor:H$,registerPostInit:dwe,registerPostUpdate:uwe,registerUpdateLifecycle:CM,registerAction:Bc,registerCoordinateSystem:hwe,registerLayout:fwe,registerVisual:z0,registerTransform:xwe,registerLoading:U$,registerMap:G$,registerImpl:Gye,PRIORITY:nwe,ComponentModel:za,ComponentView:tn,SeriesModel:Vr,ChartView:Dr,registerComponentModel:function(a){za.registerClass(a)},registerComponentView:function(a){tn.registerClass(a)},registerSeriesModel:function(a){Vr.registerClass(a)},registerChartView:function(a){Dr.registerClass(a)},registerCustomSeries:function(a,e){Wye(a,e)},registerSubTypeDefaulter:function(a,e){za.registerSubTypeDefaulter(a,e)},registerPainter:function(a,e){Ome(a,e)}};function Ta(a){if(lt(a)){se(a,function(e){Ta(e)});return}ja(D9,a)>=0||(D9.push(a),Yt(a)&&(a={install:a}),a.install(mwe))}function sg(a){return a==null?0:a.length||1}function I9(a){return a}var Fd=(function(){function a(e,t,r,n,i,l){this._old=e,this._new=t,this._oldKeyGetter=r||I9,this._newKeyGetter=n||I9,this.context=i,this._diffModeMultiple=l==="multiple"}return a.prototype.add=function(e){return this._add=e,this},a.prototype.update=function(e){return this._update=e,this},a.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},a.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},a.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},a.prototype.remove=function(e){return this._remove=e,this},a.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},a.prototype._executeOneToOne=function(){var e=this._old,t=this._new,r={},n=new Array(e.length),i=new Array(t.length);this._initIndexMap(e,null,n,"_oldKeyGetter"),this._initIndexMap(t,r,i,"_newKeyGetter");for(var l=0;l<e.length;l++){var o=n[l],c=r[o],d=sg(c);if(d>1){var u=c.shift();c.length===1&&(r[o]=c[0]),this._update&&this._update(u,l)}else d===1?(r[o]=null,this._update&&this._update(c,l)):this._remove&&this._remove(l)}this._performRestAdd(i,r)},a.prototype._executeMultiple=function(){var e=this._old,t=this._new,r={},n={},i=[],l=[];this._initIndexMap(e,r,i,"_oldKeyGetter"),this._initIndexMap(t,n,l,"_newKeyGetter");for(var o=0;o<i.length;o++){var c=i[o],d=r[c],u=n[c],h=sg(d),f=sg(u);if(h>1&&f===1)this._updateManyToOne&&this._updateManyToOne(u,d),n[c]=null;else if(h===1&&f>1)this._updateOneToMany&&this._updateOneToMany(u,d),n[c]=null;else if(h===1&&f===1)this._update&&this._update(u,d),n[c]=null;else if(h>1&&f>1)this._updateManyToMany&&this._updateManyToMany(u,d),n[c]=null;else if(h>1)for(var p=0;p<h;p++)this._remove&&this._remove(d[p]);else this._remove&&this._remove(d)}this._performRestAdd(l,n)},a.prototype._performRestAdd=function(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=t[n],l=sg(i);if(l>1)for(var o=0;o<l;o++)this._add&&this._add(i[o]);else l===1&&this._add&&this._add(i);t[n]=null}},a.prototype._initIndexMap=function(e,t,r,n){for(var i=this._diffModeMultiple,l=0;l<e.length;l++){var o="_ec_"+this[n](e[l],l);if(i||(r[l]=o),!!t){var c=t[o],d=sg(c);d===0?(t[o]=l,i&&r.push(o)):d===1?t[o]=[c,l]:c.push(l)}}},a})(),gwe=(function(){function a(e,t){this._encode=e,this._schema=t}return a.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},a.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},a})();function vwe(a,e){var t={},r=t.encode={},n=Pt(),i=[],l=[],o={};se(a.dimensions,function(f){var p=a.getDimensionInfo(f),g=p.coordDim;if(g){var b=p.coordDimIndex;dk(r,g)[b]=f,p.isExtraCoord||(n.set(g,1),bwe(p.type)&&(i[0]=f),dk(o,g)[b]=a.getDimensionIndex(p.name)),p.defaultTooltip&&l.push(f)}DY.each(function(w,j){var k=dk(r,j),T=p.otherDims[j];T!=null&&T!==!1&&(k[T]=p.name)})});var c=[],d={};n.each(function(f,p){var g=r[p];d[p]=g[0],c=c.concat(g)}),t.dataDimsOnCoord=c,t.dataDimIndicesOnCoord=ct(c,function(f){return a.getDimensionInfo(f).storeDimIndex}),t.encodeFirstDimNotExtra=d;var u=r.label;u&&u.length&&(i=u.slice());var h=r.tooltip;return h&&h.length?l=h.slice():l.length||(l=i.slice()),r.defaultedLabel=i,r.defaultedTooltip=l,t.userOutput=new gwe(o,e),t}function dk(a,e){return a.hasOwnProperty(e)||(a[e]=[]),a[e]}function e_(a){return a==="category"?"ordinal":a==="time"?"time":"float"}function bwe(a){return!(a==="ordinal"||a==="time")}var Xw=(function(){function a(e){this.otherDims={},e!=null&&et(this,e)}return a})(),ywe=Ia(),wwe={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},W$=(function(){function a(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return a.prototype.isDimensionOmitted=function(){return this._dimOmitted},a.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=q$(this.source)))},a.prototype.getSourceDimensionIndex=function(e){return Ht(this._dimNameMap.get(e),-1)},a.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},a.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=UY(this.source),r=!X$(e),n="",i=[],l=0,o=0;l<e;l++){var c=void 0,d=void 0,u=void 0,h=this.dimensions[o];if(h&&h.storeDimIndex===l)c=t?h.name:null,d=h.type,u=h.ordinalMeta,o++;else{var f=this.getSourceDimension(l);f&&(c=t?f.name:null,d=f.type)}i.push({property:c,type:d,ordinalMeta:u}),t&&c!=null&&(!h||!h.isCalculationCoord)&&(n+=r?c.replace(/\`/g,"`1").replace(/\$/g,"`2"):c),n+="$",n+=wwe[d]||"f",u&&(n+=u.uid),n+="$"}var p=this.source,g=[p.seriesLayoutBy,p.startIndex,n].join("$$");return{dimensions:i,hash:g}},a.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,r=0;t<this._fullDimCount;t++){var n=void 0,i=this.dimensions[r];if(i&&i.storeDimIndex===t)i.isCalculationCoord||(n=i.name),r++;else{var l=this.getSourceDimension(t);l&&(n=l.name)}e.push(n)}return e},a.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},a})();function Y$(a){return a instanceof W$}function $$(a){for(var e=Pt(),t=0;t<(a||[]).length;t++){var r=a[t],n=aa(r)?r.name:r;n!=null&&e.get(n)==null&&e.set(n,t)}return e}function q$(a){var e=ywe(a);return e.dimNameMap||(e.dimNameMap=$$(a.dimensionsDefine))}function X$(a){return a>30}var lg=aa,Iu=ct,_we=typeof Int32Array>"u"?Array:Int32Array,Nwe="e\0\0",R9=-1,jwe=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Swe=["_approximateExtent"],L9,Vy,og,cg,uk,dg,hk,As=(function(){function a(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var r,n=!1;Y$(e)?(r=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(n=!0,r=e),r=r||["x","y"];for(var i={},l=[],o={},c=!1,d={},u=0;u<r.length;u++){var h=r[u],f=At(h)?new Xw({name:h}):h instanceof Xw?h:new Xw(h),p=f.name;f.type=f.type||"float",f.coordDim||(f.coordDim=p,f.coordDimIndex=0);var g=f.otherDims=f.otherDims||{};l.push(p),i[p]=f,d[p]!=null&&(c=!0),f.createInvertedIndices&&(o[p]=[]);var b=u;Ka(f.storeDimIndex)&&(b=f.storeDimIndex),g.itemName===0&&(this._nameDimIdx=b),g.itemId===0&&(this._idDimIdx=b),n&&(f.storeDimIndex=u)}if(this.dimensions=l,this._dimInfos=i,this._initGetDimensionInfo(c),this.hostModel=t,this._invertedIndicesMap=o,this._dimOmitted){var w=this._dimIdxToName=Pt();se(l,function(j){w.set(i[j].storeDimIndex,j)})}}return a.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(t==null)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var r=this._dimIdxToName.get(t);if(r!=null)return r;var n=this._schema.getSourceDimension(t);if(n)return n.name},a.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(t!=null)return t;if(e==null)return-1;var r=this._getDimInfo(e);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},a.prototype._recognizeDimIndex=function(e){if(Ka(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},a.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},a.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},a.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(r){return t.hasOwnProperty(r)?t[r]:void 0}:function(r){return t[r]}},a.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},a.prototype.mapDimension=function(e,t){var r=this._dimSummary;if(t==null)return r.encodeFirstDimNotExtra[e];var n=r.encode[e];return n?n[t]:null},a.prototype.mapDimensionsAll=function(e){var t=this._dimSummary,r=t.encode[e];return(r||[]).slice()},a.prototype.getStore=function(){return this._store},a.prototype.initData=function(e,t,r){var n=this,i;if(e instanceof p3&&(i=e),!i){var l=this.dimensions,o=gM(e)||ds(e)?new GY(e,l.length):e;i=new p3;var c=Iu(l,function(d){return{type:n._dimInfos[d].type,property:d}});i.initData(o,c,r)}this._store=i,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,i.count()),this._dimSummary=vwe(this,this._schema),this.userOutput=this._dimSummary.userOutput},a.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},a.prototype.appendValues=function(e,t){var r=this._store.appendValues(e,t&&t.length),n=r.start,i=r.end,l=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var o=n;o<i;o++){var c=o-n;this._nameList[o]=t[c],l&&hk(this,o)}},a.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,r=0;r<t.length;r++){var n=this._dimInfos[t[r]];n.ordinalMeta&&e.collectOrdinalMeta(n.storeDimIndex,n.ordinalMeta)}},a.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==hh&&!e.fillStorage},a.prototype._doInit=function(e,t){if(!(e>=t)){var r=this._store,n=r.getProvider();this._updateOrdinalMeta();var i=this._nameList,l=this._idList,o=n.getSource().sourceFormat,c=o===Tl;if(c&&!n.pure)for(var d=[],u=e;u<t;u++){var h=n.getItem(u,d);if(!this.hasItemOption&&Xme(h)&&(this.hasItemOption=!0),h){var f=h.name;i[u]==null&&f!=null&&(i[u]=ui(f,null));var p=h.id;l[u]==null&&p!=null&&(l[u]=ui(p,null))}}if(this._shouldMakeIdFromName())for(var u=e;u<t;u++)hk(this,u);L9(this)}},a.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},a.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},a.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},a.prototype.setCalculationInfo=function(e,t){lg(e)?et(this._calculationInfo,e):this._calculationInfo[e]=t},a.prototype.getName=function(e){var t=this.getRawIndex(e),r=this._nameList[t];return r==null&&this._nameDimIdx!=null&&(r=og(this,this._nameDimIdx,t)),r==null&&(r=""),r},a.prototype._getCategory=function(e,t){var r=this._store.get(e,t),n=this._store.getOrdinalMeta(e);return n?n.categories[r]:r},a.prototype.getId=function(e){return Vy(this,this.getRawIndex(e))},a.prototype.count=function(){return this._store.count()},a.prototype.get=function(e,t){var r=this._store,n=this._dimInfos[e];if(n)return r.get(n.storeDimIndex,t)},a.prototype.getByRawIndex=function(e,t){var r=this._store,n=this._dimInfos[e];if(n)return r.getByRawIndex(n.storeDimIndex,t)},a.prototype.getIndices=function(){return this._store.getIndices()},a.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},a.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},a.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},a.prototype.getValues=function(e,t){var r=this,n=this._store;return lt(e)?n.getValues(Iu(e,function(i){return r._getStoreDimIndex(i)}),t):n.getValues(e)},a.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,r=0,n=t.length;r<n;r++)if(isNaN(this._store.get(t[r],e)))return!1;return!0},a.prototype.indexOfName=function(e){for(var t=0,r=this._store.count();t<r;t++)if(this.getName(t)===e)return t;return-1},a.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},a.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},a.prototype.rawIndexOf=function(e,t){var r=e&&this._invertedIndicesMap[e],n=r&&r[t];return n==null||isNaN(n)?R9:n},a.prototype.each=function(e,t,r){Yt(e)&&(r=t,t=e,e=[]);var n=r||this,i=Iu(cg(e),this._getStoreDimIndex,this);this._store.each(i,n?Tt(t,n):t)},a.prototype.filterSelf=function(e,t,r){Yt(e)&&(r=t,t=e,e=[]);var n=r||this,i=Iu(cg(e),this._getStoreDimIndex,this);return this._store=this._store.filter(i,n?Tt(t,n):t),this},a.prototype.selectRange=function(e){var t=this,r={},n=Ua(e);return se(n,function(i){var l=t._getStoreDimIndex(i);r[l]=e[i]}),this._store=this._store.selectRange(r),this},a.prototype.mapArray=function(e,t,r){Yt(e)&&(r=t,t=e,e=[]),r=r||this;var n=[];return this.each(e,function(){n.push(t&&t.apply(this,arguments))},r),n},a.prototype.map=function(e,t,r,n){var i=r||n||this,l=Iu(cg(e),this._getStoreDimIndex,this),o=dg(this);return o._store=this._store.map(l,i?Tt(t,i):t),o},a.prototype.modify=function(e,t,r,n){var i=r||n||this,l=Iu(cg(e),this._getStoreDimIndex,this);this._store.modify(l,i?Tt(t,i):t)},a.prototype.downSample=function(e,t,r,n){var i=dg(this);return i._store=this._store.downSample(this._getStoreDimIndex(e),t,r,n),i},a.prototype.minmaxDownSample=function(e,t){var r=dg(this);return r._store=this._store.minmaxDownSample(this._getStoreDimIndex(e),t),r},a.prototype.lttbDownSample=function(e,t){var r=dg(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),r},a.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},a.prototype.getItemModel=function(e){var t=this.hostModel,r=this.getRawDataItem(e);return new Fa(r,t,t&&t.ecModel)},a.prototype.diff=function(e){var t=this;return new Fd(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(r){return Vy(e,r)},function(r){return Vy(t,r)})},a.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},a.prototype.setVisual=function(e,t){this._visual=this._visual||{},lg(e)?et(this._visual,e):this._visual[e]=t},a.prototype.getItemVisual=function(e,t){var r=this._itemVisuals[e],n=r&&r[t];return n??this.getVisual(t)},a.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},a.prototype.ensureUniqueItemVisual=function(e,t){var r=this._itemVisuals,n=r[e];n||(n=r[e]={});var i=n[t];return i==null&&(i=this.getVisual(t),lt(i)?i=i.slice():lg(i)&&(i=et({},i)),n[t]=i),i},a.prototype.setItemVisual=function(e,t,r){var n=this._itemVisuals[e]||{};this._itemVisuals[e]=n,lg(t)?et(n,t):n[t]=r},a.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},a.prototype.setLayout=function(e,t){lg(e)?et(this._layout,e):this._layout[e]=t},a.prototype.getLayout=function(e){return this._layout[e]},a.prototype.getItemLayout=function(e){return this._itemLayouts[e]},a.prototype.setItemLayout=function(e,t,r){this._itemLayouts[e]=r?et(this._itemLayouts[e]||{},t):t},a.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},a.prototype.setItemGraphicEl=function(e,t){var r=this.hostModel&&this.hostModel.seriesIndex;Z4(r,this.dataType,e,t),this._graphicEls[e]=t},a.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},a.prototype.eachItemGraphicEl=function(e,t){se(this._graphicEls,function(r,n){r&&e&&e.call(t,r,n)})},a.prototype.cloneShallow=function(e){return e||(e=new a(this._schema?this._schema:Iu(this.dimensions,this._getDimInfo,this),this.hostModel)),uk(e,this),e._store=this._store,e},a.prototype.wrapMethod=function(e,t){var r=this[e];Yt(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var n=r.apply(this,arguments);return t.apply(this,[n].concat(DT(arguments)))})},a.internalField=(function(){L9=function(e){var t=e._invertedIndicesMap;se(t,function(r,n){var i=e._dimInfos[n],l=i.ordinalMeta,o=e._store;if(l){r=t[n]=new _we(l.categories.length);for(var c=0;c<r.length;c++)r[c]=R9;for(var c=0;c<o.count();c++)r[o.get(i.storeDimIndex,c)]=c}})},og=function(e,t,r){return ui(e._getCategory(t,r),null)},Vy=function(e,t){var r=e._idList[t];return r==null&&e._idDimIdx!=null&&(r=og(e,e._idDimIdx,t)),r==null&&(r=Nwe+t),r},cg=function(e){return lt(e)||(e=e!=null?[e]:[]),e},dg=function(e){var t=new a(e._schema?e._schema:Iu(e.dimensions,e._getDimInfo,e),e.hostModel);return uk(t,e),t},uk=function(e,t){se(jwe.concat(t.__wrappedMethods||[]),function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e.__wrappedMethods=t.__wrappedMethods,se(Swe,function(r){e[r]=Xt(t[r])}),e._calculationInfo=et({},t._calculationInfo)},hk=function(e,t){var r=e._nameList,n=e._idList,i=e._nameDimIdx,l=e._idDimIdx,o=r[t],c=n[t];if(o==null&&i!=null&&(r[t]=o=og(e,i,t)),c==null&&l!=null&&(n[t]=c=og(e,l,t)),c==null&&o!=null){var d=e._nameRepeatCount,u=d[o]=(d[o]||0)+1;c=o,u>1&&(c+="__ec__"+u),n[t]=c}}})(),a})();function zb(a,e){gM(a)||(a=vM(a)),e=e||{};var t=e.coordDimensions||[],r=e.dimensionsDefine||a.dimensionsDefine||[],n=Pt(),i=[],l=Cwe(a,t,r,e.dimensionsCount),o=e.canOmitUnusedDimensions&&X$(l),c=r===a.dimensionsDefine,d=c?q$(a):$$(r),u=e.encodeDefine;!u&&e.encodeDefaulter&&(u=e.encodeDefaulter(a,l));for(var h=Pt(u),f=new QY(l),p=0;p<f.length;p++)f[p]=-1;function g(G){var X=f[G];if(X<0){var U=r[G],te=aa(U)?U:{name:U},Z=new Xw,J=te.name;J!=null&&d.get(J)!=null&&(Z.name=Z.displayName=J),te.type!=null&&(Z.type=te.type),te.displayName!=null&&(Z.displayName=te.displayName);var B=i.length;return f[G]=B,Z.storeDimIndex=G,i.push(Z),Z}return i[X]}if(!o)for(var p=0;p<l;p++)g(p);h.each(function(G,X){var U=Or(G).slice();if(U.length===1&&!At(U[0])&&U[0]<0){h.set(X,!1);return}var te=h.set(X,[]);se(U,function(Z,J){var B=At(Z)?d.get(Z):Z;B!=null&&B<l&&(te[J]=B,w(g(B),X,J))})});var b=0;se(t,function(G){var X,U,te,Z;if(At(G))X=G,Z={};else{Z=G,X=Z.name;var J=Z.ordinalMeta;Z.ordinalMeta=null,Z=et({},Z),Z.ordinalMeta=J,U=Z.dimsDef,te=Z.otherDims,Z.name=Z.coordDim=Z.coordDimIndex=Z.dimsDef=Z.otherDims=null}var B=h.get(X);if(B!==!1){if(B=Or(B),!B.length)for(var W=0;W<(U&&U.length||1);W++){for(;b<l&&g(b).coordDim!=null;)b++;b<l&&B.push(b++)}se(B,function($,Q){var ne=g($);if(c&&Z.type!=null&&(ne.type=Z.type),w(ta(ne,Z),X,Q),ne.name==null&&U){var re=U[Q];!aa(re)&&(re={name:re}),ne.name=ne.displayName=re.name,ne.defaultTooltip=re.defaultTooltip}te&&ta(ne.otherDims,te)})}});function w(G,X,U){DY.get(X)!=null?G.otherDims[X]=U:(G.coordDim=X,G.coordDimIndex=U,n.set(X,!0))}var j=e.generateCoord,k=e.generateCoordCount,T=k!=null;k=j?k||1:0;var E=j||"value";function I(G){G.name==null&&(G.name=G.coordDim)}if(o)se(i,function(G){I(G)}),i.sort(function(G,X){return G.storeDimIndex-X.storeDimIndex});else for(var R=0;R<l;R++){var P=g(R),H=P.coordDim;H==null&&(P.coordDim=Awe(E,n,T),P.coordDimIndex=0,(!j||k<=0)&&(P.isExtraCoord=!0),k--),I(P),P.type==null&&(OY(a,R)===Gi.Must||P.isExtraCoord&&(P.otherDims.itemName!=null||P.otherDims.seriesName!=null))&&(P.type="ordinal")}return kwe(i),new W$({source:a,dimensions:i,fullDimensionCount:l,dimensionOmitted:o})}function kwe(a){for(var e=Pt(),t=0;t<a.length;t++){var r=a[t],n=r.name,i=e.get(n)||0;i>0&&(r.name=n+(i-1)),i++,e.set(n,i)}}function Cwe(a,e,t,r){var n=Math.max(a.dimensionsDetectedCount||1,e.length,t.length,r||0);return se(e,function(i){var l;aa(i)&&(l=i.dimsDef)&&(n=Math.max(n,l.length))}),n}function Awe(a,e,t){if(t||e.hasKey(a)){for(var r=0;e.hasKey(a+r);)r++;a+=r}return e.set(a,!0),a}var Twe=(function(){function a(e){this.coordSysDims=[],this.axisMap=Pt(),this.categoryAxisMap=Pt(),this.coordSysName=e}return a})();function Mwe(a){var e=a.get("coordinateSystem"),t=new Twe(e),r=Ewe[e];if(r)return r(a,t,t.axisMap,t.categoryAxisMap),t}var Ewe={cartesian2d:function(a,e,t,r){var n=a.getReferringComponents("xAxis",wn).models[0],i=a.getReferringComponents("yAxis",wn).models[0];e.coordSysDims=["x","y"],t.set("x",n),t.set("y",i),Dp(n)&&(r.set("x",n),e.firstCategoryDimIndex=0),Dp(i)&&(r.set("y",i),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(a,e,t,r){var n=a.getReferringComponents("singleAxis",wn).models[0];e.coordSysDims=["single"],t.set("single",n),Dp(n)&&(r.set("single",n),e.firstCategoryDimIndex=0)},polar:function(a,e,t,r){var n=a.getReferringComponents("polar",wn).models[0],i=n.findAxisModel("radiusAxis"),l=n.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],t.set("radius",i),t.set("angle",l),Dp(i)&&(r.set("radius",i),e.firstCategoryDimIndex=0),Dp(l)&&(r.set("angle",l),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(a,e,t,r){e.coordSysDims=["lng","lat"]},parallel:function(a,e,t,r){var n=a.ecModel,i=n.getComponent("parallel",a.get("parallelIndex")),l=e.coordSysDims=i.dimensions.slice();se(i.parallelAxisIndex,function(o,c){var d=n.getComponent("parallelAxis",o),u=l[c];t.set(u,d),Dp(d)&&(r.set(u,d),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=c))})},matrix:function(a,e,t,r){var n=a.getReferringComponents("matrix",wn).models[0];e.coordSysDims=["x","y"];var i=n.getDimensionModel("x"),l=n.getDimensionModel("y");t.set("x",i),t.set("y",l),r.set("x",i),r.set("y",l)}};function Dp(a){return a.get("type")==="category"}function Dwe(a,e,t){t=t||{};var r=t.byIndex,n=t.stackedCoordDimension,i,l,o;Iwe(e)?i=e:(l=e.schema,i=l.dimensions,o=e.store);var c=!!(a&&a.get("stack")),d,u,h,f;if(se(i,function(k,T){At(k)&&(i[T]=k={name:k}),c&&!k.isExtraCoord&&(!r&&!d&&k.ordinalMeta&&(d=k),!u&&k.type!=="ordinal"&&k.type!=="time"&&(!n||n===k.coordDim)&&(u=k))}),u&&!r&&!d&&(r=!0),u){h="__\0ecstackresult_"+a.id,f="__\0ecstackedover_"+a.id,d&&(d.createInvertedIndices=!0);var p=u.coordDim,g=u.type,b=0;se(i,function(k){k.coordDim===p&&b++});var w={name:h,coordDim:p,coordDimIndex:b,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length},j={name:f,coordDim:f,coordDimIndex:b+1,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length+1};l?(o&&(w.storeDimIndex=o.ensureCalculationDimension(f,g),j.storeDimIndex=o.ensureCalculationDimension(h,g)),l.appendCalculationDimension(w),l.appendCalculationDimension(j)):(i.push(w),i.push(j))}return{stackedDimension:u&&u.name,stackedByDimension:d&&d.name,isStackedByIndex:r,stackedOverDimension:f,stackResultDimension:h}}function Iwe(a){return!Y$(a.schema)}function _h(a,e){return!!e&&e===a.getCalculationInfo("stackedDimension")}function Z$(a,e){return _h(a,e)?a.getCalculationInfo("stackResultDimension"):e}function Rwe(a,e){var t=a.get("coordinateSystem"),r=Lb.get(t),n;return e&&e.coordSysDims&&(n=ct(e.coordSysDims,function(i){var l={name:i},o=e.axisMap.get(i);if(o){var c=o.get("type");l.type=e_(c)}return l})),n||(n=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),n}function Lwe(a,e,t){var r,n;return t&&se(a,function(i,l){var o=i.coordDim,c=t.categoryAxisMap.get(o);c&&(r==null&&(r=l),i.ordinalMeta=c.getOrdinalMeta(),e&&(i.createInvertedIndices=!0)),i.otherDims.itemName!=null&&(n=!0)}),!n&&r!=null&&(a[r].otherDims.itemName=0),r}function $d(a,e,t){t=t||{};var r=e.getSourceManager(),n,i=!1;a?(i=!0,n=vM(a)):(n=r.getSource(),i=n.sourceFormat===Tl);var l=Mwe(e),o=Rwe(e,l),c=t.useEncodeDefaulter,d=Yt(c)?c:c?ya(LY,o,e):null,u={coordDimensions:o,generateCoord:t.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:d,canOmitUnusedDimensions:!i},h=zb(n,u),f=Lwe(h.dimensions,t.createInvertedIndices,l),p=i?null:r.getSharedDataStore(h),g=Dwe(e,{schema:h,store:p}),b=new As(h,e);b.setCalculationInfo(g);var w=f!=null&&Owe(n)?function(j,k,T,E){return E===f?T:this.defaultDimValueGetter(j,k,T,E)}:null;return b.hasItemOption=!1,b.initData(i?n:p,null,w),b}function Owe(a){if(a.sourceFormat===Tl){var e=Pwe(a.data||[]);return!lt(Wx(e))}}function Pwe(a){for(var e=0;e<a.length&&a[e]==null;)e++;return a[e]}function k3(a){return a.type==="interval"||a.type==="log"}function zwe(a,e,t,r,n){var i={},l=i.interval=dW(e/t);r!=null&&l<r&&(l=i.interval=r),n!=null&&l>n&&(l=i.interval=n);var o=i.intervalPrecision=Jv(l),c=i.niceTickExtent=[$n(Math.ceil(a[0]/l)*l,o),$n(Math.floor(a[1]/l)*l,o)];return Bwe(c,a),i}function fk(a){var e=Math.pow(10,BT(a)),t=a/e;return t?t===2?t=3:t===3?t=5:t*=2:t=1,$n(t*e)}function Jv(a){return mc(a)+2}function O9(a,e,t){a[e]=Math.max(Math.min(a[e],t[1]),t[0])}function Bwe(a,e){!isFinite(a[0])&&(a[0]=e[0]),!isFinite(a[1])&&(a[1]=e[1]),O9(a,0,e),O9(a,1,e),a[0]>a[1]&&(a[0]=a[1])}function MM(a,e){return a>=e[0]&&a<=e[1]}var Fwe=(function(){function a(){this.normalize=P9,this.scale=z9}return a.prototype.updateMethods=function(e){e.hasBreaks()?(this.normalize=Tt(e.normalize,e),this.scale=Tt(e.scale,e)):(this.normalize=P9,this.scale=z9)},a})();function P9(a,e){return e[1]===e[0]?.5:(a-e[0])/(e[1]-e[0])}function z9(a,e){return a*(e[1]-e[0])+e[0]}function C3(a,e,t){var r=Math.log(a);return[Math.log(t?e[0]:Math.max(0,e[0]))/r,Math.log(t?e[1]:Math.max(0,e[1]))/r]}var Ih=(function(){function a(e){this._calculator=new Fwe,this._setting=e||{},this._extent=[1/0,-1/0];var t=Xn();t&&(this._brkCtx=t.createScaleBreakContext(),this._brkCtx.update(this._extent))}return a.prototype.getSetting=function(e){return this._setting[e]},a.prototype._innerUnionExtent=function(e){var t=this._extent;this._innerSetExtent(e[0]<t[0]?e[0]:t[0],e[1]>t[1]?e[1]:t[1])},a.prototype.unionExtentFromData=function(e,t){this._innerUnionExtent(e.getApproximateExtent(t))},a.prototype.getExtent=function(){return this._extent.slice()},a.prototype.setExtent=function(e,t){this._innerSetExtent(e,t)},a.prototype._innerSetExtent=function(e,t){var r=this._extent;isNaN(e)||(r[0]=e),isNaN(t)||(r[1]=t),this._brkCtx&&this._brkCtx.update(r)},a.prototype.setBreaksFromOption=function(e){var t=Xn();t&&this._innerSetBreak(t.parseAxisBreakOption(e,Tt(this.parse,this)))},a.prototype._innerSetBreak=function(e){this._brkCtx&&(this._brkCtx.setBreaks(e),this._calculator.updateMethods(this._brkCtx),this._brkCtx.update(this._extent))},a.prototype._innerGetBreaks=function(){return this._brkCtx?this._brkCtx.breaks:[]},a.prototype.hasBreaks=function(){return this._brkCtx?this._brkCtx.hasBreaks():!1},a.prototype._getExtentSpanWithBreaks=function(){return this._brkCtx&&this._brkCtx.hasBreaks()?this._brkCtx.getExtentSpan():this._extent[1]-this._extent[0]},a.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},a.prototype.isBlank=function(){return this._isBlank},a.prototype.setBlank=function(e){this._isBlank=e},a})();hN(Ih);var Vwe=0,eb=(function(){function a(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++Vwe,this._onCollect=e.onCollect}return a.createByAxisModel=function(e){var t=e.option,r=t.data,n=r&&ct(r,Hwe);return new a({categories:n,needCollect:!n,deduplication:t.dedplication!==!1})},a.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},a.prototype.parseAndCollect=function(e){var t,r=this._needCollect;if(!At(e)&&!r)return e;if(r&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,this._onCollect&&this._onCollect(e,t),t;var n=this._getOrCreateMap();return t=n.get(e),t==null&&(r?(t=this.categories.length,this.categories[t]=e,n.set(e,t),this._onCollect&&this._onCollect(e,t)):t=NaN),t},a.prototype._getOrCreateMap=function(){return this._map||(this._map=Pt(this.categories))},a})();function Hwe(a){return aa(a)&&a.value!=null?a.value:a+""}var Dx=(function(a){Ie(e,a);function e(t){var r=a.call(this,t)||this;r.type="ordinal";var n=r.getSetting("ordinalMeta");return n||(n=new eb({})),lt(n)&&(n=new eb({categories:ct(n,function(i){return aa(i)?i.value:i})})),r._ordinalMeta=n,r._extent=r.getSetting("extent")||[0,n.categories.length-1],r}return e.prototype.parse=function(t){return t==null?NaN:At(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return MM(t,this._extent)&&t>=0&&t<this._ordinalMeta.categories.length},e.prototype.normalize=function(t){return t=this._getTickNumber(t),this._calculator.normalize(t,this._extent)},e.prototype.scale=function(t){return t=Math.round(this._calculator.scale(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],r=this._extent,n=r[0];n<=r[1];)t.push({value:n}),n++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(t==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=t.ordinalNumbers,n=this._ordinalNumbersByTick=[],i=this._ticksByOrdinalNumber=[],l=0,o=this._ordinalMeta.categories.length,c=Math.min(o,r.length);l<c;++l){var d=r[l];n[l]=d,i[d]=l}for(var u=0;l<o;++l){for(;i[u]!=null;)u++;n.push(u),i[u]=l}},e.prototype._getTickNumber=function(t){var r=this._ticksByOrdinalNumber;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getRawOrdinalNumber=function(t){var r=this._ordinalNumbersByTick;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var r=this.getRawOrdinalNumber(t.value),n=this._ordinalMeta.categories[r];return n==null?"":n+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e})(Ih);Ih.registerClass(Dx);var Ru=$n,Vd=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return e.prototype.parse=function(t){return t==null||t===""?NaN:Number(t)},e.prototype.contain=function(t){return MM(t,this._extent)},e.prototype.normalize=function(t){return this._calculator.normalize(t,this._extent)},e.prototype.scale=function(t){return this._calculator.scale(t,this._extent)},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=Jv(t)},e.prototype.getTicks=function(t){t=t||{};var r=this._interval,n=this._extent,i=this._niceExtent,l=this._intervalPrecision,o=Xn(),c=[];if(!r)return c;if(t.breakTicks==="only_break"&&o)return o.addBreaksToTicks(c,this._brkCtx.breaks,this._extent),c;var d=1e4;n[0]<i[0]&&(t.expandToNicedExtent?c.push({value:Ru(i[0]-r,l)}):c.push({value:n[0]}));for(var u=function(g,b){return Math.round((b-g)/r)},h=i[0];h<=i[1];){if(c.push({value:h}),h=Ru(h+r,l),this._brkCtx){var f=this._brkCtx.calcNiceTickMultiple(h,u);f>=0&&(h=Ru(h+f*r,l))}if(c.length>0&&h===c[c.length-1].value)break;if(c.length>d)return[]}var p=c.length?c[c.length-1].value:i[1];return n[1]>p&&(t.expandToNicedExtent?c.push({value:Ru(p+r,l)}):c.push({value:n[1]})),o&&o.pruneTicksByBreak(t.pruneByBreak,c,this._brkCtx.breaks,function(g){return g.value},this._interval,this._extent),t.breakTicks!=="none"&&o&&o.addBreaksToTicks(c,this._brkCtx.breaks,this._extent),c},e.prototype.getMinorTicks=function(t){for(var r=this.getTicks({expandToNicedExtent:!0}),n=[],i=this.getExtent(),l=1;l<r.length;l++){var o=r[l],c=r[l-1];if(!(c.break||o.break)){for(var d=0,u=[],h=o.value-c.value,f=h/t,p=Jv(f);d<t-1;){var g=Ru(c.value+(d+1)*f,p);g>i[0]&&g<i[1]&&u.push(g),d++}var b=Xn();b&&b.pruneTicksByBreak("auto",u,this._getNonTransBreaks(),function(w){return w},this._interval,i),n.push(u)}}return n},e.prototype._getNonTransBreaks=function(){return this._brkCtx?this._brkCtx.breaks:[]},e.prototype.getLabel=function(t,r){if(t==null)return"";var n=r&&r.precision;n==null?n=mc(t.value)||0:n==="auto"&&(n=this._intervalPrecision);var i=Ru(t.value,n,!0);return bY(i)},e.prototype.calcNiceTicks=function(t,r,n){t=t||5;var i=this._extent.slice(),l=this._getExtentSpanWithBreaks();if(isFinite(l)){l<0&&(l=-l,i.reverse(),this._innerSetExtent(i[0],i[1]),i=this._extent.slice());var o=zwe(i,l,t,r,n);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var r=this._extent.slice();if(r[0]===r[1])if(r[0]!==0){var n=Math.abs(r[0]);t.fixMax||(r[1]+=n/2),r[0]-=n/2}else r[1]=1;var i=r[1]-r[0];isFinite(i)||(r[0]=0,r[1]=1),this._innerSetExtent(r[0],r[1]),r=this._extent.slice(),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var l=this._interval,o=this._intervalPrecision;t.fixMin||(r[0]=Ru(Math.floor(r[0]/l)*l,o)),t.fixMax||(r[1]=Ru(Math.ceil(r[1]/l)*l,o)),this._innerSetExtent(r[0],r[1])},e.prototype.setNiceExtent=function(t,r){this._niceExtent=[t,r]},e.type="interval",e})(Ih);Ih.registerClass(Vd);var K$=typeof Float32Array<"u",Uwe=K$?Float32Array:Array;function vc(a){return lt(a)?K$?new Float32Array(a):a:new Uwe(a)}var A3="__ec_stack_";function Q$(a){return a.get("stack")||A3+a.seriesIndex}function EM(a){return a.dim+a.index}function Gwe(a){var e=[],t=a.axis,r="axis0";if(t.type==="category"){for(var n=t.getBandWidth(),i=0;i<a.count;i++)e.push(ta({bandWidth:n,axisKey:r,stackId:A3+i},a));for(var l=tq(e),o=[],i=0;i<a.count;i++){var c=l[r][A3+i];c.offsetCenter=c.offset+c.width/2,o.push(c)}return o}}function J$(a,e){var t=[];return e.eachSeriesByType(a,function(r){nq(r)&&t.push(r)}),t}function Wwe(a){var e={};se(a,function(c){var d=c.coordinateSystem,u=d.getBaseAxis();if(!(u.type!=="time"&&u.type!=="value"))for(var h=c.getData(),f=u.dim+"_"+u.index,p=h.getDimensionIndex(h.mapDimension(u.dim)),g=h.getStore(),b=0,w=g.count();b<w;++b){var j=g.get(p,b);e[f]?e[f].push(j):e[f]=[j]}});var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(n){n.sort(function(c,d){return c-d});for(var i=null,l=1;l<n.length;++l){var o=n[l]-n[l-1];o>0&&(i=i===null?o:Math.min(i,o))}t[r]=i}}return t}function eq(a){var e=Wwe(a),t=[];return se(a,function(r){var n=r.coordinateSystem,i=n.getBaseAxis(),l=i.getExtent(),o;if(i.type==="category")o=i.getBandWidth();else if(i.type==="value"||i.type==="time"){var c=i.dim+"_"+i.index,d=e[c],u=Math.abs(l[1]-l[0]),h=i.scale.getExtent(),f=Math.abs(h[1]-h[0]);o=d?u/f*d:u}else{var p=r.getData();o=Math.abs(l[1]-l[0])/p.count()}var g=kt(r.get("barWidth"),o),b=kt(r.get("barMaxWidth"),o),w=kt(r.get("barMinWidth")||(iq(r)?.5:1),o),j=r.get("barGap"),k=r.get("barCategoryGap"),T=r.get("defaultBarGap");t.push({bandWidth:o,barWidth:g,barMaxWidth:b,barMinWidth:w,barGap:j,barCategoryGap:k,defaultBarGap:T,axisKey:EM(i),stackId:Q$(r)})}),tq(t)}function tq(a){var e={};se(a,function(r,n){var i=r.axisKey,l=r.bandWidth,o=e[i]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:null,gap:r.defaultBarGap||0,stacks:{}},c=o.stacks;e[i]=o;var d=r.stackId;c[d]||o.autoWidthCount++,c[d]=c[d]||{width:0,maxWidth:0};var u=r.barWidth;u&&!c[d].width&&(c[d].width=u,u=Math.min(o.remainedWidth,u),o.remainedWidth-=u);var h=r.barMaxWidth;h&&(c[d].maxWidth=h);var f=r.barMinWidth;f&&(c[d].minWidth=f);var p=r.barGap;p!=null&&(o.gap=p);var g=r.barCategoryGap;g!=null&&(o.categoryGap=g)});var t={};return se(e,function(r,n){t[n]={};var i=r.stacks,l=r.bandWidth,o=r.categoryGap;if(o==null){var c=Ua(i).length;o=Math.max(35-c*4,15)+"%"}var d=kt(o,l),u=kt(r.gap,1),h=r.remainedWidth,f=r.autoWidthCount,p=(h-d)/(f+(f-1)*u);p=Math.max(p,0),se(i,function(j){var k=j.maxWidth,T=j.minWidth;if(j.width){var E=j.width;k&&(E=Math.min(E,k)),T&&(E=Math.max(E,T)),j.width=E,h-=E+u*E,f--}else{var E=p;k&&k<E&&(E=Math.min(k,h)),T&&T>E&&(E=T),E!==p&&(j.width=E,h-=E+u*E,f--)}}),p=(h-d)/(f+(f-1)*u),p=Math.max(p,0);var g=0,b;se(i,function(j,k){j.width||(j.width=p),b=j,g+=j.width*(1+u)}),b&&(g-=b.width*u);var w=-g/2;se(i,function(j,k){t[n][k]=t[n][k]||{bandWidth:l,offset:w,width:j.width},w+=j.width*(1+u)})}),t}function Ywe(a,e,t){if(a&&e){var r=a[EM(e)];return r}}function aq(a,e){var t=J$(a,e),r=eq(t);se(t,function(n){var i=n.getData(),l=n.coordinateSystem,o=l.getBaseAxis(),c=Q$(n),d=r[EM(o)][c],u=d.offset,h=d.width;i.setLayout({bandWidth:d.bandWidth,offset:u,size:h})})}function rq(a){return{seriesType:a,plan:Qx(),reset:function(e){if(nq(e)){var t=e.getData(),r=e.coordinateSystem,n=r.getBaseAxis(),i=r.getOtherAxis(n),l=t.getDimensionIndex(t.mapDimension(i.dim)),o=t.getDimensionIndex(t.mapDimension(n.dim)),c=e.get("showBackground",!0),d=t.mapDimension(i.dim),u=t.getCalculationInfo("stackResultDimension"),h=_h(t,d)&&!!t.getCalculationInfo("stackedOnSeries"),f=i.isHorizontal(),p=$we(n,i),g=iq(e),b=e.get("barMinHeight")||0,w=u&&t.getDimensionIndex(u),j=t.getLayout("size"),k=t.getLayout("offset");return{progress:function(T,E){for(var I=T.count,R=g&&vc(I*3),P=g&&c&&vc(I*3),H=g&&vc(I),G=r.master.getRect(),X=f?G.width:G.height,U,te=E.getStore(),Z=0;(U=T.next())!=null;){var J=te.get(h?w:l,U),B=te.get(o,U),W=p,$=void 0;h&&($=+J-te.get(l,U));var Q=void 0,ne=void 0,re=void 0,K=void 0;if(f){var ae=r.dataToPoint([J,B]);if(h){var ce=r.dataToPoint([$,B]);W=ce[0]}Q=W,ne=ae[1]+k,re=ae[0]-W,K=j,Math.abs(re)<b&&(re=(re<0?-1:1)*b)}else{var ae=r.dataToPoint([B,J]);if(h){var ce=r.dataToPoint([B,$]);W=ce[1]}Q=ae[0]+k,ne=W,re=j,K=ae[1]-W,Math.abs(K)<b&&(K=(K<=0?-1:1)*b)}g?(R[Z]=Q,R[Z+1]=ne,R[Z+2]=f?re:K,P&&(P[Z]=f?G.x:Q,P[Z+1]=f?ne:G.y,P[Z+2]=X),H[U]=U):E.setItemLayout(U,{x:Q,y:ne,width:re,height:K}),Z+=3}g&&E.setLayout({largePoints:R,largeDataIndices:H,largeBackgroundPoints:P,valueAxisHorizontal:f})}}}}}}function nq(a){return a.coordinateSystem&&a.coordinateSystem.type==="cartesian2d"}function iq(a){return a.pipelineContext&&a.pipelineContext.large}function $we(a,e){var t=e.model.get("startValue");return t||(t=0),e.toGlobalCoord(e.dataToCoord(e.type==="log"?t>0?t:1:t))}var qwe=function(a,e,t,r){for(;t<r;){var n=t+r>>>1;a[n][1]<e?t=n+1:r=n}return t},DM=(function(a){Ie(e,a);function e(t){var r=a.call(this,t)||this;return r.type="time",r}return e.prototype.getLabel=function(t){var r=this.getSetting("useUTC");return kN(t.value,AP[Nbe(hv(this._minLevelUnit))]||AP.second,r,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,r,n){var i=this.getSetting("useUTC"),l=this.getSetting("locale");return jbe(t,r,n,l,i)},e.prototype.getTicks=function(t){t=t||{};var r=this._interval,n=this._extent,i=Xn(),l=[];if(!r)return l;var o=this.getSetting("useUTC");if(i&&t.breakTicks==="only_break")return Xn().addBreaksToTicks(l,this._brkCtx.breaks,this._extent),l;var c=ax(n[1],o);l.push({value:n[0],time:{level:0,upperTimeUnit:c,lowerTimeUnit:c}});var d=t2e(this._minLevelUnit,this._approxInterval,o,n,this._getExtentSpanWithBreaks(),this._brkCtx);l=l.concat(d);var u=ax(n[1],o);l.push({value:n[1],time:{level:0,upperTimeUnit:u,lowerTimeUnit:u}});var h=this.getSetting("useUTC"),f=vl.length-1,p=0;return se(l,function(g){f=Math.min(f,ja(vl,g.time.upperTimeUnit)),p=Math.max(p,g.time.level)}),i&&Xn().pruneTicksByBreak(t.pruneByBreak,l,this._brkCtx.breaks,function(g){return g.value},this._approxInterval,this._extent),i&&t.breakTicks!=="none"&&Xn().addBreaksToTicks(l,this._brkCtx.breaks,this._extent,function(g){for(var b=Math.max(ja(vl,ax(g.vmin,h)),ja(vl,ax(g.vmax,h))),w=0,j=0;j<vl.length;j++)if(!sq(vl[j],g.vmin,g.vmax,h)){w=j;break}var k=Math.min(w,f),T=Math.max(k,b);return{level:p,lowerTimeUnit:vl[T],upperTimeUnit:vl[k]}}),l},e.prototype.calcNiceExtent=function(t){var r=this.getExtent();if(r[0]===r[1]&&(r[0]-=Jl,r[1]+=Jl),r[1]===-1/0&&r[0]===1/0){var n=new Date;r[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),r[0]=r[1]-Jl}this._innerSetExtent(r[0],r[1]),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,r,n){t=t||10;var i=this._getExtentSpanWithBreaks();this._approxInterval=i/t,r!=null&&this._approxInterval<r&&(this._approxInterval=r),n!=null&&this._approxInterval>n&&(this._approxInterval=n);var l=Hy.length,o=Math.min(qwe(Hy,this._approxInterval,0,l),l-1);this._interval=Hy[o][1],this._intervalPrecision=Jv(this._interval),this._minLevelUnit=Hy[Math.max(o-1,0)][0]},e.prototype.parse=function(t){return Ka(t)?t:+I0(t)},e.prototype.contain=function(t){return MM(t,this._extent)},e.prototype.normalize=function(t){return this._calculator.normalize(t,this._extent)},e.prototype.scale=function(t){return this._calculator.scale(t,this._extent)},e.type="time",e})(Vd),Hy=[["second",nM],["minute",iM],["hour",uv],["quarter-day",uv*6],["half-day",uv*12],["day",Jl*1.2],["half-week",Jl*3.5],["week",Jl*7],["month",Jl*31],["quarter",Jl*95],["half-year",CP/2],["year",CP]];function sq(a,e,t,r){return o3(new Date(e),a,r).getTime()===o3(new Date(t),a,r).getTime()}function Xwe(a,e){return a/=Jl,a>16?16:a>7.5?7:a>3.5?4:a>1.5?2:1}function Zwe(a){var e=30*Jl;return a/=e,a>6?6:a>3?3:a>2?2:1}function Kwe(a){return a/=uv,a>12?12:a>6?6:a>3.5?4:a>2?2:1}function B9(a,e){return a/=e?iM:nM,a>30?30:a>20?20:a>15?15:a>10?10:a>5?5:a>2?2:1}function Qwe(a){return dW(a)}function Jwe(a,e,t){var r=Math.max(0,ja(vl,e)-1);return o3(new Date(a),vl[r],t).getTime()}function e2e(a,e){var t=new Date(0);t[a](1);var r=t.getTime();t[a](1+e);var n=t.getTime()-r;return function(i,l){return Math.max(0,Math.round((l-i)/n))}}function t2e(a,e,t,r,n,i){var l=1e4,o=bbe,c=0;function d(Z,J,B,W,$,Q,ne){for(var re=e2e($,Z),K=J,ae=new Date(K);K<B&&K<=r[1]&&(ne.push({value:K}),!(c++>l));)if(ae[$](ae[W]()+Z),K=ae.getTime(),i){var ce=i.calcNiceTickMultiple(K,re);ce>0&&(ae[$](ae[W]()+ce*Z),K=ae.getTime())}ne.push({value:K,notAdd:!0})}function u(Z,J,B){var W=[],$=!J.length;if(!sq(hv(Z),r[0],r[1],t)){$&&(J=[{value:Jwe(r[0],Z,t)},{value:r[1]}]);for(var Q=0;Q<J.length-1;Q++){var ne=J[Q].value,re=J[Q+1].value;if(ne!==re){var K=void 0,ae=void 0,ce=void 0,de=!1;switch(Z){case"year":K=Math.max(1,Math.round(e/Jl/365)),ae=hY(t),ce=Sbe(t);break;case"half-year":case"quarter":case"month":K=Zwe(e),ae=sM(t),ce=fY(t);break;case"week":case"half-week":case"day":K=Xwe(e),ae=lM(t),ce=pY(t),de=!0;break;case"half-day":case"quarter-day":case"hour":K=Kwe(e),ae=oM(t),ce=xY(t);break;case"minute":K=B9(e,!0),ae=cM(t),ce=mY(t);break;case"second":K=B9(e,!1),ae=dM(t),ce=gY(t);break;case"millisecond":K=Qwe(e),ae=uM(t),ce=vY(t);break}re>=r[0]&&ne<=r[1]&&d(K,ne,re,ae,ce,de,W),Z==="year"&&B.length>1&&Q===0&&B.unshift({value:B[0].value-K})}}for(var Q=0;Q<W.length;Q++)B.push(W[Q])}}for(var h=[],f=[],p=0,g=0,b=0;b<o.length;++b){var w=hv(o[b]);if(_be(o[b])){u(o[b],h[h.length-1]||[],f);var j=o[b+1]?hv(o[b+1]):null;if(w!==j){if(f.length){g=p,f.sort(function(Z,J){return Z.value-J.value});for(var k=[],T=0;T<f.length;++T){var E=f[T].value;(T===0||f[T-1].value!==E)&&(k.push(f[T]),E>=r[0]&&E<=r[1]&&p++)}var I=n/e;if(p>I*1.5&&g>I/1.5||(h.push(k),p>I||a===o[b]))break}f=[]}}}for(var R=pr(ct(h,function(Z){return pr(Z,function(J){return J.value>=r[0]&&J.value<=r[1]&&!J.notAdd})}),function(Z){return Z.length>0}),P=[],H=R.length-1,b=0;b<R.length;++b)for(var G=R[b],X=0;X<G.length;++X){var U=ax(G[X].value,t);P.push({value:G[X].value,time:{level:H-b,upperTimeUnit:U,lowerTimeUnit:U}})}P.sort(function(Z,J){return Z.value-J.value});for(var te=[],b=0;b<P.length;++b)(b===0||P[b].value!==P[b-1].value)&&te.push(P[b]);return te}Ih.registerClass(DM);var T3=$n,a2e=Math.floor,r2e=Math.ceil,Uy=Math.pow,Gy=Math.log,lq=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new Vd,t}return e.prototype.getTicks=function(t){t=t||{};var r=this._extent.slice(),n=this._originalScale.getExtent(),i=a.prototype.getTicks.call(this,t),l=this.base,o=this._originalScale._innerGetBreaks(),c=Xn();return ct(i,function(d){var u=d.value,h=null,f=Uy(l,u);u===r[0]&&this._fixMin?h=n[0]:u===r[1]&&this._fixMax&&(h=n[1]);var p;if(c){var g=c.getTicksLogTransformBreak(d,l,o,Wy);p=g.vBreak,h==null&&(h=g.brkRoundingCriterion)}return h!=null&&(f=Wy(f,h)),{value:f,break:p}},this)},e.prototype._getNonTransBreaks=function(){return this._originalScale._innerGetBreaks()},e.prototype.setExtent=function(t,r){this._originalScale.setExtent(t,r);var n=C3(this.base,[t,r]);a.prototype.setExtent.call(this,n[0],n[1])},e.prototype.getExtent=function(){var t=this.base,r=a.prototype.getExtent.call(this);r[0]=Uy(t,r[0]),r[1]=Uy(t,r[1]);var n=this._originalScale.getExtent();return this._fixMin&&(r[0]=Wy(r[0],n[0])),this._fixMax&&(r[1]=Wy(r[1],n[1])),r},e.prototype.unionExtentFromData=function(t,r){this._originalScale.unionExtentFromData(t,r);var n=C3(this.base,t.getApproximateExtent(r),!0);this._innerUnionExtent(n)},e.prototype.calcNiceTicks=function(t){t=t||10;var r=this._extent.slice(),n=this._getExtentSpanWithBreaks();if(!(!isFinite(n)||n<=0)){var i=Wme(n),l=t/n*i;for(l<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0;)i*=10;var o=[T3(r2e(r[0]/i)*i),T3(a2e(r[1]/i)*i)];this._interval=i,this._intervalPrecision=Jv(i),this._niceExtent=o}},e.prototype.calcNiceExtent=function(t){a.prototype.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.contain=function(t){return t=Gy(t)/Gy(this.base),a.prototype.contain.call(this,t)},e.prototype.normalize=function(t){return t=Gy(t)/Gy(this.base),a.prototype.normalize.call(this,t)},e.prototype.scale=function(t){return t=a.prototype.scale.call(this,t),Uy(this.base,t)},e.prototype.setBreaksFromOption=function(t){var r=Xn();if(r){var n=r.logarithmicParseBreaksFromOption(t,this.base,Tt(this.parse,this)),i=n.parsedOriginal,l=n.parsedLogged;this._originalScale._innerSetBreak(i),this._innerSetBreak(l)}},e.type="log",e})(Vd);function Wy(a,e){return T3(a,mc(e))}Ih.registerClass(lq);var n2e=(function(){function a(e,t,r){this._prepareParams(e,t,r)}return a.prototype._prepareParams=function(e,t,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var n=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&t.getNeedCrossZero&&t.getNeedCrossZero();var i=t.get("min",!0);i==null&&(i=t.get("startValue",!0));var l=this._modelMinRaw=i;Yt(l)?this._modelMinNum=Yy(e,l({min:r[0],max:r[1]})):l!=="dataMin"&&(this._modelMinNum=Yy(e,l));var o=this._modelMaxRaw=t.get("max",!0);if(Yt(o)?this._modelMaxNum=Yy(e,o({min:r[0],max:r[1]})):o!=="dataMax"&&(this._modelMaxNum=Yy(e,o)),n)this._axisDataLen=t.getCategories().length;else{var c=t.get("boundaryGap"),d=lt(c)?c:[c||0,c||0];typeof d[0]=="boolean"||typeof d[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Ro(d[0],1),Ro(d[1],1)]}},a.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,r=this._dataMax,n=this._axisDataLen,i=this._boundaryGapInner,l=e?null:r-t||Math.abs(t),o=this._modelMinRaw==="dataMin"?t:this._modelMinNum,c=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,d=o!=null,u=c!=null;o==null&&(o=e?n?0:NaN:t-i[0]*l),c==null&&(c=e?n?n-1:NaN:r+i[1]*l),(o==null||!isFinite(o))&&(o=NaN),(c==null||!isFinite(c))&&(c=NaN);var h=os(o)||os(c)||e&&!n;this._needCrossZero&&(o>0&&c>0&&!d&&(o=0),o<0&&c<0&&!u&&(c=0));var f=this._determinedMin,p=this._determinedMax;return f!=null&&(o=f,d=!0),p!=null&&(c=p,u=!0),{min:o,max:c,minFixed:d,maxFixed:u,isBlank:h}},a.prototype.modifyDataMinMax=function(e,t){this[s2e[e]]=t},a.prototype.setDeterminedMinMax=function(e,t){var r=i2e[e];this[r]=t},a.prototype.freeze=function(){this.frozen=!0},a})(),i2e={min:"_determinedMin",max:"_determinedMax"},s2e={min:"_dataMin",max:"_dataMax"};function oq(a,e,t){var r=a.rawExtentInfo;return r||(r=new n2e(a,e,t),a.rawExtentInfo=r,r)}function Yy(a,e){return e==null?null:os(e)?NaN:a.parse(e)}function cq(a,e){var t=a.type,r=oq(a,e,a.getExtent()).calculate();a.setBlank(r.isBlank);var n=r.min,i=r.max,l=e.ecModel;if(l&&t==="time"){var o=J$("bar",l),c=!1;if(se(o,function(h){c=c||h.getBaseAxis()===e.axis}),c){var d=eq(o),u=l2e(n,i,e,d);n=u.min,i=u.max}}return{extent:[n,i],fixMin:r.minFixed,fixMax:r.maxFixed}}function l2e(a,e,t,r){var n=t.axis.getExtent(),i=Math.abs(n[1]-n[0]),l=Ywe(r,t.axis);if(l===void 0)return{min:a,max:e};var o=1/0;se(l,function(p){o=Math.min(p.offset,o)});var c=-1/0;se(l,function(p){c=Math.max(p.offset+p.width,c)}),o=Math.abs(o),c=Math.abs(c);var d=o+c,u=e-a,h=1-(o+c)/i,f=u/h-u;return e+=f*(c/d),a-=f*(o/d),{min:a,max:e}}function Ix(a,e){var t=e,r=cq(a,t),n=r.extent,i=t.get("splitNumber");a instanceof lq&&(a.base=t.get("logBase"));var l=a.type,o=t.get("interval"),c=l==="interval"||l==="time";a.setBreaksFromOption(uq(t)),a.setExtent(n[0],n[1]),a.calcNiceExtent({splitNumber:i,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:c?t.get("minInterval"):null,maxInterval:c?t.get("maxInterval"):null}),o!=null&&a.setInterval&&a.setInterval(o)}function DN(a,e){if(e=e||a.get("type"),e)switch(e){case"category":return new Dx({ordinalMeta:a.getOrdinalMeta?a.getOrdinalMeta():a.getCategories(),extent:[1/0,-1/0]});case"time":return new DM({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new(Ih.getClass(e)||Vd)}}function o2e(a){var e=a.scale.getExtent(),t=e[0],r=e[1];return!(t>0&&r>0||t<0&&r<0)}function tm(a){var e=a.getLabelModel().get("formatter");if(a.type==="time"){var t=ybe(e);return function(n,i){return a.scale.getFormattedLabel(n,i,t)}}else{if(At(e))return function(n){var i=a.scale.getLabel(n),l=e.replace("{value}",i??"");return l};if(Yt(e)){if(a.type==="category")return function(n,i){return e(t_(a,n),n.value-a.scale.getExtent()[0],null)};var r=Xn();return function(n,i){var l=null;return r&&(l=r.makeAxisLabelFormatterParamBreak(l,n.break)),e(t_(a,n),i,l)}}else return function(n){return a.scale.getLabel(n)}}}function t_(a,e){return a.type==="category"?a.scale.getLabel(e):e.value}function IM(a){var e=a.get("interval");return e??"auto"}function dq(a){return a.type==="category"&&IM(a.getLabelModel())===0}function a_(a,e){var t={};return se(a.mapDimensionsAll(e),function(r){t[Z$(a,r)]=!0}),Ua(t)}function c2e(a,e,t){e&&se(a_(e,t),function(r){var n=e.getApproximateExtent(r);n[0]<a[0]&&(a[0]=n[0]),n[1]>a[1]&&(a[1]=n[1])})}function Rx(a){return a==="middle"||a==="center"}function tb(a){return a.getShallow("show")}function uq(a){var e=a.get("breaks",!0);if(e!=null)return!Xn()||!d2e(a.axis)?void 0:e}function d2e(a){return(a.dim==="x"||a.dim==="y"||a.dim==="z"||a.dim==="single")&&a.type!=="category"}var Bb=(function(){function a(){}return a.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},a.prototype.getCoordSysModel=function(){},a})(),u2e=1e-8;function F9(a,e){return Math.abs(a-e)<u2e}function Vf(a,e,t){var r=0,n=a[0];if(!n)return!1;for(var i=1;i<a.length;i++){var l=a[i];r+=yd(n[0],n[1],l[0],l[1],e,t),n=l}var o=a[0];return(!F9(n[0],o[0])||!F9(n[1],o[1]))&&(r+=yd(n[0],n[1],o[0],o[1],e,t)),r!==0}var h2e=[];function pk(a,e){for(var t=0;t<a.length;t++)Fn(a[t],a[t],e)}function V9(a,e,t,r){for(var n=0;n<a.length;n++){var i=a[n];r&&(i=r.project(i)),i&&isFinite(i[0])&&isFinite(i[1])&&(Ju(e,e,i),eh(t,t,i))}}function f2e(a){for(var e=0,t=0,r=0,n=a.length,i=a[n-1][0],l=a[n-1][1],o=0;o<n;o++){var c=a[o][0],d=a[o][1],u=i*d-c*l;e+=u,t+=(i+c)*u,r+=(l+d)*u,i=c,l=d}return e?[t/e/3,r/e/3,e]:[a[0][0]||0,a[0][1]||0]}var hq=(function(){function a(e){this.name=e}return a.prototype.setCenter=function(e){this._center=e},a.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},a})(),H9=(function(){function a(e,t){this.type="polygon",this.exterior=e,this.interiors=t}return a})(),U9=(function(){function a(e){this.type="linestring",this.points=e}return a})(),fq=(function(a){Ie(e,a);function e(t,r,n){var i=a.call(this,t)||this;return i.type="geoJSON",i.geometries=r,i._center=n&&[n[0],n[1]],i}return e.prototype.calcCenter=function(){for(var t=this.geometries,r,n=0,i=0;i<t.length;i++){var l=t[i],o=l.exterior,c=o&&o.length;c>n&&(r=l,n=c)}if(r)return f2e(r.exterior);var d=this.getBoundingRect();return[d.x+d.width/2,d.y+d.height/2]},e.prototype.getBoundingRect=function(t){var r=this._rect;if(r&&!t)return r;var n=[1/0,1/0],i=[-1/0,-1/0],l=this.geometries;return se(l,function(o){o.type==="polygon"?V9(o.exterior,n,i,t):se(o.points,function(c){V9(c,n,i,t)})}),isFinite(n[0])&&isFinite(n[1])&&isFinite(i[0])&&isFinite(i[1])||(n[0]=n[1]=i[0]=i[1]=0),r=new ra(n[0],n[1],i[0]-n[0],i[1]-n[1]),t||(this._rect=r),r},e.prototype.contain=function(t){var r=this.getBoundingRect(),n=this.geometries;if(!r.contain(t[0],t[1]))return!1;e:for(var i=0,l=n.length;i<l;i++){var o=n[i];if(o.type==="polygon"){var c=o.exterior,d=o.interiors;if(Vf(c,t[0],t[1])){for(var u=0;u<(d?d.length:0);u++)if(Vf(d[u],t[0],t[1]))continue e;return!0}}}return!1},e.prototype.transformTo=function(t,r,n,i){var l=this.getBoundingRect(),o=l.width/l.height;n?i||(i=n/o):n=o*i;for(var c=new ra(t,r,n,i),d=l.calculateTransform(c),u=this.geometries,h=0;h<u.length;h++){var f=u[h];f.type==="polygon"?(pk(f.exterior,d),se(f.interiors,function(p){pk(p,d)})):se(f.points,function(p){pk(p,d)})}l=this._rect,l.copy(c),this._center=[l.x+l.width/2,l.y+l.height/2]},e.prototype.cloneShallow=function(t){t==null&&(t=this.name);var r=new e(t,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},e})(hq),p2e=(function(a){Ie(e,a);function e(t,r){var n=a.call(this,t)||this;return n.type="geoSVG",n._elOnlyForCalculate=r,n}return e.prototype.calcCenter=function(){for(var t=this._elOnlyForCalculate,r=t.getBoundingRect(),n=[r.x+r.width/2,r.y+r.height/2],i=lN(h2e),l=t;l&&!l.isGeoSVGGraphicRoot;)Sc(i,l.getLocalTransform(),i),l=l.parent;return Io(i,i),Fn(n,n,i),n},e})(hq);function x2e(a){if(!a.UTF8Encoding)return a;var e=a,t=e.UTF8Scale;t==null&&(t=1024);var r=e.features;return se(r,function(n){var i=n.geometry,l=i.encodeOffsets,o=i.coordinates;if(l)switch(i.type){case"LineString":i.coordinates=pq(o,l,t);break;case"Polygon":xk(o,l,t);break;case"MultiLineString":xk(o,l,t);break;case"MultiPolygon":se(o,function(c,d){return xk(c,l[d],t)})}}),e.UTF8Encoding=!1,e}function xk(a,e,t){for(var r=0;r<a.length;r++)a[r]=pq(a[r],e[r],t)}function pq(a,e,t){for(var r=[],n=e[0],i=e[1],l=0;l<a.length;l+=2){var o=a.charCodeAt(l)-64,c=a.charCodeAt(l+1)-64;o=o>>1^-(o&1),c=c>>1^-(c&1),o+=n,c+=i,n=o,i=c,r.push([o/t,c/t])}return r}function m2e(a,e){return a=x2e(a),ct(pr(a.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var r=t.properties,n=t.geometry,i=[];switch(n.type){case"Polygon":var l=n.coordinates;i.push(new H9(l[0],l.slice(1)));break;case"MultiPolygon":se(n.coordinates,function(c){c[0]&&i.push(new H9(c[0],c.slice(1)))});break;case"LineString":i.push(new U9([n.coordinates]));break;case"MultiLineString":i.push(new U9(n.coordinates))}var o=new fq(r[e||"name"],i,r.cp);return o.properties=r,o})}var g2e=Ia(),xv=Ia(),Lo={estimate:1,determine:2};function r_(a){return{out:{noPxChangeTryDetermine:[]},kind:a}}function xq(a,e){var t=ct(e,function(r){return a.scale.parse(r)});return a.type==="time"&&t.length>0&&(t.sort(),t.unshift(t[0]),t.push(t[t.length-1])),t}function v2e(a,e){var t=a.getLabelModel().get("customValues");if(t){var r=tm(a),n=a.scale.getExtent(),i=xq(a,t),l=pr(i,function(o){return o>=n[0]&&o<=n[1]});return{labels:ct(l,function(o){var c={value:o};return{formattedLabel:r(c),rawLabel:a.scale.getLabel(c),tickValue:o,time:void 0,break:void 0}})}}return a.type==="category"?y2e(a,e):_2e(a)}function b2e(a,e,t){var r=a.getTickModel().get("customValues");if(r){var n=a.scale.getExtent(),i=xq(a,r);return{ticks:pr(i,function(l){return l>=n[0]&&l<=n[1]})}}return a.type==="category"?w2e(a,e):{ticks:ct(a.scale.getTicks(t),function(l){return l.value})}}function y2e(a,e){var t=a.getLabelModel(),r=mq(a,t,e);return!t.get("show")||a.scale.isBlank()?{labels:[]}:r}function mq(a,e,t){var r=j2e(a),n=IM(e),i=t.kind===Lo.estimate;if(!i){var l=vq(r,n);if(l)return l}var o,c;Yt(n)?o=wq(a,n):(c=n==="auto"?S2e(a,t):n,o=yq(a,c));var d={labels:o,labelCategoryInterval:c};return i?t.out.noPxChangeTryDetermine.push(function(){return M3(r,n,d),!0}):M3(r,n,d),d}function w2e(a,e){var t=N2e(a),r=IM(e),n=vq(t,r);if(n)return n;var i,l;if((!e.get("show")||a.scale.isBlank())&&(i=[]),Yt(r))i=wq(a,r,!0);else if(r==="auto"){var o=mq(a,a.getLabelModel(),r_(Lo.determine));l=o.labelCategoryInterval,i=ct(o.labels,function(c){return c.tickValue})}else l=r,i=yq(a,l,!0);return M3(t,r,{ticks:i,tickCategoryInterval:l})}function _2e(a){var e=a.scale.getTicks(),t=tm(a);return{labels:ct(e,function(r,n){return{formattedLabel:t(r,n),rawLabel:a.scale.getLabel(r),tickValue:r.value,time:r.time,break:r.break}})}}var N2e=gq("axisTick"),j2e=gq("axisLabel");function gq(a){return function(t){return xv(t)[a]||(xv(t)[a]={list:[]})}}function vq(a,e){for(var t=0;t<a.list.length;t++)if(a.list[t].key===e)return a.list[t].value}function M3(a,e,t){return a.list.push({key:e,value:t}),t}function S2e(a,e){if(e.kind===Lo.estimate){var t=a.calculateCategoryInterval(e);return e.out.noPxChangeTryDetermine.push(function(){return xv(a).autoInterval=t,!0}),t}var r=xv(a).autoInterval;return r??(xv(a).autoInterval=a.calculateCategoryInterval(e))}function k2e(a,e){var t=e.kind,r=A2e(a),n=tm(a),i=(r.axisRotate-r.labelRotate)/180*Math.PI,l=a.scale,o=l.getExtent(),c=l.count();if(o[1]-o[0]<1)return 0;var d=1,u=40;c>u&&(d=Math.max(1,Math.floor(c/u)));for(var h=o[0],f=a.dataToCoord(h+1)-a.dataToCoord(h),p=Math.abs(f*Math.cos(i)),g=Math.abs(f*Math.sin(i)),b=0,w=0;h<=o[1];h+=d){var j=0,k=0,T=dN(n({value:h}),r.font,"center","top");j=T.width*1.3,k=T.height*1.3,b=Math.max(b,j,7),w=Math.max(w,k,7)}var E=b/p,I=w/g;isNaN(E)&&(E=1/0),isNaN(I)&&(I=1/0);var R=Math.max(0,Math.floor(Math.min(E,I)));if(t===Lo.estimate)return e.out.noPxChangeTryDetermine.push(Tt(C2e,null,a,R,c)),R;var P=bq(a,R,c);return P??R}function C2e(a,e,t){return bq(a,e,t)==null}function bq(a,e,t){var r=g2e(a.model),n=a.getExtent(),i=r.lastAutoInterval,l=r.lastTickCount;if(i!=null&&l!=null&&Math.abs(i-e)<=1&&Math.abs(l-t)<=1&&i>e&&r.axisExtent0===n[0]&&r.axisExtent1===n[1])return i;r.lastTickCount=t,r.lastAutoInterval=e,r.axisExtent0=n[0],r.axisExtent1=n[1]}function A2e(a){var e=a.getLabelModel();return{axisRotate:a.getRotate?a.getRotate():a.isHorizontal&&!a.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function yq(a,e,t){var r=tm(a),n=a.scale,i=n.getExtent(),l=a.getLabelModel(),o=[],c=Math.max((e||0)+1,1),d=i[0],u=n.count();d!==0&&c>1&&u/c>2&&(d=Math.round(Math.ceil(d/c)*c));var h=dq(a),f=l.get("showMinLabel")||h,p=l.get("showMaxLabel")||h;f&&d!==i[0]&&b(i[0]);for(var g=d;g<=i[1];g+=c)b(g);p&&g-c!==i[1]&&b(i[1]);function b(w){var j={value:w};o.push(t?w:{formattedLabel:r(j),rawLabel:n.getLabel(j),tickValue:w,time:void 0,break:void 0})}return o}function wq(a,e,t){var r=a.scale,n=tm(a),i=[];return se(r.getTicks(),function(l){var o=r.getLabel(l),c=l.value;e(l.value,o)&&i.push(t?c:{formattedLabel:n(l),rawLabel:o,tickValue:c,time:void 0,break:void 0})}),i}var G9=[0,1],Fo=(function(){function a(e,t,r){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=r||[0,0]}return a.prototype.contain=function(e){var t=this._extent,r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]);return e>=r&&e<=n},a.prototype.containData=function(e){return this.scale.contain(this.scale.parse(e))},a.prototype.getExtent=function(){return this._extent.slice()},a.prototype.getPixelPrecision=function(e){return oW(e||this.scale.getExtent(),this._extent)},a.prototype.setExtent=function(e,t){var r=this._extent;r[0]=e,r[1]=t},a.prototype.dataToCoord=function(e,t){var r=this._extent,n=this.scale;return e=n.normalize(n.parse(e)),this.onBand&&n.type==="ordinal"&&(r=r.slice(),W9(r,n.count())),fr(e,G9,r,t)},a.prototype.coordToData=function(e,t){var r=this._extent,n=this.scale;this.onBand&&n.type==="ordinal"&&(r=r.slice(),W9(r,n.count()));var i=fr(e,r,G9,t);return this.scale.scale(i)},a.prototype.pointToData=function(e,t){},a.prototype.getTicksCoords=function(e){e=e||{};var t=e.tickModel||this.getTickModel(),r=b2e(this,t,{breakTicks:e.breakTicks,pruneByBreak:e.pruneByBreak}),n=r.ticks,i=ct(n,function(o){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(o):o),tickValue:o}},this),l=t.get("alignWithLabel");return T2e(this,i,l,e.clamp),i},a.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),t=e.get("splitNumber");t>0&&t<100||(t=5);var r=this.scale.getMinorTicks(t),n=ct(r,function(i){return ct(i,function(l){return{coord:this.dataToCoord(l),tickValue:l}},this)},this);return n},a.prototype.getViewLabels=function(e){return e=e||r_(Lo.determine),v2e(this,e).labels},a.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},a.prototype.getTickModel=function(){return this.model.getModel("axisTick")},a.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),r=t[1]-t[0]+(this.onBand?1:0);r===0&&(r=1);var n=Math.abs(e[1]-e[0]);return Math.abs(n)/r},a.prototype.calculateCategoryInterval=function(e){return e=e||r_(Lo.determine),k2e(this,e)},a})();function W9(a,e){var t=a[1]-a[0],r=e,n=t/r/2;a[0]+=n,a[1]-=n}function T2e(a,e,t,r){var n=e.length;if(!a.onBand||t||!n)return;var i=a.getExtent(),l,o;if(n===1)e[0].coord=i[0],e[0].onBand=!0,l=e[1]={coord:i[1],tickValue:e[0].tickValue,onBand:!0};else{var c=e[n-1].tickValue-e[0].tickValue,d=(e[n-1].coord-e[0].coord)/c;se(e,function(p){p.coord-=d/2,p.onBand=!0});var u=a.scale.getExtent();o=1+u[1]-e[n-1].tickValue,l={coord:e[n-1].coord+d*o,tickValue:u[1]+1,onBand:!0},e.push(l)}var h=i[0]>i[1];f(e[0].coord,i[0])&&(r?e[0].coord=i[0]:e.shift()),r&&f(i[0],e[0].coord)&&e.unshift({coord:i[0],onBand:!0}),f(i[1],l.coord)&&(r?l.coord=i[1]:e.pop()),r&&f(l.coord,i[1])&&e.push({coord:i[1],onBand:!0});function f(p,g){return p=$n(p),g=$n(g),h?p>g:p<g}}var ug=Math.PI*2,Cf=Ic.CMD,M2e=["top","right","bottom","left"];function E2e(a,e,t,r,n){var i=t.width,l=t.height;switch(a){case"top":r.set(t.x+i/2,t.y-e),n.set(0,-1);break;case"bottom":r.set(t.x+i/2,t.y+l+e),n.set(0,1);break;case"left":r.set(t.x-e,t.y+l/2),n.set(-1,0);break;case"right":r.set(t.x+i+e,t.y+l/2),n.set(1,0);break}}function D2e(a,e,t,r,n,i,l,o,c){l-=a,o-=e;var d=Math.sqrt(l*l+o*o);l/=d,o/=d;var u=l*t+a,h=o*t+e;if(Math.abs(r-n)%ug<1e-4)return c[0]=u,c[1]=h,d-t;if(i){var f=r;r=_l(n),n=_l(f)}else r=_l(r),n=_l(n);r>n&&(n+=ug);var p=Math.atan2(o,l);if(p<0&&(p+=ug),p>=r&&p<=n||p+ug>=r&&p+ug<=n)return c[0]=u,c[1]=h,d-t;var g=t*Math.cos(r)+a,b=t*Math.sin(r)+e,w=t*Math.cos(n)+a,j=t*Math.sin(n)+e,k=(g-l)*(g-l)+(b-o)*(b-o),T=(w-l)*(w-l)+(j-o)*(j-o);return k<T?(c[0]=g,c[1]=b,Math.sqrt(k)):(c[0]=w,c[1]=j,Math.sqrt(T))}function n_(a,e,t,r,n,i,l,o){var c=n-a,d=i-e,u=t-a,h=r-e,f=Math.sqrt(u*u+h*h);u/=f,h/=f;var p=c*u+d*h,g=p/f;o&&(g=Math.min(Math.max(g,0),1)),g*=f;var b=l[0]=a+g*u,w=l[1]=e+g*h;return Math.sqrt((b-n)*(b-n)+(w-i)*(w-i))}function _q(a,e,t,r,n,i,l){t<0&&(a=a+t,t=-t),r<0&&(e=e+r,r=-r);var o=a+t,c=e+r,d=l[0]=Math.min(Math.max(n,a),o),u=l[1]=Math.min(Math.max(i,e),c);return Math.sqrt((d-n)*(d-n)+(u-i)*(u-i))}var No=[];function I2e(a,e,t){var r=_q(e.x,e.y,e.width,e.height,a.x,a.y,No);return t.set(No[0],No[1]),r}function R2e(a,e,t){for(var r=0,n=0,i=0,l=0,o,c,d=1/0,u=e.data,h=a.x,f=a.y,p=0;p<u.length;){var g=u[p++];p===1&&(r=u[p],n=u[p+1],i=r,l=n);var b=d;switch(g){case Cf.M:i=u[p++],l=u[p++],r=i,n=l;break;case Cf.L:b=n_(r,n,u[p],u[p+1],h,f,No,!0),r=u[p++],n=u[p++];break;case Cf.C:b=GG(r,n,u[p++],u[p++],u[p++],u[p++],u[p],u[p+1],h,f,No),r=u[p++],n=u[p++];break;case Cf.Q:b=YG(r,n,u[p++],u[p++],u[p],u[p+1],h,f,No),r=u[p++],n=u[p++];break;case Cf.A:var w=u[p++],j=u[p++],k=u[p++],T=u[p++],E=u[p++],I=u[p++];p+=1;var R=!!(1-u[p++]);o=Math.cos(E)*k+w,c=Math.sin(E)*T+j,p<=1&&(i=o,l=c);var P=(h-w)*T/k+w;b=D2e(w,j,T,E,E+I,R,P,f,No),r=Math.cos(E+I)*k+w,n=Math.sin(E+I)*T+j;break;case Cf.R:i=r=u[p++],l=n=u[p++];var H=u[p++],G=u[p++];b=_q(i,l,H,G,h,f,No);break;case Cf.Z:b=n_(r,n,i,l,h,f,No,!0),r=i,n=l;break}b<d&&(d=b,t.set(No[0],No[1]))}return d}var ko=new Qt,qr=new Qt,On=new Qt,bc=new Qt,pc=new Qt;function Y9(a,e){if(a){var t=a.getTextGuideLine(),r=a.getTextContent();if(r&&t){var n=a.textGuideLineConfig||{},i=[[0,0],[0,0],[0,0]],l=n.candidates||M2e,o=r.getBoundingRect().clone();o.applyTransform(r.getComputedTransform());var c=1/0,d=n.anchor,u=a.getComputedTransform(),h=u&&Io([],u),f=e.get("length2")||0;d&&On.copy(d);for(var p=0;p<l.length;p++){var g=l[p];E2e(g,0,o,ko,bc),Qt.scaleAndAdd(qr,ko,bc,f),qr.transform(h);var b=a.getBoundingRect(),w=d?d.distance(qr):a instanceof Ra?R2e(qr,a.path,On):I2e(qr,b,On);w<c&&(c=w,qr.transform(u),On.transform(u),On.toArray(i[0]),qr.toArray(i[1]),ko.toArray(i[2]))}Nq(i,e.get("minTurnAngle")),t.setShape({points:i})}}}var i_=[],js=new Qt;function Nq(a,e){if(e<=180&&e>0){e=e/180*Math.PI,ko.fromArray(a[0]),qr.fromArray(a[1]),On.fromArray(a[2]),Qt.sub(bc,ko,qr),Qt.sub(pc,On,qr);var t=bc.len(),r=pc.len();if(!(t<.001||r<.001)){bc.scale(1/t),pc.scale(1/r);var n=bc.dot(pc),i=Math.cos(e);if(i<n){var l=n_(qr.x,qr.y,On.x,On.y,ko.x,ko.y,i_,!1);js.fromArray(i_),js.scaleAndAdd(pc,l/Math.tan(Math.PI-e));var o=On.x!==qr.x?(js.x-qr.x)/(On.x-qr.x):(js.y-qr.y)/(On.y-qr.y);if(isNaN(o))return;o<0?Qt.copy(js,qr):o>1&&Qt.copy(js,On),js.toArray(a[1])}}}}function L2e(a,e,t){if(t<=180&&t>0){t=t/180*Math.PI,ko.fromArray(a[0]),qr.fromArray(a[1]),On.fromArray(a[2]),Qt.sub(bc,qr,ko),Qt.sub(pc,On,qr);var r=bc.len(),n=pc.len();if(!(r<.001||n<.001)){bc.scale(1/r),pc.scale(1/n);var i=bc.dot(e),l=Math.cos(t);if(i<l){var o=n_(qr.x,qr.y,On.x,On.y,ko.x,ko.y,i_,!1);js.fromArray(i_);var c=Math.PI/2,d=Math.acos(pc.dot(e)),u=c+d-t;if(u>=c)Qt.copy(js,On);else{js.scaleAndAdd(pc,o/Math.tan(Math.PI/2-u));var h=On.x!==qr.x?(js.x-qr.x)/(On.x-qr.x):(js.y-qr.y)/(On.y-qr.y);if(isNaN(h))return;h<0?Qt.copy(js,qr):h>1&&Qt.copy(js,On)}js.toArray(a[1])}}}}function mk(a,e,t,r){var n=t==="normal",i=n?a:a.ensureState(t);i.ignore=e;var l=r.get("smooth");l&&l===!0&&(l=.3),i.shape=i.shape||{},l>0&&(i.shape.smooth=l);var o=r.getModel("lineStyle").getLineStyle();n?a.useStyle(o):i.style=o}function O2e(a,e){var t=e.smooth,r=e.points;if(r)if(a.moveTo(r[0][0],r[0][1]),t>0&&r.length>=3){var n=Qu(r[0],r[1]),i=Qu(r[1],r[2]);if(!n||!i){a.lineTo(r[1][0],r[1][1]),a.lineTo(r[2][0],r[2][1]);return}var l=Math.min(n,i)*t,o=Ow([],r[1],r[0],l/n),c=Ow([],r[1],r[2],l/i),d=Ow([],o,c,.5);a.bezierCurveTo(o[0],o[1],o[0],o[1],d[0],d[1]),a.bezierCurveTo(c[0],c[1],c[0],c[1],r[2][0],r[2][1])}else for(var u=1;u<r.length;u++)a.lineTo(r[u][0],r[u][1])}function RM(a,e,t){var r=a.getTextGuideLine(),n=a.getTextContent();if(!n){r&&a.removeTextGuideLine();return}for(var i=e.normal,l=i.get("show"),o=n.ignore,c=0;c<Gv.length;c++){var d=Gv[c],u=e[d],h=d==="normal";if(u){var f=u.get("show"),p=h?o:Ht(n.states[d]&&n.states[d].ignore,o);if(p||!Ht(f,l)){var g=h?r:r&&r.states[d];g&&(g.ignore=!0),r&&mk(r,!0,d,u);continue}r||(r=new Xi,a.setTextGuideLine(r),!h&&(o||!l)&&mk(r,!0,"normal",e.normal),a.stateProxy&&(r.stateProxy=a.stateProxy)),mk(r,!1,d,u)}}if(r){ta(r.style,t),r.style.fill=null;var b=i.get("showAbove"),w=a.textGuideLineConfig=a.textGuideLineConfig||{};w.showAbove=b||!1,r.buildPath=O2e}}function LM(a,e){e=e||"labelLine";for(var t={normal:a.getModel(e)},r=0;r<Ms.length;r++){var n=Ms[r];t[n]=a.getModel([n,e])}return t}var $9=["label","labelLine","layoutOption","priority","defaultAttr","marginForce","minMarginForce","marginDefault","suggestIgnore"],P2e=1,s_=2,jq=P2e|s_;function l_(a,e,t){t=t||jq,e?a.dirty|=t:a.dirty&=~t}function Sq(a,e){return e=e||jq,a.dirty==null||!!(a.dirty&e)}function Lc(a){if(a)return Sq(a)&&kq(a,a.label,a),a}function kq(a,e,t){var r=e.getComputedTransform();a.transform=eM(a.transform,r);var n=a.localRect=$v(a.localRect,e.getBoundingRect()),i=e.style,l=i.margin,o=t&&t.marginForce,c=t&&t.minMarginForce,d=t&&t.marginDefault,u=i.__marginType;u==null&&d&&(l=d,u=tx.textMargin);for(var h=0;h<4;h++)gk[h]=u===tx.minMargin&&c&&c[h]!=null?c[h]:o&&o[h]!=null?o[h]:l?l[h]:0;u===tx.textMargin&&j0(n,gk,!1,!1);var f=a.rect=$v(a.rect,n);return r&&f.applyTransform(r),u===tx.minMargin&&j0(f,gk,!1,!1),a.axisAligned=JT(r),(a.label=a.label||{}).ignore=e.ignore,l_(a,!1),l_(a,!0,s_),a}var gk=[0,0,0,0];function z2e(a,e,t){return a.transform=eM(a.transform,t),a.localRect=$v(a.localRect,e),a.rect=$v(a.rect,e),t&&a.rect.applyTransform(t),a.axisAligned=JT(t),a.obb=void 0,(a.label=a.label||{}).ignore=!1,a}function E3(a,e){if(a){a.label.x+=e.x,a.label.y+=e.y,a.label.markRedraw();var t=a.transform;t&&(t[4]+=e.x,t[5]+=e.y);var r=a.rect;r&&(r.x+=e.x,r.y+=e.y);var n=a.obb;n&&n.fromBoundingRect(a.localRect,t)}}function D3(a,e){for(var t=0;t<$9.length;t++){var r=$9[t];a[r]==null&&(a[r]=e[r])}return Lc(a)}function q9(a){var e=a.obb;return(!e||Sq(a,s_))&&(a.obb=e=e||new ZW,e.fromBoundingRect(a.localRect,a.transform),l_(a,!1,s_)),e}function I3(a,e,t,r,n){var i=a.length,l=fa[e],o=Kn[e];if(i<2)return!1;a.sort(function(P,H){return P.rect[l]-H.rect[l]});for(var c=0,d,u=!1,h=0;h<i;h++){var f=a[h],p=f.rect;d=p[l]-c,d<0&&(p[l]-=d,f.label[l]-=d,u=!0),c=p[l]+p[o]}var g=a[0],b=a[i-1],w,j;k(),w<0&&I(-w,.8),j<0&&I(j,.8),k(),T(w,j,1),T(j,w,-1),k(),w<0&&R(-w),j<0&&R(j);function k(){w=g.rect[l]-t,j=r-b.rect[l]-b.rect[o]}function T(P,H,G){if(P<0){var X=Math.min(H,-P);if(X>0){E(X*G,0,i);var U=X+P;U<0&&I(-U*G,1)}else I(-P*G,1)}}function E(P,H,G){P!==0&&(u=!0);for(var X=H;X<G;X++){var U=a[X],te=U.rect;te[l]+=P,U.label[l]+=P}}function I(P,H){for(var G=[],X=0,U=1;U<i;U++){var te=a[U-1].rect,Z=Math.max(a[U].rect[l]-te[l]-te[o],0);G.push(Z),X+=Z}if(X){var J=Math.min(Math.abs(P)/X,H);if(P>0)for(var U=0;U<i-1;U++){var B=G[U]*J;E(B,0,U+1)}else for(var U=i-1;U>0;U--){var B=G[U-1]*J;E(-B,U,i)}}}function R(P){var H=P<0?-1:1;P=Math.abs(P);for(var G=Math.ceil(P/(i-1)),X=0;X<i-1;X++)if(H>0?E(G,0,X+1):E(-G,i-X-1,i),P-=G,P<=0)return}return u}function B2e(a){for(var e=0;e<a.length;e++){var t=a[e],r=t.defaultAttr,n=t.labelLine;t.label.attr("ignore",r.ignore),n&&n.attr("ignore",r.labelGuideIgnore)}}function Cq(a){var e=[];a.sort(function(d,u){return(u.suggestIgnore?1:0)-(d.suggestIgnore?1:0)||u.priority-d.priority});function t(d){if(!d.ignore){var u=d.ensureState("emphasis");u.ignore==null&&(u.ignore=!1)}d.ignore=!0}for(var r=0;r<a.length;r++){var n=Lc(a[r]);if(!n.label.ignore){for(var i=n.label,l=n.labelLine,o=!1,c=0;c<e.length;c++)if(IN(n,e[c],null,{touchThreshold:.05})){o=!0;break}o?(t(i),l&&t(l)):e.push(n)}}}function IN(a,e,t,r){return!a||!e||a.label&&a.label.ignore||e.label&&e.label.ignore||!a.rect.intersect(e.rect,t,r)?!1:a.axisAligned&&e.axisAligned?!0:q9(a).intersect(q9(e),t,r)}function F2e(a){if(a){for(var e=[],t=0;t<a.length;t++)e.push(a[t].slice());return e}}function V2e(a,e){var t=a.label,r=e&&e.getTextGuideLine();return{dataIndex:a.dataIndex,dataType:a.dataType,seriesIndex:a.seriesModel.seriesIndex,text:a.label.style.text,rect:a.hostRect,labelRect:a.rect,align:t.style.align,verticalAlign:t.style.verticalAlign,labelLinePoints:F2e(r&&r.shape.points)}}var X9=["align","verticalAlign","width","height","fontSize"],ws=new Cd,vk=Ia(),H2e=Ia();function $y(a,e,t){for(var r=0;r<t.length;r++){var n=t[r];e[n]!=null&&(a[n]=e[n])}}var qy=["x","y","rotation"],U2e=(function(){function a(){this._labelList=[],this._chartViewList=[]}return a.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},a.prototype._addLabel=function(e,t,r,n,i){var l=n.style,o=n.__hostTarget,c=o.textConfig||{},d=n.getComputedTransform(),u=n.getBoundingRect().plain();ra.applyTransform(u,u,d),d?ws.setLocalTransform(d):(ws.x=ws.y=ws.rotation=ws.originX=ws.originY=0,ws.scaleX=ws.scaleY=1),ws.rotation=_l(ws.rotation);var h=n.__hostTarget,f;if(h){f=h.getBoundingRect().plain();var p=h.getComputedTransform();ra.applyTransform(f,f,p)}var g=f&&h.getTextGuideLine();this._labelList.push({label:n,labelLine:g,seriesModel:r,dataIndex:e,dataType:t,layoutOptionOrCb:i,layoutOption:null,rect:u,hostRect:f,priority:f?f.width*f.height:0,defaultAttr:{ignore:n.ignore,labelGuideIgnore:g&&g.ignore,x:ws.x,y:ws.y,scaleX:ws.scaleX,scaleY:ws.scaleY,rotation:ws.rotation,style:{x:l.x,y:l.y,align:l.align,verticalAlign:l.verticalAlign,width:l.width,height:l.height,fontSize:l.fontSize},cursor:n.cursor,attachedPos:c.position,attachedRot:c.rotation}})},a.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var r=e.__model,n=r.get("labelLayout");(Yt(n)||Ua(n).length)&&e.group.traverse(function(i){if(i.ignore)return!0;var l=i.getTextContent(),o=la(i);l&&!l.disableLabelLayout&&t._addLabel(o.dataIndex,o.dataType,r,l,n)})},a.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),r=e.getHeight();function n(T,E){return function(){Y9(T,E)}}for(var i=0;i<this._labelList.length;i++){var l=this._labelList[i],o=l.label,c=o.__hostTarget,d=l.defaultAttr,u=void 0;Yt(l.layoutOptionOrCb)?u=l.layoutOptionOrCb(V2e(l,c)):u=l.layoutOptionOrCb,u=u||{},l.layoutOption=u;var h=Math.PI/180;c&&c.setTextConfig({local:!1,position:u.x!=null||u.y!=null?null:d.attachedPos,rotation:u.rotate!=null?u.rotate*h:d.attachedRot,offset:[u.dx||0,u.dy||0]});var f=!1;if(u.x!=null?(o.x=kt(u.x,t),o.setStyle("x",0),f=!0):(o.x=d.x,o.setStyle("x",d.style.x)),u.y!=null?(o.y=kt(u.y,r),o.setStyle("y",0),f=!0):(o.y=d.y,o.setStyle("y",d.style.y)),u.labelLinePoints){var p=c.getTextGuideLine();p&&(p.setShape({points:u.labelLinePoints}),f=!1)}var g=vk(o);g.needsUpdateLabelLine=f,o.rotation=u.rotate!=null?u.rotate*h:d.rotation,o.scaleX=d.scaleX,o.scaleY=d.scaleY;for(var b=0;b<X9.length;b++){var w=X9[b];o.setStyle(w,u[w]!=null?u[w]:d.style[w])}if(u.draggable){if(o.draggable=!0,o.cursor="move",c){var j=l.seriesModel;if(l.dataIndex!=null){var k=l.seriesModel.getData(l.dataType);j=k.getItemModel(l.dataIndex)}o.on("drag",n(c,j.getModel("labelLine")))}}else o.off("drag"),o.cursor=d.cursor}},a.prototype.layout=function(e){var t=e.getWidth(),r=e.getHeight(),n=[];se(this._labelList,function(c){c.defaultAttr.ignore||n.push(D3({},c))});var i=pr(n,function(c){return c.layoutOption.moveOverlap==="shiftX"}),l=pr(n,function(c){return c.layoutOption.moveOverlap==="shiftY"});I3(i,0,0,t),I3(l,1,0,r);var o=pr(n,function(c){return c.layoutOption.hideOverlap});B2e(o),Cq(o)},a.prototype.processLabelsOverall=function(){var e=this;se(this._chartViewList,function(t){var r=t.__model,n=t.ignoreLabelLineUpdate,i=r.isAnimationEnabled();t.group.traverse(function(l){if(l.ignore&&!l.forceLabelAnimation)return!0;var o=!n,c=l.getTextContent();!o&&c&&(o=vk(c).needsUpdateLabelLine),o&&e._updateLabelLine(l,r),i&&e._animateLabels(l,r)})})},a.prototype._updateLabelLine=function(e,t){var r=e.getTextContent(),n=la(e),i=n.dataIndex;if(r&&i!=null){var l=t.getData(n.dataType),o=l.getItemModel(i),c={},d=l.getItemVisual(i,"style");if(d){var u=l.getVisual("drawType");c.stroke=d[u]}var h=o.getModel("labelLine");RM(e,LM(o),c),Y9(e,h)}},a.prototype._animateLabels=function(e,t){var r=e.getTextContent(),n=e.getTextGuideLine();if(r&&(e.forceLabelAnimation||!r.ignore&&!r.invisible&&!e.disableLabelAnimation&&!hx(e))){var i=vk(r),l=i.oldLayout,o=la(e),c=o.dataIndex,d={x:r.x,y:r.y,rotation:r.rotation},u=t.getData(o.dataType);if(l){r.attr(l);var f=e.prevStates;f&&(ja(f,"select")>=0&&r.attr(i.oldLayoutSelect),ja(f,"emphasis")>=0&&r.attr(i.oldLayoutEmphasis)),nr(r,d,t,c)}else if(r.attr(d),!Zx(r).valueAnimation){var h=Ht(r.style.opacity,1);r.style.opacity=0,en(r,{style:{opacity:h}},t,c)}if(i.oldLayout=d,r.states.select){var p=i.oldLayoutSelect={};$y(p,d,qy),$y(p,r.states.select,qy)}if(r.states.emphasis){var g=i.oldLayoutEmphasis={};$y(g,d,qy),$y(g,r.states.emphasis,qy)}lY(r,c,u,t,t)}if(n&&!n.ignore&&!n.invisible){var i=H2e(n),l=i.oldLayout,b={points:n.shape.points};l?(n.attr({shape:l}),nr(n,{shape:b},t)):(n.setShape(b),n.style.strokePercent=0,en(n,{style:{strokePercent:1}},t)),i.oldLayout=b}},a})(),bk=Ia();function G2e(a){a.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){var n=bk(t).labelManager;n||(n=bk(t).labelManager=new U2e),n.clearLabels()}),a.registerUpdateLifecycle("series:layoutlabels",function(e,t,r){var n=bk(t).labelManager;r.updatedSeries.forEach(function(i){n.addLabelsOfSeries(t.getViewOfSeriesModel(i))}),n.updateLayoutConfig(t),n.layout(t),n.processLabelsOverall()})}var yk=Math.sin,wk=Math.cos,Aq=Math.PI,Af=Math.PI*2,W2e=180/Aq,Tq=(function(){function a(){}return a.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},a.prototype.moveTo=function(e,t){this._add("M",e,t)},a.prototype.lineTo=function(e,t){this._add("L",e,t)},a.prototype.bezierCurveTo=function(e,t,r,n,i,l){this._add("C",e,t,r,n,i,l)},a.prototype.quadraticCurveTo=function(e,t,r,n){this._add("Q",e,t,r,n)},a.prototype.arc=function(e,t,r,n,i,l){this.ellipse(e,t,r,r,0,n,i,l)},a.prototype.ellipse=function(e,t,r,n,i,l,o,c){var d=o-l,u=!c,h=Math.abs(d),f=rh(h-Af)||(u?d>=Af:-d>=Af),p=d>0?d%Af:d%Af+Af,g=!1;f?g=!0:rh(h)?g=!1:g=p>=Aq==!!u;var b=e+r*wk(l),w=t+n*yk(l);this._start&&this._add("M",b,w);var j=Math.round(i*W2e);if(f){var k=1/this._p,T=(u?1:-1)*(Af-k);this._add("A",r,n,j,1,+u,e+r*wk(l+T),t+n*yk(l+T)),k>.01&&this._add("A",r,n,j,0,+u,b,w)}else{var E=e+r*wk(o),I=t+n*yk(o);this._add("A",r,n,j,+g,+u,E,I)}},a.prototype.rect=function(e,t,r,n){this._add("M",e,t),this._add("l",r,0),this._add("l",0,n),this._add("l",-r,0),this._add("Z")},a.prototype.closePath=function(){this._d.length>0&&this._add("Z")},a.prototype._add=function(e,t,r,n,i,l,o,c,d){for(var u=[],h=this._p,f=1;f<arguments.length;f++){var p=arguments[f];if(isNaN(p)){this._invalid=!0;return}u.push(Math.round(p*h)/h)}this._d.push(e+u.join(" ")),this._start=e==="Z"},a.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},a.prototype.getStr=function(){return this._str},a})(),OM="none",Y2e=Math.round;function $2e(a){var e=a.fill;return e!=null&&e!==OM}function q2e(a){var e=a.stroke;return e!=null&&e!==OM}var R3=["lineCap","miterLimit","lineJoin"],X2e=ct(R3,function(a){return"stroke-"+a.toLowerCase()});function Z2e(a,e,t,r){var n=e.opacity==null?1:e.opacity;if(t instanceof Pi){a("opacity",n);return}if($2e(e)){var i=Vv(e.fill);a("fill",i.color);var l=e.fillOpacity!=null?e.fillOpacity*i.opacity*n:i.opacity*n;l<1&&a("fill-opacity",l)}else a("fill",OM);if(q2e(e)){var o=Vv(e.stroke);a("stroke",o.color);var c=e.strokeNoScale?t.getLineScale():1,d=c?(e.lineWidth||0)/c:0,u=e.strokeOpacity!=null?e.strokeOpacity*o.opacity*n:o.opacity*n,h=e.strokeFirst;if(d!==1&&a("stroke-width",d),h&&a("paint-order",h?"stroke":"fill"),u<1&&a("stroke-opacity",u),e.lineDash){var f=NM(t),p=f[0],g=f[1];p&&(g=Y2e(g||0),a("stroke-dasharray",p.join(",")),(g||r)&&a("stroke-dashoffset",g))}for(var b=0;b<R3.length;b++){var w=R3[b];if(e[w]!==B2[w]){var j=e[w]||B2[w];j&&a(X2e[b],j)}}}}var Mq="http://www.w3.org/2000/svg",Eq="http://www.w3.org/1999/xlink",K2e="http://www.w3.org/2000/xmlns/",Q2e="http://www.w3.org/XML/1998/namespace",Z9="ecmeta_";function Dq(a){return document.createElementNS(Mq,a)}function _i(a,e,t,r,n){return{tag:a,attrs:t||{},children:r,text:n,key:e}}function J2e(a,e){var t=[];if(e)for(var r in e){var n=e[r],i=r;n!==!1&&(n!==!0&&n!=null&&(i+='="'+n+'"'),t.push(i))}return"<"+a+" "+t.join(" ")+">"}function e_e(a){return"</"+a+">"}function PM(a,e){e=e||{};var t=e.newline?`
`:"";function r(n){var i=n.children,l=n.tag,o=n.attrs,c=n.text;return J2e(l,o)+(l!=="style"?Ss(c):c||"")+(i?""+t+ct(i,function(d){return r(d)}).join(t)+t:"")+e_e(l)}return r(a)}function t_e(a,e,t){t=t||{};var r=t.newline?`
`:"",n=" {"+r,i=r+"}",l=ct(Ua(a),function(c){return c+n+ct(Ua(a[c]),function(d){return d+":"+a[c][d]+";"}).join(r)+i}).join(r),o=ct(Ua(e),function(c){return"@keyframes "+c+n+ct(Ua(e[c]),function(d){return d+n+ct(Ua(e[c][d]),function(u){var h=e[c][d][u];return u==="d"&&(h='path("'+h+'")'),u+":"+h+";"}).join(r)+i}).join(r)+i}).join(r);return!l&&!o?"":["<![CDATA[",l,o,"]]>"].join(r)}function L3(a){return{zrId:a,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function K9(a,e,t,r){return _i("svg","root",{width:a,height:e,xmlns:Mq,"xmlns:xlink":Eq,version:"1.1",baseProfile:"full",viewBox:r?"0 0 "+a+" "+e:!1},t)}var a_e=0;function Iq(){return a_e++}var Q9={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Lf="transform-origin";function r_e(a,e,t){var r=et({},a.shape);et(r,e),a.buildPath(t,r);var n=new Tq;return n.reset(JG(a)),t.rebuildPath(n,1),n.generateStr(),n.getStr()}function n_e(a,e){var t=e.originX,r=e.originY;(t||r)&&(a[Lf]=t+"px "+r+"px")}var i_e={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Rq(a,e){var t=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[t]=a,t}function s_e(a,e,t){var r=a.shape.paths,n={},i,l;if(se(r,function(c){var d=L3(t.zrId);d.animation=!0,RN(c,{},d,!0);var u=d.cssAnims,h=d.cssNodes,f=Ua(u),p=f.length;if(p){l=f[p-1];var g=u[l];for(var b in g){var w=g[b];n[b]=n[b]||{d:""},n[b].d+=w.d||""}for(var j in h){var k=h[j].animation;k.indexOf(l)>=0&&(i=k)}}}),!!i){e.d=!1;var o=Rq(n,t);return i.replace(l,o)}}function J9(a){return At(a)?Q9[a]?"cubic-bezier("+Q9[a]+")":OT(a)?a:"":""}function RN(a,e,t,r){var n=a.animators,i=n.length,l=[];if(a instanceof _N){var o=s_e(a,e,t);if(o)l.push(o);else if(!i)return}else if(!i)return;for(var c={},d=0;d<i;d++){var u=n[d],h=[u.getMaxTime()/1e3+"s"],f=J9(u.getClip().easing),p=u.getDelay();f?h.push(f):h.push("linear"),p&&h.push(p/1e3+"s"),u.getLoop()&&h.push("infinite");var g=h.join(" ");c[g]=c[g]||[g,[]],c[g][1].push(u)}function b(k){var T=k[1],E=T.length,I={},R={},P={},H="animation-timing-function";function G(Te,ke,Le){for(var Ne=Te.getTracks(),_e=Te.getMaxTime(),Oe=0;Oe<Ne.length;Oe++){var De=Ne[Oe];if(De.needsAnimate()){var Ge=De.keyframes,Ee=De.propName;if(Le&&(Ee=Le(Ee)),Ee)for(var rt=0;rt<Ge.length;rt++){var dt=Ge[rt],wt=Math.round(dt.time/_e*100)+"%",vt=J9(dt.easing),$e=dt.rawValue;(At($e)||Ka($e))&&(ke[wt]=ke[wt]||{},ke[wt][Ee]=dt.rawValue,vt&&(ke[wt][H]=vt))}}}}for(var X=0;X<E;X++){var U=T[X],te=U.targetName;te?te==="shape"&&G(U,R):!r&&G(U,I)}for(var Z in I){var J={};O2(J,a),et(J,I[Z]);var B=eW(J),W=I[Z][H];P[Z]=B?{transform:B}:{},n_e(P[Z],J),W&&(P[Z][H]=W)}var $,Q=!0;for(var Z in R){P[Z]=P[Z]||{};var ne=!$,W=R[Z][H];ne&&($=new Ic);var re=$.len();$.reset(),P[Z].d=r_e(a,R[Z],$);var K=$.len();if(!ne&&re!==K){Q=!1;break}W&&(P[Z][H]=W)}if(!Q)for(var Z in P)delete P[Z].d;if(!r)for(var X=0;X<E;X++){var U=T[X],te=U.targetName;te==="style"&&G(U,P,function(Ne){return i_e[Ne]})}for(var ae=Ua(P),ce=!0,de,X=1;X<ae.length;X++){var he=ae[X-1],pe=ae[X];if(P[he][Lf]!==P[pe][Lf]){ce=!1;break}de=P[he][Lf]}if(ce&&de){for(var Z in P)P[Z][Lf]&&delete P[Z][Lf];e[Lf]=de}if(pr(ae,function(Te){return Ua(P[Te]).length>0}).length){var Re=Rq(P,t);return Re+" "+k[0]+" both"}}for(var w in c){var o=b(c[w]);o&&l.push(o)}if(l.length){var j=t.zrId+"-cls-"+Iq();t.cssNodes["."+j]={animation:l.join(",")},e.class=j}}function l_e(a,e,t){if(!a.ignore)if(a.isSilent()){var r={"pointer-events":"none"};e7(r,e,t)}else{var n=a.states.emphasis&&a.states.emphasis.style?a.states.emphasis.style:{},i=n.fill;if(!i){var l=a.style&&a.style.fill,o=a.states.select&&a.states.select.style&&a.states.select.style.fill,c=a.currentStates.indexOf("select")>=0&&o||l;c&&(i=R4(c))}var d=n.lineWidth;if(d){var u=!n.strokeNoScale&&a.transform?a.transform[0]:1;d=d/u}var r={cursor:"pointer"};i&&(r.fill=i),n.stroke&&(r.stroke=n.stroke),d&&(r["stroke-width"]=d),e7(r,e,t)}}function e7(a,e,t,r){var n=JSON.stringify(a),i=t.cssStyleCache[n];i||(i=t.zrId+"-cls-"+Iq(),t.cssStyleCache[n]=i,t.cssNodes["."+i+":hover"]=a),e.class=e.class?e.class+" "+i:i}var ab=Math.round;function Lq(a){return a&&At(a.src)}function Oq(a){return a&&Yt(a.toDataURL)}function zM(a,e,t,r){Z2e(function(n,i){var l=n==="fill"||n==="stroke";l&&QG(i)?zq(e,a,n,r):l&&PT(i)?Bq(t,a,n,r):a[n]=i,l&&r.ssr&&i==="none"&&(a["pointer-events"]="visible")},e,t,!1),p_e(t,a,r)}function BM(a,e){var t=Pme(e);t&&(t.each(function(r,n){r!=null&&(a[(Z9+n).toLowerCase()]=r+"")}),e.isSilent()&&(a[Z9+"silent"]="true"))}function t7(a){return rh(a[0]-1)&&rh(a[1])&&rh(a[2])&&rh(a[3]-1)}function o_e(a){return rh(a[4])&&rh(a[5])}function FM(a,e,t){if(e&&!(o_e(e)&&t7(e))){var r=1e4;a.transform=t7(e)?"translate("+ab(e[4]*r)/r+" "+ab(e[5]*r)/r+")":ime(e)}}function a7(a,e,t){for(var r=a.points,n=[],i=0;i<r.length;i++)n.push(ab(r[i][0]*t)/t),n.push(ab(r[i][1]*t)/t);e.points=n.join(" ")}function r7(a){return!a.smooth}function c_e(a){var e=ct(a,function(t){return typeof t=="string"?[t,t]:t});return function(t,r,n){for(var i=0;i<e.length;i++){var l=e[i],o=t[l[0]];o!=null&&(r[l[1]]=ab(o*n)/n)}}}var d_e={circle:[c_e(["cx","cy","r"])],polyline:[a7,r7],polygon:[a7,r7]};function u_e(a){for(var e=a.animators,t=0;t<e.length;t++)if(e[t].targetName==="shape")return!0;return!1}function Pq(a,e){var t=a.style,r=a.shape,n=d_e[a.type],i={},l=e.animation,o="path",c=a.style.strokePercent,d=e.compress&&JG(a)||4;if(n&&!e.willUpdate&&!(n[1]&&!n[1](r))&&!(l&&u_e(a))&&!(c<1)){o=a.type;var u=Math.pow(10,d);n[0](r,i,u)}else{var h=!a.path||a.shapeChanged();a.path||a.createPathProxy();var f=a.path;h&&(f.beginPath(),a.buildPath(f,a.shape),a.pathUpdated());var p=f.getVersion(),g=a,b=g.__svgPathBuilder;(g.__svgPathVersion!==p||!b||c!==g.__svgPathStrokePercent)&&(b||(b=g.__svgPathBuilder=new Tq),b.reset(d),f.rebuildPath(b,c),b.generateStr(),g.__svgPathVersion=p,g.__svgPathStrokePercent=c),i.d=b.getStr()}return FM(i,a.transform),zM(i,t,a,e),BM(i,a),e.animation&&RN(a,i,e),e.emphasis&&l_e(a,i,e),_i(o,a.id+"",i)}function h_e(a,e){var t=a.style,r=t.image;if(r&&!At(r)&&(Lq(r)?r=r.src:Oq(r)&&(r=r.toDataURL())),!!r){var n=t.x||0,i=t.y||0,l=t.width,o=t.height,c={href:r,width:l,height:o};return n&&(c.x=n),i&&(c.y=i),FM(c,a.transform),zM(c,t,a,e),BM(c,a),e.animation&&RN(a,c,e),_i("image",a.id+"",c)}}function f_e(a,e){var t=a.style,r=t.text;if(r!=null&&(r+=""),!(!r||isNaN(t.x)||isNaN(t.y))){var n=t.font||Ld,i=t.x||0,l=lme(t.y||0,Ab(n),t.textBaseline),o=sme[t.textAlign]||t.textAlign,c={"dominant-baseline":"central","text-anchor":o};if(EW(t)){var d="",u=t.fontStyle,h=MW(t.fontSize);if(!parseFloat(h))return;var f=t.fontFamily||AG,p=t.fontWeight;d+="font-size:"+h+";font-family:"+f+";",u&&u!=="normal"&&(d+="font-style:"+u+";"),p&&p!=="normal"&&(d+="font-weight:"+p+";"),c.style=d}else c.style="font: "+n;return r.match(/\s/)&&(c["xml:space"]="preserve"),i&&(c.x=i),l&&(c.y=l),FM(c,a.transform),zM(c,t,a,e),BM(c,a),e.animation&&RN(a,c,e),_i("text",a.id+"",c,void 0,r)}}function n7(a,e){if(a instanceof Ra)return Pq(a,e);if(a instanceof Pi)return h_e(a,e);if(a instanceof Ax)return f_e(a,e)}function p_e(a,e,t){var r=a.style;if(ome(r)){var n=cme(a),i=t.shadowCache,l=i[n];if(!l){var o=a.getGlobalScale(),c=o[0],d=o[1];if(!c||!d)return;var u=r.shadowOffsetX||0,h=r.shadowOffsetY||0,f=r.shadowBlur,p=Vv(r.shadowColor),g=p.opacity,b=p.color,w=f/2/c,j=f/2/d,k=w+" "+j;l=t.zrId+"-s"+t.shadowIdx++,t.defs[l]=_i("filter",l,{id:l,x:"-100%",y:"-100%",width:"300%",height:"300%"},[_i("feDropShadow","",{dx:u/c,dy:h/d,stdDeviation:k,"flood-color":b,"flood-opacity":g})]),i[n]=l}e.filter=cN(l)}}function zq(a,e,t,r){var n=a[t],i,l={gradientUnits:n.global?"userSpaceOnUse":"objectBoundingBox"};if(ZG(n))i="linearGradient",l.x1=n.x,l.y1=n.y,l.x2=n.x2,l.y2=n.y2;else if(KG(n))i="radialGradient",l.cx=Ht(n.x,.5),l.cy=Ht(n.y,.5),l.r=Ht(n.r,.5);else return;for(var o=n.colorStops,c=[],d=0,u=o.length;d<u;++d){var h=L4(o[d].offset)*100+"%",f=o[d].color,p=Vv(f),g=p.color,b=p.opacity,w={offset:h};w["stop-color"]=g,b<1&&(w["stop-opacity"]=b),c.push(_i("stop",d+"",w))}var j=_i(i,"",l,c),k=PM(j),T=r.gradientCache,E=T[k];E||(E=r.zrId+"-g"+r.gradientIdx++,T[k]=E,l.id=E,r.defs[E]=_i(i,E,l,c)),e[t]=cN(E)}function Bq(a,e,t,r){var n=a.style[t],i=a.getBoundingRect(),l={},o=n.repeat,c=o==="no-repeat",d=o==="repeat-x",u=o==="repeat-y",h;if(XG(n)){var f=n.imageWidth,p=n.imageHeight,g=void 0,b=n.image;if(At(b)?g=b:Lq(b)?g=b.src:Oq(b)&&(g=b.toDataURL()),typeof Image>"u"){var w="Image width/height must been given explictly in svg-ssr renderer.";us(f,w),us(p,w)}else if(f==null||p==null){var j=function(X,U){if(X){var te=X.elm,Z=f||U.width,J=p||U.height;X.tag==="pattern"&&(d?(J=1,Z/=i.width):u&&(Z=1,J/=i.height)),X.attrs.width=Z,X.attrs.height=J,te&&(te.setAttribute("width",Z),te.setAttribute("height",J))}},k=UT(g,null,a,function(X){c||j(R,X),j(h,X)});k&&k.width&&k.height&&(f=f||k.width,p=p||k.height)}h=_i("image","img",{href:g,width:f,height:p}),l.width=f,l.height=p}else n.svgElement&&(h=Xt(n.svgElement),l.width=n.svgWidth,l.height=n.svgHeight);if(h){var T,E;c?T=E=1:d?(E=1,T=l.width/i.width):u?(T=1,E=l.height/i.height):l.patternUnits="userSpaceOnUse",T!=null&&!isNaN(T)&&(l.width=T),E!=null&&!isNaN(E)&&(l.height=E);var I=eW(n);I&&(l.patternTransform=I);var R=_i("pattern","",l,[h]),P=PM(R),H=r.patternCache,G=H[P];G||(G=r.zrId+"-p"+r.patternIdx++,H[P]=G,l.id=G,R=r.defs[G]=_i("pattern",G,l,[h])),e[t]=cN(G)}}function x_e(a,e,t){var r=t.clipPathCache,n=t.defs,i=r[a.id];if(!i){i=t.zrId+"-c"+t.clipPathIdx++;var l={id:i};r[a.id]=i,n[i]=_i("clipPath",i,l,[Pq(a,t)])}e["clip-path"]=cN(i)}function i7(a){return document.createTextNode(a)}function Hf(a,e,t){a.insertBefore(e,t)}function s7(a,e){a.removeChild(e)}function l7(a,e){a.appendChild(e)}function Fq(a){return a.parentNode}function Vq(a){return a.nextSibling}function _k(a,e){a.textContent=e}var o7=58,m_e=120,g_e=_i("","");function O3(a){return a===void 0}function uc(a){return a!==void 0}function v_e(a,e,t){for(var r={},n=e;n<=t;++n){var i=a[n].key;i!==void 0&&(r[i]=n)}return r}function $g(a,e){var t=a.key===e.key,r=a.tag===e.tag;return r&&t}function rb(a){var e,t=a.children,r=a.tag;if(uc(r)){var n=a.elm=Dq(r);if(VM(g_e,a),lt(t))for(e=0;e<t.length;++e){var i=t[e];i!=null&&l7(n,rb(i))}else uc(a.text)&&!aa(a.text)&&l7(n,i7(a.text))}else a.elm=i7(a.text);return a.elm}function Hq(a,e,t,r,n){for(;r<=n;++r){var i=t[r];i!=null&&Hf(a,rb(i),e)}}function o_(a,e,t,r){for(;t<=r;++t){var n=e[t];if(n!=null)if(uc(n.tag)){var i=Fq(n.elm);s7(i,n.elm)}else s7(a,n.elm)}}function VM(a,e){var t,r=e.elm,n=a&&a.attrs||{},i=e.attrs||{};if(n!==i){for(t in i){var l=i[t],o=n[t];o!==l&&(l===!0?r.setAttribute(t,""):l===!1?r.removeAttribute(t):t==="style"?r.style.cssText=l:t.charCodeAt(0)!==m_e?r.setAttribute(t,l):t==="xmlns:xlink"||t==="xmlns"?r.setAttributeNS(K2e,t,l):t.charCodeAt(3)===o7?r.setAttributeNS(Q2e,t,l):t.charCodeAt(5)===o7?r.setAttributeNS(Eq,t,l):r.setAttribute(t,l))}for(t in n)t in i||r.removeAttribute(t)}}function b_e(a,e,t){for(var r=0,n=0,i=e.length-1,l=e[0],o=e[i],c=t.length-1,d=t[0],u=t[c],h,f,p,g;r<=i&&n<=c;)l==null?l=e[++r]:o==null?o=e[--i]:d==null?d=t[++n]:u==null?u=t[--c]:$g(l,d)?(Yp(l,d),l=e[++r],d=t[++n]):$g(o,u)?(Yp(o,u),o=e[--i],u=t[--c]):$g(l,u)?(Yp(l,u),Hf(a,l.elm,Vq(o.elm)),l=e[++r],u=t[--c]):$g(o,d)?(Yp(o,d),Hf(a,o.elm,l.elm),o=e[--i],d=t[++n]):(O3(h)&&(h=v_e(e,r,i)),f=h[d.key],O3(f)?Hf(a,rb(d),l.elm):(p=e[f],p.tag!==d.tag?Hf(a,rb(d),l.elm):(Yp(p,d),e[f]=void 0,Hf(a,p.elm,l.elm))),d=t[++n]);(r<=i||n<=c)&&(r>i?(g=t[c+1]==null?null:t[c+1].elm,Hq(a,g,t,n,c)):o_(a,e,r,i))}function Yp(a,e){var t=e.elm=a.elm,r=a.children,n=e.children;a!==e&&(VM(a,e),O3(e.text)?uc(r)&&uc(n)?r!==n&&b_e(t,r,n):uc(n)?(uc(a.text)&&_k(t,""),Hq(t,null,n,0,n.length-1)):uc(r)?o_(t,r,0,r.length-1):uc(a.text)&&_k(t,""):a.text!==e.text&&(uc(r)&&o_(t,r,0,r.length-1),_k(t,e.text)))}function y_e(a,e){if($g(a,e))Yp(a,e);else{var t=a.elm,r=Fq(t);rb(e),r!==null&&(Hf(r,e.elm,Vq(t)),o_(r,[a],0,0))}return e}var w_e=0,__e=(function(){function a(e,t,r){if(this.type="svg",this.refreshHover=c7(),this.configLayer=c7(),this.storage=t,this._opts=r=et({},r),this.root=e,this._id="zr"+w_e++,this._oldVNode=K9(r.width,r.height),e&&!r.ssr){var n=this._viewport=document.createElement("div");n.style.cssText="position:relative;overflow:hidden";var i=this._svgDom=this._oldVNode.elm=Dq("svg");VM(null,this._oldVNode),n.appendChild(i),e.appendChild(n)}this.resize(r.width,r.height)}return a.prototype.getType=function(){return this.type},a.prototype.getViewportRoot=function(){return this._viewport},a.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},a.prototype.getSvgDom=function(){return this._svgDom},a.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",y_e(this._oldVNode,e),this._oldVNode=e}},a.prototype.renderOneToVNode=function(e){return n7(e,L3(this._id))},a.prototype.renderToVNode=function(e){e=e||{};var t=this.storage.getDisplayList(!0),r=this._width,n=this._height,i=L3(this._id);i.animation=e.animation,i.willUpdate=e.willUpdate,i.compress=e.compress,i.emphasis=e.emphasis,i.ssr=this._opts.ssr;var l=[],o=this._bgVNode=N_e(r,n,this._backgroundColor,i);o&&l.push(o);var c=e.compress?null:this._mainVNode=_i("g","main",{},[]);this._paintList(t,i,c?c.children:l),c&&l.push(c);var d=ct(Ua(i.defs),function(f){return i.defs[f]});if(d.length&&l.push(_i("defs","defs",{},d)),e.animation){var u=t_e(i.cssNodes,i.cssAnims,{newline:!0});if(u){var h=_i("style","stl",{},[],u);l.push(h)}}return K9(r,n,l,e.useViewBox)},a.prototype.renderToString=function(e){return e=e||{},PM(this.renderToVNode({animation:Ht(e.cssAnimation,!0),emphasis:Ht(e.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:Ht(e.useViewBox,!0)}),{newline:!0})},a.prototype.setBackgroundColor=function(e){this._backgroundColor=e},a.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},a.prototype._paintList=function(e,t,r){for(var n=e.length,i=[],l=0,o,c,d=0,u=0;u<n;u++){var h=e[u];if(!h.invisible){var f=h.__clipPaths,p=f&&f.length||0,g=c&&c.length||0,b=void 0;for(b=Math.max(p-1,g-1);b>=0&&!(f&&c&&f[b]===c[b]);b--);for(var w=g-1;w>b;w--)l--,o=i[l-1];for(var j=b+1;j<p;j++){var k={};x_e(f[j],k,t);var T=_i("g","clip-g-"+d++,k,[]);(o?o.children:r).push(T),i[l++]=T,o=T}c=f;var E=n7(h,t);E&&(o?o.children:r).push(E)}}},a.prototype.resize=function(e,t){var r=this._opts,n=this.root,i=this._viewport;if(e!=null&&(r.width=e),t!=null&&(r.height=t),n&&i&&(i.style.display="none",e=rx(n,0,r),t=rx(n,1,r),i.style.display=""),this._width!==e||this._height!==t){if(this._width=e,this._height=t,i){var l=i.style;l.width=e+"px",l.height=t+"px"}if(PT(this._backgroundColor))this.refresh();else{var o=this._svgDom;o&&(o.setAttribute("width",e),o.setAttribute("height",t));var c=this._bgVNode&&this._bgVNode.elm;c&&(c.setAttribute("width",e),c.setAttribute("height",t))}}},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},a.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},a.prototype.toDataURL=function(e){var t=this.renderToString(),r="data:image/svg+xml;";return e?(t=ume(t),t&&r+"base64,"+t):r+"charset=UTF-8,"+encodeURIComponent(t)},a})();function c7(a){return function(){}}function N_e(a,e,t,r){var n;if(t&&t!=="none")if(n=_i("rect","bg",{width:a,height:e,x:"0",y:"0"}),QG(t))zq({fill:t},n.attrs,"fill",r);else if(PT(t))Bq({style:{fill:t},dirty:Bn,getBoundingRect:function(){return{width:a,height:e}}},n.attrs,"fill",r);else{var i=Vv(t),l=i.color,o=i.opacity;n.attrs.fill=l,o<1&&(n.attrs["fill-opacity"]=o)}return n}function j_e(a){a.registerPainter("svg",__e)}function d7(a,e,t){var r=Do.createCanvas(),n=e.getWidth(),i=e.getHeight(),l=r.style;return l&&(l.position="absolute",l.left="0",l.top="0",l.width=n+"px",l.height=i+"px",r.setAttribute("data-zr-dom-id",a)),r.width=n*t,r.height=i*t,r}var Nk=(function(a){Ie(e,a);function e(t,r,n){var i=a.call(this)||this;i.motionBlur=!1,i.lastFrameAlpha=.7,i.dpr=1,i.virtual=!1,i.config={},i.incremental=!1,i.zlevel=0,i.maxRepaintRectCount=5,i.__dirty=!0,i.__firstTimePaint=!0,i.__used=!1,i.__drawIndex=0,i.__startIndex=0,i.__endIndex=0,i.__prevStartIndex=null,i.__prevEndIndex=null;var l;n=n||L2,typeof t=="string"?l=d7(t,r,n):aa(t)&&(l=t,t=l.id),i.id=t,i.dom=l;var o=l.style;return o&&(RG(l),l.onselectstart=function(){return!1},o.padding="0",o.margin="0",o.borderWidth="0"),i.painter=r,i.dpr=n,i}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=d7("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,r,n,i){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var l=[],o=this.maxRepaintRectCount,c=!1,d=new ra(0,0,0,0);function u(k){if(!(!k.isFinite()||k.isZero()))if(l.length===0){var T=new ra(0,0,0,0);T.copy(k),l.push(T)}else{for(var E=!1,I=1/0,R=0,P=0;P<l.length;++P){var H=l[P];if(H.intersect(k)){var G=new ra(0,0,0,0);G.copy(H),G.union(k),l[P]=G,E=!0;break}else if(c){d.copy(k),d.union(H);var X=k.width*k.height,U=H.width*H.height,te=d.width*d.height,Z=te-X-U;Z<I&&(I=Z,R=P)}}if(c&&(l[R].union(k),E=!0),!E){var T=new ra(0,0,0,0);T.copy(k),l.push(T)}c||(c=l.length>=o)}}for(var h=this.__startIndex;h<this.__endIndex;++h){var f=t[h];if(f){var p=f.shouldBePainted(n,i,!0,!0),g=f.__isRendered&&(f.__dirty&wl||!p)?f.getPrevPaintRect():null;g&&u(g);var b=p&&(f.__dirty&wl||!f.__isRendered)?f.getPaintRect():null;b&&u(b)}}for(var h=this.__prevStartIndex;h<this.__prevEndIndex;++h){var f=r[h],p=f&&f.shouldBePainted(n,i,!0,!0);if(f&&(!p||!f.__zr)&&f.__isRendered){var g=f.getPrevPaintRect();g&&u(g)}}var w;do{w=!1;for(var h=0;h<l.length;){if(l[h].isZero()){l.splice(h,1);continue}for(var j=h+1;j<l.length;)l[h].intersect(l[j])?(w=!0,l[h].union(l[j]),l.splice(j,1)):j++;h++}}while(w);return this._paintRects=l,l},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,r){var n=this.dpr,i=this.dom,l=i.style,o=this.domBack;l&&(l.width=t+"px",l.height=r+"px"),i.width=t*n,i.height=r*n,o&&(o.width=t*n,o.height=r*n,n!==1&&this.ctxBack.scale(n,n))},e.prototype.clear=function(t,r,n){var i=this.dom,l=this.ctx,o=i.width,c=i.height;r=r||this.clearColor;var d=this.motionBlur&&!t,u=this.lastFrameAlpha,h=this.dpr,f=this;d&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,o/h,c/h));var p=this.domBack;function g(b,w,j,k){if(l.clearRect(b,w,j,k),r&&r!=="transparent"){var T=void 0;if(nN(r)){var E=r.global||r.__width===j&&r.__height===k;T=E&&r.__canvasGradient||b3(l,r,{x:0,y:0,width:j,height:k}),r.__canvasGradient=T,r.__width=j,r.__height=k}else mxe(r)&&(r.scaleX=r.scaleX||h,r.scaleY=r.scaleY||h,T=y3(l,r,{dirty:function(){f.setUnpainted(),f.painter.refresh()}}));l.save(),l.fillStyle=T||r,l.fillRect(b,w,j,k),l.restore()}d&&(l.save(),l.globalAlpha=u,l.drawImage(p,b,w,j,k),l.restore())}!n||d?g(0,0,o,c):n.length&&se(n,function(b){g(b.x*h,b.y*h,b.width*h,b.height*h)})},e})(co),u7=1e5,Tf=314159,Xy=.01,S_e=.001;function k_e(a){return a?a.__builtin__?!0:!(typeof a.resize!="function"||typeof a.refresh!="function"):!1}function C_e(a,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+a+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var A_e=(function(){function a(e,t,r,n){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var i=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=et({},r||{}),this.dpr=r.devicePixelRatio||L2,this._singleCanvas=i,this.root=e;var l=e.style;l&&(RG(e),e.innerHTML=""),this.storage=t;var o=this._zlevelList;this._prevDisplayList=[];var c=this._layers;if(i){var u=e,h=u.width,f=u.height;r.width!=null&&(h=r.width),r.height!=null&&(f=r.height),this.dpr=r.devicePixelRatio||1,u.width=h*this.dpr,u.height=f*this.dpr,this._width=h,this._height=f;var p=new Nk(u,this,this.dpr);p.__builtin__=!0,p.initContext(),c[Tf]=p,p.zlevel=Tf,o.push(Tf),this._domRoot=e}else{this._width=rx(e,0,r),this._height=rx(e,1,r);var d=this._domRoot=C_e(this._width,this._height);e.appendChild(d)}}return a.prototype.getType=function(){return"canvas"},a.prototype.isSingleCanvas=function(){return this._singleCanvas},a.prototype.getViewportRoot=function(){return this._domRoot},a.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},a.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),r=this._prevDisplayList,n=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,r,e,this._redrawId);for(var i=0;i<n.length;i++){var l=n[i],o=this._layers[l];if(!o.__builtin__&&o.refresh){var c=i===0?this._backgroundColor:null;o.refresh(c)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},a.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},a.prototype._paintHoverList=function(e){var t=e.length,r=this._hoverlayer;if(r&&r.clear(),!!t){for(var n={inHover:!0,viewWidth:this._width,viewHeight:this._height},i,l=0;l<t;l++){var o=e[l];o.__inHover&&(r||(r=this._hoverlayer=this.getLayer(u7)),i||(i=r.ctx,i.save()),Jf(i,o,n,l===t-1))}i&&i.restore()}},a.prototype.getHoverLayer=function(){return this.getLayer(u7)},a.prototype.paintOne=function(e,t){w$(e,t)},a.prototype._paintList=function(e,t,r,n){if(this._redrawId===n){r=r||!1,this._updateLayerStatus(e);var i=this._doPaintList(e,t,r),l=i.finished,o=i.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),o&&this._paintHoverList(e),l)this.eachLayer(function(d){d.afterBrush&&d.afterBrush()});else{var c=this;T2(function(){c._paintList(e,t,r,n)})}}},a.prototype._compositeManually=function(){var e=this.getLayer(Tf).ctx,t=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,t,r),this.eachBuiltinLayer(function(n){n.virtual&&e.drawImage(n.dom,0,0,t,r)})},a.prototype._doPaintList=function(e,t,r){for(var n=this,i=[],l=this._opts.useDirtyRect,o=0;o<this._zlevelList.length;o++){var c=this._zlevelList[o],d=this._layers[c];d.__builtin__&&d!==this._hoverlayer&&(d.__dirty||r)&&i.push(d)}for(var u=!0,h=!1,f=function(b){var w=i[b],j=w.ctx,k=l&&w.createRepaintRects(e,t,p._width,p._height),T=r?w.__startIndex:w.__drawIndex,E=!r&&w.incremental&&Date.now,I=E&&Date.now(),R=w.zlevel===p._zlevelList[0]?p._backgroundColor:null;if(w.__startIndex===w.__endIndex)w.clear(!1,R,k);else if(T===w.__startIndex){var P=e[T];(!P.incremental||!P.notClear||r)&&w.clear(!1,R,k)}T===-1&&(console.error("For some unknown reason. drawIndex is -1"),T=w.__startIndex);var H,G=function(Z){var J={inHover:!1,allClipped:!1,prevEl:null,viewWidth:n._width,viewHeight:n._height};for(H=T;H<w.__endIndex;H++){var B=e[H];if(B.__inHover&&(h=!0),n._doPaintEl(B,w,l,Z,J,H===w.__endIndex-1),E){var W=Date.now()-I;if(W>15)break}}J.prevElClipPaths&&j.restore()};if(k)if(k.length===0)H=w.__endIndex;else for(var X=p.dpr,U=0;U<k.length;++U){var te=k[U];j.save(),j.beginPath(),j.rect(te.x*X,te.y*X,te.width*X,te.height*X),j.clip(),G(te),j.restore()}else j.save(),G(),j.restore();w.__drawIndex=H,w.__drawIndex<w.__endIndex&&(u=!1)},p=this,g=0;g<i.length;g++)f(g);return Ba.wxa&&se(this._layers,function(b){b&&b.ctx&&b.ctx.draw&&b.ctx.draw()}),{finished:u,needsRefreshHover:h}},a.prototype._doPaintEl=function(e,t,r,n,i,l){var o=t.ctx;if(r){var c=e.getPaintRect();(!n||c&&c.intersect(n))&&(Jf(o,e,i,l),e.setPrevPaintRect(c))}else Jf(o,e,i,l)},a.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Tf);var r=this._layers[e];return r||(r=new Nk("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?Ca(r,this._layerConfig[e],!0):this._layerConfig[e-Xy]&&Ca(r,this._layerConfig[e-Xy],!0),t&&(r.virtual=t),this.insertLayer(e,r),r.initContext()),r},a.prototype.insertLayer=function(e,t){var r=this._layers,n=this._zlevelList,i=n.length,l=this._domRoot,o=null,c=-1;if(!r[e]&&k_e(t)){if(i>0&&e>n[0]){for(c=0;c<i-1&&!(n[c]<e&&n[c+1]>e);c++);o=r[n[c]]}if(n.splice(c+1,0,e),r[e]=t,!t.virtual)if(o){var d=o.dom;d.nextSibling?l.insertBefore(t.dom,d.nextSibling):l.appendChild(t.dom)}else l.firstChild?l.insertBefore(t.dom,l.firstChild):l.appendChild(t.dom);t.painter||(t.painter=this)}},a.prototype.eachLayer=function(e,t){for(var r=this._zlevelList,n=0;n<r.length;n++){var i=r[n];e.call(t,this._layers[i],i)}},a.prototype.eachBuiltinLayer=function(e,t){for(var r=this._zlevelList,n=0;n<r.length;n++){var i=r[n],l=this._layers[i];l.__builtin__&&e.call(t,l,i)}},a.prototype.eachOtherLayer=function(e,t){for(var r=this._zlevelList,n=0;n<r.length;n++){var i=r[n],l=this._layers[i];l.__builtin__||e.call(t,l,i)}},a.prototype.getLayers=function(){return this._layers},a.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(h,f){h.__dirty=h.__used=!1});function t(h){i&&(i.__endIndex!==h&&(i.__dirty=!0),i.__endIndex=h)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var n=e[r];if(n.zlevel!==e[r-1].zlevel||n.incremental){this._needsManuallyCompositing=!0;break}}var i=null,l=0,o,c;for(c=0;c<e.length;c++){var n=e[c],d=n.zlevel,u=void 0;o!==d&&(o=d,l=0),n.incremental?(u=this.getLayer(d+S_e,this._needsManuallyCompositing),u.incremental=!0,l=1):u=this.getLayer(d+(l>0?Xy:0),this._needsManuallyCompositing),u.__builtin__||MT("ZLevel "+d+" has been used by unkown layer "+u.id),u!==i&&(u.__used=!0,u.__startIndex!==c&&(u.__dirty=!0),u.__startIndex=c,u.incremental?u.__drawIndex=-1:u.__drawIndex=c,t(c),i=u),n.__dirty&wl&&!n.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=c))}t(c),this.eachBuiltinLayer(function(h,f){!h.__used&&h.getElementCount()>0&&(h.__dirty=!0,h.__startIndex=h.__endIndex=h.__drawIndex=0),h.__dirty&&h.__drawIndex<0&&(h.__drawIndex=h.__startIndex)})},a.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},a.prototype._clearLayer=function(e){e.clear()},a.prototype.setBackgroundColor=function(e){this._backgroundColor=e,se(this._layers,function(t){t.setUnpainted()})},a.prototype.configLayer=function(e,t){if(t){var r=this._layerConfig;r[e]?Ca(r[e],t,!0):r[e]=t;for(var n=0;n<this._zlevelList.length;n++){var i=this._zlevelList[n];if(i===e||i===e+Xy){var l=this._layers[i];Ca(l,r[e],!0)}}}},a.prototype.delLayer=function(e){var t=this._layers,r=this._zlevelList,n=t[e];n&&(n.dom.parentNode.removeChild(n.dom),delete t[e],r.splice(ja(r,e),1))},a.prototype.resize=function(e,t){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var n=this._opts,i=this.root;if(e!=null&&(n.width=e),t!=null&&(n.height=t),e=rx(i,0,n),t=rx(i,1,n),r.style.display="",this._width!==e||t!==this._height){r.style.width=e+"px",r.style.height=t+"px";for(var l in this._layers)this._layers.hasOwnProperty(l)&&this._layers[l].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(Tf).resize(e,t)}return this},a.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},a.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},a.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[Tf].dom;var t=new Nk("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var r=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var n=t.dom.width,i=t.dom.height;this.eachLayer(function(h){h.__builtin__?r.drawImage(h.dom,0,0,n,i):h.renderToCanvas&&(r.save(),h.renderToCanvas(r),r.restore())})}else for(var l={inHover:!1,viewWidth:this._width,viewHeight:this._height},o=this.storage.getDisplayList(!0),c=0,d=o.length;c<d;c++){var u=o[c];Jf(r,u,l,c===d-1)}return t.dom},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a})();function T_e(a){a.registerPainter("canvas",A_e)}var M_e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t){return $d(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var r=new $t,n=Jn("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);r.add(n),n.setStyle(t.lineStyle);var i=this.getData().getVisual("symbol"),l=this.getData().getVisual("symbolRotate"),o=i==="none"?"circle":i,c=t.itemHeight*.8,d=Jn(o,(t.itemWidth-c)/2,(t.itemHeight-c)/2,c,c,t.itemStyle.fill);r.add(d),d.setStyle(t.itemStyle);var u=t.iconRotate==="inherit"?l:t.iconRotate||0;return d.rotation=u*Math.PI/180,d.setOrigin([t.itemWidth/2,t.itemHeight/2]),o.indexOf("empty")>-1&&(d.style.stroke=d.style.fill,d.style.fill=Be.color.neutral00,d.style.lineWidth=2),r},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:6,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e})(Vr);function Lx(a,e){var t=a.mapDimensionsAll("defaultedLabel"),r=t.length;if(r===1){var n=Mx(a,e,t[0]);return n!=null?n+"":null}else if(r){for(var i=[],l=0;l<t.length;l++)i.push(Mx(a,e,t[l]));return i.join(" ")}}function Uq(a,e){var t=a.mapDimensionsAll("defaultedLabel");if(!lt(e))return e+"";for(var r=[],n=0;n<t.length;n++){var i=a.getDimensionIndex(t[n]);i>=0&&r.push(e[i])}return r.join(" ")}var Fb=(function(a){Ie(e,a);function e(t,r,n,i){var l=a.call(this)||this;return l.updateData(t,r,n,i),l}return e.prototype._createSymbol=function(t,r,n,i,l,o){this.removeAll();var c=Jn(t,-1,-1,2,2,null,o);c.attr({z2:Ht(l,100),culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),c.drift=E_e,this._symbolType=t,this.add(c)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){zd(this.childAt(0))},e.prototype.downplay=function(){Bd(this.childAt(0))},e.prototype.setZ=function(t,r){var n=this.childAt(0);n.zlevel=t,n.z=r},e.prototype.setDraggable=function(t,r){var n=this.childAt(0);n.draggable=t,n.cursor=!r&&t?"move":n.cursor},e.prototype.updateData=function(t,r,n,i){this.silent=!1;var l=t.getItemVisual(r,"symbol")||"circle",o=t.hostModel,c=e.getSymbolSize(t,r),d=e.getSymbolZ2(t,r),u=l!==this._symbolType,h=i&&i.disableAnimation;if(u){var f=t.getItemVisual(r,"symbolKeepAspect");this._createSymbol(l,t,r,c,d,f)}else{var p=this.childAt(0);p.silent=!1;var g={scaleX:c[0]/2,scaleY:c[1]/2};h?p.attr(g):nr(p,g,o,r),lo(p)}if(this._updateCommon(t,r,c,n,i),u){var p=this.childAt(0);if(!h){var g={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:p.style.opacity}};p.scaleX=p.scaleY=0,p.style.opacity=0,en(p,g,o,r)}}h&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,r,n,i,l){var o=this.childAt(0),c=t.hostModel,d,u,h,f,p,g,b,w,j;if(i&&(d=i.emphasisItemStyle,u=i.blurItemStyle,h=i.selectItemStyle,f=i.focus,p=i.blurScope,b=i.labelStatesModels,w=i.hoverScale,j=i.cursorStyle,g=i.emphasisDisabled),!i||t.hasItemOption){var k=i&&i.itemModel?i.itemModel:t.getItemModel(r),T=k.getModel("emphasis");d=T.getModel("itemStyle").getItemStyle(),h=k.getModel(["select","itemStyle"]).getItemStyle(),u=k.getModel(["blur","itemStyle"]).getItemStyle(),f=T.get("focus"),p=T.get("blurScope"),g=T.get("disabled"),b=fi(k),w=T.getShallow("scale"),j=k.getShallow("cursor")}var E=t.getItemVisual(r,"symbolRotate");o.attr("rotation",(E||0)*Math.PI/180||0);var I=P0(t.getItemVisual(r,"symbolOffset"),n);I&&(o.x=I[0],o.y=I[1]),j&&o.attr("cursor",j);var R=t.getItemVisual(r,"style"),P=R.fill;if(o instanceof Pi){var H=o.style;o.useStyle(et({image:H.image,x:H.x,y:H.y,width:H.width,height:H.height},R))}else o.__isEmptyBrush?o.useStyle(et({},R)):o.useStyle(R),o.style.decal=null,o.setColor(P,l&&l.symbolInnerColor),o.style.strokeNoScale=!0;var G=t.getItemVisual(r,"liftZ"),X=this._z2;G!=null?X==null&&(this._z2=o.z2,o.z2+=G):X!=null&&(o.z2=X,this._z2=null);var U=l&&l.useNameLabel;ji(o,b,{labelFetcher:c,labelDataIndex:r,defaultText:te,inheritColor:P,defaultOpacity:R.opacity});function te(B){return U?t.getName(B):Lx(t,B)}this._sizeX=n[0]/2,this._sizeY=n[1]/2;var Z=o.ensureState("emphasis");Z.style=d,o.ensureState("select").style=h,o.ensureState("blur").style=u;var J=w==null||w===!0?Math.max(1.1,3/this._sizeY):isFinite(w)&&w>0?+w:1;Z.scaleX=this._sizeX*J,Z.scaleY=this._sizeY*J,this.setSymbolScale(1),on(this,f,p,g)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,r,n){var i=this.childAt(0),l=la(this).dataIndex,o=n&&n.animation;if(this.silent=i.silent=!0,n&&n.fadeLabel){var c=i.getTextContent();c&&wh(c,{style:{opacity:0}},r,{dataIndex:l,removeOpt:o,cb:function(){i.removeTextContent()}})}else i.removeTextContent();wh(i,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:l,cb:t,removeOpt:o})},e.getSymbolSize=function(t,r){return em(t.getItemVisual(r,"symbolSize"))},e.getSymbolZ2=function(t,r){return t.getItemVisual(r,"z2")},e})($t);function E_e(a,e){this.parent.drift(a,e)}function jk(a,e,t,r){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(r.isIgnore&&r.isIgnore(t))&&!(r.clipShape&&!r.clipShape.contain(e[0],e[1]))&&a.getItemVisual(t,"symbol")!=="none"}function h7(a){return a!=null&&!aa(a)&&(a={isIgnore:a}),a||{}}function f7(a){var e=a.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:fi(e),cursorStyle:e.get("cursor")}}var Vb=(function(){function a(e){this.group=new $t,this._SymbolCtor=e||Fb}return a.prototype.updateData=function(e,t){this._progressiveEls=null,t=h7(t);var r=this.group,n=e.hostModel,i=this._data,l=this._SymbolCtor,o=t.disableAnimation,c=f7(e),d={disableAnimation:o},u=t.getSymbolPoint||function(h){return e.getItemLayout(h)};i||r.removeAll(),e.diff(i).add(function(h){var f=u(h);if(jk(e,f,h,t)){var p=new l(e,h,c,d);p.setPosition(f),e.setItemGraphicEl(h,p),r.add(p)}}).update(function(h,f){var p=i.getItemGraphicEl(f),g=u(h);if(!jk(e,g,h,t)){r.remove(p);return}var b=e.getItemVisual(h,"symbol")||"circle",w=p&&p.getSymbolType&&p.getSymbolType();if(!p||w&&w!==b)r.remove(p),p=new l(e,h,c,d),p.setPosition(g);else{p.updateData(e,h,c,d);var j={x:g[0],y:g[1]};o?p.attr(j):nr(p,j,n)}r.add(p),e.setItemGraphicEl(h,p)}).remove(function(h){var f=i.getItemGraphicEl(h);f&&f.fadeOut(function(){r.remove(f)},n)}).execute(),this._getSymbolPoint=u,this._data=e},a.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(r,n){var i=e._getSymbolPoint(n);r.setPosition(i),r.markRedraw()})},a.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=f7(e),this._data=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(e,t,r){this._progressiveEls=[],r=h7(r);function n(c){c.isGroup||(c.incremental=!0,c.ensureState("emphasis").hoverLayer=!0)}for(var i=e.start;i<e.end;i++){var l=t.getItemLayout(i);if(jk(t,l,i,r)){var o=new this._SymbolCtor(t,i,this._seriesScope);o.traverse(n),o.setPosition(l),this.group.add(o),t.setItemGraphicEl(i,o),this._progressiveEls.push(o)}}},a.prototype.eachRendered=function(e){Eh(this._progressiveEls||this.group,e)},a.prototype.remove=function(e){var t=this.group,r=this._data;r&&e?r.eachItemGraphicEl(function(n){n.fadeOut(function(){t.remove(n)},r.hostModel)}):t.removeAll()},a})();function Gq(a,e,t){var r=a.getBaseAxis(),n=a.getOtherAxis(r),i=D_e(n,t),l=r.dim,o=n.dim,c=e.mapDimension(o),d=e.mapDimension(l),u=o==="x"||o==="radius"?1:0,h=ct(a.dimensions,function(g){return e.mapDimension(g)}),f=!1,p=e.getCalculationInfo("stackResultDimension");return _h(e,h[0])&&(f=!0,h[0]=p),_h(e,h[1])&&(f=!0,h[1]=p),{dataDimsForPoint:h,valueStart:i,valueAxisDim:o,baseAxisDim:l,stacked:!!f,valueDim:c,baseDim:d,baseDataOffset:u,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function D_e(a,e){var t=0,r=a.scale.getExtent();return e==="start"?t=r[0]:e==="end"?t=r[1]:Ka(e)&&!isNaN(e)?t=e:r[0]>0?t=r[0]:r[1]<0&&(t=r[1]),t}function Wq(a,e,t,r){var n=NaN;a.stacked&&(n=t.get(t.getCalculationInfo("stackedOverDimension"),r)),isNaN(n)&&(n=a.valueStart);var i=a.baseDataOffset,l=[];return l[i]=t.get(a.baseDim,r),l[1-i]=n,e.dataToPoint(l)}function I_e(a,e){var t=[];return e.diff(a).add(function(r){t.push({cmd:"+",idx:r})}).update(function(r,n){t.push({cmd:"=",idx:n,idx1:r})}).remove(function(r){t.push({cmd:"-",idx:r})}).execute(),t}function R_e(a,e,t,r,n,i,l,o){for(var c=I_e(a,e),d=[],u=[],h=[],f=[],p=[],g=[],b=[],w=Gq(n,e,l),j=a.getLayout("points")||[],k=e.getLayout("points")||[],T=0;T<c.length;T++){var E=c[T],I=!0,R=void 0,P=void 0;switch(E.cmd){case"=":R=E.idx*2,P=E.idx1*2;var H=j[R],G=j[R+1],X=k[P],U=k[P+1];(isNaN(H)||isNaN(G))&&(H=X,G=U),d.push(H,G),u.push(X,U),h.push(t[R],t[R+1]),f.push(r[P],r[P+1]),b.push(e.getRawIndex(E.idx1));break;case"+":var te=E.idx,Z=w.dataDimsForPoint,J=n.dataToPoint([e.get(Z[0],te),e.get(Z[1],te)]);P=te*2,d.push(J[0],J[1]),u.push(k[P],k[P+1]);var B=Wq(w,n,e,te);h.push(B[0],B[1]),f.push(r[P],r[P+1]),b.push(e.getRawIndex(te));break;case"-":I=!1}I&&(p.push(E),g.push(g.length))}g.sort(function(he,pe){return b[he]-b[pe]});for(var W=d.length,$=vc(W),Q=vc(W),ne=vc(W),re=vc(W),K=[],T=0;T<g.length;T++){var ae=g[T],ce=T*2,de=ae*2;$[ce]=d[de],$[ce+1]=d[de+1],Q[ce]=u[de],Q[ce+1]=u[de+1],ne[ce]=h[de],ne[ce+1]=h[de+1],re[ce]=f[de],re[ce+1]=f[de+1],K[T]=p[ae]}return{current:$,next:Q,stackedOnCurrent:ne,stackedOnNext:re,status:K}}var Lu=Math.min,Ou=Math.max;function h0(a,e){return isNaN(a)||isNaN(e)}function P3(a,e,t,r,n,i,l,o,c){for(var d,u,h,f,p,g,b=t,w=0;w<r;w++){var j=e[b*2],k=e[b*2+1];if(b>=n||b<0)break;if(h0(j,k)){if(c){b+=i;continue}break}if(b===t)a[i>0?"moveTo":"lineTo"](j,k),h=j,f=k;else{var T=j-d,E=k-u;if(T*T+E*E<.5){b+=i;continue}if(l>0){for(var I=b+i,R=e[I*2],P=e[I*2+1];R===j&&P===k&&w<r;)w++,I+=i,b+=i,R=e[I*2],P=e[I*2+1],j=e[b*2],k=e[b*2+1],T=j-d,E=k-u;var H=w+1;if(c)for(;h0(R,P)&&H<r;)H++,I+=i,R=e[I*2],P=e[I*2+1];var G=.5,X=0,U=0,te=void 0,Z=void 0;if(H>=r||h0(R,P))p=j,g=k;else{X=R-d,U=P-u;var J=j-d,B=R-j,W=k-u,$=P-k,Q=void 0,ne=void 0;if(o==="x"){Q=Math.abs(J),ne=Math.abs(B);var re=X>0?1:-1;p=j-re*Q*l,g=k,te=j+re*ne*l,Z=k}else if(o==="y"){Q=Math.abs(W),ne=Math.abs($);var K=U>0?1:-1;p=j,g=k-K*Q*l,te=j,Z=k+K*ne*l}else Q=Math.sqrt(J*J+W*W),ne=Math.sqrt(B*B+$*$),G=ne/(ne+Q),p=j-X*l*(1-G),g=k-U*l*(1-G),te=j+X*l*G,Z=k+U*l*G,te=Lu(te,Ou(R,j)),Z=Lu(Z,Ou(P,k)),te=Ou(te,Lu(R,j)),Z=Ou(Z,Lu(P,k)),X=te-j,U=Z-k,p=j-X*Q/ne,g=k-U*Q/ne,p=Lu(p,Ou(d,j)),g=Lu(g,Ou(u,k)),p=Ou(p,Lu(d,j)),g=Ou(g,Lu(u,k)),X=j-p,U=k-g,te=j+X*ne/Q,Z=k+U*ne/Q}a.bezierCurveTo(h,f,p,g,j,k),h=te,f=Z}else a.lineTo(j,k)}d=j,u=k,b+=i}return w}var Yq=(function(){function a(){this.smooth=0,this.smoothConstraint=!0}return a})(),L_e=(function(a){Ie(e,a);function e(t){var r=a.call(this,t)||this;return r.type="ec-polyline",r}return e.prototype.getDefaultStyle=function(){return{stroke:Be.color.neutral99,fill:null}},e.prototype.getDefaultShape=function(){return new Yq},e.prototype.buildPath=function(t,r){var n=r.points,i=0,l=n.length/2;if(r.connectNulls){for(;l>0&&h0(n[l*2-2],n[l*2-1]);l--);for(;i<l&&h0(n[i*2],n[i*2+1]);i++);}for(;i<l;)i+=P3(t,n,i,l,l,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},e.prototype.getPointOn=function(t,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n=this.path,i=n.data,l=Ic.CMD,o,c,d=r==="x",u=[],h=0;h<i.length;){var f=i[h++],p=void 0,g=void 0,b=void 0,w=void 0,j=void 0,k=void 0,T=void 0;switch(f){case l.M:o=i[h++],c=i[h++];break;case l.L:if(p=i[h++],g=i[h++],T=d?(t-o)/(p-o):(t-c)/(g-c),T<=1&&T>=0){var E=d?(g-c)*T+c:(p-o)*T+o;return d?[t,E]:[E,t]}o=p,c=g;break;case l.C:p=i[h++],g=i[h++],b=i[h++],w=i[h++],j=i[h++],k=i[h++];var I=d?E2(o,p,b,j,t,u):E2(c,g,w,k,t,u);if(I>0)for(var R=0;R<I;R++){var P=u[R];if(P<=1&&P>=0){var E=d?bi(c,g,w,k,P):bi(o,p,b,j,P);return d?[t,E]:[E,t]}}o=j,c=k;break}}},e})(Ra),O_e=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e})(Yq),$q=(function(a){Ie(e,a);function e(t){var r=a.call(this,t)||this;return r.type="ec-polygon",r}return e.prototype.getDefaultShape=function(){return new O_e},e.prototype.buildPath=function(t,r){var n=r.points,i=r.stackedOnPoints,l=0,o=n.length/2,c=r.smoothMonotone;if(r.connectNulls){for(;o>0&&h0(n[o*2-2],n[o*2-1]);o--);for(;l<o&&h0(n[l*2],n[l*2+1]);l++);}for(;l<o;){var d=P3(t,n,l,o,o,1,r.smooth,c,r.connectNulls);P3(t,i,l+d-1,d,o,-1,r.stackedOnSmooth,c,r.connectNulls),l+=d+1,t.closePath()}},e})(Ra);function qq(a,e,t,r,n){var i=a.getArea(),l=i.x,o=i.y,c=i.width,d=i.height,u=t.get(["lineStyle","width"])||0;l-=u/2,o-=u/2,c+=u,d+=u,c=Math.ceil(c),l!==Math.floor(l)&&(l=Math.floor(l),c++);var h=new Ea({shape:{x:l,y:o,width:c,height:d}});if(e){var f=a.getBaseAxis(),p=f.isHorizontal(),g=f.inverse;p?(g&&(h.shape.x+=c),h.shape.width=0):(g||(h.shape.y+=d),h.shape.height=0);var b=Yt(n)?function(w){n(w,h)}:null;en(h,{shape:{width:c,height:d,x:l,y:o}},t,null,r,b)}return h}function Xq(a,e,t){var r=a.getArea(),n=$n(r.r0,1),i=$n(r.r,1),l=new hs({shape:{cx:$n(a.cx,1),cy:$n(a.cy,1),r0:n,r:i,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(e){var o=a.getBaseAxis().dim==="angle";o?l.shape.endAngle=r.startAngle:l.shape.r=n,en(l,{shape:{endAngle:r.endAngle,r:i}},t)}return l}function Hb(a,e,t,r,n){if(a){if(a.type==="polar")return Xq(a,e,t);if(a.type==="cartesian2d")return qq(a,e,t,r,n)}else return null;return null}function Nh(a,e){return a.type===e}function p7(a,e){if(a.length===e.length){for(var t=0;t<a.length;t++)if(a[t]!==e[t])return;return!0}}function x7(a){for(var e=1/0,t=1/0,r=-1/0,n=-1/0,i=0;i<a.length;){var l=a[i++],o=a[i++];isNaN(l)||(e=Math.min(l,e),r=Math.max(l,r)),isNaN(o)||(t=Math.min(o,t),n=Math.max(o,n))}return[[e,t],[r,n]]}function m7(a,e){var t=x7(a),r=t[0],n=t[1],i=x7(e),l=i[0],o=i[1];return Math.max(Math.abs(r[0]-l[0]),Math.abs(r[1]-l[1]),Math.abs(n[0]-o[0]),Math.abs(n[1]-o[1]))}function g7(a){return Ka(a)?a:a?.5:0}function P_e(a,e,t){if(!t.valueDim)return[];for(var r=e.count(),n=vc(r*2),i=0;i<r;i++){var l=Wq(t,a,e,i);n[i*2]=l[0],n[i*2+1]=l[1]}return n}function Pu(a,e,t,r,n){var i=t.getBaseAxis(),l=i.dim==="x"||i.dim==="radius"?0:1,o=[],c=0,d=[],u=[],h=[],f=[];if(n){for(c=0;c<a.length;c+=2){var p=e||a;!isNaN(p[c])&&!isNaN(p[c+1])&&f.push(a[c],a[c+1])}a=f}for(c=0;c<a.length-2;c+=2)switch(h[0]=a[c+2],h[1]=a[c+3],u[0]=a[c],u[1]=a[c+1],o.push(u[0],u[1]),r){case"end":d[l]=h[l],d[1-l]=u[1-l],o.push(d[0],d[1]);break;case"middle":var g=(u[l]+h[l])/2,b=[];d[l]=b[l]=g,d[1-l]=u[1-l],b[1-l]=h[1-l],o.push(d[0],d[1]),o.push(b[0],b[1]);break;default:d[l]=u[l],d[1-l]=h[1-l],o.push(d[0],d[1])}return o.push(a[c++],a[c++]),o}function z_e(a,e){var t=[],r=a.length,n,i;function l(u,h,f){var p=u.coord,g=(f-p)/(h.coord-p),b=nme(g,[u.color,h.color]);return{coord:f,color:b}}for(var o=0;o<r;o++){var c=a[o],d=c.coord;if(d<0)n=c;else if(d>e){i?t.push(l(i,c,e)):n&&t.push(l(n,c,0),l(n,c,e));break}else n&&(t.push(l(n,c,0)),n=null),t.push(c),i=c}return t}function B_e(a,e,t){var r=a.getVisual("visualMeta");if(!(!r||!r.length||!a.count())&&e.type==="cartesian2d"){for(var n,i,l=r.length-1;l>=0;l--){var o=a.getDimensionInfo(r[l].dimension);if(n=o&&o.coordDim,n==="x"||n==="y"){i=r[l];break}}if(i){var c=e.getAxis(n),d=ct(i.stops,function(T){return{coord:c.toGlobalCoord(c.dataToCoord(T.value)),color:T.color}}),u=d.length,h=i.outerColors.slice();u&&d[0].coord>d[u-1].coord&&(d.reverse(),h.reverse());var f=z_e(d,n==="x"?t.getWidth():t.getHeight()),p=f.length;if(!p&&u)return d[0].coord<0?h[1]?h[1]:d[u-1].color:h[0]?h[0]:d[0].color;var g=10,b=f[0].coord-g,w=f[p-1].coord+g,j=w-b;if(j<.001)return"transparent";se(f,function(T){T.offset=(T.coord-b)/j}),f.push({offset:p?f[p-1].offset:.5,color:h[1]||"transparent"}),f.unshift({offset:p?f[0].offset:.5,color:h[0]||"transparent"});var k=new qx(0,0,0,0,f,!0);return k[n]=b,k[n+"2"]=w,k}}}function F_e(a,e,t){var r=a.get("showAllSymbol"),n=r==="auto";if(!(r&&!n)){var i=t.getAxesByScale("ordinal")[0];if(i&&!(n&&V_e(i,e))){var l=e.mapDimension(i.dim),o={};return se(i.getViewLabels(),function(c){var d=i.scale.getRawOrdinalNumber(c.tickValue);o[d]=1}),function(c){return!o.hasOwnProperty(e.get(l,c))}}}}function V_e(a,e){var t=a.getExtent(),r=Math.abs(t[1]-t[0])/a.scale.count();isNaN(r)&&(r=0);for(var n=e.count(),i=Math.max(1,Math.round(n/5)),l=0;l<n;l+=i)if(Fb.getSymbolSize(e,l)[a.isHorizontal()?1:0]*1.5>r)return!1;return!0}function H_e(a,e){return isNaN(a)||isNaN(e)}function U_e(a){for(var e=a.length/2;e>0&&H_e(a[e*2-2],a[e*2-1]);e--);return e-1}function v7(a,e){return[a[e*2],a[e*2+1]]}function G_e(a,e,t){for(var r=a.length/2,n=t==="x"?0:1,i,l,o=0,c=-1,d=0;d<r;d++)if(l=a[d*2+n],!(isNaN(l)||isNaN(a[d*2+1-n]))){if(d===0){i=l;continue}if(i<=e&&l>=e||i>=e&&l<=e){c=d;break}o=d,i=l}return{range:[o,c],t:(e-i)/(l-i)}}function Zq(a){if(a.get(["endLabel","show"]))return!0;for(var e=0;e<Ms.length;e++)if(a.get([Ms[e],"endLabel","show"]))return!0;return!1}function Sk(a,e,t,r){if(Nh(e,"cartesian2d")){var n=r.getModel("endLabel"),i=n.get("valueAnimation"),l=r.getData(),o={lastFrameIndex:0},c=Zq(r)?function(p,g){a._endLabelOnDuring(p,g,l,o,i,n,e)}:null,d=e.getBaseAxis().isHorizontal(),u=qq(e,t,r,function(){var p=a._endLabel;p&&t&&o.originalX!=null&&p.attr({x:o.originalX,y:o.originalY})},c);if(!r.get("clip",!0)){var h=u.shape,f=Math.max(h.width,h.height);d?(h.y-=f,h.height+=f*2):(h.x-=f,h.width+=f*2)}return c&&c(1,u),u}else return Xq(e,t,r)}function W_e(a,e){var t=e.getBaseAxis(),r=t.isHorizontal(),n=t.inverse,i=r?n?"right":"left":"center",l=r?"middle":n?"top":"bottom";return{normal:{align:a.get("align")||i,verticalAlign:a.get("verticalAlign")||l}}}var Y_e=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.init=function(){var t=new $t,r=new Vb;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=t,this._changePolyState=Tt(this._changePolyState,this)},e.prototype.render=function(t,r,n){var i=t.coordinateSystem,l=this.group,o=t.getData(),c=t.getModel("lineStyle"),d=t.getModel("areaStyle"),u=o.getLayout("points")||[],h=i.type==="polar",f=this._coordSys,p=this._symbolDraw,g=this._polyline,b=this._polygon,w=this._lineGroup,j=!r.ssr&&t.get("animation"),k=!d.isEmpty(),T=d.get("origin"),E=Gq(i,o,T),I=k&&P_e(i,o,E),R=t.get("showSymbol"),P=t.get("connectNulls"),H=R&&!h&&F_e(t,o,i),G=this._data;G&&G.eachItemGraphicEl(function(he,pe){he.__temp&&(l.remove(he),G.setItemGraphicEl(pe,null))}),R||p.remove(),l.add(w);var X=h?!1:t.get("step"),U;i&&i.getArea&&t.get("clip",!0)&&(U=i.getArea(),U.width!=null?(U.x-=.1,U.y-=.1,U.width+=.2,U.height+=.2):U.r0&&(U.r0-=.5,U.r+=.5)),this._clipShapeForSymbol=U;var te=B_e(o,i,n)||o.getVisual("style")[o.getVisual("drawType")];if(!(g&&f.type===i.type&&X===this._step))R&&p.updateData(o,{isIgnore:H,clipShape:U,disableAnimation:!0,getSymbolPoint:function(he){return[u[he*2],u[he*2+1]]}}),j&&this._initSymbolLabelAnimation(o,i,U),X&&(I&&(I=Pu(I,u,i,X,P)),u=Pu(u,null,i,X,P)),g=this._newPolyline(u),k?b=this._newPolygon(u,I):b&&(w.remove(b),b=this._polygon=null),h||this._initOrUpdateEndLabel(t,i,k0(te)),w.setClipPath(Sk(this,i,!0,t));else{k&&!b?b=this._newPolygon(u,I):b&&!k&&(w.remove(b),b=this._polygon=null),h||this._initOrUpdateEndLabel(t,i,k0(te));var Z=w.getClipPath();if(Z){var J=Sk(this,i,!1,t);en(Z,{shape:J.shape},t)}else w.setClipPath(Sk(this,i,!0,t));R&&p.updateData(o,{isIgnore:H,clipShape:U,disableAnimation:!0,getSymbolPoint:function(he){return[u[he*2],u[he*2+1]]}}),(!p7(this._stackedOnPoints,I)||!p7(this._points,u))&&(j?this._doUpdateAnimation(o,I,i,n,X,T,P):(X&&(I&&(I=Pu(I,u,i,X,P)),u=Pu(u,null,i,X,P)),g.setShape({points:u}),b&&b.setShape({points:u,stackedOnPoints:I})))}var B=t.getModel("emphasis"),W=B.get("focus"),$=B.get("blurScope"),Q=B.get("disabled");if(g.useStyle(ta(c.getLineStyle(),{fill:"none",stroke:te,lineJoin:"bevel"})),hi(g,t,"lineStyle"),g.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var ne=g.getState("emphasis").style;ne.lineWidth=+g.style.lineWidth+1}la(g).seriesIndex=t.seriesIndex,on(g,W,$,Q);var re=g7(t.get("smooth")),K=t.get("smoothMonotone");if(g.setShape({smooth:re,smoothMonotone:K,connectNulls:P}),b){var ae=o.getCalculationInfo("stackedOnSeries"),ce=0;b.useStyle(ta(d.getAreaStyle(),{fill:te,opacity:.7,lineJoin:"bevel",decal:o.getVisual("style").decal})),ae&&(ce=g7(ae.get("smooth"))),b.setShape({smooth:re,stackedOnSmooth:ce,smoothMonotone:K,connectNulls:P}),hi(b,t,"areaStyle"),la(b).seriesIndex=t.seriesIndex,on(b,W,$,Q)}var de=this._changePolyState;o.eachItemGraphicEl(function(he){he&&(he.onHoverStateChange=de)}),this._polyline.onHoverStateChange=de,this._data=o,this._coordSys=i,this._stackedOnPoints=I,this._points=u,this._step=X,this._valueOrigin=T,t.get("triggerLineEvent")&&(this.packEventData(t,g),b&&this.packEventData(t,b))},e.prototype.packEventData=function(t,r){la(r).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,r,n,i){var l=t.getData(),o=w0(l,i);if(this._changePolyState("emphasis"),!(o instanceof Array)&&o!=null&&o>=0){var c=l.getLayout("points"),d=l.getItemGraphicEl(o);if(!d){var u=c[o*2],h=c[o*2+1];if(isNaN(u)||isNaN(h)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(u,h))return;var f=t.get("zlevel")||0,p=t.get("z")||0;d=new Fb(l,o),d.x=u,d.y=h,d.setZ(f,p);var g=d.getSymbolPath().getTextContent();g&&(g.zlevel=f,g.z=p,g.z2=this._polyline.z2+1),d.__temp=!0,l.setItemGraphicEl(o,d),d.stopSymbolAnimation(!0),this.group.add(d)}d.highlight()}else Dr.prototype.highlight.call(this,t,r,n,i)},e.prototype.downplay=function(t,r,n,i){var l=t.getData(),o=w0(l,i);if(this._changePolyState("normal"),o!=null&&o>=0){var c=l.getItemGraphicEl(o);c&&(c.__temp?(l.setItemGraphicEl(o,null),this.group.remove(c)):c.downplay())}else Dr.prototype.downplay.call(this,t,r,n,i)},e.prototype._changePolyState=function(t){var r=this._polygon;H2(this._polyline,t),r&&H2(r,t)},e.prototype._newPolyline=function(t){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new L_e({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},e.prototype._newPolygon=function(t,r){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new $q({shape:{points:t,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},e.prototype._initSymbolLabelAnimation=function(t,r,n){var i,l,o=r.getBaseAxis(),c=o.inverse;r.type==="cartesian2d"?(i=o.isHorizontal(),l=!1):r.type==="polar"&&(i=o.dim==="angle",l=!0);var d=t.hostModel,u=d.get("animationDuration");Yt(u)&&(u=u(null));var h=d.get("animationDelay")||0,f=Yt(h)?h(null):h;t.eachItemGraphicEl(function(p,g){var b=p;if(b){var w=[p.x,p.y],j=void 0,k=void 0,T=void 0;if(n)if(l){var E=n,I=r.pointToCoord(w);i?(j=E.startAngle,k=E.endAngle,T=-I[1]/180*Math.PI):(j=E.r0,k=E.r,T=I[0])}else{var R=n;i?(j=R.x,k=R.x+R.width,T=p.x):(j=R.y+R.height,k=R.y,T=p.y)}var P=k===j?0:(T-j)/(k-j);c&&(P=1-P);var H=Yt(h)?h(g):u*P+f,G=b.getSymbolPath(),X=G.getTextContent();b.attr({scaleX:0,scaleY:0}),b.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:H}),X&&X.animateFrom({style:{opacity:0}},{duration:300,delay:H}),G.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,r,n){var i=t.getModel("endLabel");if(Zq(t)){var l=t.getData(),o=this._polyline,c=l.getLayout("points");if(!c){o.removeTextContent(),this._endLabel=null;return}var d=this._endLabel;d||(d=this._endLabel=new tr({z2:200}),d.ignoreClip=!0,o.setTextContent(this._endLabel),o.disableLabelAnimation=!0);var u=U_e(c);u>=0&&(ji(o,fi(t,"endLabel"),{inheritColor:n,labelFetcher:t,labelDataIndex:u,defaultText:function(h,f,p){return p!=null?Uq(l,p):Lx(l,h)},enableTextSetter:!0},W_e(i,r)),o.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,r,n,i,l,o,c){var d=this._endLabel,u=this._polyline;if(d){t<1&&i.originalX==null&&(i.originalX=d.x,i.originalY=d.y);var h=n.getLayout("points"),f=n.hostModel,p=f.get("connectNulls"),g=o.get("precision"),b=o.get("distance")||0,w=c.getBaseAxis(),j=w.isHorizontal(),k=w.inverse,T=r.shape,E=k?j?T.x:T.y+T.height:j?T.x+T.width:T.y,I=(j?b:0)*(k?-1:1),R=(j?0:-b)*(k?-1:1),P=j?"x":"y",H=G_e(h,E,P),G=H.range,X=G[1]-G[0],U=void 0;if(X>=1){if(X>1&&!p){var te=v7(h,G[0]);d.attr({x:te[0]+I,y:te[1]+R}),l&&(U=f.getRawValue(G[0]))}else{var te=u.getPointOn(E,P);te&&d.attr({x:te[0]+I,y:te[1]+R});var Z=f.getRawValue(G[0]),J=f.getRawValue(G[1]);l&&(U=yW(n,g,Z,J,H.t))}i.lastFrameIndex=G[0]}else{var B=t===1||i.lastFrameIndex>0?G[0]:0,te=v7(h,B);l&&(U=f.getRawValue(B)),d.attr({x:te[0]+I,y:te[1]+R})}if(l){var W=Zx(d);typeof W.setLabelText=="function"&&W.setLabelText(U)}}},e.prototype._doUpdateAnimation=function(t,r,n,i,l,o,c){var d=this._polyline,u=this._polygon,h=t.hostModel,f=R_e(this._data,t,this._stackedOnPoints,r,this._coordSys,n,this._valueOrigin),p=f.current,g=f.stackedOnCurrent,b=f.next,w=f.stackedOnNext;if(l&&(g=Pu(f.stackedOnCurrent,f.current,n,l,c),p=Pu(f.current,null,n,l,c),w=Pu(f.stackedOnNext,f.next,n,l,c),b=Pu(f.next,null,n,l,c)),m7(p,b)>3e3||u&&m7(g,w)>3e3){d.stopAnimation(),d.setShape({points:b}),u&&(u.stopAnimation(),u.setShape({points:b,stackedOnPoints:w}));return}d.shape.__points=f.current,d.shape.points=p;var j={shape:{points:b}};f.current!==p&&(j.shape.__points=f.next),d.stopAnimation(),nr(d,j,h),u&&(u.setShape({points:p,stackedOnPoints:g}),u.stopAnimation(),nr(u,{shape:{stackedOnPoints:w}},h),d.shape.points!==u.shape.points&&(u.shape.points=d.shape.points));for(var k=[],T=f.status,E=0;E<T.length;E++){var I=T[E].cmd;if(I==="="){var R=t.getItemGraphicEl(T[E].idx1);R&&k.push({el:R,ptIdx:E})}}d.animators&&d.animators.length&&d.animators[0].during(function(){u&&u.dirtyShape();for(var P=d.shape.__points,H=0;H<k.length;H++){var G=k[H].el,X=k[H].ptIdx*2;G.x=P[X],G.y=P[X+1],G.markRedraw()}})},e.prototype.remove=function(t){var r=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(i,l){i.__temp&&(r.remove(i),n.setItemGraphicEl(l,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e})(Dr);function Ub(a,e){return{seriesType:a,plan:Qx(),reset:function(t){var r=t.getData(),n=t.coordinateSystem,i=t.pipelineContext,l=e||i.large;if(n){var o=ct(n.dimensions,function(p){return r.mapDimension(p)}).slice(0,2),c=o.length,d=r.getCalculationInfo("stackResultDimension");_h(r,o[0])&&(o[0]=d),_h(r,o[1])&&(o[1]=d);var u=r.getStore(),h=r.getDimensionIndex(o[0]),f=r.getDimensionIndex(o[1]);return c&&{progress:function(p,g){for(var b=p.end-p.start,w=l&&vc(b*c),j=[],k=[],T=p.start,E=0;T<p.end;T++){var I=void 0;if(c===1){var R=u.get(h,T);I=n.dataToPoint(R,null,k)}else j[0]=u.get(h,T),j[1]=u.get(f,T),I=n.dataToPoint(j,null,k);l?(w[E++]=I[0],w[E++]=I[1]):g.setItemLayout(T,I.slice())}l&&g.setLayout("points",w)}}}}}}var $_e={average:function(a){for(var e=0,t=0,r=0;r<a.length;r++)isNaN(a[r])||(e+=a[r],t++);return t===0?NaN:e/t},sum:function(a){for(var e=0,t=0;t<a.length;t++)e+=a[t]||0;return e},max:function(a){for(var e=-1/0,t=0;t<a.length;t++)a[t]>e&&(e=a[t]);return isFinite(e)?e:NaN},min:function(a){for(var e=1/0,t=0;t<a.length;t++)a[t]<e&&(e=a[t]);return isFinite(e)?e:NaN},nearest:function(a){return a[0]}},q_e=function(a){return Math.round(a.length/2)};function Kq(a){return{seriesType:a,reset:function(e,t,r){var n=e.getData(),i=e.get("sampling"),l=e.coordinateSystem,o=n.count();if(o>10&&l.type==="cartesian2d"&&i){var c=l.getBaseAxis(),d=l.getOtherAxis(c),u=c.getExtent(),h=r.getDevicePixelRatio(),f=Math.abs(u[1]-u[0])*(h||1),p=Math.round(o/f);if(isFinite(p)&&p>1){i==="lttb"?e.setData(n.lttbDownSample(n.mapDimension(d.dim),1/p)):i==="minmax"&&e.setData(n.minmaxDownSample(n.mapDimension(d.dim),1/p));var g=void 0;At(i)?g=$_e[i]:Yt(i)&&(g=i),g&&e.setData(n.downSample(n.mapDimension(d.dim),1/p,g,q_e))}}}}}function X_e(a){a.registerChartView(Y_e),a.registerSeriesModel(M_e),a.registerLayout(Ub("line",!0)),a.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),r=e.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",r)}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,Kq("line"))}var nb=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return $d(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,r,n){var i=this.coordinateSystem;if(i&&i.clampData){var l=i.clampData(t),o=i.dataToPoint(l);if(n)se(i.getAxes(),function(f,p){if(f.type==="category"&&r!=null){var g=f.getTicksCoords(),b=f.getTickModel().get("alignWithLabel"),w=l[p],j=r[p]==="x1"||r[p]==="y1";if(j&&!b&&(w+=1),g.length<2)return;if(g.length===2){o[p]=f.toGlobalCoord(f.getExtent()[j?1:0]);return}for(var k=void 0,T=void 0,E=1,I=0;I<g.length;I++){var R=g[I].coord,P=I===g.length-1?g[I-1].tickValue+E:g[I].tickValue;if(P===w){T=R;break}else if(P<w)k=R;else if(k!=null&&P>w){T=(R+k)/2;break}I===1&&(E=P-g[0].tickValue)}T==null&&(k?k&&(T=g[g.length-1].coord):T=g[0].coord),o[p]=f.toGlobalCoord(T)}});else{var c=this.getData(),d=c.getLayout("offset"),u=c.getLayout("size"),h=i.getBaseAxis().isHorizontal()?0:1;o[h]+=d+u/2}return o}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",defaultBarGap:"10%"},e})(Vr);Vr.registerClass(nb);var Z_e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(){return $d(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>t&&(t=r),t},e.prototype.brushSelector=function(t,r,n){return n.rect(r.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Dh(nb.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:Be.color.primary,borderWidth:2}},realtimeSort:!1}),e})(nb),K_e=(function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a})(),c_=(function(a){Ie(e,a);function e(t){var r=a.call(this,t)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new K_e},e.prototype.buildPath=function(t,r){var n=r.cx,i=r.cy,l=Math.max(r.r0||0,0),o=Math.max(r.r,0),c=(o-l)*.5,d=l+c,u=r.startAngle,h=r.endAngle,f=r.clockwise,p=Math.PI*2,g=f?h-u<p:u-h<p;g||(u=h-(f?p:-p));var b=Math.cos(u),w=Math.sin(u),j=Math.cos(h),k=Math.sin(h);g?(t.moveTo(b*l+n,w*l+i),t.arc(b*d+n,w*d+i,c,-Math.PI+u,u,!f)):t.moveTo(b*o+n,w*o+i),t.arc(n,i,o,u,h,!f),t.arc(j*d+n,k*d+i,c,h-Math.PI*2,h-Math.PI,!f),l!==0&&t.arc(n,i,l,h,u,f)},e})(Ra);function Q_e(a,e){e=e||{};var t=e.isRoundCap;return function(r,n,i){var l=n.position;if(!l||l instanceof Array)return P2(r,n,i);var o=a(l),c=n.distance!=null?n.distance:5,d=this.shape,u=d.cx,h=d.cy,f=d.r,p=d.r0,g=(f+p)/2,b=d.startAngle,w=d.endAngle,j=(b+w)/2,k=t?Math.abs(f-p)/2:0,T=Math.cos,E=Math.sin,I=u+f*T(b),R=h+f*E(b),P="left",H="top";switch(o){case"startArc":I=u+(p-c)*T(j),R=h+(p-c)*E(j),P="center",H="top";break;case"insideStartArc":I=u+(p+c)*T(j),R=h+(p+c)*E(j),P="center",H="bottom";break;case"startAngle":I=u+g*T(b)+Zy(b,c+k,!1),R=h+g*E(b)+Ky(b,c+k,!1),P="right",H="middle";break;case"insideStartAngle":I=u+g*T(b)+Zy(b,-c+k,!1),R=h+g*E(b)+Ky(b,-c+k,!1),P="left",H="middle";break;case"middle":I=u+g*T(j),R=h+g*E(j),P="center",H="middle";break;case"endArc":I=u+(f+c)*T(j),R=h+(f+c)*E(j),P="center",H="bottom";break;case"insideEndArc":I=u+(f-c)*T(j),R=h+(f-c)*E(j),P="center",H="top";break;case"endAngle":I=u+g*T(w)+Zy(w,c+k,!0),R=h+g*E(w)+Ky(w,c+k,!0),P="left",H="middle";break;case"insideEndAngle":I=u+g*T(w)+Zy(w,-c+k,!0),R=h+g*E(w)+Ky(w,-c+k,!0),P="right",H="middle";break;default:return P2(r,n,i)}return r=r||{},r.x=I,r.y=R,r.align=P,r.verticalAlign=H,r}}function J_e(a,e,t,r){if(Ka(r)){a.setTextConfig({rotation:r});return}else if(lt(e)){a.setTextConfig({rotation:0});return}var n=a.shape,i=n.clockwise?n.startAngle:n.endAngle,l=n.clockwise?n.endAngle:n.startAngle,o=(i+l)/2,c,d=t(e);switch(d){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":c=o;break;case"startAngle":case"insideStartAngle":c=i;break;case"endAngle":case"insideEndAngle":c=l;break;default:a.setTextConfig({rotation:0});return}var u=Math.PI*1.5-c;d==="middle"&&u>Math.PI/2&&u<Math.PI*1.5&&(u-=Math.PI),a.setTextConfig({rotation:u})}function Zy(a,e,t){return e*Math.sin(a)*(t?-1:1)}function Ky(a,e,t){return e*Math.cos(a)*(t?1:-1)}function yc(a,e,t){var r=a.get("borderRadius");if(r==null)return t?{cornerRadius:0}:null;lt(r)||(r=[r,r,r,r]);var n=Math.abs(e.r||0-e.r0||0);return{cornerRadius:ct(r,function(i){return Ro(i,n)})}}var kk=Math.max,Ck=Math.min;function eNe(a,e){var t=a.getArea&&a.getArea();if(Nh(a,"cartesian2d")){var r=a.getBaseAxis();if(r.type!=="category"||!r.onBand){var n=e.getLayout("bandWidth");r.isHorizontal()?(t.x-=n,t.width+=n*2):(t.y-=n,t.height+=n*2)}}return t}var tNe=(function(a){Ie(e,a);function e(){var t=a.call(this)||this;return t.type=e.type,t._isFirstFrame=!0,t}return e.prototype.render=function(t,r,n,i){this._model=t,this._removeOnRenderedListener(n),this._updateDrawMode(t);var l=t.get("coordinateSystem");(l==="cartesian2d"||l==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,r,n):this._renderNormal(t,r,n,i))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,r){this._progressiveEls=[],this._incrementalRenderLarge(t,r)},e.prototype.eachRendered=function(t){Eh(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t,r,n,i){var l=this.group,o=t.getData(),c=this._data,d=t.coordinateSystem,u=d.getBaseAxis(),h;d.type==="cartesian2d"?h=u.isHorizontal():d.type==="polar"&&(h=u.dim==="angle");var f=t.isAnimationEnabled()?t:null,p=aNe(t,d);p&&this._enableRealtimeSort(p,o,n);var g=t.get("clip",!0)||p,b=eNe(d,o);l.removeClipPath();var w=t.get("roundCap",!0),j=t.get("showBackground",!0),k=t.getModel("backgroundStyle"),T=k.get("borderRadius")||0,E=[],I=this._backgroundEls,R=i&&i.isInitSort,P=i&&i.type==="changeAxisOrder";function H(U){var te=Qy[d.type](o,U);if(!te)return null;var Z=cNe(d,h,te);return Z.useStyle(k.getItemStyle()),d.type==="cartesian2d"?Z.setShape("r",T):Z.setShape("cornerRadius",T),E[U]=Z,Z}o.diff(c).add(function(U){var te=o.getItemModel(U),Z=Qy[d.type](o,U,te);if(Z&&(j&&H(U),!(!o.hasValue(U)||!N7[d.type](Z)))){var J=!1;g&&(J=b7[d.type](b,Z));var B=y7[d.type](t,o,U,Z,h,f,u.model,!1,w);p&&(B.forceLabelAnimation=!0),j7(B,o,U,te,Z,t,h,d.type==="polar"),R?B.attr({shape:Z}):p?w7(p,f,B,Z,U,h,!1,!1):en(B,{shape:Z},t,U),o.setItemGraphicEl(U,B),l.add(B),B.ignore=J}}).update(function(U,te){var Z=o.getItemModel(U),J=Qy[d.type](o,U,Z);if(J){if(j){var B=void 0;I.length===0?B=H(te):(B=I[te],B.useStyle(k.getItemStyle()),d.type==="cartesian2d"?B.setShape("r",T):B.setShape("cornerRadius",T),E[U]=B);var W=Qy[d.type](o,U),$=Jq(h,W,d);nr(B,{shape:$},f,U)}var Q=c.getItemGraphicEl(te);if(!o.hasValue(U)||!N7[d.type](J)){l.remove(Q);return}var ne=!1;g&&(ne=b7[d.type](b,J),ne&&l.remove(Q));var re=Q&&(Q.type==="sector"&&w||Q.type==="sausage"&&!w);if(re&&(Q&&Md(Q,t,te),Q=null),Q?lo(Q):Q=y7[d.type](t,o,U,J,h,f,u.model,!0,w),p&&(Q.forceLabelAnimation=!0),P){var K=Q.getTextContent();if(K){var ae=Zx(K);ae.prevValue!=null&&(ae.prevValue=ae.value)}}else j7(Q,o,U,Z,J,t,h,d.type==="polar");R?Q.attr({shape:J}):p?w7(p,f,Q,J,U,h,!0,P):nr(Q,{shape:J},t,U,null),o.setItemGraphicEl(U,Q),Q.ignore=ne,l.add(Q)}}).remove(function(U){var te=c.getItemGraphicEl(U);te&&Md(te,t,U)}).execute();var G=this._backgroundGroup||(this._backgroundGroup=new $t);G.removeAll();for(var X=0;X<E.length;++X)G.add(E[X]);l.add(G),this._backgroundEls=E,this._data=o},e.prototype._renderLarge=function(t,r,n){this._clear(),k7(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,r){this._removeBackground(),k7(r,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var r=t.get("clip",!0)&&Hb(t.coordinateSystem,!1,t),n=this.group;r?n.setClipPath(r):n.removeClipPath()},e.prototype._enableRealtimeSort=function(t,r,n){var i=this;if(r.count()){var l=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,t,n),this._isFirstFrame=!1;else{var o=function(c){var d=r.getItemGraphicEl(c),u=d&&d.shape;return u&&Math.abs(l.isHorizontal()?u.height:u.width)||0};this._onRendered=function(){i._updateSortWithinSameData(r,o,l,n)},n.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,r,n){var i=[];return t.each(t.mapDimension(r.dim),function(l,o){var c=n(o);c=c??NaN,i.push({dataIndex:o,mappedValue:c,ordinalNumber:l})}),i.sort(function(l,o){return o.mappedValue-l.mappedValue}),{ordinalNumbers:ct(i,function(l){return l.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(t,r,n){for(var i=n.scale,l=t.mapDimension(n.dim),o=Number.MAX_VALUE,c=0,d=i.getOrdinalMeta().categories.length;c<d;++c){var u=t.rawIndexOf(l,i.getRawOrdinalNumber(c)),h=u<0?Number.MIN_VALUE:r(t.indexOfRawIndex(u));if(h>o)return!0;o=h}return!1},e.prototype._isOrderDifferentInView=function(t,r){for(var n=r.scale,i=n.getExtent(),l=Math.max(0,i[0]),o=Math.min(i[1],n.getOrdinalMeta().categories.length-1);l<=o;++l)if(t.ordinalNumbers[l]!==n.getRawOrdinalNumber(l))return!0},e.prototype._updateSortWithinSameData=function(t,r,n,i){if(this._isOrderChangedWithinSameData(t,r,n)){var l=this._dataSort(t,n,r);this._isOrderDifferentInView(l,n)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:l}))}},e.prototype._dispatchInitSort=function(t,r,n){var i=r.baseAxis,l=this._dataSort(t,i,function(o){return t.get(t.mapDimension(r.otherAxis.dim),o)});n.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:l})},e.prototype.remove=function(t,r){this._clear(this._model),this._removeOnRenderedListener(r)},e.prototype.dispose=function(t,r){this._removeOnRenderedListener(r)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var r=this.group,n=this._data;t&&t.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(i){Md(i,t,la(i).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e})(Dr),b7={cartesian2d:function(a,e){var t=e.width<0?-1:1,r=e.height<0?-1:1;t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var n=a.x+a.width,i=a.y+a.height,l=kk(e.x,a.x),o=Ck(e.x+e.width,n),c=kk(e.y,a.y),d=Ck(e.y+e.height,i),u=o<l,h=d<c;return e.x=u&&l>n?o:l,e.y=h&&c>i?d:c,e.width=u?0:o-l,e.height=h?0:d-c,t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),u||h},polar:function(a,e){var t=e.r0<=e.r?1:-1;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}var n=Ck(e.r,a.r),i=kk(e.r0,a.r0);e.r=n,e.r0=i;var l=n-i<0;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}return l}},y7={cartesian2d:function(a,e,t,r,n,i,l,o,c){var d=new Ea({shape:et({},r),z2:1});if(d.__dataIndex=t,d.name="item",i){var u=d.shape,h=n?"height":"width";u[h]=0}return d},polar:function(a,e,t,r,n,i,l,o,c){var d=!n&&c?c_:hs,u=new d({shape:r,z2:1});u.name="item";var h=Qq(n);if(u.calculateTextPosition=Q_e(h,{isRoundCap:d===c_}),i){var f=u.shape,p=n?"r":"endAngle",g={};f[p]=n?r.r0:r.startAngle,g[p]=r[p],(o?nr:en)(u,{shape:g},i)}return u}};function aNe(a,e){var t=a.get("realtimeSort",!0),r=e.getBaseAxis();if(t&&r.type==="category"&&e.type==="cartesian2d")return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function w7(a,e,t,r,n,i,l,o){var c,d;i?(d={x:r.x,width:r.width},c={y:r.y,height:r.height}):(d={y:r.y,height:r.height},c={x:r.x,width:r.width}),o||(l?nr:en)(t,{shape:c},e,n,null);var u=e?a.baseAxis.model:null;(l?nr:en)(t,{shape:d},u,n)}function _7(a,e){for(var t=0;t<e.length;t++)if(!isFinite(a[e[t]]))return!0;return!1}var rNe=["x","y","width","height"],nNe=["cx","cy","r","startAngle","endAngle"],N7={cartesian2d:function(a){return!_7(a,rNe)},polar:function(a){return!_7(a,nNe)}},Qy={cartesian2d:function(a,e,t){var r=a.getItemLayout(e);if(!r)return null;var n=t?sNe(t,r):0,i=r.width>0?1:-1,l=r.height>0?1:-1;return{x:r.x+i*n/2,y:r.y+l*n/2,width:r.width-i*n,height:r.height-l*n}},polar:function(a,e,t){var r=a.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function iNe(a){return a.startAngle!=null&&a.endAngle!=null&&a.startAngle===a.endAngle}function Qq(a){return(function(e){var t=e?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+t;default:return r}}})(a)}function j7(a,e,t,r,n,i,l,o){var c=e.getItemVisual(t,"style");if(o){if(!i.get("roundCap")){var u=a.shape,h=yc(r.getModel("itemStyle"),u,!0);et(u,h),a.setShape(u)}}else{var d=r.get(["itemStyle","borderRadius"])||0;a.setShape("r",d)}a.useStyle(c);var f=r.getShallow("cursor");f&&a.attr("cursor",f);var p=o?l?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":l?n.height>=0?"bottom":"top":n.width>=0?"right":"left",g=fi(r);ji(a,g,{labelFetcher:i,labelDataIndex:t,defaultText:Lx(i.getData(),t),inheritColor:c.fill,defaultOpacity:c.opacity,defaultOutsidePosition:p});var b=a.getTextContent();if(o&&b){var w=r.get(["label","position"]);a.textConfig.inside=w==="middle"?!0:null,J_e(a,w==="outside"?p:w,Qq(l),r.get(["label","rotate"]))}sY(b,g,i.getRawValue(t),function(k){return Uq(e,k)});var j=r.getModel(["emphasis"]);on(a,j.get("focus"),j.get("blurScope"),j.get("disabled")),hi(a,r),iNe(n)&&(a.style.fill="none",a.style.stroke="none",se(a.states,function(k){k.style&&(k.style.fill=k.style.stroke="none")}))}function sNe(a,e){var t=a.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var r=a.get(["itemStyle","borderWidth"])||0,n=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),i=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,n,i)}var lNe=(function(){function a(){}return a})(),S7=(function(a){Ie(e,a);function e(t){var r=a.call(this,t)||this;return r.type="largeBar",r}return e.prototype.getDefaultShape=function(){return new lNe},e.prototype.buildPath=function(t,r){for(var n=r.points,i=this.baseDimIdx,l=1-this.baseDimIdx,o=[],c=[],d=this.barWidth,u=0;u<n.length;u+=3)c[i]=d,c[l]=n[u+2],o[i]=n[u+i],o[l]=n[u+l],t.rect(o[0],o[1],c[0],c[1])},e})(Ra);function k7(a,e,t,r){var n=a.getData(),i=n.getLayout("valueAxisHorizontal")?1:0,l=n.getLayout("largeDataIndices"),o=n.getLayout("size"),c=a.getModel("backgroundStyle"),d=n.getLayout("largeBackgroundPoints");if(d){var u=new S7({shape:{points:d},incremental:!!r,silent:!0,z2:0});u.baseDimIdx=i,u.largeDataIndices=l,u.barWidth=o,u.useStyle(c.getItemStyle()),e.add(u),t&&t.push(u)}var h=new S7({shape:{points:n.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=i,h.largeDataIndices=l,h.barWidth=o,e.add(h),h.useStyle(n.getVisual("style")),h.style.stroke=null,la(h).seriesIndex=a.seriesIndex,a.get("silent")||(h.on("mousedown",C7),h.on("mousemove",C7)),t&&t.push(h)}var C7=wM(function(a){var e=this,t=oNe(e,a.offsetX,a.offsetY);la(e).dataIndex=t>=0?t:null},30,!1);function oNe(a,e,t){for(var r=a.baseDimIdx,n=1-r,i=a.shape.points,l=a.largeDataIndices,o=[],c=[],d=a.barWidth,u=0,h=i.length/3;u<h;u++){var f=u*3;if(c[r]=d,c[n]=i[f+2],o[r]=i[f+r],o[n]=i[f+n],c[n]<0&&(o[n]+=c[n],c[n]=-c[n]),e>=o[0]&&e<=o[0]+c[0]&&t>=o[1]&&t<=o[1]+c[1])return l[u]}return-1}function Jq(a,e,t){if(Nh(t,"cartesian2d")){var r=e,n=t.getArea();return{x:a?r.x:n.x,y:a?n.y:r.y,width:a?r.width:n.width,height:a?n.height:r.height}}else{var n=t.getArea(),i=e;return{cx:n.cx,cy:n.cy,r0:a?n.r0:i.r0,r:a?n.r:i.r,startAngle:a?i.startAngle:0,endAngle:a?i.endAngle:Math.PI*2}}}function cNe(a,e,t){var r=a.type==="polar"?hs:Ea;return new r({shape:Jq(e,t,a),silent:!0,z2:0})}function dNe(a){a.registerChartView(tNe),a.registerSeriesModel(Z_e),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,ya(aq,"bar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,rq("bar")),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,Kq("bar")),a.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var r=e.componentType||"series";t.eachComponent({mainType:r,query:e},function(n){e.sortInfo&&n.axis.setCategorySortInfo(e.sortInfo)})})}var A7=Math.PI*2,Jy=Math.PI/180;function uNe(a,e,t){e.eachSeriesByType(a,function(r){var n=r.getData(),i=n.mapDimension("value"),l=CY(r,t),o=l.cx,c=l.cy,d=l.r,u=l.r0,h=l.viewRect,f=-r.get("startAngle")*Jy,p=r.get("endAngle"),g=r.get("padAngle")*Jy;p=p==="auto"?f-A7:-p*Jy;var b=r.get("minAngle")*Jy,w=b+g,j=0;n.each(i,function($){!isNaN($)&&j++});var k=n.getSum(i),T=Math.PI/(k||j)*2,E=r.get("clockwise"),I=r.get("roseType"),R=r.get("stillShowZeroSum"),P=n.getDataExtent(i);P[0]=0;var H=E?1:-1,G=[f,p],X=H*g/2;mN(G,!E),f=G[0],p=G[1];var U=eX(r);U.startAngle=f,U.endAngle=p,U.clockwise=E,U.cx=o,U.cy=c,U.r=d,U.r0=u;var te=Math.abs(p-f),Z=te,J=0,B=f;if(n.setLayout({viewRect:h,r:d}),n.each(i,function($,Q){var ne;if(isNaN($)){n.setItemLayout(Q,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:E,cx:o,cy:c,r0:u,r:I?NaN:d});return}I!=="area"?ne=k===0&&R?T:$*T:ne=te/j,ne<w?(ne=w,Z-=w):J+=$;var re=B+H*ne,K=0,ae=0;g>ne?(K=B+H*ne/2,ae=K):(K=B+X,ae=re-X),n.setItemLayout(Q,{angle:ne,startAngle:K,endAngle:ae,clockwise:E,cx:o,cy:c,r0:u,r:I?fr($,P,[u,d]):d}),B=re}),Z<A7&&j)if(Z<=.001){var W=te/j;n.each(i,function($,Q){if(!isNaN($)){var ne=n.getItemLayout(Q);ne.angle=W;var re=0,K=0;W<g?(re=f+H*(Q+1/2)*W,K=re):(re=f+H*Q*W+X,K=f+H*(Q+1)*W-X),ne.startAngle=re,ne.endAngle=K}})}else T=Z/J,B=f,n.each(i,function($,Q){if(!isNaN($)){var ne=n.getItemLayout(Q),re=ne.angle===w?w:$*T,K=0,ae=0;re<g?(K=B+H*re/2,ae=K):(K=B+X,ae=B+H*re-X),ne.startAngle=K,ne.endAngle=ae,B+=H*re}})})}var eX=Ia();function am(a){return{seriesType:a,reset:function(e,t){var r=t.findComponents({mainType:"legend"});if(!(!r||!r.length)){var n=e.getData();n.filterSelf(function(i){for(var l=n.getName(i),o=0;o<r.length;o++)if(!r[o].isSelected(l))return!1;return!0})}}}}var hNe=Math.PI/180;function T7(a,e,t,r,n,i,l,o,c,d){if(a.length<2)return;function u(b){for(var w=b.rB,j=w*w,k=0;k<b.list.length;k++){var T=b.list[k],E=Math.abs(T.label.y-t),I=r+T.len,R=I*I,P=Math.sqrt(Math.abs((1-E*E/j)*R)),H=e+(P+T.len2)*n,G=H-T.label.x,X=T.targetTextWidth-G*n;tX(T,X,!0),T.label.x=H}}function h(b){for(var w={list:[],maxY:0},j={list:[],maxY:0},k=0;k<b.length;k++)if(b[k].labelAlignTo==="none"){var T=b[k],E=T.label.y>t?j:w,I=Math.abs(T.label.y-t);if(I>=E.maxY){var R=T.label.x-e-T.len2*n,P=r+T.len,H=Math.abs(R)<P?Math.sqrt(I*I/(1-R*R/P/P)):P;E.rB=H,E.maxY=I}E.list.push(T)}u(w),u(j)}for(var f=a.length,p=0;p<f;p++)if(a[p].position==="outer"&&a[p].labelAlignTo==="labelLine"){var g=a[p].label.x-d;a[p].linePoints[1][0]+=g,a[p].label.x=d}I3(a,1,c,c+l)&&h(a)}function fNe(a,e,t,r,n,i,l,o){for(var c=[],d=[],u=Number.MAX_VALUE,h=-Number.MAX_VALUE,f=0;f<a.length;f++){var p=a[f].label;Ak(a[f])||(p.x<e?(u=Math.min(u,p.x),c.push(a[f])):(h=Math.max(h,p.x),d.push(a[f])))}for(var f=0;f<a.length;f++){var g=a[f];if(!Ak(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var p=g.label,b=g.linePoints,w=void 0;g.labelAlignTo==="edge"?p.x<e?w=b[2][0]-g.labelDistance-l-g.edgeDistance:w=l+n-g.edgeDistance-b[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?p.x<e?w=u-l-g.bleedMargin:w=l+n-h-g.bleedMargin:p.x<e?w=p.x-l-g.bleedMargin:w=l+n-p.x-g.bleedMargin,g.targetTextWidth=w,tX(g,w,!1)}}T7(d,e,t,r,1,n,i,l,o,h),T7(c,e,t,r,-1,n,i,l,o,u);for(var f=0;f<a.length;f++){var g=a[f];if(!Ak(g)&&g.linePoints){var p=g.label,b=g.linePoints,j=g.labelAlignTo==="edge",k=p.style.padding,T=k?k[1]+k[3]:0,E=p.style.backgroundColor?0:T,I=g.rect.width+E,R=b[1][0]-b[2][0];j?p.x<e?b[2][0]=l+g.edgeDistance+I+g.labelDistance:b[2][0]=l+n-g.edgeDistance-I-g.labelDistance:(p.x<e?b[2][0]=p.x+g.labelDistance:b[2][0]=p.x-g.labelDistance,b[1][0]=b[2][0]+R),b[1][1]=b[2][1]=p.y}}}function tX(a,e,t){if(a.labelStyleWidth==null){var r=a.label,n=r.style,i=a.rect,l=n.backgroundColor,o=n.padding,c=o?o[1]+o[3]:0,d=n.overflow,u=i.width+(l?0:c);if(e<u||t){if(d&&d.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-c);var h=r.getBoundingRect();r.setStyle("width",Math.ceil(h.width)),r.setStyle("backgroundColor",l)}else{var f=e-c,p=e<u?f:t?f>a.unconstrainedWidth?null:f:null;r.setStyle("width",p)}aX(i,r)}}}function aX(a,e){M7.rect=a,kq(M7,e,pNe)}var pNe={minMarginForce:[null,0,null,0],marginDefault:[1,0,1,0]},M7={};function Ak(a){return a.position==="center"}function xNe(a){var e=a.getData(),t=[],r,n,i=!1,l=(a.get("minShowLabelAngle")||0)*hNe,o=e.getLayout("viewRect"),c=e.getLayout("r"),d=o.width,u=o.x,h=o.y,f=o.height;function p(R){R.ignore=!0}function g(R){if(!R.ignore)return!0;for(var P in R.states)if(R.states[P].ignore===!1)return!0;return!1}e.each(function(R){var P=e.getItemGraphicEl(R),H=P.shape,G=P.getTextContent(),X=P.getTextGuideLine(),U=e.getItemModel(R),te=U.getModel("label"),Z=te.get("position")||U.get(["emphasis","label","position"]),J=te.get("distanceToLabelLine"),B=te.get("alignTo"),W=kt(te.get("edgeDistance"),d),$=te.get("bleedMargin");$==null&&($=Math.min(d,f)>200?10:2);var Q=U.getModel("labelLine"),ne=Q.get("length");ne=kt(ne,d);var re=Q.get("length2");if(re=kt(re,d),Math.abs(H.endAngle-H.startAngle)<l){se(G.states,p),G.ignore=!0,X&&(se(X.states,p),X.ignore=!0);return}if(g(G)){var K=(H.startAngle+H.endAngle)/2,ae=Math.cos(K),ce=Math.sin(K),de,he,pe,Re;r=H.cx,n=H.cy;var Te=Z==="inside"||Z==="inner";if(Z==="center")de=H.cx,he=H.cy,Re="center";else{var ke=(Te?(H.r+H.r0)/2*ae:H.r*ae)+r,Le=(Te?(H.r+H.r0)/2*ce:H.r*ce)+n;if(de=ke+ae*3,he=Le+ce*3,!Te){var Ne=ke+ae*(ne+c-H.r),_e=Le+ce*(ne+c-H.r),Oe=Ne+(ae<0?-1:1)*re,De=_e;B==="edge"?de=ae<0?u+W:u+d-W:de=Oe+(ae<0?-J:J),he=De,pe=[[ke,Le],[Ne,_e],[Oe,De]]}Re=Te?"center":B==="edge"?ae>0?"right":"left":ae>0?"left":"right"}var Ge=Math.PI,Ee=0,rt=te.get("rotate");if(Ka(rt))Ee=rt*(Ge/180);else if(Z==="center")Ee=0;else if(rt==="radial"||rt===!0){var dt=ae<0?-K+Ge:-K;Ee=dt}else if(rt==="tangential"&&Z!=="outside"&&Z!=="outer"){var wt=Math.atan2(ae,ce);wt<0&&(wt=Ge*2+wt);var vt=ce>0;vt&&(wt=Ge+wt),Ee=wt-Ge}if(i=!!Ee,G.x=de,G.y=he,G.rotation=Ee,G.setStyle({verticalAlign:"middle"}),Te){G.setStyle({align:Re});var na=G.states.select;na&&(na.x+=G.x,na.y+=G.y)}else{var $e=new ra(0,0,0,0);aX($e,G),t.push({label:G,labelLine:X,position:Z,len:ne,len2:re,minTurnAngle:Q.get("minTurnAngle"),maxSurfaceAngle:Q.get("maxSurfaceAngle"),surfaceNormal:new Qt(ae,ce),linePoints:pe,textAlign:Re,labelDistance:J,labelAlignTo:B,edgeDistance:W,bleedMargin:$,rect:$e,unconstrainedWidth:$e.width,labelStyleWidth:G.style.width})}P.setTextConfig({inside:Te})}}),!i&&a.get("avoidLabelOverlap")&&fNe(t,r,n,c,d,f,u,h);for(var b=0;b<t.length;b++){var w=t[b],j=w.label,k=w.labelLine,T=isNaN(j.x)||isNaN(j.y);if(j){j.setStyle({align:w.textAlign}),T&&(se(j.states,p),j.ignore=!0);var E=j.states.select;E&&(E.x+=j.x,E.y+=j.y)}if(k){var I=w.linePoints;T||!I?(se(k.states,p),k.ignore=!0):(Nq(I,w.minTurnAngle),L2e(I,w.surfaceNormal,w.maxSurfaceAngle),k.setShape({points:I}),j.__hostTarget.textGuideLineConfig={anchor:new Qt(I[0][0],I[0][1])})}}}var mNe=(function(a){Ie(e,a);function e(t,r,n){var i=a.call(this)||this;i.z2=2;var l=new tr;return i.setTextContent(l),i.updateData(t,r,n,!0),i}return e.prototype.updateData=function(t,r,n,i){var l=this,o=t.hostModel,c=t.getItemModel(r),d=c.getModel("emphasis"),u=t.getItemLayout(r),h=et(yc(c.getModel("itemStyle"),u,!0),u);if(isNaN(h.startAngle)){l.setShape(h);return}if(i){l.setShape(h);var f=o.getShallow("animationType");o.ecModel.ssr?(en(l,{scaleX:0,scaleY:0},o,{dataIndex:r,isFrom:!0}),l.originX=h.cx,l.originY=h.cy):f==="scale"?(l.shape.r=u.r0,en(l,{shape:{r:u.r}},o,r)):n!=null?(l.setShape({startAngle:n,endAngle:n}),en(l,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},o,r)):(l.shape.endAngle=u.startAngle,nr(l,{shape:{endAngle:u.endAngle}},o,r))}else lo(l),nr(l,{shape:h},o,r);l.useStyle(t.getItemVisual(r,"style")),hi(l,c);var p=(u.startAngle+u.endAngle)/2,g=o.get("selectedOffset"),b=Math.cos(p)*g,w=Math.sin(p)*g,j=c.getShallow("cursor");j&&l.attr("cursor",j),this._updateLabel(o,t,r),l.ensureState("emphasis").shape=et({r:u.r+(d.get("scale")&&d.get("scaleSize")||0)},yc(d.getModel("itemStyle"),u)),et(l.ensureState("select"),{x:b,y:w,shape:yc(c.getModel(["select","itemStyle"]),u)}),et(l.ensureState("blur"),{shape:yc(c.getModel(["blur","itemStyle"]),u)});var k=l.getTextGuideLine(),T=l.getTextContent();k&&et(k.ensureState("select"),{x:b,y:w}),et(T.ensureState("select"),{x:b,y:w}),on(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},e.prototype._updateLabel=function(t,r,n){var i=this,l=r.getItemModel(n),o=l.getModel("labelLine"),c=r.getItemVisual(n,"style"),d=c&&c.fill,u=c&&c.opacity;ji(i,fi(l),{labelFetcher:r.hostModel,labelDataIndex:n,inheritColor:d,defaultOpacity:u,defaultText:t.getFormattedLabel(n,"normal")||r.getName(n)});var h=i.getTextContent();i.setTextConfig({position:null,rotation:null}),h.attr({z2:10});var f=l.get(["label","position"]);if(f!=="outside"&&f!=="outer")i.removeTextGuideLine();else{var p=this.getTextGuideLine();p||(p=new Xi,this.setTextGuideLine(p)),RM(this,LM(l),{stroke:d,opacity:jl(o.get(["lineStyle","opacity"]),u,1)})}},e})(hs),gNe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,n,i){var l=t.getData(),o=this._data,c=this.group,d;if(!o&&l.count()>0){for(var u=l.getItemLayout(0),h=1;isNaN(u&&u.startAngle)&&h<l.count();++h)u=l.getItemLayout(h);u&&(d=u.startAngle)}if(this._emptyCircleSector&&c.remove(this._emptyCircleSector),l.count()===0&&t.get("showEmptyCircle")){var f=eX(t),p=new hs({shape:Xt(f)});p.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=p,c.add(p)}l.diff(o).add(function(g){var b=new mNe(l,g,d);l.setItemGraphicEl(g,b),c.add(b)}).update(function(g,b){var w=o.getItemGraphicEl(b);w.updateData(l,g,d),w.off("click"),c.add(w),l.setItemGraphicEl(g,w)}).remove(function(g){var b=o.getItemGraphicEl(g);Md(b,t,g)}).execute(),xNe(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=l)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,r){var n=r.getData(),i=n.getItemLayout(0);if(i){var l=t[0]-i.cx,o=t[1]-i.cy,c=Math.sqrt(l*l+o*o);return c<=i.r&&c>=i.r0}},e.type="pie",e})(Dr);function rm(a,e,t){e=lt(e)&&{coordDimensions:e}||et({encodeDefine:a.getEncode()},e);var r=a.getSource(),n=zb(r,e).dimensions,i=new As(n,a);return i.initData(r,t),i}var nm=(function(){function a(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return a.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},a.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},a.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},a.prototype.getItemVisual=function(e,t){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,t)},a})(),vNe=Ia(),rX=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.init=function(t){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new nm(Tt(this.getData,this),Tt(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.mergeOption=function(){a.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return rm(this,{coordDimensions:["value"],encodeDefaulter:ya(fM,this)})},e.prototype.getDataParams=function(t){var r=this.getData(),n=vNe(r),i=n.seats;if(!i){var l=[];r.each(r.mapDimension("value"),function(c){l.push(c)}),i=n.seats=Hme(l,r.hostModel.get("percentPrecision"))}var o=a.prototype.getDataParams.call(this,t);return o.percent=i[t]||0,o.$vars.push("percent"),o},e.prototype._defaultLabelLine=function(t){y0(t,"labelLine",["show"]);var r=t.labelLine,n=t.emphasis.labelLine;r.show=r.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"50%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,coordinateSystemUsage:"box",left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:30,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e})(Vr);Tbe({fullType:rX.type,getCoord2:function(a){return a.getShallow("center")}});function bNe(a){return{seriesType:a,reset:function(e,t){var r=e.getData();r.filterSelf(function(n){var i=r.mapDimension("value"),l=r.get(i,n);return!(Ka(l)&&!isNaN(l)&&l<0)})}}}function yNe(a){a.registerChartView(gNe),a.registerSeriesModel(rX),v$("pie",a.registerAction),a.registerLayout(ya(uNe,"pie")),a.registerProcessor(am("pie")),a.registerProcessor(bNe("pie"))}var wNe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,r){return $d(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(t,r,n){return n.point(r.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar","matrix"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:Be.color.primary}},universalTransition:{divideShape:"clone"}},e})(Vr),nX=4,_Ne=(function(){function a(){}return a})(),NNe=(function(a){Ie(e,a);function e(t){var r=a.call(this,t)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.getDefaultShape=function(){return new _Ne},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,r){var n=r.points,i=r.size,l=this.symbolProxy,o=l.shape,c=t.getContext?t.getContext():t,d=c&&i[0]<nX,u=this.softClipShape,h;if(d){this._ctx=c;return}for(this._ctx=null,h=this._off;h<n.length;){var f=n[h++],p=n[h++];isNaN(f)||isNaN(p)||u&&!u.contain(f,p)||(o.x=f-i[0]/2,o.y=p-i[1]/2,o.width=i[0],o.height=i[1],l.buildPath(t,o,!0))}this.incremental&&(this._off=h,this.notClear=!0)},e.prototype.afterBrush=function(){var t=this.shape,r=t.points,n=t.size,i=this._ctx,l=this.softClipShape,o;if(i){for(o=this._off;o<r.length;){var c=r[o++],d=r[o++];isNaN(c)||isNaN(d)||l&&!l.contain(c,d)||i.fillRect(c-n[0]/2,d-n[1]/2,n[0],n[1])}this.incremental&&(this._off=o,this.notClear=!0)}},e.prototype.findDataIndex=function(t,r){for(var n=this.shape,i=n.points,l=n.size,o=Math.max(l[0],4),c=Math.max(l[1],4),d=i.length/2-1;d>=0;d--){var u=d*2,h=i[u]-o/2,f=i[u+1]-c/2;if(t>=h&&r>=f&&t<=h+o&&r<=f+c)return d}return-1},e.prototype.contain=function(t,r){var n=this.transformCoordToLocal(t,r),i=this.getBoundingRect();if(t=n[0],r=n[1],i.contain(t,r)){var l=this.hoverDataIdx=this.findDataIndex(t,r);return l>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape,n=r.points,i=r.size,l=i[0],o=i[1],c=1/0,d=1/0,u=-1/0,h=-1/0,f=0;f<n.length;){var p=n[f++],g=n[f++];c=Math.min(p,c),u=Math.max(p,u),d=Math.min(g,d),h=Math.max(g,h)}t=this._rect=new ra(c-l/2,d-o/2,u-c+l,h-d+o)}return t},e})(Ra),jNe=(function(){function a(){this.group=new $t}return a.prototype.updateData=function(e,t){this._clear();var r=this._create();r.setShape({points:e.getLayout("points")}),this._setCommon(r,e,t)},a.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var n=(r.endIndex-r.startIndex)*2,i=r.startIndex*4*2;t=new Float32Array(t.buffer,i,n)}r.setShape("points",t),r.reset()})},a.prototype.incrementalPrepareUpdate=function(e){this._clear()},a.prototype.incrementalUpdate=function(e,t,r){var n=this._newAdded[0],i=t.getLayout("points"),l=n&&n.shape.points;if(l&&l.length<2e4){var o=l.length,c=new Float32Array(o+i.length);c.set(l),c.set(i,o),n.endIndex=e.end,n.setShape({points:c})}else{this._newAdded=[];var d=this._create();d.startIndex=e.start,d.endIndex=e.end,d.incremental=!0,d.setShape({points:i}),this._setCommon(d,t,r)}},a.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},a.prototype._create=function(){var e=new NNe({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},a.prototype._setCommon=function(e,t,r){var n=t.hostModel;r=r||{};var i=t.getVisual("symbolSize");e.setShape("size",i instanceof Array?i:[i,i]),e.softClipShape=r.clipShape||null,e.symbolProxy=Jn(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var l=e.shape.size[0]<nX;e.useStyle(n.getModel("itemStyle").getItemStyle(l?["color","shadowBlur","shadowColor"]:["color"]));var o=t.getVisual("style"),c=o&&o.fill;c&&e.setColor(c);var d=la(e);d.seriesIndex=n.seriesIndex,e.on("mousemove",function(u){d.dataIndex=null;var h=e.hoverDataIdx;h>=0&&(d.dataIndex=h+(e.startIndex||0))})},a.prototype.remove=function(){this._clear()},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a})(),SNe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var i=t.getData(),l=this._updateSymbolDraw(i,t);l.updateData(i,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,r,n){var i=t.getData(),l=this._updateSymbolDraw(i,t);l.incrementalPrepareUpdate(i),this._finished=!1},e.prototype.incrementalRender=function(t,r,n){this._symbolDraw.incrementalUpdate(t,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=t.end===r.getData().count()},e.prototype.updateTransform=function(t,r,n){var i=t.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var l=Ub("").reset(t,r,n);l.progress&&l.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){if(t.get("clip",!0)){var r=t.coordinateSystem;return r&&r.getArea&&r.getArea(.1)}},e.prototype._updateSymbolDraw=function(t,r){var n=this._symbolDraw,i=r.pipelineContext,l=i.large;return(!n||l!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=l?new jNe:new Vb,this._isLargeDraw=l,this.group.removeAll()),this.group.add(n.group),n},e.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e})(Dr),iX={left:0,right:0,top:0,bottom:0},d_=["25%","25%"],kNe=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.mergeDefaultAndTheme=function(t,r){var n=L0(t.outerBounds);a.prototype.mergeDefaultAndTheme.apply(this,arguments),n&&t.outerBounds&&Rc(t.outerBounds,n)},e.prototype.mergeOption=function(t,r){a.prototype.mergeOption.apply(this,arguments),this.option.outerBounds&&t.outerBounds&&Rc(this.option.outerBounds,t.outerBounds)},e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"15%",top:65,right:"10%",bottom:80,containLabel:!1,outerBoundsMode:"auto",outerBounds:iX,outerBoundsContain:"all",outerBoundsClampWidth:d_[0],outerBoundsClampHeight:d_[1],backgroundColor:Be.color.transparent,borderWidth:1,borderColor:Be.color.neutral30},e})(za),z3=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",wn).models[0]},e.type="cartesian2dAxis",e})(za);ei(z3,Bb);var sX={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:Be.color.axisLine,width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15],breakLine:!0},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12,color:Be.color.axisLabel,textMargin:[0,3]},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:Be.color.axisSplitLine,width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:[Be.color.backgroundTint,Be.color.backgroundTransparent]}},breakArea:{show:!0,itemStyle:{color:Be.color.neutral00,borderColor:Be.color.border,borderWidth:1,borderType:[3,3],opacity:.6},zigzagAmplitude:4,zigzagMinSpan:4,zigzagMaxSpan:20,zigzagZ:100,expandOnClick:!0},breakLabelLayout:{moveOverlap:"auto"}},CNe=Ca({boundaryGap:!0,deduplication:null,jitter:0,jitterOverlap:!0,jitterMargin:2,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto",show:"auto"},axisLabel:{interval:"auto"}},sX),HM=Ca({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:Be.color.axisMinorSplitLine,width:1}}},sX),ANe=Ca({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},HM),TNe=ta({logBase:10},HM);const lX={category:CNe,value:HM,time:ANe,log:TNe};var MNe={value:1,category:1,time:1,log:1},B3=null;function ENe(a){B3||(B3=a)}function Gb(){return B3}function Ox(a,e,t,r){se(MNe,function(n,i){var l=Ca(Ca({},lX[i],!0),r,!0),o=(function(c){Ie(d,c);function d(){var u=c!==null&&c.apply(this,arguments)||this;return u.type=e+"Axis."+i,u}return d.prototype.mergeDefaultAndTheme=function(u,h){var f=qv(this),p=f?L0(u):{},g=h.getTheme();Ca(u,g.get(i+"Axis")),Ca(u,this.getDefaultOption()),u.type=E7(u),f&&Rc(u,p,f)},d.prototype.optionUpdated=function(){var u=this.option;u.type==="category"&&(this.__ordinalMeta=eb.createByAxisModel(this))},d.prototype.getCategories=function(u){var h=this.option;if(h.type==="category")return u?h.data:this.__ordinalMeta.categories},d.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},d.prototype.updateAxisBreaks=function(u){var h=Gb();return h?h.updateModelAxisBreak(this,u):{breaks:[]}},d.type=e+"Axis."+i,d.defaultOption=l,d})(t);a.registerComponentModel(o)}),a.registerSubTypeDefaulter(e+"Axis",E7)}function E7(a){return a.type||(a.data?"category":"value")}var DNe=(function(){function a(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return a.prototype.getAxis=function(e){return this._axes[e]},a.prototype.getAxes=function(){return ct(this._dimList,function(e){return this._axes[e]},this)},a.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),pr(this.getAxes(),function(t){return t.scale.type===e})},a.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},a})(),F3=["x","y"];function D7(a){return(a.type==="interval"||a.type==="time")&&!a.hasBreaks()}var INe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=F3,t}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!D7(t)||!D7(r))){var n=t.getExtent(),i=r.getExtent(),l=this.dataToPoint([n[0],i[0]]),o=this.dataToPoint([n[1],i[1]]),c=n[1]-n[0],d=i[1]-i[0];if(!(!c||!d)){var u=(o[0]-l[0])/c,h=(o[1]-l[1])/d,f=l[0]-n[0]*u,p=l[1]-i[0]*h,g=this._transform=[u,0,0,h,f,p];this._invTransform=Io([],g)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var r=this.getAxis("x"),n=this.getAxis("y");return r.contain(r.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,r){var n=this.dataToPoint(t),i=this.dataToPoint(r),l=this.getArea(),o=new ra(n[0],n[1],i[0]-n[0],i[1]-n[1]);return l.intersect(o)},e.prototype.dataToPoint=function(t,r,n){n=n||[];var i=t[0],l=t[1];if(this._transform&&i!=null&&isFinite(i)&&l!=null&&isFinite(l))return Fn(n,t,this._transform);var o=this.getAxis("x"),c=this.getAxis("y");return n[0]=o.toGlobalCoord(o.dataToCoord(i,r)),n[1]=c.toGlobalCoord(c.dataToCoord(l,r)),n},e.prototype.clampData=function(t,r){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,l=n.getExtent(),o=i.getExtent(),c=n.parse(t[0]),d=i.parse(t[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(l[0],l[1]),c),Math.max(l[0],l[1])),r[1]=Math.min(Math.max(Math.min(o[0],o[1]),d),Math.max(o[0],o[1])),r},e.prototype.pointToData=function(t,r,n){if(n=n||[],this._invTransform)return Fn(n,t,this._invTransform);var i=this.getAxis("x"),l=this.getAxis("y");return n[0]=i.coordToData(i.toLocalCoord(t[0]),r),n[1]=l.coordToData(l.toLocalCoord(t[1]),r),n},e.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},e.prototype.getArea=function(t){t=t||0;var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1])-t,l=Math.min(n[0],n[1])-t,o=Math.max(r[0],r[1])-i+t,c=Math.max(n[0],n[1])-l+t;return new ra(i,l,o,c)},e})(DNe),oX=(function(a){Ie(e,a);function e(t,r,n,i,l){var o=a.call(this,t,r,n)||this;return o.index=0,o.type=i||"value",o.position=l||"bottom",o}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.getGlobalExtent=function(t){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),t&&r[0]>r[1]&&r.reverse(),r},e.prototype.pointToData=function(t,r){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),r)},e.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e})(Fo),LN="expandAxisBreak",cX="collapseAxisBreak",dX="toggleAxisBreak",UM="axisbreakchanged",RNe={type:LN,event:UM,update:"update",refineEvent:GM},LNe={type:cX,event:UM,update:"update",refineEvent:GM},ONe={type:dX,event:UM,update:"update",refineEvent:GM};function GM(a,e,t,r){var n=[];return se(a,function(i){n=n.concat(i.eventBreaks)}),{eventContent:{breaks:n}}}function PNe(a){a.registerAction(RNe,e),a.registerAction(LNe,e),a.registerAction(ONe,e);function e(t,r){var n=[],i=ux(r,t);function l(o,c){se(i[o],function(d){var u=d.updateAxisBreaks(t);se(u.breaks,function(h){var f;n.push(ta((f={},f[c]=d.componentIndex,f),h))})})}return l("xAxisModels","xAxisIndex"),l("yAxisModels","yAxisIndex"),l("singleAxisModels","singleAxisIndex"),{eventBreaks:n}}}var nh=Math.PI,zNe=[[1,2,1,2],[5,3,5,3],[8,3,8,3]],BNe=[[0,1,0,1],[0,3,0,3],[0,3,0,3]],Px=Ia(),uX=Ia(),hX=(function(){function a(e){this.recordMap={},this.resolveAxisNameOverlap=e}return a.prototype.ensureRecord=function(e){var t=e.axis.dim,r=e.componentIndex,n=this.recordMap,i=n[t]||(n[t]=[]);return i[r]||(i[r]={ready:{}})},a})();function FNe(a,e,t,r){var n=t.axis,i=e.ensureRecord(t),l=[],o,c=WM(a.axisName)&&Rx(a.nameLocation);se(r,function(g){var b=Lc(g);if(!(!b||b.label.ignore)){l.push(b);var w=i.transGroup;c&&(w.transform?Io(hg,w.transform):lN(hg),b.transform&&Sc(hg,hg,b.transform),ra.copy(ew,b.localRect),ew.applyTransform(hg),o?o.union(ew):ra.copy(o=new ra(0,0,0,0),ew))}});var d=Math.abs(i.dirVec.x)>.1?"x":"y",u=i.transGroup[d];if(l.sort(function(g,b){return Math.abs(g.label[d]-u)-Math.abs(b.label[d]-u)}),c&&o){var h=n.getExtent(),f=Math.min(h[0],h[1]),p=Math.max(h[0],h[1])-f;o.union(new ra(f,0,p,1))}i.stOccupiedRect=o,i.labelInfoList=l}var hg=Li(),ew=new ra(0,0,0,0),fX=function(a,e,t,r,n,i){if(Rx(a.nameLocation)){var l=i.stOccupiedRect;l&&pX(z2e({},l,i.transGroup.transform),r,n)}else xX(i.labelInfoList,i.dirVec,r,n)};function pX(a,e,t){var r=new Qt;IN(a,e,r,{direction:Math.atan2(t.y,t.x),bidirectional:!1,touchThreshold:.05})&&E3(e,r)}function xX(a,e,t,r){for(var n=Qt.dot(r,e)>=0,i=0,l=a.length;i<l;i++){var o=a[n?i:l-1-i];o.label.ignore||pX(o,t,r)}}var Ts=(function(){function a(e,t,r,n){this.group=new $t,this._axisModel=e,this._api=t,this._local={},this._shared=n||new hX(fX),this._resetCfgDetermined(r)}return a.prototype.updateCfg=function(e){var t=this._cfg.raw;t.position=e.position,t.labelOffset=e.labelOffset,this._resetCfgDetermined(t)},a.prototype.__getRawCfg=function(){return this._cfg.raw},a.prototype._resetCfgDetermined=function(e){var t=this._axisModel,r=t.getDefaultOption?t.getDefaultOption():{},n=Ht(e.axisName,t.get("name")),i=t.get("nameMoveOverlap");(i==null||i==="auto")&&(i=Ht(e.defaultNameMoveOverlap,!0));var l={raw:e,position:e.position,rotation:e.rotation,nameDirection:Ht(e.nameDirection,1),tickDirection:Ht(e.tickDirection,1),labelDirection:Ht(e.labelDirection,1),labelOffset:Ht(e.labelOffset,0),silent:Ht(e.silent,!0),axisName:n,nameLocation:jl(t.get("nameLocation"),r.nameLocation,"end"),shouldNameMoveOverlap:WM(n)&&i,optionHideOverlap:t.get(["axisLabel","hideOverlap"]),showMinorTicks:t.get(["minorTick","show"])};this._cfg=l;var o=new $t({x:l.position[0],y:l.position[1],rotation:l.rotation});o.updateTransform(),this._transformGroup=o;var c=this._shared.ensureRecord(t);c.transGroup=this._transformGroup,c.dirVec=new Qt(Math.cos(-l.rotation),Math.sin(-l.rotation))},a.prototype.build=function(e,t){var r=this;return e||(e={axisLine:!0,axisTickLabelEstimate:!1,axisTickLabelDetermine:!0,axisName:!0}),se(VNe,function(n){e[n]&&HNe[n](r._cfg,r._local,r._shared,r._axisModel,r.group,r._transformGroup,r._api,t||{})}),this},a.innerTextLayout=function(e,t,r){var n=cW(t-e),i,l;return Hv(n)?(l=r>0?"top":"bottom",i="center"):Hv(n-nh)?(l=r>0?"bottom":"top",i="center"):(l="middle",n>0&&n<nh?i=r>0?"right":"left":i=r>0?"left":"right"),{rotation:n,textAlign:i,textVerticalAlign:l}},a.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},a.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},a})(),VNe=["axisLine","axisTickLabelEstimate","axisTickLabelDetermine","axisName"],HNe={axisLine:function(a,e,t,r,n,i,l){var o=r.get(["axisLine","show"]);if(o==="auto"&&(o=!0,a.raw.axisLineAutoShow!=null&&(o=!!a.raw.axisLineAutoShow)),!!o){var c=r.axis.getExtent(),d=i.transform,u=[c[0],0],h=[c[1],0],f=u[0]>h[0];d&&(Fn(u,u,d),Fn(h,h,d));var p=et({lineCap:"round"},r.getModel(["axisLine","lineStyle"]).getLineStyle()),g={strokeContainThreshold:a.raw.strokeContainThreshold||5,silent:!0,z2:1,style:p};if(r.get(["axisLine","breakLine"])&&r.axis.scale.hasBreaks())Gb().buildAxisBreakLine(r,n,i,g);else{var b=new qn(et({shape:{x1:u[0],y1:u[1],x2:h[0],y2:h[1]}},g));Tx(b.shape,b.style.lineWidth),b.anid="line",n.add(b)}var w=r.get(["axisLine","symbol"]);if(w!=null){var j=r.get(["axisLine","symbolSize"]);At(w)&&(w=[w,w]),(At(j)||Ka(j))&&(j=[j,j]);var k=P0(r.get(["axisLine","symbolOffset"])||0,j),T=j[0],E=j[1];se([{rotate:a.rotation+Math.PI/2,offset:k[0],r:0},{rotate:a.rotation-Math.PI/2,offset:k[1],r:Math.sqrt((u[0]-h[0])*(u[0]-h[0])+(u[1]-h[1])*(u[1]-h[1]))}],function(I,R){if(w[R]!=="none"&&w[R]!=null){var P=Jn(w[R],-T/2,-E/2,T,E,p.stroke,!0),H=I.r+I.offset,G=f?h:u;P.attr({rotation:I.rotate,x:G[0]+H*Math.cos(a.rotation),y:G[1]-H*Math.sin(a.rotation),silent:!0,z2:11}),n.add(P)}})}}},axisTickLabelEstimate:function(a,e,t,r,n,i,l,o){var c=R7(e,n,o);c&&I7(a,e,t,r,n,i,l,Lo.estimate)},axisTickLabelDetermine:function(a,e,t,r,n,i,l,o){var c=R7(e,n,o);c&&I7(a,e,t,r,n,i,l,Lo.determine);var d=YNe(a,n,i,r);WNe(a,e.labelLayoutList,d),$Ne(a,n,i,r,a.tickDirection)},axisName:function(a,e,t,r,n,i,l,o){var c=t.ensureRecord(r);e.nameEl&&(n.remove(e.nameEl),e.nameEl=c.nameLayout=c.nameLocation=null);var d=a.axisName;if(WM(d)){var u=a.nameLocation,h=a.nameDirection,f=r.getModel("nameTextStyle"),p=r.get("nameGap")||0,g=r.axis.getExtent(),b=r.axis.inverse?-1:1,w=new Qt(0,0),j=new Qt(0,0);u==="start"?(w.x=g[0]-b*p,j.x=-b):u==="end"?(w.x=g[1]+b*p,j.x=b):(w.x=(g[0]+g[1])/2,w.y=a.labelOffset+h*p,j.y=h);var k=Li();j.transform(Mh(k,k,a.rotation));var T=r.get("nameRotate");T!=null&&(T=T*nh/180);var E,I;Rx(u)?E=Ts.innerTextLayout(a.rotation,T??a.rotation,h):(E=UNe(a.rotation,u,T||0,g),I=a.raw.axisNameAvailableWidth,I!=null&&(I=Math.abs(I/Math.sin(E.rotation)),!isFinite(I)&&(I=null)));var R=f.getFont(),P=r.get("nameTruncate",!0)||{},H=P.ellipsis,G=$i(a.raw.nameTruncateMaxWidth,P.maxWidth,I),X=o.nameMarginLevel||0,U=new tr({x:w.x,y:w.y,rotation:E.rotation,silent:Ts.isLabelSilent(r),style:Fr(f,{text:d,font:R,overflow:"truncate",width:G,ellipsis:H,fill:f.getTextColor()||r.get(["axisLine","lineStyle","color"]),align:f.get("align")||E.textAlign,verticalAlign:f.get("verticalAlign")||E.textVerticalAlign}),z2:1});if(Yd({el:U,componentModel:r,itemName:d}),U.__fullText=d,U.anid="name",r.get("triggerEvent")){var te=Ts.makeAxisEventDataBase(r);te.targetType="axisName",te.name=d,la(U).eventData=te}i.add(U),U.updateTransform(),e.nameEl=U;var Z=c.nameLayout=Lc({label:U,priority:U.z2,defaultAttr:{ignore:U.ignore},marginDefault:Rx(u)?zNe[X]:BNe[X]});if(c.nameLocation=u,n.add(U),U.decomposeTransform(),a.shouldNameMoveOverlap&&Z){var J=t.ensureRecord(r);t.resolveAxisNameOverlap(a,t,r,Z,j,J)}}}};function I7(a,e,t,r,n,i,l,o){gX(e)||qNe(a,e,n,o,r,l);var c=e.labelLayoutList;XNe(a,r,c,i),QNe(r,a.rotation,c);var d=a.optionHideOverlap;GNe(r,c,d),d&&Cq(pr(c,function(u){return u&&!u.label.ignore})),FNe(a,t,r,c)}function UNe(a,e,t,r){var n=cW(t-a),i,l,o=r[0]>r[1],c=e==="start"&&!o||e!=="start"&&o;return Hv(n-nh/2)?(l=c?"bottom":"top",i="center"):Hv(n-nh*1.5)?(l=c?"top":"bottom",i="center"):(l="middle",n<nh*1.5&&n>nh/2?i=c?"left":"right":i=c?"right":"left"),{rotation:n,textAlign:i,textVerticalAlign:l}}function GNe(a,e,t){if(dq(a.axis))return;function r(o,c,d){var u=Lc(e[c]),h=Lc(e[d]);if(!(!u||!h)){if(o===!1||u.suggestIgnore){qg(u.label);return}if(h.suggestIgnore){qg(h.label);return}var f=.1;if(!t){var p=[0,0,0,0];u=D3({marginForce:p},u),h=D3({marginForce:p},h)}IN(u,h,null,{touchThreshold:f})&&qg(o?h.label:u.label)}}var n=a.get(["axisLabel","showMinLabel"]),i=a.get(["axisLabel","showMaxLabel"]),l=e.length;r(n,0,1),r(i,l-1,l-2)}function WNe(a,e,t){a.showMinorTicks||se(e,function(r){if(r&&r.label.ignore)for(var n=0;n<t.length;n++){var i=t[n],l=uX(i),o=Px(r.label);if(l.tickValue!=null&&!l.onBand&&l.tickValue===o.tickValue){qg(i);return}}})}function qg(a){a&&(a.ignore=!0)}function mX(a,e,t,r,n){for(var i=[],l=[],o=[],c=0;c<a.length;c++){var d=a[c].coord;l[0]=d,l[1]=0,o[0]=d,o[1]=t,e&&(Fn(l,l,e),Fn(o,o,e));var u=new qn({shape:{x1:l[0],y1:l[1],x2:o[0],y2:o[1]},style:r,z2:2,autoBatch:!0,silent:!0});Tx(u.shape,u.style.lineWidth),u.anid=n+"_"+a[c].tickValue,i.push(u);var h=uX(u);h.onBand=!!a[c].onBand,h.tickValue=a[c].tickValue}return i}function YNe(a,e,t,r){var n=r.axis,i=r.getModel("axisTick"),l=i.get("show");if(l==="auto"&&(l=!0,a.raw.axisTickAutoShow!=null&&(l=!!a.raw.axisTickAutoShow)),!l||n.scale.isBlank())return[];for(var o=i.getModel("lineStyle"),c=a.tickDirection*i.get("length"),d=n.getTicksCoords(),u=mX(d,t.transform,c,ta(o.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),h=0;h<u.length;h++)e.add(u[h]);return u}function $Ne(a,e,t,r,n){var i=r.axis,l=r.getModel("minorTick");if(!(!a.showMinorTicks||i.scale.isBlank())){var o=i.getMinorTicksCoords();if(o.length)for(var c=l.getModel("lineStyle"),d=n*l.get("length"),u=ta(c.getLineStyle(),ta(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),h=0;h<o.length;h++)for(var f=mX(o[h],t.transform,d,u,"minorticks_"+h),p=0;p<f.length;p++)e.add(f[p])}}function R7(a,e,t){if(gX(a)){var r=a.axisLabelsCreationContext,n=r.out.noPxChangeTryDetermine;if(t.noPxChange){for(var i=!0,l=0;l<n.length;l++)i=i&&n[l]();if(i)return!1}n.length&&(e.remove(a.labelGroup),V3(a,null,null,null))}return!0}function qNe(a,e,t,r,n,i){var l=n.axis,o=$i(a.raw.axisLabelShow,n.get(["axisLabel","show"])),c=new $t;t.add(c);var d=r_(r);if(!o||l.scale.isBlank()){V3(e,[],c,d);return}var u=n.getModel("axisLabel"),h=l.getViewLabels(d),f=($i(a.raw.labelRotate,u.get("rotate"))||0)*nh/180,p=Ts.innerTextLayout(a.rotation,f,a.labelDirection),g=n.getCategories&&n.getCategories(!0),b=[],w=n.get("triggerEvent"),j=1/0,k=-1/0;se(h,function(E,I){var R,P=l.scale.type==="ordinal"?l.scale.getRawOrdinalNumber(E.tickValue):E.tickValue,H=E.formattedLabel,G=E.rawLabel,X=u;if(g&&g[P]){var U=g[P];aa(U)&&U.textStyle&&(X=new Fa(U.textStyle,u,n.ecModel))}var te=X.getTextColor()||n.get(["axisLine","lineStyle","color"]),Z=X.getShallow("align",!0)||p.textAlign,J=Ht(X.getShallow("alignMinLabel",!0),Z),B=Ht(X.getShallow("alignMaxLabel",!0),Z),W=X.getShallow("verticalAlign",!0)||X.getShallow("baseline",!0)||p.textVerticalAlign,$=Ht(X.getShallow("verticalAlignMinLabel",!0),W),Q=Ht(X.getShallow("verticalAlignMaxLabel",!0),W),ne=10+(((R=E.time)===null||R===void 0?void 0:R.level)||0);j=Math.min(j,ne),k=Math.max(k,ne);var re=new tr({x:0,y:0,rotation:0,silent:Ts.isLabelSilent(n),z2:ne,style:Fr(X,{text:H,align:I===0?J:I===h.length-1?B:Z,verticalAlign:I===0?$:I===h.length-1?Q:W,fill:Yt(te)?te(l.type==="category"?G:l.type==="value"?P+"":P,I):te})});re.anid="label_"+P;var K=Px(re);if(K.break=E.break,K.tickValue=P,K.layoutRotation=p.rotation,Yd({el:re,componentModel:n,itemName:H,formatterParamsExtra:{isTruncated:function(){return re.isTruncated},value:G,tickIndex:I}}),w){var ae=Ts.makeAxisEventDataBase(n);ae.targetType="axisLabel",ae.value=G,ae.tickIndex=I,E.break&&(ae.break={start:E.break.parsedBreak.vmin,end:E.break.parsedBreak.vmax}),l.type==="category"&&(ae.dataIndex=P),la(re).eventData=ae,E.break&&KNe(n,i,re,E.break)}b.push(re),c.add(re)});var T=ct(b,function(E){return{label:E,priority:Px(E).break?E.z2+(k-j+1):E.z2,defaultAttr:{ignore:E.ignore}}});V3(e,T,c,d)}function gX(a){return!!a.labelLayoutList}function V3(a,e,t,r){a.labelLayoutList=e,a.labelGroup=t,a.axisLabelsCreationContext=r}function XNe(a,e,t,r){var n=e.get(["axisLabel","margin"]);se(t,function(i,l){var o=Lc(i);if(o){var c=o.label,d=Px(c);o.suggestIgnore=c.ignore,c.ignore=!1,O2(fd,ZNe),fd.x=e.axis.dataToCoord(d.tickValue),fd.y=a.labelOffset+a.labelDirection*n,fd.rotation=d.layoutRotation,r.add(fd),fd.updateTransform(),r.remove(fd),fd.decomposeTransform(),O2(c,fd),c.markRedraw(),l_(o,!0),Lc(o)}})}var fd=new Ea,ZNe=new Ea;function WM(a){return!!a}function KNe(a,e,t,r){t.on("click",function(n){var i={type:LN,breaks:[{start:r.parsedBreak.breakOption.start,end:r.parsedBreak.breakOption.end}]};i[a.axis.dim+"AxisIndex"]=a.componentIndex,e.dispatchAction(i)})}function QNe(a,e,t){var r=Xn();if(r){var n=r.retrieveAxisBreakPairs(t,function(l){return l&&Px(l.label).break},!0),i=a.get(["breakLabelLayout","moveOverlap"],!0);(i===!0||i==="auto")&&se(n,function(l){Gb().adjustBreakLabelPair(a.axis.inverse,e,[Lc(t[l[0]]),Lc(t[l[1]])])})}}function u_(a,e,t){t=t||{};var r=e.axis,n={},i=r.getAxesOnZeroOf()[0],l=r.position,o=i?"onZero":l,c=r.dim,d=[a.x,a.x+a.width,a.y,a.y+a.height],u={left:0,right:1,top:0,bottom:1,onZero:2},h=e.get("offset")||0,f=c==="x"?[d[2]-h,d[3]+h]:[d[0]-h,d[1]+h];if(i){var p=i.toGlobalCoord(i.dataToCoord(0));f[u.onZero]=Math.max(Math.min(p,f[1]),f[0])}n.position=[c==="y"?f[u[o]]:d[0],c==="x"?f[u[o]]:d[3]],n.rotation=Math.PI/2*(c==="x"?0:1);var g={top:-1,bottom:1,left:-1,right:1};n.labelDirection=n.tickDirection=n.nameDirection=g[l],n.labelOffset=i?f[u[l]]-f[u.onZero]:0,e.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),$i(t.labelInside,e.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var b=e.get(["axisLabel","rotate"]);return n.labelRotate=o==="top"?-b:b,n.z2=1,n}function JNe(a){return a.coordinateSystem&&a.coordinateSystem.type==="cartesian2d"}function L7(a){var e={xAxisModel:null,yAxisModel:null};return se(e,function(t,r){var n=r.replace(/Model$/,""),i=a.getReferringComponents(n,wn).models[0];e[r]=i}),e}function eje(a,e,t,r,n,i){for(var l=u_(a,t),o=!1,c=!1,d=0;d<e.length;d++)k3(e[d].getOtherAxis(t.axis).scale)&&(o=c=!0,t.axis.type==="category"&&t.axis.onBand&&(c=!1));return l.axisLineAutoShow=o,l.axisTickAutoShow=c,l.defaultNameMoveOverlap=i,new Ts(t,r,l,n)}function tje(a,e,t){var r=u_(e,t);a.updateCfg(r)}function vX(a,e,t){var r=Vd.prototype,n=r.getTicks.call(t),i=r.getTicks.call(t,{expandToNicedExtent:!0}),l=n.length-1,o=r.getInterval.call(t),c=cq(a,e),d=c.extent,u=c.fixMin,h=c.fixMax;a.type==="log"&&(d=C3(a.base,d,!0)),a.setBreaksFromOption(uq(e)),a.setExtent(d[0],d[1]),a.calcNiceExtent({splitNumber:l,fixMin:u,fixMax:h});var f=r.getExtent.call(a);u&&(d[0]=f[0]),h&&(d[1]=f[1]);var p=r.getInterval.call(a),g=d[0],b=d[1];if(u&&h)p=(b-g)/l;else if(u)for(b=d[0]+p*l;b<d[1]&&isFinite(b)&&isFinite(d[1]);)p=fk(p),b=d[0]+p*l;else if(h)for(g=d[1]-p*l;g>d[0]&&isFinite(g)&&isFinite(d[0]);)p=fk(p),g=d[1]-p*l;else{var w=a.getTicks().length-1;w>l&&(p=fk(p));var j=p*l;b=Math.ceil(d[1]/p)*p,g=$n(b-j),g<0&&d[0]>=0?(g=0,b=$n(j)):b>0&&d[1]<=0&&(b=0,g=-$n(j))}var k=(n[0].value-i[0].value)/o,T=(n[l].value-i[l].value)/o;r.setExtent.call(a,g+p*k,b+p*T),r.setInterval.call(a,p),(k||T)&&r.setNiceExtent.call(a,g+p,b-p)}var O7=[[3,1],[0,2]],aje=(function(){function a(e,t,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=F3,this._initCartesian(e,t,r),this.model=e}return a.prototype.getRect=function(){return this._rect},a.prototype.update=function(e,t){var r=this._axesMap;this._updateScale(e,this.model);function n(l){var o,c=Ua(l),d=c.length;if(d){for(var u=[],h=d-1;h>=0;h--){var f=+c[h],p=l[f],g=p.model,b=p.scale;k3(b)&&g.get("alignTicks")&&g.get("interval")==null?u.push(p):(Ix(b,g),k3(b)&&(o=p))}u.length&&(o||(o=u.pop(),Ix(o.scale,o.model)),se(u,function(w){vX(w.scale,w.model,o.scale)}))}}n(r.x),n(r.y);var i={};se(r.x,function(l){P7(r,"y",l,i)}),se(r.y,function(l){P7(r,"x",l,i)}),this.resize(this.model,t)},a.prototype.resize=function(e,t,r){var n=pi(e,t),i=this._rect=cn(e.getBoxLayoutParams(),n.refContainer),l=this._axesMap,o=this._coordsList,c=e.get("containLabel");if(H3(l,i),!r){var d=ije(i,o,l,c,t),u=void 0;if(c)U3?(U3(this._axesList,i),H3(l,i)):u=F7(i.clone(),"axisLabel",null,i,l,d,n);else{var h=sje(e,i,n),f=h.outerBoundsRect,p=h.parsedOuterBoundsContain,g=h.outerBoundsClamp;f&&(u=F7(f,p,g,i,l,d,n))}bX(i,l,Lo.determine,null,u,n)}se(this._coordsList,function(b){b.calcAffineTransform()})},a.prototype.getAxis=function(e,t){var r=this._axesMap[e];if(r!=null)return r[t||0]},a.prototype.getAxes=function(){return this._axesList.slice()},a.prototype.getCartesian=function(e,t){if(e!=null&&t!=null){var r="x"+e+"y"+t;return this._coordsMap[r]}aa(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var n=0,i=this._coordsList;n<i.length;n++)if(i[n].getAxis("x").index===e||i[n].getAxis("y").index===t)return i[n]},a.prototype.getCartesians=function(){return this._coordsList.slice()},a.prototype.convertToPixel=function(e,t,r){var n=this._findConvertTarget(t);return n.cartesian?n.cartesian.dataToPoint(r):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(r)):null},a.prototype.convertFromPixel=function(e,t,r){var n=this._findConvertTarget(t);return n.cartesian?n.cartesian.pointToData(r):n.axis?n.axis.coordToData(n.axis.toLocalCoord(r)):null},a.prototype._findConvertTarget=function(e){var t=e.seriesModel,r=e.xAxisModel||t&&t.getReferringComponents("xAxis",wn).models[0],n=e.yAxisModel||t&&t.getReferringComponents("yAxis",wn).models[0],i=e.gridModel,l=this._coordsList,o,c;if(t)o=t.coordinateSystem,ja(l,o)<0&&(o=null);else if(r&&n)o=this.getCartesian(r.componentIndex,n.componentIndex);else if(r)c=this.getAxis("x",r.componentIndex);else if(n)c=this.getAxis("y",n.componentIndex);else if(i){var d=i.coordinateSystem;d===this&&(o=this._coordsList[0])}return{cartesian:o,axis:c}},a.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},a.prototype._initCartesian=function(e,t,r){var n=this,i=this,l={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},c={x:0,y:0};if(t.eachComponent("xAxis",d("x"),this),t.eachComponent("yAxis",d("y"),this),!c.x||!c.y){this._axesMap={},this._axesList=[];return}this._axesMap=o,se(o.x,function(u,h){se(o.y,function(f,p){var g="x"+h+"y"+p,b=new INe(g);b.master=n,b.model=e,n._coordsMap[g]=b,n._coordsList.push(b),b.addAxis(u),b.addAxis(f)})});function d(u){return function(h,f){if(Tk(h,e)){var p=h.get("position");u==="x"?p!=="top"&&p!=="bottom"&&(p=l.bottom?"top":"bottom"):p!=="left"&&p!=="right"&&(p=l.left?"right":"left"),l[p]=!0;var g=new oX(u,DN(h),[0,0],h.get("type"),p),b=g.type==="category";g.onBand=b&&h.get("boundaryGap"),g.inverse=h.get("inverse"),h.axis=g,g.model=h,g.grid=i,g.index=f,i._axesList.push(g),o[u][f]=g,c[u]++}}}},a.prototype._updateScale=function(e,t){se(this._axesList,function(n){if(n.scale.setExtent(1/0,-1/0),n.type==="category"){var i=n.model.get("categorySortInfo");n.scale.setSortInfo(i)}}),e.eachSeries(function(n){if(JNe(n)){var i=L7(n),l=i.xAxisModel,o=i.yAxisModel;if(!Tk(l,t)||!Tk(o,t))return;var c=this.getCartesian(l.componentIndex,o.componentIndex),d=n.getData(),u=c.getAxis("x"),h=c.getAxis("y");r(d,u),r(d,h)}},this);function r(n,i){se(a_(n,i.dim),function(l){i.scale.unionExtentFromData(n,l)})}},a.prototype.getTooltipAxes=function(e){var t=[],r=[];return se(this.getCartesians(),function(n){var i=e!=null&&e!=="auto"?n.getAxis(e):n.getBaseAxis(),l=n.getOtherAxis(i);ja(t,i)<0&&t.push(i),ja(r,l)<0&&r.push(l)}),{baseAxes:t,otherAxes:r}},a.create=function(e,t){var r=[];return e.eachComponent("grid",function(n,i){var l=new a(n,e,t);l.name="grid_"+i,l.resize(n,t,!0),n.coordinateSystem=l,r.push(l)}),e.eachSeries(function(n){Ob({targetModel:n,coordSysType:"cartesian2d",coordSysProvider:i});function i(){var l=L7(n),o=l.xAxisModel,c=l.yAxisModel,d=o.getCoordSysModel(),u=d.coordinateSystem;return u.getCartesian(o.componentIndex,c.componentIndex)}}),r},a.dimensions=F3,a})();function Tk(a,e){return a.getCoordSysModel()===e}function P7(a,e,t,r){t.getAxesOnZeroOf=function(){return i?[i]:[]};var n=a[e],i,l=t.model,o=l.get(["axisLine","onZero"]),c=l.get(["axisLine","onZeroAxisIndex"]);if(!o)return;if(c!=null)z7(n[c])&&(i=n[c]);else for(var d in n)if(n.hasOwnProperty(d)&&z7(n[d])&&!r[u(n[d])]){i=n[d];break}i&&(r[u(i)]=!0);function u(h){return h.dim+"_"+h.index}}function z7(a){return a&&a.type!=="category"&&a.type!=="time"&&o2e(a)}function rje(a,e){var t=a.getExtent(),r=t[0]+t[1];a.toGlobalCoord=a.dim==="x"?function(n){return n+e}:function(n){return r-n+e},a.toLocalCoord=a.dim==="x"?function(n){return n-e}:function(n){return r-n+e}}function H3(a,e){se(a.x,function(t){return B7(t,e.x,e.width)}),se(a.y,function(t){return B7(t,e.y,e.height)})}function B7(a,e,t){var r=[0,t],n=a.inverse?1:0;a.setExtent(r[n],r[1-n]),rje(a,e)}var U3;function nje(a){U3=a}function F7(a,e,t,r,n,i,l){bX(r,n,Lo.estimate,e,!1,l);var o=[0,0,0,0];d(0),d(1),u(r,0,NaN),u(r,1,NaN);var c=E0(o,function(f){return f>0})==null;return j0(r,o,!0,!0,t),H3(n,r),c;function d(f){se(n[fa[f]],function(p){if(tb(p.model)){var g=i.ensureRecord(p.model),b=g.labelInfoList;if(b)for(var w=0;w<b.length;w++){var j=b[w],k=p.scale.normalize(Px(j.label).tickValue);k=f===1?1-k:k,u(j.rect,f,k),u(j.rect,1-f,NaN)}var T=g.nameLayout;if(T){var k=Rx(g.nameLocation)?.5:NaN;u(T.rect,f,k),u(T.rect,1-f,NaN)}}})}function u(f,p,g){var b=a[fa[p]]-f[fa[p]],w=f[Kn[p]]+f[fa[p]]-(a[Kn[p]]+a[fa[p]]);b=h(b,1-g),w=h(w,g);var j=O7[p][0],k=O7[p][1];o[j]=zn(o[j],b),o[k]=zn(o[k],w)}function h(f,p){return f>0&&!os(p)&&p>1e-4&&(f/=p),f}}function ije(a,e,t,r,n){var i=new hX(lje);return se(t,function(l){return se(l,function(o){if(tb(o.model)){var c=!r;o.axisBuilder=eje(a,e,o.model,n,i,c)}})}),i}function bX(a,e,t,r,n,i){var l=t===Lo.determine;se(e,function(d){return se(d,function(u){tb(u.model)&&(tje(u.axisBuilder,a,u.model),u.axisBuilder.build(l?{axisTickLabelDetermine:!0}:{axisTickLabelEstimate:!0},{noPxChange:n}))})});var o={x:0,y:0};c(0),c(1);function c(d){o[fa[1-d]]=a[Kn[d]]<=i.refContainer[Kn[d]]*.5?0:1-d===1?2:1}se(e,function(d,u){return se(d,function(h){tb(h.model)&&((r==="all"||l)&&h.axisBuilder.build({axisName:!0},{nameMarginLevel:o[u]}),l&&h.axisBuilder.build({axisLine:!0}))})})}function sje(a,e,t){var r,n=a.get("outerBoundsMode",!0);n==="same"?r=e.clone():(n==null||n==="auto")&&(r=cn(a.get("outerBounds",!0)||iX,t.refContainer));var i=a.get("outerBoundsContain",!0),l;i==null||i==="auto"||ja(["all","axisLabel"],i)<0?l="all":l=i;var o=[z2(Ht(a.get("outerBoundsClampWidth",!0),d_[0]),e.width),z2(Ht(a.get("outerBoundsClampHeight",!0),d_[1]),e.height)];return{outerBoundsRect:r,parsedOuterBoundsContain:l,outerBoundsClamp:o}}var lje=function(a,e,t,r,n,i){var l=t.axis.dim==="x"?"y":"x";fX(a,e,t,r,n,i),Rx(a.nameLocation)||se(e.recordMap[l],function(o){o&&o.labelInfoList&&o.dirVec&&xX(o.labelInfoList,o.dirVec,r,n)})};function oje(a,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return cje(t,a,e),t.seriesInvolved&&uje(t,a),t}function cje(a,e,t){var r=e.getComponent("tooltip"),n=e.getComponent("axisPointer"),i=n.get("link",!0)||[],l=[];se(t.getCoordinateSystems(),function(o){if(!o.axisPointerEnabled)return;var c=ib(o.model),d=a.coordSysAxesInfo[c]={};a.coordSysMap[c]=o;var u=o.model,h=u.getModel("tooltip",r);if(se(o.getAxes(),ya(b,!1,null)),o.getTooltipAxes&&r&&h.get("show")){var f=h.get("trigger")==="axis",p=h.get(["axisPointer","type"])==="cross",g=o.getTooltipAxes(h.get(["axisPointer","axis"]));(f||p)&&se(g.baseAxes,ya(b,p?"cross":!0,f)),p&&se(g.otherAxes,ya(b,"cross",!1))}function b(w,j,k){var T=k.model.getModel("axisPointer",n),E=T.get("show");if(!(!E||E==="auto"&&!w&&!G3(T))){j==null&&(j=T.get("triggerTooltip")),T=w?dje(k,h,n,e,w,j):T;var I=T.get("snap"),R=T.get("triggerEmphasis"),P=ib(k.model),H=j||I||k.type==="category",G=a.axesInfo[P]={key:P,axis:k,coordSys:o,axisPointerModel:T,triggerTooltip:j,triggerEmphasis:R,involveSeries:H,snap:I,useHandle:G3(T),seriesModels:[],linkGroup:null};d[P]=G,a.seriesInvolved=a.seriesInvolved||H;var X=hje(i,k);if(X!=null){var U=l[X]||(l[X]={axesInfo:{}});U.axesInfo[P]=G,U.mapper=i[X].mapper,G.linkGroup=U}}}})}function dje(a,e,t,r,n,i){var l=e.getModel("axisPointer"),o=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],c={};se(o,function(f){c[f]=Xt(l.get(f))}),c.snap=a.type!=="category"&&!!i,l.get("type")==="cross"&&(c.type="line");var d=c.label||(c.label={});if(d.show==null&&(d.show=!1),n==="cross"){var u=l.get(["label","show"]);if(d.show=u??!0,!i){var h=c.lineStyle=l.get("crossStyle");h&&ta(d,h.textStyle)}}return a.model.getModel("axisPointer",new Fa(c,t,r))}function uje(a,e){e.eachSeries(function(t){var r=t.coordinateSystem,n=t.get(["tooltip","trigger"],!0),i=t.get(["tooltip","show"],!0);!r||!r.model||n==="none"||n===!1||n==="item"||i===!1||t.get(["axisPointer","show"],!0)===!1||se(a.coordSysAxesInfo[ib(r.model)],function(l){var o=l.axis;r.getAxis(o.dim)===o&&(l.seriesModels.push(t),l.seriesDataCount==null&&(l.seriesDataCount=0),l.seriesDataCount+=t.getData().count())})})}function hje(a,e){for(var t=e.model,r=e.dim,n=0;n<a.length;n++){var i=a[n]||{};if(Mk(i[r+"AxisId"],t.id)||Mk(i[r+"AxisIndex"],t.componentIndex)||Mk(i[r+"AxisName"],t.name))return n}}function Mk(a,e){return a==="all"||lt(a)&&ja(a,e)>=0||a===e}function fje(a){var e=YM(a);if(e){var t=e.axisPointerModel,r=e.axis.scale,n=t.option,i=t.get("status"),l=t.get("value");l!=null&&(l=r.parse(l));var o=G3(t);i==null&&(n.status=o?"show":"hide");var c=r.getExtent().slice();c[0]>c[1]&&c.reverse(),(l==null||l>c[1])&&(l=c[1]),l<c[0]&&(l=c[0]),n.value=l,o&&(n.status=e.axis.scale.isBlank()?"hide":"show")}}function YM(a){var e=(a.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[ib(a)]}function pje(a){var e=YM(a);return e&&e.axisPointerModel}function G3(a){return!!a.get(["handle","show"])}function ib(a){return a.type+"||"+a.id}var V7={},B0=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n,i){this.axisPointerClass&&fje(t),a.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,n,!0)},e.prototype.updateAxisPointer=function(t,r,n,i){this._doUpdateAxisPointerClass(t,n,!1)},e.prototype.remove=function(t,r){var n=this._axisPointer;n&&n.remove(r)},e.prototype.dispose=function(t,r){this._disposeAxisPointer(r),a.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,r,n){var i=e.getAxisPointerClass(this.axisPointerClass);if(i){var l=pje(t);l?(this._axisPointer||(this._axisPointer=new i)).render(t,l,r,n):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,r){V7[t]=r},e.getAxisPointerClass=function(t){return t&&V7[t]},e.type="axis",e})(tn),W3=Ia();function yX(a,e,t,r){var n=t.axis;if(!n.scale.isBlank()){var i=t.getModel("splitArea"),l=i.getModel("areaStyle"),o=l.get("color"),c=r.coordinateSystem.getRect(),d=n.getTicksCoords({tickModel:i,clamp:!0,breakTicks:"none",pruneByBreak:"preserve_extent_bound"});if(d.length){var u=o.length,h=W3(a).splitAreaColors,f=Pt(),p=0;if(h)for(var g=0;g<d.length;g++){var b=h.get(d[g].tickValue);if(b!=null){p=(b+(u-1)*g)%u;break}}var w=n.toGlobalCoord(d[0].coord),j=l.getAreaStyle();o=lt(o)?o:[o];for(var g=1;g<d.length;g++){var k=n.toGlobalCoord(d[g].coord),T=void 0,E=void 0,I=void 0,R=void 0;n.isHorizontal()?(T=w,E=c.y,I=k-T,R=c.height,w=T+I):(T=c.x,E=w,I=c.width,R=k-E,w=E+R);var P=d[g-1].tickValue;P!=null&&f.set(P,p),e.add(new Ea({anid:P!=null?"area_"+P:null,shape:{x:T,y:E,width:I,height:R},style:ta({fill:o[p]},j),autoBatch:!0,silent:!0})),p=(p+1)%u}W3(a).splitAreaColors=f}}}function wX(a){W3(a).splitAreaColors=null}var xje=["splitArea","splitLine","minorSplitLine","breakArea"],_X=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="CartesianAxisPointer",t}return e.prototype.render=function(t,r,n,i){this.group.removeAll();var l=this._axisGroup;if(this._axisGroup=new $t,this.group.add(this._axisGroup),!!tb(t)){this._axisGroup.add(t.axis.axisBuilder.group),se(xje,function(c){t.get([c,"show"])&&mje[c](this,this._axisGroup,t,t.getCoordSysModel(),n)},this);var o=i&&i.type==="changeAxisOrder"&&i.isInitSort;o||Db(l,this._axisGroup,t),a.prototype.render.call(this,t,r,n,i)}},e.prototype.remove=function(){wX(this)},e.type="cartesianAxis",e})(B0),mje={splitLine:function(a,e,t,r,n){var i=t.axis;if(!i.scale.isBlank()){var l=t.getModel("splitLine"),o=l.getModel("lineStyle"),c=o.get("color"),d=l.get("showMinLine")!==!1,u=l.get("showMaxLine")!==!1;c=lt(c)?c:[c];for(var h=r.coordinateSystem.getRect(),f=i.isHorizontal(),p=0,g=i.getTicksCoords({tickModel:l,breakTicks:"none",pruneByBreak:"preserve_extent_bound"}),b=[],w=[],j=o.getLineStyle(),k=0;k<g.length;k++){var T=i.toGlobalCoord(g[k].coord);if(!(k===0&&!d||k===g.length-1&&!u)){var E=g[k].tickValue;f?(b[0]=T,b[1]=h.y,w[0]=T,w[1]=h.y+h.height):(b[0]=h.x,b[1]=T,w[0]=h.x+h.width,w[1]=T);var I=p++%c.length,R=new qn({anid:E!=null?"line_"+E:null,autoBatch:!0,shape:{x1:b[0],y1:b[1],x2:w[0],y2:w[1]},style:ta({stroke:c[I]},j),silent:!0});Tx(R.shape,j.lineWidth),e.add(R)}}}},minorSplitLine:function(a,e,t,r,n){var i=t.axis,l=t.getModel("minorSplitLine"),o=l.getModel("lineStyle"),c=r.coordinateSystem.getRect(),d=i.isHorizontal(),u=i.getMinorTicksCoords();if(u.length)for(var h=[],f=[],p=o.getLineStyle(),g=0;g<u.length;g++)for(var b=0;b<u[g].length;b++){var w=i.toGlobalCoord(u[g][b].coord);d?(h[0]=w,h[1]=c.y,f[0]=w,f[1]=c.y+c.height):(h[0]=c.x,h[1]=w,f[0]=c.x+c.width,f[1]=w);var j=new qn({anid:"minor_line_"+u[g][b].tickValue,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:f[0],y2:f[1]},style:p,silent:!0});Tx(j.shape,p.lineWidth),e.add(j)}},splitArea:function(a,e,t,r,n){yX(a,e,t,r)},breakArea:function(a,e,t,r,n){var i=Gb(),l=t.axis.scale;i&&l.type!=="ordinal"&&i.rectCoordBuildBreakAxis(e,a,t,r.coordinateSystem.getRect(),n)}},NX=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="xAxis",e})(_X),gje=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=NX.type,t}return e.type="yAxis",e})(_X),vje=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="grid",t}return e.prototype.render=function(t,r){this.group.removeAll(),t.get("show")&&this.group.add(new Ea({shape:t.coordinateSystem.getRect(),style:ta({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e})(tn),H7={offset:0};function jX(a){a.registerComponentView(vje),a.registerComponentModel(kNe),a.registerCoordinateSystem("cartesian2d",aje),Ox(a,"x",z3,H7),Ox(a,"y",z3,H7),a.registerComponentView(NX),a.registerComponentView(gje),a.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}function bje(a,e){var t=a.coordinateSystem,r=t&&t.type,n=t&&t.getBaseAxis&&t.getBaseAxis(),i=n&&n.scale&&n.scale.type,l=r==="cartesian2d"&&i==="ordinal"||r==="single",o=e.model.get("jitter")>0;return l&&o}var yje=Ia();function U7(a,e,t,r){if(a instanceof oX){var n=a.scale.type;if(n!=="category"&&n!=="ordinal")return t}var i=a.model,l=i.get("jitter"),o=i.get("jitterOverlap"),c=i.get("jitterMargin")||0,d=a.scale.type==="ordinal"?a.getBandWidth():null;return l>0?o?SX(t,l,d,r):wje(a,e,t,r,l,c):t}function SX(a,e,t,r){if(t===null)return a+(Math.random()-.5)*e;var n=t-r*2,i=Math.min(Math.max(0,e),n);return a+(Math.random()-.5)*i}function wje(a,e,t,r,n,i){var l=yje(a);l.items||(l.items=[]);var o=l.items,c=G7(o,e,t,r,n,i,1),d=G7(o,e,t,r,n,i,-1),u=Math.abs(c-t)<Math.abs(d-t)?c:d,h=a.scale.type==="ordinal"?a.getBandWidth():null,f=Math.abs(u-t);return f>n/2||h&&f>h/2-r?SX(t,n,h,r):(o.push({fixedCoord:e,floatCoord:u,r}),u)}function G7(a,e,t,r,n,i,l){for(var o=t,c=0;c<a.length;c++){var d=a[c],u=e-d.fixedCoord,h=o-d.floatCoord,f=u*u+h*h,p=r+d.r+i;if(f<p*p){var g=d.floatCoord+Math.sqrt(p*p-u*u)*l;if(Math.abs(g-t)>n/2)return Number.MAX_VALUE;if(l===1&&g>o||l===-1&&g<o){o=g,c=-1;continue}}}return o}function _je(a){a.eachSeriesByType("scatter",function(e){var t=e.coordinateSystem;if(t&&(t.type==="cartesian2d"||t.type==="single")){var r=t.getBaseAxis?t.getBaseAxis():null,n=r&&bje(e,r);if(n){var i=e.getData();i.each(function(l){var o=r.dim,c=r.orient,d=c==="horizontal"&&r.type!=="category"||c==="vertical"&&r.type==="category",u=i.getItemLayout(l),h=i.getItemVisual(l,"symbolSize"),f=h instanceof Array?(h[1]+h[0])/2:h;if(o==="y"||o==="single"&&d){var p=U7(r,u[0],u[1],f/2);i.setItemLayout(l,[u[0],p])}else if(o==="x"||o==="single"&&!d){var p=U7(r,u[1],u[0],f/2);i.setItemLayout(l,[p,u[1]])}})}}})}function Nje(a){Ta(jX),a.registerSeriesModel(wNe),a.registerChartView(SNe),a.registerLayout(Ub("scatter"))}function jje(a){a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,_je)}function Sje(a){a.eachSeriesByType("radar",function(e){var t=e.getData(),r=[],n=e.coordinateSystem;if(n){var i=n.getIndicatorAxes();se(i,function(l,o){t.each(t.mapDimension(i[o].dim),function(c,d){r[d]=r[d]||[];var u=n.dataToPoint(c,o);r[d][o]=W7(u)?u:Y7(n)})}),t.each(function(l){var o=E0(r[l],function(c){return W7(c)})||Y7(n);r[l].push(o.slice()),t.setItemLayout(l,r[l])})}})}function W7(a){return!isNaN(a[0])&&!isNaN(a[1])}function Y7(a){return[a.cx,a.cy]}function kje(a){var e=a.polar;if(e){lt(e)||(e=[e]);var t=[];se(e,function(r,n){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),a.radar=a.radar||[],lt(a.radar)||(a.radar=[a.radar]),a.radar.push(r)):t.push(r)}),a.polar=t}se(a.series,function(r){r&&r.type==="radar"&&r.polarIndex&&(r.radarIndex=r.polarIndex)})}var Cje=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var i=t.coordinateSystem,l=this.group,o=t.getData(),c=this._data;function d(f,p){var g=f.getItemVisual(p,"symbol")||"circle";if(g!=="none"){var b=em(f.getItemVisual(p,"symbolSize")),w=Jn(g,-1,-1,2,2),j=f.getItemVisual(p,"symbolRotate")||0;return w.attr({style:{strokeNoScale:!0},z2:100,scaleX:b[0]/2,scaleY:b[1]/2,rotation:j*Math.PI/180||0}),w}}function u(f,p,g,b,w,j){g.removeAll();for(var k=0;k<p.length-1;k++){var T=d(b,w);T&&(T.__dimIdx=k,f[k]?(T.setPosition(f[k]),R0[j?"initProps":"updateProps"](T,{x:p[k][0],y:p[k][1]},t,w)):T.setPosition(p[k]),g.add(T))}}function h(f){return ct(f,function(p){return[i.cx,i.cy]})}o.diff(c).add(function(f){var p=o.getItemLayout(f);if(p){var g=new fs,b=new Xi,w={shape:{points:p}};g.shape.points=h(p),b.shape.points=h(p),en(g,w,t,f),en(b,w,t,f);var j=new $t,k=new $t;j.add(b),j.add(g),j.add(k),u(b.shape.points,p,k,o,f,!0),o.setItemGraphicEl(f,j)}}).update(function(f,p){var g=c.getItemGraphicEl(p),b=g.childAt(0),w=g.childAt(1),j=g.childAt(2),k={shape:{points:o.getItemLayout(f)}};k.shape.points&&(u(b.shape.points,k.shape.points,j,o,f,!1),lo(w),lo(b),nr(b,k,t),nr(w,k,t),o.setItemGraphicEl(f,g))}).remove(function(f){l.remove(c.getItemGraphicEl(f))}).execute(),o.eachItemGraphicEl(function(f,p){var g=o.getItemModel(p),b=f.childAt(0),w=f.childAt(1),j=f.childAt(2),k=o.getItemVisual(p,"style"),T=k.fill;l.add(f),b.useStyle(ta(g.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:T})),hi(b,g,"lineStyle"),hi(w,g,"areaStyle");var E=g.getModel("areaStyle"),I=E.isEmpty()&&E.parentModel.isEmpty();w.ignore=I,se(["emphasis","select","blur"],function(P){var H=g.getModel([P,"areaStyle"]),G=H.isEmpty()&&H.parentModel.isEmpty();w.ensureState(P).ignore=G&&I;var X=g.getModel([P,"lineStyle"]).getLineStyle();b.ensureState(P).style=X;var U=H.getAreaStyle();w.ensureState(P).style=U;var te=g.getModel([P,"itemStyle"]).getItemStyle();j.eachChild(function(Z){Z.ensureState(P).style=Xt(te)})}),w.useStyle(ta(g.getModel("areaStyle").getAreaStyle(),{fill:T,opacity:.7,decal:k.decal}));var R=g.getModel("emphasis");j.eachChild(function(P){if(P instanceof Pi){var H=P.style;P.useStyle(et({image:H.image,x:H.x,y:H.y,width:H.width,height:H.height},k))}else P.useStyle(k),P.setColor(T),P.style.strokeNoScale=!0;var G=o.getStore().get(o.getDimensionIndex(P.__dimIdx),p);(G==null||isNaN(G))&&(G=""),ji(P,fi(g),{labelFetcher:o.hostModel,labelDataIndex:p,labelDimIndex:P.__dimIdx,defaultText:G,inheritColor:T,defaultOpacity:k.opacity})}),on(f,R.get("focus"),R.get("blurScope"),R.get("disabled"))}),this._data=o},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e})(Dr),Aje=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new nm(Tt(this.getData,this),Tt(this.getRawData,this))},e.prototype.getInitialData=function(t,r){return rm(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,r,n){var i=this.getData(),l=this.coordinateSystem,o=l.getIndicatorAxes(),c=this.getData().getName(t),d=c===""?this.name:c,u=s$(this,t);return Qn("section",{header:d,sortBlocks:!0,blocks:ct(o,function(h){var f=i.get(i.mapDimension(h.dim),t);return Qn("nameValue",{markerType:"subItem",markerColor:u,name:h.name,value:f,sortParam:f})})})},e.prototype.getTooltipPosition=function(t){if(t!=null){for(var r=this.getData(),n=this.coordinateSystem,i=r.getValues(ct(n.dimensions,function(d){return r.mapDimension(d)}),t),l=0,o=i.length;l<o;l++)if(!isNaN(i[l])){var c=n.getIndicatorAxes();return n.coordToPoint(c[l].dataToCoord(i[l]),l)}}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e})(Vr),fg=lX.value;function tw(a,e){return ta({show:e},a)}var Tje=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),r=this.get("splitNumber"),n=this.get("scale"),i=this.get("axisLine"),l=this.get("axisTick"),o=this.get("axisLabel"),c=this.get("axisName"),d=this.get(["axisName","show"]),u=this.get(["axisName","formatter"]),h=this.get("axisNameGap"),f=this.get("triggerEvent"),p=ct(this.get("indicator")||[],function(g){g.max!=null&&g.max>0&&!g.min?g.min=0:g.min!=null&&g.min<0&&!g.max&&(g.max=0);var b=c;g.color!=null&&(b=ta({color:g.color},c));var w=Ca(Xt(g),{boundaryGap:t,splitNumber:r,scale:n,axisLine:i,axisTick:l,axisLabel:o,name:g.text,showName:d,nameLocation:"end",nameGap:h,nameTextStyle:b,triggerEvent:f},!1);if(At(u)){var j=w.name;w.name=u.replace("{value}",j??"")}else Yt(u)&&(w.name=u(w.name,w));var k=new Fa(w,null,this.ecModel);return ei(k,Bb.prototype),k.mainType="radar",k.componentIndex=this.componentIndex,k},this);this._indicatorModels=p},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"50%",startAngle:90,axisName:{show:!0,color:Be.color.axisLabel},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:Ca({lineStyle:{color:Be.color.neutral20}},fg.axisLine),axisLabel:tw(fg.axisLabel,!1),axisTick:tw(fg.axisTick,!1),splitLine:tw(fg.splitLine,!0),splitArea:tw(fg.splitArea,!0),indicator:[]},e})(za),Mje=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var i=this.group;i.removeAll(),this._buildAxes(t,n),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t,r){var n=t.coordinateSystem,i=n.getIndicatorAxes(),l=ct(i,function(o){var c=o.model.get("showName")?o.name:"",d=new Ts(o.model,r,{axisName:c,position:[n.cx,n.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return d});se(l,function(o){o.build(),this.group.add(o.group)},this)},e.prototype._buildSplitLineAndArea=function(t){var r=t.coordinateSystem,n=r.getIndicatorAxes();if(!n.length)return;var i=t.get("shape"),l=t.getModel("splitLine"),o=t.getModel("splitArea"),c=l.getModel("lineStyle"),d=o.getModel("areaStyle"),u=l.get("show"),h=o.get("show"),f=c.get("color"),p=d.get("color"),g=lt(f)?f:[f],b=lt(p)?p:[p],w=[],j=[];function k(B,W,$){var Q=$%W.length;return B[Q]=B[Q]||[],Q}if(i==="circle")for(var T=n[0].getTicksCoords(),E=r.cx,I=r.cy,R=0;R<T.length;R++){if(u){var P=k(w,g,R);w[P].push(new Wd({shape:{cx:E,cy:I,r:T[R].coord}}))}if(h&&R<T.length-1){var P=k(j,b,R);j[P].push(new Mb({shape:{cx:E,cy:I,r0:T[R].coord,r:T[R+1].coord}}))}}else for(var H,G=ct(n,function(B,W){var $=B.getTicksCoords();return H=H==null?$.length-1:Math.min($.length-1,H),ct($,function(Q){return r.coordToPoint(Q.coord,W)})}),X=[],R=0;R<=H;R++){for(var U=[],te=0;te<n.length;te++)U.push(G[te][R]);if(U[0]&&U.push(U[0].slice()),u){var P=k(w,g,R);w[P].push(new Xi({shape:{points:U}}))}if(h&&X){var P=k(j,b,R-1);j[P].push(new fs({shape:{points:U.concat(X)}}))}X=U.slice().reverse()}var Z=c.getLineStyle(),J=d.getAreaStyle();se(j,function(B,W){this.group.add(Ql(B,{style:ta({stroke:"none",fill:b[W%b.length]},J),silent:!0}))},this),se(w,function(B,W){this.group.add(Ql(B,{style:ta({fill:"none",stroke:g[W%g.length]},Z),silent:!0}))},this)},e.type="radar",e})(tn),Eje=(function(a){Ie(e,a);function e(t,r,n){var i=a.call(this,t,r,n)||this;return i.type="value",i.angle=0,i.name="",i}return e})(Fo),Dje=(function(){function a(e,t,r){this.dimensions=[],this._model=e,this._indicatorAxes=ct(e.getIndicatorModels(),function(n,i){var l="indicator_"+i,o=new Eje(l,new Vd);return o.name=n.get("name"),o.model=n,n.axis=o,this.dimensions.push(l),o},this),this.resize(e,r)}return a.prototype.getIndicatorAxes=function(){return this._indicatorAxes},a.prototype.dataToPoint=function(e,t){var r=this._indicatorAxes[t];return this.coordToPoint(r.dataToCoord(e),t)},a.prototype.coordToPoint=function(e,t){var r=this._indicatorAxes[t],n=r.angle,i=this.cx+e*Math.cos(n),l=this.cy-e*Math.sin(n);return[i,l]},a.prototype.pointToData=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,n=Math.sqrt(t*t+r*r);t/=n,r/=n;for(var i=Math.atan2(-r,t),l=1/0,o,c=-1,d=0;d<this._indicatorAxes.length;d++){var u=this._indicatorAxes[d],h=Math.abs(i-u.angle);h<l&&(o=u,c=d,l=h)}return[c,+(o&&o.coordToData(n))]},a.prototype.resize=function(e,t){var r=pi(e,t).refContainer,n=e.get("center"),i=Math.min(r.width,r.height)/2;this.cx=kt(n[0],r.width)+r.x,this.cy=kt(n[1],r.height)+r.y,this.startAngle=e.get("startAngle")*Math.PI/180;var l=e.get("radius");(At(l)||Ka(l))&&(l=[0,l]),this.r0=kt(l[0],i),this.r=kt(l[1],i),se(this._indicatorAxes,function(o,c){o.setExtent(this.r0,this.r);var d=this.startAngle+c*Math.PI*2/this._indicatorAxes.length;d=Math.atan2(Math.sin(d),Math.cos(d)),o.angle=d},this)},a.prototype.update=function(e,t){var r=this._indicatorAxes,n=this._model;se(r,function(o){o.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(o,c){if(!(o.get("coordinateSystem")!=="radar"||e.getComponent("radar",o.get("radarIndex"))!==n)){var d=o.getData();se(r,function(u){u.scale.unionExtentFromData(d,d.mapDimension(u.dim))})}},this);var i=n.get("splitNumber"),l=new Vd;l.setExtent(0,i),l.setInterval(1),se(r,function(o,c){vX(o.scale,o.model,l)})},a.prototype.convertToPixel=function(e,t,r){return console.warn("Not implemented."),null},a.prototype.convertFromPixel=function(e,t,r){return console.warn("Not implemented."),null},a.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},a.create=function(e,t){var r=[];return e.eachComponent("radar",function(n){var i=new a(n,e,t);r.push(i),n.coordinateSystem=i}),e.eachSeriesByType("radar",function(n){n.get("coordinateSystem")==="radar"&&(n.coordinateSystem=r[n.get("radarIndex")||0])}),r},a.dimensions=[],a})();function Ije(a){a.registerCoordinateSystem("radar",Dje),a.registerComponentModel(Tje),a.registerComponentView(Mje),a.registerVisual({seriesType:"radar",reset:function(e){var t=e.getData();t.each(function(r){t.setItemVisual(r,"legendIcon","roundRect")}),t.setVisual("legendIcon","roundRect")}})}function Rje(a){Ta(Ije),a.registerChartView(Cje),a.registerSeriesModel(Aje),a.registerLayout(Sje),a.registerProcessor(am("radar")),a.registerPreprocessor(kje)}var $M=Ia();function Lje(a,e,t){$M(a)[e]=t}function Oje(a,e,t){var r=$M(a),n=r[e];n===t&&(r[e]=null)}function $7(a,e){return!!$M(a)[e]}Bc({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Bn);var Pje={axisPointer:1,tooltip:1,brush:1};function kX(a,e,t){var r=e.getComponentByElement(a.topTarget);if(!r||r===t||Pje.hasOwnProperty(r.mainType))return!1;var n=r.coordinateSystem;if(!n||n.model===t)return!1;var i=S0(r),l=S0(t);return!((i.zlevel-l.zlevel||i.z-l.z)<=0)}var F0=(function(a){Ie(e,a);function e(t){var r=a.call(this)||this;r._zr=t;var n=Tt(r._mousedownHandler,r),i=Tt(r._mousemoveHandler,r),l=Tt(r._mouseupHandler,r),o=Tt(r._mousewheelHandler,r),c=Tt(r._pinchHandler,r);return r.enable=function(d,u){var h=u.zInfo,f=S0(h.component),p=f.z,g=f.zlevel,b={component:h.component,z:p,zlevel:g,z2:Ht(h.z2,-1/0)},w=et({},u.triggerInfo);this._opt=ta(et({},u),{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0,zInfoParsed:b,triggerInfo:w}),d==null&&(d=!0),(!this._enabled||this._controlType!==d)&&(this._enabled=!0,this.disable(),(d===!0||d==="move"||d==="pan")&&(xg(t,"mousedown",n,b),xg(t,"mousemove",i,b),xg(t,"mouseup",l,b)),(d===!0||d==="scale"||d==="zoom")&&(xg(t,"mousewheel",o,b),xg(t,"pinch",c,b)))},r.disable=function(){this._enabled=!1,mg(t,"mousedown",n),mg(t,"mousemove",i),mg(t,"mouseup",l),mg(t,"mousewheel",o),mg(t,"pinch",c)},r}return e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype._checkPointer=function(t,r,n){var i=this._opt,l=i.zInfoParsed;if(kX(t,i.api,l.component))return!1;var o=i.triggerInfo,c=o.roamTrigger,d=!1;return c==="global"&&(d=!0),d||(d=o.isInSelf(t,r,n)),d&&o.isInClip&&!o.isInClip(t,r,n)&&(d=!1),d},e.prototype._decideCursorStyle=function(t,r,n,i){var l=t.target;if(!l&&this._checkPointer(t,r,n))return"grab";if(i)return l&&l.cursor||"default"},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!(dO(t)||pg(t))){for(var r=t.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var n=t.offsetX,i=t.offsetY;this._checkPointer(t,n,i)&&(this._x=n,this._y=i,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){var r=this._zr;if(!(t.gestureEvent==="pinch"||$7(r,"globalPan")||pg(t))){var n=t.offsetX,i=t.offsetY;if(!this._dragging||!Zw("moveOnMouseMove",t,this._opt)){var l=this._decideCursorStyle(t,n,i,!1);l&&r.setCursorStyle(l);return}r.setCursorStyle("grabbing");var o=this._x,c=this._y,d=n-o,u=i-c;this._x=n,this._y=i,this._opt.preventDefaultMouseMove&&Od(t.event),t.__ecRoamConsumed=!0,q7(this,"pan","moveOnMouseMove",t,{dx:d,dy:u,oldX:o,oldY:c,newX:n,newY:i,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){if(!pg(t)){var r=this._zr;if(!dO(t)){this._dragging=!1;var n=this._decideCursorStyle(t,t.offsetX,t.offsetY,!0);n&&r.setCursorStyle(n)}}},e.prototype._mousewheelHandler=function(t){if(!pg(t)){var r=Zw("zoomOnMouseWheel",t,this._opt),n=Zw("moveOnMouseWheel",t,this._opt),i=t.wheelDelta,l=Math.abs(i),o=t.offsetX,c=t.offsetY;if(!(i===0||!r&&!n)){if(r){var d=l>3?1.4:l>1?1.2:1.1,u=i>0?d:1/d;this._checkTriggerMoveZoom(this,"zoom","zoomOnMouseWheel",t,{scale:u,originX:o,originY:c,isAvailableBehavior:null})}if(n){var h=Math.abs(i),f=(i>0?1:-1)*(h>3?.4:h>1?.15:.05);this._checkTriggerMoveZoom(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:f,originX:o,originY:c,isAvailableBehavior:null})}}}},e.prototype._pinchHandler=function(t){if(!($7(this._zr,"globalPan")||pg(t))){var r=t.pinchScale>1?1.1:1/1.1;this._checkTriggerMoveZoom(this,"zoom",null,t,{scale:r,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})}},e.prototype._checkTriggerMoveZoom=function(t,r,n,i,l){t._checkPointer(i,l.originX,l.originY)&&(Od(i.event),i.__ecRoamConsumed=!0,q7(t,r,n,i,l))},e})(co);function pg(a){return a.__ecRoamConsumed}var zje=Ia();function ON(a){var e=zje(a);return e.roam=e.roam||{},e.uniform=e.uniform||{},e}function xg(a,e,t,r){for(var n=ON(a),i=n.roam,l=i[e]=i[e]||[],o=0;o<l.length;o++){var c=l[o].zInfoParsed;if((c.zlevel-r.zlevel||c.z-r.z||c.z2-r.z2)<=0)break}l.splice(o,0,{listener:t,zInfoParsed:r}),Bje(a,e)}function mg(a,e,t){for(var r=ON(a),n=r.roam[e]||[],i=0;i<n.length;i++)if(n[i].listener===t){n.splice(i,1),n.length||Fje(a,e);return}}function Bje(a,e){var t=ON(a);t.uniform[e]||a.on(e,t.uniform[e]=function(r){var n=t.roam[e];if(n)for(var i=0;i<n.length;i++)n[i].listener(r)})}function Fje(a,e){var t=ON(a),r=t.uniform;r[e]&&(a.off(e,r[e]),r[e]=null)}function q7(a,e,t,r,n){n.isAvailableBehavior=Tt(Zw,null,t,r),a.trigger(e,n)}function Zw(a,e,t){var r=t[a];return!a||r&&(!At(r)||e.event[r+"Key"])}function qM(a,e,t){var r=a.target;r.x+=e,r.y+=t,r.dirty()}function XM(a,e,t,r){var n=a.target,i=a.zoomLimit,l=a.zoom=a.zoom||1;l*=e,l=ZM(l,i);var o=l/a.zoom;a.zoom=l,AX(n,t,r,o),n.dirty()}function CX(a,e,t,r,n,i){var l=new ra(0,0,0,0);r.enable(a.get("roam"),{api:e,zInfo:{component:a},triggerInfo:{roamTrigger:a.get("roamTrigger"),isInSelf:function(d,u,h){return l.copy(t.getBoundingRect()),l.applyTransform(t.getComputedTransform()),l.contain(u,h)},isInClip:function(d,u,h){return!i||i.contain(u,h)}}}),n.zoomLimit=a.get("scaleLimit");var o=a.coordinateSystem;n.zoom=o?o.getZoom():1;var c=a.subType+"Roam";r.off("pan").off("zoom").on("pan",function(d){qM(n,d.dx,d.dy),e.dispatchAction({seriesId:a.id,type:c,dx:d.dx,dy:d.dy})}).on("zoom",function(d){XM(n,d.scale,d.originX,d.originY),e.dispatchAction({seriesId:a.id,type:c,zoom:d.scale,originX:d.originX,originY:d.originY}),e.updateLabelLayout()})}function X7(a,e){return a.pointToProjected?a.pointToProjected(e):a.pointToData(e)}function PN(a,e,t){var r=a.getZoom(),n=a.getCenter(),i=e.zoom,l=a.projectedToPoint?a.projectedToPoint(n):a.dataToPoint(n);return e.dx!=null&&e.dy!=null&&(l[0]-=e.dx,l[1]-=e.dy,a.setCenter(X7(a,l))),i!=null&&(i=ZM(r*i,t)/r,AX(a,e.originX,e.originY,i),a.updateTransform(),a.setCenter(X7(a,l)),a.setZoom(i*r)),{center:a.getCenter(),zoom:a.getZoom()}}function AX(a,e,t,r){a.x-=(e-a.x)*(r-1),a.y-=(t-a.y)*(r-1),a.scaleX*=r,a.scaleY*=r}function ZM(a,e){if(e){var t=e.min||0,r=e.max||1/0;a=Math.max(Math.min(r,a),t)}return a}function TX(a){if(At(a)){var e=new DOMParser;a=e.parseFromString(a,"text/xml")}var t=a;for(t.nodeType===9&&(t=t.firstChild);t.nodeName.toLowerCase()!=="svg"||t.nodeType!==1;)t=t.nextSibling;return t}var Ek,h_={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Z7=Ua(h_),f_={"alignment-baseline":"textBaseline","stop-color":"stopColor"},K7=Ua(f_),Vje=(function(){function a(){this._defs={},this._root=null}return a.prototype.parse=function(e,t){t=t||{};var r=TX(e);this._defsUsePending=[];var n=new $t;this._root=n;var i=[],l=r.getAttribute("viewBox")||"",o=parseFloat(r.getAttribute("width")||t.width),c=parseFloat(r.getAttribute("height")||t.height);isNaN(o)&&(o=null),isNaN(c)&&(c=null),pl(r,n,null,!0,!1);for(var d=r.firstChild;d;)this._parseNode(d,n,i,null,!1,!1),d=d.nextSibling;Gje(this._defs,this._defsUsePending),this._defsUsePending=[];var u,h;if(l){var f=zN(l);f.length>=4&&(u={x:parseFloat(f[0]||0),y:parseFloat(f[1]||0),width:parseFloat(f[2]),height:parseFloat(f[3])})}if(u&&o!=null&&c!=null&&(h=EX(u,{x:0,y:0,width:o,height:c}),!t.ignoreViewBox)){var p=n;n=new $t,n.add(p),p.scaleX=p.scaleY=h.scale,p.x=h.x,p.y=h.y}return!t.ignoreRootClip&&o!=null&&c!=null&&n.setClipPath(new Ea({shape:{x:0,y:0,width:o,height:c}})),{root:n,width:o,height:c,viewBoxRect:u,viewBoxTransform:h,named:i}},a.prototype._parseNode=function(e,t,r,n,i,l){var o=e.nodeName.toLowerCase(),c,d=n;if(o==="defs"&&(i=!0),o==="text"&&(l=!0),o==="defs"||o==="switch")c=t;else{if(!i){var u=Ek[o];if(u&&Rt(Ek,o)){c=u.call(this,e,t);var h=e.getAttribute("name");if(h){var f={name:h,namedFrom:null,svgNodeTagLower:o,el:c};r.push(f),o==="g"&&(d=f)}else n&&r.push({name:n.name,namedFrom:n,svgNodeTagLower:o,el:c});t.add(c)}}var p=Q7[o];if(p&&Rt(Q7,o)){var g=p.call(this,e),b=e.getAttribute("id");b&&(this._defs[b]=g)}}if(c&&c.isGroup)for(var w=e.firstChild;w;)w.nodeType===1?this._parseNode(w,c,r,d,i,l):w.nodeType===3&&l&&this._parseText(w,c),w=w.nextSibling},a.prototype._parseText=function(e,t){var r=new Ax({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Hl(t,r),pl(e,r,this._defsUsePending,!1,!1),Hje(r,t);var n=r.style,i=n.fontSize;i&&i<9&&(n.fontSize=9,r.scaleX*=i/9,r.scaleY*=i/9);var l=(n.fontSize||n.fontFamily)&&[n.fontStyle,n.fontWeight,(n.fontSize||12)+"px",n.fontFamily||"sans-serif"].join(" ");n.font=l;var o=r.getBoundingRect();return this._textX+=o.width,t.add(r),r},a.internalField=(function(){Ek={g:function(e,t){var r=new $t;return Hl(t,r),pl(e,r,this._defsUsePending,!1,!1),r},rect:function(e,t){var r=new Ea;return Hl(t,r),pl(e,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(e,t){var r=new Wd;return Hl(t,r),pl(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),r.silent=!0,r},line:function(e,t){var r=new qn;return Hl(t,r),pl(e,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(e,t){var r=new yN;return Hl(t,r),pl(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(e,t){var r=e.getAttribute("points"),n;r&&(n=tz(r));var i=new fs({shape:{points:n||[]},silent:!0});return Hl(t,i),pl(e,i,this._defsUsePending,!1,!1),i},polyline:function(e,t){var r=e.getAttribute("points"),n;r&&(n=tz(r));var i=new Xi({shape:{points:n||[]},silent:!0});return Hl(t,i),pl(e,i,this._defsUsePending,!1,!1),i},image:function(e,t){var r=new Pi;return Hl(t,r),pl(e,r,this._defsUsePending,!1,!1),r.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),r.silent=!0,r},text:function(e,t){var r=e.getAttribute("x")||"0",n=e.getAttribute("y")||"0",i=e.getAttribute("dx")||"0",l=e.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(i),this._textY=parseFloat(n)+parseFloat(l);var o=new $t;return Hl(t,o),pl(e,o,this._defsUsePending,!1,!0),o},tspan:function(e,t){var r=e.getAttribute("x"),n=e.getAttribute("y");r!=null&&(this._textX=parseFloat(r)),n!=null&&(this._textY=parseFloat(n));var i=e.getAttribute("dx")||"0",l=e.getAttribute("dy")||"0",o=new $t;return Hl(t,o),pl(e,o,this._defsUsePending,!1,!0),this._textX+=parseFloat(i),this._textY+=parseFloat(l),o},path:function(e,t){var r=e.getAttribute("d")||"",n=WW(r);return Hl(t,n),pl(e,n,this._defsUsePending,!1,!1),n.silent=!0,n}}})(),a})(),Q7={lineargradient:function(a){var e=parseInt(a.getAttribute("x1")||"0",10),t=parseInt(a.getAttribute("y1")||"0",10),r=parseInt(a.getAttribute("x2")||"10",10),n=parseInt(a.getAttribute("y2")||"0",10),i=new qx(e,t,r,n);return J7(a,i),ez(a,i),i},radialgradient:function(a){var e=parseInt(a.getAttribute("cx")||"0",10),t=parseInt(a.getAttribute("cy")||"0",10),r=parseInt(a.getAttribute("r")||"0",10),n=new XW(e,t,r);return J7(a,n),ez(a,n),n}};function J7(a,e){var t=a.getAttribute("gradientUnits");t==="userSpaceOnUse"&&(e.global=!0)}function ez(a,e){for(var t=a.firstChild;t;){if(t.nodeType===1&&t.nodeName.toLocaleLowerCase()==="stop"){var r=t.getAttribute("offset"),n=void 0;r&&r.indexOf("%")>0?n=parseInt(r,10)/100:r?n=parseFloat(r):n=0;var i={};MX(t,i,i);var l=i.stopColor||t.getAttribute("stop-color")||"#000000",o=i.stopOpacity||t.getAttribute("stop-opacity");if(o){var c=Ks(l),d=c&&c[3];d&&(c[3]*=ch(o),l=kc(c,"rgba"))}e.colorStops.push({offset:n,color:l})}t=t.nextSibling}}function Hl(a,e){a&&a.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),ta(e.__inheritedStyle,a.__inheritedStyle))}function tz(a){for(var e=zN(a),t=[],r=0;r<e.length;r+=2){var n=parseFloat(e[r]),i=parseFloat(e[r+1]);t.push([n,i])}return t}function pl(a,e,t,r,n){var i=e,l=i.__inheritedStyle=i.__inheritedStyle||{},o={};a.nodeType===1&&($je(a,e),MX(a,l,o),r||qje(a,l,o)),i.style=i.style||{},l.fill!=null&&(i.style.fill=az(i,"fill",l.fill,t)),l.stroke!=null&&(i.style.stroke=az(i,"stroke",l.stroke,t)),se(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(c){l[c]!=null&&(i.style[c]=parseFloat(l[c]))}),se(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(c){l[c]!=null&&(i.style[c]=l[c])}),n&&(i.__selfStyle=o),l.lineDash&&(i.style.lineDash=ct(zN(l.lineDash),function(c){return parseFloat(c)})),(l.visibility==="hidden"||l.visibility==="collapse")&&(i.invisible=!0),l.display==="none"&&(i.ignore=!0)}function Hje(a,e){var t=e.__selfStyle;if(t){var r=t.textBaseline,n=r;!r||r==="auto"||r==="baseline"?n="alphabetic":r==="before-edge"||r==="text-before-edge"?n="top":r==="after-edge"||r==="text-after-edge"?n="bottom":(r==="central"||r==="mathematical")&&(n="middle"),a.style.textBaseline=n}var i=e.__inheritedStyle;if(i){var l=i.textAlign,o=l;l&&(l==="middle"&&(o="center"),a.style.textAlign=o)}}var Uje=/^url\(\s*#(.*?)\)/;function az(a,e,t,r){var n=t&&t.match(Uje);if(n){var i=eo(n[1]);r.push([a,e,i]);return}return t==="none"&&(t=null),t}function Gje(a,e){for(var t=0;t<e.length;t++){var r=e[t];r[0].style[r[1]]=a[r[2]]}}var Wje=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function zN(a){return a.match(Wje)||[]}var Yje=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,Dk=Math.PI/180;function $je(a,e){var t=a.getAttribute("transform");if(t){t=t.replace(/,/g," ");var r=[],n=null;t.replace(Yje,function(h,f,p){return r.push(f,p),""});for(var i=r.length-1;i>0;i-=2){var l=r[i],o=r[i-1],c=zN(l);switch(n=n||Li(),o){case"translate":Ec(n,n,[parseFloat(c[0]),parseFloat(c[1]||"0")]);break;case"scale":LT(n,n,[parseFloat(c[0]),parseFloat(c[1]||c[0])]);break;case"rotate":Mh(n,n,-parseFloat(c[0])*Dk,[parseFloat(c[1]||"0"),parseFloat(c[2]||"0")]);break;case"skewX":var d=Math.tan(parseFloat(c[0])*Dk);Sc(n,[1,0,d,1,0,0],n);break;case"skewY":var u=Math.tan(parseFloat(c[0])*Dk);Sc(n,[1,u,0,1,0,0],n);break;case"matrix":n[0]=parseFloat(c[0]),n[1]=parseFloat(c[1]),n[2]=parseFloat(c[2]),n[3]=parseFloat(c[3]),n[4]=parseFloat(c[4]),n[5]=parseFloat(c[5]);break}}e.setLocalTransform(n)}}var rz=/([^\s:;]+)\s*:\s*([^:;]+)/g;function MX(a,e,t){var r=a.getAttribute("style");if(r){rz.lastIndex=0;for(var n;(n=rz.exec(r))!=null;){var i=n[1],l=Rt(h_,i)?h_[i]:null;l&&(e[l]=n[2]);var o=Rt(f_,i)?f_[i]:null;o&&(t[o]=n[2])}}}function qje(a,e,t){for(var r=0;r<Z7.length;r++){var n=Z7[r],i=a.getAttribute(n);i!=null&&(e[h_[n]]=i)}for(var r=0;r<K7.length;r++){var n=K7[r],i=a.getAttribute(n);i!=null&&(t[f_[n]]=i)}}function EX(a,e){var t=e.width/a.width,r=e.height/a.height,n=Math.min(t,r);return{scale:n,x:-(a.x+a.width/2)*n+(e.x+e.width/2),y:-(a.y+a.height/2)*n+(e.y+e.height/2)}}function Xje(a,e){var t=new Vje;return t.parse(a,e)}var Zje=Pt(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),Kje=(function(){function a(e,t){this.type="geoSVG",this._usedGraphicMap=Pt(),this._freedGraphics=[],this._mapName=e,this._parsedXML=TX(t)}return a.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=Jje(e.named),r=t.regions,n=t.regionsMap;this._regions=r,this._regionsMap=n}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},a.prototype._buildGraphic=function(e){var t,r;try{t=e&&Xje(e,{ignoreViewBox:!0,ignoreRootClip:!0})||{},r=t.root,us(r!=null)}catch(w){throw new Error(`Invalid svg format
`+w.message)}var n=new $t;n.add(r),n.isGeoSVGGraphicRoot=!0;var i=t.width,l=t.height,o=t.viewBoxRect,c=this._boundingRect;if(!c){var d=void 0,u=void 0,h=void 0,f=void 0;if(i!=null?(d=0,h=i):o&&(d=o.x,h=o.width),l!=null?(u=0,f=l):o&&(u=o.y,f=o.height),d==null||u==null){var p=r.getBoundingRect();d==null&&(d=p.x,h=p.width),u==null&&(u=p.y,f=p.height)}c=this._boundingRect=new ra(d,u,h,f)}if(o){var g=EX(o,c);r.scaleX=r.scaleY=g.scale,r.x=g.x,r.y=g.y}n.setClipPath(new Ea({shape:c.plain()}));var b=[];return se(t.named,function(w){Zje.get(w.svgNodeTagLower)!=null&&(b.push(w),Qje(w.el))}),{root:n,boundingRect:c,named:b}},a.prototype.useGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,r),r)},a.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);r&&(t.removeKey(e),this._freedGraphics.push(r))},a})();function Qje(a){a.silent=!1,a.isGroup&&a.traverse(function(e){e.silent=!1})}function Jje(a){var e=[],t=Pt();return se(a,function(r){if(r.namedFrom==null){var n=new p2e(r.name,r.el);e.push(n),t.set(r.name,n)}}),{regions:e,regionsMap:t}}var Y3=[126,25],nz="",Of=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var Mf=0;Mf<Of.length;Mf++)for(var Ip=0;Ip<Of[Mf].length;Ip++)Of[Mf][Ip][0]/=10.5,Of[Mf][Ip][1]/=-10.5/.75,Of[Mf][Ip][0]+=Y3[0],Of[Mf][Ip][1]+=Y3[1];function eSe(a,e){if(a==="china"){for(var t=0;t<e.length;t++)if(e[t].name===nz)return;e.push(new fq(nz,ct(Of,function(r){return{type:"polygon",exterior:r}}),Y3))}}var tSe={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]};function aSe(a,e){if(a==="china"){var t=tSe[e.name];if(t){var r=e.getCenter();r[0]+=t[0]/10.5,r[1]+=-t[1]/(10.5/.75),e.setCenter(r)}}}var rSe=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function nSe(a,e){a==="china"&&e.name===""&&e.geometries.push({type:"polygon",exterior:rSe[0]})}var iSe="name",sSe=(function(){function a(e,t,r){this.type="geoJSON",this._parsedMap=Pt(),this._mapName=e,this._specialAreas=r,this._geoJSON=oSe(t)}return a.prototype.load=function(e,t){t=t||iSe;var r=this._parsedMap.get(t);if(!r){var n=this._parseToRegions(t);r=this._parsedMap.set(t,{regions:n,boundingRect:lSe(n)})}var i=Pt(),l=[];return se(r.regions,function(o){var c=o.name;e&&Rt(e,c)&&(o=o.cloneShallow(c=e[c])),l.push(o),i.set(c,o)}),{regions:l,boundingRect:r.boundingRect||new ra(0,0,0,0),regionsMap:i}},a.prototype._parseToRegions=function(e){var t=this._mapName,r=this._geoJSON,n;try{n=r?m2e(r,e):[]}catch(i){throw new Error(`Invalid geoJson format
`+i.message)}return eSe(t,n),se(n,function(i){var l=i.name;aSe(t,i),nSe(t,i);var o=this._specialAreas&&this._specialAreas[l];o&&i.transformTo(o.left,o.top,o.width,o.height)},this),n},a.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},a})();function lSe(a){for(var e,t=0;t<a.length;t++){var r=a[t].getBoundingRect();e=e||r.clone(),e.union(r)}return e}function oSe(a){return At(a)?typeof JSON<"u"&&JSON.parse?JSON.parse(a):new Function("return ("+a+");")():a}var gg=Pt();const Hd={registerMap:function(a,e,t){if(e.svg){var r=new Kje(a,e.svg);gg.set(a,r)}else{var n=e.geoJson||e.geoJSON;n&&!e.features?t=e.specialAreas:n=e;var r=new sSe(a,n,t);gg.set(a,r)}},getGeoResource:function(a){return gg.get(a)},getMapForUser:function(a){var e=gg.get(a);return e&&e.type==="geoJSON"&&e.getMapForUser()},load:function(a,e,t){var r=gg.get(a);if(r)return r.load(e,t)}};var KM=["rect","circle","line","ellipse","polygon","polyline","path"],cSe=Pt(KM),dSe=Pt(KM.concat(["g"])),uSe=Pt(KM.concat(["g"])),DX=Ia();function aw(a){var e=a.getItemStyle(),t=a.get("areaColor");return t!=null&&(e.fill=t),e}function iz(a){var e=a.style;e&&(e.stroke=e.stroke||e.fill,e.fill=null)}var IX=(function(){function a(e){var t=this.group=new $t,r=this._transformGroup=new $t;t.add(r),this.uid=Kx("ec_map_draw"),this._controller=new F0(e.getZr()),this._controllerHost={target:r},r.add(this._regionsGroup=new $t),r.add(this._svgGroup=new $t)}return a.prototype.draw=function(e,t,r,n,i){var l=e.mainType==="geo",o=e.getData&&e.getData();l&&t.eachComponent({mainType:"series",subType:"map"},function(T){!o&&T.getHostGeoModel()===e&&(o=T.getData())});var c=e.coordinateSystem,d=this._regionsGroup,u=this._transformGroup,h=c.getTransformInfo(),f=h.raw,p=h.roam,g=!d.childAt(0)||i,b=e.getShallow("clip",!0),w;b?(w=c.getViewRect().clone(),this.group.setClipPath(new Ea({shape:w.clone()}))):this.group.removeClipPath(),g?(u.x=p.x,u.y=p.y,u.scaleX=p.scaleX,u.scaleY=p.scaleY,u.dirty()):nr(u,p,e);var j=o&&o.getVisual("visualMeta")&&o.getVisual("visualMeta").length>0,k={api:r,geo:c,mapOrGeoModel:e,data:o,isVisualEncodedByVisualMap:j,isGeo:l,transformInfoRaw:f};c.resourceType==="geoJSON"?this._buildGeoJSON(k):c.resourceType==="geoSVG"&&this._buildSVG(k),this._updateController(e,w,t,r),this._updateMapSelectHandler(e,d,r,n)},a.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=Pt(),r=Pt(),n=this._regionsGroup,i=e.transformInfoRaw,l=e.mapOrGeoModel,o=e.data,c=e.geo.projection,d=c&&c.stream;function u(p,g){return g&&(p=g(p)),p&&[p[0]*i.scaleX+i.x,p[1]*i.scaleY+i.y]}function h(p){for(var g=[],b=!d&&c&&c.project,w=0;w<p.length;++w){var j=u(p[w],b);j&&g.push(j)}return g}function f(p){return{shape:{points:h(p)}}}n.removeAll(),se(e.geo.regions,function(p){var g=p.name,b=t.get(g),w=r.get(g)||{},j=w.dataIdx,k=w.regionModel;if(!b){b=t.set(g,new $t),n.add(b),j=o?o.indexOfName(g):null,k=e.isGeo?l.getRegionModel(g):o?o.getItemModel(j):null;var T=k.get("silent",!0);T!=null&&(b.silent=T),r.set(g,{dataIdx:j,regionModel:k})}var E=[],I=[];se(p.geometries,function(H){if(H.type==="polygon"){var G=[H.exterior].concat(H.interiors||[]);d&&(G=uz(G,d)),se(G,function(U){E.push(new fs(f(U)))})}else{var X=H.points;d&&(X=uz(X,d,!0)),se(X,function(U){I.push(new Xi(f(U)))})}});var R=u(p.getCenter(),c&&c.project);function P(H,G){if(H.length){var X=new _N({culling:!0,segmentIgnoreThreshold:1,shape:{paths:H}});b.add(X),sz(e,X,j,k),lz(e,X,g,k,l,j,R),G&&(iz(X),se(X.states,iz))}}P(E),P(I,!0)}),t.each(function(p,g){var b=r.get(g),w=b.dataIdx,j=b.regionModel;oz(e,p,g,j,l,w),cz(e,p,g,j,l),dz(e,p,g,j,l)},this)},a.prototype._buildSVG=function(e){var t=e.geo.map,r=e.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var n=this._svgDispatcherMap=Pt(),i=!1;se(this._svgGraphicRecord.named,function(l){var o=l.name,c=e.mapOrGeoModel,d=e.data,u=l.svgNodeTagLower,h=l.el,f=d?d.indexOfName(o):null,p=c.getRegionModel(o);cSe.get(u)!=null&&h instanceof so&&sz(e,h,f,p),h instanceof so&&(h.culling=!0);var g=p.get("silent",!0);if(g!=null&&(h.silent=g),h.z2EmphasisLift=0,!l.namedFrom&&(uSe.get(u)!=null&&lz(e,h,o,p,c,f,null),oz(e,h,o,p,c,f),cz(e,h,o,p,c),dSe.get(u)!=null)){var b=dz(e,h,o,p,c);b==="self"&&(i=!0);var w=n.get(o)||n.set(o,[]);w.push(h)}},this),this._enableBlurEntireSVG(i,e)},a.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var r=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),n=r.opacity;this._svgGraphicRecord.root.traverse(function(i){if(!i.isGroup){N0(i);var l=i.ensureState("blur").style||{};l.opacity==null&&n!=null&&(l.opacity=n),i.ensureState("emphasis")}})}},a.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},a.prototype.findHighDownDispatchers=function(e,t){if(e==null)return[];var r=t.coordinateSystem;if(r.resourceType==="geoJSON"){var n=this._regionsGroupByName;if(n){var i=n.get(e);return i?[i]:[]}}else if(r.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},a.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},a.prototype._useSVG=function(e){var t=Hd.getGeoResource(e);if(t&&t.type==="geoSVG"){var r=t.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=e}},a.prototype._freeSVG=function(){var e=this._svgMapName;if(e!=null){var t=Hd.getGeoResource(e);t&&t.type==="geoSVG"&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},a.prototype._updateController=function(e,t,r,n){var i=e.coordinateSystem,l=this._controller,o=this._controllerHost;o.zoomLimit=e.get("scaleLimit"),o.zoom=i.getZoom(),l.enable(e.get("roam")||!1,{api:n,zInfo:{component:e},triggerInfo:{roamTrigger:e.get("roamTrigger"),isInSelf:function(u,h,f){return i.containPoint([h,f])},isInClip:function(u,h,f){return!t||t.contain(h,f)}}});var c=e.mainType;function d(){var u={type:"geoRoam",componentType:c};return u[c+"Id"]=e.id,u}l.off("pan").on("pan",function(u){this._mouseDownFlag=!1,qM(o,u.dx,u.dy),n.dispatchAction(et(d(),{dx:u.dx,dy:u.dy,animation:{duration:0}}))},this),l.off("zoom").on("zoom",function(u){this._mouseDownFlag=!1,XM(o,u.scale,u.originX,u.originY),n.dispatchAction(et(d(),{totalZoom:o.zoom,zoom:u.scale,originX:u.originX,originY:u.originY,animation:{duration:0}}))},this)},a.prototype.resetForLabelLayout=function(){this.group.traverse(function(e){var t=e.getTextContent();t&&(t.ignore=DX(t).ignore)})},a.prototype._updateMapSelectHandler=function(e,t,r,n){var i=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",function(){i._mouseDownFlag=!0}),t.on("click",function(l){i._mouseDownFlag&&(i._mouseDownFlag=!1)}))},a})();function sz(a,e,t,r){var n=r.getModel("itemStyle"),i=r.getModel(["emphasis","itemStyle"]),l=r.getModel(["blur","itemStyle"]),o=r.getModel(["select","itemStyle"]),c=aw(n),d=aw(i),u=aw(o),h=aw(l),f=a.data;if(f){var p=f.getItemVisual(t,"style"),g=f.getItemVisual(t,"decal");a.isVisualEncodedByVisualMap&&p.fill&&(c.fill=p.fill),g&&(c.decal=Ex(g,a.api))}e.setStyle(c),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=d,e.ensureState("select").style=u,e.ensureState("blur").style=h,N0(e)}function lz(a,e,t,r,n,i,l){var o=a.data,c=a.isGeo,d=o&&isNaN(o.get(o.mapDimension("value"),i)),u=o&&o.getItemLayout(i);if(c||d||u&&u.showLabel){var h=c?t:i,f=void 0;(!o||i>=0)&&(f=n);var p=l?{normal:{align:"center",verticalAlign:"middle"}}:null;ji(e,fi(r),{labelFetcher:f,labelDataIndex:h,defaultText:t},p);var g=e.getTextContent();if(g&&(DX(g).ignore=g.ignore,e.textConfig&&l)){var b=e.getBoundingRect().clone();e.textConfig.layoutRect=b,e.textConfig.position=[(l[0]-b.x)/b.width*100+"%",(l[1]-b.y)/b.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function oz(a,e,t,r,n,i){a.data?a.data.setItemGraphicEl(i,e):la(e).eventData={componentType:"geo",componentIndex:n.componentIndex,geoIndex:n.componentIndex,name:t,region:r&&r.option||{}}}function cz(a,e,t,r,n){a.data||Yd({el:e,componentModel:n,itemName:t,itemTooltipOption:r.get("tooltip")})}function dz(a,e,t,r,n){e.highDownSilentOnTouch=!!n.get("selectedMode");var i=r.getModel("emphasis"),l=i.get("focus");return on(e,l,i.get("blurScope"),i.get("disabled")),a.isGeo&&bve(e,n,t),l}function uz(a,e,t){var r=[],n;function i(){n=[]}function l(){n.length&&(r.push(n),n=[])}var o=e({polygonStart:i,polygonEnd:l,lineStart:i,lineEnd:l,point:function(c,d){isFinite(c)&&isFinite(d)&&n.push([c,d])},sphere:function(){}});return!t&&o.polygonStart(),se(a,function(c){o.lineStart();for(var d=0;d<c.length;d++)o.point(c[d][0],c[d][1]);o.lineEnd()}),!t&&o.polygonEnd(),r}var hSe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n,i){if(!(i&&i.type==="mapToggleSelect"&&i.from===this.uid)){var l=this.group;if(l.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&i&&i.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),i&&i.type==="geoRoam"&&i.componentType==="series"&&i.seriesId===t.id){var o=this._mapDraw;o&&l.add(o.group)}else if(t.needsDrawMap){var o=this._mapDraw||new IX(n);l.add(o.group),o.draw(t,r,n,this,i),this._mapDraw=o}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(t,r,n)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(t,r,n){var i=t.originalData,l=this.group;i.each(i.mapDimension("value"),function(o,c){if(!isNaN(o)){var d=i.getItemLayout(c);if(!(!d||!d.point)){var u=d.point,h=d.offset,f=new Wd({style:{fill:t.getData().getVisual("style").fill},shape:{cx:u[0]+h*9,cy:u[1],r:3},silent:!0,z2:8+(h?0:$x+1)});if(!h){var p=t.mainSeries.getData(),g=i.getName(c),b=p.indexOfName(g),w=i.getItemModel(c),j=w.getModel("label"),k=p.getItemGraphicEl(b);ji(f,fi(w),{labelFetcher:{getFormattedLabel:function(T,E){return t.getFormattedLabel(b,E)}},defaultText:g}),f.disableLabelAnimation=!0,j.get("position")||f.setTextConfig({position:"bottom"}),k.onHoverStateChange=function(T){H2(f,T)}}l.add(f)}}})},e.type="map",e})(Dr),fSe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.needsDrawMap=!1,t.seriesGroup=[],t.getTooltipPosition=function(r){if(r!=null){var n=this.getData().getName(r),i=this.coordinateSystem,l=i.getRegion(n);return l&&i.dataToPoint(l.getCenter())}},t}return e.prototype.getInitialData=function(t){for(var r=rm(this,{coordDimensions:["value"],encodeDefaulter:ya(fM,this)}),n=Pt(),i=[],l=0,o=r.count();l<o;l++){var c=r.getName(l);n.set(c,l)}var d=Hd.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return se(d.regions,function(u){var h=u.name,f=n.get(h),p=u.properties&&u.properties.echartsStyle,g;f==null?(g={name:h},i.push(g)):g=r.getRawDataItem(f),p&&Ca(g,p)}),r.appendData(i),r},e.prototype.getHostGeoModel=function(){if(NY(this).kind!==fc.boxCoordSys)return this.getReferringComponents("geo",{useDefault:!1,enableAll:!1,enableNone:!1}).models[0]},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(t){var r=this.getData();return r.get(r.mapDimension("value"),t)},e.prototype.getRegionModel=function(t){var r=this.getData();return r.getItemModel(r.indexOfName(t))},e.prototype.formatTooltip=function(t,r,n){for(var i=this.getData(),l=this.getRawValue(t),o=i.getName(t),c=this.seriesGroup,d=[],u=0;u<c.length;u++){var h=c[u].originalData.indexOfName(o),f=i.mapDimension("value");isNaN(c[u].originalData.get(f,h))||d.push(c[u].name)}return Qn("section",{header:d.join(", "),noHeader:!d.length,blocks:[Qn("nameValue",{name:o,value:l})]})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.getLegendIcon=function(t){var r=t.icon||"roundRect",n=Jn(r,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return n.setStyle(t.itemStyle),n.style.stroke="none",r.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill=Be.color.neutral00,n.style.lineWidth=2),n},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:Be.color.tertiary},itemStyle:{borderWidth:.5,borderColor:Be.color.border,areaColor:Be.color.background},emphasis:{label:{show:!0,color:Be.color.primary},itemStyle:{areaColor:Be.color.highlight}},select:{label:{show:!0,color:Be.color.primary},itemStyle:{color:Be.color.highlight}},nameProperty:"name"},e})(Vr);function pSe(a,e){var t={};return se(a,function(r){r.each(r.mapDimension("value"),function(n,i){var l="ec-"+r.getName(i);t[l]=t[l]||[],isNaN(n)||t[l].push(n)})}),a[0].map(a[0].mapDimension("value"),function(r,n){for(var i="ec-"+a[0].getName(n),l=0,o=1/0,c=-1/0,d=t[i].length,u=0;u<d;u++)o=Math.min(o,t[i][u]),c=Math.max(c,t[i][u]),l+=t[i][u];var h;return e==="min"?h=o:e==="max"?h=c:e==="average"?h=l/d:h=l,d===0?NaN:h})}function xSe(a){var e={};a.eachSeriesByType("map",function(t){var r=t.getHostGeoModel(),n=r?"o"+r.id:"i"+t.getMapType();(e[n]=e[n]||[]).push(t)}),se(e,function(t,r){for(var n=pSe(ct(t,function(l){return l.getData()}),t[0].get("mapValueCalculation")),i=0;i<t.length;i++)t[i].originalData=t[i].getData();for(var i=0;i<t.length;i++)t[i].seriesGroup=t,t[i].needsDrawMap=i===0&&!t[i].getHostGeoModel(),t[i].setData(n.cloneShallow()),t[i].mainSeries=t[0]})}function mSe(a){var e={};a.eachSeriesByType("map",function(t){var r=t.getMapType();if(!(t.getHostGeoModel()||e[r])){var n={};se(t.seriesGroup,function(l){var o=l.coordinateSystem,c=l.originalData;l.get("showLegendSymbol")&&a.getComponent("legend")&&c.each(c.mapDimension("value"),function(d,u){var h=c.getName(u),f=o.getRegion(h);if(!(!f||isNaN(d))){var p=n[h]||0,g=o.dataToPoint(f.getCenter());n[h]=p+1,c.setItemLayout(u,{point:g,offset:p})}})});var i=t.getData();i.each(function(l){var o=i.getName(l),c=i.getItemLayout(l)||{};c.showLabel=!n[o],i.setItemLayout(l,c)}),e[r]=!0}})}var hz=Fn,V0=(function(a){Ie(e,a);function e(t,r){var n=a.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new Cd,n._rawTransformable=new Cd,n.name=t,n._opt=r,n}return e.prototype.setBoundingRect=function(t,r,n,i){return this._rect=new ra(t,r,n,i),this._updateCenterAndZoom(),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(t,r,n,i){this._transformTo(t,r,n,i),this._viewRect=new ra(t,r,n,i)},e.prototype._transformTo=function(t,r,n,i){var l=this.getBoundingRect(),o=this._rawTransformable;o.transform=l.calculateTransform(new ra(t,r,n,i));var c=o.parent;o.parent=null,o.decomposeTransform(),o.parent=c,this._updateTransform()},e.prototype.setCenter=function(t){var r=this._opt;r&&r.api&&r.ecModel&&r.ecModel.getShallow("legacyViewCoordSysCenterBase")&&t&&(t=[kt(t[0],r.api.getWidth()),kt(t[1],r.api.getWidth())]),this._centerOption=Xt(t),this._updateCenterAndZoom()},e.prototype.setZoom=function(t){this._zoom=ZM(t||1,this.zoomLimit),this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var t=this.getBoundingRect(),r=t.x+t.width/2,n=t.y+t.height/2;return[r,n]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var t=this._centerOption,r=this._rect;t&&r&&(this._center=[kt(t[0],r.width,r.x),kt(t[1],r.height,r.y)]);var n=this._rawTransformable.getLocalTransform(),i=this._roamTransformable,l=this.getDefaultCenter(),o=this.getCenter(),c=this.getZoom();o=Fn([],o,n),l=Fn([],l,n),i.originX=o[0],i.originY=o[1],i.x=l[0]-o[0],i.y=l[1]-o[1],i.scaleX=i.scaleY=c,this._updateTransform()},e.prototype._updateTransform=function(){var t=this._roamTransformable,r=this._rawTransformable;r.parent=t,t.updateTransform(),r.updateTransform(),oN(this.transform||(this.transform=[]),r.transform||Li()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],Io(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var t=this._rawTransformable,r=this._roamTransformable,n=new Cd;return n.transform=r.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},e.prototype.dataToPoint=function(t,r,n){var i=r?this._rawTransform:this.transform;return n=n||[],i?hz(n,t,i):_s(n,t)},e.prototype.pointToData=function(t,r,n){n=n||[];var i=this.invTransform;return i?hz(n,t,i):(n[0]=t[0],n[1]=t[1],n)},e.prototype.convertToPixel=function(t,r,n){var i=fz(r);return i===this?i.dataToPoint(n):null},e.prototype.convertFromPixel=function(t,r,n){var i=fz(r);return i===this?i.pointToData(n):null},e.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},e.dimensions=["x","y"],e})(Cd);function fz(a){var e=a.seriesModel;return e?e.coordinateSystem:null}var gSe={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},RX=["lng","lat"],$3=(function(a){Ie(e,a);function e(t,r,n){var i=a.call(this,t,{api:n.api,ecModel:n.ecModel})||this;i.dimensions=RX,i.type="geo",i._nameCoordMap=Pt(),i.map=r;var l=n.projection,o=Hd.load(r,n.nameMap,n.nameProperty),c=Hd.getGeoResource(r);i.resourceType=c?c.type:null;var d=i.regions=o.regions,u=gSe[c.type];i._regionsMap=o.regionsMap,i.regions=o.regions,i.projection=l;var h;if(l)for(var f=0;f<d.length;f++){var p=d[f].getBoundingRect(l);h=h||p.clone(),h.union(p)}else h=o.boundingRect;return i.setBoundingRect(h.x,h.y,h.width,h.height),i.aspectScale=l?1:Ht(n.aspectScale,u.aspectScale),i._invertLongitute=l?!1:u.invertLongitute,i}return e.prototype._transformTo=function(t,r,n,i){var l=this.getBoundingRect(),o=this._invertLongitute;l=l.clone(),o&&(l.y=-l.y-l.height);var c=this._rawTransformable;c.transform=l.calculateTransform(new ra(t,r,n,i));var d=c.parent;c.parent=null,c.decomposeTransform(),c.parent=d,o&&(c.scaleY=-c.scaleY),this._updateTransform()},e.prototype.getRegion=function(t){return this._regionsMap.get(t)},e.prototype.getRegionByCoord=function(t){for(var r=this.regions,n=0;n<r.length;n++){var i=r[n];if(i.type==="geoJSON"&&i.contain(t))return r[n]}},e.prototype.addGeoCoord=function(t,r){this._nameCoordMap.set(t,r)},e.prototype.getGeoCoord=function(t){var r=this._regionsMap.get(t);return this._nameCoordMap.get(t)||r&&r.getCenter()},e.prototype.dataToPoint=function(t,r,n){if(At(t)&&(t=this.getGeoCoord(t)),t){var i=this.projection;return i&&(t=i.project(t)),t&&this.projectedToPoint(t,r,n)}},e.prototype.pointToData=function(t,r,n){var i=this.projection;return i&&(t=i.unproject(t)),t&&this.pointToProjected(t,n)},e.prototype.pointToProjected=function(t,r){return a.prototype.pointToData.call(this,t,0,r)},e.prototype.projectedToPoint=function(t,r,n){return a.prototype.dataToPoint.call(this,t,r,n)},e.prototype.convertToPixel=function(t,r,n){var i=pz(r);return i===this?i.dataToPoint(n):null},e.prototype.convertFromPixel=function(t,r,n){var i=pz(r);return i===this?i.pointToData(n):null},e})(V0);ei($3,V0);function pz(a){var e=a.geoModel,t=a.seriesModel;return e?e.coordinateSystem:t?t.coordinateSystem||(t.getReferringComponents("geo",wn).models[0]||{}).coordinateSystem:null}function xz(a,e){var t=a.get("boundingCoords");if(t!=null){var r=t[0],n=t[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(n[0])&&isFinite(n[1])){var i=this.projection;if(i){var l=r[0],o=r[1],c=n[0],d=n[1];r=[1/0,1/0],n=[-1/0,-1/0];var u=function(I,R,P,H){for(var G=P-I,X=H-R,U=0;U<=100;U++){var te=U/100,Z=i.project([I+G*te,R+X*te]);Ju(r,r,Z),eh(n,n,Z)}};u(l,o,c,o),u(c,o,c,d),u(c,d,l,d),u(l,d,c,o)}this.setBoundingRect(r[0],r[1],n[0]-r[0],n[1]-r[1])}}var h=this.getBoundingRect(),f=a.get("layoutCenter"),p=a.get("layoutSize"),g=pi(a,e).refContainer,b=h.width/h.height*this.aspectScale,w=!1,j,k;f&&p&&(j=[kt(f[0],g.width)+g.x,kt(f[1],g.height)+g.y],k=kt(p,Math.min(g.width,g.height)),!isNaN(j[0])&&!isNaN(j[1])&&!isNaN(k)&&(w=!0));var T;if(w)T={},b>1?(T.width=k,T.height=k/b):(T.height=k,T.width=k*b),T.y=j[1]-T.height/2,T.x=j[0]-T.width/2;else{var E=a.getBoxLayoutParams();E.aspect=b,T=cn(E,g),T=AY(a,T,b)}this.setViewRect(T.x,T.y,T.width,T.height),this.setCenter(a.get("center")),this.setZoom(a.get("zoom"))}function vSe(a,e){se(e.get("geoCoord"),function(t,r){a.addGeoCoord(r,t)})}var bSe=(function(){function a(){this.dimensions=RX}return a.prototype.create=function(e,t){var r=[];function n(l){return{nameProperty:l.get("nameProperty"),aspectScale:l.get("aspectScale"),projection:l.get("projection")}}e.eachComponent("geo",function(l,o){var c=l.get("map"),d=new $3(c+o,c,et({nameMap:l.get("nameMap"),api:t,ecModel:e},n(l)));d.zoomLimit=l.get("scaleLimit"),r.push(d),l.coordinateSystem=d,d.model=l,d.resize=xz,d.resize(l,t)}),e.eachSeries(function(l){Ob({targetModel:l,coordSysType:"geo",coordSysProvider:function(){var o=l.subType==="map"?l.getHostGeoModel():l.getReferringComponents("geo",wn).models[0];return o&&o.coordinateSystem},allowNotFound:!0})});var i={};return e.eachSeriesByType("map",function(l){if(!l.getHostGeoModel()){var o=l.getMapType();i[o]=i[o]||[],i[o].push(l)}}),se(i,function(l,o){var c=ct(l,function(u){return u.get("nameMap")}),d=new $3(o,o,et({nameMap:ET(c),api:t,ecModel:e},n(l[0])));d.zoomLimit=$i.apply(null,ct(l,function(u){return u.get("scaleLimit")})),r.push(d),d.resize=xz,d.resize(l[0],t),se(l,function(u){u.coordinateSystem=d,vSe(d,u)})}),r},a.prototype.getFilledRegions=function(e,t,r,n){for(var i=(e||[]).slice(),l=Pt(),o=0;o<i.length;o++)l.set(i[o].name,i[o]);var c=Hd.load(t,r,n);return se(c.regions,function(d){var u=d.name,h=l.get(u),f=d.properties&&d.properties.echartsStyle;h||(h={name:u},i.push(h)),f&&Ca(h,f)}),i},a})(),LX=new bSe,ySe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r,n){this.mergeDefaultAndTheme(t,n);var i=Hd.getGeoResource(t.map);if(i&&i.type==="geoJSON"){var l=t.itemStyle=t.itemStyle||{};"color"in l||(l.color=t.defaultItemStyleColor||Be.color.backgroundTint)}y0(t,"label",["show"])},e.prototype.optionUpdated=function(){var t=this,r=this.option;r.regions=LX.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var n={};this._optionModelMap=Mc(r.regions||[],function(i,l){var o=l.name;return o&&(i.set(o,new Fa(l,t,t.ecModel)),l.selected&&(n[o]=!0)),i},Pt()),r.selectedMap||(r.selectedMap=n)},e.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new Fa(null,this,this.ecModel)},e.prototype.getFormattedLabel=function(t,r){var n=this.getRegionModel(t),i=r==="normal"?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),l={name:t};if(Yt(i))return l.status=r,i(l);if(At(i))return i.replace("{a}",t??"")},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.select=function(t){var r=this.option,n=r.selectedMode;if(n){n!=="multiple"&&(r.selectedMap=null);var i=r.selectedMap||(r.selectedMap={});i[t]=!0}},e.prototype.unSelect=function(t){var r=this.option.selectedMap;r&&(r[t]=!1)},e.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},e.prototype.isSelected=function(t){var r=this.option.selectedMap;return!!(r&&r[t])},e.type="geo",e.layoutMode="box",e.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:Be.color.tertiary},itemStyle:{borderWidth:.5,borderColor:Be.color.border},emphasis:{label:{show:!0,color:Be.color.primary},itemStyle:{color:Be.color.highlight}},select:{label:{show:!0,color:Be.color.primary},itemStyle:{color:Be.color.highlight}},regions:[]},e})(za),wSe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.focusBlurEnabled=!0,t}return e.prototype.init=function(t,r){this._api=r},e.prototype.render=function(t,r,n,i){if(this._model=t,!t.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new IX(n));var l=this._mapDraw;l.draw(t,r,n,this,i),l.group.on("click",this._handleRegionClick,this),l.group.silent=t.get("silent"),this.group.add(l.group),this.updateSelectStatus(t,r,n)},e.prototype._handleRegionClick=function(t){var r;Kf(t.target,function(n){return(r=la(n).eventData)!=null},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},e.prototype.updateSelectStatus=function(t,r,n){var i=this;this._mapDraw.group.traverse(function(l){var o=la(l).eventData;if(o)return i._model.isSelected(o.name)?n.enterSelect(l):n.leaveSelect(l),!0})},e.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e})(tn);function _Se(a,e,t){Hd.registerMap(a,e,t)}function OX(a){a.registerCoordinateSystem("geo",LX),a.registerComponentModel(ySe),a.registerComponentView(wSe),a.registerImpl("registerMap",_Se),a.registerImpl("getMap",function(t){return Hd.getMapForUser(t)});function e(t,r){r.update="geo:updateSelectStatus",a.registerAction(r,function(n,i){var l={},o=[];return i.eachComponent({mainType:"geo",query:n},function(c){c[t](n.name);var d=c.coordinateSystem;se(d.regions,function(h){l[h.name]=c.isSelected(h.name)||!1});var u=[];se(l,function(h,f){l[f]&&u.push(f)}),o.push({geoIndex:c.componentIndex,name:u})}),{selected:l,allSelected:o,name:n.name}})}e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),a.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,r,n){var i=t.componentType;i||(t.geoId!=null?i="geo":t.seriesId!=null&&(i="series")),i||(i="series"),r.eachComponent({mainType:i,query:t},function(l){var o=l.coordinateSystem;if(o.type==="geo"){var c=PN(o,t,l.get("scaleLimit"));l.setCenter&&l.setCenter(c.center),l.setZoom&&l.setZoom(c.zoom),i==="series"&&se(l.seriesGroup,function(d){d.setCenter(c.center),d.setZoom(c.zoom)})}})})}function NSe(a){Ta(OX),a.registerChartView(hSe),a.registerSeriesModel(fSe),a.registerLayout(mSe),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,xSe),v$("map",a.registerAction)}function jSe(a){var e=a;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var t=[e],r,n;r=t.pop();)if(n=r.children,r.isExpand&&n.length)for(var i=n.length,l=i-1;l>=0;l--){var o=n[l];o.hierNode={defaultAncestor:null,ancestor:o,prelim:0,modifier:0,change:0,shift:0,i:l,thread:null},t.push(o)}}function SSe(a,e){var t=a.isExpand?a.children:[],r=a.parentNode.children,n=a.hierNode.i?r[a.hierNode.i-1]:null;if(t.length){CSe(a);var i=(t[0].hierNode.prelim+t[t.length-1].hierNode.prelim)/2;n?(a.hierNode.prelim=n.hierNode.prelim+e(a,n),a.hierNode.modifier=a.hierNode.prelim-i):a.hierNode.prelim=i}else n&&(a.hierNode.prelim=n.hierNode.prelim+e(a,n));a.parentNode.hierNode.defaultAncestor=ASe(a,n,a.parentNode.hierNode.defaultAncestor||r[0],e)}function kSe(a){var e=a.hierNode.prelim+a.parentNode.hierNode.modifier;a.setLayout({x:e},!0),a.hierNode.modifier+=a.parentNode.hierNode.modifier}function mz(a){return arguments.length?a:ESe}function Xg(a,e){return a-=Math.PI/2,{x:e*Math.cos(a),y:e*Math.sin(a)}}function CSe(a){for(var e=a.children,t=e.length,r=0,n=0;--t>=0;){var i=e[t];i.hierNode.prelim+=r,i.hierNode.modifier+=r,n+=i.hierNode.change,r+=i.hierNode.shift+n}}function ASe(a,e,t,r){if(e){for(var n=a,i=a,l=i.parentNode.children[0],o=e,c=n.hierNode.modifier,d=i.hierNode.modifier,u=l.hierNode.modifier,h=o.hierNode.modifier;o=Ik(o),i=Rk(i),o&&i;){n=Ik(n),l=Rk(l),n.hierNode.ancestor=a;var f=o.hierNode.prelim+h-i.hierNode.prelim-d+r(o,i);f>0&&(MSe(TSe(o,a,t),a,f),d+=f,c+=f),h+=o.hierNode.modifier,d+=i.hierNode.modifier,c+=n.hierNode.modifier,u+=l.hierNode.modifier}o&&!Ik(n)&&(n.hierNode.thread=o,n.hierNode.modifier+=h-c),i&&!Rk(l)&&(l.hierNode.thread=i,l.hierNode.modifier+=d-u,t=a)}return t}function Ik(a){var e=a.children;return e.length&&a.isExpand?e[e.length-1]:a.hierNode.thread}function Rk(a){var e=a.children;return e.length&&a.isExpand?e[0]:a.hierNode.thread}function TSe(a,e,t){return a.hierNode.ancestor.parentNode===e.parentNode?a.hierNode.ancestor:t}function MSe(a,e,t){var r=t/(e.hierNode.i-a.hierNode.i);e.hierNode.change-=r,e.hierNode.shift+=t,e.hierNode.modifier+=t,e.hierNode.prelim+=t,a.hierNode.change+=r}function ESe(a,e){return a.parentNode===e.parentNode?1:2}var DSe=(function(){function a(){this.parentPoint=[],this.childPoints=[]}return a})(),ISe=(function(a){Ie(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:Be.color.neutral99,fill:null}},e.prototype.getDefaultShape=function(){return new DSe},e.prototype.buildPath=function(t,r){var n=r.childPoints,i=n.length,l=r.parentPoint,o=n[0],c=n[i-1];if(i===1){t.moveTo(l[0],l[1]),t.lineTo(o[0],o[1]);return}var d=r.orient,u=d==="TB"||d==="BT"?0:1,h=1-u,f=kt(r.forkPosition,1),p=[];p[u]=l[u],p[h]=l[h]+(c[h]-l[h])*f,t.moveTo(l[0],l[1]),t.lineTo(p[0],p[1]),t.moveTo(o[0],o[1]),p[u]=o[u],t.lineTo(p[0],p[1]),p[u]=c[u],t.lineTo(p[0],p[1]),t.lineTo(c[0],c[1]);for(var g=1;g<i-1;g++){var b=n[g];t.moveTo(b[0],b[1]),p[u]=b[u],t.lineTo(p[0],p[1])}},e})(Ra),RSe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t._mainGroup=new $t,t}return e.prototype.init=function(t,r){this._controller=new F0(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,r,n){var i=t.getData(),l=t.layoutInfo,o=this._mainGroup,c=t.get("layout");c==="radial"?(o.x=l.x+l.width/2,o.y=l.y+l.height/2):(o.x=l.x,o.y=l.y),this._updateViewCoordSys(t,n),this._updateController(t,null,r,n);var d=this._data;i.diff(d).add(function(u){gz(i,u)&&vz(i,u,null,o,t)}).update(function(u,h){var f=d.getItemGraphicEl(h);if(!gz(i,u)){f&&yz(d,h,f,o,t);return}vz(i,u,f,o,t)}).remove(function(u){var h=d.getItemGraphicEl(u);h&&yz(d,u,h,o,t)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),t.get("expandAndCollapse")===!0&&i.eachItemGraphicEl(function(u,h){u.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:h})})}),this._data=i},e.prototype._updateViewCoordSys=function(t,r){var n=t.getData(),i=[];n.each(function(h){var f=n.getItemLayout(h);f&&!isNaN(f.x)&&!isNaN(f.y)&&i.push([+f.x,+f.y])});var l=[],o=[];xN(i,l,o);var c=this._min,d=this._max;o[0]-l[0]===0&&(l[0]=c?c[0]:l[0]-1,o[0]=d?d[0]:o[0]+1),o[1]-l[1]===0&&(l[1]=c?c[1]:l[1]-1,o[1]=d?d[1]:o[1]+1);var u=t.coordinateSystem=new V0(null,{api:r,ecModel:t.ecModel});u.zoomLimit=t.get("scaleLimit"),u.setBoundingRect(l[0],l[1],o[0]-l[0],o[1]-l[1]),u.setCenter(t.get("center")),u.setZoom(t.get("zoom")),this.group.attr({x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY}),this._min=l,this._max=o},e.prototype._updateController=function(t,r,n,i){var l=this;CX(t,i,this.group,this._controller,this._controllerHost,r),this._controller.on("zoom",function(o){l._updateNodeAndLinkScale(t)})},e.prototype._updateNodeAndLinkScale=function(t){var r=t.getData(),n=this._getNodeGlobalScale(t);r.eachItemGraphicEl(function(i,l){i.setSymbolScale(n)})},e.prototype._getNodeGlobalScale=function(t){var r=t.coordinateSystem;if(r.type!=="view")return 1;var n=this._nodeScaleRatio,i=r.scaleX||1,l=r.getZoom(),o=(l-1)*n+1;return o/i},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e})(Dr);function gz(a,e){var t=a.getItemLayout(e);return t&&!isNaN(t.x)&&!isNaN(t.y)}function vz(a,e,t,r,n){var i=!t,l=a.tree.getNodeByDataIndex(e),o=l.getModel(),c=l.getVisual("style").fill,d=l.isExpand===!1&&l.children.length!==0?c:Be.color.neutral00,u=a.tree.root,h=l.parentNode===u?l:l.parentNode||l,f=a.getItemGraphicEl(h.dataIndex),p=h.getLayout(),g=f?{x:f.__oldX,y:f.__oldY,rawX:f.__radialOldRawX,rawY:f.__radialOldRawY}:p,b=l.getLayout();i?(t=new Fb(a,e,null,{symbolInnerColor:d,useNameLabel:!0}),t.x=g.x,t.y=g.y):t.updateData(a,e,null,{symbolInnerColor:d,useNameLabel:!0}),t.__radialOldRawX=t.__radialRawX,t.__radialOldRawY=t.__radialRawY,t.__radialRawX=b.rawX,t.__radialRawY=b.rawY,r.add(t),a.setItemGraphicEl(e,t),t.__oldX=t.x,t.__oldY=t.y,nr(t,{x:b.x,y:b.y},n);var w=t.getSymbolPath();if(n.get("layout")==="radial"){var j=u.children[0],k=j.getLayout(),T=j.children.length,E=void 0,I=void 0;if(b.x===k.x&&l.isExpand===!0&&j.children.length){var R={x:(j.children[0].getLayout().x+j.children[T-1].getLayout().x)/2,y:(j.children[0].getLayout().y+j.children[T-1].getLayout().y)/2};E=Math.atan2(R.y-k.y,R.x-k.x),E<0&&(E=Math.PI*2+E),I=R.x<k.x,I&&(E=E-Math.PI)}else E=Math.atan2(b.y-k.y,b.x-k.x),E<0&&(E=Math.PI*2+E),l.children.length===0||l.children.length!==0&&l.isExpand===!1?(I=b.x<k.x,I&&(E=E-Math.PI)):(I=b.x>k.x,I||(E=E-Math.PI));var P=I?"left":"right",H=o.getModel("label"),G=H.get("rotate"),X=G*(Math.PI/180),U=w.getTextContent();U&&(w.setTextConfig({position:H.get("position")||P,rotation:G==null?-E:X,origin:"center"}),U.setStyle("verticalAlign","middle"))}var te=o.get(["emphasis","focus"]),Z=te==="relative"?zv(l.getAncestorsIndices(),l.getDescendantIndices()):te==="ancestor"?l.getAncestorsIndices():te==="descendant"?l.getDescendantIndices():null;Z&&(la(t).focus=Z),LSe(n,l,u,t,g,p,b,r),t.__edge&&(t.onHoverStateChange=function(J){if(J!=="blur"){var B=l.parentNode&&a.getItemGraphicEl(l.parentNode.dataIndex);B&&B.hoverState===Tb||H2(t.__edge,J)}})}function LSe(a,e,t,r,n,i,l,o){var c=e.getModel(),d=a.get("edgeShape"),u=a.get("layout"),h=a.getOrient(),f=a.get(["lineStyle","curveness"]),p=a.get("edgeForkPosition"),g=c.getModel("lineStyle").getLineStyle(),b=r.__edge;if(d==="curve")e.parentNode&&e.parentNode!==t&&(b||(b=r.__edge=new Eb({shape:q3(u,h,f,n,n)})),nr(b,{shape:q3(u,h,f,i,l)},a));else if(d==="polyline"&&u==="orthogonal"&&e!==t&&e.children&&e.children.length!==0&&e.isExpand===!0){for(var w=e.children,j=[],k=0;k<w.length;k++){var T=w[k].getLayout();j.push([T.x,T.y])}b||(b=r.__edge=new ISe({shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]],orient:h,forkPosition:p}})),nr(b,{shape:{parentPoint:[l.x,l.y],childPoints:j}},a)}b&&!(d==="polyline"&&!e.isExpand)&&(b.useStyle(ta({strokeNoScale:!0,fill:null},g)),hi(b,c,"lineStyle"),N0(b),o.add(b))}function bz(a,e,t,r,n){var i=e.tree.root,l=PX(i,a),o=l.source,c=l.sourceLayout,d=e.getItemGraphicEl(a.dataIndex);if(d){var u=e.getItemGraphicEl(o.dataIndex),h=u.__edge,f=d.__edge||(o.isExpand===!1||o.children.length===1?h:void 0),p=r.get("edgeShape"),g=r.get("layout"),b=r.get("orient"),w=r.get(["lineStyle","curveness"]);f&&(p==="curve"?wh(f,{shape:q3(g,b,w,c,c),style:{opacity:0}},r,{cb:function(){t.remove(f)},removeOpt:n}):p==="polyline"&&r.get("layout")==="orthogonal"&&wh(f,{shape:{parentPoint:[c.x,c.y],childPoints:[[c.x,c.y]]},style:{opacity:0}},r,{cb:function(){t.remove(f)},removeOpt:n}))}}function PX(a,e){for(var t=e.parentNode===a?e:e.parentNode||e,r;r=t.getLayout(),r==null;)t=t.parentNode===a?t:t.parentNode||t;return{source:t,sourceLayout:r}}function yz(a,e,t,r,n){var i=a.tree.getNodeByDataIndex(e),l=a.tree.root,o=PX(l,i).sourceLayout,c={duration:n.get("animationDurationUpdate"),easing:n.get("animationEasingUpdate")};wh(t,{x:o.x+1,y:o.y+1},n,{cb:function(){r.remove(t),a.setItemGraphicEl(e,null)},removeOpt:c}),t.fadeOut(null,a.hostModel,{fadeLabel:!0,animation:c}),i.children.forEach(function(d){bz(d,a,r,n,c)}),bz(i,a,r,n,c)}function q3(a,e,t,r,n){var i,l,o,c,d,u,h,f;if(a==="radial"){d=r.rawX,h=r.rawY,u=n.rawX,f=n.rawY;var p=Xg(d,h),g=Xg(d,h+(f-h)*t),b=Xg(u,f+(h-f)*t),w=Xg(u,f);return{x1:p.x||0,y1:p.y||0,x2:w.x||0,y2:w.y||0,cpx1:g.x||0,cpy1:g.y||0,cpx2:b.x||0,cpy2:b.y||0}}else d=r.x,h=r.y,u=n.x,f=n.y,(e==="LR"||e==="RL")&&(i=d+(u-d)*t,l=h,o=u+(d-u)*t,c=f),(e==="TB"||e==="BT")&&(i=d,l=h+(f-h)*t,o=u,c=f+(h-f)*t);return{x1:d,y1:h,x2:u,y2:f,cpx1:i,cpy1:l,cpx2:o,cpy2:c}}var ao=Ia();function zX(a){var e=a.mainData,t=a.datas;t||(t={main:e},a.datasAttr={main:"data"}),a.datas=a.mainData=null,BX(e,t,a),se(t,function(r){se(e.TRANSFERABLE_METHODS,function(n){r.wrapMethod(n,ya(OSe,a))})}),e.wrapMethod("cloneShallow",ya(zSe,a)),se(e.CHANGABLE_METHODS,function(r){e.wrapMethod(r,ya(PSe,a))}),us(t[e.dataType]===e)}function OSe(a,e){if(VSe(this)){var t=et({},ao(this).datas);t[this.dataType]=e,BX(e,t,a)}else QM(e,this.dataType,ao(this).mainData,a);return e}function PSe(a,e){return a.struct&&a.struct.update(),e}function zSe(a,e){return se(ao(e).datas,function(t,r){t!==e&&QM(t.cloneShallow(),r,e,a)}),e}function BSe(a){var e=ao(this).mainData;return a==null||e==null?e:ao(e).datas[a]}function FSe(){var a=ao(this).mainData;return a==null?[{data:a}]:ct(Ua(ao(a).datas),function(e){return{type:e,data:ao(a).datas[e]}})}function VSe(a){return ao(a).mainData===a}function BX(a,e,t){ao(a).datas={},se(e,function(r,n){QM(r,n,a,t)})}function QM(a,e,t,r){ao(t).datas[e]=a,ao(a).mainData=t,a.dataType=e,r.struct&&(a[r.structAttr]=r.struct,r.struct[r.datasAttr[e]]=a),a.getLinkedData=BSe,a.getLinkedDataAll=FSe}var HSe=(function(){function a(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return a.prototype.isRemoved=function(){return this.dataIndex<0},a.prototype.eachNode=function(e,t,r){Yt(e)&&(r=t,t=e,e=null),e=e||{},At(e)&&(e={order:e});var n=e.order||"preorder",i=this[e.attr||"children"],l;n==="preorder"&&(l=t.call(r,this));for(var o=0;!l&&o<i.length;o++)i[o].eachNode(e,t,r);n==="postorder"&&t.call(r,this)},a.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var r=0;r<this.children.length;r++){var n=this.children[r];n.updateDepthAndHeight(e+1),n.height>t&&(t=n.height)}this.height=t+1},a.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,r=this.children,n=r.length;t<n;t++){var i=r[t].getNodeById(e);if(i)return i}},a.prototype.contains=function(e){if(e===this)return!0;for(var t=0,r=this.children,n=r.length;t<n;t++){var i=r[t].contains(e);if(i)return i}},a.prototype.getAncestors=function(e){for(var t=[],r=e?this:this.parentNode;r;)t.push(r),r=r.parentNode;return t.reverse(),t},a.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},a.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(t){e.push(t.dataIndex)}),e},a.prototype.getValue=function(e){var t=this.hostTree.data;return t.getStore().get(t.getDimensionIndex(e||"value"),this.dataIndex)},a.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},a.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},a.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostTree,r=t.data.getItemModel(this.dataIndex);return r.getModel(e)}},a.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},a.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},a.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},a.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},a.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},a.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,t=0;t<e.length;++t)if(e[t]===this)return t;return-1}return-1},a.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},a.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},a})(),JM=(function(){function a(e){this.type="tree",this._nodes=[],this.hostModel=e}return a.prototype.eachNode=function(e,t,r){this.root.eachNode(e,t,r)},a.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},a.prototype.getNodeById=function(e){return this.root.getNodeById(e)},a.prototype.update=function(){for(var e=this.data,t=this._nodes,r=0,n=t.length;r<n;r++)t[r].dataIndex=-1;for(var r=0,n=e.count();r<n;r++)t[e.getRawIndex(r)].dataIndex=r},a.prototype.clearLayouts=function(){this.data.clearItemLayouts()},a.createTree=function(e,t,r){var n=new a(t),i=[],l=1;o(e);function o(u,h){var f=u.value;l=Math.max(l,lt(f)?f.length:1),i.push(u);var p=new HSe(ui(u.name,""),n);h?USe(p,h):n.root=p,n._nodes.push(p);var g=u.children;if(g)for(var b=0;b<g.length;b++)o(g[b],p)}n.root.updateDepthAndHeight(0);var c=zb(i,{coordDimensions:["value"],dimensionsCount:l}).dimensions,d=new As(c,t);return d.initData(i),r&&r(d),zX({mainData:d,struct:n,structAttr:"tree"}),n.update(),n},a})();function USe(a,e){var t=e.children;a.parentNode!==e&&(t.push(a),a.parentNode=e)}function sb(a,e,t){if(a&&ja(e,a.type)>=0){var r=t.getData().tree.root,n=a.targetNode;if(At(n)&&(n=r.getNodeById(n)),n&&r.contains(n))return{node:n};var i=a.targetNodeId;if(i!=null&&(n=r.getNodeById(i)))return{node:n}}}function FX(a){for(var e=[];a;)a=a.parentNode,a&&e.push(a);return e.reverse()}function e6(a,e){var t=FX(a);return ja(t,e)>=0}function BN(a,e){for(var t=[];a;){var r=a.dataIndex;t.push({name:a.name,dataIndex:r,value:e.getRawValue(r)}),a=a.parentNode}return t.reverse(),t}var GSe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t){var r={name:t.name,children:t.data},n=t.leaves||{},i=new Fa(n,this,this.ecModel),l=JM.createTree(r,this,o);function o(h){h.wrapMethod("getItemModel",function(f,p){var g=l.getNodeByDataIndex(p);return g&&g.children.length&&g.isExpand||(f.parentModel=i),f})}var c=0;l.eachNode("preorder",function(h){h.depth>c&&(c=h.depth)});var d=t.expandAndCollapse,u=d&&t.initialTreeDepth>=0?t.initialTreeDepth:c;return l.root.eachNode("preorder",function(h){var f=h.hostTree.data.getRawDataItem(h.dataIndex);h.isExpand=f&&f.collapsed!=null?!f.collapsed:h.depth<=u}),l.data},e.prototype.getOrient=function(){var t=this.get("orient");return t==="horizontal"?t="LR":t==="vertical"&&(t="TB"),t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.formatTooltip=function(t,r,n){for(var i=this.getData().tree,l=i.root.children[0],o=i.getNodeByDataIndex(t),c=o.getValue(),d=o.name;o&&o!==l;)d=o.parentNode.name+"."+d,o=o.parentNode;return Qn("nameValue",{name:d,value:c,noValue:isNaN(c)||c==null})},e.prototype.getDataParams=function(t){var r=a.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return r.treeAncestors=BN(n,this),r.collapsed=!n.isExpand,r},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystemUsage:"box",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,roamTrigger:"global",nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:Be.color.borderTint,width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e})(Vr);function WSe(a,e,t){for(var r=[a],n=[],i;i=r.pop();)if(n.push(i),i.isExpand){var l=i.children;if(l.length)for(var o=0;o<l.length;o++)r.push(l[o])}for(;i=n.pop();)e(i,t)}function vg(a,e){for(var t=[a],r;r=t.pop();)if(e(r),r.isExpand){var n=r.children;if(n.length)for(var i=n.length-1;i>=0;i--)t.push(n[i])}}function YSe(a,e){a.eachSeriesByType("tree",function(t){$Se(t,e)})}function $Se(a,e){var t=pi(a,e).refContainer,r=cn(a.getBoxLayoutParams(),t);a.layoutInfo=r;var n=a.get("layout"),i=0,l=0,o=null;n==="radial"?(i=2*Math.PI,l=Math.min(r.height,r.width)/2,o=mz(function(E,I){return(E.parentNode===I.parentNode?1:2)/E.depth})):(i=r.width,l=r.height,o=mz());var c=a.getData().tree.root,d=c.children[0];if(d){jSe(c),WSe(d,SSe,o),c.hierNode.modifier=-d.hierNode.prelim,vg(d,kSe);var u=d,h=d,f=d;vg(d,function(E){var I=E.getLayout().x;I<u.getLayout().x&&(u=E),I>h.getLayout().x&&(h=E),E.depth>f.depth&&(f=E)});var p=u===h?1:o(u,h)/2,g=p-u.getLayout().x,b=0,w=0,j=0,k=0;if(n==="radial")b=i/(h.getLayout().x+p+g),w=l/(f.depth-1||1),vg(d,function(E){j=(E.getLayout().x+g)*b,k=(E.depth-1)*w;var I=Xg(j,k);E.setLayout({x:I.x,y:I.y,rawX:j,rawY:k},!0)});else{var T=a.getOrient();T==="RL"||T==="LR"?(w=l/(h.getLayout().x+p+g),b=i/(f.depth-1||1),vg(d,function(E){k=(E.getLayout().x+g)*w,j=T==="LR"?(E.depth-1)*b:i-(E.depth-1)*b,E.setLayout({x:j,y:k},!0)})):(T==="TB"||T==="BT")&&(b=i/(h.getLayout().x+p+g),w=l/(f.depth-1||1),vg(d,function(E){j=(E.getLayout().x+g)*b,k=T==="TB"?(E.depth-1)*w:l-(E.depth-1)*w,E.setLayout({x:j,y:k},!0)}))}}}function qSe(a){a.eachSeriesByType("tree",function(e){var t=e.getData(),r=t.tree;r.eachNode(function(n){var i=n.getModel(),l=i.getModel("itemStyle").getItemStyle(),o=t.ensureUniqueItemVisual(n.dataIndex,"style");et(o,l)})})}function XSe(a){a.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(r){var n=e.dataIndex,i=r.getData().tree,l=i.getNodeByDataIndex(n);l.isExpand=!l.isExpand})}),a.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t,r){t.eachComponent({mainType:"series",subType:"tree",query:e},function(n){var i=n.coordinateSystem,l=PN(i,e,n.get("scaleLimit"));n.setCenter(l.center),n.setZoom(l.zoom)})})}function ZSe(a){a.registerChartView(RSe),a.registerSeriesModel(GSe),a.registerLayout(YSe),a.registerVisual(qSe),XSe(a)}var wz=["treemapZoomToNode","treemapRender","treemapMove"];function KSe(a){for(var e=0;e<wz.length;e++)a.registerAction({type:wz[e],update:"updateView"},Bn);a.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,r){r.eachComponent({mainType:"series",subType:"treemap",query:t},n);function n(i,l){var o=["treemapZoomToNode","treemapRootToNode"],c=sb(t,o,i);if(c){var d=i.getViewRoot();d&&(t.direction=e6(d,c.node)?"rollUp":"drillDown"),i.resetViewRoot(c.node)}}})}function VX(a){var e=a.getData(),t=e.tree,r={};t.eachNode(function(n){for(var i=n;i&&i.depth>1;)i=i.parentNode;var l=h3(a.ecModel,i.name||i.dataIndex+"",r);n.setVisual("decal",l)})}var QSe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.preventUsingHoverLayer=!0,t}return e.prototype.getInitialData=function(t,r){var n={name:t.name,children:t.data};HX(n);var i=t.levels||[],l=this.designatedVisualItemStyle={},o=new Fa({itemStyle:l},this,r);i=t.levels=JSe(i,r);var c=ct(i||[],function(h){return new Fa(h,o,r)},this),d=JM.createTree(n,this,u);function u(h){h.wrapMethod("getItemModel",function(f,p){var g=d.getNodeByDataIndex(p),b=g?c[g.depth]:null;return f.parentModel=b||o,f})}return d.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(t,r,n){var i=this.getData(),l=this.getRawValue(t),o=i.getName(t);return Qn("nameValue",{name:o,value:l})},e.prototype.getDataParams=function(t){var r=a.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return r.treeAncestors=BN(n,this),r.treePathInfo=r.treeAncestors,r},e.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},et(this.layoutInfo,t)},e.prototype.mapIdToIndex=function(t){var r=this._idIndexMap;r||(r=this._idIndexMap=Pt(),this._idIndexMapCount=0);var n=r.get(t);return n==null&&r.set(t,n=this._idIndexMapCount++),n},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){VX(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,coordinateSystemUsage:"box",left:Be.size.l,top:Be.size.xxxl,right:Be.size.l,bottom:Be.size.xxxl,sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,scaleLimit:{max:5,min:.2},roam:!0,roamTrigger:"global",nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",bottom:Be.size.m,emptyItemWidth:25,itemStyle:{color:Be.color.backgroundShade,textStyle:{color:Be.color.secondary}},emphasis:{itemStyle:{color:Be.color.background}}},label:{show:!0,distance:0,padding:5,position:"inside",color:Be.color.neutral00,overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:Be.color.neutral00,borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e})(Vr);function HX(a){var e=0;se(a.children,function(r){HX(r);var n=r.value;lt(n)&&(n=n[0]),e+=n});var t=a.value;lt(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),lt(a.value)?a.value[0]=t:a.value=t}function JSe(a,e){var t=Or(e.get("color")),r=Or(e.get(["aria","decal","decals"]));if(t){a=a||[];var n,i;se(a,function(o){var c=new Fa(o),d=c.get("color"),u=c.get("decal");(c.get(["itemStyle","color"])||d&&d!=="none")&&(n=!0),(c.get(["itemStyle","decal"])||u&&u!=="none")&&(i=!0)});var l=a[0]||(a[0]={});return n||(l.color=t.slice()),!i&&r&&(l.decal=r.slice()),a}}var e5e=8,_z=8,Lk=5,t5e=(function(){function a(e){this.group=new $t,e.add(this.group)}return a.prototype.render=function(e,t,r,n){var i=e.getModel("breadcrumb"),l=this.group;if(l.removeAll(),!(!i.get("show")||!r)){var o=i.getModel("itemStyle"),c=i.getModel("emphasis"),d=o.getModel("textStyle"),u=c.getModel(["itemStyle","textStyle"]),h=pi(e,t).refContainer,f={left:i.get("left"),right:i.get("right"),top:i.get("top"),bottom:i.get("bottom")},p={emptyItemWidth:i.get("emptyItemWidth"),totalWidth:0,renderList:[]},g=cn(f,h);this._prepare(r,p,d),this._renderContent(e,p,g,o,c,d,u,n),CN(l,f,h)}},a.prototype._prepare=function(e,t,r){for(var n=e;n;n=n.parentNode){var i=ui(n.getModel().get("name"),""),l=r.getTextRect(i),o=Math.max(l.width+e5e*2,t.emptyItemWidth);t.totalWidth+=o+_z,t.renderList.push({node:n,text:i,width:o})}},a.prototype._renderContent=function(e,t,r,n,i,l,o,c){for(var d=0,u=t.emptyItemWidth,h=e.get(["breadcrumb","height"]),f=t.totalWidth,p=t.renderList,g=i.getModel("itemStyle").getItemStyle(),b=p.length-1;b>=0;b--){var w=p[b],j=w.node,k=w.width,T=w.text;f>r.width&&(f-=k-u,k=u,T=null);var E=new fs({shape:{points:a5e(d,0,k,h,b===p.length-1,b===0)},style:ta(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new tr({style:Fr(l,{text:T})}),textConfig:{position:"inside"},z2:$x*1e4,onclick:ya(c,j)});E.disableLabelAnimation=!0,E.getTextContent().ensureState("emphasis").style=Fr(o,{text:T}),E.ensureState("emphasis").style=g,on(E,i.get("focus"),i.get("blurScope"),i.get("disabled")),this.group.add(E),r5e(E,e,j),d+=k+_z}},a.prototype.remove=function(){this.group.removeAll()},a})();function a5e(a,e,t,r,n,i){var l=[[n?a:a-Lk,e],[a+t,e],[a+t,e+r],[n?a:a-Lk,e+r]];return!i&&l.splice(2,0,[a+t+Lk,e+r/2]),!n&&l.push([a,e+r/2]),l}function r5e(a,e,t){la(a).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:t&&t.dataIndex,name:t&&t.name},treePathInfo:t&&BN(t,e)}}var n5e=(function(){function a(){this._storage=[],this._elExistsMap={}}return a.prototype.add=function(e,t,r,n,i){return this._elExistsMap[e.id]?!1:(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:t,duration:r,delay:n,easing:i}),!0)},a.prototype.finished=function(e){return this._finishedCallback=e,this},a.prototype.start=function(){for(var e=this,t=this._storage.length,r=function(){t--,t<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},n=0,i=this._storage.length;n<i;n++){var l=this._storage[n];l.el.animateTo(l.target,{duration:l.duration,delay:l.delay,easing:l.easing,setToFinal:!0,done:r,aborted:r})}return this},a})();function i5e(){return new n5e}var X3=$t,Nz=Ea,jz=3,Sz="label",kz="upperLabel",s5e=$x*10,l5e=$x*2,o5e=$x*3,Pf=_0([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Cz=function(a){var e=Pf(a);return e.stroke=e.fill=e.lineWidth=null,e},p_=Ia(),c5e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t._state="ready",t._storage=bg(),t}return e.prototype.render=function(t,r,n,i){var l=r.findComponents({mainType:"series",subType:"treemap",query:i});if(!(ja(l,t)<0)){this.seriesModel=t,this.api=n,this.ecModel=r;var o=["treemapZoomToNode","treemapRootToNode"],c=sb(i,o,t),d=i&&i.type,u=t.layoutInfo,h=!this._oldTree,f=this._storage,p=d==="treemapRootToNode"&&c&&f?{rootNodeGroup:f.nodeGroup[c.node.getRawIndex()],direction:i.direction}:null,g=this._giveContainerGroup(u),b=t.get("animation"),w=this._doRender(g,t,p);b&&!h&&(!d||d==="treemapZoomToNode"||d==="treemapRootToNode")?this._doAnimation(g,w,t,p):w.renderFinally(),this._resetController(n),this._renderBreadcrumb(t,n,c)}},e.prototype._giveContainerGroup=function(t){var r=this._containerGroup;return r||(r=this._containerGroup=new X3,this._initEvents(r),this.group.add(r)),r.x=t.x,r.y=t.y,r},e.prototype._doRender=function(t,r,n){var i=r.getData().tree,l=this._oldTree,o=bg(),c=bg(),d=this._storage,u=[];function h(k,T,E,I){return d5e(r,c,d,n,o,u,k,T,E,I)}b(i.root?[i.root]:[],l&&l.root?[l.root]:[],t,i===l||!l,0);var f=w(d);if(this._oldTree=i,this._storage=c,this._controllerHost){var p=this.seriesModel.layoutInfo,g=i.root.getLayout();g.width===p.width&&g.height===p.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:o,willDeleteEls:f,renderFinally:j};function b(k,T,E,I,R){I?(T=k,se(k,function(G,X){!G.isRemoved()&&H(X,X)})):new Fd(T,k,P,P).add(H).update(H).remove(ya(H,null)).execute();function P(G){return G.getId()}function H(G,X){var U=G!=null?k[G]:null,te=X!=null?T[X]:null,Z=h(U,te,E,R);Z&&b(U&&U.viewChildren||[],te&&te.viewChildren||[],Z,I,R+1)}}function w(k){var T=bg();return k&&se(k,function(E,I){var R=T[I];se(E,function(P){P&&(R.push(P),p_(P).willDelete=!0)})}),T}function j(){se(f,function(k){se(k,function(T){T.parent&&T.parent.remove(T)})}),se(u,function(k){k.invisible=!0,k.dirty()})}},e.prototype._doAnimation=function(t,r,n,i){var l=n.get("animationDurationUpdate"),o=n.get("animationEasing"),c=(Yt(l)?0:l)||0,d=(Yt(o)?null:o)||"cubicOut",u=i5e();se(r.willDeleteEls,function(h,f){se(h,function(p,g){if(!p.invisible){var b=p.parent,w,j=p_(b);if(i&&i.direction==="drillDown")w=b===i.rootNodeGroup?{shape:{x:0,y:0,width:j.nodeWidth,height:j.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var k=0,T=0;j.willDelete||(k=j.nodeWidth/2,T=j.nodeHeight/2),w=f==="nodeGroup"?{x:k,y:T,style:{opacity:0}}:{shape:{x:k,y:T,width:0,height:0},style:{opacity:0}}}w&&u.add(p,w,c,0,d)}})}),se(this._storage,function(h,f){se(h,function(p,g){var b=r.lastsForAnimation[f][g],w={};b&&(p instanceof $t?b.oldX!=null&&(w.x=p.x,w.y=p.y,p.x=b.oldX,p.y=b.oldY):(b.oldShape&&(w.shape=et({},p.shape),p.setShape(b.oldShape)),b.fadein?(p.setStyle("opacity",0),w.style={opacity:1}):p.style.opacity!==1&&(w.style={opacity:1})),u.add(p,w,c,0,d))})},this),this._state="animating",u.finished(Tt(function(){this._state="ready",r.renderFinally()},this)).start()},e.prototype._resetController=function(t){var r=this,n=this._controller,i=this._controllerHost;i||(this._controllerHost={target:this.group},i=this._controllerHost);var l=this.seriesModel;n||(n=this._controller=new F0(t.getZr()),n.on("pan",Tt(this._onPan,this)),n.on("zoom",Tt(this._onZoom,this))),n.enable(l.get("roam"),{api:t,zInfo:{component:l},triggerInfo:{roamTrigger:l.get("roamTrigger"),isInSelf:function(o,c,d){var u=r._containerGroup;return u?u.getBoundingRect().contain(c-u.x,d-u.y):!1}}}),i.zoomLimit=l.get("scaleLimit"),i.zoom=l.get("zoom")},e.prototype._clearController=function(){var t=this._controller;this._controllerHost=null,t&&(t.dispose(),t=null)},e.prototype._onPan=function(t){if(this._state!=="animating"&&(Math.abs(t.dx)>jz||Math.abs(t.dy)>jz)){var r=this.seriesModel.getData().tree.root;if(!r)return;var n=r.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+t.dx,y:n.y+t.dy,width:n.width,height:n.height}})}},e.prototype._onZoom=function(t){var r=t.originX,n=t.originY,i=t.scale;if(this._state!=="animating"){var l=this.seriesModel.getData().tree.root;if(!l)return;var o=l.getLayout();if(!o)return;var c=new ra(o.x,o.y,o.width,o.height),d=null,u=this._controllerHost;d=u.zoomLimit;var h=u.zoom=u.zoom||1;if(h*=i,d){var f=d.min||0,p=d.max||1/0;h=Math.max(Math.min(p,h),f)}var g=h/u.zoom;u.zoom=h;var b=this.seriesModel.layoutInfo;r-=b.x,n-=b.y;var w=Li();Ec(w,w,[-r,-n]),LT(w,w,[g,g]),Ec(w,w,[r,n]),c.applyTransform(w),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:c.x,y:c.y,width:c.width,height:c.height}})}},e.prototype._initEvents=function(t){var r=this;t.on("click",function(n){if(r._state==="ready"){var i=r.seriesModel.get("nodeClick",!0);if(i){var l=r.findTarget(n.offsetX,n.offsetY);if(l){var o=l.node;if(o.getLayout().isLeafRoot)r._rootToNode(l);else if(i==="zoomToNode")r._zoomToNode(l);else if(i==="link"){var c=o.hostTree.data.getItemModel(o.dataIndex),d=c.get("link",!0),u=c.get("target",!0)||"blank";d&&Y2(d,u)}}}}},this)},e.prototype._renderBreadcrumb=function(t,r,n){var i=this;n||(n=t.get("leafDepth",!0)!=null?{node:t.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2),n||(n={node:t.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new t5e(this.group))).render(t,r,n.node,function(l){i._state!=="animating"&&(e6(t.getViewRoot(),l)?i._rootToNode({node:l}):i._zoomToNode({node:l}))})},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=bg(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype.findTarget=function(t,r){var n,i=this.seriesModel.getViewRoot();return i.eachNode({attr:"viewChildren",order:"preorder"},function(l){var o=this._storage.background[l.getRawIndex()];if(o){var c=o.transformCoordToLocal(t,r),d=o.shape;if(d.x<=c[0]&&c[0]<=d.x+d.width&&d.y<=c[1]&&c[1]<=d.y+d.height)n={node:l,offsetX:c[0],offsetY:c[1]};else return!1}},this),n},e.type="treemap",e})(Dr);function bg(){return{nodeGroup:[],background:[],content:[]}}function d5e(a,e,t,r,n,i,l,o,c,d){if(!l)return;var u=l.getLayout(),h=a.getData(),f=l.getModel();if(h.setItemGraphicEl(l.dataIndex,null),!u||!u.isInView)return;var p=u.width,g=u.height,b=u.borderWidth,w=u.invisible,j=l.getRawIndex(),k=o&&o.getRawIndex(),T=l.viewChildren,E=u.upperHeight,I=T&&T.length,R=f.getModel("itemStyle"),P=f.getModel(["emphasis","itemStyle"]),H=f.getModel(["blur","itemStyle"]),G=f.getModel(["select","itemStyle"]),X=R.get("borderRadius")||0,U=he("nodeGroup",X3);if(!U)return;if(c.add(U),U.x=u.x||0,U.y=u.y||0,U.markRedraw(),p_(U).nodeWidth=p,p_(U).nodeHeight=g,u.isAboveViewRoot)return U;var te=he("background",Nz,d,l5e);te&&re(U,te,I&&u.upperLabelHeight);var Z=f.getModel("emphasis"),J=Z.get("focus"),B=Z.get("blurScope"),W=Z.get("disabled"),$=J==="ancestor"?l.getAncestorsIndices():J==="descendant"?l.getDescendantIndices():J;if(I)Wv(U)&&Xf(U,!1),te&&(Xf(te,!W),h.setItemGraphicEl(l.dataIndex,te),e3(te,$,B));else{var Q=he("content",Nz,d,o5e);Q&&K(U,Q),te.disableMorphing=!0,te&&Wv(te)&&Xf(te,!1),Xf(U,!W),h.setItemGraphicEl(l.dataIndex,U);var ne=f.getShallow("cursor");ne&&Q.attr("cursor",ne),e3(U,$,B)}return U;function re(Te,ke,Le){var Ne=la(ke);if(Ne.dataIndex=l.dataIndex,Ne.seriesIndex=a.seriesIndex,ke.setShape({x:0,y:0,width:p,height:g,r:X}),w)ae(ke);else{ke.invisible=!1;var _e=l.getVisual("style"),Oe=_e.stroke,De=Cz(R);De.fill=Oe;var Ge=Pf(P);Ge.fill=P.get("borderColor");var Ee=Pf(H);Ee.fill=H.get("borderColor");var rt=Pf(G);if(rt.fill=G.get("borderColor"),Le){var dt=p-2*b;ce(ke,Oe,_e.opacity,{x:b,y:0,width:dt,height:E})}else ke.removeTextContent();ke.setStyle(De),ke.ensureState("emphasis").style=Ge,ke.ensureState("blur").style=Ee,ke.ensureState("select").style=rt,N0(ke)}Te.add(ke)}function K(Te,ke){var Le=la(ke);Le.dataIndex=l.dataIndex,Le.seriesIndex=a.seriesIndex;var Ne=Math.max(p-2*b,0),_e=Math.max(g-2*b,0);if(ke.culling=!0,ke.setShape({x:b,y:b,width:Ne,height:_e,r:X}),w)ae(ke);else{ke.invisible=!1;var Oe=l.getVisual("style"),De=Oe.fill,Ge=Cz(R);Ge.fill=De,Ge.decal=Oe.decal;var Ee=Pf(P),rt=Pf(H),dt=Pf(G);ce(ke,De,Oe.opacity,null),ke.setStyle(Ge),ke.ensureState("emphasis").style=Ee,ke.ensureState("blur").style=rt,ke.ensureState("select").style=dt,N0(ke)}Te.add(ke)}function ae(Te){!Te.invisible&&i.push(Te)}function ce(Te,ke,Le,Ne){var _e=f.getModel(Ne?kz:Sz),Oe=ui(f.get("name"),null),De=_e.getShallow("show");ji(Te,fi(f,Ne?kz:Sz),{defaultText:De?Oe:null,inheritColor:ke,defaultOpacity:Le,labelFetcher:a,labelDataIndex:l.dataIndex});var Ge=Te.getTextContent();if(Ge){var Ee=Ge.style,rt=iN(Ee.padding||0);Ne&&(Te.setTextConfig({layoutRect:Ne}),Ge.disableLabelLayout=!0),Ge.beforeUpdate=function(){var wt=Math.max((Ne?Ne.width:Te.shape.width)-rt[1]-rt[3],0),vt=Math.max((Ne?Ne.height:Te.shape.height)-rt[0]-rt[2],0);(Ee.width!==wt||Ee.height!==vt)&&Ge.setStyle({width:wt,height:vt})},Ee.truncateMinChar=2,Ee.lineOverflow="truncate",de(Ee,Ne,u);var dt=Ge.getState("emphasis");de(dt?dt.style:null,Ne,u)}}function de(Te,ke,Le){var Ne=Te?Te.text:null;if(!ke&&Le.isLeafRoot&&Ne!=null){var _e=a.get("drillDownIcon",!0);Te.text=_e?_e+" "+Ne:Ne}}function he(Te,ke,Le,Ne){var _e=k!=null&&t[Te][k],Oe=n[Te];return _e?(t[Te][k]=null,pe(Oe,_e)):w||(_e=new ke,_e instanceof so&&(_e.z2=u5e(Le,Ne)),Re(Oe,_e)),e[Te][j]=_e}function pe(Te,ke){var Le=Te[j]={};ke instanceof X3?(Le.oldX=ke.x,Le.oldY=ke.y):Le.oldShape=et({},ke.shape)}function Re(Te,ke){var Le=Te[j]={},Ne=l.parentNode,_e=ke instanceof $t;if(Ne&&(!r||r.direction==="drillDown")){var Oe=0,De=0,Ge=n.background[Ne.getRawIndex()];!r&&Ge&&Ge.oldShape&&(Oe=Ge.oldShape.width,De=Ge.oldShape.height),_e?(Le.oldX=0,Le.oldY=De):Le.oldShape={x:Oe,y:De,width:0,height:0}}Le.fadein=!_e}}function u5e(a,e){return a*s5e+e}var lb=se,h5e=aa,x_=-1,Ni=(function(){function a(e){var t=e.mappingMethod,r=e.type,n=this.option=Xt(e);this.type=r,this.mappingMethod=t,this._normalizeData=x5e[t];var i=a.visualHandlers[r];this.applyVisual=i.applyVisual,this.getColorMapper=i.getColorMapper,this._normalizedToVisual=i._normalizedToVisual[t],t==="piecewise"?(Ok(n),f5e(n)):t==="category"?n.categories?p5e(n):Ok(n,!0):(us(t!=="linear"||n.dataExtent),Ok(n))}return a.prototype.mapValueToVisual=function(e){var t=this._normalizeData(e);return this._normalizedToVisual(t,e)},a.prototype.getNormalizer=function(){return Tt(this._normalizeData,this)},a.listVisualTypes=function(){return Ua(a.visualHandlers)},a.isValidType=function(e){return a.visualHandlers.hasOwnProperty(e)},a.eachVisual=function(e,t,r){aa(e)?se(e,t,r):t.call(r,e)},a.mapVisual=function(e,t,r){var n,i=lt(e)?[]:aa(e)?{}:(n=!0,null);return a.eachVisual(e,function(l,o){var c=t.call(r,l,o);n?i=c:i[o]=c}),i},a.retrieveVisuals=function(e){var t={},r;return e&&lb(a.visualHandlers,function(n,i){e.hasOwnProperty(i)&&(t[i]=e[i],r=!0)}),r?t:null},a.prepareVisualTypes=function(e){if(lt(e))e=e.slice();else if(h5e(e)){var t=[];lb(e,function(r,n){t.push(n)}),e=t}else return[];return e.sort(function(r,n){return n==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),e},a.dependsOn=function(e,t){return t==="color"?!!(e&&e.indexOf(t)===0):e===t},a.findPieceIndex=function(e,t,r){for(var n,i=1/0,l=0,o=t.length;l<o;l++){var c=t[l].value;if(c!=null){if(c===e||At(c)&&c===e+"")return l;r&&f(c,l)}}for(var l=0,o=t.length;l<o;l++){var d=t[l],u=d.interval,h=d.close;if(u){if(u[0]===-1/0){if(nw(h[1],e,u[1]))return l}else if(u[1]===1/0){if(nw(h[0],u[0],e))return l}else if(nw(h[0],u[0],e)&&nw(h[1],e,u[1]))return l;r&&f(u[0],l),r&&f(u[1],l)}}if(r)return e===1/0?t.length-1:e===-1/0?0:n;function f(p,g){var b=Math.abs(p-e);b<i&&(i=b,n=g)}},a.visualHandlers={color:{applyVisual:yg("color"),getColorMapper:function(){var e=this.option;return Tt(e.mappingMethod==="category"?function(t,r){return!r&&(t=this._normalizeData(t)),Zg.call(this,t)}:function(t,r,n){var i=!!n;return!r&&(t=this._normalizeData(t)),n=m5(t,e.parsedVisual,n),i?n:kc(n,"rgba")},this)},_normalizedToVisual:{linear:function(e){return kc(m5(e,this.option.parsedVisual),"rgba")},category:Zg,piecewise:function(e,t){var r=K3.call(this,t);return r==null&&(r=kc(m5(e,this.option.parsedVisual),"rgba")),r},fixed:zf}},colorHue:rw(function(e,t){return dh(e,t)}),colorSaturation:rw(function(e,t){return dh(e,null,t)}),colorLightness:rw(function(e,t){return dh(e,null,null,t)}),colorAlpha:rw(function(e,t){return D2(e,t)}),decal:{applyVisual:yg("decal"),_normalizedToVisual:{linear:null,category:Zg,piecewise:null,fixed:null}},opacity:{applyVisual:yg("opacity"),_normalizedToVisual:Z3([0,1])},liftZ:{applyVisual:yg("liftZ"),_normalizedToVisual:{linear:zf,category:zf,piecewise:zf,fixed:zf}},symbol:{applyVisual:function(e,t,r){var n=this.mapValueToVisual(e);r("symbol",n)},_normalizedToVisual:{linear:Az,category:Zg,piecewise:function(e,t){var r=K3.call(this,t);return r==null&&(r=Az.call(this,e)),r},fixed:zf}},symbolSize:{applyVisual:yg("symbolSize"),_normalizedToVisual:Z3([0,1])}},a})();function f5e(a){var e=a.pieceList;a.hasSpecialVisual=!1,se(e,function(t,r){t.originIndex=r,t.visual!=null&&(a.hasSpecialVisual=!0)})}function p5e(a){var e=a.categories,t=a.categoryMap={},r=a.visual;if(lb(e,function(l,o){t[l]=o}),!lt(r)){var n=[];aa(r)?lb(r,function(l,o){var c=t[o];n[c??x_]=l}):n[x_]=r,r=UX(a,n)}for(var i=e.length-1;i>=0;i--)r[i]==null&&(delete t[e[i]],e.pop())}function Ok(a,e){var t=a.visual,r=[];aa(t)?lb(t,function(i){r.push(i)}):t!=null&&r.push(t);var n={color:1,symbol:1};!e&&r.length===1&&!n.hasOwnProperty(a.type)&&(r[1]=r[0]),UX(a,r)}function rw(a){return{applyVisual:function(e,t,r){var n=this.mapValueToVisual(e);r("color",a(t("color"),n))},_normalizedToVisual:Z3([0,1])}}function Az(a){var e=this.option.visual;return e[Math.round(fr(a,[0,1],[0,e.length-1],!0))]||{}}function yg(a){return function(e,t,r){r(a,this.mapValueToVisual(e))}}function Zg(a){var e=this.option.visual;return e[this.option.loop&&a!==x_?a%e.length:a]}function zf(){return this.option.visual[0]}function Z3(a){return{linear:function(e){return fr(e,a,this.option.visual,!0)},category:Zg,piecewise:function(e,t){var r=K3.call(this,t);return r==null&&(r=fr(e,a,this.option.visual,!0)),r},fixed:zf}}function K3(a){var e=this.option,t=e.pieceList;if(e.hasSpecialVisual){var r=Ni.findPieceIndex(a,t),n=t[r];if(n&&n.visual)return n.visual[this.type]}}function UX(a,e){return a.visual=e,a.type==="color"&&(a.parsedVisual=ct(e,function(t){var r=Ks(t);return r||[0,0,0,1]})),e}var x5e={linear:function(a){return fr(a,this.option.dataExtent,[0,1],!0)},piecewise:function(a){var e=this.option.pieceList,t=Ni.findPieceIndex(a,e,!0);if(t!=null)return fr(t,[0,e.length-1],[0,1],!0)},category:function(a){var e=this.option.categories?this.option.categoryMap[a]:a;return e??x_},fixed:Bn};function nw(a,e,t){return a?e<=t:e<t}var m5e="itemStyle",GX=Ia();const g5e={seriesType:"treemap",reset:function(a){var e=a.getData().tree,t=e.root;t.isRemoved()||WX(t,{},a.getViewRoot().getAncestors(),a)}};function WX(a,e,t,r){var n=a.getModel(),i=a.getLayout(),l=a.hostTree.data;if(!(!i||i.invisible||!i.isInView)){var o=n.getModel(m5e),c=v5e(o,e,r),d=l.ensureUniqueItemVisual(a.dataIndex,"style"),u=o.get("borderColor"),h=o.get("borderColorSaturation"),f;h!=null&&(f=Tz(c),u=b5e(h,f)),d.stroke=u;var p=a.viewChildren;if(!p||!p.length)f=Tz(c),d.fill=f;else{var g=y5e(a,n,i,o,c,p);se(p,function(b,w){if(b.depth>=t.length||b===t[b.depth]){var j=w5e(n,c,b,w,g,r);WX(b,j,t,r)}})}}}function v5e(a,e,t){var r=et({},e),n=t.designatedVisualItemStyle;return se(["color","colorAlpha","colorSaturation"],function(i){n[i]=e[i];var l=a.get(i);n[i]=null,l!=null&&(r[i]=l)}),r}function Tz(a){var e=Pk(a,"color");if(e){var t=Pk(a,"colorAlpha"),r=Pk(a,"colorSaturation");return r&&(e=dh(e,null,null,r)),t&&(e=D2(e,t)),e}}function b5e(a,e){return e!=null?dh(e,null,null,a):null}function Pk(a,e){var t=a[e];if(t!=null&&t!=="none")return t}function y5e(a,e,t,r,n,i){if(!(!i||!i.length)){var l=zk(e,"color")||n.color!=null&&n.color!=="none"&&(zk(e,"colorAlpha")||zk(e,"colorSaturation"));if(l){var o=e.get("visualMin"),c=e.get("visualMax"),d=t.dataExtent.slice();o!=null&&o<d[0]&&(d[0]=o),c!=null&&c>d[1]&&(d[1]=c);var u=e.get("colorMappingBy"),h={type:l.name,dataExtent:d,visual:l.range};h.type==="color"&&(u==="index"||u==="id")?(h.mappingMethod="category",h.loop=!0):h.mappingMethod="linear";var f=new Ni(h);return GX(f).drColorMappingBy=u,f}}}function zk(a,e){var t=a.get(e);return lt(t)&&t.length?{name:e,range:t}:null}function w5e(a,e,t,r,n,i){var l=et({},e);if(n){var o=n.type,c=o==="color"&&GX(n).drColorMappingBy,d=c==="index"?r:c==="id"?i.mapIdToIndex(t.getId()):t.getValue(a.get("visualDimension"));l[o]=n.mapValueToVisual(d)}return l}var ob=Math.max,m_=Math.min,Mz=$i,t6=se,YX=["itemStyle","borderWidth"],_5e=["itemStyle","gapWidth"],N5e=["upperLabel","show"],j5e=["upperLabel","height"];const S5e={seriesType:"treemap",reset:function(a,e,t,r){var n=a.option,i=pi(a,t).refContainer,l=cn(a.getBoxLayoutParams(),i),o=n.size||[],c=kt(Mz(l.width,o[0]),i.width),d=kt(Mz(l.height,o[1]),i.height),u=r&&r.type,h=["treemapZoomToNode","treemapRootToNode"],f=sb(r,h,a),p=u==="treemapRender"||u==="treemapMove"?r.rootRect:null,g=a.getViewRoot(),b=FX(g);if(u!=="treemapMove"){var w=u==="treemapZoomToNode"?E5e(a,f,g,c,d):p?[p.width,p.height]:[c,d],j=n.sort;j&&j!=="asc"&&j!=="desc"&&(j="desc");var k={squareRatio:n.squareRatio,sort:j,leafDepth:n.leafDepth};g.hostTree.clearLayouts();var T={x:0,y:0,width:w[0],height:w[1],area:w[0]*w[1]};g.setLayout(T),$X(g,k,!1,0),T=g.getLayout(),t6(b,function(I,R){var P=(b[R+1]||g).getValue();I.setLayout(et({dataExtent:[P,P],borderWidth:0,upperHeight:0},T))})}var E=a.getData().tree.root;E.setLayout(D5e(l,p,f),!0),a.setLayoutInfo(l),qX(E,new ra(-l.x,-l.y,t.getWidth(),t.getHeight()),b,g,0)}};function $X(a,e,t,r){var n,i;if(!a.isRemoved()){var l=a.getLayout();n=l.width,i=l.height;var o=a.getModel(),c=o.get(YX),d=o.get(_5e)/2,u=XX(o),h=Math.max(c,u),f=c-d,p=h-d;a.setLayout({borderWidth:c,upperHeight:h,upperLabelHeight:u},!0),n=ob(n-2*f,0),i=ob(i-f-p,0);var g=n*i,b=k5e(a,o,g,e,t,r);if(b.length){var w={x:f,y:p,width:n,height:i},j=m_(n,i),k=1/0,T=[];T.area=0;for(var E=0,I=b.length;E<I;){var R=b[E];T.push(R),T.area+=R.getLayout().area;var P=M5e(T,j,e.squareRatio);P<=k?(E++,k=P):(T.area-=T.pop().getLayout().area,Ez(T,j,w,d,!1),j=m_(w.width,w.height),T.length=T.area=0,k=1/0)}if(T.length&&Ez(T,j,w,d,!0),!t){var H=o.get("childrenVisibleMin");H!=null&&g<H&&(t=!0)}for(var E=0,I=b.length;E<I;E++)$X(b[E],e,t,r+1)}}}function k5e(a,e,t,r,n,i){var l=a.children||[],o=r.sort;o!=="asc"&&o!=="desc"&&(o=null);var c=r.leafDepth!=null&&r.leafDepth<=i;if(n&&!c)return a.viewChildren=[];l=pr(l,function(p){return!p.isRemoved()}),A5e(l,o);var d=T5e(e,l,o);if(d.sum===0)return a.viewChildren=[];if(d.sum=C5e(e,t,d.sum,o,l),d.sum===0)return a.viewChildren=[];for(var u=0,h=l.length;u<h;u++){var f=l[u].getValue()/d.sum*t;l[u].setLayout({area:f})}return c&&(l.length&&a.setLayout({isLeafRoot:!0},!0),l.length=0),a.viewChildren=l,a.setLayout({dataExtent:d.dataExtent},!0),l}function C5e(a,e,t,r,n){if(!r)return t;for(var i=a.get("visibleMin"),l=n.length,o=l,c=l-1;c>=0;c--){var d=n[r==="asc"?l-c-1:c].getValue();d/t*e<i&&(o=c,t-=d)}return r==="asc"?n.splice(0,l-o):n.splice(o,l-o),t}function A5e(a,e){return e&&a.sort(function(t,r){var n=e==="asc"?t.getValue()-r.getValue():r.getValue()-t.getValue();return n===0?e==="asc"?t.dataIndex-r.dataIndex:r.dataIndex-t.dataIndex:n}),a}function T5e(a,e,t){for(var r=0,n=0,i=e.length;n<i;n++)r+=e[n].getValue();var l=a.get("visualDimension"),o;return!e||!e.length?o=[NaN,NaN]:l==="value"&&t?(o=[e[e.length-1].getValue(),e[0].getValue()],t==="asc"&&o.reverse()):(o=[1/0,-1/0],t6(e,function(c){var d=c.getValue(l);d<o[0]&&(o[0]=d),d>o[1]&&(o[1]=d)})),{sum:r,dataExtent:o}}function M5e(a,e,t){for(var r=0,n=1/0,i=0,l=void 0,o=a.length;i<o;i++)l=a[i].getLayout().area,l&&(l<n&&(n=l),l>r&&(r=l));var c=a.area*a.area,d=e*e*t;return c?ob(d*r/c,c/(d*n)):1/0}function Ez(a,e,t,r,n){var i=e===t.width?0:1,l=1-i,o=["x","y"],c=["width","height"],d=t[o[i]],u=e?a.area/e:0;(n||u>t[c[l]])&&(u=t[c[l]]);for(var h=0,f=a.length;h<f;h++){var p=a[h],g={},b=u?p.getLayout().area/u:0,w=g[c[l]]=ob(u-2*r,0),j=t[o[i]]+t[c[i]]-d,k=h===f-1||j<b?j:b,T=g[c[i]]=ob(k-2*r,0);g[o[l]]=t[o[l]]+m_(r,w/2),g[o[i]]=d+m_(r,T/2),d+=k,p.setLayout(g,!0)}t[o[l]]+=u,t[c[l]]-=u}function E5e(a,e,t,r,n){var i=(e||{}).node,l=[r,n];if(!i||i===t)return l;for(var o,c=r*n,d=c*a.option.zoomToNodeRatio;o=i.parentNode;){for(var u=0,h=o.children,f=0,p=h.length;f<p;f++)u+=h[f].getValue();var g=i.getValue();if(g===0)return l;d*=u/g;var b=o.getModel(),w=b.get(YX),j=Math.max(w,XX(b));d+=4*w*w+(3*w+j)*Math.pow(d,.5),d>OO&&(d=OO),i=o}d<c&&(d=c);var k=Math.pow(d/c,.5);return[r*k,n*k]}function D5e(a,e,t){if(e)return{x:e.x,y:e.y};var r={x:0,y:0};if(!t)return r;var n=t.node,i=n.getLayout();if(!i)return r;for(var l=[i.width/2,i.height/2],o=n;o;){var c=o.getLayout();l[0]+=c.x,l[1]+=c.y,o=o.parentNode}return{x:a.width/2-l[0],y:a.height/2-l[1]}}function qX(a,e,t,r,n){var i=a.getLayout(),l=t[n],o=l&&l===a;if(!(l&&!o||n===t.length&&a!==r)){a.setLayout({isInView:!0,invisible:!o&&!e.intersect(i),isAboveViewRoot:o},!0);var c=new ra(e.x-i.x,e.y-i.y,e.width,e.height);t6(a.viewChildren||[],function(d){qX(d,c,t,r,n+1)})}}function XX(a){return a.get(N5e)?a.get(j5e):0}function I5e(a){a.registerSeriesModel(QSe),a.registerChartView(c5e),a.registerVisual(g5e),a.registerLayout(S5e),KSe(a)}function R5e(a){var e=a.findComponents({mainType:"legend"});!e||!e.length||a.eachSeriesByType("graph",function(t){var r=t.getCategoriesData(),n=t.getGraph(),i=n.data,l=r.mapArray(r.getName);i.filterSelf(function(o){var c=i.getItemModel(o),d=c.getShallow("category");if(d!=null){Ka(d)&&(d=l[d]);for(var u=0;u<e.length;u++)if(!e[u].isSelected(d))return!1}return!0})})}function L5e(a){var e={};a.eachSeriesByType("graph",function(t){var r=t.getCategoriesData(),n=t.getData(),i={};r.each(function(l){var o=r.getName(l);i["ec-"+o]=l;var c=r.getItemModel(l),d=c.getModel("itemStyle").getItemStyle();d.fill||(d.fill=t.getColorFromPalette(o,e)),r.setItemVisual(l,"style",d);for(var u=["symbol","symbolSize","symbolKeepAspect"],h=0;h<u.length;h++){var f=c.getShallow(u[h],!0);f!=null&&r.setItemVisual(l,u[h],f)}}),r.count()&&n.each(function(l){var o=n.getItemModel(l),c=o.getShallow("category");if(c!=null){At(c)&&(c=i["ec-"+c]);var d=r.getItemVisual(c,"style"),u=n.ensureUniqueItemVisual(l,"style");et(u,d);for(var h=["symbol","symbolSize","symbolKeepAspect"],f=0;f<h.length;f++)n.setItemVisual(l,h[f],r.getItemVisual(c,h[f]))}})})}function iw(a){return a instanceof Array||(a=[a,a]),a}function O5e(a){a.eachSeriesByType("graph",function(e){var t=e.getGraph(),r=e.getEdgeData(),n=iw(e.get("edgeSymbol")),i=iw(e.get("edgeSymbolSize"));r.setVisual("fromSymbol",n&&n[0]),r.setVisual("toSymbol",n&&n[1]),r.setVisual("fromSymbolSize",i&&i[0]),r.setVisual("toSymbolSize",i&&i[1]),r.setVisual("style",e.getModel("lineStyle").getLineStyle()),r.each(function(l){var o=r.getItemModel(l),c=t.getEdgeByIndex(l),d=iw(o.getShallow("symbol",!0)),u=iw(o.getShallow("symbolSize",!0)),h=o.getModel("lineStyle").getLineStyle(),f=r.ensureUniqueItemVisual(l,"style");switch(et(f,h),f.stroke){case"source":{var p=c.node1.getVisual("style");f.stroke=p&&p.fill;break}case"target":{var p=c.node2.getVisual("style");f.stroke=p&&p.fill;break}}d[0]&&c.setVisual("fromSymbol",d[0]),d[1]&&c.setVisual("toSymbol",d[1]),u[0]&&c.setVisual("fromSymbolSize",u[0]),u[1]&&c.setVisual("toSymbolSize",u[1])})})}var Q3="-->",FN=function(a){return a.get("autoCurveness")||null},ZX=function(a,e){var t=FN(a),r=20,n=[];if(Ka(t))r=t;else if(lt(t)){a.__curvenessList=t;return}e>r&&(r=e);var i=r%2?r+2:r+3;n=[];for(var l=0;l<i;l++)n.push((l%2?l+1:l)/10*(l%2?-1:1));a.__curvenessList=n},cb=function(a,e,t){var r=[a.id,a.dataIndex].join("."),n=[e.id,e.dataIndex].join(".");return[t.uid,r,n].join(Q3)},KX=function(a){var e=a.split(Q3);return[e[0],e[2],e[1]].join(Q3)},P5e=function(a,e){var t=cb(a.node1,a.node2,e);return e.__edgeMap[t]},z5e=function(a,e){var t=J3(cb(a.node1,a.node2,e),e),r=J3(cb(a.node2,a.node1,e),e);return t+r},J3=function(a,e){var t=e.__edgeMap;return t[a]?t[a].length:0};function B5e(a){FN(a)&&(a.__curvenessList=[],a.__edgeMap={},ZX(a))}function F5e(a,e,t,r){if(FN(t)){var n=cb(a,e,t),i=t.__edgeMap,l=i[KX(n)];i[n]&&!l?i[n].isForward=!0:l&&i[n]&&(l.isForward=!0,i[n].isForward=!1),i[n]=i[n]||[],i[n].push(r)}}function a6(a,e,t,r){var n=FN(e),i=lt(n);if(!n)return null;var l=P5e(a,e);if(!l)return null;for(var o=-1,c=0;c<l.length;c++)if(l[c]===t){o=c;break}var d=z5e(a,e);ZX(e,d),a.lineStyle=a.lineStyle||{};var u=cb(a.node1,a.node2,e),h=e.__curvenessList,f=i||d%2?0:1;if(l.isForward)return h[f+o];var p=KX(u),g=J3(p,e),b=h[o+g+f];return r?i?n&&n[0]===0?(g+f)%2?b:-b:((g%2?0:1)+f)%2?b:-b:(g+f)%2?b:-b:h[o+g+f]}function QX(a){var e=a.coordinateSystem;if(!(e&&e.type!=="view")){var t=a.getGraph();t.eachNode(function(r){var n=r.getModel();r.setLayout([+n.get("x"),+n.get("y")])}),r6(t,a)}}function r6(a,e){a.eachEdge(function(t,r){var n=jl(t.getModel().get(["lineStyle","curveness"]),-a6(t,e,r,!0),0),i=Td(t.node1.getLayout()),l=Td(t.node2.getLayout()),o=[i,l];+n&&o.push([(i[0]+l[0])/2-(i[1]-l[1])*n,(i[1]+l[1])/2-(l[0]-i[0])*n]),t.setLayout(o)})}function V5e(a,e){a.eachSeriesByType("graph",function(t){var r=t.get("layout"),n=t.coordinateSystem;if(n&&n.type!=="view"){var i=t.getData(),l=[];se(n.dimensions,function(f){l=l.concat(i.mapDimensionsAll(f))});for(var o=0;o<i.count();o++){for(var c=[],d=!1,u=0;u<l.length;u++){var h=i.get(l[u],o);isNaN(h)||(d=!0),c.push(h)}d?i.setItemLayout(o,n.dataToPoint(c)):i.setItemLayout(o,[NaN,NaN])}r6(i.graph,t)}else(!r||r==="none")&&QX(t)})}function Kg(a){var e=a.coordinateSystem;if(e.type!=="view")return 1;var t=a.option.nodeScaleRatio,r=e.scaleX,n=e.getZoom(),i=(n-1)*t+1;return i/r}function Qg(a){var e=a.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var Dz=Math.PI,Bk=[];function n6(a,e,t,r){var n=a.coordinateSystem;if(!(n&&n.type!=="view")){var i=n.getBoundingRect(),l=a.getData(),o=l.graph,c=i.width/2+i.x,d=i.height/2+i.y,u=Math.min(i.width,i.height)/2,h=l.count();if(l.setLayout({cx:c,cy:d}),!!h){if(t){var f=n.pointToData(r),p=f[0],g=f[1],b=[p-c,g-d];Gx(b,b),Lw(b,b,u),t.setLayout([c+b[0],d+b[1]],!0);var w=a.get(["circular","rotateLabel"]);JX(t,w,c,d)}H5e[e](a,o,l,u,c,d,h),o.eachEdge(function(j,k){var T=jl(j.getModel().get(["lineStyle","curveness"]),a6(j,a,k),0),E=Td(j.node1.getLayout()),I=Td(j.node2.getLayout()),R,P=(E[0]+I[0])/2,H=(E[1]+I[1])/2;+T&&(T*=3,R=[c*T+P*(1-T),d*T+H*(1-T)]),j.setLayout([E,I,R])})}}}var H5e={value:function(a,e,t,r,n,i,l){var o=0,c=t.getSum("value"),d=Math.PI*2/(c||l);e.eachNode(function(u){var h=u.getValue("value"),f=d*(c?h:1)/2;o+=f,u.setLayout([r*Math.cos(o)+n,r*Math.sin(o)+i]),o+=f})},symbolSize:function(a,e,t,r,n,i,l){var o=0;Bk.length=l;var c=Kg(a);e.eachNode(function(h){var f=Qg(h);isNaN(f)&&(f=2),f<0&&(f=0),f*=c;var p=Math.asin(f/2/r);isNaN(p)&&(p=Dz/2),Bk[h.dataIndex]=p,o+=p*2});var d=(2*Dz-o)/l/2,u=0;e.eachNode(function(h){var f=d+Bk[h.dataIndex];u+=f,(!h.getLayout()||!h.getLayout().fixed)&&h.setLayout([r*Math.cos(u)+n,r*Math.sin(u)+i]),u+=f})}};function JX(a,e,t,r){var n=a.getGraphicEl();if(n){var i=a.getModel(),l=i.get(["label","rotate"])||0,o=n.getSymbolPath();if(e){var c=a.getLayout(),d=Math.atan2(c[1]-r,c[0]-t);d<0&&(d=Math.PI*2+d);var u=c[0]<t;u&&(d=d-Math.PI);var h=u?"left":"right";o.setTextConfig({rotation:-d,position:h,origin:"center"});var f=o.ensureState("emphasis");et(f.textConfig||(f.textConfig={}),{position:h})}else o.setTextConfig({rotation:l*=Math.PI/180})}}function U5e(a){a.eachSeriesByType("graph",function(e){e.get("layout")==="circular"&&n6(e,"symbolSize")})}var Rp=w4;function G5e(a,e,t){for(var r=a,n=e,i=t.rect,l=i.width,o=i.height,c=[i.x+l/2,i.y+o/2],d=t.gravity==null?.1:t.gravity,u=0;u<r.length;u++){var h=r[u];h.p||(h.p=D0(l*(Math.random()-.5)+c[0],o*(Math.random()-.5)+c[1])),h.pp=Td(h.p),h.edges=null}var f=t.friction==null?.6:t.friction,p=f,g,b;return{warmUp:function(){p=f*.8},setFixed:function(w){r[w].fixed=!0},setUnfixed:function(w){r[w].fixed=!1},beforeStep:function(w){g=w},afterStep:function(w){b=w},step:function(w){g&&g(r,n);for(var j=[],k=r.length,T=0;T<n.length;T++){var E=n[T];if(!E.ignoreForceLayout){var I=E.n1,R=E.n2;$f(j,R.p,I.p);var P=_4(j)-E.d,H=R.w/(I.w+R.w);isNaN(H)&&(H=0),Gx(j,j),!I.fixed&&Rp(I.p,I.p,j,H*P*p),!R.fixed&&Rp(R.p,R.p,j,-(1-H)*P*p)}}for(var T=0;T<k;T++){var G=r[T];G.fixed||($f(j,c,G.p),Rp(G.p,G.p,j,d*p))}for(var T=0;T<k;T++)for(var I=r[T],X=T+1;X<k;X++){var R=r[X];$f(j,R.p,I.p);var P=_4(j);P===0&&(IT(j,Math.random()-.5,Math.random()-.5),P=1);var U=(I.rep+R.rep)/P/P;!I.fixed&&Rp(I.pp,I.pp,j,U),!R.fixed&&Rp(R.pp,R.pp,j,-U)}for(var te=[],T=0;T<k;T++){var G=r[T];G.fixed||($f(te,G.p,G.pp),Rp(G.p,G.p,te,p),_s(G.pp,G.p))}p=p*.992;var Z=p<.01;b&&b(r,n,Z),w&&w(Z)}}}function W5e(a){a.eachSeriesByType("graph",function(e){var t=e.coordinateSystem;if(!(t&&t.type!=="view"))if(e.get("layout")==="force"){var r=e.preservedPoints||{},n=e.getGraph(),i=n.data,l=n.edgeData,o=e.getModel("force"),c=o.get("initLayout");e.preservedPoints?i.each(function(T){var E=i.getId(T);i.setItemLayout(T,r[E]||[NaN,NaN])}):!c||c==="none"?QX(e):c==="circular"&&n6(e,"value");var d=i.getDataExtent("value"),u=l.getDataExtent("value"),h=o.get("repulsion"),f=o.get("edgeLength"),p=lt(h)?h:[h,h],g=lt(f)?f:[f,f];g=[g[1],g[0]];var b=i.mapArray("value",function(T,E){var I=i.getItemLayout(E),R=fr(T,d,p);return isNaN(R)&&(R=(p[0]+p[1])/2),{w:R,rep:R,fixed:i.getItemModel(E).get("fixed"),p:!I||isNaN(I[0])||isNaN(I[1])?null:I}}),w=l.mapArray("value",function(T,E){var I=n.getEdgeByIndex(E),R=fr(T,u,g);isNaN(R)&&(R=(g[0]+g[1])/2);var P=I.getModel(),H=jl(I.getModel().get(["lineStyle","curveness"]),-a6(I,e,E,!0),0);return{n1:b[I.node1.dataIndex],n2:b[I.node2.dataIndex],d:R,curveness:H,ignoreForceLayout:P.get("ignoreForceLayout")}}),j=t.getBoundingRect(),k=G5e(b,w,{rect:j,gravity:o.get("gravity"),friction:o.get("friction")});k.beforeStep(function(T,E){for(var I=0,R=T.length;I<R;I++)T[I].fixed&&_s(T[I].p,n.getNodeByIndex(I).getLayout())}),k.afterStep(function(T,E,I){for(var R=0,P=T.length;R<P;R++)T[R].fixed||n.getNodeByIndex(R).setLayout(T[R].p),r[i.getId(R)]=T[R].p;for(var R=0,P=E.length;R<P;R++){var H=E[R],G=n.getEdgeByIndex(R),X=H.n1.p,U=H.n2.p,te=G.getLayout();te=te?te.slice():[],te[0]=te[0]||[],te[1]=te[1]||[],_s(te[0],X),_s(te[1],U),+H.curveness&&(te[2]=[(X[0]+U[0])/2-(X[1]-U[1])*H.curveness,(X[1]+U[1])/2-(U[0]-X[0])*H.curveness]),G.setLayout(te)}}),e.forceLayout=k,e.preservedPoints=r,k.step()}else e.forceLayout=null})}function Y5e(a,e,t){var r=pi(a,e),n=et(a.getBoxLayoutParams(),{aspect:t}),i=cn(n,r.refContainer);return AY(a,i,t)}function $5e(a,e){var t=[];return a.eachSeriesByType("graph",function(r){Ob({targetModel:r,coordSysType:"view",coordSysProvider:n,isDefaultDataCoordSys:!0});function n(){var i=r.getData(),l=i.mapArray(function(g){var b=i.getItemModel(g);return[+b.get("x"),+b.get("y")]}),o=[],c=[];xN(l,o,c),c[0]-o[0]===0&&(c[0]+=1,o[0]-=1),c[1]-o[1]===0&&(c[1]+=1,o[1]-=1);var d=(c[0]-o[0])/(c[1]-o[1]),u=Y5e(r,e,d);isNaN(d)&&(o=[u.x,u.y],c=[u.x+u.width,u.y+u.height]);var h=c[0]-o[0],f=c[1]-o[1],p=new V0(null,{api:e,ecModel:a});return p.zoomLimit=r.get("scaleLimit"),p.setBoundingRect(o[0],o[1],h,f),p.setViewRect(u.x,u.y,u.width,u.height),p.setCenter(r.get("center")),p.setZoom(r.get("zoom")),t.push(p),p}}),t}var Iz=qn.prototype,Fk=Eb.prototype,eZ=(function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a})();(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e})(eZ);function Vk(a){return isNaN(+a.cpx1)||isNaN(+a.cpy1)}var tZ=(function(a){Ie(e,a);function e(t){var r=a.call(this,t)||this;return r.type="ec-line",r}return e.prototype.getDefaultStyle=function(){return{stroke:Be.color.neutral99,fill:null}},e.prototype.getDefaultShape=function(){return new eZ},e.prototype.buildPath=function(t,r){Vk(r)?Iz.buildPath.call(this,t,r):Fk.buildPath.call(this,t,r)},e.prototype.pointAt=function(t){return Vk(this.shape)?Iz.pointAt.call(this,t):Fk.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var r=this.shape,n=Vk(r)?[r.x2-r.x1,r.y2-r.y1]:Fk.tangentAt.call(this,t);return Gx(n,n)},e})(Ra),Hk=["fromSymbol","toSymbol"];function Rz(a){return"_"+a+"Type"}function Lz(a,e,t){var r=e.getItemVisual(t,a);if(!r||r==="none")return r;var n=e.getItemVisual(t,a+"Size"),i=e.getItemVisual(t,a+"Rotate"),l=e.getItemVisual(t,a+"Offset"),o=e.getItemVisual(t,a+"KeepAspect"),c=em(n),d=P0(l||0,c);return r+c+d+(i||"")+(o||"")}function Oz(a,e,t){var r=e.getItemVisual(t,a);if(!(!r||r==="none")){var n=e.getItemVisual(t,a+"Size"),i=e.getItemVisual(t,a+"Rotate"),l=e.getItemVisual(t,a+"Offset"),o=e.getItemVisual(t,a+"KeepAspect"),c=em(n),d=P0(l||0,c),u=Jn(r,-c[0]/2+d[0],-c[1]/2+d[1],c[0],c[1],null,o);return u.__specifiedRotation=i==null||isNaN(i)?void 0:+i*Math.PI/180||0,u.name=a,u}}function q5e(a){var e=new tZ({name:"line",subPixelOptimize:!0});return eA(e.shape,a),e}function eA(a,e){a.x1=e[0][0],a.y1=e[0][1],a.x2=e[1][0],a.y2=e[1][1],a.percent=1;var t=e[2];t?(a.cpx1=t[0],a.cpy1=t[1]):(a.cpx1=NaN,a.cpy1=NaN)}var i6=(function(a){Ie(e,a);function e(t,r,n){var i=a.call(this)||this;return i._createLine(t,r,n),i}return e.prototype._createLine=function(t,r,n){var i=t.hostModel,l=t.getItemLayout(r),o=t.getItemVisual(r,"z2"),c=q5e(l);c.shape.percent=0,en(c,{z2:Ht(o,0),shape:{percent:1}},i,r),this.add(c),se(Hk,function(d){var u=Oz(d,t,r);this.add(u),this[Rz(d)]=Lz(d,t,r)},this),this._updateCommonStl(t,r,n)},e.prototype.updateData=function(t,r,n){var i=t.hostModel,l=this.childOfName("line"),o=t.getItemLayout(r),c={shape:{}};eA(c.shape,o),nr(l,c,i,r),se(Hk,function(d){var u=Lz(d,t,r),h=Rz(d);if(this[h]!==u){this.remove(this.childOfName(d));var f=Oz(d,t,r);this.add(f)}this[h]=u},this),this._updateCommonStl(t,r,n)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,r,n){var i=t.hostModel,l=this.childOfName("line"),o=n&&n.emphasisLineStyle,c=n&&n.blurLineStyle,d=n&&n.selectLineStyle,u=n&&n.labelStatesModels,h=n&&n.emphasisDisabled,f=n&&n.focus,p=n&&n.blurScope;if(!n||t.hasItemOption){var g=t.getItemModel(r),b=g.getModel("emphasis");o=b.getModel("lineStyle").getLineStyle(),c=g.getModel(["blur","lineStyle"]).getLineStyle(),d=g.getModel(["select","lineStyle"]).getLineStyle(),h=b.get("disabled"),f=b.get("focus"),p=b.get("blurScope"),u=fi(g)}var w=t.getItemVisual(r,"style"),j=w.stroke;l.useStyle(w),l.style.fill=null,l.style.strokeNoScale=!0,l.ensureState("emphasis").style=o,l.ensureState("blur").style=c,l.ensureState("select").style=d,se(Hk,function(R){var P=this.childOfName(R);if(P){P.setColor(j),P.style.opacity=w.opacity;for(var H=0;H<Ms.length;H++){var G=Ms[H],X=l.getState(G);if(X){var U=X.style||{},te=P.ensureState(G),Z=te.style||(te.style={});U.stroke!=null&&(Z[P.__isEmptyBrush?"stroke":"fill"]=U.stroke),U.opacity!=null&&(Z.opacity=U.opacity)}}P.markRedraw()}},this);var k=i.getRawValue(r);ji(this,u,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(R,P){return i.getFormattedLabel(R,P,t.dataType)}},inheritColor:j||Be.color.neutral99,defaultOpacity:w.opacity,defaultText:(k==null?t.getName(r):isFinite(k)?$n(k):k)+""});var T=this.getTextContent();if(T){var E=u.normal;T.__align=T.style.align,T.__verticalAlign=T.style.verticalAlign,T.__position=E.get("position")||"middle";var I=E.get("distance");lt(I)||(I=[I,I]),T.__labelDistance=I}this.setTextConfig({position:null,local:!0,inside:!1}),on(this,f,p,h)},e.prototype.highlight=function(){zd(this)},e.prototype.downplay=function(){Bd(this)},e.prototype.updateLayout=function(t,r){this.setLinePoints(t.getItemLayout(r))},e.prototype.setLinePoints=function(t){var r=this.childOfName("line");eA(r.shape,t),r.dirty()},e.prototype.beforeUpdate=function(){var t=this,r=t.childOfName("fromSymbol"),n=t.childOfName("toSymbol"),i=t.getTextContent();if(!r&&!n&&(!i||i.ignore))return;for(var l=1,o=this.parent;o;)o.scaleX&&(l/=o.scaleX),o=o.parent;var c=t.childOfName("line");if(!this.__dirty&&!c.__dirty)return;var d=c.shape.percent,u=c.pointAt(0),h=c.pointAt(d),f=$f([],h,u);Gx(f,f);function p(X,U){var te=X.__specifiedRotation;if(te==null){var Z=c.tangentAt(U);X.attr("rotation",(U===1?-1:1)*Math.PI/2-Math.atan2(Z[1],Z[0]))}else X.attr("rotation",te)}if(r&&(r.setPosition(u),p(r,0),r.scaleX=r.scaleY=l*d,r.markRedraw()),n&&(n.setPosition(h),p(n,1),n.scaleX=n.scaleY=l*d,n.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var g=void 0,b=void 0,w=i.__labelDistance,j=w[0]*l,k=w[1]*l,T=d/2,E=c.tangentAt(T),I=[E[1],-E[0]],R=c.pointAt(T);I[1]>0&&(I[0]=-I[0],I[1]=-I[1]);var P=E[0]<0?-1:1;if(i.__position!=="start"&&i.__position!=="end"){var H=-Math.atan2(E[1],E[0]);h[0]<u[0]&&(H=Math.PI+H),i.rotation=H}var G=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":G=-k,b="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":G=k,b="top";break;default:G=0,b="middle"}switch(i.__position){case"end":i.x=f[0]*j+h[0],i.y=f[1]*k+h[1],g=f[0]>.8?"left":f[0]<-.8?"right":"center",b=f[1]>.8?"top":f[1]<-.8?"bottom":"middle";break;case"start":i.x=-f[0]*j+u[0],i.y=-f[1]*k+u[1],g=f[0]>.8?"right":f[0]<-.8?"left":"center",b=f[1]>.8?"bottom":f[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=j*P+u[0],i.y=u[1]+G,g=E[0]<0?"right":"left",i.originX=-j*P,i.originY=-G;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=R[0],i.y=R[1]+G,g="center",i.originY=-G;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-j*P+h[0],i.y=h[1]+G,g=E[0]>=0?"right":"left",i.originX=j*P,i.originY=-G;break}i.scaleX=i.scaleY=l,i.setStyle({verticalAlign:i.__verticalAlign||b,align:i.__align||g})}},e})($t),s6=(function(){function a(e){this.group=new $t,this._LineCtor=e||i6}return a.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var r=this,n=r.group,i=r._lineData;r._lineData=e,i||n.removeAll();var l=Pz(e);e.diff(i).add(function(o){t._doAdd(e,o,l)}).update(function(o,c){t._doUpdate(i,e,c,o,l)}).remove(function(o){n.remove(i.getItemGraphicEl(o))}).execute()},a.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,r){t.updateLayout(e,r)},this)},a.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Pz(e),this._lineData=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(e,t){this._progressiveEls=[];function r(o){!o.isGroup&&!X5e(o)&&(o.incremental=!0,o.ensureState("emphasis").hoverLayer=!0)}for(var n=e.start;n<e.end;n++){var i=t.getItemLayout(n);if(Uk(i)){var l=new this._LineCtor(t,n,this._seriesScope);l.traverse(r),this.group.add(l),t.setItemGraphicEl(n,l),this._progressiveEls.push(l)}}},a.prototype.remove=function(){this.group.removeAll()},a.prototype.eachRendered=function(e){Eh(this._progressiveEls||this.group,e)},a.prototype._doAdd=function(e,t,r){var n=e.getItemLayout(t);if(Uk(n)){var i=new this._LineCtor(e,t,r);e.setItemGraphicEl(t,i),this.group.add(i)}},a.prototype._doUpdate=function(e,t,r,n,i){var l=e.getItemGraphicEl(r);if(!Uk(t.getItemLayout(n))){this.group.remove(l);return}l?l.updateData(t,n,i):l=new this._LineCtor(t,n,i),t.setItemGraphicEl(n,l),this.group.add(l)},a})();function X5e(a){return a.animators&&a.animators.length>0}function Pz(a){var e=a.hostModel,t=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:t.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:t.get("disabled"),blurScope:t.get("blurScope"),focus:t.get("focus"),labelStatesModels:fi(e)}}function zz(a){return isNaN(a[0])||isNaN(a[1])}function Uk(a){return a&&!zz(a[0])&&!zz(a[1])}var Gk=[],Wk=[],Yk=[],Lp=Ei,$k=i0,Bz=Math.abs;function Fz(a,e,t){for(var r=a[0],n=a[1],i=a[2],l=1/0,o,c=t*t,d=.1,u=.1;u<=.9;u+=.1){Gk[0]=Lp(r[0],n[0],i[0],u),Gk[1]=Lp(r[1],n[1],i[1],u);var h=Bz($k(Gk,e)-c);h<l&&(l=h,o=u)}for(var f=0;f<32;f++){var p=o+d;Wk[0]=Lp(r[0],n[0],i[0],o),Wk[1]=Lp(r[1],n[1],i[1],o),Yk[0]=Lp(r[0],n[0],i[0],p),Yk[1]=Lp(r[1],n[1],i[1],p);var h=$k(Wk,e)-c;if(Bz(h)<.01)break;var g=$k(Yk,e)-c;d/=2,h<0?g>=0?o=o+d:o=o-d:g>=0?o=o-d:o=o+d}return o}function qk(a,e){var t=[],r=Bv,n=[[],[],[]],i=[[],[]],l=[];e/=2,a.eachEdge(function(o,c){var d=o.getLayout(),u=o.getVisual("fromSymbol"),h=o.getVisual("toSymbol");d.__original||(d.__original=[Td(d[0]),Td(d[1])],d[2]&&d.__original.push(Td(d[2])));var f=d.__original;if(d[2]!=null){if(_s(n[0],f[0]),_s(n[1],f[2]),_s(n[2],f[1]),u&&u!=="none"){var p=Qg(o.node1),g=Fz(n,f[0],p*e);r(n[0][0],n[1][0],n[2][0],g,t),n[0][0]=t[3],n[1][0]=t[4],r(n[0][1],n[1][1],n[2][1],g,t),n[0][1]=t[3],n[1][1]=t[4]}if(h&&h!=="none"){var p=Qg(o.node2),g=Fz(n,f[1],p*e);r(n[0][0],n[1][0],n[2][0],g,t),n[1][0]=t[1],n[2][0]=t[2],r(n[0][1],n[1][1],n[2][1],g,t),n[1][1]=t[1],n[2][1]=t[2]}_s(d[0],n[0]),_s(d[1],n[2]),_s(d[2],n[1])}else{if(_s(i[0],f[0]),_s(i[1],f[1]),$f(l,i[1],i[0]),Gx(l,l),u&&u!=="none"){var p=Qg(o.node1);w4(i[0],i[0],l,p*e)}if(h&&h!=="none"){var p=Qg(o.node2);w4(i[1],i[1],l,-p*e)}_s(d[0],i[0]),_s(d[1],i[1])}})}var aZ=Ia();function Z5e(a){if(a)return aZ(a).bridge}function Vz(a,e){a&&(aZ(a).bridge=e)}function Hz(a){return a.type==="view"}var K5e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){var n=new Vb,i=new s6,l=this.group,o=new $t;this._controller=new F0(r.getZr()),this._controllerHost={target:o},o.add(n.group),o.add(i.group),l.add(o),this._symbolDraw=n,this._lineDraw=i,this._mainGroup=o,this._firstRender=!0},e.prototype.render=function(t,r,n){var i=this,l=t.coordinateSystem,o=!1;this._model=t,this._api=n,this._active=!0;var c=this._getThumbnailInfo();c&&c.bridge.reset(n);var d=this._symbolDraw,u=this._lineDraw;if(Hz(l)){var h={x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY};this._firstRender?this._mainGroup.attr(h):nr(this._mainGroup,h,t)}qk(t.getGraph(),Kg(t));var f=t.getData();d.updateData(f);var p=t.getEdgeData();u.updateData(p),this._updateNodeAndLinkScale(),this._updateController(null,t,n),clearTimeout(this._layoutTimeout);var g=t.forceLayout,b=t.get(["force","layoutAnimation"]);g&&(o=!0,this._startForceLayoutIteration(g,n,b));var w=t.get("layout");f.graph.eachNode(function(E){var I=E.dataIndex,R=E.getGraphicEl(),P=E.getModel();if(R){R.off("drag").off("dragend");var H=P.get("draggable");H&&R.on("drag",function(X){switch(w){case"force":g.warmUp(),!i._layouting&&i._startForceLayoutIteration(g,n,b),g.setFixed(I),f.setItemLayout(I,[R.x,R.y]);break;case"circular":f.setItemLayout(I,[R.x,R.y]),E.setLayout({fixed:!0},!0),n6(t,"symbolSize",E,[X.offsetX,X.offsetY]),i.updateLayout(t);break;default:f.setItemLayout(I,[R.x,R.y]),r6(t.getGraph(),t),i.updateLayout(t);break}}).on("dragend",function(){g&&g.setUnfixed(I)}),R.setDraggable(H,!!P.get("cursor"));var G=P.get(["emphasis","focus"]);G==="adjacency"&&(la(R).focus=E.getAdjacentDataIndices())}}),f.graph.eachEdge(function(E){var I=E.getGraphicEl(),R=E.getModel().get(["emphasis","focus"]);I&&R==="adjacency"&&(la(I).focus={edge:[E.dataIndex],node:[E.node1.dataIndex,E.node2.dataIndex]})});var j=t.get("layout")==="circular"&&t.get(["circular","rotateLabel"]),k=f.getLayout("cx"),T=f.getLayout("cy");f.graph.eachNode(function(E){JX(E,j,k,T)}),this._firstRender=!1,o||this._renderThumbnail(t,n,this._symbolDraw,this._lineDraw)},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(t,r,n){var i=this,l=!1;(function o(){t.step(function(c){i.updateLayout(i._model),(c||!l)&&(l=!0,i._renderThumbnail(i._model,r,i._symbolDraw,i._lineDraw)),(i._layouting=!c)&&(n?i._layoutTimeout=setTimeout(o,16):o())})})()},e.prototype._updateController=function(t,r,n){var i=this._controller,l=this._controllerHost,o=r.coordinateSystem;if(!Hz(o)){i.disable();return}i.enable(r.get("roam"),{api:n,zInfo:{component:r},triggerInfo:{roamTrigger:r.get("roamTrigger"),isInSelf:function(c,d,u){return o.containPoint([d,u])},isInClip:function(c,d,u){return!t||t.contain(d,u)}}}),l.zoomLimit=r.get("scaleLimit"),l.zoom=o.getZoom(),i.off("pan").off("zoom").on("pan",function(c){n.dispatchAction({seriesId:r.id,type:"graphRoam",dx:c.dx,dy:c.dy})}).on("zoom",function(c){n.dispatchAction({seriesId:r.id,type:"graphRoam",zoom:c.scale,originX:c.originX,originY:c.originY})})},e.prototype.updateViewOnPan=function(t,r,n){this._active&&(qM(this._controllerHost,n.dx,n.dy),this._updateThumbnailWindow())},e.prototype.updateViewOnZoom=function(t,r,n){this._active&&(XM(this._controllerHost,n.zoom,n.originX,n.originY),this._updateNodeAndLinkScale(),qk(t.getGraph(),Kg(t)),this._lineDraw.updateLayout(),r.updateLabelLayout(),this._updateThumbnailWindow())},e.prototype._updateNodeAndLinkScale=function(){var t=this._model,r=t.getData(),n=Kg(t);r.eachItemGraphicEl(function(i,l){i&&i.setSymbolScale(n)})},e.prototype.updateLayout=function(t){this._active&&(qk(t.getGraph(),Kg(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout())},e.prototype.remove=function(){this._active=!1,clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove(),this._controller&&this._controller.disable()},e.prototype._getThumbnailInfo=function(){var t=this._model,r=t.coordinateSystem;if(r.type==="view"){var n=Z5e(t);if(n)return{bridge:n,coordSys:r}}},e.prototype._updateThumbnailWindow=function(){var t=this._getThumbnailInfo();t&&t.bridge.updateWindow(t.coordSys.transform,this._api)},e.prototype._renderThumbnail=function(t,r,n,i){var l=this._getThumbnailInfo();if(l){var o=new $t,c=n.group.children(),d=i.group.children(),u=new $t,h=new $t;o.add(h),o.add(u);for(var f=0;f<c.length;f++){var p=c[f],g=p.children()[0],b=p.x,w=p.y,j=Xt(g.shape),k=et(j,{width:g.scaleX,height:g.scaleY,x:b-g.scaleX/2,y:w-g.scaleY/2}),T=Xt(g.style),E=new g.constructor({shape:k,style:T,z2:151});h.add(E)}for(var f=0;f<d.length;f++){var p=d[f],I=p.children()[0],T=Xt(I.style),k=Xt(I.shape),R=new tZ({style:T,shape:k,z2:151});u.add(R)}l.bridge.renderContent({api:r,roamType:t.get("roam"),viewportRect:null,group:o,targetTrans:l.coordSys.transform})}},e.type="graph",e})(Dr);function Op(a){return"_EC_"+a}var Q5e=(function(){function a(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return a.prototype.isDirected=function(){return this._directed},a.prototype.addNode=function(e,t){e=e==null?""+t:""+e;var r=this._nodesMap;if(!r[Op(e)]){var n=new Bf(e,t);return n.hostGraph=this,this.nodes.push(n),r[Op(e)]=n,n}},a.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},a.prototype.getNodeById=function(e){return this._nodesMap[Op(e)]},a.prototype.addEdge=function(e,t,r){var n=this._nodesMap,i=this._edgesMap;if(Ka(e)&&(e=this.nodes[e]),Ka(t)&&(t=this.nodes[t]),e instanceof Bf||(e=n[Op(e)]),t instanceof Bf||(t=n[Op(t)]),!(!e||!t)){var l=e.id+"-"+t.id,o=new rZ(e,t,r);return o.hostGraph=this,this._directed&&(e.outEdges.push(o),t.inEdges.push(o)),e.edges.push(o),e!==t&&t.edges.push(o),this.edges.push(o),i[l]=o,o}},a.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},a.prototype.getEdge=function(e,t){e instanceof Bf&&(e=e.id),t instanceof Bf&&(t=t.id);var r=this._edgesMap;return this._directed?r[e+"-"+t]:r[e+"-"+t]||r[t+"-"+e]},a.prototype.eachNode=function(e,t){for(var r=this.nodes,n=r.length,i=0;i<n;i++)r[i].dataIndex>=0&&e.call(t,r[i],i)},a.prototype.eachEdge=function(e,t){for(var r=this.edges,n=r.length,i=0;i<n;i++)r[i].dataIndex>=0&&r[i].node1.dataIndex>=0&&r[i].node2.dataIndex>=0&&e.call(t,r[i],i)},a.prototype.breadthFirstTraverse=function(e,t,r,n){if(t instanceof Bf||(t=this._nodesMap[Op(t)]),!!t){for(var i=r==="out"?"outEdges":r==="in"?"inEdges":"edges",l=0;l<this.nodes.length;l++)this.nodes[l].__visited=!1;if(!e.call(n,t,null))for(var o=[t];o.length;)for(var c=o.shift(),d=c[i],l=0;l<d.length;l++){var u=d[l],h=u.node1===c?u.node2:u.node1;if(!h.__visited){if(e.call(n,h,c))return;o.push(h),h.__visited=!0}}}},a.prototype.update=function(){for(var e=this.data,t=this.edgeData,r=this.nodes,n=this.edges,i=0,l=r.length;i<l;i++)r[i].dataIndex=-1;for(var i=0,l=e.count();i<l;i++)r[e.getRawIndex(i)].dataIndex=i;t.filterSelf(function(o){var c=n[t.getRawIndex(o)];return c.node1.dataIndex>=0&&c.node2.dataIndex>=0});for(var i=0,l=n.length;i<l;i++)n[i].dataIndex=-1;for(var i=0,l=t.count();i<l;i++)n[t.getRawIndex(i)].dataIndex=i},a.prototype.clone=function(){for(var e=new a(this._directed),t=this.nodes,r=this.edges,n=0;n<t.length;n++)e.addNode(t[n].id,t[n].dataIndex);for(var n=0;n<r.length;n++){var i=r[n];e.addEdge(i.node1.id,i.node2.id,i.dataIndex)}return e},a})(),Bf=(function(){function a(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=e??"",this.dataIndex=t??-1}return a.prototype.degree=function(){return this.edges.length},a.prototype.inDegree=function(){return this.inEdges.length},a.prototype.outDegree=function(){return this.outEdges.length},a.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,r=t.data.getItemModel(this.dataIndex);return r.getModel(e)}},a.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var r=this.edges[t];r.dataIndex<0||(e.edge.push(r.dataIndex),e.node.push(r.node1.dataIndex,r.node2.dataIndex))}return e},a.prototype.getTrajectoryDataIndices=function(){for(var e=Pt(),t=Pt(),r=0,n=this.edges.length;r<n;r++){var i=this.edges[r];if(!(i.dataIndex<0)){e.set(i.dataIndex,!0);for(var l=[i.node1],o=[i.node2],c=0;c<l.length;){var d=l[c];c++,t.set(d.dataIndex,!0);for(var u=d.inEdges,h=0,f=u.length,p=void 0,g=void 0;h<f;h++)p=u[h],g=p.dataIndex,g>=0&&!e.hasKey(g)&&(e.set(g,!0),l.push(p.node1))}for(c=0;c<o.length;){var b=o[c];c++,t.set(b.dataIndex,!0);for(var w=b.outEdges,h=0,j=w.length,k=void 0,T=void 0;h<j;h++)k=w[h],T=k.dataIndex,T>=0&&!e.hasKey(T)&&(e.set(T,!0),o.push(k.node2))}}}return{edge:e.keys(),node:t.keys()}},a})(),rZ=(function(){function a(e,t,r){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=r??-1}return a.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,r=t.edgeData.getItemModel(this.dataIndex);return r.getModel(e)}},a.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},a.prototype.getTrajectoryDataIndices=function(){var e=Pt(),t=Pt();e.set(this.dataIndex,!0);for(var r=[this.node1],n=[this.node2],i=0;i<r.length;){var l=r[i];i++,t.set(l.dataIndex,!0);for(var o=l.inEdges,c=0,d=o.length,u=void 0,h=void 0;c<d;c++)u=l.inEdges[c],h=u.dataIndex,h>=0&&!e.hasKey(h)&&(e.set(h,!0),r.push(u.node1))}for(i=0;i<n.length;){var f=n[i];i++,t.set(f.dataIndex,!0);for(var p=f.outEdges,c=0,d=p.length,g=void 0,b=void 0;c<d;c++)g=f.outEdges[c],b=g.dataIndex,b>=0&&!e.hasKey(b)&&(e.set(b,!0),n.push(g.node2))}return{edge:e.keys(),node:t.keys()}},a})();function nZ(a,e){return{getValue:function(t){var r=this[a][e];return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},setVisual:function(t,r){this.dataIndex>=0&&this[a][e].setItemVisual(this.dataIndex,t,r)},getVisual:function(t){return this[a][e].getItemVisual(this.dataIndex,t)},setLayout:function(t,r){this.dataIndex>=0&&this[a][e].setItemLayout(this.dataIndex,t,r)},getLayout:function(){return this[a][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[a][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[a][e].getRawIndex(this.dataIndex)}}}ei(Bf,nZ("hostGraph","data"));ei(rZ,nZ("hostGraph","edgeData"));function l6(a,e,t,r,n){for(var i=new Q5e(r),l=0;l<a.length;l++)i.addNode($i(a[l].id,a[l].name,l),l);for(var o=[],c=[],d=0,l=0;l<e.length;l++){var u=e[l],h=u.source,f=u.target;i.addEdge(h,f,d)&&(c.push(u),o.push($i(ui(u.id,null),h+" > "+f)),d++)}var p=t.get("coordinateSystem"),g;if(p==="cartesian2d"||p==="polar"||p==="matrix")g=$d(a,t);else{var b=Lb.get(p),w=b?b.dimensions||[]:[];ja(w,"value")<0&&w.concat(["value"]);var j=zb(a,{coordDimensions:w,encodeDefine:t.getEncode()}).dimensions;g=new As(j,t),g.initData(a)}var k=new As(["value"],t);return k.initData(c,o),n&&n(g,k),zX({mainData:g,struct:i,structAttr:"graph",datas:{node:g,edge:k},datasAttr:{node:"data",edge:"edgeData"}}),i.update(),i}var J5e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){a.prototype.init.apply(this,arguments);var r=this;function n(){return r._categoriesData}this.legendVisualProvider=new nm(n,n),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeOption=function(t){a.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(t){a.prototype.mergeDefaultAndTheme.apply(this,arguments),y0(t,"edgeLabel",["show"])},e.prototype.getInitialData=function(t,r){var n=t.edges||t.links||[],i=t.data||t.nodes||[],l=this;if(i&&n){B5e(this);var o=l6(i,n,this,!0,c);return se(o.edges,function(d){F5e(d.node1,d.node2,this,d.dataIndex)},this),o.data}function c(d,u){d.wrapMethod("getItemModel",function(g){var b=l._categoriesModels,w=g.getShallow("category"),j=b[w];return j&&(j.parentModel=g.parentModel,g.parentModel=j),g});var h=Fa.prototype.getModel;function f(g,b){var w=h.call(this,g,b);return w.resolveParentPath=p,w}u.wrapMethod("getItemModel",function(g){return g.resolveParentPath=p,g.getModel=f,g});function p(g){if(g&&(g[0]==="label"||g[1]==="label")){var b=g.slice();return g[0]==="label"?b[0]="edgeLabel":g[1]==="label"&&(b[1]="edgeLabel"),b}return g}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(t,r,n){if(n==="edge"){var i=this.getData(),l=this.getDataParams(t,n),o=i.graph.getEdgeByIndex(t),c=i.getName(o.node1.dataIndex),d=i.getName(o.node2.dataIndex),u=[];return c!=null&&u.push(c),d!=null&&u.push(d),Qn("nameValue",{name:u.join(" > "),value:l.value,noValue:l.value==null})}var h=o$({series:this,dataIndex:t,multipleSeries:r});return h},e.prototype._updateCategoriesData=function(){var t=ct(this.option.categories||[],function(n){return n.value!=null?n:et({value:0},n)}),r=new As(["value"],this);r.initData(t),this._categoriesData=r,this._categoriesModels=r.mapArray(function(n){return r.getItemModel(n)})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.isAnimationEnabled=function(){return a.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:Be.color.neutral50,width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:Be.color.primary}}},e})(Vr);function eke(a){a.registerChartView(K5e),a.registerSeriesModel(J5e),a.registerProcessor(R5e),a.registerVisual(L5e),a.registerVisual(O5e),a.registerLayout(V5e),a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,U5e),a.registerLayout(W5e),a.registerCoordinateSystem("graphView",{dimensions:V0.dimensions,create:$5e}),a.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},Bn),a.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},Bn),a.registerAction({type:"graphRoam",event:"graphRoam",update:"none"},function(e,t,r){t.eachComponent({mainType:"series",query:e},function(n){var i=r.getViewOfSeriesModel(n);i&&(e.dx!=null&&e.dy!=null&&i.updateViewOnPan(n,r,e),e.zoom!=null&&e.originX!=null&&e.originY!=null&&i.updateViewOnZoom(n,r,e));var l=n.coordinateSystem,o=PN(l,e,n.get("scaleLimit"));n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom)})})}var Uz=(function(a){Ie(e,a);function e(t,r,n){var i=a.call(this)||this;la(i).dataType="node",i.z2=2;var l=new tr;return i.setTextContent(l),i.updateData(t,r,n,!0),i}return e.prototype.updateData=function(t,r,n,i){var l=this,o=t.graph.getNodeByIndex(r),c=t.hostModel,d=o.getModel(),u=d.getModel("emphasis"),h=t.getItemLayout(r),f=et(yc(d.getModel("itemStyle"),h,!0),h),p=this;if(isNaN(f.startAngle)){p.setShape(f);return}i?p.setShape(f):nr(p,{shape:f},c,r);var g=et(yc(d.getModel("itemStyle"),h,!0),h);l.setShape(g),l.useStyle(t.getItemVisual(r,"style")),hi(l,d),this._updateLabel(c,d,o),t.setItemGraphicEl(r,p),hi(p,d,"itemStyle");var b=u.get("focus");on(this,b==="adjacency"?o.getAdjacentDataIndices():b,u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(t,r,n){var i=this.getTextContent(),l=n.getLayout(),o=(l.startAngle+l.endAngle)/2,c=Math.cos(o),d=Math.sin(o),u=r.getModel("label");i.ignore=!u.get("show");var h=fi(r),f=n.getVisual("style");ji(i,h,{labelFetcher:{getFormattedLabel:function(k,T,E,I,R,P){return t.getFormattedLabel(k,T,"node",I,jl(R,h.normal&&h.normal.get("formatter"),r.get("name")),P)}},labelDataIndex:n.dataIndex,defaultText:n.dataIndex+"",inheritColor:f.fill,defaultOpacity:f.opacity,defaultOutsidePosition:"startArc"});var p=u.get("position")||"outside",g=u.get("distance")||0,b;p==="outside"?b=l.r+g:b=(l.r+l.r0)/2,this.textConfig={inside:p!=="outside"};var w=p!=="outside"?u.get("align")||"center":c>0?"left":"right",j=p!=="outside"?u.get("verticalAlign")||"middle":d>0?"top":"bottom";i.attr({x:c*b+l.cx,y:d*b+l.cy,rotation:0,style:{align:w,verticalAlign:j}})},e})(hs),tke=(function(a){Ie(e,a);function e(t,r,n,i){var l=a.call(this)||this;return la(l).dataType="edge",l.updateData(t,r,n,i,!0),l}return e.prototype.buildPath=function(t,r){t.moveTo(r.s1[0],r.s1[1]);var n=.7,i=r.clockwise;t.arc(r.cx,r.cy,r.r,r.sStartAngle,r.sEndAngle,!i),t.bezierCurveTo((r.cx-r.s2[0])*n+r.s2[0],(r.cy-r.s2[1])*n+r.s2[1],(r.cx-r.t1[0])*n+r.t1[0],(r.cy-r.t1[1])*n+r.t1[1],r.t1[0],r.t1[1]),t.arc(r.cx,r.cy,r.r,r.tStartAngle,r.tEndAngle,!i),t.bezierCurveTo((r.cx-r.t2[0])*n+r.t2[0],(r.cy-r.t2[1])*n+r.t2[1],(r.cx-r.s1[0])*n+r.s1[0],(r.cy-r.s1[1])*n+r.s1[1],r.s1[0],r.s1[1]),t.closePath()},e.prototype.updateData=function(t,r,n,i,l){var o=t.hostModel,c=r.graph.getEdgeByIndex(n),d=c.getLayout(),u=c.node1.getModel(),h=r.getItemModel(c.dataIndex),f=h.getModel("lineStyle"),p=h.getModel("emphasis"),g=p.get("focus"),b=et(yc(u.getModel("itemStyle"),d,!0),d),w=this;if(isNaN(b.sStartAngle)||isNaN(b.tStartAngle)){w.setShape(b);return}l?(w.setShape(b),Gz(w,c,t,f)):(lo(w),Gz(w,c,t,f),nr(w,{shape:b},o,n)),on(this,g==="adjacency"?c.getAdjacentDataIndices():g,p.get("blurScope"),p.get("disabled")),hi(w,h,"lineStyle"),r.setItemGraphicEl(c.dataIndex,w)},e})(Ra);function Gz(a,e,t,r){var n=e.node1,i=e.node2,l=a.style;a.setStyle(r.getLineStyle());var o=r.get("color");switch(o){case"source":l.fill=t.getItemVisual(n.dataIndex,"style").fill,l.decal=n.getVisual("style").decal;break;case"target":l.fill=t.getItemVisual(i.dataIndex,"style").fill,l.decal=i.getVisual("style").decal;break;case"gradient":var c=t.getItemVisual(n.dataIndex,"style").fill,d=t.getItemVisual(i.dataIndex,"style").fill;if(At(c)&&At(d)){var u=a.shape,h=(u.s1[0]+u.s2[0])/2,f=(u.s1[1]+u.s2[1])/2,p=(u.t1[0]+u.t2[0])/2,g=(u.t1[1]+u.t2[1])/2;l.fill=new qx(h,f,p,g,[{offset:0,color:c},{offset:1,color:d}],!0)}break}}var ake=Math.PI/180,rke=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n){var i=t.getData(),l=this._data,o=this.group,c=-t.get("startAngle")*ake;if(i.diff(l).add(function(u){var h=i.getItemLayout(u);if(h){var f=new Uz(i,u,c);la(f).dataIndex=u,o.add(f)}}).update(function(u,h){var f=l.getItemGraphicEl(h),p=i.getItemLayout(u);if(!p){f&&Md(f,t,h);return}f?f.updateData(i,u,c):f=new Uz(i,u,c),o.add(f)}).remove(function(u){var h=l.getItemGraphicEl(u);h&&Md(h,t,u)}).execute(),!l){var d=t.get("center");this.group.scaleX=.01,this.group.scaleY=.01,this.group.originX=kt(d[0],n.getWidth()),this.group.originY=kt(d[1],n.getHeight()),en(this.group,{scaleX:1,scaleY:1},t)}this._data=i,this.renderEdges(t,c)},e.prototype.renderEdges=function(t,r){var n=t.getData(),i=t.getEdgeData(),l=this._edgeData,o=this.group;i.diff(l).add(function(c){var d=new tke(n,i,c,r);la(d).dataIndex=c,o.add(d)}).update(function(c,d){var u=l.getItemGraphicEl(d);u.updateData(n,i,c,r),o.add(u)}).remove(function(c){var d=l.getItemGraphicEl(c);d&&Md(d,t,c)}).execute(),this._edgeData=i},e.prototype.dispose=function(){},e.type="chord",e})(Dr),nke=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){a.prototype.init.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this.legendVisualProvider=new nm(Tt(this.getData,this),Tt(this.getRawData,this))},e.prototype.mergeOption=function(t){a.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links)},e.prototype.getInitialData=function(t,r){var n=t.edges||t.links||[],i=t.data||t.nodes||[];if(i&&n){var l=l6(i,n,this,!0,o);return l.data}function o(c,d){var u=Fa.prototype.getModel;function h(p,g){var b=u.call(this,p,g);return b.resolveParentPath=f,b}d.wrapMethod("getItemModel",function(p){return p.resolveParentPath=f,p.getModel=h,p});function f(p){if(p&&(p[0]==="label"||p[1]==="label")){var g=p.slice();return p[0]==="label"?g[0]="edgeLabel":p[1]==="label"&&(g[1]="edgeLabel"),g}return p}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,r,n){var i=this.getDataParams(t,n);if(n==="edge"){var l=this.getData(),o=l.graph.getEdgeByIndex(t),c=l.getName(o.node1.dataIndex),d=l.getName(o.node2.dataIndex),u=[];return c!=null&&u.push(c),d!=null&&u.push(d),Qn("nameValue",{name:u.join(" > "),value:i.value,noValue:i.value==null})}return Qn("nameValue",{name:i.name,value:i.value,noValue:i.value==null})},e.prototype.getDataParams=function(t,r){var n=a.prototype.getDataParams.call(this,t,r);if(r==="node"){var i=this.getData(),l=this.getGraph().getNodeByIndex(t);if(n.name==null&&(n.name=i.getName(t)),n.value==null){var o=l.getLayout().value;n.value=o}}return n},e.type="series.chord",e.defaultOption={z:2,coordinateSystem:"none",legendHoverLink:!0,colorBy:"data",left:0,top:0,right:0,bottom:0,width:null,height:null,center:["50%","50%"],radius:["70%","80%"],clockwise:!0,startAngle:90,endAngle:"auto",minAngle:0,padAngle:3,itemStyle:{borderRadius:[0,0,5,5]},lineStyle:{width:0,color:"source",opacity:.2},label:{show:!0,position:"outside",distance:5},emphasis:{focus:"adjacency",lineStyle:{opacity:.5}}},e})(Vr),Xk=Math.PI/180;function ike(a,e){a.eachSeriesByType("chord",function(t){ske(t,e)})}function ske(a,e){var t=a.getData(),r=t.graph,n=a.getEdgeData(),i=n.count();if(i){var l=CY(a,e),o=l.cx,c=l.cy,d=l.r,u=l.r0,h=Math.max((a.get("padAngle")||0)*Xk,0),f=Math.max((a.get("minAngle")||0)*Xk,0),p=-a.get("startAngle")*Xk,g=p+Math.PI*2,b=a.get("clockwise"),w=b?1:-1,j=[p,g];mN(j,!b);var k=j[0],T=j[1],E=T-k,I=t.getSum("value")===0&&n.getSum("value")===0,R=[],P=0;r.eachEdge(function(Q){var ne=I?1:Q.getValue("value");I&&(ne>0||f)&&(P+=2);var re=Q.node1.dataIndex,K=Q.node2.dataIndex;R[re]=(R[re]||0)+ne,R[K]=(R[K]||0)+ne});var H=0;if(r.eachNode(function(Q){var ne=Q.getValue("value");isNaN(ne)||(R[Q.dataIndex]=Math.max(ne,R[Q.dataIndex]||0)),!I&&(R[Q.dataIndex]>0||f)&&P++,H+=R[Q.dataIndex]||0}),!(P===0||H===0)){h*P>=Math.abs(E)&&(h=Math.max(0,(Math.abs(E)-f*P)/P)),(h+f)*P>=Math.abs(E)&&(f=(Math.abs(E)-h*P)/P);var G=(E-h*P*w)/H,X=0,U=0,te=0;r.eachNode(function(Q){var ne=R[Q.dataIndex]||0,re=G*(H?ne:1)*w;Math.abs(re)<f?X+=f-Math.abs(re):(U+=Math.abs(re)-f,te+=Math.abs(re)),Q.setLayout({angle:re,value:ne})});var Z=!1;if(X>U){var J=X/U;r.eachNode(function(Q){var ne=Q.getLayout().angle;Math.abs(ne)>=f?Q.setLayout({angle:ne*J,ratio:J},!0):Q.setLayout({angle:f,ratio:f===0?1:ne/f},!0)})}else r.eachNode(function(Q){if(!Z){var ne=Q.getLayout().angle,re=Math.min(ne/te,1),K=re*X;ne-K<f&&(Z=!0)}});var B=X;r.eachNode(function(Q){if(!(B<=0)){var ne=Q.getLayout().angle;if(ne>f&&f>0){var re=Z?1:Math.min(ne/te,1),K=ne-f,ae=Math.min(K,Math.min(B,X*re));B-=ae,Q.setLayout({angle:ne-ae,ratio:(ne-ae)/ne},!0)}else f>0&&Q.setLayout({angle:f,ratio:ne===0?1:f/ne},!0)}});var W=k,$=[];r.eachNode(function(Q){var ne=Math.max(Q.getLayout().angle,f);Q.setLayout({cx:o,cy:c,r0:u,r:d,startAngle:W,endAngle:W+ne*w,clockwise:b},!0),$[Q.dataIndex]=W,W+=(ne+h)*w}),r.eachEdge(function(Q){var ne=I?1:Q.getValue("value"),re=G*(H?ne:1)*w,K=Q.node1.dataIndex,ae=$[K]||0,ce=Math.abs((Q.node1.getLayout().ratio||1)*re),de=ae+ce*w,he=[o+u*Math.cos(ae),c+u*Math.sin(ae)],pe=[o+u*Math.cos(de),c+u*Math.sin(de)],Re=Q.node2.dataIndex,Te=$[Re]||0,ke=Math.abs((Q.node2.getLayout().ratio||1)*re),Le=Te+ke*w,Ne=[o+u*Math.cos(Te),c+u*Math.sin(Te)],_e=[o+u*Math.cos(Le),c+u*Math.sin(Le)];Q.setLayout({s1:he,s2:pe,sStartAngle:ae,sEndAngle:de,t1:Ne,t2:_e,tStartAngle:Te,tEndAngle:Le,cx:o,cy:c,r:u,value:ne,clockwise:b}),$[K]=de,$[Re]=Le})}}}function lke(a){a.registerChartView(rke),a.registerSeriesModel(nke),a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,ike),a.registerProcessor(am("chord"))}var oke=(function(){function a(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return a})(),cke=(function(a){Ie(e,a);function e(t){var r=a.call(this,t)||this;return r.type="pointer",r}return e.prototype.getDefaultShape=function(){return new oke},e.prototype.buildPath=function(t,r){var n=Math.cos,i=Math.sin,l=r.r,o=r.width,c=r.angle,d=r.x-n(c)*o*(o>=l/3?1:2),u=r.y-i(c)*o*(o>=l/3?1:2);c=r.angle-Math.PI/2,t.moveTo(d,u),t.lineTo(r.x+n(c)*o,r.y+i(c)*o),t.lineTo(r.x+n(r.angle)*l,r.y+i(r.angle)*l),t.lineTo(r.x-n(c)*o,r.y-i(c)*o),t.lineTo(d,u)},e})(Ra);function dke(a,e){var t=a.get("center"),r=e.getWidth(),n=e.getHeight(),i=Math.min(r,n),l=kt(t[0],e.getWidth()),o=kt(t[1],e.getHeight()),c=kt(a.get("radius"),i/2);return{cx:l,cy:o,r:c}}function sw(a,e){var t=a==null?"":a+"";return e&&(At(e)?t=e.replace("{value}",t):Yt(e)&&(t=e(a))),t}var uke=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){this.group.removeAll();var i=t.get(["axisLine","lineStyle","color"]),l=dke(t,n);this._renderMain(t,r,n,i,l),this._data=t.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(t,r,n,i,l){var o=this.group,c=t.get("clockwise"),d=-t.get("startAngle")/180*Math.PI,u=-t.get("endAngle")/180*Math.PI,h=t.getModel("axisLine"),f=h.get("roundCap"),p=f?c_:hs,g=h.get("show"),b=h.getModel("lineStyle"),w=b.get("width"),j=[d,u];mN(j,!c),d=j[0],u=j[1];for(var k=u-d,T=d,E=[],I=0;g&&I<i.length;I++){var R=Math.min(Math.max(i[I][0],0),1);u=d+k*R;var P=new p({shape:{startAngle:T,endAngle:u,cx:l.cx,cy:l.cy,clockwise:c,r0:l.r-w,r:l.r},silent:!0});P.setStyle({fill:i[I][1]}),P.setStyle(b.getLineStyle(["color","width"])),E.push(P),T=u}E.reverse(),se(E,function(G){return o.add(G)});var H=function(G){if(G<=0)return i[0][1];var X;for(X=0;X<i.length;X++)if(i[X][0]>=G&&(X===0?0:i[X-1][0])<G)return i[X][1];return i[X-1][1]};this._renderTicks(t,r,n,H,l,d,u,c,w),this._renderTitleAndDetail(t,r,n,H,l),this._renderAnchor(t,l),this._renderPointer(t,r,n,H,l,d,u,c,w)},e.prototype._renderTicks=function(t,r,n,i,l,o,c,d,u){for(var h=this.group,f=l.cx,p=l.cy,g=l.r,b=+t.get("min"),w=+t.get("max"),j=t.getModel("splitLine"),k=t.getModel("axisTick"),T=t.getModel("axisLabel"),E=t.get("splitNumber"),I=k.get("splitNumber"),R=kt(j.get("length"),g),P=kt(k.get("length"),g),H=o,G=(c-o)/E,X=G/I,U=j.getModel("lineStyle").getLineStyle(),te=k.getModel("lineStyle").getLineStyle(),Z=j.get("distance"),J,B,W=0;W<=E;W++){if(J=Math.cos(H),B=Math.sin(H),j.get("show")){var $=Z?Z+u:u,Q=new qn({shape:{x1:J*(g-$)+f,y1:B*(g-$)+p,x2:J*(g-R-$)+f,y2:B*(g-R-$)+p},style:U,silent:!0});U.stroke==="auto"&&Q.setStyle({stroke:i(W/E)}),h.add(Q)}if(T.get("show")){var $=T.get("distance")+Z,ne=sw($n(W/E*(w-b)+b),T.get("formatter")),re=i(W/E),K=J*(g-R-$)+f,ae=B*(g-R-$)+p,ce=T.get("rotate"),de=0;ce==="radial"?(de=-H+2*Math.PI,de>Math.PI/2&&(de+=Math.PI)):ce==="tangential"?de=-H-Math.PI/2:Ka(ce)&&(de=ce*Math.PI/180),de===0?h.add(new tr({style:Fr(T,{text:ne,x:K,y:ae,verticalAlign:B<-.8?"top":B>.8?"bottom":"middle",align:J<-.4?"left":J>.4?"right":"center"},{inheritColor:re}),silent:!0})):h.add(new tr({style:Fr(T,{text:ne,x:K,y:ae,verticalAlign:"middle",align:"center"},{inheritColor:re}),silent:!0,originX:K,originY:ae,rotation:de}))}if(k.get("show")&&W!==E){var $=k.get("distance");$=$?$+u:u;for(var he=0;he<=I;he++){J=Math.cos(H),B=Math.sin(H);var pe=new qn({shape:{x1:J*(g-$)+f,y1:B*(g-$)+p,x2:J*(g-P-$)+f,y2:B*(g-P-$)+p},silent:!0,style:te});te.stroke==="auto"&&pe.setStyle({stroke:i((W+he/I)/E)}),h.add(pe),H+=X}H-=X}else H+=G}},e.prototype._renderPointer=function(t,r,n,i,l,o,c,d,u){var h=this.group,f=this._data,p=this._progressEls,g=[],b=t.get(["pointer","show"]),w=t.getModel("progress"),j=w.get("show"),k=t.getData(),T=k.mapDimension("value"),E=+t.get("min"),I=+t.get("max"),R=[E,I],P=[o,c];function H(X,U){var te=k.getItemModel(X),Z=te.getModel("pointer"),J=kt(Z.get("width"),l.r),B=kt(Z.get("length"),l.r),W=t.get(["pointer","icon"]),$=Z.get("offsetCenter"),Q=kt($[0],l.r),ne=kt($[1],l.r),re=Z.get("keepAspect"),K;return W?K=Jn(W,Q-J/2,ne-B,J,B,null,re):K=new cke({shape:{angle:-Math.PI/2,width:J,r:B,x:Q,y:ne}}),K.rotation=-(U+Math.PI/2),K.x=l.cx,K.y=l.cy,K}function G(X,U){var te=w.get("roundCap"),Z=te?c_:hs,J=w.get("overlap"),B=J?w.get("width"):u/k.count(),W=J?l.r-B:l.r-(X+1)*B,$=J?l.r:l.r-X*B,Q=new Z({shape:{startAngle:o,endAngle:U,cx:l.cx,cy:l.cy,clockwise:d,r0:W,r:$}});return J&&(Q.z2=fr(k.get(T,X),[E,I],[100,0],!0)),Q}(j||b)&&(k.diff(f).add(function(X){var U=k.get(T,X);if(b){var te=H(X,o);en(te,{rotation:-((isNaN(+U)?P[0]:fr(U,R,P,!0))+Math.PI/2)},t),h.add(te),k.setItemGraphicEl(X,te)}if(j){var Z=G(X,o),J=w.get("clip");en(Z,{shape:{endAngle:fr(U,R,P,J)}},t),h.add(Z),Z4(t.seriesIndex,k.dataType,X,Z),g[X]=Z}}).update(function(X,U){var te=k.get(T,X);if(b){var Z=f.getItemGraphicEl(U),J=Z?Z.rotation:o,B=H(X,J);B.rotation=J,nr(B,{rotation:-((isNaN(+te)?P[0]:fr(te,R,P,!0))+Math.PI/2)},t),h.add(B),k.setItemGraphicEl(X,B)}if(j){var W=p[U],$=W?W.shape.endAngle:o,Q=G(X,$),ne=w.get("clip");nr(Q,{shape:{endAngle:fr(te,R,P,ne)}},t),h.add(Q),Z4(t.seriesIndex,k.dataType,X,Q),g[X]=Q}}).execute(),k.each(function(X){var U=k.getItemModel(X),te=U.getModel("emphasis"),Z=te.get("focus"),J=te.get("blurScope"),B=te.get("disabled");if(b){var W=k.getItemGraphicEl(X),$=k.getItemVisual(X,"style"),Q=$.fill;if(W instanceof Pi){var ne=W.style;W.useStyle(et({image:ne.image,x:ne.x,y:ne.y,width:ne.width,height:ne.height},$))}else W.useStyle($),W.type!=="pointer"&&W.setColor(Q);W.setStyle(U.getModel(["pointer","itemStyle"]).getItemStyle()),W.style.fill==="auto"&&W.setStyle("fill",i(fr(k.get(T,X),R,[0,1],!0))),W.z2EmphasisLift=0,hi(W,U),on(W,Z,J,B)}if(j){var re=g[X];re.useStyle(k.getItemVisual(X,"style")),re.setStyle(U.getModel(["progress","itemStyle"]).getItemStyle()),re.z2EmphasisLift=0,hi(re,U),on(re,Z,J,B)}}),this._progressEls=g)},e.prototype._renderAnchor=function(t,r){var n=t.getModel("anchor"),i=n.get("show");if(i){var l=n.get("size"),o=n.get("icon"),c=n.get("offsetCenter"),d=n.get("keepAspect"),u=Jn(o,r.cx-l/2+kt(c[0],r.r),r.cy-l/2+kt(c[1],r.r),l,l,null,d);u.z2=n.get("showAbove")?1:0,u.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(u)}},e.prototype._renderTitleAndDetail=function(t,r,n,i,l){var o=this,c=t.getData(),d=c.mapDimension("value"),u=+t.get("min"),h=+t.get("max"),f=new $t,p=[],g=[],b=t.isAnimationEnabled(),w=t.get(["pointer","showAbove"]);c.diff(this._data).add(function(j){p[j]=new tr({silent:!0}),g[j]=new tr({silent:!0})}).update(function(j,k){p[j]=o._titleEls[k],g[j]=o._detailEls[k]}).execute(),c.each(function(j){var k=c.getItemModel(j),T=c.get(d,j),E=new $t,I=i(fr(T,[u,h],[0,1],!0)),R=k.getModel("title");if(R.get("show")){var P=R.get("offsetCenter"),H=l.cx+kt(P[0],l.r),G=l.cy+kt(P[1],l.r),X=p[j];X.attr({z2:w?0:2,style:Fr(R,{x:H,y:G,text:c.getName(j),align:"center",verticalAlign:"middle"},{inheritColor:I})}),E.add(X)}var U=k.getModel("detail");if(U.get("show")){var te=U.get("offsetCenter"),Z=l.cx+kt(te[0],l.r),J=l.cy+kt(te[1],l.r),B=kt(U.get("width"),l.r),W=kt(U.get("height"),l.r),$=t.get(["progress","show"])?c.getItemVisual(j,"style").fill:I,X=g[j],Q=U.get("formatter");X.attr({z2:w?0:2,style:Fr(U,{x:Z,y:J,text:sw(T,Q),width:isNaN(B)?null:B,height:isNaN(W)?null:W,align:"center",verticalAlign:"middle"},{inheritColor:$})}),sY(X,{normal:U},T,function(re){return sw(re,Q)}),b&&lY(X,j,c,t,{getFormattedLabel:function(re,K,ae,ce,de,he){return sw(he?he.interpolatedValue:T,Q)}}),E.add(X)}f.add(E)}),this.group.add(f),this._titleEls=p,this._detailEls=g},e.type="gauge",e})(Dr),hke=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="itemStyle",t}return e.prototype.getInitialData=function(t,r){return rm(this,["value"])},e.type="series.gauge",e.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,Be.color.neutral10]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:Be.color.axisTick,width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:Be.color.axisTickMinor,width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:Be.color.axisLabel,fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:Be.color.neutral00,borderWidth:0,borderColor:Be.color.theme[0]}},title:{show:!0,offsetCenter:[0,"20%"],color:Be.color.secondary,fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:Be.color.transparent,borderWidth:0,borderColor:Be.color.neutral40,width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:Be.color.primary,fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e})(Vr);function fke(a){a.registerChartView(uke),a.registerSeriesModel(hke)}var pke=["itemStyle","opacity"],xke=(function(a){Ie(e,a);function e(t,r){var n=a.call(this)||this,i=n,l=new Xi,o=new tr;return i.setTextContent(o),n.setTextGuideLine(l),n.updateData(t,r,!0),n}return e.prototype.updateData=function(t,r,n){var i=this,l=t.hostModel,o=t.getItemModel(r),c=t.getItemLayout(r),d=o.getModel("emphasis"),u=o.get(pke);u=u??1,n||lo(i),i.useStyle(t.getItemVisual(r,"style")),i.style.lineJoin="round",n?(i.setShape({points:c.points}),i.style.opacity=0,en(i,{style:{opacity:u}},l,r)):nr(i,{style:{opacity:u},shape:{points:c.points}},l,r),hi(i,o),this._updateLabel(t,r),on(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},e.prototype._updateLabel=function(t,r){var n=this,i=this.getTextGuideLine(),l=n.getTextContent(),o=t.hostModel,c=t.getItemModel(r),d=t.getItemLayout(r),u=d.label,h=t.getItemVisual(r,"style"),f=h.fill;ji(l,fi(c),{labelFetcher:t.hostModel,labelDataIndex:r,defaultOpacity:h.opacity,defaultText:t.getName(r)},{normal:{align:u.textAlign,verticalAlign:u.verticalAlign}});var p=c.getModel("label"),g=p.get("color"),b=g==="inherit"?f:null;n.setTextConfig({local:!0,inside:!!u.inside,insideStroke:b,outsideFill:b});var w=u.linePoints;i.setShape({points:w}),n.textGuideLineConfig={anchor:w?new Qt(w[0][0],w[0][1]):null},nr(l,{style:{x:u.x,y:u.y}},o,r),l.attr({rotation:u.rotation,originX:u.x,originY:u.y,z2:10}),RM(n,LM(c),{stroke:f})},e})(fs),mke=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,n){var i=t.getData(),l=this._data,o=this.group;i.diff(l).add(function(c){var d=new xke(i,c);i.setItemGraphicEl(c,d),o.add(d)}).update(function(c,d){var u=l.getItemGraphicEl(d);u.updateData(i,c),o.add(u),i.setItemGraphicEl(c,u)}).remove(function(c){var d=l.getItemGraphicEl(c);Md(d,t,c)}).execute(),this._data=i},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e})(Dr),gke=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new nm(Tt(this.getData,this),Tt(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.getInitialData=function(t,r){return rm(this,{coordDimensions:["value"],encodeDefaulter:ya(fM,this)})},e.prototype._defaultLabelLine=function(t){y0(t,"labelLine",["show"]);var r=t.labelLine,n=t.emphasis.labelLine;r.show=r.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},e.prototype.getDataParams=function(t){var r=this.getData(),n=a.prototype.getDataParams.call(this,t),i=r.mapDimension("value"),l=r.getSum(i);return n.percent=l?+(r.get(i,t)/l*100).toFixed(2):0,n.$vars.push("percent"),n},e.type="series.funnel",e.defaultOption={coordinateSystemUsage:"box",z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:65,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:Be.color.neutral00,borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:Be.color.primary}}},e})(Vr);function vke(a,e){for(var t=a.mapDimension("value"),r=a.mapArray(t,function(c){return c}),n=[],i=e==="ascending",l=0,o=a.count();l<o;l++)n[l]=l;return Yt(e)?n.sort(e):e!=="none"&&n.sort(function(c,d){return i?r[c]-r[d]:r[d]-r[c]}),n}function bke(a){var e=a.hostModel,t=e.get("orient");a.each(function(r){var n=a.getItemModel(r),i=n.getModel("label"),l=i.get("position"),o=n.getModel("labelLine"),c=a.getItemLayout(r),d=c.points,u=l==="inner"||l==="inside"||l==="center"||l==="insideLeft"||l==="insideRight",h,f,p,g;if(u)l==="insideLeft"?(f=(d[0][0]+d[3][0])/2+5,p=(d[0][1]+d[3][1])/2,h="left"):l==="insideRight"?(f=(d[1][0]+d[2][0])/2-5,p=(d[1][1]+d[2][1])/2,h="right"):(f=(d[0][0]+d[1][0]+d[2][0]+d[3][0])/4,p=(d[0][1]+d[1][1]+d[2][1]+d[3][1])/4,h="center"),g=[[f,p],[f,p]];else{var b=void 0,w=void 0,j=void 0,k=void 0,T=o.get("length");l==="left"?(b=(d[3][0]+d[0][0])/2,w=(d[3][1]+d[0][1])/2,j=b-T,f=j-5,h="right"):l==="right"?(b=(d[1][0]+d[2][0])/2,w=(d[1][1]+d[2][1])/2,j=b+T,f=j+5,h="left"):l==="top"?(b=(d[3][0]+d[0][0])/2,w=(d[3][1]+d[0][1])/2,k=w-T,p=k-5,h="center"):l==="bottom"?(b=(d[1][0]+d[2][0])/2,w=(d[1][1]+d[2][1])/2,k=w+T,p=k+5,h="center"):l==="rightTop"?(b=t==="horizontal"?d[3][0]:d[1][0],w=t==="horizontal"?d[3][1]:d[1][1],t==="horizontal"?(k=w-T,p=k-5,h="center"):(j=b+T,f=j+5,h="top")):l==="rightBottom"?(b=d[2][0],w=d[2][1],t==="horizontal"?(k=w+T,p=k+5,h="center"):(j=b+T,f=j+5,h="bottom")):l==="leftTop"?(b=d[0][0],w=t==="horizontal"?d[0][1]:d[1][1],t==="horizontal"?(k=w-T,p=k-5,h="center"):(j=b-T,f=j-5,h="right")):l==="leftBottom"?(b=t==="horizontal"?d[1][0]:d[3][0],w=t==="horizontal"?d[1][1]:d[2][1],t==="horizontal"?(k=w+T,p=k+5,h="center"):(j=b-T,f=j-5,h="right")):(b=(d[1][0]+d[2][0])/2,w=(d[1][1]+d[2][1])/2,t==="horizontal"?(k=w+T,p=k+5,h="center"):(j=b+T,f=j+5,h="left")),t==="horizontal"?(j=b,f=j):(k=w,p=k),g=[[b,w],[j,k]]}c.label={linePoints:g,x:f,y:p,verticalAlign:"middle",textAlign:h,inside:u}})}function yke(a,e){a.eachSeriesByType("funnel",function(t){var r=t.getData(),n=r.mapDimension("value"),i=t.get("sort"),l=pi(t,e),o=cn(t.getBoxLayoutParams(),l.refContainer),c=t.get("orient"),d=o.width,u=o.height,h=vke(r,i),f=o.x,p=o.y,g=c==="horizontal"?[kt(t.get("minSize"),u),kt(t.get("maxSize"),u)]:[kt(t.get("minSize"),d),kt(t.get("maxSize"),d)],b=r.getDataExtent(n),w=t.get("min"),j=t.get("max");w==null&&(w=Math.min(b[0],0)),j==null&&(j=b[1]);var k=t.get("funnelAlign"),T=t.get("gap"),E=c==="horizontal"?d:u,I=(E-T*(r.count()-1))/r.count(),R=function(B,W){if(c==="horizontal"){var $=r.get(n,B)||0,Q=fr($,[w,j],g,!0),ne=void 0;switch(k){case"top":ne=p;break;case"center":ne=p+(u-Q)/2;break;case"bottom":ne=p+(u-Q);break}return[[W,ne],[W,ne+Q]]}var re=r.get(n,B)||0,K=fr(re,[w,j],g,!0),ae;switch(k){case"left":ae=f;break;case"center":ae=f+(d-K)/2;break;case"right":ae=f+d-K;break}return[[ae,W],[ae+K,W]]};i==="ascending"&&(I=-I,T=-T,c==="horizontal"?f+=d:p+=u,h=h.reverse());for(var P=0;P<h.length;P++){var H=h[P],G=h[P+1],X=r.getItemModel(H);if(c==="horizontal"){var U=X.get(["itemStyle","width"]);U==null?U=I:(U=kt(U,d),i==="ascending"&&(U=-U));var te=R(H,f),Z=R(G,f+U);f+=U+T,r.setItemLayout(H,{points:te.concat(Z.slice().reverse())})}else{var J=X.get(["itemStyle","height"]);J==null?J=I:(J=kt(J,u),i==="ascending"&&(J=-J));var te=R(H,p),Z=R(G,p+J);p+=J+T,r.setItemLayout(H,{points:te.concat(Z.slice().reverse())})}}bke(r)})}function wke(a){a.registerChartView(mke),a.registerSeriesModel(gke),a.registerLayout(yke),a.registerProcessor(am("funnel"))}var _ke=.3,Nke=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t._dataGroup=new $t,t._initialized=!1,t}return e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(t,r,n,i){this._progressiveEls=null;var l=this._dataGroup,o=t.getData(),c=this._data,d=t.coordinateSystem,u=d.dimensions,h=Yz(t);o.diff(c).add(f).update(p).remove(g).execute();function f(w){var j=Wz(o,l,w,u,d);Zk(j,o,w,h)}function p(w,j){var k=c.getItemGraphicEl(j),T=iZ(o,w,u,d);o.setItemGraphicEl(w,k),nr(k,{shape:{points:T}},t,w),lo(k),Zk(k,o,w,h)}function g(w){var j=c.getItemGraphicEl(w);l.remove(j)}if(!this._initialized){this._initialized=!0;var b=jke(d,t,function(){setTimeout(function(){l.removeClipPath()})});l.setClipPath(b)}this._data=o},e.prototype.incrementalPrepareRender=function(t,r,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(t,r,n){for(var i=r.getData(),l=r.coordinateSystem,o=l.dimensions,c=Yz(r),d=this._progressiveEls=[],u=t.start;u<t.end;u++){var h=Wz(i,this._dataGroup,u,o,l);h.incremental=!0,Zk(h,i,u,c),d.push(h)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e})(Dr);function jke(a,e,t){var r=a.model,n=a.getRect(),i=new Ea({shape:{x:n.x,y:n.y,width:n.width,height:n.height}}),l=r.get("layout")==="horizontal"?"width":"height";return i.setShape(l,0),en(i,{shape:{width:n.width,height:n.height}},e,t),i}function iZ(a,e,t,r){for(var n=[],i=0;i<t.length;i++){var l=t[i],o=a.get(a.mapDimension(l),e);Ske(o,r.getAxis(l).type)||n.push(r.dataToPoint(o,l))}return n}function Wz(a,e,t,r,n){var i=iZ(a,t,r,n),l=new Xi({shape:{points:i},z2:10});return e.add(l),a.setItemGraphicEl(t,l),l}function Yz(a){var e=a.get("smooth",!0);return e===!0&&(e=_ke),e=Pd(e),os(e)&&(e=0),{smooth:e}}function Zk(a,e,t,r){a.useStyle(e.getItemVisual(t,"style")),a.style.fill=null,a.setShape("smooth",r.smooth);var n=e.getItemModel(t),i=n.getModel("emphasis");hi(a,n,"lineStyle"),on(a,i.get("focus"),i.get("blurScope"),i.get("disabled"))}function Ske(a,e){return e==="category"?a==null:a==null||isNaN(a)}var kke=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.getInitialData=function(t,r){return $d(null,this,{useEncodeDefaulter:Tt(Cke,null,this)})},e.prototype.getRawIndicesByActiveState=function(t){var r=this.coordinateSystem,n=this.getData(),i=[];return r.eachActiveState(n,function(l,o){t===l&&i.push(n.getRawIndex(o))}),i},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e})(Vr);function Cke(a){var e=a.ecModel.getComponent("parallel",a.get("parallelIndex"));if(e){var t={};return se(e.dimensions,function(r){var n=Ake(r);t[r]=n}),t}}function Ake(a){return+a.replace("dim","")}var Tke=["lineStyle","opacity"],Mke={seriesType:"parallel",reset:function(a,e){var t=a.coordinateSystem,r={normal:a.get(["lineStyle","opacity"]),active:a.get("activeOpacity"),inactive:a.get("inactiveOpacity")};return{progress:function(n,i){t.eachActiveState(i,function(l,o){var c=r[l];if(l==="normal"&&i.hasItemOption){var d=i.getItemModel(o).get(Tke,!0);d!=null&&(c=d)}var u=i.ensureUniqueItemVisual(o,"style");u.opacity=c},n.start,n.end)}}}};function Eke(a){Dke(a),Ike(a)}function Dke(a){if(!a.parallel){var e=!1;se(a.series,function(t){t&&t.type==="parallel"&&(e=!0)}),e&&(a.parallel=[{}])}}function Ike(a){var e=Or(a.parallelAxis);se(e,function(t){if(aa(t)){var r=t.parallelIndex||0,n=Or(a.parallel)[r];n&&n.parallelAxisDefault&&Ca(t,n.parallelAxisDefault,!1)}})}var Rke=5,Lke=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){this._model=t,this._api=n,this._handlers||(this._handlers={},se(Oke,function(i,l){n.getZr().on(l,this._handlers[l]=Tt(i,this))},this)),Jx(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(t,r){Zv(this,"_throttledDispatchExpand"),se(this._handlers,function(n,i){r.getZr().off(i,n)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},e.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(et({type:"parallelAxisExpand"},t))},e.type="parallel",e})(tn),Oke={mousedown:function(a){Kk(this,"click")&&(this._mouseDownPoint=[a.offsetX,a.offsetY])},mouseup:function(a){var e=this._mouseDownPoint;if(Kk(this,"click")&&e){var t=[a.offsetX,a.offsetY],r=Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2);if(r>Rke)return;var n=this._model.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]);n.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:n.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(a){if(!(this._mouseDownPoint||!Kk(this,"mousemove"))){var e=this._model,t=e.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]),r=t.behavior;r==="jump"&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand(r==="none"?null:{axisExpandWindow:t.axisExpandWindow,animation:r==="jump"?null:{duration:0}})}}};function Kk(a,e){var t=a._model;return t.get("axisExpandable")&&t.get("axisExpandTriggerOn")===e}var Pke=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){a.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(t){var r=this.option;t&&Ca(r,t,!0),this._initDimensions()},e.prototype.contains=function(t,r){var n=t.get("parallelIndex");return n!=null&&r.getComponent("parallel",n)===this},e.prototype.setAxisExpand=function(t){se(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(r){t.hasOwnProperty(r)&&(this.option[r]=t[r])},this)},e.prototype._initDimensions=function(){var t=this.dimensions=[],r=this.parallelAxisIndex=[],n=pr(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(i){return(i.get("parallelIndex")||0)===this.componentIndex},this);se(n,function(i){t.push("dim"+i.get("dim")),r.push(i.componentIndex)})},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e})(za),zke=(function(a){Ie(e,a);function e(t,r,n,i,l){var o=a.call(this,t,r,n)||this;return o.type=i||"value",o.axisIndex=l,o}return e.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},e})(Fo);function jh(a,e,t,r,n,i){a=a||0;var l=t[1]-t[0];if(n!=null&&(n=Pp(n,[0,l])),i!=null&&(i=Math.max(i,n??0)),r==="all"){var o=Math.abs(e[1]-e[0]);o=Pp(o,[0,l]),n=i=Pp(o,[n,i]),r=0}e[0]=Pp(e[0],t),e[1]=Pp(e[1],t);var c=Qk(e,r);e[r]+=a;var d=n||0,u=t.slice();c.sign<0?u[0]+=d:u[1]-=d,e[r]=Pp(e[r],u);var h;return h=Qk(e,r),n!=null&&(h.sign!==c.sign||h.span<n)&&(e[1-r]=e[r]+c.sign*n),h=Qk(e,r),i!=null&&h.span>i&&(e[1-r]=e[r]+h.sign*i),e}function Qk(a,e){var t=a[e]-a[1-e];return{span:Math.abs(t),sign:t>0?-1:t<0?1:e?-1:1}}function Pp(a,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,a))}var Jk=se,sZ=Math.min,lZ=Math.max,$z=Math.floor,Bke=Math.ceil,qz=$n,Fke=Math.PI,Vke=(function(){function a(e,t,r){this.type="parallel",this._axesMap=Pt(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,r)}return a.prototype._init=function(e,t,r){var n=e.dimensions,i=e.parallelAxisIndex;Jk(n,function(l,o){var c=i[o],d=t.getComponent("parallelAxis",c),u=this._axesMap.set(l,new zke(l,DN(d),[0,0],d.get("type"),c)),h=u.type==="category";u.onBand=h&&d.get("boundaryGap"),u.inverse=d.get("inverse"),d.axis=u,u.model=d,u.coordinateSystem=d.coordinateSystem=this},this)},a.prototype.update=function(e,t){this._updateAxesFromSeries(this._model,e)},a.prototype.containPoint=function(e){var t=this._makeLayoutInfo(),r=t.axisBase,n=t.layoutBase,i=t.pixelDimIndex,l=e[1-i],o=e[i];return l>=r&&l<=r+t.axisLength&&o>=n&&o<=n+t.layoutLength},a.prototype.getModel=function(){return this._model},a.prototype._updateAxesFromSeries=function(e,t){t.eachSeries(function(r){if(e.contains(r,t)){var n=r.getData();Jk(this.dimensions,function(i){var l=this._axesMap.get(i);l.scale.unionExtentFromData(n,n.mapDimension(i)),Ix(l.scale,l.model)},this)}},this)},a.prototype.resize=function(e,t){var r=pi(e,t).refContainer;this._rect=cn(e.getBoxLayoutParams(),r),this._layoutAxes()},a.prototype.getRect=function(){return this._rect},a.prototype._makeLayoutInfo=function(){var e=this._model,t=this._rect,r=["x","y"],n=["width","height"],i=e.get("layout"),l=i==="horizontal"?0:1,o=t[n[l]],c=[0,o],d=this.dimensions.length,u=lw(e.get("axisExpandWidth"),c),h=lw(e.get("axisExpandCount")||0,[0,d]),f=e.get("axisExpandable")&&d>3&&d>h&&h>1&&u>0&&o>0,p=e.get("axisExpandWindow"),g;if(p)g=lw(p[1]-p[0],c),p[1]=p[0]+g;else{g=lw(u*(h-1),c);var b=e.get("axisExpandCenter")||$z(d/2);p=[u*b-g/2],p[1]=p[0]+g}var w=(o-g)/(d-h);w<3&&(w=0);var j=[$z(qz(p[0]/u,1))+1,Bke(qz(p[1]/u,1))-1],k=w/u*p[0];return{layout:i,pixelDimIndex:l,layoutBase:t[r[l]],layoutLength:o,axisBase:t[r[1-l]],axisLength:t[n[1-l]],axisExpandable:f,axisExpandWidth:u,axisCollapseWidth:w,axisExpandWindow:p,axisCount:d,winInnerIndices:j,axisExpandWindow0Pos:k}},a.prototype._layoutAxes=function(){var e=this._rect,t=this._axesMap,r=this.dimensions,n=this._makeLayoutInfo(),i=n.layout;t.each(function(l){var o=[0,n.axisLength],c=l.inverse?1:0;l.setExtent(o[c],o[1-c])}),Jk(r,function(l,o){var c=(n.axisExpandable?Uke:Hke)(o,n),d={horizontal:{x:c.position,y:n.axisLength},vertical:{x:0,y:c.position}},u={horizontal:Fke/2,vertical:0},h=[d[i].x+e.x,d[i].y+e.y],f=u[i],p=Li();Mh(p,p,f),Ec(p,p,h),this._axesLayout[l]={position:h,rotation:f,transform:p,axisNameAvailableWidth:c.axisNameAvailableWidth,axisLabelShow:c.axisLabelShow,nameTruncateMaxWidth:c.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},a.prototype.getAxis=function(e){return this._axesMap.get(e)},a.prototype.dataToPoint=function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},a.prototype.eachActiveState=function(e,t,r,n){r==null&&(r=0),n==null&&(n=e.count());var i=this._axesMap,l=this.dimensions,o=[],c=[];se(l,function(w){o.push(e.mapDimension(w)),c.push(i.get(w).model)});for(var d=this.hasAxisBrushed(),u=r;u<n;u++){var h=void 0;if(!d)h="normal";else{h="active";for(var f=e.getValues(o,u),p=0,g=l.length;p<g;p++){var b=c[p].getActiveState(f[p]);if(b==="inactive"){h="inactive";break}}}t(h,u)}},a.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,t=this._axesMap,r=!1,n=0,i=e.length;n<i;n++)t.get(e[n]).model.getActiveState()!=="normal"&&(r=!0);return r},a.prototype.axisCoordToPoint=function(e,t){var r=this._axesLayout[t];return To([e,0],r.transform)},a.prototype.getAxisLayout=function(e){return Xt(this._axesLayout[e])},a.prototype.getSlidedAxisExpandWindow=function(e){var t=this._makeLayoutInfo(),r=t.pixelDimIndex,n=t.axisExpandWindow.slice(),i=n[1]-n[0],l=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:n};var o=e[r]-t.layoutBase-t.axisExpandWindow0Pos,c,d="slide",u=t.axisCollapseWidth,h=this._model.get("axisExpandSlideTriggerArea"),f=h[0]!=null;if(u)f&&u&&o<i*h[0]?(d="jump",c=o-i*h[2]):f&&u&&o>i*(1-h[0])?(d="jump",c=o-i*(1-h[2])):(c=o-i*h[1])>=0&&(c=o-i*(1-h[1]))<=0&&(c=0),c*=t.axisExpandWidth/u,c?jh(c,n,l,"all"):d="none";else{var p=n[1]-n[0],g=l[1]*o/p;n=[lZ(0,g-p/2)],n[1]=sZ(l[1],n[0]+p),n[0]=n[1]-p}return{axisExpandWindow:n,behavior:d}},a})();function lw(a,e){return sZ(lZ(a,e[0]),e[1])}function Hke(a,e){var t=e.layoutLength/(e.axisCount-1);return{position:t*a,axisNameAvailableWidth:t,axisLabelShow:!0}}function Uke(a,e){var t=e.layoutLength,r=e.axisExpandWidth,n=e.axisCount,i=e.axisCollapseWidth,l=e.winInnerIndices,o,c=i,d=!1,u;return a<l[0]?(o=a*i,u=i):a<=l[1]?(o=e.axisExpandWindow0Pos+a*r-e.axisExpandWindow[0],c=r,d=!0):(o=t-(n-1-a)*i,u=i),{position:o,axisNameAvailableWidth:c,axisLabelShow:d,nameTruncateMaxWidth:u}}function Gke(a,e){var t=[];return a.eachComponent("parallel",function(r,n){var i=new Vke(r,a,e);i.name="parallel_"+n,i.resize(r,e),r.coordinateSystem=i,i.model=r,t.push(i)}),a.eachSeries(function(r){if(r.get("coordinateSystem")==="parallel"){var n=r.getReferringComponents("parallel",wn).models[0];r.coordinateSystem=n.coordinateSystem}}),t}var Wke={create:Gke},tA=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.activeIntervals=[],t}return e.prototype.getAreaSelectStyle=function(){return _0([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(t){var r=this.activeIntervals=Xt(t);if(r)for(var n=r.length-1;n>=0;n--)to(r[n])},e.prototype.getActiveState=function(t){var r=this.activeIntervals;if(!r.length)return"normal";if(t==null||isNaN(+t))return"inactive";if(r.length===1){var n=r[0];if(n[0]<=t&&t<=n[1])return"active"}else for(var i=0,l=r.length;i<l;i++)if(r[i][0]<=t&&t<=r[i][1])return"active";return"inactive"},e})(za);ei(tA,Bb);var C0=!0,db=Math.min,zx=Math.max,Yke=Math.pow,$ke=1e4,qke=6,Xke=6,Xz="globalPan",Zke={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Kke={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Zz={brushStyle:{lineWidth:2,stroke:Be.color.backgroundTint,fill:Be.color.borderTint},transformable:!0,brushMode:"single",removeOnClick:!1},Qke=0,o6=(function(a){Ie(e,a);function e(t){var r=a.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=t,r.group=new $t,r._uid="brushController_"+Qke++,se(iCe,function(n,i){this._handlers[i]=Tt(n,this)},r),r}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var r=this._zr;this._enableGlobalPan||Lje(r,Xz,this._uid),se(this._handlers,function(n,i){r.on(i,n)}),this._brushType=t.brushType,this._brushOption=Ca(Xt(Zz),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;Oje(t,Xz,this._uid),se(this._handlers,function(r,n){t.off(n,r)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var r=this._panels={};se(t,function(n){r[n.panelId]=Xt(n)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=r.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=ct(t,function(f){return Ca(Xt(Zz),f,!0)});var r="\0-brush-index-",n=this._covers,i=this._covers=[],l=this,o=this._creatingCover;return new Fd(n,t,d,c).add(u).update(u).remove(h).execute(),this;function c(f,p){return(f.id!=null?f.id:r+p)+"-"+f.brushType}function d(f,p){return c(f.__brushOption,p)}function u(f,p){var g=t[f];if(p!=null&&n[p]===o)i[f]=n[p];else{var b=i[f]=p!=null?(n[p].__brushOption=g,n[p]):cZ(l,oZ(l,g));c6(l,b)}}function h(f){n[f]!==o&&l.group.remove(n[f])}},e.prototype.unmount=function(){return this.enableBrush(!1),aA(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e})(co);function oZ(a,e){var t=VN[e.brushType].createCover(a,e);return t.__brushOption=e,uZ(t,e),a.group.add(t),t}function cZ(a,e){var t=d6(e);return t.endCreating&&(t.endCreating(a,e),uZ(e,e.__brushOption)),e}function dZ(a,e){var t=e.__brushOption;d6(e).updateCoverShape(a,e,t.range,t)}function uZ(a,e){var t=e.z;t==null&&(t=$ke),a.traverse(function(r){r.z=t,r.z2=t})}function c6(a,e){d6(e).updateCommon(a,e),dZ(a,e)}function d6(a){return VN[a.__brushOption.brushType]}function u6(a,e,t){var r=a._panels;if(!r)return C0;var n,i=a._transform;return se(r,function(l){l.isTargetByCursor(e,t,i)&&(n=l)}),n}function hZ(a,e){var t=a._panels;if(!t)return C0;var r=e.__brushOption.panelId;return r!=null?t[r]:C0}function aA(a){var e=a._covers,t=e.length;return se(e,function(r){a.group.remove(r)},a),e.length=0,!!t}function A0(a,e){var t=ct(a._covers,function(r){var n=r.__brushOption,i=Xt(n.range);return{brushType:n.brushType,panelId:n.panelId,range:i}});a.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function Jke(a){var e=a._track;if(!e.length)return!1;var t=e[e.length-1],r=e[0],n=t[0]-r[0],i=t[1]-r[1],l=Yke(n*n+i*i,.5);return l>qke}function fZ(a){var e=a.length-1;return e<0&&(e=0),[a[0],a[e]]}function pZ(a,e,t,r){var n=new $t;return n.add(new Ea({name:"main",style:h6(t),silent:!0,draggable:!0,cursor:"move",drift:ya(Kz,a,e,n,["n","s","w","e"]),ondragend:ya(A0,e,{isEnd:!0})})),se(r,function(i){n.add(new Ea({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:ya(Kz,a,e,n,i),ondragend:ya(A0,e,{isEnd:!0})}))}),n}function xZ(a,e,t,r){var n=r.brushStyle.lineWidth||0,i=zx(n,Xke),l=t[0][0],o=t[1][0],c=l-n/2,d=o-n/2,u=t[0][1],h=t[1][1],f=u-i+n/2,p=h-i+n/2,g=u-l,b=h-o,w=g+n,j=b+n;pd(a,e,"main",l,o,g,b),r.transformable&&(pd(a,e,"w",c,d,i,j),pd(a,e,"e",f,d,i,j),pd(a,e,"n",c,d,w,i),pd(a,e,"s",c,p,w,i),pd(a,e,"nw",c,d,i,i),pd(a,e,"ne",f,d,i,i),pd(a,e,"sw",c,p,i,i),pd(a,e,"se",f,p,i,i))}function rA(a,e){var t=e.__brushOption,r=t.transformable,n=e.childAt(0);n.useStyle(h6(t)),n.attr({silent:!r,cursor:r?"move":"default"}),se([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var l=e.childOfName(i.join("")),o=i.length===1?nA(a,i[0]):tCe(a,i);l&&l.attr({silent:!r,invisible:!r,cursor:r?Kke[o]+"-resize":null})})}function pd(a,e,t,r,n,i,l){var o=e.childOfName(t);o&&o.setShape(rCe(f6(a,e,[[r,n],[r+i,n+l]])))}function h6(a){return ta({strokeNoScale:!0},a.brushStyle)}function mZ(a,e,t,r){var n=[db(a,t),db(e,r)],i=[zx(a,t),zx(e,r)];return[[n[0],i[0]],[n[1],i[1]]]}function eCe(a){return d0(a.group)}function nA(a,e){var t={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},n=NN(t[e],eCe(a));return r[n]}function tCe(a,e){var t=[nA(a,e[0]),nA(a,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function Kz(a,e,t,r,n,i){var l=t.__brushOption,o=a.toRectRange(l.range),c=gZ(e,n,i);se(r,function(d){var u=Zke[d];o[u[0]][u[1]]+=c[u[0]]}),l.range=a.fromRectRange(mZ(o[0][0],o[1][0],o[0][1],o[1][1])),c6(e,t),A0(e,{isEnd:!1})}function aCe(a,e,t,r){var n=e.__brushOption.range,i=gZ(a,t,r);se(n,function(l){l[0]+=i[0],l[1]+=i[1]}),c6(a,e),A0(a,{isEnd:!1})}function gZ(a,e,t){var r=a.group,n=r.transformCoordToLocal(e,t),i=r.transformCoordToLocal(0,0);return[n[0]-i[0],n[1]-i[1]]}function f6(a,e,t){var r=hZ(a,e);return r&&r!==C0?r.clipPath(t,a._transform):Xt(t)}function rCe(a){var e=db(a[0][0],a[1][0]),t=db(a[0][1],a[1][1]),r=zx(a[0][0],a[1][0]),n=zx(a[0][1],a[1][1]);return{x:e,y:t,width:r-e,height:n-t}}function nCe(a,e,t){if(!(!a._brushType||sCe(a,e.offsetX,e.offsetY))){var r=a._zr,n=a._covers,i=u6(a,e,t);if(!a._dragging)for(var l=0;l<n.length;l++){var o=n[l].__brushOption;if(i&&(i===C0||o.panelId===i.panelId)&&VN[o.brushType].contain(n[l],t[0],t[1]))return}i&&r.setCursorStyle("crosshair")}}function iA(a){var e=a.event;e.preventDefault&&e.preventDefault()}function sA(a,e,t){return a.childOfName("main").contain(e,t)}function vZ(a,e,t,r){var n=a._creatingCover,i=a._creatingPanel,l=a._brushOption,o;if(a._track.push(t.slice()),Jke(a)||n){if(i&&!n){l.brushMode==="single"&&aA(a);var c=Xt(l);c.brushType=Qz(c.brushType,i),c.panelId=i===C0?null:i.panelId,n=a._creatingCover=oZ(a,c),a._covers.push(n)}if(n){var d=VN[Qz(a._brushType,i)],u=n.__brushOption;u.range=d.getCreatingRange(f6(a,n,a._track)),r&&(cZ(a,n),d.updateCommon(a,n)),dZ(a,n),o={isEnd:r}}}else r&&l.brushMode==="single"&&l.removeOnClick&&u6(a,e,t)&&aA(a)&&(o={isEnd:r,removeOnClick:!0});return o}function Qz(a,e){return a==="auto"?e.defaultBrushType:a}var iCe={mousedown:function(a){if(this._dragging)Jz(this,a);else if(!a.target||!a.target.draggable){iA(a);var e=this.group.transformCoordToLocal(a.offsetX,a.offsetY);this._creatingCover=null;var t=this._creatingPanel=u6(this,a,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(a){var e=a.offsetX,t=a.offsetY,r=this.group.transformCoordToLocal(e,t);if(nCe(this,a,r),this._dragging){iA(a);var n=vZ(this,a,r,!1);n&&A0(this,n)}},mouseup:function(a){Jz(this,a)}};function Jz(a,e){if(a._dragging){iA(e);var t=e.offsetX,r=e.offsetY,n=a.group.transformCoordToLocal(t,r),i=vZ(a,e,n,!0);a._dragging=!1,a._track=[],a._creatingCover=null,i&&A0(a,i)}}function sCe(a,e,t){var r=a._zr;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var VN={lineX:eB(0),lineY:eB(1),rect:{createCover:function(a,e){function t(r){return r}return pZ({toRectRange:t,fromRectRange:t},a,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(a){var e=fZ(a);return mZ(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(a,e,t,r){xZ(a,e,t,r)},updateCommon:rA,contain:sA},polygon:{createCover:function(a,e){var t=new $t;return t.add(new Xi({name:"main",style:h6(e),silent:!0})),t},getCreatingRange:function(a){return a},endCreating:function(a,e){e.remove(e.childAt(0)),e.add(new fs({name:"main",draggable:!0,drift:ya(aCe,a,e),ondragend:ya(A0,a,{isEnd:!0})}))},updateCoverShape:function(a,e,t,r){e.childAt(0).setShape({points:f6(a,e,t)})},updateCommon:rA,contain:sA}};function eB(a){return{createCover:function(e,t){return pZ({toRectRange:function(r){var n=[r,[0,100]];return a&&n.reverse(),n},fromRectRange:function(r){return r[a]}},e,t,[[["w"],["e"]],[["n"],["s"]]][a])},getCreatingRange:function(e){var t=fZ(e),r=db(t[0][a],t[1][a]),n=zx(t[0][a],t[1][a]);return[r,n]},updateCoverShape:function(e,t,r,n){var i,l=hZ(e,t);if(l!==C0&&l.getLinearBrushOtherExtent)i=l.getLinearBrushOtherExtent(a);else{var o=e._zr;i=[0,[o.getWidth(),o.getHeight()][1-a]]}var c=[r,i];a&&c.reverse(),xZ(e,t,c,n)},updateCommon:rA,contain:sA}}function bZ(a){return a=p6(a),function(e){return tY(e,a)}}function yZ(a,e){return a=p6(a),function(t){var r=e??t,n=r?a.width:a.height,i=r?a.x:a.y;return[i,i+(n||0)]}}function wZ(a,e,t){var r=p6(a);return function(n,i){return r.contain(i[0],i[1])&&!kX(n,e,t)}}function p6(a){return ra.create(a)}var lCe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){a.prototype.init.apply(this,arguments),(this._brushController=new o6(r.getZr())).on("brush",Tt(this._onBrush,this))},e.prototype.render=function(t,r,n,i){if(!oCe(t,r,i)){this.axisModel=t,this.api=n,this.group.removeAll();var l=this._axisGroup;if(this._axisGroup=new $t,this.group.add(this._axisGroup),!!t.get("show")){var o=dCe(t,r),c=o.coordinateSystem,d=t.getAreaSelectStyle(),u=d.width,h=t.axis.dim,f=c.getAxisLayout(h),p=et({strokeContainThreshold:u},f),g=new Ts(t,n,p);g.build(),this._axisGroup.add(g.group),this._refreshBrushController(p,d,t,o,u,n),Db(l,this._axisGroup,t)}}},e.prototype._refreshBrushController=function(t,r,n,i,l,o){var c=n.axis.getExtent(),d=c[1]-c[0],u=Math.min(30,Math.abs(d)*.1),h=ra.create({x:c[0],y:-l/2,width:d,height:l});h.x-=u,h.width+=2*u,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:bZ(h),isTargetByCursor:wZ(h,o,i),getLinearBrushOtherExtent:yZ(h,0)}]).enableBrush({brushType:"lineX",brushStyle:r,removeOnClick:!0}).updateCovers(cCe(n))},e.prototype._onBrush=function(t){var r=t.areas,n=this.axisModel,i=n.axis,l=ct(r,function(o){return[i.coordToData(o.range[0],!0),i.coordToData(o.range[1],!0)]});(!n.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:l})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e})(tn);function oCe(a,e,t){return t&&t.type==="axisAreaSelect"&&e.findComponents({mainType:"parallelAxis",query:t})[0]===a}function cCe(a){var e=a.axis;return ct(a.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}function dCe(a,e){return e.getComponent("parallel",a.get("parallelIndex"))}var uCe={type:"axisAreaSelect",event:"axisAreaSelected"};function hCe(a){a.registerAction(uCe,function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(r){r.axis.model.setActiveIntervals(e.intervals)})}),a.registerAction("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(r){r.setAxisExpand(e)})})}var fCe={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function _Z(a){a.registerComponentView(Lke),a.registerComponentModel(Pke),a.registerCoordinateSystem("parallel",Wke),a.registerPreprocessor(Eke),a.registerComponentModel(tA),a.registerComponentView(lCe),Ox(a,"parallel",tA,fCe),hCe(a)}function pCe(a){Ta(_Z),a.registerChartView(Nke),a.registerSeriesModel(kke),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,Mke)}var xCe=(function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return a})(),mCe=(function(a){Ie(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new xCe},e.prototype.buildPath=function(t,r){var n=r.extent;t.moveTo(r.x1,r.y1),t.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(t.lineTo(r.x2+n,r.y2),t.bezierCurveTo(r.cpx2+n,r.cpy2,r.cpx1+n,r.cpy1,r.x1+n,r.y1)):(t.lineTo(r.x2,r.y2+n),t.bezierCurveTo(r.cpx2,r.cpy2+n,r.cpx1,r.cpy1+n,r.x1,r.y1+n)),t.closePath()},e.prototype.highlight=function(){zd(this)},e.prototype.downplay=function(){Bd(this)},e})(Ra),gCe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t._mainGroup=new $t,t._focusAdjacencyDisabled=!1,t}return e.prototype.init=function(t,r){this._controller=new F0(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,r,n){var i=this,l=t.getGraph(),o=this._mainGroup,c=t.layoutInfo,d=c.width,u=c.height,h=t.getData(),f=t.getData("edge"),p=t.get("orient");this._model=t,o.removeAll(),o.x=c.x,o.y=c.y,this._updateViewCoordSys(t,n),CX(t,n,o,this._controller,this._controllerHost,null),l.eachEdge(function(g){var b=new mCe,w=la(b);w.dataIndex=g.dataIndex,w.seriesIndex=t.seriesIndex,w.dataType="edge";var j=g.getModel(),k=j.getModel("lineStyle"),T=k.get("curveness"),E=g.node1.getLayout(),I=g.node1.getModel(),R=I.get("localX"),P=I.get("localY"),H=g.node2.getLayout(),G=g.node2.getModel(),X=G.get("localX"),U=G.get("localY"),te=g.getLayout(),Z,J,B,W,$,Q,ne,re;b.shape.extent=Math.max(1,te.dy),b.shape.orient=p,p==="vertical"?(Z=(R!=null?R*d:E.x)+te.sy,J=(P!=null?P*u:E.y)+E.dy,B=(X!=null?X*d:H.x)+te.ty,W=U!=null?U*u:H.y,$=Z,Q=J*(1-T)+W*T,ne=B,re=J*T+W*(1-T)):(Z=(R!=null?R*d:E.x)+E.dx,J=(P!=null?P*u:E.y)+te.sy,B=X!=null?X*d:H.x,W=(U!=null?U*u:H.y)+te.ty,$=Z*(1-T)+B*T,Q=J,ne=Z*T+B*(1-T),re=W),b.setShape({x1:Z,y1:J,x2:B,y2:W,cpx1:$,cpy1:Q,cpx2:ne,cpy2:re}),b.useStyle(k.getItemStyle()),tB(b.style,p,g);var K=""+j.get("value"),ae=fi(j,"edgeLabel");ji(b,ae,{labelFetcher:{getFormattedLabel:function(he,pe,Re,Te,ke,Le){return t.getFormattedLabel(he,pe,"edge",Te,jl(ke,ae.normal&&ae.normal.get("formatter"),K),Le)}},labelDataIndex:g.dataIndex,defaultText:K}),b.setTextConfig({position:"inside"});var ce=j.getModel("emphasis");hi(b,j,"lineStyle",function(he){var pe=he.getItemStyle();return tB(pe,p,g),pe}),o.add(b),f.setItemGraphicEl(g.dataIndex,b);var de=ce.get("focus");on(b,de==="adjacency"?g.getAdjacentDataIndices():de==="trajectory"?g.getTrajectoryDataIndices():de,ce.get("blurScope"),ce.get("disabled"))}),l.eachNode(function(g){var b=g.getLayout(),w=g.getModel(),j=w.get("localX"),k=w.get("localY"),T=w.getModel("emphasis"),E=w.get(["itemStyle","borderRadius"])||0,I=new Ea({shape:{x:j!=null?j*d:b.x,y:k!=null?k*u:b.y,width:b.dx,height:b.dy,r:E},style:w.getModel("itemStyle").getItemStyle(),z2:10});ji(I,fi(w),{labelFetcher:{getFormattedLabel:function(P,H){return t.getFormattedLabel(P,H,"node")}},labelDataIndex:g.dataIndex,defaultText:g.id}),I.disableLabelAnimation=!0,I.setStyle("fill",g.getVisual("color")),I.setStyle("decal",g.getVisual("style").decal),hi(I,w),o.add(I),h.setItemGraphicEl(g.dataIndex,I),la(I).dataType="node";var R=T.get("focus");on(I,R==="adjacency"?g.getAdjacentDataIndices():R==="trajectory"?g.getTrajectoryDataIndices():R,T.get("blurScope"),T.get("disabled"))}),h.eachItemGraphicEl(function(g,b){var w=h.getItemModel(b);w.get("draggable")&&(g.drift=function(j,k){i._focusAdjacencyDisabled=!0,this.shape.x+=j,this.shape.y+=k,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:h.getRawIndex(b),localX:this.shape.x/d,localY:this.shape.y/u})},g.ondragend=function(){i._focusAdjacencyDisabled=!1},g.draggable=!0,g.cursor="move")}),!this._data&&t.isAnimationEnabled()&&o.setClipPath(vCe(o.getBoundingRect(),t,function(){o.removeClipPath()})),this._data=t.getData()},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._updateViewCoordSys=function(t,r){var n=t.layoutInfo,i=n.width,l=n.height,o=t.coordinateSystem=new V0(null,{api:r,ecModel:t.ecModel});o.zoomLimit=t.get("scaleLimit"),o.setBoundingRect(0,0,i,l),o.setCenter(t.get("center")),o.setZoom(t.get("zoom")),this._controllerHost.target.attr({x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY})},e.type="sankey",e})(Dr);function tB(a,e,t){switch(a.fill){case"source":a.fill=t.node1.getVisual("color"),a.decal=t.node1.getVisual("style").decal;break;case"target":a.fill=t.node2.getVisual("color"),a.decal=t.node2.getVisual("style").decal;break;case"gradient":var r=t.node1.getVisual("color"),n=t.node2.getVisual("color");At(r)&&At(n)&&(a.fill=new qx(0,0,+(e==="horizontal"),+(e==="vertical"),[{color:r,offset:0},{color:n,offset:1}]))}}function vCe(a,e,t){var r=new Ea({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return en(r,{shape:{width:a.width+20}},e,t),r}var bCe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){var n=t.edges||t.links||[],i=t.data||t.nodes||[],l=t.levels||[];this.levelModels=[];for(var o=this.levelModels,c=0;c<l.length;c++)l[c].depth!=null&&l[c].depth>=0&&(o[l[c].depth]=new Fa(l[c],this,r));var d=l6(i,n,this,!0,u);return d.data;function u(h,f){h.wrapMethod("getItemModel",function(p,g){var b=p.parentModel,w=b.getData().getItemLayout(g);if(w){var j=w.depth,k=b.levelModels[j];k&&(p.parentModel=k)}return p}),f.wrapMethod("getItemModel",function(p,g){var b=p.parentModel,w=b.getGraph().getEdgeByIndex(g),j=w.node1.getLayout();if(j){var k=j.depth,T=b.levelModels[k];T&&(p.parentModel=T)}return p})}},e.prototype.setNodePosition=function(t,r){var n=this.option.data||this.option.nodes,i=n[t];i.localX=r[0],i.localY=r[1]},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,r,n){function i(p){return isNaN(p)||p==null}if(n==="edge"){var l=this.getDataParams(t,n),o=l.data,c=l.value,d=o.source+" -- "+o.target;return Qn("nameValue",{name:d,value:c,noValue:i(c)})}else{var u=this.getGraph().getNodeByIndex(t),h=u.getLayout().value,f=this.getDataParams(t,n).data.name;return Qn("nameValue",{name:f!=null?f+"":null,value:h,noValue:i(h)})}},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(t,r){var n=a.prototype.getDataParams.call(this,t,r);if(n.value==null&&r==="node"){var i=this.getGraph().getNodeByIndex(t),l=i.getLayout().value;n.value=l}return n},e.type="series.sankey",e.layoutMode="box",e.defaultOption={z:2,coordinateSystemUsage:"box",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,roam:!1,roamTrigger:"global",center:null,zoom:1,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:Be.color.neutral50,opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:Be.color.primary}},animationEasing:"linear",animationDuration:1e3},e})(Vr);function yCe(a,e){a.eachSeriesByType("sankey",function(t){var r=t.get("nodeWidth"),n=t.get("nodeGap"),i=pi(t,e).refContainer,l=cn(t.getBoxLayoutParams(),i);t.layoutInfo=l;var o=l.width,c=l.height,d=t.getGraph(),u=d.nodes,h=d.edges;_Ce(u);var f=pr(u,function(w){return w.getLayout().value===0}),p=f.length!==0?0:t.get("layoutIterations"),g=t.get("orient"),b=t.get("nodeAlign");wCe(u,h,r,n,o,c,p,g,b)})}function wCe(a,e,t,r,n,i,l,o,c){NCe(a,e,t,n,i,o,c),CCe(a,e,i,n,r,l,o),OCe(a,o)}function _Ce(a){se(a,function(e){var t=ph(e.outEdges,g_),r=ph(e.inEdges,g_),n=e.getValue()||0,i=Math.max(t,r,n);e.setLayout({value:i},!0)})}function NCe(a,e,t,r,n,i,l){for(var o=[],c=[],d=[],u=[],h=0,f=0;f<e.length;f++)o[f]=1;for(var f=0;f<a.length;f++)c[f]=a[f].inEdges.length,c[f]===0&&d.push(a[f]);for(var p=-1;d.length;){for(var g=0;g<d.length;g++){var b=d[g],w=b.hostGraph.data.getRawDataItem(b.dataIndex),j=w.depth!=null&&w.depth>=0;j&&w.depth>p&&(p=w.depth),b.setLayout({depth:j?w.depth:h},!0),i==="vertical"?b.setLayout({dy:t},!0):b.setLayout({dx:t},!0);for(var k=0;k<b.outEdges.length;k++){var T=b.outEdges[k],E=e.indexOf(T);o[E]=0;var I=T.node2,R=a.indexOf(I);--c[R]===0&&u.indexOf(I)<0&&u.push(I)}}++h,d=u,u=[]}for(var f=0;f<o.length;f++)if(o[f]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var P=p>h-1?p:h-1;l&&l!=="left"&&jCe(a,l,i,P);var H=i==="vertical"?(n-t)/P:(r-t)/P;kCe(a,H,i)}function NZ(a){var e=a.hostGraph.data.getRawDataItem(a.dataIndex);return e.depth!=null&&e.depth>=0}function jCe(a,e,t,r){if(e==="right"){for(var n=[],i=a,l=0;i.length;){for(var o=0;o<i.length;o++){var c=i[o];c.setLayout({skNodeHeight:l},!0);for(var d=0;d<c.inEdges.length;d++){var u=c.inEdges[d];n.indexOf(u.node1)<0&&n.push(u.node1)}}i=n,n=[],++l}se(a,function(h){NZ(h)||h.setLayout({depth:Math.max(0,r-h.getLayout().skNodeHeight)},!0)})}else e==="justify"&&SCe(a,r)}function SCe(a,e){se(a,function(t){!NZ(t)&&!t.outEdges.length&&t.setLayout({depth:e},!0)})}function kCe(a,e,t){se(a,function(r){var n=r.getLayout().depth*e;t==="vertical"?r.setLayout({y:n},!0):r.setLayout({x:n},!0)})}function CCe(a,e,t,r,n,i,l){var o=ACe(a,l);TCe(o,e,t,r,n,l),eC(o,n,t,r,l);for(var c=1;i>0;i--)c*=.99,MCe(o,c,l),eC(o,n,t,r,l),LCe(o,c,l),eC(o,n,t,r,l)}function ACe(a,e){var t=[],r=e==="vertical"?"y":"x",n=W4(a,function(i){return i.getLayout()[r]});return n.keys.sort(function(i,l){return i-l}),se(n.keys,function(i){t.push(n.buckets.get(i))}),t}function TCe(a,e,t,r,n,i){var l=1/0;se(a,function(o){var c=o.length,d=0;se(o,function(h){d+=h.getLayout().value});var u=i==="vertical"?(r-(c-1)*n)/d:(t-(c-1)*n)/d;u<l&&(l=u)}),se(a,function(o){se(o,function(c,d){var u=c.getLayout().value*l;i==="vertical"?(c.setLayout({x:d},!0),c.setLayout({dx:u},!0)):(c.setLayout({y:d},!0),c.setLayout({dy:u},!0))})}),se(e,function(o){var c=+o.getValue()*l;o.setLayout({dy:c},!0)})}function eC(a,e,t,r,n){var i=n==="vertical"?"x":"y";se(a,function(l){l.sort(function(b,w){return b.getLayout()[i]-w.getLayout()[i]});for(var o,c,d,u=0,h=l.length,f=n==="vertical"?"dx":"dy",p=0;p<h;p++)c=l[p],d=u-c.getLayout()[i],d>0&&(o=c.getLayout()[i]+d,n==="vertical"?c.setLayout({x:o},!0):c.setLayout({y:o},!0)),u=c.getLayout()[i]+c.getLayout()[f]+e;var g=n==="vertical"?r:t;if(d=u-e-g,d>0){o=c.getLayout()[i]-d,n==="vertical"?c.setLayout({x:o},!0):c.setLayout({y:o},!0),u=o;for(var p=h-2;p>=0;--p)c=l[p],d=c.getLayout()[i]+c.getLayout()[f]+e-u,d>0&&(o=c.getLayout()[i]-d,n==="vertical"?c.setLayout({x:o},!0):c.setLayout({y:o},!0)),u=c.getLayout()[i]}})}function MCe(a,e,t){se(a.slice().reverse(),function(r){se(r,function(n){if(n.outEdges.length){var i=ph(n.outEdges,ECe,t)/ph(n.outEdges,g_);if(isNaN(i)){var l=n.outEdges.length;i=l?ph(n.outEdges,DCe,t)/l:0}if(t==="vertical"){var o=n.getLayout().x+(i-Sh(n,t))*e;n.setLayout({x:o},!0)}else{var c=n.getLayout().y+(i-Sh(n,t))*e;n.setLayout({y:c},!0)}}})})}function ECe(a,e){return Sh(a.node2,e)*a.getValue()}function DCe(a,e){return Sh(a.node2,e)}function ICe(a,e){return Sh(a.node1,e)*a.getValue()}function RCe(a,e){return Sh(a.node1,e)}function Sh(a,e){return e==="vertical"?a.getLayout().x+a.getLayout().dx/2:a.getLayout().y+a.getLayout().dy/2}function g_(a){return a.getValue()}function ph(a,e,t){for(var r=0,n=a.length,i=-1;++i<n;){var l=+e(a[i],t);isNaN(l)||(r+=l)}return r}function LCe(a,e,t){se(a,function(r){se(r,function(n){if(n.inEdges.length){var i=ph(n.inEdges,ICe,t)/ph(n.inEdges,g_);if(isNaN(i)){var l=n.inEdges.length;i=l?ph(n.inEdges,RCe,t)/l:0}if(t==="vertical"){var o=n.getLayout().x+(i-Sh(n,t))*e;n.setLayout({x:o},!0)}else{var c=n.getLayout().y+(i-Sh(n,t))*e;n.setLayout({y:c},!0)}}})})}function OCe(a,e){var t=e==="vertical"?"x":"y";se(a,function(r){r.outEdges.sort(function(n,i){return n.node2.getLayout()[t]-i.node2.getLayout()[t]}),r.inEdges.sort(function(n,i){return n.node1.getLayout()[t]-i.node1.getLayout()[t]})}),se(a,function(r){var n=0,i=0;se(r.outEdges,function(l){l.setLayout({sy:n},!0),n+=l.getLayout().dy}),se(r.inEdges,function(l){l.setLayout({ty:i},!0),i+=l.getLayout().dy})})}function PCe(a){a.eachSeriesByType("sankey",function(e){var t=e.getGraph(),r=t.nodes,n=t.edges;if(r.length){var i=1/0,l=-1/0;se(r,function(o){var c=o.getLayout().value;c<i&&(i=c),c>l&&(l=c)}),se(r,function(o){var c=new Ni({type:"color",mappingMethod:"linear",dataExtent:[i,l],visual:e.get("color")}),d=c.mapValueToVisual(o.getLayout().value),u=o.getModel().get(["itemStyle","color"]);u!=null?(o.setVisual("color",u),o.setVisual("style",{fill:u})):(o.setVisual("color",d),o.setVisual("style",{fill:d}))})}n.length&&se(n,function(o){var c=o.getModel().get("lineStyle");o.setVisual("style",c)})})}function zCe(a){a.registerChartView(gCe),a.registerSeriesModel(bCe),a.registerLayout(yCe),a.registerVisual(PCe),a.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(r){r.setNodePosition(e.dataIndex,[e.localX,e.localY])})}),a.registerAction({type:"sankeyRoam",event:"sankeyRoam",update:"none"},function(e,t,r){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(n){var i=n.coordinateSystem,l=PN(i,e,n.get("scaleLimit"));n.setCenter(l.center),n.setZoom(l.zoom)})})}var jZ=(function(){function a(){}return a.prototype._hasEncodeRule=function(e){var t=this.getEncode();return t&&t.get(e)!=null},a.prototype.getInitialData=function(e,t){var r,n=t.getComponent("xAxis",this.get("xAxisIndex")),i=t.getComponent("yAxis",this.get("yAxisIndex")),l=n.get("type"),o=i.get("type"),c;l==="category"?(e.layout="horizontal",r=n.getOrdinalMeta(),c=!this._hasEncodeRule("x")):o==="category"?(e.layout="vertical",r=i.getOrdinalMeta(),c=!this._hasEncodeRule("y")):e.layout=e.layout||"horizontal";var d=["x","y"],u=e.layout==="horizontal"?0:1,h=this._baseAxisDim=d[u],f=d[1-u],p=[n,i],g=p[u].get("type"),b=p[1-u].get("type"),w=e.data;if(w&&c){var j=[];se(w,function(E,I){var R;lt(E)?(R=E.slice(),E.unshift(I)):lt(E.value)?(R=et({},E),R.value=R.value.slice(),E.value.unshift(I)):R=E,j.push(R)}),e.data=j}var k=this.defaultValueDimensions,T=[{name:h,type:e_(g),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:f,type:e_(b),dimsDef:k.slice()}];return rm(this,{coordDimensions:T,dimensionsCount:k.length+1,encodeDefaulter:ya(LY,T,this)})},a.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},a})(),SZ=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],t.visualDrawType="stroke",t}return e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:Be.color.neutral00,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:Be.color.shadow}},animationDuration:800},e})(Vr);ei(SZ,jZ,!0);var BCe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var i=t.getData(),l=this.group,o=this._data;this._data||l.removeAll();var c=t.get("layout")==="horizontal"?1:0;i.diff(o).add(function(d){if(i.hasValue(d)){var u=i.getItemLayout(d),h=aB(u,i,d,c,!0);i.setItemGraphicEl(d,h),l.add(h)}}).update(function(d,u){var h=o.getItemGraphicEl(u);if(!i.hasValue(d)){l.remove(h);return}var f=i.getItemLayout(d);h?(lo(h),kZ(f,h,i,d)):h=aB(f,i,d,c),l.add(h),i.setItemGraphicEl(d,h)}).remove(function(d){var u=o.getItemGraphicEl(d);u&&l.remove(u)}).execute(),this._data=i},e.prototype.remove=function(t){var r=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(i){i&&r.remove(i)})},e.type="boxplot",e})(Dr),FCe=(function(){function a(){}return a})(),VCe=(function(a){Ie(e,a);function e(t){var r=a.call(this,t)||this;return r.type="boxplotBoxPath",r}return e.prototype.getDefaultShape=function(){return new FCe},e.prototype.buildPath=function(t,r){var n=r.points,i=0;for(t.moveTo(n[i][0],n[i][1]),i++;i<4;i++)t.lineTo(n[i][0],n[i][1]);for(t.closePath();i<n.length;i++)t.moveTo(n[i][0],n[i][1]),i++,t.lineTo(n[i][0],n[i][1])},e})(Ra);function aB(a,e,t,r,n){var i=a.ends,l=new VCe({shape:{points:n?HCe(i,r,a):i}});return kZ(a,l,e,t,n),l}function kZ(a,e,t,r,n){var i=t.hostModel,l=R0[n?"initProps":"updateProps"];l(e,{shape:{points:a.ends}},i,r),e.useStyle(t.getItemVisual(r,"style")),e.style.strokeNoScale=!0,e.z2=100;var o=t.getItemModel(r),c=o.getModel("emphasis");hi(e,o),on(e,c.get("focus"),c.get("blurScope"),c.get("disabled"))}function HCe(a,e,t){return ct(a,function(r){return r=r.slice(),r[e]=t.initBaseline,r})}var mv=se;function UCe(a){var e=GCe(a);mv(e,function(t){var r=t.seriesModels;r.length&&(WCe(t),mv(r,function(n,i){YCe(n,t.boxOffsetList[i],t.boxWidthList[i])}))})}function GCe(a){var e=[],t=[];return a.eachSeriesByType("boxplot",function(r){var n=r.getBaseAxis(),i=ja(t,n);i<0&&(i=t.length,t[i]=n,e[i]={axis:n,seriesModels:[]}),e[i].seriesModels.push(r)}),e}function WCe(a){var e=a.axis,t=a.seriesModels,r=t.length,n=a.boxWidthList=[],i=a.boxOffsetList=[],l=[],o;if(e.type==="category")o=e.getBandWidth();else{var c=0;mv(t,function(g){c=Math.max(c,g.getData().count())});var d=e.getExtent();o=Math.abs(d[1]-d[0])/c}mv(t,function(g){var b=g.get("boxWidth");lt(b)||(b=[b,b]),l.push([kt(b[0],o)||0,kt(b[1],o)||0])});var u=o*.8-2,h=u/r*.3,f=(u-h*(r-1))/r,p=f/2-u/2;mv(t,function(g,b){i.push(p),p+=h+f,n.push(Math.min(Math.max(f,l[b][0]),l[b][1]))})}function YCe(a,e,t){var r=a.coordinateSystem,n=a.getData(),i=t/2,l=a.get("layout")==="horizontal"?0:1,o=1-l,c=["x","y"],d=n.mapDimension(c[l]),u=n.mapDimensionsAll(c[o]);if(d==null||u.length<5)return;for(var h=0;h<n.count();h++){var f=n.get(d,h),p=T(f,u[2],h),g=T(f,u[0],h),b=T(f,u[1],h),w=T(f,u[3],h),j=T(f,u[4],h),k=[];E(k,b,!1),E(k,w,!0),k.push(g,b,j,w),I(k,g),I(k,j),I(k,p),n.setItemLayout(h,{initBaseline:p[o],ends:k})}function T(R,P,H){var G=n.get(P,H),X=[];X[l]=R,X[o]=G;var U;return isNaN(R)||isNaN(G)?U=[NaN,NaN]:(U=r.dataToPoint(X),U[l]+=e),U}function E(R,P,H){var G=P.slice(),X=P.slice();G[l]+=i,X[l]-=i,H?R.push(G,X):R.push(X,G)}function I(R,P){var H=P.slice(),G=P.slice();H[l]-=i,G[l]+=i,R.push(H,G)}}function $Ce(a,e){e=e||{};for(var t=[],r=[],n=e.boundIQR,i=n==="none"||n===0,l=0;l<a.length;l++){var o=to(a[l].slice()),c=T5(o,.25),d=T5(o,.5),u=T5(o,.75),h=o[0],f=o[o.length-1],p=(n??1.5)*(u-c),g=i?h:Math.max(h,c-p),b=i?f:Math.min(f,u+p),w=e.itemNameFormatter,j=Yt(w)?w({value:l}):At(w)?w.replace("{value}",l+""):l+"";t.push([j,g,c,d,u,b]);for(var k=0;k<o.length;k++){var T=o[k];if(T<g||T>b){var E=[j,T];r.push(E)}}}return{boxData:t,outliers:r}}var qCe={type:"echarts:boxplot",transform:function(e){var t=e.upstream;if(t.sourceFormat!==Oi){var r="";cr(r)}var n=$Ce(t.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}};function XCe(a){a.registerSeriesModel(SZ),a.registerChartView(BCe),a.registerLayout(UCe),a.registerTransform(qCe)}var ZCe=["itemStyle","borderColor"],KCe=["itemStyle","borderColor0"],QCe=["itemStyle","borderColorDoji"],JCe=["itemStyle","color"],e4e=["itemStyle","color0"];function x6(a,e){return e.get(a>0?JCe:e4e)}function m6(a,e){return e.get(a===0?QCe:a>0?ZCe:KCe)}var t4e={seriesType:"candlestick",plan:Qx(),performRawSeries:!0,reset:function(a,e){if(!e.isSeriesFiltered(a)){var t=a.pipelineContext.large;return!t&&{progress:function(r,n){for(var i;(i=r.next())!=null;){var l=n.getItemModel(i),o=n.getItemLayout(i).sign,c=l.getItemStyle();c.fill=x6(o,l),c.stroke=m6(o,l)||c.fill;var d=n.ensureUniqueItemVisual(i,"style");et(d,c)}}}}}},a4e=["color","borderColor"],r4e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,r,n){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,r,n,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,r):this._incrementalRenderNormal(t,r)},e.prototype.eachRendered=function(t){Eh(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t){var r=t.getData(),n=this._data,i=this.group,l=r.getLayout("isSimpleBox"),o=t.get("clip",!0),c=t.coordinateSystem,d=c.getArea&&c.getArea();this._data||i.removeAll(),r.diff(n).add(function(u){if(r.hasValue(u)){var h=r.getItemLayout(u);if(o&&rB(d,h))return;var f=tC(h,u,!0);en(f,{shape:{points:h.ends}},t,u),aC(f,r,u,l),i.add(f),r.setItemGraphicEl(u,f)}}).update(function(u,h){var f=n.getItemGraphicEl(h);if(!r.hasValue(u)){i.remove(f);return}var p=r.getItemLayout(u);if(o&&rB(d,p)){i.remove(f);return}f?(nr(f,{shape:{points:p.ends}},t,u),lo(f)):f=tC(p),aC(f,r,u,l),i.add(f),r.setItemGraphicEl(u,f)}).remove(function(u){var h=n.getItemGraphicEl(u);h&&i.remove(h)}).execute(),this._data=r},e.prototype._renderLarge=function(t){this._clear(),nB(t,this.group);var r=t.get("clip",!0)?Hb(t.coordinateSystem,!1,t):null;r?this.group.setClipPath(r):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,r){for(var n=r.getData(),i=n.getLayout("isSimpleBox"),l;(l=t.next())!=null;){var o=n.getItemLayout(l),c=tC(o);aC(c,n,l,i),c.incremental=!0,this.group.add(c),this._progressiveEls.push(c)}},e.prototype._incrementalRenderLarge=function(t,r){nB(r,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e})(Dr),n4e=(function(){function a(){}return a})(),i4e=(function(a){Ie(e,a);function e(t){var r=a.call(this,t)||this;return r.type="normalCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new n4e},e.prototype.buildPath=function(t,r){var n=r.points;this.__simpleBox?(t.moveTo(n[4][0],n[4][1]),t.lineTo(n[6][0],n[6][1])):(t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]),t.lineTo(n[3][0],n[3][1]),t.closePath(),t.moveTo(n[4][0],n[4][1]),t.lineTo(n[5][0],n[5][1]),t.moveTo(n[6][0],n[6][1]),t.lineTo(n[7][0],n[7][1]))},e})(Ra);function tC(a,e,t){var r=a.ends;return new i4e({shape:{points:t?s4e(r,a):r},z2:100})}function rB(a,e){for(var t=!0,r=0;r<e.ends.length;r++)if(a.contain(e.ends[r][0],e.ends[r][1])){t=!1;break}return t}function aC(a,e,t,r){var n=e.getItemModel(t);a.useStyle(e.getItemVisual(t,"style")),a.style.strokeNoScale=!0,a.__simpleBox=r,hi(a,n);var i=e.getItemLayout(t).sign;se(a.states,function(o,c){var d=n.getModel(c),u=x6(i,d),h=m6(i,d)||u,f=o.style||(o.style={});u&&(f.fill=u),h&&(f.stroke=h)});var l=n.getModel("emphasis");on(a,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function s4e(a,e){return ct(a,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}var l4e=(function(){function a(){}return a})(),rC=(function(a){Ie(e,a);function e(t){var r=a.call(this,t)||this;return r.type="largeCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new l4e},e.prototype.buildPath=function(t,r){for(var n=r.points,i=0;i<n.length;)if(this.__sign===n[i++]){var l=n[i++];t.moveTo(l,n[i++]),t.lineTo(l,n[i++])}else i+=3},e})(Ra);function nB(a,e,t,r){var n=a.getData(),i=n.getLayout("largePoints"),l=new rC({shape:{points:i},__sign:1,ignoreCoarsePointer:!0});e.add(l);var o=new rC({shape:{points:i},__sign:-1,ignoreCoarsePointer:!0});e.add(o);var c=new rC({shape:{points:i},__sign:0,ignoreCoarsePointer:!0});e.add(c),nC(1,l,a),nC(-1,o,a),nC(0,c,a),r&&(l.incremental=!0,o.incremental=!0),t&&t.push(l,o)}function nC(a,e,t,r){var n=m6(a,t)||x6(a,t),i=t.getModel("itemStyle").getItemStyle(a4e);e.useStyle(i),e.style.fill=null,e.style.stroke=n}var CZ=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,r,n){var i=r.getItemLayout(t);return i&&n.rect(i.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e})(Vr);ei(CZ,jZ,!0);function o4e(a){!a||!lt(a.series)||se(a.series,function(e){aa(e)&&e.type==="k"&&(e.type="candlestick")})}var c4e={seriesType:"candlestick",plan:Qx(),reset:function(a){var e=a.coordinateSystem,t=a.getData(),r=d4e(a,t),n=0,i=1,l=["x","y"],o=t.getDimensionIndex(t.mapDimension(l[n])),c=ct(t.mapDimensionsAll(l[i]),t.getDimensionIndex,t),d=c[0],u=c[1],h=c[2],f=c[3];if(t.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),o<0||c.length<4)return;return{progress:a.pipelineContext.large?g:p};function p(b,w){for(var j,k=w.getStore();(j=b.next())!=null;){var T=k.get(o,j),E=k.get(d,j),I=k.get(u,j),R=k.get(h,j),P=k.get(f,j),H=Math.min(E,I),G=Math.max(E,I),X=$(H,T),U=$(G,T),te=$(R,T),Z=$(P,T),J=[];Q(J,U,0),Q(J,X,1),J.push(re(Z),re(U),re(te),re(X));var B=w.getItemModel(j),W=!!B.get(["itemStyle","borderColorDoji"]);w.setItemLayout(j,{sign:iB(k,j,E,I,u,W),initBaseline:E>I?U[i]:X[i],ends:J,brushRect:ne(R,P,T)})}function $(K,ae){var ce=[];return ce[n]=ae,ce[i]=K,isNaN(ae)||isNaN(K)?[NaN,NaN]:e.dataToPoint(ce)}function Q(K,ae,ce){var de=ae.slice(),he=ae.slice();de[n]=Uw(de[n]+r/2,1,!1),he[n]=Uw(he[n]-r/2,1,!0),ce?K.push(de,he):K.push(he,de)}function ne(K,ae,ce){var de=$(K,ce),he=$(ae,ce);return de[n]-=r/2,he[n]-=r/2,{x:de[0],y:de[1],width:r,height:he[1]-de[1]}}function re(K){return K[n]=Uw(K[n],1),K}}function g(b,w){for(var j=vc(b.count*4),k=0,T,E=[],I=[],R,P=w.getStore(),H=!!a.get(["itemStyle","borderColorDoji"]);(R=b.next())!=null;){var G=P.get(o,R),X=P.get(d,R),U=P.get(u,R),te=P.get(h,R),Z=P.get(f,R);if(isNaN(G)||isNaN(te)||isNaN(Z)){j[k++]=NaN,k+=3;continue}j[k++]=iB(P,R,X,U,u,H),E[n]=G,E[i]=te,T=e.dataToPoint(E,null,I),j[k++]=T?T[0]:NaN,j[k++]=T?T[1]:NaN,E[i]=Z,T=e.dataToPoint(E,null,I),j[k++]=T?T[1]:NaN}w.setLayout("largePoints",j)}}};function iB(a,e,t,r,n,i){var l;return t>r?l=-1:t<r?l=1:l=i?0:e>0?a.get(n,e-1)<=r?1:-1:1,l}function d4e(a,e){var t=a.getBaseAxis(),r,n=t.type==="category"?t.getBandWidth():(r=t.getExtent(),Math.abs(r[1]-r[0])/e.count()),i=kt(Ht(a.get("barMaxWidth"),n),n),l=kt(Ht(a.get("barMinWidth"),1),n),o=a.get("barWidth");return o!=null?kt(o,n):Math.max(Math.min(n/2,i),l)}function u4e(a){a.registerChartView(r4e),a.registerSeriesModel(CZ),a.registerPreprocessor(o4e),a.registerVisual(t4e),a.registerLayout(c4e)}function sB(a,e){var t=e.rippleEffectColor||e.color;a.eachChild(function(r){r.attr({z:e.z,zlevel:e.zlevel,style:{stroke:e.brushType==="stroke"?t:null,fill:e.brushType==="fill"?t:null}})})}var h4e=(function(a){Ie(e,a);function e(t,r){var n=a.call(this)||this,i=new Fb(t,r),l=new $t;return n.add(i),n.add(l),n.updateData(t,r),n}return e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(t){for(var r=t.symbolType,n=t.color,i=t.rippleNumber,l=this.childAt(1),o=0;o<i;o++){var c=Jn(r,-1,-1,2,2,n);c.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var d=-o/i*t.period+t.effectOffset;c.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(d).start(),c.animateStyle(!0).when(t.period,{opacity:0}).delay(d).start(),l.add(c)}sB(l,t)},e.prototype.updateEffectAnimation=function(t){for(var r=this._effectCfg,n=this.childAt(1),i=["symbolType","period","rippleScale","rippleNumber"],l=0;l<i.length;l++){var o=i[l];if(r[o]!==t[o]){this.stopEffectAnimation(),this.startEffectAnimation(t);return}}sB(n,t)},e.prototype.highlight=function(){zd(this)},e.prototype.downplay=function(){Bd(this)},e.prototype.getSymbolType=function(){var t=this.childAt(0);return t&&t.getSymbolType()},e.prototype.updateData=function(t,r){var n=this,i=t.hostModel;this.childAt(0).updateData(t,r);var l=this.childAt(1),o=t.getItemModel(r),c=t.getItemVisual(r,"symbol"),d=em(t.getItemVisual(r,"symbolSize")),u=t.getItemVisual(r,"style"),h=u&&u.fill,f=o.getModel("emphasis");l.setScale(d),l.traverse(function(w){w.setStyle("fill",h)});var p=P0(t.getItemVisual(r,"symbolOffset"),d);p&&(l.x=p[0],l.y=p[1]);var g=t.getItemVisual(r,"symbolRotate");l.rotation=(g||0)*Math.PI/180||0;var b={};b.showEffectOn=i.get("showEffectOn"),b.rippleScale=o.get(["rippleEffect","scale"]),b.brushType=o.get(["rippleEffect","brushType"]),b.period=o.get(["rippleEffect","period"])*1e3,b.effectOffset=r/t.count(),b.z=i.getShallow("z")||0,b.zlevel=i.getShallow("zlevel")||0,b.symbolType=c,b.color=h,b.rippleEffectColor=o.get(["rippleEffect","color"]),b.rippleNumber=o.get(["rippleEffect","number"]),b.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(b):this.startEffectAnimation(b),this._effectCfg=b):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(w){w==="emphasis"?b.showEffectOn!=="render"&&n.startEffectAnimation(b):w==="normal"&&b.showEffectOn!=="render"&&n.stopEffectAnimation()}),this._effectCfg=b,on(this,f.get("focus"),f.get("blurScope"),f.get("disabled"))},e.prototype.fadeOut=function(t){t&&t()},e})($t),f4e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._symbolDraw=new Vb(h4e)},e.prototype.render=function(t,r,n){var i=t.getData(),l=this._symbolDraw;l.updateData(i,{clipShape:this._getClipShape(t)}),this.group.add(l.group)},e.prototype._getClipShape=function(t){var r=t.coordinateSystem,n=r&&r.getArea&&r.getArea();return t.get("clip",!0)?n:null},e.prototype.updateTransform=function(t,r,n){var i=t.getData();this.group.dirty();var l=Ub("").reset(t,r,n);l.progress&&l.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(t){var r=t.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=Pxe(r.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e})(Dr),p4e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,r){return $d(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(t,r,n){return n.point(r.getItemLayout(t))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e})(Vr);function x4e(a){a.registerChartView(f4e),a.registerSeriesModel(p4e),a.registerLayout(Ub("effectScatter"))}var AZ=(function(a){Ie(e,a);function e(t,r,n){var i=a.call(this)||this;return i.add(i.createLine(t,r,n)),i._updateEffectSymbol(t,r),i}return e.prototype.createLine=function(t,r,n){return new i6(t,r,n)},e.prototype._updateEffectSymbol=function(t,r){var n=t.getItemModel(r),i=n.getModel("effect"),l=i.get("symbolSize"),o=i.get("symbol");lt(l)||(l=[l,l]);var c=t.getItemVisual(r,"style"),d=i.get("color")||c&&c.stroke,u=this.childAt(1);this._symbolType!==o&&(this.remove(u),u=Jn(o,-.5,-.5,1,1,d),u.z2=100,u.culling=!0,this.add(u)),u&&(u.setStyle("shadowColor",d),u.setStyle(i.getItemStyle(["color"])),u.scaleX=l[0],u.scaleY=l[1],u.setColor(d),this._symbolType=o,this._symbolScale=l,this._updateEffectAnimation(t,i,r))},e.prototype._updateEffectAnimation=function(t,r,n){var i=this.childAt(1);if(i){var l=t.getItemLayout(n),o=r.get("period")*1e3,c=r.get("loop"),d=r.get("roundTrip"),u=r.get("constantSpeed"),h=$i(r.get("delay"),function(p){return p/t.count()*o/3});if(i.ignore=!0,this._updateAnimationPoints(i,l),u>0&&(o=this._getLineLength(i)/u*1e3),o!==this._period||c!==this._loop||d!==this._roundTrip){i.stopAnimation();var f=void 0;Yt(h)?f=h(n):f=h,i.__t>0&&(f=-o*i.__t),this._animateSymbol(i,o,f,c,d)}this._period=o,this._loop=c,this._roundTrip=d}},e.prototype._animateSymbol=function(t,r,n,i,l){if(r>0){t.__t=0;var o=this,c=t.animate("",i).when(l?r*2:r,{__t:l?2:1}).delay(n).during(function(){o._updateSymbolPosition(t)});i||c.done(function(){o.remove(t)}),c.start()}},e.prototype._getLineLength=function(t){return Qu(t.__p1,t.__cp1)+Qu(t.__cp1,t.__p2)},e.prototype._updateAnimationPoints=function(t,r){t.__p1=r[0],t.__p2=r[1],t.__cp1=r[2]||[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]},e.prototype.updateData=function(t,r,n){this.childAt(0).updateData(t,r,n),this._updateEffectSymbol(t,r)},e.prototype._updateSymbolPosition=function(t){var r=t.__p1,n=t.__p2,i=t.__cp1,l=t.__t<1?t.__t:2-t.__t,o=[t.x,t.y],c=o.slice(),d=Ei,u=M4;o[0]=d(r[0],i[0],n[0],l),o[1]=d(r[1],i[1],n[1],l);var h=t.__t<1?u(r[0],i[0],n[0],l):u(n[0],i[0],r[0],1-l),f=t.__t<1?u(r[1],i[1],n[1],l):u(n[1],i[1],r[1],1-l);t.rotation=-Math.atan2(f,h)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(t.__lastT!==void 0&&t.__lastT<t.__t?(t.scaleY=Qu(c,o)*1.05,l===1&&(o[0]=c[0]+(o[0]-c[0])/2,o[1]=c[1]+(o[1]-c[1])/2)):t.__lastT===1?t.scaleY=2*Qu(r,o):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=o[0],t.y=o[1]},e.prototype.updateLayout=function(t,r){this.childAt(0).updateLayout(t,r);var n=t.getItemModel(r).getModel("effect");this._updateEffectAnimation(t,n,r)},e})($t),TZ=(function(a){Ie(e,a);function e(t,r,n){var i=a.call(this)||this;return i._createPolyline(t,r,n),i}return e.prototype._createPolyline=function(t,r,n){var i=t.getItemLayout(r),l=new Xi({shape:{points:i}});this.add(l),this._updateCommonStl(t,r,n)},e.prototype.updateData=function(t,r,n){var i=t.hostModel,l=this.childAt(0),o={shape:{points:t.getItemLayout(r)}};nr(l,o,i,r),this._updateCommonStl(t,r,n)},e.prototype._updateCommonStl=function(t,r,n){var i=this.childAt(0),l=t.getItemModel(r),o=n&&n.emphasisLineStyle,c=n&&n.focus,d=n&&n.blurScope,u=n&&n.emphasisDisabled;if(!n||t.hasItemOption){var h=l.getModel("emphasis");o=h.getModel("lineStyle").getLineStyle(),u=h.get("disabled"),c=h.get("focus"),d=h.get("blurScope")}i.useStyle(t.getItemVisual(r,"style")),i.style.fill=null,i.style.strokeNoScale=!0;var f=i.ensureState("emphasis");f.style=o,on(this,c,d,u)},e.prototype.updateLayout=function(t,r){var n=this.childAt(0);n.setShape("points",t.getItemLayout(r))},e})($t),m4e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t._lastFrame=0,t._lastFramePercent=0,t}return e.prototype.createLine=function(t,r,n){return new TZ(t,r,n)},e.prototype._updateAnimationPoints=function(t,r){this._points=r;for(var n=[0],i=0,l=1;l<r.length;l++){var o=r[l-1],c=r[l];i+=Qu(o,c),n.push(i)}if(i===0){this._length=0;return}for(var l=0;l<n.length;l++)n[l]/=i;this._offsets=n,this._length=i},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(t){var r=t.__t<1?t.__t:2-t.__t,n=this._points,i=this._offsets,l=n.length;if(i){var o=this._lastFrame,c;if(r<this._lastFramePercent){var d=Math.min(o+1,l-1);for(c=d;c>=0&&!(i[c]<=r);c--);c=Math.min(c,l-2)}else{for(c=o;c<l&&!(i[c]>r);c++);c=Math.min(c-1,l-2)}var u=(r-i[c])/(i[c+1]-i[c]),h=n[c],f=n[c+1];t.x=h[0]*(1-u)+u*f[0],t.y=h[1]*(1-u)+u*f[1];var p=t.__t<1?f[0]-h[0]:h[0]-f[0],g=t.__t<1?f[1]-h[1]:h[1]-f[1];t.rotation=-Math.atan2(g,p)-Math.PI/2,this._lastFrame=c,this._lastFramePercent=r,t.ignore=!1}},e})(AZ),g4e=(function(){function a(){this.polyline=!1,this.curveness=0,this.segs=[]}return a})(),v4e=(function(a){Ie(e,a);function e(t){var r=a.call(this,t)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.getDefaultStyle=function(){return{stroke:Be.color.neutral99,fill:null}},e.prototype.getDefaultShape=function(){return new g4e},e.prototype.buildPath=function(t,r){var n=r.segs,i=r.curveness,l;if(r.polyline)for(l=this._off;l<n.length;){var o=n[l++];if(o>0){t.moveTo(n[l++],n[l++]);for(var c=1;c<o;c++)t.lineTo(n[l++],n[l++])}}else for(l=this._off;l<n.length;){var d=n[l++],u=n[l++],h=n[l++],f=n[l++];if(t.moveTo(d,u),i>0){var p=(d+h)/2-(u-f)*i,g=(u+f)/2-(h-d)*i;t.quadraticCurveTo(p,g,h,f)}else t.lineTo(h,f)}this.incremental&&(this._off=l,this.notClear=!0)},e.prototype.findDataIndex=function(t,r){var n=this.shape,i=n.segs,l=n.curveness,o=this.style.lineWidth;if(n.polyline)for(var c=0,d=0;d<i.length;){var u=i[d++];if(u>0)for(var h=i[d++],f=i[d++],p=1;p<u;p++){var g=i[d++],b=i[d++];if(Vu(h,f,g,b,o,t,r))return c}c++}else for(var c=0,d=0;d<i.length;){var h=i[d++],f=i[d++],g=i[d++],b=i[d++];if(l>0){var w=(h+g)/2-(f-b)*l,j=(f+b)/2-(g-h)*l;if(CW(h,f,w,j,g,b,o,t,r))return c}else if(Vu(h,f,g,b,o,t,r))return c;c++}return-1},e.prototype.contain=function(t,r){var n=this.transformCoordToLocal(t,r),i=this.getBoundingRect();if(t=n[0],r=n[1],i.contain(t,r)){var l=this.hoverDataIdx=this.findDataIndex(t,r);return l>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape,n=r.segs,i=1/0,l=1/0,o=-1/0,c=-1/0,d=0;d<n.length;){var u=n[d++],h=n[d++];i=Math.min(u,i),o=Math.max(u,o),l=Math.min(h,l),c=Math.max(h,c)}t=this._rect=new ra(i,l,o,c)}return t},e})(Ra),b4e=(function(){function a(){this.group=new $t}return a.prototype.updateData=function(e){this._clear();var t=this._create();t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e)},a.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clear()},a.prototype.incrementalUpdate=function(e,t){var r=this._newAdded[0],n=t.getLayout("linesPoints"),i=r&&r.shape.segs;if(i&&i.length<2e4){var l=i.length,o=new Float32Array(l+n.length);o.set(i),o.set(n,l),r.setShape({segs:o})}else{this._newAdded=[];var c=this._create();c.incremental=!0,c.setShape({segs:n}),this._setCommon(c,t),c.__startIndex=e.start}},a.prototype.remove=function(){this._clear()},a.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},a.prototype._create=function(){var e=new v4e({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(e),this.group.add(e),e},a.prototype._setCommon=function(e,t,r){var n=t.hostModel;e.setShape({polyline:n.get("polyline"),curveness:n.get(["lineStyle","curveness"])}),e.useStyle(n.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var i=t.getVisual("style");i&&i.stroke&&e.setStyle("stroke",i.stroke),e.setStyle("fill",null);var l=la(e);l.seriesIndex=n.seriesIndex,e.on("mousemove",function(o){l.dataIndex=null;var c=e.hoverDataIdx;c>0&&(l.dataIndex=c+e.__startIndex)})},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a})(),MZ={seriesType:"lines",plan:Qx(),reset:function(a){var e=a.coordinateSystem;if(e){var t=a.get("polyline"),r=a.pipelineContext.large;return{progress:function(n,i){var l=[];if(r){var o=void 0,c=n.end-n.start;if(t){for(var d=0,u=n.start;u<n.end;u++)d+=a.getLineCoordsCount(u);o=new Float32Array(c+d*2)}else o=new Float32Array(c*4);for(var h=0,f=[],u=n.start;u<n.end;u++){var p=a.getLineCoords(u,l);t&&(o[h++]=p);for(var g=0;g<p;g++)f=e.dataToPoint(l[g],!1,f),o[h++]=f[0],o[h++]=f[1]}i.setLayout("linesPoints",o)}else for(var u=n.start;u<n.end;u++){var b=i.getItemModel(u),p=a.getLineCoords(u,l),w=[];if(t)for(var j=0;j<p;j++)w.push(e.dataToPoint(l[j]));else{w[0]=e.dataToPoint(l[0]),w[1]=e.dataToPoint(l[1]);var k=b.get(["lineStyle","curveness"]);+k&&(w[2]=[(w[0][0]+w[1][0])/2-(w[0][1]-w[1][1])*k,(w[0][1]+w[1][1])/2-(w[1][0]-w[0][0])*k])}i.setItemLayout(u,w)}}}}}},y4e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var i=t.getData(),l=this._updateLineDraw(i,t),o=t.get("zlevel"),c=t.get(["effect","trailLength"]),d=n.getZr(),u=d.painter.getType()==="svg";u||d.painter.getLayer(o).clear(!0),this._lastZlevel!=null&&!u&&d.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&c>0&&(u||d.configLayer(o,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(c/10+.9,1),0)})),l.updateData(i);var h=t.get("clip",!0)&&Hb(t.coordinateSystem,!1,t);h?this.group.setClipPath(h):this.group.removeClipPath(),this._lastZlevel=o,this._finished=!0},e.prototype.incrementalPrepareRender=function(t,r,n){var i=t.getData(),l=this._updateLineDraw(i,t);l.incrementalPrepareUpdate(i),this._clearLayer(n),this._finished=!1},e.prototype.incrementalRender=function(t,r,n){this._lineDraw.incrementalUpdate(t,r.getData()),this._finished=t.end===r.getData().count()},e.prototype.eachRendered=function(t){this._lineDraw&&this._lineDraw.eachRendered(t)},e.prototype.updateTransform=function(t,r,n){var i=t.getData(),l=t.pipelineContext;if(!this._finished||l.large||l.progressiveRender)return{update:!0};var o=MZ.reset(t,r,n);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(n)},e.prototype._updateLineDraw=function(t,r){var n=this._lineDraw,i=this._showEffect(r),l=!!r.get("polyline"),o=r.pipelineContext,c=o.large;return(!n||i!==this._hasEffet||l!==this._isPolyline||c!==this._isLargeDraw)&&(n&&n.remove(),n=this._lineDraw=c?new b4e:new s6(l?i?m4e:TZ:i?AZ:i6),this._hasEffet=i,this._isPolyline=l,this._isLargeDraw=c),this.group.add(n.group),n},e.prototype._showEffect=function(t){return!!t.get(["effect","show"])},e.prototype._clearLayer=function(t){var r=t.getZr(),n=r.painter.getType()==="svg";!n&&this._lastZlevel!=null&&r.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(t,r){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(r)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.type="lines",e})(Dr),w4e=typeof Uint32Array>"u"?Array:Uint32Array,_4e=typeof Float64Array>"u"?Array:Float64Array;function lB(a){var e=a.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(a.data=ct(e,function(t){var r=[t[0].coord,t[1].coord],n={coords:r};return t[0].name&&(n.fromName=t[0].name),t[1].name&&(n.toName=t[1].name),ET([n,t[0],t[1]])}))}var N4e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.init=function(t){t.data=t.data||[],lB(t);var r=this._processFlatCoordsArray(t.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(t.data=new Float32Array(r.count)),a.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(t){if(lB(t),t.data){var r=this._processFlatCoordsArray(t.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(t.data=new Float32Array(r.count))}a.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(t){var r=this._processFlatCoordsArray(t.data);r.flatCoords&&(this._flatCoords?(this._flatCoords=zv(this._flatCoords,r.flatCoords),this._flatCoordsOffset=zv(this._flatCoordsOffset,r.flatCoordsOffset)):(this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset),t.data=new Float32Array(r.count)),this.getRawData().appendData(t.data)},e.prototype._getCoordsFromItemModel=function(t){var r=this.getData().getItemModel(t),n=r.option instanceof Array?r.option:r.getShallow("coords");return n},e.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[t*2+1]:this._getCoordsFromItemModel(t).length},e.prototype.getLineCoords=function(t,r){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[t*2],i=this._flatCoordsOffset[t*2+1],l=0;l<i;l++)r[l]=r[l]||[],r[l][0]=this._flatCoords[n+l*2],r[l][1]=this._flatCoords[n+l*2+1];return i}else{for(var o=this._getCoordsFromItemModel(t),l=0;l<o.length;l++)r[l]=r[l]||[],r[l][0]=o[l][0],r[l][1]=o[l][1];return o.length}},e.prototype._processFlatCoordsArray=function(t){var r=0;if(this._flatCoords&&(r=this._flatCoords.length),Ka(t[0])){for(var n=t.length,i=new w4e(n),l=new _4e(n),o=0,c=0,d=0,u=0;u<n;){d++;var h=t[u++];i[c++]=o+r,i[c++]=h;for(var f=0;f<h;f++){var p=t[u++],g=t[u++];l[o++]=p,l[o++]=g}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,c),flatCoords:l,count:d}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},e.prototype.getInitialData=function(t,r){var n=new As(["value"],this);return n.hasItemOption=!1,n.initData(t.data,[],function(i,l,o,c){if(i instanceof Array)return NaN;n.hasItemOption=!0;var d=i.value;if(d!=null)return d instanceof Array?d[c]:d}),n},e.prototype.formatTooltip=function(t,r,n){var i=this.getData(),l=i.getItemModel(t),o=l.get("name");if(o)return o;var c=l.get("fromName"),d=l.get("toName"),u=[];return c!=null&&u.push(c),d!=null&&u.push(d),Qn("nameValue",{name:u.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?1e4:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?2e4:this.get("progressiveThreshold"))},e.prototype.getZLevelKey=function(){var t=this.getModel("effect"),r=t.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:t.get("show")&&r>0?r+"":""},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e})(Vr);function ow(a){return a instanceof Array||(a=[a,a]),a}var j4e={seriesType:"lines",reset:function(a){var e=ow(a.get("symbol")),t=ow(a.get("symbolSize")),r=a.getData();r.setVisual("fromSymbol",e&&e[0]),r.setVisual("toSymbol",e&&e[1]),r.setVisual("fromSymbolSize",t&&t[0]),r.setVisual("toSymbolSize",t&&t[1]);function n(i,l){var o=i.getItemModel(l),c=ow(o.getShallow("symbol",!0)),d=ow(o.getShallow("symbolSize",!0));c[0]&&i.setItemVisual(l,"fromSymbol",c[0]),c[1]&&i.setItemVisual(l,"toSymbol",c[1]),d[0]&&i.setItemVisual(l,"fromSymbolSize",d[0]),d[1]&&i.setItemVisual(l,"toSymbolSize",d[1])}return{dataEach:r.hasItemOption?n:null}}};function S4e(a){a.registerChartView(y4e),a.registerSeriesModel(N4e),a.registerLayout(MZ),a.registerVisual(j4e)}var k4e=256,C4e=(function(){function a(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=Do.createCanvas();this.canvas=e}return a.prototype.update=function(e,t,r,n,i,l){var o=this._getBrush(),c=this._getGradient(i,"inRange"),d=this._getGradient(i,"outOfRange"),u=this.pointSize+this.blurSize,h=this.canvas,f=h.getContext("2d"),p=e.length;h.width=t,h.height=r;for(var g=0;g<p;++g){var b=e[g],w=b[0],j=b[1],k=b[2],T=n(k);f.globalAlpha=T,f.drawImage(o,w-u,j-u)}if(!h.width||!h.height)return h;for(var E=f.getImageData(0,0,h.width,h.height),I=E.data,R=0,P=I.length,H=this.minOpacity,G=this.maxOpacity,X=G-H;R<P;){var T=I[R+3]/256,U=Math.floor(T*(k4e-1))*4;if(T>0){var te=l(T)?c:d;T>0&&(T=T*X+H),I[R++]=te[U],I[R++]=te[U+1],I[R++]=te[U+2],I[R++]=te[U+3]*T*256}else R+=4}return f.putImageData(E,0,0),h},a.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=Do.createCanvas()),t=this.pointSize+this.blurSize,r=t*2;e.width=r,e.height=r;var n=e.getContext("2d");return n.clearRect(0,0,r,r),n.shadowOffsetX=r,n.shadowBlur=this.blurSize,n.shadowColor=Be.color.neutral99,n.beginPath(),n.arc(-t,t,this.pointSize,0,Math.PI*2,!0),n.closePath(),n.fill(),e},a.prototype._getGradient=function(e,t){for(var r=this._gradientPixels,n=r[t]||(r[t]=new Uint8ClampedArray(256*4)),i=[0,0,0,0],l=0,o=0;o<256;o++)e[t](o/255,!0,i),n[l++]=i[0],n[l++]=i[1],n[l++]=i[2],n[l++]=i[3];return n},a})();function A4e(a,e,t){var r=a[1]-a[0];e=ct(e,function(l){return{interval:[(l.interval[0]-a[0])/r,(l.interval[1]-a[0])/r]}});var n=e.length,i=0;return function(l){var o;for(o=i;o<n;o++){var c=e[o].interval;if(c[0]<=l&&l<=c[1]){i=o;break}}if(o===n)for(o=i-1;o>=0;o--){var c=e[o].interval;if(c[0]<=l&&l<=c[1]){i=o;break}}return o>=0&&o<n&&t[o]}}function T4e(a,e){var t=a[1]-a[0];return e=[(e[0]-a[0])/t,(e[1]-a[0])/t],function(r){return r>=e[0]&&r<=e[1]}}function oB(a){var e=a.dimensions;return e[0]==="lng"&&e[1]==="lat"}var M4e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var i;r.eachComponent("visualMap",function(o){o.eachTargetSeries(function(c){c===t&&(i=o)})}),this._progressiveEls=null,this.group.removeAll();var l=t.coordinateSystem;l.type==="cartesian2d"||l.type==="calendar"||l.type==="matrix"?this._renderOnGridLike(t,n,0,t.getData().count()):oB(l)&&this._renderOnGeo(l,t,i,n)},e.prototype.incrementalPrepareRender=function(t,r,n){this.group.removeAll()},e.prototype.incrementalRender=function(t,r,n,i){var l=r.coordinateSystem;l&&(oB(l)?this.render(r,n,i):(this._progressiveEls=[],this._renderOnGridLike(r,i,t.start,t.end,!0)))},e.prototype.eachRendered=function(t){Eh(this._progressiveEls||this.group,t)},e.prototype._renderOnGridLike=function(t,r,n,i,l){var o=t.coordinateSystem,c=Nh(o,"cartesian2d"),d=Nh(o,"matrix"),u,h,f,p;if(c){var g=o.getAxis("x"),b=o.getAxis("y");u=g.getBandWidth()+.5,h=b.getBandWidth()+.5,f=g.scale.getExtent(),p=b.scale.getExtent()}for(var w=this.group,j=t.getData(),k=t.getModel(["emphasis","itemStyle"]).getItemStyle(),T=t.getModel(["blur","itemStyle"]).getItemStyle(),E=t.getModel(["select","itemStyle"]).getItemStyle(),I=t.get(["itemStyle","borderRadius"]),R=fi(t),P=t.getModel("emphasis"),H=P.get("focus"),G=P.get("blurScope"),X=P.get("disabled"),U=c||d?[j.mapDimension("x"),j.mapDimension("y"),j.mapDimension("value")]:[j.mapDimension("time"),j.mapDimension("value")],te=n;te<i;te++){var Z=void 0,J=j.getItemVisual(te,"style");if(c){var B=j.get(U[0],te),W=j.get(U[1],te);if(isNaN(j.get(U[2],te))||isNaN(B)||isNaN(W)||B<f[0]||B>f[1]||W<p[0]||W>p[1])continue;var $=o.dataToPoint([B,W]);Z=new Ea({shape:{x:$[0]-u/2,y:$[1]-h/2,width:u,height:h},style:J})}else if(d){var Q=o.dataToLayout([j.get(U[0],te),j.get(U[1],te)]).rect;if(os(Q.x))continue;Z=new Ea({z2:1,shape:Q,style:J})}else{if(isNaN(j.get(U[1],te)))continue;var ne=o.dataToLayout([j.get(U[0],te)]),Q=ne.contentRect||ne.rect;if(os(Q.x)||os(Q.y))continue;Z=new Ea({z2:1,shape:Q,style:J})}if(j.hasItemOption){var re=j.getItemModel(te),K=re.getModel("emphasis");k=K.getModel("itemStyle").getItemStyle(),T=re.getModel(["blur","itemStyle"]).getItemStyle(),E=re.getModel(["select","itemStyle"]).getItemStyle(),I=re.get(["itemStyle","borderRadius"]),H=K.get("focus"),G=K.get("blurScope"),X=K.get("disabled"),R=fi(re)}Z.shape.r=I;var ae=t.getRawValue(te),ce="-";ae&&ae[2]!=null&&(ce=ae[2]+""),ji(Z,R,{labelFetcher:t,labelDataIndex:te,defaultOpacity:J.opacity,defaultText:ce}),Z.ensureState("emphasis").style=k,Z.ensureState("blur").style=T,Z.ensureState("select").style=E,on(Z,H,G,X),Z.incremental=l,l&&(Z.states.emphasis.hoverLayer=!0),w.add(Z),j.setItemGraphicEl(te,Z),this._progressiveEls&&this._progressiveEls.push(Z)}},e.prototype._renderOnGeo=function(t,r,n,i){var l=n.targetVisuals.inRange,o=n.targetVisuals.outOfRange,c=r.getData(),d=this._hmLayer||this._hmLayer||new C4e;d.blurSize=r.get("blurSize"),d.pointSize=r.get("pointSize"),d.minOpacity=r.get("minOpacity"),d.maxOpacity=r.get("maxOpacity");var u=t.getViewRect().clone(),h=t.getRoamTransform();u.applyTransform(h);var f=Math.max(u.x,0),p=Math.max(u.y,0),g=Math.min(u.width+u.x,i.getWidth()),b=Math.min(u.height+u.y,i.getHeight()),w=g-f,j=b-p,k=[c.mapDimension("lng"),c.mapDimension("lat"),c.mapDimension("value")],T=c.mapArray(k,function(P,H,G){var X=t.dataToPoint([P,H]);return X[0]-=f,X[1]-=p,X.push(G),X}),E=n.getExtent(),I=n.type==="visualMap.continuous"?T4e(E,n.option.range):A4e(E,n.getPieceList(),n.option.selected);d.update(T,w,j,l.color.getNormalizer(),{inRange:l.color.getColorMapper(),outOfRange:o.color.getColorMapper()},I);var R=new Pi({style:{width:w,height:j,x:f,y:p,image:d.canvas},silent:!0});this.group.add(R)},e.type="heatmap",e})(Dr),E4e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return $d(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=Lb.get(this.get("coordinateSystem"));if(t&&t.dimensions)return t.dimensions[0]==="lng"&&t.dimensions[1]==="lat"},e.type="series.heatmap",e.dependencies=["grid","geo","calendar","matrix"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:Be.color.primary}}},e})(Vr);function D4e(a){a.registerChartView(M4e),a.registerSeriesModel(E4e)}var I4e=["itemStyle","borderWidth"],cB=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],iC=new Wd,R4e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var i=this.group,l=t.getData(),o=this._data,c=t.coordinateSystem,d=c.getBaseAxis(),u=d.isHorizontal(),h=c.master.getRect(),f={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:t,coordSys:c,coordSysExtent:[[h.x,h.x+h.width],[h.y,h.y+h.height]],isHorizontal:u,valueDim:cB[+u],categoryDim:cB[1-+u]};l.diff(o).add(function(g){if(l.hasValue(g)){var b=uB(l,g),w=dB(l,g,b,f),j=hB(l,f,w);l.setItemGraphicEl(g,j),i.add(j),pB(j,f,w)}}).update(function(g,b){var w=o.getItemGraphicEl(b);if(!l.hasValue(g)){i.remove(w);return}var j=uB(l,g),k=dB(l,g,j,f),T=OZ(l,k);w&&T!==w.__pictorialShapeStr&&(i.remove(w),l.setItemGraphicEl(g,null),w=null),w?V4e(w,f,k):w=hB(l,f,k,!0),l.setItemGraphicEl(g,w),w.__pictorialSymbolMeta=k,i.add(w),pB(w,f,k)}).remove(function(g){var b=o.getItemGraphicEl(g);b&&fB(o,g,b.__pictorialSymbolMeta.animationModel,b)}).execute();var p=t.get("clip",!0)?Hb(t.coordinateSystem,!1,t):null;return p?i.setClipPath(p):i.removeClipPath(),this._data=l,this.group},e.prototype.remove=function(t,r){var n=this.group,i=this._data;t.get("animation")?i&&i.eachItemGraphicEl(function(l){fB(i,la(l).dataIndex,t,l)}):n.removeAll()},e.type="pictorialBar",e})(Dr);function dB(a,e,t,r){var n=a.getItemLayout(e),i=t.get("symbolRepeat"),l=t.get("symbolClip"),o=t.get("symbolPosition")||"start",c=t.get("symbolRotate"),d=(c||0)*Math.PI/180||0,u=t.get("symbolPatternSize")||2,h=t.isAnimationEnabled(),f={dataIndex:e,layout:n,itemModel:t,symbolType:a.getItemVisual(e,"symbol")||"circle",style:a.getItemVisual(e,"style"),symbolClip:l,symbolRepeat:i,symbolRepeatDirection:t.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:d,animationModel:h?t:null,hoverScale:h&&t.get(["emphasis","scale"]),z2:t.getShallow("z",!0)||0};L4e(t,i,n,r,f),O4e(a,e,n,i,l,f.boundingLength,f.pxSign,u,r,f),P4e(t,f.symbolScale,d,r,f);var p=f.symbolSize,g=P0(t.get("symbolOffset"),p);return z4e(t,p,n,i,l,g,o,f.valueLineWidth,f.boundingLength,f.repeatCutLength,r,f),f}function L4e(a,e,t,r,n){var i=r.valueDim,l=a.get("symbolBoundingData"),o=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),c=o.toGlobalCoord(o.dataToCoord(0)),d=1-+(t[i.wh]<=0),u;if(lt(l)){var h=[sC(o,l[0])-c,sC(o,l[1])-c];h[1]<h[0]&&h.reverse(),u=h[d]}else l!=null?u=sC(o,l)-c:e?u=r.coordSysExtent[i.index][d]-c:u=t[i.wh];n.boundingLength=u,e&&(n.repeatCutLength=t[i.wh]);var f=i.xy==="x",p=o.inverse;n.pxSign=f&&!p||!f&&p?u>=0?1:-1:u>0?1:-1}function sC(a,e){return a.toGlobalCoord(a.dataToCoord(a.scale.parse(e)))}function O4e(a,e,t,r,n,i,l,o,c,d){var u=c.valueDim,h=c.categoryDim,f=Math.abs(t[h.wh]),p=a.getItemVisual(e,"symbolSize"),g;lt(p)?g=p.slice():p==null?g=["100%","100%"]:g=[p,p],g[h.index]=kt(g[h.index],f),g[u.index]=kt(g[u.index],r?f:Math.abs(i)),d.symbolSize=g;var b=d.symbolScale=[g[0]/o,g[1]/o];b[u.index]*=(c.isHorizontal?-1:1)*l}function P4e(a,e,t,r,n){var i=a.get(I4e)||0;i&&(iC.attr({scaleX:e[0],scaleY:e[1],rotation:t}),iC.updateTransform(),i/=iC.getLineScale(),i*=e[r.valueDim.index]),n.valueLineWidth=i||0}function z4e(a,e,t,r,n,i,l,o,c,d,u,h){var f=u.categoryDim,p=u.valueDim,g=h.pxSign,b=Math.max(e[p.index]+o,0),w=b;if(r){var j=Math.abs(c),k=$i(a.get("symbolMargin"),"15%")+"",T=!1;k.lastIndexOf("!")===k.length-1&&(T=!0,k=k.slice(0,k.length-1));var E=kt(k,e[p.index]),I=Math.max(b+E*2,0),R=T?0:E*2,P=uW(r),H=P?r:xB((j+R)/I),G=j-H*b;E=G/2/(T?H:Math.max(H-1,1)),I=b+E*2,R=T?0:E*2,!P&&r!=="fixed"&&(H=d?xB((Math.abs(d)+R)/I):0),w=H*I-R,h.repeatTimes=H,h.symbolMargin=E}var X=g*(w/2),U=h.pathPosition=[];U[f.index]=t[f.wh]/2,U[p.index]=l==="start"?X:l==="end"?c-X:c/2,i&&(U[0]+=i[0],U[1]+=i[1]);var te=h.bundlePosition=[];te[f.index]=t[f.xy],te[p.index]=t[p.xy];var Z=h.barRectShape=et({},t);Z[p.wh]=g*Math.max(Math.abs(t[p.wh]),Math.abs(U[p.index]+X)),Z[f.wh]=t[f.wh];var J=h.clipShape={};J[f.xy]=-t[f.xy],J[f.wh]=u.ecSize[f.wh],J[p.xy]=0,J[p.wh]=t[p.wh]}function EZ(a){var e=a.symbolPatternSize,t=Jn(a.symbolType,-e/2,-e/2,e,e);return t.attr({culling:!0}),t.type!=="image"&&t.setStyle({strokeNoScale:!0}),t}function DZ(a,e,t,r){var n=a.__pictorialBundle,i=t.symbolSize,l=t.valueLineWidth,o=t.pathPosition,c=e.valueDim,d=t.repeatTimes||0,u=0,h=i[e.valueDim.index]+l+t.symbolMargin*2;for(g6(a,function(b){b.__pictorialAnimationIndex=u,b.__pictorialRepeatTimes=d,u<d?px(b,null,g(u),t,r):px(b,null,{scaleX:0,scaleY:0},t,r,function(){n.remove(b)}),u++});u<d;u++){var f=EZ(t);f.__pictorialAnimationIndex=u,f.__pictorialRepeatTimes=d,n.add(f);var p=g(u);px(f,{x:p.x,y:p.y,scaleX:0,scaleY:0},{scaleX:p.scaleX,scaleY:p.scaleY,rotation:p.rotation},t,r)}function g(b){var w=o.slice(),j=t.pxSign,k=b;return(t.symbolRepeatDirection==="start"?j>0:j<0)&&(k=d-1-b),w[c.index]=h*(k-d/2+.5)+o[c.index],{x:w[0],y:w[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation}}}function IZ(a,e,t,r){var n=a.__pictorialBundle,i=a.__pictorialMainPath;i?px(i,null,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation},t,r):(i=a.__pictorialMainPath=EZ(t),n.add(i),px(i,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:0,scaleY:0,rotation:t.rotation},{scaleX:t.symbolScale[0],scaleY:t.symbolScale[1]},t,r))}function RZ(a,e,t){var r=et({},e.barRectShape),n=a.__pictorialBarRect;n?px(n,null,{shape:r},e,t):(n=a.__pictorialBarRect=new Ea({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),n.disableMorphing=!0,a.add(n))}function LZ(a,e,t,r){if(t.symbolClip){var n=a.__pictorialClipPath,i=et({},t.clipShape),l=e.valueDim,o=t.animationModel,c=t.dataIndex;if(n)nr(n,{shape:i},o,c);else{i[l.wh]=0,n=new Ea({shape:i}),a.__pictorialBundle.setClipPath(n),a.__pictorialClipPath=n;var d={};d[l.wh]=t.clipShape[l.wh],R0[r?"updateProps":"initProps"](n,{shape:d},o,c)}}}function uB(a,e){var t=a.getItemModel(e);return t.getAnimationDelayParams=B4e,t.isAnimationEnabled=F4e,t}function B4e(a){return{index:a.__pictorialAnimationIndex,count:a.__pictorialRepeatTimes}}function F4e(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function hB(a,e,t,r){var n=new $t,i=new $t;return n.add(i),n.__pictorialBundle=i,i.x=t.bundlePosition[0],i.y=t.bundlePosition[1],t.symbolRepeat?DZ(n,e,t):IZ(n,e,t),RZ(n,t,r),LZ(n,e,t,r),n.__pictorialShapeStr=OZ(a,t),n.__pictorialSymbolMeta=t,n}function V4e(a,e,t){var r=t.animationModel,n=t.dataIndex,i=a.__pictorialBundle;nr(i,{x:t.bundlePosition[0],y:t.bundlePosition[1]},r,n),t.symbolRepeat?DZ(a,e,t,!0):IZ(a,e,t,!0),RZ(a,t,!0),LZ(a,e,t,!0)}function fB(a,e,t,r){var n=r.__pictorialBarRect;n&&n.removeTextContent();var i=[];g6(r,function(l){i.push(l)}),r.__pictorialMainPath&&i.push(r.__pictorialMainPath),r.__pictorialClipPath&&(t=null),se(i,function(l){wh(l,{scaleX:0,scaleY:0},t,e,function(){r.parent&&r.parent.remove(r)})}),a.setItemGraphicEl(e,null)}function OZ(a,e){return[a.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function g6(a,e,t){se(a.__pictorialBundle.children(),function(r){r!==a.__pictorialBarRect&&e.call(t,r)})}function px(a,e,t,r,n,i){e&&a.attr(e),r.symbolClip&&!n?t&&a.attr(t):t&&R0[n?"updateProps":"initProps"](a,t,r.animationModel,r.dataIndex,i)}function pB(a,e,t){var r=t.dataIndex,n=t.itemModel,i=n.getModel("emphasis"),l=i.getModel("itemStyle").getItemStyle(),o=n.getModel(["blur","itemStyle"]).getItemStyle(),c=n.getModel(["select","itemStyle"]).getItemStyle(),d=n.getShallow("cursor"),u=i.get("focus"),h=i.get("blurScope"),f=i.get("scale");g6(a,function(b){if(b instanceof Pi){var w=b.style;b.useStyle(et({image:w.image,x:w.x,y:w.y,width:w.width,height:w.height},t.style))}else b.useStyle(t.style);var j=b.ensureState("emphasis");j.style=l,f&&(j.scaleX=b.scaleX*1.1,j.scaleY=b.scaleY*1.1),b.ensureState("blur").style=o,b.ensureState("select").style=c,d&&(b.cursor=d),b.z2=t.z2});var p=e.valueDim.posDesc[+(t.boundingLength>0)],g=a.__pictorialBarRect;g.ignoreClip=!0,ji(g,fi(n),{labelFetcher:e.seriesModel,labelDataIndex:r,defaultText:Lx(e.seriesModel.getData(),r),inheritColor:t.style.fill,defaultOpacity:t.style.opacity,defaultOutsidePosition:p}),on(a,u,h,i.get("disabled"))}function xB(a){var e=Math.round(a);return Math.abs(a-e)<1e-4?e:Math.ceil(a)}var H4e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t.defaultSymbol="roundRect",t}return e.prototype.getInitialData=function(t){return t.stack=null,a.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=Dh(nb.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:Be.color.primary}}}),e})(nb);function U4e(a){a.registerChartView(R4e),a.registerSeriesModel(H4e),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,ya(aq,"pictorialBar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,rq("pictorialBar"))}var G4e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t._layers=[],t}return e.prototype.render=function(t,r,n){var i=t.getData(),l=this,o=this.group,c=t.getLayerSeries(),d=i.getLayout("layoutInfo"),u=d.rect,h=d.boundaryGap;o.x=0,o.y=u.y+h[0];function f(w){return w.name}var p=new Fd(this._layersSeries||[],c,f,f),g=[];p.add(Tt(b,this,"add")).update(Tt(b,this,"update")).remove(Tt(b,this,"remove")).execute();function b(w,j,k){var T=l._layers;if(w==="remove"){o.remove(T[j]);return}for(var E=[],I=[],R,P=c[j].indices,H=0;H<P.length;H++){var G=i.getItemLayout(P[H]),X=G.x,U=G.y0,te=G.y;E.push(X,U),I.push(X,U+te),R=i.getItemVisual(P[H],"style")}var Z,J=i.getItemLayout(P[0]),B=t.getModel("label"),W=B.get("margin"),$=t.getModel("emphasis");if(w==="add"){var Q=g[j]=new $t;Z=new $q({shape:{points:E,stackedOnPoints:I,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),Q.add(Z),o.add(Q),t.isAnimationEnabled()&&Z.setClipPath(W4e(Z.getBoundingRect(),t,function(){Z.removeClipPath()}))}else{var Q=T[k];Z=Q.childAt(0),o.add(Q),g[j]=Q,nr(Z,{shape:{points:E,stackedOnPoints:I}},t),lo(Z)}ji(Z,fi(t),{labelDataIndex:P[H-1],defaultText:i.getName(P[H-1]),inheritColor:R.fill},{normal:{verticalAlign:"middle"}}),Z.setTextConfig({position:null,local:!0});var ne=Z.getTextContent();ne&&(ne.x=J.x-W,ne.y=J.y0+J.y/2),Z.useStyle(R),i.setItemGraphicEl(j,Z),hi(Z,t),on(Z,$.get("focus"),$.get("blurScope"),$.get("disabled"))}this._layersSeries=c,this._layers=g},e.type="themeRiver",e})(Dr);function W4e(a,e,t){var r=new Ea({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return en(r,{shape:{x:a.x-50,width:a.width+100,height:a.height+20}},e,t),r}var lC=2,Y4e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new nm(Tt(this.getData,this),Tt(this.getRawData,this))},e.prototype.fixData=function(t){var r=t.length,n={},i=W4(t,function(f){return n.hasOwnProperty(f[0]+"")||(n[f[0]+""]=-1),f[2]}),l=[];i.buckets.each(function(f,p){l.push({name:p,dataList:f})});for(var o=l.length,c=0;c<o;++c){for(var d=l[c].name,u=0;u<l[c].dataList.length;++u){var h=l[c].dataList[u][0]+"";n[h]=c}for(var h in n)n.hasOwnProperty(h)&&n[h]!==c&&(n[h]=c,t[r]=[h,0,d],r++)}return t},e.prototype.getInitialData=function(t,r){for(var n=this.getReferringComponents("singleAxis",wn).models[0],i=n.get("type"),l=pr(t.data,function(g){return g[2]!==void 0}),o=this.fixData(l||[]),c=[],d=this.nameMap=Pt(),u=0,h=0;h<o.length;++h)c.push(o[h][lC]),d.get(o[h][lC])||(d.set(o[h][lC],u),u++);var f=zb(o,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:e_(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,p=new As(f,this);return p.initData(o),p},e.prototype.getLayerSeries=function(){for(var t=this.getData(),r=t.count(),n=[],i=0;i<r;++i)n[i]=i;var l=t.mapDimension("single"),o=W4(n,function(d){return t.get("name",d)}),c=[];return o.buckets.each(function(d,u){d.sort(function(h,f){return t.get(l,h)-t.get(l,f)}),c.push({name:u,indices:d})}),c},e.prototype.getAxisTooltipData=function(t,r,n){lt(t)||(t=t?[t]:[]);for(var i=this.getData(),l=this.getLayerSeries(),o=[],c=l.length,d,u=0;u<c;++u){for(var h=Number.MAX_VALUE,f=-1,p=l[u].indices.length,g=0;g<p;++g){var b=i.get(t[0],l[u].indices[g]),w=Math.abs(b-r);w<=h&&(d=b,h=w,f=l[u].indices[g])}o.push(f)}return{dataIndices:o,nestestValue:d}},e.prototype.formatTooltip=function(t,r,n){var i=this.getData(),l=i.getName(t),o=i.get(i.mapDimension("value"),t);return Qn("nameValue",{name:l,value:o})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e})(Vr);function $4e(a,e){a.eachSeriesByType("themeRiver",function(t){var r=t.getData(),n=t.coordinateSystem,i={},l=n.getRect();i.rect=l;var o=t.get("boundaryGap"),c=n.getAxis();if(i.boundaryGap=o,c.orient==="horizontal"){o[0]=kt(o[0],l.height),o[1]=kt(o[1],l.height);var d=l.height-o[0]-o[1];mB(r,t,d)}else{o[0]=kt(o[0],l.width),o[1]=kt(o[1],l.width);var u=l.width-o[0]-o[1];mB(r,t,u)}r.setLayout("layoutInfo",i)})}function mB(a,e,t){if(a.count())for(var r=e.coordinateSystem,n=e.getLayerSeries(),i=a.mapDimension("single"),l=a.mapDimension("value"),o=ct(n,function(w){return ct(w.indices,function(j){var k=r.dataToPoint(a.get(i,j));return k[1]=a.get(l,j),k})}),c=q4e(o),d=c.y0,u=t/c.max,h=n.length,f=n[0].indices.length,p,g=0;g<f;++g){p=d[g]*u,a.setItemLayout(n[0].indices[g],{layerIndex:0,x:o[0][g][0],y0:p,y:o[0][g][1]*u});for(var b=1;b<h;++b)p+=o[b-1][g][1]*u,a.setItemLayout(n[b].indices[g],{layerIndex:b,x:o[b][g][0],y0:p,y:o[b][g][1]*u})}}function q4e(a){for(var e=a.length,t=a[0].length,r=[],n=[],i=0,l=0;l<t;++l){for(var o=0,c=0;c<e;++c)o+=a[c][l][1];o>i&&(i=o),r.push(o)}for(var d=0;d<t;++d)n[d]=(i-r[d])/2;i=0;for(var u=0;u<t;++u){var h=r[u]+n[u];h>i&&(i=h)}return{y0:n,max:i}}function X4e(a){a.registerChartView(G4e),a.registerSeriesModel(Y4e),a.registerLayout($4e),a.registerProcessor(am("themeRiver"))}var Z4e=2,K4e=4,gB=(function(a){Ie(e,a);function e(t,r,n,i){var l=a.call(this)||this;l.z2=Z4e,l.textConfig={inside:!0},la(l).seriesIndex=r.seriesIndex;var o=new tr({z2:K4e,silent:t.getModel().get(["label","silent"])});return l.setTextContent(o),l.updateData(!0,t,r,n,i),l}return e.prototype.updateData=function(t,r,n,i,l){this.node=r,r.piece=this,n=n||this._seriesModel,i=i||this._ecModel;var o=this;la(o).dataIndex=r.dataIndex;var c=r.getModel(),d=c.getModel("emphasis"),u=r.getLayout(),h=et({},u);h.label=null;var f=r.getVisual("style");f.lineJoin="bevel";var p=r.getVisual("decal");p&&(f.decal=Ex(p,l));var g=yc(c.getModel("itemStyle"),h,!0);et(h,g),se(Ms,function(k){var T=o.ensureState(k),E=c.getModel([k,"itemStyle"]);T.style=E.getItemStyle();var I=yc(E,h);I&&(T.shape=I)}),t?(o.setShape(h),o.shape.r=u.r0,en(o,{shape:{r:u.r}},n,r.dataIndex)):(nr(o,{shape:h},n),lo(o)),o.useStyle(f),this._updateLabel(n);var b=c.getShallow("cursor");b&&o.attr("cursor",b),this._seriesModel=n||this._seriesModel,this._ecModel=i||this._ecModel;var w=d.get("focus"),j=w==="relative"?zv(r.getAncestorsIndices(),r.getDescendantIndices()):w==="ancestor"?r.getAncestorsIndices():w==="descendant"?r.getDescendantIndices():w;on(this,j,d.get("blurScope"),d.get("disabled"))},e.prototype._updateLabel=function(t){var r=this,n=this.node.getModel(),i=n.getModel("label"),l=this.node.getLayout(),o=l.endAngle-l.startAngle,c=(l.startAngle+l.endAngle)/2,d=Math.cos(c),u=Math.sin(c),h=this,f=h.getTextContent(),p=this.node.dataIndex,g=i.get("minAngle")/180*Math.PI,b=i.get("show")&&!(g!=null&&Math.abs(o)<g);f.ignore=!b,se(Gv,function(j){var k=j==="normal"?n.getModel("label"):n.getModel([j,"label"]),T=j==="normal",E=T?f:f.ensureState(j),I=t.getFormattedLabel(p,j);T&&(I=I||r.node.name),E.style=Fr(k,{},null,j!=="normal",!0),I&&(E.style.text=I);var R=k.get("show");R!=null&&!T&&(E.ignore=!R);var P=w(k,"position"),H=T?h:h.states[j],G=H.style.fill;H.textConfig={outsideFill:k.get("color")==="inherit"?G:null,inside:P!=="outside"};var X,U=w(k,"distance")||0,te=w(k,"align"),Z=w(k,"rotate"),J=Math.PI*.5,B=Math.PI*1.5,W=_l(Z==="tangential"?Math.PI/2-c:c),$=W>J&&!Hv(W-J)&&W<B;P==="outside"?(X=l.r+U,te=$?"right":"left"):!te||te==="center"?(o===2*Math.PI&&l.r0===0?X=0:X=(l.r+l.r0)/2,te="center"):te==="left"?(X=l.r0+U,te=$?"right":"left"):te==="right"&&(X=l.r-U,te=$?"left":"right"),E.style.align=te,E.style.verticalAlign=w(k,"verticalAlign")||"middle",E.x=X*d+l.cx,E.y=X*u+l.cy;var Q=0;Z==="radial"?Q=_l(-c)+($?Math.PI:0):Z==="tangential"?Q=_l(Math.PI/2-c)+($?Math.PI:0):Ka(Z)&&(Q=Z*Math.PI/180),E.rotation=_l(Q)});function w(j,k){var T=j.get(k);return T??i.get(k)}f.dirtyStyle()},e})(hs),lA="sunburstRootToNode",vB="sunburstHighlight",Q4e="sunburstUnhighlight";function J4e(a){a.registerAction({type:lA,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},r);function r(n,i){var l=sb(e,[lA],n);if(l){var o=n.getViewRoot();o&&(e.direction=e6(o,l.node)?"rollUp":"drillDown"),n.resetViewRoot(l.node)}}}),a.registerAction({type:vB,update:"none"},function(e,t,r){e=et({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},n);function n(i){var l=sb(e,[vB],i);l&&(e.dataIndex=l.node.dataIndex)}r.dispatchAction(et(e,{type:"highlight"}))}),a.registerAction({type:Q4e,update:"updateView"},function(e,t,r){e=et({},e),r.dispatchAction(et(e,{type:"downplay"}))})}var e3e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n,i){var l=this;this.seriesModel=t,this.api=n,this.ecModel=r;var o=t.getData(),c=o.tree.root,d=t.getViewRoot(),u=this.group,h=t.get("renderLabelForZeroData"),f=[];d.eachNode(function(k){f.push(k)});var p=this._oldChildren||[];g(f,p),j(c,d),this._initEvents(),this._oldChildren=f;function g(k,T){if(k.length===0&&T.length===0)return;new Fd(T,k,E,E).add(I).update(I).remove(ya(I,null)).execute();function E(R){return R.getId()}function I(R,P){var H=R==null?null:k[R],G=P==null?null:T[P];b(H,G)}}function b(k,T){if(!h&&k&&!k.getValue()&&(k=null),k!==c&&T!==c){if(T&&T.piece)k?(T.piece.updateData(!1,k,t,r,n),o.setItemGraphicEl(k.dataIndex,T.piece)):w(T);else if(k){var E=new gB(k,t,r,n);u.add(E),o.setItemGraphicEl(k.dataIndex,E)}}}function w(k){k&&k.piece&&(u.remove(k.piece),k.piece=null)}function j(k,T){T.depth>0?(l.virtualPiece?l.virtualPiece.updateData(!1,k,t,r,n):(l.virtualPiece=new gB(k,t,r,n),u.add(l.virtualPiece)),T.piece.off("click"),l.virtualPiece.on("click",function(E){l._rootToNode(T.parentNode)})):l.virtualPiece&&(u.remove(l.virtualPiece),l.virtualPiece=null)}},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",function(r){var n=!1,i=t.seriesModel.getViewRoot();i.eachNode(function(l){if(!n&&l.piece&&l.piece===r.target){var o=l.getModel().get("nodeClick");if(o==="rootToNode")t._rootToNode(l);else if(o==="link"){var c=l.getModel(),d=c.get("link");if(d){var u=c.get("target",!0)||"_blank";Y2(d,u)}}n=!0}})})},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:lA,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,r){var n=r.getData(),i=n.getItemLayout(0);if(i){var l=t[0]-i.cx,o=t[1]-i.cy,c=Math.sqrt(l*l+o*o);return c<=i.r&&c>=i.r0}},e.type="sunburst",e})(Dr),t3e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t,r){var n={name:t.name,children:t.data};PZ(n);var i=this._levelModels=ct(t.levels||[],function(c){return new Fa(c,this,r)},this),l=JM.createTree(n,this,o);function o(c){c.wrapMethod("getItemModel",function(d,u){var h=l.getNodeByDataIndex(u),f=i[h.depth];return f&&(d.parentModel=f),d})}return l.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(t){var r=a.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return r.treePathInfo=BN(n,this),r},e.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){VX(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e})(Vr);function PZ(a){var e=0;se(a.children,function(r){PZ(r);var n=r.value;lt(n)&&(n=n[0]),e+=n});var t=a.value;lt(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),lt(a.value)?a.value[0]=t:a.value=t}var bB=Math.PI/180;function a3e(a,e,t){e.eachSeriesByType(a,function(r){var n=r.get("center"),i=r.get("radius");lt(i)||(i=[0,i]),lt(n)||(n=[n,n]);var l=t.getWidth(),o=t.getHeight(),c=Math.min(l,o),d=kt(n[0],l),u=kt(n[1],o),h=kt(i[0],c/2),f=kt(i[1],c/2),p=-r.get("startAngle")*bB,g=r.get("minAngle")*bB,b=r.getData().tree.root,w=r.getViewRoot(),j=w.depth,k=r.get("sort");k!=null&&zZ(w,k);var T=0;se(w.children,function(W){!isNaN(W.getValue())&&T++});var E=w.getValue(),I=Math.PI/(E||T)*2,R=w.depth>0,P=w.height-(R?-1:1),H=(f-h)/(P||1),G=r.get("clockwise"),X=r.get("stillShowZeroSum"),U=G?1:-1,te=function(W,$){if(W){var Q=$;if(W!==b){var ne=W.getValue(),re=E===0&&X?I:ne*I;re<g&&(re=g),Q=$+U*re;var K=W.depth-j-(R?-1:1),ae=h+H*K,ce=h+H*(K+1),de=r.getLevelModel(W);if(de){var he=de.get("r0",!0),pe=de.get("r",!0),Re=de.get("radius",!0);Re!=null&&(he=Re[0],pe=Re[1]),he!=null&&(ae=kt(he,c/2)),pe!=null&&(ce=kt(pe,c/2))}W.setLayout({angle:re,startAngle:$,endAngle:Q,clockwise:G,cx:d,cy:u,r0:ae,r:ce})}if(W.children&&W.children.length){var Te=0;se(W.children,function(ke){Te+=te(ke,$+Te)})}return Q-$}};if(R){var Z=h,J=h+H,B=Math.PI*2;b.setLayout({angle:B,startAngle:p,endAngle:p+B,clockwise:G,cx:d,cy:u,r0:Z,r:J})}te(w,p)})}function zZ(a,e){var t=a.children||[];a.children=r3e(t,e),t.length&&se(a.children,function(r){zZ(r,e)})}function r3e(a,e){if(Yt(e)){var t=ct(a,function(n,i){var l=n.getValue();return{params:{depth:n.depth,height:n.height,dataIndex:n.dataIndex,getValue:function(){return l}},index:i}});return t.sort(function(n,i){return e(n.params,i.params)}),ct(t,function(n){return a[n.index]})}else{var r=e==="asc";return a.sort(function(n,i){var l=(n.getValue()-i.getValue())*(r?1:-1);return l===0?(n.dataIndex-i.dataIndex)*(r?-1:1):l})}}function n3e(a){var e={};function t(r,n,i){if(r.depth===0)return Be.color.neutral50;for(var l=r;l&&l.depth>1;)l=l.parentNode;var o=n.getColorFromPalette(l.name||l.dataIndex+"",e);return r.depth>1&&At(o)&&(o=I4(o,(r.depth-1)/(i-1)*.5)),o}a.eachSeriesByType("sunburst",function(r){var n=r.getData(),i=n.tree;i.eachNode(function(l){var o=l.getModel(),c=o.getModel("itemStyle").getItemStyle();c.fill||(c.fill=t(l,r,i.root.height));var d=n.ensureUniqueItemVisual(l.dataIndex,"style");et(d,c)})})}function i3e(a){a.registerChartView(e3e),a.registerSeriesModel(t3e),a.registerLayout(ya(a3e,"sunburst")),a.registerProcessor(ya(am,"sunburst")),a.registerVisual(n3e),J4e(a)}var yB={color:"fill",borderColor:"stroke"},s3e={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},Ed=Ia(),l3e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(t,r){return $d(null,this)},e.prototype.getDataParams=function(t,r,n){var i=a.prototype.getDataParams.call(this,t,r);return n&&(i.info=Ed(n).info),i},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar","matrix"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},e})(Vr);function o3e(a,e){return e=e||[0,0],ct(["x","y"],function(t,r){var n=this.getAxis(t),i=e[r],l=a[r]/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(i-l)-n.dataToCoord(i+l))},this)}function c3e(a){var e=a.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return a.dataToPoint(t)},size:Tt(o3e,a)}}}function d3e(a,e){return e=e||[0,0],ct([0,1],function(t){var r=e[t],n=a[t]/2,i=[],l=[];return i[t]=r-n,l[t]=r+n,i[1-t]=l[1-t]=e[1-t],Math.abs(this.dataToPoint(i)[t]-this.dataToPoint(l)[t])},this)}function u3e(a){var e=a.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:a.getZoom()},api:{coord:function(t){return a.dataToPoint(t)},size:Tt(d3e,a)}}}function h3e(a,e){var t=this.getAxis(),r=e instanceof Array?e[0]:e,n=(a instanceof Array?a[0]:a)/2;return t.type==="category"?t.getBandWidth():Math.abs(t.dataToCoord(r-n)-t.dataToCoord(r+n))}function f3e(a){var e=a.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return a.dataToPoint(t)},size:Tt(h3e,a)}}}function p3e(a,e){return e=e||[0,0],ct(["Radius","Angle"],function(t,r){var n="get"+t+"Axis",i=this[n](),l=e[r],o=a[r]/2,c=i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(l-o)-i.dataToCoord(l+o));return t==="Angle"&&(c=c*Math.PI/180),c},this)}function x3e(a){var e=a.getRadiusAxis(),t=a.getAngleAxis(),r=e.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:a.cx,cy:a.cy,r:r[1],r0:r[0]},api:{coord:function(n){var i=e.dataToRadius(n[0]),l=t.dataToAngle(n[1]),o=a.coordToPoint([i,l]);return o.push(i,l*Math.PI/180),o},size:Tt(p3e,a)}}}function m3e(a){var e=a.getRect(),t=a.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:a.getCellWidth(),cellHeight:a.getCellHeight(),rangeInfo:{start:t.start,end:t.end,weeks:t.weeks,dayCount:t.allDay}},api:{coord:function(r,n){return a.dataToPoint(r,n)},layout:function(r,n){return a.dataToLayout(r,n)}}}}function g3e(a){var e=a.getRect();return{coordSys:{type:"matrix",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t,r){return a.dataToPoint(t,r)},layout:function(t,r){return a.dataToLayout(t,r)}}}}function BZ(a,e,t,r){return a&&(a.legacy||a.legacy!==!1&&!t&&!r&&e!=="tspan"&&(e==="text"||Rt(a,"text")))}function FZ(a,e,t){var r=a,n,i,l;if(e==="text")l=r;else{l={},Rt(r,"text")&&(l.text=r.text),Rt(r,"rich")&&(l.rich=r.rich),Rt(r,"textFill")&&(l.fill=r.textFill),Rt(r,"textStroke")&&(l.stroke=r.textStroke),Rt(r,"fontFamily")&&(l.fontFamily=r.fontFamily),Rt(r,"fontSize")&&(l.fontSize=r.fontSize),Rt(r,"fontStyle")&&(l.fontStyle=r.fontStyle),Rt(r,"fontWeight")&&(l.fontWeight=r.fontWeight),i={type:"text",style:l,silent:!0},n={};var o=Rt(r,"textPosition");t?n.position=o?r.textPosition:"inside":o&&(n.position=r.textPosition),Rt(r,"textPosition")&&(n.position=r.textPosition),Rt(r,"textOffset")&&(n.offset=r.textOffset),Rt(r,"textRotation")&&(n.rotation=r.textRotation),Rt(r,"textDistance")&&(n.distance=r.textDistance)}return wB(l,a),se(l.rich,function(c){wB(c,c)}),{textConfig:n,textContent:i}}function wB(a,e){e&&(e.font=e.textFont||e.font,Rt(e,"textStrokeWidth")&&(a.lineWidth=e.textStrokeWidth),Rt(e,"textAlign")&&(a.align=e.textAlign),Rt(e,"textVerticalAlign")&&(a.verticalAlign=e.textVerticalAlign),Rt(e,"textLineHeight")&&(a.lineHeight=e.textLineHeight),Rt(e,"textWidth")&&(a.width=e.textWidth),Rt(e,"textHeight")&&(a.height=e.textHeight),Rt(e,"textBackgroundColor")&&(a.backgroundColor=e.textBackgroundColor),Rt(e,"textPadding")&&(a.padding=e.textPadding),Rt(e,"textBorderColor")&&(a.borderColor=e.textBorderColor),Rt(e,"textBorderWidth")&&(a.borderWidth=e.textBorderWidth),Rt(e,"textBorderRadius")&&(a.borderRadius=e.textBorderRadius),Rt(e,"textBoxShadowColor")&&(a.shadowColor=e.textBoxShadowColor),Rt(e,"textBoxShadowBlur")&&(a.shadowBlur=e.textBoxShadowBlur),Rt(e,"textBoxShadowOffsetX")&&(a.shadowOffsetX=e.textBoxShadowOffsetX),Rt(e,"textBoxShadowOffsetY")&&(a.shadowOffsetY=e.textBoxShadowOffsetY))}function _B(a,e,t){var r=a;r.textPosition=r.textPosition||t.position||"inside",t.offset!=null&&(r.textOffset=t.offset),t.rotation!=null&&(r.textRotation=t.rotation),t.distance!=null&&(r.textDistance=t.distance);var n=r.textPosition.indexOf("inside")>=0,i=a.fill||Be.color.neutral99;NB(r,e);var l=r.textFill==null;return n?l&&(r.textFill=t.insideFill||Be.color.neutral00,!r.textStroke&&t.insideStroke&&(r.textStroke=t.insideStroke),!r.textStroke&&(r.textStroke=i),r.textStrokeWidth==null&&(r.textStrokeWidth=2)):(l&&(r.textFill=a.fill||t.outsideFill||Be.color.neutral00),!r.textStroke&&t.outsideStroke&&(r.textStroke=t.outsideStroke)),r.text=e.text,r.rich=e.rich,se(e.rich,function(o){NB(o,o)}),r}function NB(a,e){e&&(Rt(e,"fill")&&(a.textFill=e.fill),Rt(e,"stroke")&&(a.textStroke=e.fill),Rt(e,"lineWidth")&&(a.textStrokeWidth=e.lineWidth),Rt(e,"font")&&(a.font=e.font),Rt(e,"fontStyle")&&(a.fontStyle=e.fontStyle),Rt(e,"fontWeight")&&(a.fontWeight=e.fontWeight),Rt(e,"fontSize")&&(a.fontSize=e.fontSize),Rt(e,"fontFamily")&&(a.fontFamily=e.fontFamily),Rt(e,"align")&&(a.textAlign=e.align),Rt(e,"verticalAlign")&&(a.textVerticalAlign=e.verticalAlign),Rt(e,"lineHeight")&&(a.textLineHeight=e.lineHeight),Rt(e,"width")&&(a.textWidth=e.width),Rt(e,"height")&&(a.textHeight=e.height),Rt(e,"backgroundColor")&&(a.textBackgroundColor=e.backgroundColor),Rt(e,"padding")&&(a.textPadding=e.padding),Rt(e,"borderColor")&&(a.textBorderColor=e.borderColor),Rt(e,"borderWidth")&&(a.textBorderWidth=e.borderWidth),Rt(e,"borderRadius")&&(a.textBorderRadius=e.borderRadius),Rt(e,"shadowColor")&&(a.textBoxShadowColor=e.shadowColor),Rt(e,"shadowBlur")&&(a.textBoxShadowBlur=e.shadowBlur),Rt(e,"shadowOffsetX")&&(a.textBoxShadowOffsetX=e.shadowOffsetX),Rt(e,"shadowOffsetY")&&(a.textBoxShadowOffsetY=e.shadowOffsetY),Rt(e,"textShadowColor")&&(a.textShadowColor=e.textShadowColor),Rt(e,"textShadowBlur")&&(a.textShadowBlur=e.textShadowBlur),Rt(e,"textShadowOffsetX")&&(a.textShadowOffsetX=e.textShadowOffsetX),Rt(e,"textShadowOffsetY")&&(a.textShadowOffsetY=e.textShadowOffsetY))}var VZ={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},jB=Ua(VZ);Mc(Dc,function(a,e){return a[e]=1,a},{});Dc.join(", ");var v_=["","style","shape","extra"],Bx=Ia();function v6(a,e,t,r,n){var i=a+"Animation",l=Xx(a,r,n)||{},o=Bx(e).userDuring;return l.duration>0&&(l.during=o?Tt(_3e,{el:e,userDuring:o}):null,l.setToFinal=!0,l.scope=a),et(l,t[i]),l}function Kw(a,e,t,r){r=r||{};var n=r.dataIndex,i=r.isInit,l=r.clearStyle,o=t.isAnimationEnabled(),c=Bx(a),d=e.style;c.userDuring=e.during;var u={},h={};if(j3e(a,e,h),a.type==="compound")for(var f=a.shape.paths,p=e.shape.paths,g=0;g<p.length;g++){var b=p[g];oC("shape",b,f[g])}else oC("shape",e,h),oC("extra",e,h);if(!i&&o&&(N3e(a,e,u),SB("shape",a,e,u),SB("extra",a,e,u),S3e(a,e,d,u)),h.style=d,v3e(a,h,l),y3e(a,e),o)if(i){var w={};se(v_,function(k){var T=k?e[k]:e;T&&T.enterFrom&&(k&&(w[k]=w[k]||{}),et(k?w[k]:w,T.enterFrom))});var j=v6("enter",a,e,t,n);j.duration>0&&a.animateFrom(w,j)}else b3e(a,e,n||0,t,u);HZ(a,e),d?a.dirty():a.markRedraw()}function HZ(a,e){for(var t=Bx(a).leaveToProps,r=0;r<v_.length;r++){var n=v_[r],i=n?e[n]:e;i&&i.leaveTo&&(t||(t=Bx(a).leaveToProps={}),n&&(t[n]=t[n]||{}),et(n?t[n]:t,i.leaveTo))}}function HN(a,e,t,r){if(a){var n=a.parent,i=Bx(a).leaveToProps;if(i){var l=v6("update",a,e,t,0);l.done=function(){n&&n.remove(a)},a.animateTo(i,l)}else n&&n.remove(a)}}function f0(a){return a==="all"}function v3e(a,e,t){var r=e.style;if(!a.isGroup&&r){if(t){a.useStyle({});for(var n=a.animators,i=0;i<n.length;i++){var l=n[i];l.targetName==="style"&&l.changeTarget(a.style)}}a.setStyle(r)}e&&(e.style=null,e&&a.attr(e),e.style=r)}function b3e(a,e,t,r,n){if(n){var i=v6("update",a,e,r,t);i.duration>0&&a.animateFrom(n,i)}}function y3e(a,e){Rt(e,"silent")&&(a.silent=e.silent),Rt(e,"ignore")&&(a.ignore=e.ignore),a instanceof so&&Rt(e,"invisible")&&(a.invisible=e.invisible),a instanceof Ra&&Rt(e,"autoBatch")&&(a.autoBatch=e.autoBatch)}var lc={},w3e={setTransform:function(a,e){return lc.el[a]=e,this},getTransform:function(a){return lc.el[a]},setShape:function(a,e){var t=lc.el,r=t.shape||(t.shape={});return r[a]=e,t.dirtyShape&&t.dirtyShape(),this},getShape:function(a){var e=lc.el.shape;if(e)return e[a]},setStyle:function(a,e){var t=lc.el,r=t.style;return r&&(r[a]=e,t.dirtyStyle&&t.dirtyStyle()),this},getStyle:function(a){var e=lc.el.style;if(e)return e[a]},setExtra:function(a,e){var t=lc.el.extra||(lc.el.extra={});return t[a]=e,this},getExtra:function(a){var e=lc.el.extra;if(e)return e[a]}};function _3e(){var a=this,e=a.el;if(e){var t=Bx(e).userDuring,r=a.userDuring;if(t!==r){a.el=a.userDuring=null;return}lc.el=e,r(w3e)}}function SB(a,e,t,r){var n=t[a];if(n){var i=e[a],l;if(i){var o=t.transition,c=n.transition;if(c)if(!l&&(l=r[a]={}),f0(c))et(l,i);else for(var d=Or(c),u=0;u<d.length;u++){var h=d[u],f=i[h];l[h]=f}else if(f0(o)||ja(o,a)>=0){!l&&(l=r[a]={});for(var p=Ua(i),u=0;u<p.length;u++){var h=p[u],f=i[h];k3e(n[h],f)&&(l[h]=f)}}}}}function oC(a,e,t){var r=e[a];if(r)for(var n=t[a]={},i=Ua(r),l=0;l<i.length;l++){var o=i[l];n[o]=ov(r[o])}}function N3e(a,e,t){for(var r=e.transition,n=f0(r)?Dc:Or(r||[]),i=0;i<n.length;i++){var l=n[i];if(!(l==="style"||l==="shape"||l==="extra")){var o=a[l];t[l]=o}}}function j3e(a,e,t){for(var r=0;r<jB.length;r++){var n=jB[r],i=VZ[n],l=e[n];l&&(t[i[0]]=l[0],t[i[1]]=l[1])}for(var r=0;r<Dc.length;r++){var o=Dc[r];e[o]!=null&&(t[o]=e[o])}}function S3e(a,e,t,r){if(t){var n=a.style,i;if(n){var l=t.transition,o=e.transition;if(l&&!f0(l)){var c=Or(l);!i&&(i=r.style={});for(var d=0;d<c.length;d++){var u=c[d],h=n[u];i[u]=h}}else if(a.getAnimationStyleProps&&(f0(o)||f0(l)||ja(o,"style")>=0)){var f=a.getAnimationStyleProps(),p=f?f.style:null;if(p){!i&&(i=r.style={});for(var g=Ua(t),d=0;d<g.length;d++){var u=g[d];if(p[u]){var h=n[u];i[u]=h}}}}}}}function k3e(a,e){return ds(a)?a!==e:a!=null&&isFinite(a)}var UZ=Ia(),C3e=["percent","easing","shape","style","extra"];function GZ(a){a.stopAnimation("keyframe"),a.attr(UZ(a))}function b_(a,e,t){if(!(!t.isAnimationEnabled()||!e)){if(lt(e)){se(e,function(o){b_(a,o,t)});return}var r=e.keyframes,n=e.duration;if(t&&n==null){var i=Xx("enter",t,0);n=i&&i.duration}if(!(!r||!n)){var l=UZ(a);se(v_,function(o){if(!(o&&!a[o])){var c;r.sort(function(d,u){return d.percent-u.percent}),se(r,function(d){var u=a.animators,h=o?d[o]:d;if(h){var f=Ua(h);if(o||(f=pr(f,function(b){return ja(C3e,b)<0})),!!f.length){c||(c=a.animate(o,e.loop,!0),c.scope="keyframe");for(var p=0;p<u.length;p++)u[p]!==c&&u[p].targetName===c.targetName&&u[p].stopTracks(f);o&&(l[o]=l[o]||{});var g=o?l[o]:l;se(f,function(b){g[b]=((o?a[o]:a)||{})[b]}),c.whenWithKeys(n*d.percent,h,f,d.easing)}}}),c&&c.delay(e.delay||0).duration(n).start(e.easing)}})}}}var Dd="emphasis",ih="normal",b6="blur",y6="select",kh=[ih,Dd,b6,y6],cC={normal:["itemStyle"],emphasis:[Dd,"itemStyle"],blur:[b6,"itemStyle"],select:[y6,"itemStyle"]},dC={normal:["label"],emphasis:[Dd,"label"],blur:[b6,"label"],select:[y6,"label"]},A3e=["x","y"],T3e="e\0\0",Ul={normal:{},emphasis:{},blur:{},select:{}},M3e={cartesian2d:c3e,geo:u3e,single:f3e,polar:x3e,calendar:m3e,matrix:g3e};function oA(a){return a instanceof Ra}function cA(a){return a instanceof so}function E3e(a,e){e.copyTransform(a),cA(e)&&cA(a)&&(e.setStyle(a.style),e.z=a.z,e.z2=a.z2,e.zlevel=a.zlevel,e.invisible=a.invisible,e.ignore=a.ignore,oA(e)&&oA(a)&&e.setShape(a.shape))}var D3e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n,i){this._progressiveEls=null;var l=this._data,o=t.getData(),c=this.group,d=kB(t,o,r,n);l||c.removeAll(),o.diff(l).add(function(h){uC(n,null,h,d(h,i),t,c,o)}).remove(function(h){var f=l.getItemGraphicEl(h);f&&HN(f,Ed(f).option,t)}).update(function(h,f){var p=l.getItemGraphicEl(f);uC(n,p,h,d(h,i),t,c,o)}).execute();var u=t.get("clip",!0)?Hb(t.coordinateSystem,!1,t):null;u?c.setClipPath(u):c.removeClipPath(),this._data=o},e.prototype.incrementalPrepareRender=function(t,r,n){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(t,r,n,i,l){var o=r.getData(),c=kB(r,o,n,i),d=this._progressiveEls=[];function u(p){p.isGroup||(p.incremental=!0,p.ensureState("emphasis").hoverLayer=!0)}for(var h=t.start;h<t.end;h++){var f=uC(null,null,h,c(h,l),r,this.group,o);f&&(f.traverse(u),d.push(f))}},e.prototype.eachRendered=function(t){Eh(this._progressiveEls||this.group,t)},e.prototype.filterForExposedEvent=function(t,r,n,i){var l=r.element;if(l==null||n.name===l)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===l)return!0;return!1},e.type="custom",e})(Dr);function w6(a){var e=a.type,t;if(e==="path"){var r=a.shape,n=r.width!=null&&r.height!=null?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,i=$Z(r);t=Yv(i,null,n,r.layout||"center"),Ed(t).customPathData=i}else if(e==="image")t=new Pi({}),Ed(t).customImagePath=a.style.image;else if(e==="text")t=new tr({});else if(e==="group")t=new $t;else if(e==="compoundPath"){var r=a.shape;if(!r||!r.paths){var l="";cr(l)}var o=ct(r.paths,function(u){if(u.type==="path")return Yv(u.shape.pathData,u,null);var h=U2(u.type);if(!h){var f="";cr(f)}return new h});t=new _N({shape:{paths:o}})}else{var c=U2(e);if(!c){var l="";cr(l)}t=new c}return Ed(t).customGraphicType=e,t.name=a.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function _6(a,e,t,r,n,i,l){GZ(e);var o=n&&n.normal.cfg;o&&e.setTextConfig(o),r&&r.transition==null&&(r.transition=A3e);var c=r&&r.style;if(c){if(e.type==="text"){var d=c;Rt(d,"textFill")&&(d.fill=d.textFill),Rt(d,"textStroke")&&(d.stroke=d.textStroke)}var u=void 0,h=oA(e)?c.decal:null;a&&h&&(h.dirty=!0,u=Ex(h,a)),c.__decalPattern=u}if(cA(e)&&c){var u=c.__decalPattern;u&&(c.decal=u)}Kw(e,r,i,{dataIndex:t,isInit:l,clearStyle:!0}),b_(e,r.keyframeAnimation,i)}function WZ(a,e,t,r,n){var i=e.isGroup?null:e,l=n&&n[a].cfg;if(i){var o=i.ensureState(a);if(r===!1){var c=i.getState(a);c&&(c.style=null)}else o.style=r||null;l&&(o.textConfig=l),N0(i)}}function I3e(a,e,t){if(!a.isGroup){var r=a,n=t.currentZ,i=t.currentZLevel;r.z=n,r.zlevel=i;var l=e.z2;l!=null&&(r.z2=l||0);for(var o=0;o<kh.length;o++)R3e(r,e,kh[o])}}function R3e(a,e,t){var r=t===ih,n=r?e:y_(e,t),i=n?n.z2:null,l;i!=null&&(l=r?a:a.ensureState(t),l.z2=i||0)}function kB(a,e,t,r){var n=a.get("renderItem");if(typeof n=="string"){var i=Yye(n);i&&(n=i)}var l=a.coordinateSystem,o={};l&&(o=l.prepareCustoms?l.prepareCustoms(l):M3e[l.type](l));for(var c=ta({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:I,style:P,ordinalRawValue:R,styleEmphasis:H,visual:U,barLayout:te,currentSeriesIndices:Z,font:J},o.api||{}),d={context:{},seriesId:a.id,seriesName:a.name,seriesIndex:a.seriesIndex,coordSys:o.coordSys,dataInsideLength:e.count(),encode:L3e(a.getData()),itemPayload:a.get("itemPayload")||{}},u,h,f={},p={},g={},b={},w=0;w<kh.length;w++){var j=kh[w];g[j]=a.getModel(cC[j]),b[j]=a.getModel(dC[j])}function k(B){return B===u?h||(h=e.getItemModel(B)):e.getItemModel(B)}function T(B,W){return e.hasItemOption?B===u?f[W]||(f[W]=k(B).getModel(cC[W])):k(B).getModel(cC[W]):g[W]}function E(B,W){return e.hasItemOption?B===u?p[W]||(p[W]=k(B).getModel(dC[W])):k(B).getModel(dC[W]):b[W]}return function(B,W){return u=B,h=null,f={},p={},n&&n(ta({dataIndexInside:B,dataIndex:e.getRawIndex(B),actionType:W?W.type:null},d),c)};function I(B,W){return W==null&&(W=u),e.getStore().get(e.getDimensionIndex(B||0),W)}function R(B,W){W==null&&(W=u),B=B||0;var $=e.getDimensionInfo(B);if(!$){var Q=e.getDimensionIndex(B);return Q>=0?e.getStore().get(Q,W):void 0}var ne=e.get($.name,W),re=$&&$.ordinalMeta;return re?re.categories[ne]:ne}function P(B,W){W==null&&(W=u);var $=e.getItemVisual(W,"style"),Q=$&&$.fill,ne=$&&$.opacity,re=T(W,ih).getItemStyle();Q!=null&&(re.fill=Q),ne!=null&&(re.opacity=ne);var K={inheritColor:At(Q)?Q:Be.color.neutral99},ae=E(W,ih),ce=Fr(ae,null,K,!1,!0);ce.text=ae.getShallow("show")?Ht(a.getFormattedLabel(W,ih),Lx(e,W)):null;var de=G2(ae,K,!1);return X(B,re),re=_B(re,ce,de),B&&G(re,B),re.legacy=!0,re}function H(B,W){W==null&&(W=u);var $=T(W,Dd).getItemStyle(),Q=E(W,Dd),ne=Fr(Q,null,null,!0,!0);ne.text=Q.getShallow("show")?jl(a.getFormattedLabel(W,Dd),a.getFormattedLabel(W,ih),Lx(e,W)):null;var re=G2(Q,null,!0);return X(B,$),$=_B($,ne,re),B&&G($,B),$.legacy=!0,$}function G(B,W){for(var $ in W)Rt(W,$)&&(B[$]=W[$])}function X(B,W){B&&(B.textFill&&(W.textFill=B.textFill),B.textPosition&&(W.textPosition=B.textPosition))}function U(B,W){if(W==null&&(W=u),Rt(yB,B)){var $=e.getItemVisual(W,"style");return $?$[yB[B]]:null}if(Rt(s3e,B))return e.getItemVisual(W,B)}function te(B){if(l.type==="cartesian2d"){var W=l.getBaseAxis();return Gwe(ta({axis:W},B))}}function Z(){return t.getCurrentSeriesIndices()}function J(B){return tM(B,t)}}function L3e(a){var e={};return se(a.dimensions,function(t){var r=a.getDimensionInfo(t);if(!r.isExtraCoord){var n=r.coordDim,i=e[n]=e[n]||[];i[r.coordDimIndex]=a.getDimensionIndex(t)}}),e}function uC(a,e,t,r,n,i,l){if(!r){i.remove(e);return}var o=N6(a,e,t,r,n,i);return o&&l.setItemGraphicEl(t,o),o&&on(o,r.focus,r.blurScope,r.emphasisDisabled),o}function N6(a,e,t,r,n,i){var l=-1,o=e;e&&YZ(e,r,n)&&(l=ja(i.childrenRef(),e),e=null);var c=!e,d=e;d?d.clearStates():(d=w6(r),o&&E3e(o,d)),r.morph===!1?d.disableMorphing=!0:d.disableMorphing&&(d.disableMorphing=!1),r.tooltipDisabled&&(d.tooltipDisabled=!0),Ul.normal.cfg=Ul.normal.conOpt=Ul.emphasis.cfg=Ul.emphasis.conOpt=Ul.blur.cfg=Ul.blur.conOpt=Ul.select.cfg=Ul.select.conOpt=null,Ul.isLegacy=!1,P3e(d,t,r,n,c,Ul),O3e(d,t,r,n,c),_6(a,d,t,r,Ul,n,c),Rt(r,"info")&&(Ed(d).info=r.info);for(var u=0;u<kh.length;u++){var h=kh[u];if(h!==ih){var f=y_(r,h),p=j6(r,f,h);WZ(h,d,f,p,Ul)}}return I3e(d,r,n),r.type==="group"&&z3e(a,d,t,r,n),l>=0?i.replaceAt(d,l):i.add(d),d}function YZ(a,e,t){var r=Ed(a),n=e.type,i=e.shape,l=e.style;return t.isUniversalTransitionEnabled()||n!=null&&n!==r.customGraphicType||n==="path"&&H3e(i)&&$Z(i)!==r.customPathData||n==="image"&&Rt(l,"image")&&l.image!==r.customImagePath}function O3e(a,e,t,r,n){var i=t.clipPath;if(i===!1)a&&a.getClipPath()&&a.removeClipPath();else if(i){var l=a.getClipPath();l&&YZ(l,i,r)&&(l=null),l||(l=w6(i),a.setClipPath(l)),_6(null,l,e,i,null,r,n)}}function P3e(a,e,t,r,n,i){if(!(a.isGroup||a.type==="compoundPath")){CB(t,null,i),CB(t,Dd,i);var l=i.normal.conOpt,o=i.emphasis.conOpt,c=i.blur.conOpt,d=i.select.conOpt;if(l!=null||o!=null||d!=null||c!=null){var u=a.getTextContent();if(l===!1)u&&a.removeTextContent();else{l=i.normal.conOpt=l||{type:"text"},u?u.clearStates():(u=w6(l),a.setTextContent(u)),_6(null,u,e,l,null,r,n);for(var h=l&&l.style,f=0;f<kh.length;f++){var p=kh[f];if(p!==ih){var g=i[p].conOpt;WZ(p,u,g,j6(l,g,p),null)}}h?u.dirty():u.markRedraw()}}}}function CB(a,e,t){var r=e?y_(a,e):a,n=e?j6(a,r,Dd):a.style,i=a.type,l=r?r.textConfig:null,o=a.textContent,c=o?e?y_(o,e):o:null;if(n&&(t.isLegacy||BZ(n,i,!!l,!!c))){t.isLegacy=!0;var d=FZ(n,i,!e);!l&&d.textConfig&&(l=d.textConfig),!c&&d.textContent&&(c=d.textContent)}if(!e&&c){var u=c;!u.type&&(u.type="text")}var h=e?t[e]:t.normal;h.cfg=l,h.conOpt=c}function y_(a,e){return e?a?a[e]:null:a}function j6(a,e,t){var r=e&&e.style;return r==null&&t===Dd&&a&&(r=a.styleEmphasis),r}function z3e(a,e,t,r,n){var i=r.children,l=i?i.length:0,o=r.$mergeChildren,c=o==="byName"||r.diffChildrenByName,d=o===!1;if(!(!l&&!c&&!d)){if(c){F3e({api:a,oldChildren:e.children()||[],newChildren:i||[],dataIndex:t,seriesModel:n,group:e});return}d&&e.removeAll();for(var u=0;u<l;u++){var h=i[u],f=e.childAt(u);h?(h.ignore==null&&(h.ignore=!1),N6(a,f,t,h,n,e)):f.ignore=!0}for(var p=e.childCount()-1;p>=u;p--){var g=e.childAt(p);B3e(e,g,n)}}}function B3e(a,e,t){e&&HN(e,Ed(a).option,t)}function F3e(a){new Fd(a.oldChildren,a.newChildren,AB,AB,a).add(TB).update(TB).remove(V3e).execute()}function AB(a,e){var t=a&&a.name;return t??T3e+e}function TB(a,e){var t=this.context,r=a!=null?t.newChildren[a]:null,n=e!=null?t.oldChildren[e]:null;N6(t.api,n,t.dataIndex,r,t.seriesModel,t.group)}function V3e(a){var e=this.context,t=e.oldChildren[a];t&&HN(t,Ed(t).option,e.seriesModel)}function $Z(a){return a&&(a.pathData||a.d)}function H3e(a){return a&&(Rt(a,"pathData")||Rt(a,"d"))}function U3e(a){a.registerChartView(D3e),a.registerSeriesModel(l3e)}var Uf=Ia(),MB=Xt,hC=Tt,S6=(function(){function a(){this._dragging=!1,this.animationThreshold=15}return a.prototype.render=function(e,t,r,n){var i=t.get("value"),l=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=r,!(!n&&this._lastValue===i&&this._lastStatus===l)){this._lastValue=i,this._lastStatus=l;var o=this._group,c=this._handle;if(!l||l==="hide"){o&&o.hide(),c&&c.hide();return}o&&o.show(),c&&c.show();var d={};this.makeElOption(d,i,e,t,r);var u=d.graphicKey;u!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=u;var h=this._moveAnimation=this.determineAnimation(e,t);if(!o)o=this._group=new $t,this.createPointerEl(o,d,e,t),this.createLabelEl(o,d,e,t),r.getZr().add(o);else{var f=ya(EB,t,h);this.updatePointerEl(o,d,f),this.updateLabelEl(o,d,f,t)}IB(o,t,!0),this._renderHandle(i)}},a.prototype.remove=function(e){this.clear(e)},a.prototype.dispose=function(e){this.clear(e)},a.prototype.determineAnimation=function(e,t){var r=t.get("animation"),n=e.axis,i=n.type==="category",l=t.get("snap");if(!l&&!i)return!1;if(r==="auto"||r==null){var o=this.animationThreshold;if(i&&n.getBandWidth()>o)return!0;if(l){var c=YM(e).seriesDataCount,d=n.getExtent();return Math.abs(d[0]-d[1])/c>o}return!1}return r===!0},a.prototype.makeElOption=function(e,t,r,n,i){},a.prototype.createPointerEl=function(e,t,r,n){var i=t.pointer;if(i){var l=Uf(e).pointerEl=new R0[i.type](MB(t.pointer));e.add(l)}},a.prototype.createLabelEl=function(e,t,r,n){if(t.label){var i=Uf(e).labelEl=new tr(MB(t.label));e.add(i),DB(i,n)}},a.prototype.updatePointerEl=function(e,t,r){var n=Uf(e).pointerEl;n&&t.pointer&&(n.setStyle(t.pointer.style),r(n,{shape:t.pointer.shape}))},a.prototype.updateLabelEl=function(e,t,r,n){var i=Uf(e).labelEl;i&&(i.setStyle(t.label.style),r(i,{x:t.label.x,y:t.label.y}),DB(i,n))},a.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,r=this._api.getZr(),n=this._handle,i=t.getModel("handle"),l=t.get("status");if(!i.get("show")||!l||l==="hide"){n&&r.remove(n),this._handle=null;return}var o;this._handle||(o=!0,n=this._handle=Ib(i.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(d){Od(d.event)},onmousedown:hC(this._onHandleDragMove,this,0,0),drift:hC(this._onHandleDragMove,this),ondragend:hC(this._onHandleDragEnd,this)}),r.add(n)),IB(n,t,!1),n.setStyle(i.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var c=i.get("size");lt(c)||(c=[c,c]),n.scaleX=c[0]/2,n.scaleY=c[1]/2,Jx(this,"_doDispatchAxisPointer",i.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,o)}},a.prototype._moveHandleToValue=function(e,t){EB(this._axisPointerModel,!t&&this._moveAnimation,this._handle,fC(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},a.prototype._onHandleDragMove=function(e,t){var r=this._handle;if(r){this._dragging=!0;var n=this.updateHandleTransform(fC(r),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=n,r.stopAnimation(),r.attr(fC(n)),Uf(r).lastProp=null,this._doDispatchAxisPointer()}},a.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},a.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},a.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),r=this._group,n=this._handle;t&&r&&(this._lastGraphicKey=null,r&&t.remove(r),n&&t.remove(n),this._group=null,this._handle=null,this._payloadInfo=null),Zv(this,"_doDispatchAxisPointer")},a.prototype.doClear=function(){},a.prototype.buildLabel=function(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}},a})();function EB(a,e,t,r){qZ(Uf(t).lastProp,r)||(Uf(t).lastProp=r,e?nr(t,r,a):(t.stopAnimation(),t.attr(r)))}function qZ(a,e){if(aa(a)&&aa(e)){var t=!0;return se(e,function(r,n){t=t&&qZ(a[n],r)}),!!t}else return a===e}function DB(a,e){a[e.get(["label","show"])?"show":"hide"]()}function fC(a){return{x:a.x||0,y:a.y||0,rotation:a.rotation||0}}function IB(a,e,t){var r=e.get("z"),n=e.get("zlevel");a&&a.traverse(function(i){i.type!=="group"&&(r!=null&&(i.z=r),n!=null&&(i.zlevel=n),i.silent=t)})}function k6(a){var e=a.get("type"),t=a.getModel(e+"Style"),r;return e==="line"?(r=t.getLineStyle(),r.fill=null):e==="shadow"&&(r=t.getAreaStyle(),r.stroke=null),r}function XZ(a,e,t,r,n){var i=t.get("value"),l=ZZ(i,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),o=t.getModel("label"),c=Rb(o.get("padding")||0),d=o.getFont(),u=dN(l,d),h=n.position,f=u.width+c[1]+c[3],p=u.height+c[0]+c[2],g=n.align;g==="right"&&(h[0]-=f),g==="center"&&(h[0]-=f/2);var b=n.verticalAlign;b==="bottom"&&(h[1]-=p),b==="middle"&&(h[1]-=p/2),G3e(h,f,p,r);var w=o.get("backgroundColor");(!w||w==="auto")&&(w=e.get(["axisLine","lineStyle","color"])),a.label={x:h[0],y:h[1],style:Fr(o,{text:l,font:d,fill:o.getTextColor(),padding:c,backgroundColor:w}),z2:10}}function G3e(a,e,t,r){var n=r.getWidth(),i=r.getHeight();a[0]=Math.min(a[0]+e,n)-e,a[1]=Math.min(a[1]+t,i)-t,a[0]=Math.max(a[0],0),a[1]=Math.max(a[1],0)}function ZZ(a,e,t,r,n){a=e.scale.parse(a);var i=e.scale.getLabel({value:a},{precision:n.precision}),l=n.formatter;if(l){var o={value:t_(e,{value:a}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};se(r,function(c){var d=t.getSeriesByIndex(c.seriesIndex),u=c.dataIndexInside,h=d&&d.getDataParams(u);h&&o.seriesData.push(h)}),At(l)?i=l.replace("{value}",i):Yt(l)&&(i=l(o))}return i}function C6(a,e,t){var r=Li();return Mh(r,r,t.rotation),Ec(r,r,t.position),To([a.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],r)}function KZ(a,e,t,r,n,i){var l=Ts.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=n.get(["label","margin"]),XZ(e,r,n,i,{position:C6(r.axis,a,t),align:l.textAlign,verticalAlign:l.textVerticalAlign})}function A6(a,e,t){return t=t||0,{x1:a[t],y1:a[1-t],x2:e[t],y2:e[1-t]}}function QZ(a,e,t){return t=t||0,{x:a[t],y:a[1-t],width:e[t],height:e[1-t]}}function RB(a,e,t,r,n,i){return{cx:a,cy:e,r0:t,r,startAngle:n,endAngle:i,clockwise:!0}}var W3e=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,n,i,l){var o=n.axis,c=o.grid,d=i.get("type"),u=LB(c,o).getOtherAxis(o).getGlobalExtent(),h=o.toGlobalCoord(o.dataToCoord(r,!0));if(d&&d!=="none"){var f=k6(i),p=Y3e[d](o,h,u);p.style=f,t.graphicKey=p.type,t.pointer=p}var g=u_(c.getRect(),n);KZ(r,t,g,n,i,l)},e.prototype.getHandleTransform=function(t,r,n){var i=u_(r.axis.grid.getRect(),r,{labelInside:!1});i.labelMargin=n.get(["handle","margin"]);var l=C6(r.axis,t,i);return{x:l[0],y:l[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,n,i){var l=n.axis,o=l.grid,c=l.getGlobalExtent(!0),d=LB(o,l).getOtherAxis(l).getGlobalExtent(),u=l.dim==="x"?0:1,h=[t.x,t.y];h[u]+=r[u],h[u]=Math.min(c[1],h[u]),h[u]=Math.max(c[0],h[u]);var f=(d[1]+d[0])/2,p=[f,f];p[u]=h[u];var g=[{verticalAlign:"middle"},{align:"center"}];return{x:h[0],y:h[1],rotation:t.rotation,cursorPoint:p,tooltipOption:g[u]}},e})(S6);function LB(a,e){var t={};return t[e.dim+"AxisIndex"]=e.index,a.getCartesian(t)}var Y3e={line:function(a,e,t){var r=A6([e,t[0]],[e,t[1]],OB(a));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(a,e,t){var r=Math.max(1,a.getBandWidth()),n=t[1]-t[0];return{type:"Rect",shape:QZ([e-r/2,t[0]],[r,n],OB(a))}}};function OB(a){return a.dim==="x"?0:1}var $3e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:Be.color.border,width:1,type:"dashed"},shadowStyle:{color:Be.color.shadowTint},label:{show:!0,formatter:null,precision:"auto",margin:3,color:Be.color.neutral00,padding:[5,7,5,7],backgroundColor:Be.color.accent60,borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:Be.color.accent40,throttle:40}},e})(za),Ad=Ia(),q3e=se;function JZ(a,e,t){if(!Ba.node){var r=e.getZr();Ad(r).records||(Ad(r).records={}),X3e(r,e);var n=Ad(r).records[a]||(Ad(r).records[a]={});n.handler=t}}function X3e(a,e){if(Ad(a).initialized)return;Ad(a).initialized=!0,t("click",ya(PB,"click")),t("mousemove",ya(PB,"mousemove")),t("globalout",K3e);function t(r,n){a.on(r,function(i){var l=Q3e(e);q3e(Ad(a).records,function(o){o&&n(o,i,l.dispatchAction)}),Z3e(l.pendings,e)})}}function Z3e(a,e){var t=a.showTip.length,r=a.hideTip.length,n;t?n=a.showTip[t-1]:r&&(n=a.hideTip[r-1]),n&&(n.dispatchAction=null,e.dispatchAction(n))}function K3e(a,e,t){a.handler("leave",null,t)}function PB(a,e,t,r){e.handler(a,t,r)}function Q3e(a){var e={showTip:[],hideTip:[]},t=function(r){var n=e[r.type];n?n.push(r):(r.dispatchAction=t,a.dispatchAction(r))};return{dispatchAction:t,pendings:e}}function dA(a,e){if(!Ba.node){var t=e.getZr(),r=(Ad(t).records||{})[a];r&&(Ad(t).records[a]=null)}}var J3e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var i=r.getComponent("tooltip"),l=t.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";JZ("axisPointer",n,function(o,c,d){l!=="none"&&(o==="leave"||l.indexOf(o)>=0)&&d({type:"updateAxisPointer",currTrigger:o,x:c&&c.offsetX,y:c&&c.offsetY})})},e.prototype.remove=function(t,r){dA("axisPointer",r)},e.prototype.dispose=function(t,r){dA("axisPointer",r)},e.type="axisPointer",e})(tn);function eK(a,e){var t=[],r=a.seriesIndex,n;if(r==null||!(n=e.getSeriesByIndex(r)))return{point:[]};var i=n.getData(),l=w0(i,a);if(l==null||l<0||lt(l))return{point:[]};var o=i.getItemGraphicEl(l),c=n.coordinateSystem;if(n.getTooltipPosition)t=n.getTooltipPosition(l)||[];else if(c&&c.dataToPoint)if(a.isStacked){var d=c.getBaseAxis(),u=c.getOtherAxis(d),h=u.dim,f=d.dim,p=h==="x"||h==="radius"?1:0,g=i.mapDimension(f),b=[];b[p]=i.get(g,l),b[1-p]=i.get(i.getCalculationInfo("stackResultDimension"),l),t=c.dataToPoint(b)||[]}else t=c.dataToPoint(i.getValues(ct(c.dimensions,function(j){return i.mapDimension(j)}),l))||[];else if(o){var w=o.getBoundingRect().clone();w.applyTransform(o.transform),t=[w.x+w.width/2,w.y+w.height/2]}return{point:t,el:o}}var zB=Ia();function eAe(a,e,t){var r=a.currTrigger,n=[a.x,a.y],i=a,l=a.dispatchAction||Tt(t.dispatchAction,t),o=e.getComponent("axisPointer").coordSysAxesInfo;if(o){Qw(n)&&(n=eK({seriesIndex:i.seriesIndex,dataIndex:i.dataIndex},e).point);var c=Qw(n),d=i.axesInfo,u=o.axesInfo,h=r==="leave"||Qw(n),f={},p={},g={list:[],map:{}},b={showPointer:ya(aAe,p),showTooltip:ya(rAe,g)};se(o.coordSysMap,function(j,k){var T=c||j.containPoint(n);se(o.coordSysAxesInfo[k],function(E,I){var R=E.axis,P=lAe(d,E);if(!h&&T&&(!d||P)){var H=P&&P.value;H==null&&!c&&(H=R.pointToData(n)),H!=null&&BB(E,H,b,!1,f)}})});var w={};return se(u,function(j,k){var T=j.linkGroup;T&&!p[k]&&se(T.axesInfo,function(E,I){var R=p[I];if(E!==j&&R){var P=R.value;T.mapper&&(P=j.axis.scale.parse(T.mapper(P,FB(E),FB(j)))),w[j.key]=P}})}),se(w,function(j,k){BB(u[k],j,b,!0,f)}),nAe(p,u,f),iAe(g,n,a,l),sAe(u,l,t),f}}function BB(a,e,t,r,n){var i=a.axis;if(!(i.scale.isBlank()||!i.containData(e))){if(!a.involveSeries){t.showPointer(a,e);return}var l=tAe(e,a),o=l.payloadBatch,c=l.snapToValue;o[0]&&n.seriesIndex==null&&et(n,o[0]),!r&&a.snap&&i.containData(c)&&c!=null&&(e=c),t.showPointer(a,e,o),t.showTooltip(a,l,c)}}function tAe(a,e){var t=e.axis,r=t.dim,n=a,i=[],l=Number.MAX_VALUE,o=-1;return se(e.seriesModels,function(c,d){var u=c.getData().mapDimensionsAll(r),h,f;if(c.getAxisTooltipData){var p=c.getAxisTooltipData(u,a,t);f=p.dataIndices,h=p.nestestValue}else{if(f=c.indicesOfNearest(r,u[0],a,t.type==="category"?.5:null),!f.length)return;h=c.getData().get(u[0],f[0])}if(!(h==null||!isFinite(h))){var g=a-h,b=Math.abs(g);b<=l&&((b<l||g>=0&&o<0)&&(l=b,o=g,n=h,i.length=0),se(f,function(w){i.push({seriesIndex:c.seriesIndex,dataIndexInside:w,dataIndex:c.getData().getRawIndex(w)})}))}}),{payloadBatch:i,snapToValue:n}}function aAe(a,e,t,r){a[e.key]={value:t,payloadBatch:r}}function rAe(a,e,t,r){var n=t.payloadBatch,i=e.axis,l=i.model,o=e.axisPointerModel;if(!(!e.triggerTooltip||!n.length)){var c=e.coordSys.model,d=ib(c),u=a.map[d];u||(u=a.map[d]={coordSysId:c.id,coordSysIndex:c.componentIndex,coordSysType:c.type,coordSysMainType:c.mainType,dataByAxis:[]},a.list.push(u)),u.dataByAxis.push({axisDim:i.dim,axisIndex:l.componentIndex,axisType:l.type,axisId:l.id,value:r,valueLabelOpt:{precision:o.get(["label","precision"]),formatter:o.get(["label","formatter"])},seriesDataIndices:n.slice()})}}function nAe(a,e,t){var r=t.axesInfo=[];se(e,function(n,i){var l=n.axisPointerModel.option,o=a[i];o?(!n.useHandle&&(l.status="show"),l.value=o.value,l.seriesDataIndices=(o.payloadBatch||[]).slice()):!n.useHandle&&(l.status="hide"),l.status==="show"&&r.push({axisDim:n.axis.dim,axisIndex:n.axis.model.componentIndex,value:l.value})})}function iAe(a,e,t,r){if(Qw(e)||!a.list.length){r({type:"hideTip"});return}var n=((a.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:n.dataIndexInside,dataIndex:n.dataIndex,seriesIndex:n.seriesIndex,dataByCoordSys:a.list})}function sAe(a,e,t){var r=t.getZr(),n="axisPointerLastHighlights",i=zB(r)[n]||{},l=zB(r)[n]={};se(a,function(d,u){var h=d.axisPointerModel.option;h.status==="show"&&d.triggerEmphasis&&se(h.seriesDataIndices,function(f){var p=f.seriesIndex+" | "+f.dataIndex;l[p]=f})});var o=[],c=[];se(i,function(d,u){!l[u]&&c.push(d)}),se(l,function(d,u){!i[u]&&o.push(d)}),c.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:c}),o.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:o})}function lAe(a,e){for(var t=0;t<(a||[]).length;t++){var r=a[t];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function FB(a){var e=a.axis.model,t={},r=t.axisDim=a.axis.dim;return t.axisIndex=t[r+"AxisIndex"]=e.componentIndex,t.axisName=t[r+"AxisName"]=e.name,t.axisId=t[r+"AxisId"]=e.id,t}function Qw(a){return!a||a[0]==null||isNaN(a[0])||a[1]==null||isNaN(a[1])}function Wb(a){B0.registerAxisPointerClass("CartesianAxisPointer",W3e),a.registerComponentModel($3e),a.registerComponentView(J3e),a.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!lt(t)&&(e.axisPointer.link=[t])}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=oje(e,t)}),a.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},eAe)}function oAe(a){Ta(jX),Ta(Wb)}var cAe=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,n,i,l){var o=n.axis;o.dim==="angle"&&(this.animationThreshold=Math.PI/18);var c=o.polar,d=c.getOtherAxis(o),u=d.getExtent(),h=o.dataToCoord(r),f=i.get("type");if(f&&f!=="none"){var p=k6(i),g=uAe[f](o,c,h,u);g.style=p,t.graphicKey=g.type,t.pointer=g}var b=i.get(["label","margin"]),w=dAe(r,n,i,c,b);XZ(t,n,i,l,w)},e})(S6);function dAe(a,e,t,r,n){var i=e.axis,l=i.dataToCoord(a),o=r.getAngleAxis().getExtent()[0];o=o/180*Math.PI;var c=r.getRadiusAxis().getExtent(),d,u,h;if(i.dim==="radius"){var f=Li();Mh(f,f,o),Ec(f,f,[r.cx,r.cy]),d=To([l,-n],f);var p=e.getModel("axisLabel").get("rotate")||0,g=Ts.innerTextLayout(o,p*Math.PI/180,-1);u=g.textAlign,h=g.textVerticalAlign}else{var b=c[1];d=r.coordToPoint([b+n,l]);var w=r.cx,j=r.cy;u=Math.abs(d[0]-w)/b<.3?"center":d[0]>w?"left":"right",h=Math.abs(d[1]-j)/b<.3?"middle":d[1]>j?"top":"bottom"}return{position:d,align:u,verticalAlign:h}}var uAe={line:function(a,e,t,r){return a.dim==="angle"?{type:"Line",shape:A6(e.coordToPoint([r[0],t]),e.coordToPoint([r[1],t]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:t}}},shadow:function(a,e,t,r){var n=Math.max(1,a.getBandWidth()),i=Math.PI/180;return a.dim==="angle"?{type:"Sector",shape:RB(e.cx,e.cy,r[0],r[1],(-t-n/2)*i,(-t+n/2)*i)}:{type:"Sector",shape:RB(e.cx,e.cy,t-n/2,t+n/2,0,Math.PI*2)}}},hAe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.findAxisModel=function(t){var r,n=this.ecModel;return n.eachComponent(t,function(i){i.getCoordSysModel()===this&&(r=i)},this),r},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e})(za),T6=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",wn).models[0]},e.type="polarAxis",e})(za);ei(T6,Bb);var fAe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="angleAxis",e})(T6),pAe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="radiusAxis",e})(T6),M6=(function(a){Ie(e,a);function e(t,r){return a.call(this,"radius",t,r)||this}return e.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)[this.dim==="radius"?0:1]},e})(Fo);M6.prototype.dataToRadius=Fo.prototype.dataToCoord;M6.prototype.radiusToData=Fo.prototype.coordToData;var xAe=Ia(),E6=(function(a){Ie(e,a);function e(t,r){return a.call(this,"angle",t,r||[0,360])||this}return e.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)[this.dim==="radius"?0:1]},e.prototype.calculateCategoryInterval=function(){var t=this,r=t.getLabelModel(),n=t.scale,i=n.getExtent(),l=n.count();if(i[1]-i[0]<1)return 0;var o=i[0],c=t.dataToCoord(o+1)-t.dataToCoord(o),d=Math.abs(c),u=dN(o==null?"":o+"",r.getFont(),"center","top"),h=Math.max(u.height,7),f=h/d;isNaN(f)&&(f=1/0);var p=Math.max(0,Math.floor(f)),g=xAe(t.model),b=g.lastAutoInterval,w=g.lastTickCount;return b!=null&&w!=null&&Math.abs(b-p)<=1&&Math.abs(w-l)<=1&&b>p?p=b:(g.lastTickCount=l,g.lastAutoInterval=p),p},e})(Fo);E6.prototype.dataToAngle=Fo.prototype.dataToCoord;E6.prototype.angleToData=Fo.prototype.coordToData;var tK=["radius","angle"],mAe=(function(){function a(e){this.dimensions=tK,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new M6,this._angleAxis=new E6,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return a.prototype.containPoint=function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},a.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},a.prototype.getAxis=function(e){var t="_"+e+"Axis";return this[t]},a.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},a.prototype.getAxesByScale=function(e){var t=[],r=this._angleAxis,n=this._radiusAxis;return r.scale.type===e&&t.push(r),n.scale.type===e&&t.push(n),t},a.prototype.getAngleAxis=function(){return this._angleAxis},a.prototype.getRadiusAxis=function(){return this._radiusAxis},a.prototype.getOtherAxis=function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},a.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},a.prototype.getTooltipAxes=function(e){var t=e!=null&&e!=="auto"?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},a.prototype.dataToPoint=function(e,t,r){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)],r)},a.prototype.pointToData=function(e,t,r){r=r||[];var n=this.pointToCoord(e);return r[0]=this._radiusAxis.radiusToData(n[0],t),r[1]=this._angleAxis.angleToData(n[1],t),r},a.prototype.pointToCoord=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,n=this.getAngleAxis(),i=n.getExtent(),l=Math.min(i[0],i[1]),o=Math.max(i[0],i[1]);n.inverse?l=o-360:o=l+360;var c=Math.sqrt(t*t+r*r);t/=c,r/=c;for(var d=Math.atan2(-r,t)/Math.PI*180,u=d<l?1:-1;d<l||d>o;)d+=u*360;return[c,d]},a.prototype.coordToPoint=function(e,t){t=t||[];var r=e[0],n=e[1]/180*Math.PI;return t[0]=Math.cos(n)*r+this.cx,t[1]=-Math.sin(n)*r+this.cy,t},a.prototype.getArea=function(){var e=this.getAngleAxis(),t=this.getRadiusAxis(),r=t.getExtent().slice();r[0]>r[1]&&r.reverse();var n=e.getExtent(),i=Math.PI/180,l=1e-4;return{cx:this.cx,cy:this.cy,r0:r[0],r:r[1],startAngle:-n[0]*i,endAngle:-n[1]*i,clockwise:e.inverse,contain:function(o,c){var d=o-this.cx,u=c-this.cy,h=d*d+u*u,f=this.r,p=this.r0;return f!==p&&h-l<=f*f&&h+l>=p*p},x:this.cx-r[1],y:this.cy-r[1],width:r[1]*2,height:r[1]*2}},a.prototype.convertToPixel=function(e,t,r){var n=VB(t);return n===this?this.dataToPoint(r):null},a.prototype.convertFromPixel=function(e,t,r){var n=VB(t);return n===this?this.pointToData(r):null},a})();function VB(a){var e=a.seriesModel,t=a.polarModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function gAe(a,e,t){var r=e.get("center"),n=pi(e,t).refContainer;a.cx=kt(r[0],n.width)+n.x,a.cy=kt(r[1],n.height)+n.y;var i=a.getRadiusAxis(),l=Math.min(n.width,n.height)/2,o=e.get("radius");o==null?o=[0,"100%"]:lt(o)||(o=[0,o]);var c=[kt(o[0],l),kt(o[1],l)];i.inverse?i.setExtent(c[1],c[0]):i.setExtent(c[0],c[1])}function vAe(a,e){var t=this,r=t.getAngleAxis(),n=t.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),n.scale.setExtent(1/0,-1/0),a.eachSeries(function(o){if(o.coordinateSystem===t){var c=o.getData();se(a_(c,"radius"),function(d){n.scale.unionExtentFromData(c,d)}),se(a_(c,"angle"),function(d){r.scale.unionExtentFromData(c,d)})}}),Ix(r.scale,r.model),Ix(n.scale,n.model),r.type==="category"&&!r.onBand){var i=r.getExtent(),l=360/r.scale.count();r.inverse?i[1]+=l:i[1]-=l,r.setExtent(i[0],i[1])}}function bAe(a){return a.mainType==="angleAxis"}function HB(a,e){var t;if(a.type=e.get("type"),a.scale=DN(e),a.onBand=e.get("boundaryGap")&&a.type==="category",a.inverse=e.get("inverse"),bAe(e)){a.inverse=a.inverse!==e.get("clockwise");var r=e.get("startAngle"),n=(t=e.get("endAngle"))!==null&&t!==void 0?t:r+(a.inverse?-360:360);a.setExtent(r,n)}e.axis=a,a.model=e}var yAe={dimensions:tK,create:function(a,e){var t=[];return a.eachComponent("polar",function(r,n){var i=new mAe(n+"");i.update=vAe;var l=i.getRadiusAxis(),o=i.getAngleAxis(),c=r.findAxisModel("radiusAxis"),d=r.findAxisModel("angleAxis");HB(l,c),HB(o,d),gAe(i,r,e),t.push(i),r.coordinateSystem=i,i.model=r}),a.eachSeries(function(r){if(r.get("coordinateSystem")==="polar"){var n=r.getReferringComponents("polar",wn).models[0];r.coordinateSystem=n.coordinateSystem}}),t}},wAe=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function cw(a,e,t){e[1]>e[0]&&(e=e.slice().reverse());var r=a.coordToPoint([e[0],t]),n=a.coordToPoint([e[1],t]);return{x1:r[0],y1:r[1],x2:n[0],y2:n[1]}}function dw(a){var e=a.getRadiusAxis();return e.inverse?0:1}function UB(a){var e=a[0],t=a[a.length-1];e&&t&&Math.abs(Math.abs(e.coord-t.coord)-360)<1e-4&&a.pop()}var _Ae=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,r){if(this.group.removeAll(),!!t.get("show")){var n=t.axis,i=n.polar,l=i.getRadiusAxis().getExtent(),o=n.getTicksCoords({breakTicks:"none"}),c=n.getMinorTicksCoords(),d=ct(n.getViewLabels(),function(u){u=Xt(u);var h=n.scale,f=h.type==="ordinal"?h.getRawOrdinalNumber(u.tickValue):u.tickValue;return u.coord=n.dataToCoord(f),u});UB(d),UB(o),se(wAe,function(u){t.get([u,"show"])&&(!n.scale.isBlank()||u==="axisLine")&&NAe[u](this.group,t,i,o,c,l,d)},this)}},e.type="angleAxis",e})(B0),NAe={axisLine:function(a,e,t,r,n,i){var l=e.getModel(["axisLine","lineStyle"]),o=t.getAngleAxis(),c=Math.PI/180,d=o.getExtent(),u=dw(t),h=u?0:1,f,p=Math.abs(d[1]-d[0])===360?"Circle":"Arc";i[h]===0?f=new R0[p]({shape:{cx:t.cx,cy:t.cy,r:i[u],startAngle:-d[0]*c,endAngle:-d[1]*c,clockwise:o.inverse},style:l.getLineStyle(),z2:1,silent:!0}):f=new Mb({shape:{cx:t.cx,cy:t.cy,r:i[u],r0:i[h]},style:l.getLineStyle(),z2:1,silent:!0}),f.style.fill=null,a.add(f)},axisTick:function(a,e,t,r,n,i){var l=e.getModel("axisTick"),o=(l.get("inside")?-1:1)*l.get("length"),c=i[dw(t)],d=ct(r,function(u){return new qn({shape:cw(t,[c,c+o],u.coord)})});a.add(Ql(d,{style:ta(l.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(a,e,t,r,n,i){if(n.length){for(var l=e.getModel("axisTick"),o=e.getModel("minorTick"),c=(l.get("inside")?-1:1)*o.get("length"),d=i[dw(t)],u=[],h=0;h<n.length;h++)for(var f=0;f<n[h].length;f++)u.push(new qn({shape:cw(t,[d,d+c],n[h][f].coord)}));a.add(Ql(u,{style:ta(o.getModel("lineStyle").getLineStyle(),ta(l.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(a,e,t,r,n,i,l){var o=e.getCategories(!0),c=e.getModel("axisLabel"),d=c.get("margin"),u=e.get("triggerEvent");se(l,function(h,f){var p=c,g=h.tickValue,b=i[dw(t)],w=t.coordToPoint([b+d,h.coord]),j=t.cx,k=t.cy,T=Math.abs(w[0]-j)/b<.3?"center":w[0]>j?"left":"right",E=Math.abs(w[1]-k)/b<.3?"middle":w[1]>k?"top":"bottom";if(o&&o[g]){var I=o[g];aa(I)&&I.textStyle&&(p=new Fa(I.textStyle,c,c.ecModel))}var R=new tr({silent:Ts.isLabelSilent(e),style:Fr(p,{x:w[0],y:w[1],fill:p.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:h.formattedLabel,align:T,verticalAlign:E})});if(a.add(R),Yd({el:R,componentModel:e,itemName:h.formattedLabel,formatterParamsExtra:{isTruncated:function(){return R.isTruncated},value:h.rawLabel,tickIndex:f}}),u){var P=Ts.makeAxisEventDataBase(e);P.targetType="axisLabel",P.value=h.rawLabel,la(R).eventData=P}},this)},splitLine:function(a,e,t,r,n,i){var l=e.getModel("splitLine"),o=l.getModel("lineStyle"),c=o.get("color"),d=0;c=c instanceof Array?c:[c];for(var u=[],h=0;h<r.length;h++){var f=d++%c.length;u[f]=u[f]||[],u[f].push(new qn({shape:cw(t,i,r[h].coord)}))}for(var h=0;h<u.length;h++)a.add(Ql(u[h],{style:ta({stroke:c[h%c.length]},o.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(a,e,t,r,n,i){if(n.length){for(var l=e.getModel("minorSplitLine"),o=l.getModel("lineStyle"),c=[],d=0;d<n.length;d++)for(var u=0;u<n[d].length;u++)c.push(new qn({shape:cw(t,i,n[d][u].coord)}));a.add(Ql(c,{style:o.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(a,e,t,r,n,i){if(r.length){var l=e.getModel("splitArea"),o=l.getModel("areaStyle"),c=o.get("color"),d=0;c=c instanceof Array?c:[c];for(var u=[],h=Math.PI/180,f=-r[0].coord*h,p=Math.min(i[0],i[1]),g=Math.max(i[0],i[1]),b=e.get("clockwise"),w=1,j=r.length;w<=j;w++){var k=w===j?r[0].coord:r[w].coord,T=d++%c.length;u[T]=u[T]||[],u[T].push(new hs({shape:{cx:t.cx,cy:t.cy,r0:p,r:g,startAngle:f,endAngle:-k*h,clockwise:b},silent:!0})),f=-k*h}for(var w=0;w<u.length;w++)a.add(Ql(u[w],{style:ta({fill:c[w%c.length]},o.getAreaStyle()),silent:!0}))}}},jAe=["splitLine","splitArea","minorSplitLine"],SAe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,r,n){if(this.group.removeAll(),!!t.get("show")){var i=this._axisGroup,l=this._axisGroup=new $t;this.group.add(l);var o=t.axis,c=o.polar,d=c.getAngleAxis(),u=o.getTicksCoords(),h=o.getMinorTicksCoords(),f=d.getExtent()[0],p=o.getExtent(),g=CAe(c,t,f),b=new Ts(t,n,g);b.build(),l.add(b.group),Db(i,l,t),se(jAe,function(w){t.get([w,"show"])&&!o.scale.isBlank()&&kAe[w](this.group,t,c,f,p,u,h)},this)}},e.type="radiusAxis",e})(B0),kAe={splitLine:function(a,e,t,r,n,i){var l=e.getModel("splitLine"),o=l.getModel("lineStyle"),c=o.get("color"),d=0,u=t.getAngleAxis(),h=Math.PI/180,f=u.getExtent(),p=Math.abs(f[1]-f[0])===360?"Circle":"Arc";c=c instanceof Array?c:[c];for(var g=[],b=0;b<i.length;b++){var w=d++%c.length;g[w]=g[w]||[],g[w].push(new R0[p]({shape:{cx:t.cx,cy:t.cy,r:Math.max(i[b].coord,0),startAngle:-f[0]*h,endAngle:-f[1]*h,clockwise:u.inverse}}))}for(var b=0;b<g.length;b++)a.add(Ql(g[b],{style:ta({stroke:c[b%c.length],fill:null},o.getLineStyle()),silent:!0}))},minorSplitLine:function(a,e,t,r,n,i,l){if(l.length){for(var o=e.getModel("minorSplitLine"),c=o.getModel("lineStyle"),d=[],u=0;u<l.length;u++)for(var h=0;h<l[u].length;h++)d.push(new Wd({shape:{cx:t.cx,cy:t.cy,r:l[u][h].coord}}));a.add(Ql(d,{style:ta({fill:null},c.getLineStyle()),silent:!0}))}},splitArea:function(a,e,t,r,n,i){if(i.length){var l=e.getModel("splitArea"),o=l.getModel("areaStyle"),c=o.get("color"),d=0;c=c instanceof Array?c:[c];for(var u=[],h=i[0].coord,f=1;f<i.length;f++){var p=d++%c.length;u[p]=u[p]||[],u[p].push(new hs({shape:{cx:t.cx,cy:t.cy,r0:h,r:i[f].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),h=i[f].coord}for(var f=0;f<u.length;f++)a.add(Ql(u[f],{style:ta({fill:c[f%c.length]},o.getAreaStyle()),silent:!0}))}}};function CAe(a,e,t){return{position:[a.cx,a.cy],rotation:t/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}function aK(a){return a.get("stack")||"__ec_stack_"+a.seriesIndex}function rK(a,e){return e.dim+a.model.componentIndex}function AAe(a,e,t){var r={},n=TAe(pr(e.getSeriesByType(a),function(i){return!e.isSeriesFiltered(i)&&i.coordinateSystem&&i.coordinateSystem.type==="polar"}));e.eachSeriesByType(a,function(i){if(i.coordinateSystem.type==="polar"){var l=i.getData(),o=i.coordinateSystem,c=o.getBaseAxis(),d=rK(o,c),u=aK(i),h=n[d][u],f=h.offset,p=h.width,g=o.getOtherAxis(c),b=i.coordinateSystem.cx,w=i.coordinateSystem.cy,j=i.get("barMinHeight")||0,k=i.get("barMinAngle")||0;r[u]=r[u]||[];for(var T=l.mapDimension(g.dim),E=l.mapDimension(c.dim),I=_h(l,T),R=c.dim!=="radius"||!i.get("roundCap",!0),P=g.model,H=P.get("startValue"),G=g.dataToCoord(H||0),X=0,U=l.count();X<U;X++){var te=l.get(T,X),Z=l.get(E,X),J=te>=0?"p":"n",B=G;I&&(r[u][Z]||(r[u][Z]={p:G,n:G}),B=r[u][Z][J]);var W=void 0,$=void 0,Q=void 0,ne=void 0;if(g.dim==="radius"){var re=g.dataToCoord(te)-G,K=c.dataToCoord(Z);Math.abs(re)<j&&(re=(re<0?-1:1)*j),W=B,$=B+re,Q=K-f,ne=Q-p,I&&(r[u][Z][J]=$)}else{var ae=g.dataToCoord(te,R)-G,ce=c.dataToCoord(Z);Math.abs(ae)<k&&(ae=(ae<0?-1:1)*k),W=ce+f,$=W+p,Q=B,ne=B+ae,I&&(r[u][Z][J]=ne)}l.setItemLayout(X,{cx:b,cy:w,r0:W,r:$,startAngle:-Q*Math.PI/180,endAngle:-ne*Math.PI/180,clockwise:Q>=ne})}}})}function TAe(a){var e={};se(a,function(r,n){var i=r.getData(),l=r.coordinateSystem,o=l.getBaseAxis(),c=rK(l,o),d=o.getExtent(),u=o.type==="category"?o.getBandWidth():Math.abs(d[1]-d[0])/i.count(),h=e[c]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},f=h.stacks;e[c]=h;var p=aK(r);f[p]||h.autoWidthCount++,f[p]=f[p]||{width:0,maxWidth:0};var g=kt(r.get("barWidth"),u),b=kt(r.get("barMaxWidth"),u),w=r.get("barGap"),j=r.get("barCategoryGap");g&&!f[p].width&&(g=Math.min(h.remainedWidth,g),f[p].width=g,h.remainedWidth-=g),b&&(f[p].maxWidth=b),w!=null&&(h.gap=w),j!=null&&(h.categoryGap=j)});var t={};return se(e,function(r,n){t[n]={};var i=r.stacks,l=r.bandWidth,o=kt(r.categoryGap,l),c=kt(r.gap,1),d=r.remainedWidth,u=r.autoWidthCount,h=(d-o)/(u+(u-1)*c);h=Math.max(h,0),se(i,function(b,w){var j=b.maxWidth;j&&j<h&&(j=Math.min(j,d),b.width&&(j=Math.min(j,b.width)),d-=j,b.width=j,u--)}),h=(d-o)/(u+(u-1)*c),h=Math.max(h,0);var f=0,p;se(i,function(b,w){b.width||(b.width=h),p=b,f+=b.width*(1+c)}),p&&(f-=p.width*c);var g=-f/2;se(i,function(b,w){t[n][w]=t[n][w]||{offset:g,width:b.width},g+=b.width*(1+c)})}),t}var MAe={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},EAe={splitNumber:5},DAe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="polar",e})(tn);function IAe(a){Ta(Wb),B0.registerAxisPointerClass("PolarAxisPointer",cAe),a.registerCoordinateSystem("polar",yAe),a.registerComponentModel(hAe),a.registerComponentView(DAe),Ox(a,"angle",fAe,MAe),Ox(a,"radius",pAe,EAe),a.registerComponentView(_Ae),a.registerComponentView(SAe),a.registerLayout(ya(AAe,"bar"))}function uA(a,e){e=e||{};var t=a.coordinateSystem,r=a.axis,n={},i=r.position,l=r.orient,o=t.getRect(),c=[o.x,o.x+o.width,o.y,o.y+o.height],d={horizontal:{top:c[2],bottom:c[3]},vertical:{left:c[0],right:c[1]}};n.position=[l==="vertical"?d.vertical[i]:c[0],l==="horizontal"?d.horizontal[i]:c[3]];var u={horizontal:0,vertical:1};n.rotation=Math.PI/2*u[l];var h={top:-1,bottom:1,right:1,left:-1};n.labelDirection=n.tickDirection=n.nameDirection=h[i],a.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),$i(e.labelInside,a.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var f=a.get(["axisLabel","rotate"]);return n.labelRotate=i==="top"?-f:f,n.z2=1,n}var RAe=["splitArea","splitLine","breakArea"],LAe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="SingleAxisPointer",t}return e.prototype.render=function(t,r,n,i){var l=this.group;l.removeAll();var o=this._axisGroup;this._axisGroup=new $t;var c=uA(t),d=new Ts(t,n,c);d.build(),l.add(this._axisGroup),l.add(d.group),se(RAe,function(u){t.get([u,"show"])&&OAe[u](this,this.group,this._axisGroup,t,n)},this),Db(o,this._axisGroup,t),a.prototype.render.call(this,t,r,n,i)},e.prototype.remove=function(){wX(this)},e.type="singleAxis",e})(B0),OAe={splitLine:function(a,e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var l=r.getModel("splitLine"),o=l.getModel("lineStyle"),c=o.get("color");c=c instanceof Array?c:[c];for(var d=o.get("width"),u=r.coordinateSystem.getRect(),h=i.isHorizontal(),f=[],p=0,g=i.getTicksCoords({tickModel:l,breakTicks:"none",pruneByBreak:"preserve_extent_bound"}),b=[],w=[],j=0;j<g.length;++j){var k=i.toGlobalCoord(g[j].coord);h?(b[0]=k,b[1]=u.y,w[0]=k,w[1]=u.y+u.height):(b[0]=u.x,b[1]=k,w[0]=u.x+u.width,w[1]=k);var T=new qn({shape:{x1:b[0],y1:b[1],x2:w[0],y2:w[1]},silent:!0});Tx(T.shape,d);var E=p++%c.length;f[E]=f[E]||[],f[E].push(T)}for(var I=o.getLineStyle(["color"]),j=0;j<f.length;++j)e.add(Ql(f[j],{style:ta({stroke:c[j%c.length]},I),silent:!0}))}},splitArea:function(a,e,t,r,n){yX(a,t,r,r)},breakArea:function(a,e,t,r,n){var i=Gb(),l=r.axis.scale;i&&l.type!=="ordinal"&&i.rectCoordBuildBreakAxis(e,a,r,r.coordinateSystem.getRect(),n)}},Jw=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}},jitter:0,jitterOverlap:!0,jitterMargin:2},e})(za);ei(Jw,Bb.prototype);var PAe=(function(a){Ie(e,a);function e(t,r,n,i,l){var o=a.call(this,t,r,n)||this;return o.type=i||"value",o.position=l||"bottom",o}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.pointToData=function(t,r){return this.coordinateSystem.pointToData(t)[0]},e})(Fo),nK=["single"],zAe=(function(){function a(e,t,r){this.type="single",this.dimension="single",this.dimensions=nK,this.axisPointerEnabled=!0,this.model=e,this._init(e,t,r)}return a.prototype._init=function(e,t,r){var n=this.dimension,i=new PAe(n,DN(e),[0,0],e.get("type"),e.get("position")),l=i.type==="category";i.onBand=l&&e.get("boundaryGap"),i.inverse=e.get("inverse"),i.orient=e.get("orient"),e.axis=i,i.model=e,i.coordinateSystem=this,this._axis=i},a.prototype.update=function(e,t){e.eachSeries(function(r){if(r.coordinateSystem===this){var n=r.getData();se(n.mapDimensionsAll(this.dimension),function(i){this._axis.scale.unionExtentFromData(n,i)},this),Ix(this._axis.scale,this._axis.model)}},this)},a.prototype.resize=function(e,t){var r=pi(e,t).refContainer;this._rect=cn(e.getBoxLayoutParams(),r),this._adjustAxis()},a.prototype.getRect=function(){return this._rect},a.prototype._adjustAxis=function(){var e=this._rect,t=this._axis,r=t.isHorizontal(),n=r?[0,e.width]:[0,e.height],i=t.inverse?1:0;t.setExtent(n[i],n[1-i]),this._updateAxisTransform(t,r?e.x:e.y)},a.prototype._updateAxisTransform=function(e,t){var r=e.getExtent(),n=r[0]+r[1],i=e.isHorizontal();e.toGlobalCoord=i?function(l){return l+t}:function(l){return n-l+t},e.toLocalCoord=i?function(l){return l-t}:function(l){return n-l+t}},a.prototype.getAxis=function(){return this._axis},a.prototype.getBaseAxis=function(){return this._axis},a.prototype.getAxes=function(){return[this._axis]},a.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},a.prototype.containPoint=function(e){var t=this.getRect(),r=this.getAxis(),n=r.orient;return n==="horizontal"?r.contain(r.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:r.contain(r.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},a.prototype.pointToData=function(e,t,r){r=r||[];var n=this.getAxis();return r[0]=n.coordToData(n.toLocalCoord(e[n.orient==="horizontal"?0:1])),r},a.prototype.dataToPoint=function(e,t,r){var n=this.getAxis(),i=this.getRect();r=r||[];var l=n.orient==="horizontal"?0:1;return e instanceof Array&&(e=e[0]),r[l]=n.toGlobalCoord(n.dataToCoord(+e)),r[1-l]=l===0?i.y+i.height/2:i.x+i.width/2,r},a.prototype.convertToPixel=function(e,t,r){var n=GB(t);return n===this?this.dataToPoint(r):null},a.prototype.convertFromPixel=function(e,t,r){var n=GB(t);return n===this?this.pointToData(r):null},a})();function GB(a){var e=a.seriesModel,t=a.singleAxisModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function BAe(a,e){var t=[];return a.eachComponent("singleAxis",function(r,n){var i=new zAe(r,a,e);i.name="single_"+n,i.resize(r,e),r.coordinateSystem=i,t.push(i)}),a.eachSeries(function(r){if(r.get("coordinateSystem")==="singleAxis"){var n=r.getReferringComponents("singleAxis",wn).models[0];r.coordinateSystem=n&&n.coordinateSystem}}),t}var FAe={create:BAe,dimensions:nK},WB=["x","y"],VAe=["width","height"],HAe=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,n,i,l){var o=n.axis,c=o.coordinateSystem,d=pC(c,1-w_(o)),u=c.dataToPoint(r)[0],h=i.get("type");if(h&&h!=="none"){var f=k6(i),p=UAe[h](o,u,d);p.style=f,t.graphicKey=p.type,t.pointer=p}var g=uA(n);KZ(r,t,g,n,i,l)},e.prototype.getHandleTransform=function(t,r,n){var i=uA(r,{labelInside:!1});i.labelMargin=n.get(["handle","margin"]);var l=C6(r.axis,t,i);return{x:l[0],y:l[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,n,i){var l=n.axis,o=l.coordinateSystem,c=w_(l),d=pC(o,c),u=[t.x,t.y];u[c]+=r[c],u[c]=Math.min(d[1],u[c]),u[c]=Math.max(d[0],u[c]);var h=pC(o,1-c),f=(h[1]+h[0])/2,p=[f,f];return p[c]=u[c],{x:u[0],y:u[1],rotation:t.rotation,cursorPoint:p,tooltipOption:{verticalAlign:"middle"}}},e})(S6),UAe={line:function(a,e,t){var r=A6([e,t[0]],[e,t[1]],w_(a));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(a,e,t){var r=a.getBandWidth(),n=t[1]-t[0];return{type:"Rect",shape:QZ([e-r/2,t[0]],[r,n],w_(a))}}};function w_(a){return a.isHorizontal()?0:1}function pC(a,e){var t=a.getRect();return[t[WB[e]],t[WB[e]]+t[VAe[e]]]}var GAe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="single",e})(tn);function WAe(a){Ta(Wb),B0.registerAxisPointerClass("SingleAxisPointer",HAe),a.registerComponentView(GAe),a.registerComponentView(LAe),a.registerComponentModel(Jw),Ox(a,"single",Jw,Jw.defaultOption),a.registerCoordinateSystem("single",FAe)}var YAe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r,n){var i=L0(t);a.prototype.init.apply(this,arguments),YB(t,i)},e.prototype.mergeOption=function(t){a.prototype.mergeOption.apply(this,arguments),YB(this.option,t)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.layoutMode="box",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:Be.color.axisLine,width:1,type:"solid"}},itemStyle:{color:Be.color.neutral00,borderWidth:1,borderColor:Be.color.neutral10},dayLabel:{show:!0,firstDay:0,position:"start",margin:Be.size.s,color:Be.color.secondary},monthLabel:{show:!0,position:"start",margin:Be.size.s,align:"center",formatter:null,color:Be.color.secondary},yearLabel:{show:!0,position:null,margin:Be.size.xl,formatter:null,color:Be.color.quaternary,fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e})(za);function YB(a,e){var t=a.cellSize,r;lt(t)?r=t:r=a.cellSize=[t,t],r.length===1&&(r[1]=r[0]);var n=ct([0,1],function(i){return Dbe(e,i)&&(r[i]="auto"),r[i]!=null&&r[i]!=="auto"});Rc(a,e,{type:"box",ignoreSize:n})}var $Ae=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var i=this.group;i.removeAll();var l=t.coordinateSystem,o=l.getRangeInfo(),c=l.getOrient(),d=r.getLocaleModel();this._renderDayRect(t,o,i),this._renderLines(t,o,c,i),this._renderYearText(t,o,c,i),this._renderMonthText(t,d,c,i),this._renderWeekText(t,d,o,c,i)},e.prototype._renderDayRect=function(t,r,n){for(var i=t.coordinateSystem,l=t.getModel("itemStyle").getItemStyle(),o=i.getCellWidth(),c=i.getCellHeight(),d=r.start.time;d<=r.end.time;d=i.getNextNDay(d,1).time){var u=i.dataToCalendarLayout([d],!1).tl,h=new Ea({shape:{x:u[0],y:u[1],width:o,height:c},cursor:"default",style:l});n.add(h)}},e.prototype._renderLines=function(t,r,n,i){var l=this,o=t.coordinateSystem,c=t.getModel(["splitLine","lineStyle"]).getLineStyle(),d=t.get(["splitLine","show"]),u=c.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var h=r.start,f=0;h.time<=r.end.time;f++){g(h.formatedDate),f===0&&(h=o.getDateInfo(r.start.y+"-"+r.start.m));var p=h.date;p.setMonth(p.getMonth()+1),h=o.getDateInfo(p)}g(o.getNextNDay(r.end.time,1).formatedDate);function g(b){l._firstDayOfMonth.push(o.getDateInfo(b)),l._firstDayPoints.push(o.dataToCalendarLayout([b],!1).tl);var w=l._getLinePointsOfOneWeek(t,b,n);l._tlpoints.push(w[0]),l._blpoints.push(w[w.length-1]),d&&l._drawSplitline(w,c,i)}d&&this._drawSplitline(l._getEdgesPoints(l._tlpoints,u,n),c,i),d&&this._drawSplitline(l._getEdgesPoints(l._blpoints,u,n),c,i)},e.prototype._getEdgesPoints=function(t,r,n){var i=[t[0].slice(),t[t.length-1].slice()],l=n==="horizontal"?0:1;return i[0][l]=i[0][l]-r/2,i[1][l]=i[1][l]+r/2,i},e.prototype._drawSplitline=function(t,r,n){var i=new Xi({z2:20,shape:{points:t},style:r});n.add(i)},e.prototype._getLinePointsOfOneWeek=function(t,r,n){for(var i=t.coordinateSystem,l=i.getDateInfo(r),o=[],c=0;c<7;c++){var d=i.getNextNDay(l.time,c),u=i.dataToCalendarLayout([d.time],!1);o[2*d.day]=u.tl,o[2*d.day+1]=u[n==="horizontal"?"bl":"tr"]}return o},e.prototype._formatterLabel=function(t,r){return At(t)&&t?kbe(t,r):Yt(t)?t(r):r.nameMap},e.prototype._yearTextPositionControl=function(t,r,n,i,l){var o=r[0],c=r[1],d=["center","bottom"];i==="bottom"?(c+=l,d=["center","top"]):i==="left"?o-=l:i==="right"?(o+=l,d=["center","top"]):c-=l;var u=0;return(i==="left"||i==="right")&&(u=Math.PI/2),{rotation:u,x:o,y:c,style:{align:d[0],verticalAlign:d[1]}}},e.prototype._renderYearText=function(t,r,n,i){var l=t.getModel("yearLabel");if(l.get("show")){var o=l.get("margin"),c=l.get("position");c||(c=n!=="horizontal"?"top":"left");var d=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],u=(d[0][0]+d[1][0])/2,h=(d[0][1]+d[1][1])/2,f=n==="horizontal"?0:1,p={top:[u,d[f][1]],bottom:[u,d[1-f][1]],left:[d[1-f][0],h],right:[d[f][0],h]},g=r.start.y;+r.end.y>+r.start.y&&(g=g+"-"+r.end.y);var b=l.get("formatter"),w={start:r.start.y,end:r.end.y,nameMap:g},j=this._formatterLabel(b,w),k=new tr({z2:30,style:Fr(l,{text:j}),silent:l.get("silent")});k.attr(this._yearTextPositionControl(k,p[c],n,c,o)),i.add(k)}},e.prototype._monthTextPositionControl=function(t,r,n,i,l){var o="left",c="top",d=t[0],u=t[1];return n==="horizontal"?(u=u+l,r&&(o="center"),i==="start"&&(c="bottom")):(d=d+l,r&&(c="middle"),i==="start"&&(o="right")),{x:d,y:u,align:o,verticalAlign:c}},e.prototype._renderMonthText=function(t,r,n,i){var l=t.getModel("monthLabel");if(l.get("show")){var o=l.get("nameMap"),c=l.get("margin"),d=l.get("position"),u=l.get("align"),h=[this._tlpoints,this._blpoints];(!o||At(o))&&(o&&(r=s3(o)||r),o=r.get(["time","monthAbbr"])||[]);var f=d==="start"?0:1,p=n==="horizontal"?0:1;c=d==="start"?-c:c;for(var g=u==="center",b=l.get("silent"),w=0;w<h[f].length-1;w++){var j=h[f][w].slice(),k=this._firstDayOfMonth[w];if(g){var T=this._firstDayPoints[w];j[p]=(T[p]+h[0][w+1][p])/2}var E=l.get("formatter"),I=o[+k.m-1],R={yyyy:k.y,yy:(k.y+"").slice(2),MM:k.m,M:+k.m,nameMap:I},P=this._formatterLabel(E,R),H=new tr({z2:30,style:et(Fr(l,{text:P}),this._monthTextPositionControl(j,g,n,d,c)),silent:b});i.add(H)}}},e.prototype._weekTextPositionControl=function(t,r,n,i,l){var o="center",c="middle",d=t[0],u=t[1],h=n==="start";return r==="horizontal"?(d=d+i+(h?1:-1)*l[0]/2,o=h?"right":"left"):(u=u+i+(h?1:-1)*l[1]/2,c=h?"bottom":"top"),{x:d,y:u,align:o,verticalAlign:c}},e.prototype._renderWeekText=function(t,r,n,i,l){var o=t.getModel("dayLabel");if(o.get("show")){var c=t.coordinateSystem,d=o.get("position"),u=o.get("nameMap"),h=o.get("margin"),f=c.getFirstDayOfWeek();if(!u||At(u)){u&&(r=s3(u)||r);var p=r.get(["time","dayOfWeekShort"]);u=p||ct(r.get(["time","dayOfWeekAbbr"]),function(R){return R[0]})}var g=c.getNextNDay(n.end.time,7-n.lweek).time,b=[c.getCellWidth(),c.getCellHeight()];h=kt(h,Math.min(b[1],b[0])),d==="start"&&(g=c.getNextNDay(n.start.time,-(7+n.fweek)).time,h=-h);for(var w=o.get("silent"),j=0;j<7;j++){var k=c.getNextNDay(g,j),T=c.dataToCalendarLayout([k.time],!1).center,E=j;E=Math.abs((j+f)%7);var I=new tr({z2:30,style:et(Fr(o,{text:u[E]}),this._weekTextPositionControl(T,i,d,h,b)),silent:w});l.add(I)}}},e.type="calendar",e})(tn),xC=864e5,qAe=(function(){function a(e,t,r){this.type="calendar",this.dimensions=a.dimensions,this.getDimensionsInfo=a.getDimensionsInfo,this._model=e,this._update(t,r)}return a.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},a.prototype.getRangeInfo=function(){return this._rangeInfo},a.prototype.getModel=function(){return this._model},a.prototype.getRect=function(){return this._rect},a.prototype.getCellWidth=function(){return this._sw},a.prototype.getCellHeight=function(){return this._sh},a.prototype.getOrient=function(){return this._orient},a.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},a.prototype.getDateInfo=function(e){e=I0(e);var t=e.getFullYear(),r=e.getMonth()+1,n=r<10?"0"+r:""+r,i=e.getDate(),l=i<10?"0"+i:""+i,o=e.getDay();return o=Math.abs((o+7-this.getFirstDayOfWeek())%7),{y:t+"",m:n,d:l,day:o,time:e.getTime(),formatedDate:t+"-"+n+"-"+l,date:e}},a.prototype.getNextNDay=function(e,t){return t=t||0,t===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+t),this.getDateInfo(e))},a.prototype._update=function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,n=["width","height"],i=this._model.getCellSize().slice(),l=this._model.getBoxLayoutParams(),o=this._orient==="horizontal"?[r,7]:[7,r];se([0,1],function(h){u(i,h)&&(l[n[h]]=i[h]*o[h])});var c={width:t.getWidth(),height:t.getHeight()},d=this._rect=cn(l,c);se([0,1],function(h){u(i,h)||(i[h]=d[n[h]]/o[h])});function u(h,f){return h[f]!=null&&h[f]!=="auto"}this._sw=i[0],this._sh=i[1]},a.prototype.dataToPoint=function(e,t,r){r=r||[],lt(e)&&(e=e[0]),t==null&&(t=!0);var n=this.getDateInfo(e),i=this._rangeInfo,l=n.formatedDate;if(t&&!(n.time>=i.start.time&&n.time<i.end.time+xC))return r[0]=r[1]=NaN,r;var o=n.day,c=this._getRangeInfo([i.start.time,l]).nthWeek;return this._orient==="vertical"?(r[0]=this._rect.x+o*this._sw+this._sw/2,r[1]=this._rect.y+c*this._sh+this._sh/2):(r[0]=this._rect.x+c*this._sw+this._sw/2,r[1]=this._rect.y+o*this._sh+this._sh/2),r},a.prototype.pointToData=function(e){var t=this.pointToDate(e);return t&&t.time},a.prototype.dataToLayout=function(e,t,r){r=r||{};var n=r.rect=r.rect||{},i=r.contentRect=r.contentRect||{},l=this.dataToPoint(e,t);return n.x=l[0]-this._sw/2,n.y=l[1]-this._sh/2,n.width=this._sw,n.height=this._sh,ra.copy(i,n),j0(i,this._lineWidth/2,!0,!0),r},a.prototype.dataToCalendarLayout=function(e,t){var r=this.dataToPoint(e,t);return{center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},a.prototype.pointToDate=function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,r=Math.floor((e[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(r,t-1,n):this._getDateByWeeksAndDay(t,r-1,n)},a.prototype.convertToPixel=function(e,t,r){var n=mC(t);return n===this?n.dataToPoint(r):null},a.prototype.convertToLayout=function(e,t,r){var n=mC(t);return n===this?n.dataToLayout(r):null},a.prototype.convertFromPixel=function(e,t,r){var n=mC(t);return n===this?n.pointToData(r):null},a.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},a.prototype._initRangeOption=function(){var e=this._model.get("range"),t;if(lt(e)&&e.length===1&&(e=e[0]),lt(e))t=e;else{var r=e.toString();if(/^\d{4}$/.test(r)&&(t=[r+"-01-01",r+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(r)){var n=this.getDateInfo(r),i=n.date;i.setMonth(i.getMonth()+1);var l=this.getNextNDay(i,-1);t=[n.formatedDate,l.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(r)&&(t=[r,r])}if(!t)return e;var o=this._getRangeInfo(t);return o.start.time>o.end.time&&t.reverse(),t},a.prototype._getRangeInfo=function(e){var t=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],r;t[0].time>t[1].time&&(r=!0,t.reverse());var n=Math.floor(t[1].time/xC)-Math.floor(t[0].time/xC)+1,i=new Date(t[0].time),l=i.getDate(),o=t[1].date.getDate();i.setDate(l+n-1);var c=i.getDate();if(c!==o)for(var d=i.getTime()-t[1].time>0?1:-1;(c=i.getDate())!==o&&(i.getTime()-t[1].time)*d>0;)n-=d,i.setDate(c-d);var u=Math.floor((n+t[0].day+6)/7),h=r?-u+1:u-1;return r&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:n,weeks:u,nthWeek:h,fweek:t[0].day,lweek:t[1].day}},a.prototype._getDateByWeeksAndDay=function(e,t,r){var n=this._getRangeInfo(r);if(e>n.weeks||e===0&&t<n.fweek||e===n.weeks&&t>n.lweek)return null;var i=(e-1)*7-n.fweek+t,l=new Date(n.start.time);return l.setDate(+n.start.d+i),this.getDateInfo(l)},a.create=function(e,t){var r=[];return e.eachComponent("calendar",function(n){var i=new a(n,e,t);r.push(i),n.coordinateSystem=i}),e.eachComponent(function(n,i){Ob({targetModel:i,coordSysType:"calendar",coordSysProvider:jY})}),r},a.dimensions=["time","value"],a})();function mC(a){var e=a.calendarModel,t=a.seriesModel,r=e?e.coordinateSystem:t?t.coordinateSystem:null;return r}function XAe(a){a.registerComponentModel(YAe),a.registerComponentView($Ae),a.registerCoordinateSystem("calendar",qAe)}var Nd={level:1,leaf:2,nonLeaf:3},Id={none:0,all:1,body:2,corner:3};function hA(a,e,t){var r=e[fa[t]].getCell(a);return!r&&Ka(a)&&a<0&&(r=e[fa[1-t]].getUnitLayoutInfo(t,Math.round(a))),r}function iK(a){var e=a||[];return e[0]=e[0]||[],e[1]=e[1]||[],e[0][0]=e[0][1]=e[1][0]=e[1][1]=NaN,e}function sK(a,e,t,r,n){$B(a[0],e,n,t,r,0),$B(a[1],e,n,t,r,1)}function $B(a,e,t,r,n,i){a[0]=1/0,a[1]=-1/0;var l=r[i],o=lt(l)?l:[l],c=o.length,d=!!t;if(c>=1?(qB(a,e,o,d,n,i,0),c>1&&qB(a,e,o,d,n,i,c-1)):a[0]=a[1]=NaN,d){var u=-n[fa[1-i]].getLocatorCount(i),h=n[fa[i]].getLocatorCount(i)-1;t===Id.body?u=zn(0,u):t===Id.corner&&(h=Sl(-1,h)),h<u&&(u=h=NaN),os(a[0])&&(a[0]=u),os(a[1])&&(a[1]=h),a[0]=zn(Sl(a[0],h),u),a[1]=zn(Sl(a[1],h),u)}}function qB(a,e,t,r,n,i,l){var o=hA(t[l],n,i);if(!o){a[0]=a[1]=NaN;return}var c=o.id[fa[i]],d=c,u=JAe(o);u&&(d+=u.span[fa[i]]-1),a[0]=Sl(a[0],c,d),a[1]=zn(a[1],c,d)}function uw(a,e){return os(a[e][0])||os(a[e][1])}function XB(a,e,t,r){e=e||ZAe;for(var n=0;n<r;n++)e[n]=!1;for(;;){for(var i=!1,n=0;n<r;n++){var l=t[n];!e[n]&&l.cellMergeOwner&&KAe(a,l.locatorRange)&&(e[n]=!0,i=!0)}if(!i)break}}var ZAe=[];function KAe(a,e){return!ZB(a[0],e[0])||!ZB(a[1],e[1])?!1:(a[0][0]=Sl(a[0][0],e[0][0]),a[0][1]=zn(a[0][1],e[0][1]),a[1][0]=Sl(a[1][0],e[1][0]),a[1][1]=zn(a[1][1],e[1][1]),!0)}function ZB(a,e){return a[1]>=e[0]&&a[0]<=e[1]}function KB(a,e){a.id.set(e[0][0],e[1][0]),a.span.set(e[0][1]-a.id.x+1,e[1][1]-a.id.y+1)}function QAe(a,e){a[0][0]=e[0][0],a[0][1]=e[0][1],a[1][0]=e[1][0],a[1][1]=e[1][1]}function QB(a,e,t,r){var n=hA(e[r][0],t,r),i=hA(e[r][1],t,r);a[fa[r]]=a[Kn[r]]=NaN,n&&i&&(a[fa[r]]=n.xy,a[Kn[r]]=i.xy+i.wh-n.xy)}function wg(a,e,t,r){return a[fa[e]]=t,a[fa[1-e]]=r,a}function JAe(a){return a&&(a.type===Nd.leaf||a.type===Nd.nonLeaf)?a:null}function __(){return{x:NaN,y:NaN,width:NaN,height:NaN}}var JB=(function(){function a(e,t){this._cells=[],this._levels=[],this.dim=e,this.dimIdx=e==="x"?0:1,this._model=t,this._uniqueValueGen=eTe(e);var r=t.get("data",!0);r!=null&&!lt(r)&&(r=[]),r?this._initByDimModelData(r):this._initBySeriesData()}return a.prototype._initByDimModelData=function(e){var t=this,r=t._cells,n=t._levels,i=[],l=0;t._leavesCount=o(e,0,0),c();return;function o(d,u,h){var f=0;return d&&se(d,function(p,g){var b;At(p)?b={value:p}:aa(p)?(b=p,p.value!=null&&!At(p.value)&&(b={value:null})):b={value:null};var w={type:Nd.nonLeaf,ordinal:NaN,level:h,firstLeafLocator:u,id:new Qt,span:wg(new Qt,t.dimIdx,1,1),option:b,xy:NaN,wh:NaN,dim:t,rect:__()};l++,(i[u]||(i[u]=[])).push(w),n[h]||(n[h]={type:Nd.level,xy:NaN,wh:NaN,option:null,id:new Qt,dim:t});var j=o(b.children,u,h+1),k=Math.max(1,j);w.span[fa[t.dimIdx]]=k,f+=k,u+=k}),f}function c(){for(var d=[];r.length<l;)for(var u=0;u<i.length;u++){var h=i[u].pop();if(h){h.ordinal=d.length;var f=h.option.value;d.push(f),r.push(h),t._uniqueValueGen.calcDupBase(f)}}t._uniqueValueGen.ensureValueUnique(d,r);var p=t._ordinalMeta=new eb({categories:d,needCollect:!1,deduplication:!1});t._scale=new Dx({ordinalMeta:p});for(var g=0;g<t._leavesCount;g++){var b=t._cells[g];b.type=Nd.leaf,b.span[fa[1-t.dimIdx]]=t._levels.length-b.level}t._initCellsId(),t._initLevelIdOptions()}},a.prototype._initBySeriesData=function(){var e=this;e._leavesCount=0,e._levels=[{type:Nd.level,xy:NaN,wh:NaN,option:null,id:new Qt,dim:e}],e._initLevelIdOptions();var t=e._ordinalMeta=new eb({needCollect:!0,deduplication:!0,onCollect:function(r,n){var i=e._cells[n]={type:Nd.leaf,ordinal:n,level:0,firstLeafLocator:n,id:new Qt,span:wg(new Qt,e.dimIdx,1,1),option:{value:r+""},xy:NaN,wh:NaN,dim:e,rect:__()};e._leavesCount++,e._setCellId(i)}});e._scale=new Dx({ordinalMeta:t})},a.prototype._setCellId=function(e){var t=this._levels.length,r=this.dimIdx;wg(e.id,r,e.firstLeafLocator,e.level-t)},a.prototype._initCellsId=function(){var e=this._levels.length,t=this.dimIdx;se(this._cells,function(r){wg(r.id,t,r.firstLeafLocator,r.level-e)})},a.prototype._initLevelIdOptions=function(){var e=this._levels.length,t=this.dimIdx,r=this._model.get("levels",!0);r=lt(r)?r:[],se(this._levels,function(n,i){wg(n.id,t,0,i-e),n.option=r[i]})},a.prototype.shouldShow=function(){return!!this._model.getShallow("show",!0)},a.prototype.resetLayoutIterator=function(e,t,r,n){if(e=e||new uh,t===this.dimIdx){var i=this._leavesCount,l=r!=null?Math.max(0,r):0;n=n!=null?Math.min(n,i):i,e.reset(this._cells,l,l+n)}else{var i=this._levels.length,l=r!=null?Math.max(0,r+i):0;n=n!=null?Math.min(n,i):i,e.reset(this._levels,l,l+n)}return e},a.prototype.resetCellIterator=function(e){return(e||new uh).reset(this._cells,0)},a.prototype.resetLevelIterator=function(e){return(e||new uh).reset(this._levels,0)},a.prototype.getLayout=function(e,t,r){var n=this.getUnitLayoutInfo(t,r);e[fa[t]]=n?n.xy:NaN,e[Kn[t]]=n?n.wh:NaN},a.prototype.getUnitLayoutInfo=function(e,t){return e===this.dimIdx?t<this._leavesCount?this._cells[t]:void 0:this._levels[t+this._levels.length]},a.prototype.getCell=function(e){var t=this._scale.parse(e);return os(t)?void 0:this._cells[t]},a.prototype.getLocatorCount=function(e){return e===this.dimIdx?this._leavesCount:this._levels.length},a.prototype.getOrdinalMeta=function(){return this._ordinalMeta},a})();function eTe(a){var e=a.toUpperCase(),t=new RegExp("^"+e+"([0-9]+)$"),r=0;function n(o){var c;o!=null&&(c=o.match(t))&&(r=zn(r,+c[1]+1))}function i(){return""+e+r++}function l(o,c){for(var d=Pt(),u=0;u<o.length;u++){var h=o[u];(h==null||d.get(h)!=null)&&(o[u]=h=i(),c[u].option=ta({value:h},c[u].option)),d.set(h,!0)}}return{calcDupBase:n,ensureValueUnique:l}}var eF=(function(){function a(e,t,r){this._model=t,this._dims=r,this._kind=e,this._cellMergeOwnerList=[]}return a.prototype._ensureCellMap=function(){var e=this,t=e._cellMap;return t||(t=e._cellMap=Pt(),r()),t;function r(){var i=[],l=e._model.getShallow("data");l&&!lt(l)&&(l=null),se(l,function(g,b){if(!(!aa(g)||!lt(g.coord))){var w=iK([]),j=null;if(sK(w,j,g.coord,e._dims,g.coordClamp?Id[e._kind]:Id.none),!(uw(w,0)||uw(w,1))){var k=g&&g.mergeCells,T={id:new Qt,span:new Qt,locatorRange:w,option:g,cellMergeOwner:k};KB(T,w),i.push(T)}}});for(var o=[],c=0;c<i.length;c++){var d=i[c];if(d.cellMergeOwner){var u=d.locatorRange;XB(u,o,i,c);for(var h=0;h<c;h++)o[h]&&(i[h].cellMergeOwner=!1);if(u[0][0]!==d.id.x||u[1][0]!==d.id.y){d.cellMergeOwner=!1;var f=et({},d.option);f.coord=null;var p={id:new Qt,span:new Qt,locatorRange:u,option:f,cellMergeOwner:!0};KB(p,u),i.push(p)}}}se(i,function(g){var b=n(g.id.x,g.id.y);if(g.cellMergeOwner&&(b.cellMergeOwner=!0,b.span=g.span,b.locatorRange=g.locatorRange,b.spanRect=__(),e._cellMergeOwnerList.push(b)),!(!g.cellMergeOwner&&!g.option))for(var w=0;w<g.span.y;w++)for(var j=0;j<g.span.x;j++){var k=n(g.id.x+j,g.id.y+w);k.option=g.option,g.cellMergeOwner&&(k.inSpanOf=b)}})}function n(i,l){var o=tF(i,l),c=t.get(o);return c||(c=t.set(o,{id:new Qt(i,l),option:null,inSpanOf:null,span:null,spanRect:null,locatorRange:null,cellMergeOwner:!1})),c}},a.prototype.getCell=function(e){return this._ensureCellMap().get(tF(e[0],e[1]))},a.prototype.travelExistingCells=function(e){this._ensureCellMap().each(e)},a.prototype.expandRangeByCellMerge=function(e){if(!uw(e,0)&&!uw(e,1)&&e[0][0]===e[0][1]&&e[1][0]===e[1][1]){gC[0]=e[0][0],gC[1]=e[1][0];var t=this.getCell(gC),r=t&&t.inSpanOf;if(r){QAe(e,r.locatorRange);return}}var n=this._cellMergeOwnerList;XB(e,null,n,n.length)},a})(),gC=[];function tF(a,e){return a+"|"+e}var D6={show:!0,color:Be.color.secondary,overflow:"break",lineOverflow:"truncate",padding:[2,3,2,3],distance:0};function I6(a){return{color:"none",borderWidth:1,borderColor:a?"none":Be.color.borderTint}}var aF={show:!0,label:D6,itemStyle:I6(!1),silent:void 0,dividerLineStyle:{width:1,color:Be.color.border}},tTe={label:D6,itemStyle:I6(!1),silent:void 0},aTe={label:D6,itemStyle:I6(!0),silent:void 0},rTe={z:-50,left:"10%",top:"10%",right:"10%",bottom:"10%",x:aF,y:aF,body:tTe,corner:aTe,backgroundStyle:{color:"none",borderColor:Be.color.axisLine,borderWidth:1}},nTe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){var t=this._dimModels={x:new rF(this.get("x",!0)||{}),y:new rF(this.get("y",!0)||{})};t.x.option.type=t.y.option.type="category";var r=t.x.dim=new JB("x",t.x),n=t.y.dim=new JB("y",t.y),i={x:r,y:n};this._body=new eF("body",new Fa(this.getShallow("body")),i),this._corner=new eF("corner",new Fa(this.getShallow("corner")),i)},e.prototype.getDimensionModel=function(t){return this._dimModels[t]},e.prototype.getBody=function(){return this._body},e.prototype.getCorner=function(){return this._corner},e.type="matrix",e.layoutMode="box",e.defaultOption=rTe,e})(za),rF=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getOrdinalMeta=function(){return this.dim.getOrdinalMeta()},e})(Fa),hw=Math.round,iTe=0,sTe=99,lTe={normal:25,special:100},oTe={normal:50,special:125},cTe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r){this.group.removeAll();var n=this.group,i=t.coordinateSystem,l=i.getRect(),o=t.getDimensionModel("x"),c=t.getDimensionModel("y"),d=o.dim,u=c.dim;dTe(n,t,r),uTe(n,t,d,u,r);var h=t.getShallow("borderZ2",!0),f=Ht(h,sTe),p=f-1,g=t.getModel("backgroundStyle").getItemStyle(["borderWidth"]);g.lineWidth=0;var b=t.getModel("backgroundStyle").getItemStyle(["color","decal","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]);b.fill="none";var w=fA(l.clone(),g,iTe),j=fA(l.clone(),b,f);w.silent=!0,j.silent=!0,n.add(w),n.add(j);var k=d.getUnitLayoutInfo(0,0),T=u.getUnitLayoutInfo(1,0);k&&T&&(d.shouldShow()&&n.add(nF({x1:l.x,y1:T.xy,x2:l.x+l.width,y2:T.xy},o.getModel("dividerLineStyle").getLineStyle(),p)),u.shouldShow()&&n.add(nF({x1:k.xy,y1:l.y,x2:k.xy,y2:l.y+l.height},c.getModel("dividerLineStyle").getLineStyle(),p)))},e.type="matrix",e})(tn);function dTe(a,e,t){r(0),r(1);function r(n){var i=e.getDimensionModel(fa[n]),l=i.dim;if(l.shouldShow())for(var o=i.getModel("itemStyle"),c=i.getModel("label"),d=e.getShallow("tooltip",!0),u=[],h=l.resetCellIterator();h.next();){var f=h.item,p={};ra.copy(p,f.rect),IT(u,f.id.x,f.id.y),lK(u,e,a,t,f.option,o,c,i,p,f.option.value,oTe,d)}}}function uTe(a,e,t,r,n){i("body",e.getBody(),t,r),t.shouldShow()&&r.shouldShow()&&i("corner",e.getCorner(),r,t);function i(l,o,c,d){var u=new Fa(e.getShallow(l,!0)),h=u.getModel("itemStyle"),f=u.getModel("label"),p=new uh,g=new uh,b=[],w=e.getShallow("tooltip",!0);for(d.resetLayoutIterator(g,1);g.next();)for(c.resetLayoutIterator(p,0);p.next();){var j=p.item,k=g.item;IT(b,j.id.x,k.id.y);var T=o.getCell(b);if(!(T&&T.inSpanOf&&T.inSpanOf!==T)){var E={};T&&T.span?ra.copy(E,T.spanRect):(j.dim.getLayout(E,0,b[0]),k.dim.getLayout(E,1,b[1]));var I=T?T.option:null;lK(b,e,a,n,I,h,f,u,E,I?I.value:null,lTe,w)}}}}function lK(a,e,t,r,n,i,l,o,c,d,u,h){var f;fw.option=n?n.itemStyle:null,fw.parentModel=i,zp.option=n,zp.parentModel=o;var p=Ht(zp.getShallow("z2"),n&&n.itemStyle?u.special:u.normal),g=h&&h.show,b=fA(c,fw.getItemStyle(),p);t.add(b);var w=zp.get("cursor");w!=null&&b.attr("cursor",w);var j;if(d!=null){var k=d+"";if(Bp.option=n?n.label:null,Bp.parentModel=l,Bp.ecModel=r,ji(b,{normal:Bp},{defaultText:k,autoOverflowArea:!0,layoutRect:Xt(b.shape)}),j=b.getTextContent(),j){j.z2=p+1;var T=j.style;if(T&&T.overflow&&T.overflow!=="none"&&T.lineOverflow){var E={};ra.copy(E,c),j0(E,(((f=b.style)===null||f===void 0?void 0:f.lineWidth)||0)/2,!0,!0),b.updateInnerText(),j.getLocalTransform(pw),Io(pw,pw),ra.applyTransform(E,E,pw),j.setClipPath(new Ea({shape:E}))}}Yd({el:b,componentModel:e,itemName:k,itemTooltipOption:h,formatterParamsExtra:{xyLocator:a.slice()}})}if(j){var I=Bp.get("silent");I==null&&(I=!g),j.silent=I,j.ignoreHostSilent=!0}var R=zp.get("silent");R==null&&(R=!b.style||b.style.fill==="none"||!b.style.fill),b.silent=R,M5(zp),M5(fw),M5(Bp)}var zp=new Fa,fw=new Fa,Bp=new Fa,pw=[];function fA(a,e,t){var r=e.lineWidth;if(r){var n=a.x+a.width,i=a.y+a.height;a.x=Nl(a.x,r,!0),a.y=Nl(a.y,r,!0),a.width=Nl(n,r,!0)-a.x,a.height=Nl(i,r,!0)-a.y}return new Ea({shape:a,style:e,z2:t})}function nF(a,e,t){var r=e.lineWidth;return r&&(hw(a.x1*2)===hw(a.x2*2)&&(a.x1=a.x2=Nl(a.x1,r,!0)),hw(a.y1*2)===hw(a.y2*2)&&(a.y1=a.y2=Nl(a.y1,r,!0))),new qn({shape:a,style:e,silent:!0,z2:t})}var hTe=(function(){function a(e,t,r){this.dimensions=a.dimensions,this.type="matrix",this._model=e;var n=this._dimModels={x:e.getDimensionModel("x"),y:e.getDimensionModel("y")};this._dims={x:n.x.dim,y:n.y.dim},this._resize(e,r)}return a.getDimensionsInfo=function(){return[{name:"x",type:"ordinal"},{name:"y",type:"ordinal"},{name:"value"}]},a.create=function(e,t){var r=[];return e.eachComponent("matrix",function(n){var i=new a(n,e,t);r.push(i),n.coordinateSystem=i}),e.eachComponent(function(n,i){Ob({targetModel:i,coordSysType:"matrix",coordSysProvider:jY})}),r},a.prototype.getRect=function(){return this._rect},a.prototype._resize=function(e,t){var r=this._dims,n=this._dimModels,i=this._rect=cn(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()});iF(n,r,i,0),iF(n,r,i,1),sF(0,r),sF(1,r),lF(this._model.getBody(),r),lF(this._model.getCorner(),r)},a.prototype.dataToPoint=function(e,t,r){return r=r||[],this.dataToLayout(e,t,_g),r[0]=_g.rect.x+_g.rect.width/2,r[1]=_g.rect.y+_g.rect.height/2,r},a.prototype.dataToLayout=function(e,t,r){var n=this._dims;r=r||{};var i=r.rect=r.rect||{};i.x=i.y=i.width=i.height=NaN;var l=r.matrixXYLocatorRange=iK(r.matrixXYLocatorRange);return lt(e)&&(sK(l,null,e,n,Ht(t&&t.clamp,Id.none)),(!t||!t.ignoreMergeCells)&&((!t||t.clamp!==Id.corner)&&this._model.getBody().expandRangeByCellMerge(l),(!t||t.clamp!==Id.body)&&this._model.getCorner().expandRangeByCellMerge(l)),QB(i,l,n,0),QB(i,l,n,1)),r},a.prototype.pointToData=function(e,t,r){var n=this._dims;return oF(nc,0,n,e,t&&t.clamp),oF(nc,1,n,e,t&&t.clamp),r=r||[],r[0]=r[1]=NaN,nc.y===Wi.inCorner&&nc.x===Wi.inBody?cF(nc,r,0,n):nc.x===Wi.inCorner&&nc.y===Wi.inBody?cF(nc,r,1,n):(dF(nc,r,0,n),dF(nc,r,1,n)),r},a.prototype.convertToPixel=function(e,t,r,n){var i=bC(t);return i===this?i.dataToPoint(r,n):void 0},a.prototype.convertToLayout=function(e,t,r,n){var i=bC(t);return i===this?i.dataToLayout(r,n):void 0},a.prototype.convertFromPixel=function(e,t,r,n){var i=bC(t);return i===this?i.pointToData(r,n):void 0},a.prototype.containPoint=function(e){return this._rect.contain(e[0],e[1])},a.dimensions=["x","y","value"],a})(),_g={rect:__()},xw=new uh,vC=new uh;function iF(a,e,t,r){for(var n=1-r,i=e[fa[r]],l=e[fa[n]],o=l.shouldShow(),c=i.resetCellIterator();c.next();)c.item.wh=c.item.xy=NaN;for(var d=l.resetLayoutIterator(null,r);d.next();)d.item.wh=d.item.xy=NaN;for(var u=t[Kn[r]],h=i.getLocatorCount(r)+l.getLocatorCount(r),f=new Fa,p=l.resetLevelIterator();p.next();)f.option=p.item.option,f.parentModel=a[fa[n]],w(p.item,o?f.get("levelSize"):0);for(var g=new Fa,b=i.resetCellIterator();b.next();)b.item.type===Nd.leaf&&(g.option=b.item.option,g.parentModel=void 0,w(b.item,g.get("size")));function w(P,H){var G=fTe(H,r,t);os(G)||(P.wh=pA(G,u),u=pA(u-P.wh),h--)}var j=h?u/h:0,k=!h&&u>=1,T=t[fa[r]],E=i.getLocatorCount(r)-1,I=new uh;for(l.resetLayoutIterator(I,r);I.next();)R(I.item);for(i.resetLayoutIterator(I,r);I.next();)R(I.item);function R(P){os(P.wh)&&(P.wh=j),P.xy=T,P.id[fa[r]]===E&&!k&&(P.wh=t[fa[r]]+t[Kn[r]]-P.xy),T+=P.wh}}function sF(a,e){for(var t=e[fa[a]].resetCellIterator();t.next();){var r=t.item;N_(r.rect,a,r.id,r.span,e),N_(r.rect,1-a,r.id,r.span,e),r.type===Nd.nonLeaf&&(r.xy=r.rect[fa[a]],r.wh=r.rect[Kn[a]])}}function lF(a,e){a.travelExistingCells(function(t){var r=t.span;if(r){var n=t.spanRect,i=t.id;N_(n,0,i,r,e),N_(n,1,i,r,e)}})}function N_(a,e,t,r,n){a[Kn[e]]=0;var i=t[fa[e]],l=i<0?n[fa[1-e]]:n[fa[e]],o=l.getUnitLayoutInfo(e,t[fa[e]]);if(a[fa[e]]=o.xy,a[Kn[e]]=o.wh,r[fa[e]]>1){var c=l.getUnitLayoutInfo(e,t[fa[e]]+r[fa[e]]-1);a[Kn[e]]=c.xy+c.wh-o.xy}}function fTe(a,e,t){var r=z2(a,t[Kn[e]]);return pA(r,t[Kn[e]])}function pA(a,e){return Math.max(Math.min(a,Ht(e,1/0)),0)}function bC(a){var e=a.matrixModel,t=a.seriesModel,r=e?e.coordinateSystem:t?t.coordinateSystem:null;return r}var Wi={inBody:1,inCorner:2,outside:3},nc={x:null,y:null,point:[]};function oF(a,e,t,r,n){var i=t[fa[e]],l=t[fa[1-e]],o=i.getUnitLayoutInfo(e,i.getLocatorCount(e)-1),c=i.getUnitLayoutInfo(e,0),d=l.getUnitLayoutInfo(e,-l.getLocatorCount(e)),u=l.shouldShow()?l.getUnitLayoutInfo(e,-1):null,h=a.point[e]=r[e];if(!c&&!u){a[fa[e]]=Wi.outside;return}if(n===Id.body){c?(a[fa[e]]=Wi.inBody,h=Sl(o.xy+o.wh,zn(c.xy,h)),a.point[e]=h):a[fa[e]]=Wi.outside;return}else if(n===Id.corner){u?(a[fa[e]]=Wi.inCorner,h=Sl(u.xy+u.wh,zn(d.xy,h)),a.point[e]=h):a[fa[e]]=Wi.outside;return}var f=c?c.xy:u?u.xy+u.wh:NaN,p=d?d.xy:f,g=o?o.xy+o.wh:f;if(h<p){if(!n){a[fa[e]]=Wi.outside;return}h=p}else if(h>g){if(!n){a[fa[e]]=Wi.outside;return}h=g}a.point[e]=h,a[fa[e]]=f<=h&&h<=g?Wi.inBody:p<=h&&h<=f?Wi.inCorner:Wi.outside}function cF(a,e,t,r){var n=1-t;if(a[fa[t]]!==Wi.outside)for(r[fa[t]].resetCellIterator(vC);vC.next();){var i=vC.item;if(uF(a.point[t],i.rect,t)&&uF(a.point[n],i.rect,n)){e[t]=i.ordinal,e[n]=i.id[fa[n]];return}}}function dF(a,e,t,r){if(a[fa[t]]!==Wi.outside){var n=a[fa[t]]===Wi.inCorner?r[fa[1-t]]:r[fa[t]];for(n.resetLayoutIterator(xw,t);xw.next();)if(pTe(a.point[t],xw.item)){e[t]=xw.item.id[fa[t]];return}}}function pTe(a,e){return e.xy<=a&&a<=e.xy+e.wh}function uF(a,e,t){return e[fa[t]]<=a&&a<=e[fa[t]]+e[Kn[t]]}function xTe(a){a.registerComponentModel(nTe),a.registerComponentView(cTe),a.registerCoordinateSystem("matrix",hTe)}function mTe(a,e){var t=a.existing;if(e.id=a.keyInfo.id,!e.type&&t&&(e.type=t.type),e.parentId==null){var r=e.parentOption;r?e.parentId=r.id:t&&(e.parentId=t.parentId)}e.parentOption=null}function hF(a,e){var t;return se(e,function(r){a[r]!=null&&a[r]!=="auto"&&(t=!0)}),t}function gTe(a,e,t){var r=et({},t),n=a[e],i=t.$action||"merge";i==="merge"?n?(Ca(n,r,!0),Rc(n,r,{ignoreSize:!0}),TY(t,n),mw(t,n),mw(t,n,"shape"),mw(t,n,"style"),mw(t,n,"extra"),t.clipPath=n.clipPath):a[e]=r:i==="replace"?a[e]=r:i==="remove"&&n&&(a[e]=null)}var oK=["transition","enterFrom","leaveTo"],vTe=oK.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function mw(a,e,t){if(t&&(!a[t]&&e[t]&&(a[t]={}),a=a[t],e=e[t]),!(!a||!e))for(var r=t?oK:vTe,n=0;n<r.length;n++){var i=r[n];a[i]==null&&e[i]!=null&&(a[i]=e[i])}}function bTe(a,e){if(a&&(a.hv=e.hv=[hF(e,["left","right"]),hF(e,["top","bottom"])],a.type==="group")){var t=a,r=e;t.width==null&&(t.width=r.width=0),t.height==null&&(t.height=r.height=0)}}var yTe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.preventAutoZ=!0,t}return e.prototype.mergeOption=function(t,r){var n=this.option.elements;this.option.elements=null,a.prototype.mergeOption.call(this,t,r),this.option.elements=n},e.prototype.optionUpdated=function(t,r){var n=this.option,i=(r?n:t).elements,l=n.elements=r?[]:n.elements,o=[];this._flatten(i,o,null);var c=gW(l,o,"normalMerge"),d=this._elOptionsToUpdate=[];se(c,function(u,h){var f=u.newOption;f&&(d.push(f),mTe(u,f),gTe(l,h,f),bTe(l[h],f))},this),n.elements=pr(l,function(u){return u&&delete u.$action,u!=null})},e.prototype._flatten=function(t,r,n){se(t,function(i){if(i){n&&(i.parentOption=n),r.push(i);var l=i.children;l&&l.length&&this._flatten(l,r,i),delete i.children}},this)},e.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},e.type="graphic",e.defaultOption={elements:[]},e})(za),fF={path:null,compoundPath:null,group:$t,image:Pi,text:tr},Xl=Ia(),wTe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._elMap=Pt()},e.prototype.render=function(t,r,n){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,n)},e.prototype._updateElements=function(t){var r=t.useElOptionsToUpdate();if(r){var n=this._elMap,i=this.group,l=t.get("z"),o=t.get("zlevel");se(r,function(c){var d=ui(c.id,null),u=d!=null?n.get(d):null,h=ui(c.parentId,null),f=h!=null?n.get(h):i,p=c.type,g=c.style;p==="text"&&g&&c.hv&&c.hv[1]&&(g.textVerticalAlign=g.textBaseline=g.verticalAlign=g.align=null);var b=c.textContent,w=c.textConfig;if(g&&BZ(g,p,!!w,!!b)){var j=FZ(g,p,!0);!w&&j.textConfig&&(w=c.textConfig=j.textConfig),!b&&j.textContent&&(b=j.textContent)}var k=_Te(c),T=c.$action||"merge",E=T==="merge",I=T==="replace";if(E){var R=!u,P=u;R?P=pF(d,f,c.type,n):(P&&(Xl(P).isNew=!1),GZ(P)),P&&(Kw(P,k,t,{isInit:R}),xF(P,c,l,o))}else if(I){e2(u,c,n,t);var H=pF(d,f,c.type,n);H&&(Kw(H,k,t,{isInit:!0}),xF(H,c,l,o))}else T==="remove"&&(HZ(u,c),e2(u,c,n,t));var G=n.get(d);if(G&&b)if(E){var X=G.getTextContent();X?X.attr(b):G.setTextContent(new tr(b))}else I&&G.setTextContent(new tr(b));if(G){var U=c.clipPath;if(U){var te=U.type,Z=void 0,R=!1;if(E){var J=G.getClipPath();R=!J||Xl(J).type!==te,Z=R?xA(te):J}else I&&(R=!0,Z=xA(te));G.setClipPath(Z),Kw(Z,U,t,{isInit:R}),b_(Z,U.keyframeAnimation,t)}var B=Xl(G);G.setTextConfig(w),B.option=c,NTe(G,t,c),Yd({el:G,componentModel:t,itemName:G.name,itemTooltipOption:c.tooltip}),b_(G,c.keyframeAnimation,t)}})}},e.prototype._relocate=function(t,r){for(var n=t.option.elements,i=this.group,l=this._elMap,o=r.getWidth(),c=r.getHeight(),d=["x","y"],u=0;u<n.length;u++){var h=n[u],f=ui(h.id,null),p=f!=null?l.get(f):null;if(!(!p||!p.isGroup)){var g=p.parent,b=g===i,w=Xl(p),j=Xl(g);w.width=kt(w.option.width,b?o:j.width)||0,w.height=kt(w.option.height,b?c:j.height)||0}}for(var u=n.length-1;u>=0;u--){var h=n[u],f=ui(h.id,null),p=f!=null?l.get(f):null;if(p){var g=p.parent,j=Xl(g),k=g===i?{width:o,height:c}:{width:j.width,height:j.height},T={},E=CN(p,h,k,null,{hv:h.hv,boundingMode:h.bounding},T);if(!Xl(p).isNew&&E){for(var I=h.transition,R={},P=0;P<d.length;P++){var H=d[P],G=T[H];I&&(f0(I)||ja(I,H)>=0)?R[H]=G:p[H]=G}nr(p,R,t,0)}else p.attr(T)}}},e.prototype._clear=function(){var t=this,r=this._elMap;r.each(function(n){e2(n,Xl(n).option,r,t._lastGraphicModel)}),this._elMap=Pt()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e})(tn);function xA(a){var e=Rt(fF,a)?fF[a]:U2(a),t=new e({});return Xl(t).type=a,t}function pF(a,e,t,r){var n=xA(t);return e.add(n),r.set(a,n),Xl(n).id=a,Xl(n).isNew=!0,n}function e2(a,e,t,r){var n=a&&a.parent;n&&(a.type==="group"&&a.traverse(function(i){e2(i,e,t,r)}),HN(a,e,r),t.removeKey(Xl(a).id))}function xF(a,e,t,r){a.isGroup||se([["cursor",so.prototype.cursor],["zlevel",r||0],["z",t||0],["z2",0]],function(n){var i=n[0];Rt(e,i)?a[i]=Ht(e[i],n[1]):a[i]==null&&(a[i]=n[1])}),se(Ua(e),function(n){if(n.indexOf("on")===0){var i=e[n];a[n]=Yt(i)?i:null}}),Rt(e,"draggable")&&(a.draggable=e.draggable),e.name!=null&&(a.name=e.name),e.id!=null&&(a.id=e.id)}function _Te(a){return a=et({},a),se(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(SY),function(e){delete a[e]}),a}function NTe(a,e,t){var r=la(a).eventData;!a.silent&&!a.ignore&&!r&&(r=la(a).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:a.name}),r&&(r.info=t.info)}function jTe(a){a.registerComponentModel(yTe),a.registerComponentView(wTe),a.registerPreprocessor(function(e){var t=e.graphic;lt(t)?!t[0]||!t[0].elements?e.graphic=[{elements:t}]:e.graphic=[e.graphic[0]]:t&&!t.elements&&(e.graphic=[{elements:[t]}])})}var mF=["x","y","radius","angle","single"],STe=["cartesian2d","polar","singleAxis"];function kTe(a){var e=a.get("coordinateSystem");return ja(STe,e)>=0}function sh(a){return a+"Axis"}function CTe(a,e){var t=Pt(),r=[],n=Pt();a.eachComponent({mainType:"dataZoom",query:e},function(u){n.get(u.uid)||o(u)});var i;do i=!1,a.eachComponent("dataZoom",l);while(i);function l(u){!n.get(u.uid)&&c(u)&&(o(u),i=!0)}function o(u){n.set(u.uid,!0),r.push(u),d(u)}function c(u){var h=!1;return u.eachTargetAxis(function(f,p){var g=t.get(f);g&&g[p]&&(h=!0)}),h}function d(u){u.eachTargetAxis(function(h,f){(t.get(h)||t.set(h,[]))[f]=!0})}return r}function cK(a){var e=a.ecModel,t={infoList:[],infoMap:Pt()};return a.eachTargetAxis(function(r,n){var i=e.getComponent(sh(r),n);if(i){var l=i.getCoordSysModel();if(l){var o=l.uid,c=t.infoMap.get(o);c||(c={model:l,axisModels:[]},t.infoList.push(c),t.infoMap.set(o,c)),c.axisModels.push(i)}}}),t}var yC=(function(){function a(){this.indexList=[],this.indexMap=[]}return a.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},a})(),ub=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return e.prototype.init=function(t,r,n){var i=gF(t);this.settledOption=i,this.mergeDefaultAndTheme(t,n),this._doInit(i)},e.prototype.mergeOption=function(t){var r=gF(t);Ca(this.option,t,!0),Ca(this.settledOption,r,!0),this._doInit(r)},e.prototype._doInit=function(t){var r=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var n=this.settledOption;se([["start","startValue"],["end","endValue"]],function(i,l){this._rangePropMode[l]==="value"&&(r[i[0]]=n[i[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),r=this._targetAxisInfoMap=Pt(),n=this._fillSpecifiedTargetAxis(r);n?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(i){i.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var r=!1;return se(mF,function(n){var i=this.getReferringComponents(sh(n),lge);if(i.specified){r=!0;var l=new yC;se(i.models,function(o){l.add(o.componentIndex)}),t.set(n,l)}},this),r},e.prototype._fillAutoTargetAxisByOrient=function(t,r){var n=this.ecModel,i=!0;if(i){var l=r==="vertical"?"y":"x",o=n.findComponents({mainType:l+"Axis"});c(o,l)}if(i){var o=n.findComponents({mainType:"singleAxis",filter:function(u){return u.get("orient",!0)===r}});c(o,"single")}function c(d,u){var h=d[0];if(h){var f=new yC;if(f.add(h.componentIndex),t.set(u,f),i=!1,u==="x"||u==="y"){var p=h.getReferringComponents("grid",wn).models[0];p&&se(d,function(g){h.componentIndex!==g.componentIndex&&p===g.getReferringComponents("grid",wn).models[0]&&f.add(g.componentIndex)})}}}i&&se(mF,function(d){if(i){var u=n.findComponents({mainType:sh(d),filter:function(f){return f.get("type",!0)==="category"}});if(u[0]){var h=new yC;h.add(u[0].componentIndex),t.set(d,h),i=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(r){!t&&(t=r)},this),t==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var r=this._rangePropMode,n=this.get("rangeMode");se([["start","startValue"],["end","endValue"]],function(i,l){var o=t[i[0]]!=null,c=t[i[1]]!=null;o&&!c?r[l]="percent":!o&&c?r[l]="value":n?r[l]=n[l]:o&&(r[l]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(r,n){t==null&&(t=this.ecModel.getComponent(sh(r),n))},this),t},e.prototype.eachTargetAxis=function(t,r){this._targetAxisInfoMap.each(function(n,i){se(n.indexList,function(l){t.call(r,i,l)})})},e.prototype.getAxisProxy=function(t,r){var n=this.getAxisModel(t,r);if(n)return n.__dzAxisProxy},e.prototype.getAxisModel=function(t,r){var n=this._targetAxisInfoMap.get(t);if(n&&n.indexMap[r])return this.ecModel.getComponent(sh(t),r)},e.prototype.setRawRange=function(t){var r=this.option,n=this.settledOption;se([["start","startValue"],["end","endValue"]],function(i){(t[i[0]]!=null||t[i[1]]!=null)&&(r[i[0]]=n[i[0]]=t[i[0]],r[i[1]]=n[i[1]]=t[i[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var r=this.option;se(["start","startValue","end","endValue"],function(n){r[n]=t[n]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,r){if(t==null&&r==null){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataValueWindow()}else return this.getAxisProxy(t,r).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var r,n=this._targetAxisInfoMap.keys(),i=0;i<n.length;i++)for(var l=n[i],o=this._targetAxisInfoMap.get(l),c=0;c<o.indexList.length;c++){var d=this.getAxisProxy(l,o.indexList[c]);if(d.hostedBy(this))return d;r||(r=d)}return r},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e})(za);function gF(a){var e={};return se(["start","end","startValue","endValue","throttle"],function(t){a.hasOwnProperty(t)&&(e[t]=a[t])}),e}var ATe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e})(ub),R6=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n,i){this.dataZoomModel=t,this.ecModel=r,this.api=n},e.type="dataZoom",e})(tn),TTe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e})(R6),$p=se,vF=to,MTe=(function(){function a(e,t,r,n){this._dimName=e,this._axisIndex=t,this.ecModel=n,this._dataZoomModel=r}return a.prototype.hostedBy=function(e){return this._dataZoomModel===e},a.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},a.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},a.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(t){if(kTe(t)){var r=sh(this._dimName),n=t.getReferringComponents(r,wn).models[0];n&&this._axisIndex===n.componentIndex&&e.push(t)}},this),e},a.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},a.prototype.getMinMaxSpan=function(){return Xt(this._minMaxSpan)},a.prototype.calculateDataWindow=function(e){var t=this._dataExtent,r=this.getAxisModel(),n=r.axis.scale,i=this._dataZoomModel.getRangePropMode(),l=[0,100],o=[],c=[],d;$p(["start","end"],function(f,p){var g=e[f],b=e[f+"Value"];i[p]==="percent"?(g==null&&(g=l[p]),b=n.parse(fr(g,l,t))):(d=!0,b=b==null?t[p]:n.parse(b),g=fr(b,t,l)),c[p]=b==null||isNaN(b)?t[p]:b,o[p]=g==null||isNaN(g)?l[p]:g}),vF(c),vF(o);var u=this._minMaxSpan;d?h(c,o,t,l,!1):h(o,c,l,t,!0);function h(f,p,g,b,w){var j=w?"Span":"ValueSpan";jh(0,f,g,"all",u["min"+j],u["max"+j]);for(var k=0;k<2;k++)p[k]=fr(f[k],g,b,!0),w&&(p[k]=n.parse(p[k]))}return{valueWindow:c,percentWindow:o}},a.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=ETe(this,this._dimName,t),this._updateMinMaxSpan();var r=this.calculateDataWindow(e.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},a.prototype.filterData=function(e,t){if(e!==this._dataZoomModel)return;var r=this._dimName,n=this.getTargetSeriesModels(),i=e.get("filterMode"),l=this._valueWindow;if(i==="none")return;$p(n,function(c){var d=c.getData(),u=d.mapDimensionsAll(r);if(u.length){if(i==="weakFilter"){var h=d.getStore(),f=ct(u,function(p){return d.getDimensionIndex(p)},d);d.filterSelf(function(p){for(var g,b,w,j=0;j<u.length;j++){var k=h.get(f[j],p),T=!isNaN(k),E=k<l[0],I=k>l[1];if(T&&!E&&!I)return!0;T&&(w=!0),E&&(g=!0),I&&(b=!0)}return w&&g&&b})}else $p(u,function(p){if(i==="empty")c.setData(d=d.map(p,function(b){return o(b)?b:NaN}));else{var g={};g[p]=l,d.selectRange(g)}});$p(u,function(p){d.setApproximateExtent(l,p)})}});function o(c){return c>=l[0]&&c<=l[1]}},a.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,r=this._dataExtent;$p(["min","max"],function(n){var i=t.get(n+"Span"),l=t.get(n+"ValueSpan");l!=null&&(l=this.getAxisModel().axis.scale.parse(l)),l!=null?i=fr(r[0]+l,r,[0,100],!0):i!=null&&(l=fr(i,[0,100],r,!0)-r[0]),e[n+"Span"]=i,e[n+"ValueSpan"]=l},this)},a.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,r=this._valueWindow;if(t){var n=oW(r,[0,500]);n=Math.min(n,20);var i=e.axis.scale.rawExtentInfo;t[0]!==0&&i.setDeterminedMinMax("min",+r[0].toFixed(n)),t[1]!==100&&i.setDeterminedMinMax("max",+r[1].toFixed(n)),i.freeze()}},a})();function ETe(a,e,t){var r=[1/0,-1/0];$p(t,function(l){c2e(r,l.getData(),e)});var n=a.getAxisModel(),i=oq(n.axis.scale,n,r).calculate();return[i.min,i.max]}var DTe={getTargetSeries:function(a){function e(n){a.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(l,o){var c=a.getComponent(sh(l),o);n(l,o,c,i)})})}e(function(n,i,l,o){l.__dzAxisProxy=null});var t=[];e(function(n,i,l,o){l.__dzAxisProxy||(l.__dzAxisProxy=new MTe(n,i,o,a),t.push(l.__dzAxisProxy))});var r=Pt();return se(t,function(n){se(n.getTargetSeriesModels(),function(i){r.set(i.uid,i)})}),r},overallReset:function(a,e){a.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(r,n){t.getAxisProxy(r,n).reset(t)}),t.eachTargetAxis(function(r,n){t.getAxisProxy(r,n).filterData(t,e)})}),a.eachComponent("dataZoom",function(t){var r=t.findRepresentativeAxisProxy();if(r){var n=r.getDataPercentWindow(),i=r.getDataValueWindow();t.setCalculatedRange({start:n[0],end:n[1],startValue:i[0],endValue:i[1]})}})}};function ITe(a){a.registerAction("dataZoom",function(e,t){var r=CTe(t,e);se(r,function(n){n.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var bF=!1;function L6(a){bF||(bF=!0,a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,DTe),ITe(a),a.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function RTe(a){a.registerComponentModel(ATe),a.registerComponentView(TTe),L6(a)}var Kl=(function(){function a(){}return a})(),dK={};function qp(a,e){dK[a]=e}function uK(a){return dK[a]}var LTe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){a.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;se(this.option.feature,function(r,n){var i=uK(n);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(t)),Ca(r,i.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:Be.color.border,borderRadius:0,borderWidth:0,padding:Be.size.m,itemSize:15,itemGap:Be.size.s,showTitle:!0,iconStyle:{borderColor:Be.color.accent50,color:"none"},emphasis:{iconStyle:{borderColor:Be.color.accent50}},tooltip:{show:!1,position:"bottom"}},e})(za);function hK(a,e){var t=Rb(e.get("padding")),r=e.getItemStyle(["color","opacity"]);r.fill=e.get("backgroundColor");var n=new Ea({shape:{x:a.x-t[3],y:a.y-t[0],width:a.width+t[1]+t[3],height:a.height+t[0]+t[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1});return n}var OTe=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.render=function(t,r,n,i){var l=this.group;if(l.removeAll(),!t.get("show"))return;var o=+t.get("itemSize"),c=t.get("orient")==="vertical",d=t.get("feature")||{},u=this._features||(this._features={}),h=[];se(d,function(k,T){h.push(T)}),new Fd(this._featureNames||[],h).add(f).update(f).remove(ya(f,null)).execute(),this._featureNames=h;function f(k,T){var E=h[k],I=h[T],R=d[E],P=new Fa(R,t,t.ecModel),H;if(i&&i.newTitle!=null&&i.featureName===E&&(R.title=i.newTitle),E&&!I){if(PTe(E))H={onclick:P.option.onclick,featureName:E};else{var G=uK(E);if(!G)return;H=new G}u[E]=H}else if(H=u[I],!H)return;H.uid=Kx("toolbox-feature"),H.model=P,H.ecModel=r,H.api=n;var X=H instanceof Kl;if(!E&&I){X&&H.dispose&&H.dispose(r,n);return}if(!P.get("show")||X&&H.unusable){X&&H.remove&&H.remove(r,n);return}p(P,H,E),P.setIconStatus=function(U,te){var Z=this.option,J=this.iconPaths;Z.iconStatus=Z.iconStatus||{},Z.iconStatus[U]=te,J[U]&&(te==="emphasis"?zd:Bd)(J[U])},H instanceof Kl&&H.render&&H.render(P,r,n,i)}function p(k,T,E){var I=k.getModel("iconStyle"),R=k.getModel(["emphasis","iconStyle"]),P=T instanceof Kl&&T.getIcons?T.getIcons():k.get("icon"),H=k.get("title")||{},G,X;At(P)?(G={},G[E]=P):G=P,At(H)?(X={},X[E]=H):X=H;var U=k.iconPaths={};se(G,function(te,Z){var J=Ib(te,{},{x:-o/2,y:-o/2,width:o,height:o});J.setStyle(I.getItemStyle());var B=J.ensureState("emphasis");B.style=R.getItemStyle();var W=new tr({style:{text:X[Z],align:R.get("textAlign"),borderRadius:R.get("textBorderRadius"),padding:R.get("textPadding"),fill:null,font:tM({fontStyle:R.get("textFontStyle"),fontFamily:R.get("textFontFamily"),fontSize:R.get("textFontSize"),fontWeight:R.get("textFontWeight")},r)},ignore:!0});J.setTextContent(W),Yd({el:J,componentModel:t,itemName:Z,formatterParamsExtra:{title:X[Z]}}),J.__title=X[Z],J.on("mouseover",function(){var $=R.getItemStyle(),Q=c?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";W.setStyle({fill:R.get("textFill")||$.fill||$.stroke||Be.color.neutral99,backgroundColor:R.get("textBackgroundColor")}),J.setTextConfig({position:R.get("textPosition")||Q}),W.ignore=!t.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){k.get(["iconStatus",Z])!=="emphasis"&&n.leaveEmphasis(this),W.hide()}),(k.get(["iconStatus",Z])==="emphasis"?zd:Bd)(J),l.add(J),J.on("click",Tt(T.onclick,T,r,n,Z)),U[Z]=J})}var g=pi(t,n).refContainer,b=t.getBoxLayoutParams(),w=t.get("padding"),j=cn(b,g,w);u0(t.get("orient"),l,t.get("itemGap"),j.width,j.height),CN(l,b,g,w),l.add(hK(l.getBoundingRect(),t)),c||l.eachChild(function(k){var T=k.__title,E=k.ensureState("emphasis"),I=E.textConfig||(E.textConfig={}),R=k.getTextContent(),P=R&&R.ensureState("emphasis");if(P&&!Yt(P)&&T){var H=P.style||(P.style={}),G=dN(T,tr.makeFont(H)),X=k.x+l.x,U=k.y+l.y+o,te=!1;U+G.height>n.getHeight()&&(I.position="top",te=!0);var Z=te?-5-G.height:o+10;X+G.width/2>n.getWidth()?(I.position=["100%",Z],H.align="right"):X-G.width/2<0&&(I.position=[0,Z],H.align="left")}})},e.prototype.updateView=function(t,r,n,i){se(this._features,function(l){l instanceof Kl&&l.updateView&&l.updateView(l.model,r,n,i)})},e.prototype.remove=function(t,r){se(this._features,function(n){n instanceof Kl&&n.remove&&n.remove(t,r)}),this.group.removeAll()},e.prototype.dispose=function(t,r){se(this._features,function(n){n instanceof Kl&&n.dispose&&n.dispose(t,r)})},e.type="toolbox",e})(tn);function PTe(a){return a.indexOf("my")===0}var zTe=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){var n=this.model,i=n.get("name")||t.get("title.0.text")||"echarts",l=r.getZr().painter.getType()==="svg",o=l?"svg":n.get("type",!0)||"png",c=r.getConnectedDataURL({type:o,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||Be.color.neutral00,connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),d=Ba.browser;if(typeof MouseEvent=="function"&&(d.newEdge||!d.ie&&!d.edge)){var u=document.createElement("a");u.download=i+"."+o,u.target="_blank",u.href=c;var h=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});u.dispatchEvent(h)}else if(window.navigator.msSaveOrOpenBlob||l){var f=c.split(","),p=f[0].indexOf("base64")>-1,g=l?decodeURIComponent(f[1]):f[1];p&&(g=window.atob(g));var b=i+"."+o;if(window.navigator.msSaveOrOpenBlob){for(var w=g.length,j=new Uint8Array(w);w--;)j[w]=g.charCodeAt(w);var k=new Blob([j]);window.navigator.msSaveOrOpenBlob(k,b)}else{var T=document.createElement("iframe");document.body.appendChild(T);var E=T.contentWindow,I=E.document;I.open("image/svg+xml","replace"),I.write(g),I.close(),E.focus(),I.execCommand("SaveAs",!0,b),document.body.removeChild(T)}}else{var R=n.get("lang"),P='<body style="margin:0;"><img src="'+c+'" style="max-width:100%;" title="'+(R&&R[0]||"")+'" /></body>',H=window.open();H.document.write(P),H.document.title=i}},e.getDefaultOption=function(t){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:Be.color.neutral00,name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},e})(Kl),yF="__ec_magicType_stack__",BTe=[["line","bar"],["stack"]],FTe=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,r=t.get("icon"),n={};return se(t.get("type"),function(i){r[i]&&(n[i]=r[i])}),n},e.getDefaultOption=function(t){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},e.prototype.onclick=function(t,r,n){var i=this.model,l=i.get(["seriesIndex",n]);if(wF[n]){var o={series:[]},c=function(h){var f=h.subType,p=h.id,g=wF[n](f,p,h,i);g&&(ta(g,h.option),o.series.push(g));var b=h.coordinateSystem;if(b&&b.type==="cartesian2d"&&(n==="line"||n==="bar")){var w=b.getAxesByScale("ordinal")[0];if(w){var j=w.dim,k=j+"Axis",T=h.getReferringComponents(k,wn).models[0],E=T.componentIndex;o[k]=o[k]||[];for(var I=0;I<=E;I++)o[k][E]=o[k][E]||{};o[k][E].boundaryGap=n==="bar"}}};se(BTe,function(h){ja(h,n)>=0&&se(h,function(f){i.setIconStatus(f,"normal")})}),i.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:l==null?null:{seriesIndex:l}},c);var d,u=n;n==="stack"&&(d=Ca({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),i.get(["iconStatus",n])!=="emphasis"&&(u="tiled")),r.dispatchAction({type:"changeMagicType",currentType:u,newOption:o,newTitle:d,featureName:"magicType"})}},e})(Kl),wF={line:function(a,e,t,r){if(a==="bar")return Ca({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(a,e,t,r){if(a==="line")return Ca({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(a,e,t,r){var n=t.get("stack")===yF;if(a==="line"||a==="bar")return r.setIconStatus("stack",n?"normal":"emphasis"),Ca({id:e,stack:n?"":yF},r.get(["option","stack"])||{},!0)}};Bc({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(a,e){e.mergeOption(a.newOption)});var UN=new Array(60).join("-"),Fx="	";function VTe(a){var e={},t=[],r=[];return a.eachRawSeries(function(n){var i=n.coordinateSystem;if(i&&(i.type==="cartesian2d"||i.type==="polar")){var l=i.getBaseAxis();if(l.type==="category"){var o=l.dim+"_"+l.index;e[o]||(e[o]={categoryAxis:l,valueAxis:i.getOtherAxis(l),series:[]},r.push({axisDim:l.dim,axisIndex:l.index})),e[o].series.push(n)}else t.push(n)}else t.push(n)}),{seriesGroupByCategoryAxis:e,other:t,meta:r}}function HTe(a){var e=[];return se(a,function(t,r){var n=t.categoryAxis,i=t.valueAxis,l=i.dim,o=[" "].concat(ct(t.series,function(p){return p.name})),c=[n.model.getCategories()];se(t.series,function(p){var g=p.getRawData();c.push(p.getRawData().mapArray(g.mapDimension(l),function(b){return b}))});for(var d=[o.join(Fx)],u=0;u<c[0].length;u++){for(var h=[],f=0;f<c.length;f++)h.push(c[f][u]);d.push(h.join(Fx))}e.push(d.join(`
`))}),e.join(`

`+UN+`

`)}function UTe(a){return ct(a,function(e){var t=e.getRawData(),r=[e.name],n=[];return t.each(t.dimensions,function(){for(var i=arguments.length,l=arguments[i-1],o=t.getName(l),c=0;c<i-1;c++)n[c]=arguments[c];r.push((o?o+Fx:"")+n.join(Fx))}),r.join(`
`)}).join(`

`+UN+`

`)}function GTe(a){var e=VTe(a);return{value:pr([HTe(e.seriesGroupByCategoryAxis),UTe(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+UN+`

`),meta:e.meta}}function j_(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function WTe(a){var e=a.slice(0,a.indexOf(`
`));if(e.indexOf(Fx)>=0)return!0}var mA=new RegExp("["+Fx+"]+","g");function YTe(a){for(var e=a.split(/\n+/g),t=j_(e.shift()).split(mA),r=[],n=ct(t,function(c){return{name:c,data:[]}}),i=0;i<e.length;i++){var l=j_(e[i]).split(mA);r.push(l.shift());for(var o=0;o<l.length;o++)n[o]&&(n[o].data[i]=l[o])}return{series:n,categories:r}}function $Te(a){for(var e=a.split(/\n+/g),t=j_(e.shift()),r=[],n=0;n<e.length;n++){var i=j_(e[n]);if(i){var l=i.split(mA),o="",c=void 0,d=!1;isNaN(l[0])?(d=!0,o=l[0],l=l.slice(1),r[n]={name:o,value:[]},c=r[n].value):c=r[n]=[];for(var u=0;u<l.length;u++)c.push(+l[u]);c.length===1&&(d?r[n].value=c[0]:r[n]=c[0])}}return{name:t,data:r}}function qTe(a,e){var t=a.split(new RegExp(`
*`+UN+`
*`,"g")),r={series:[]};return se(t,function(n,i){if(WTe(n)){var l=YTe(n),o=e[i],c=o.axisDim+"Axis";o&&(r[c]=r[c]||[],r[c][o.axisIndex]={data:l.categories},r.series=r.series.concat(l.series))}else{var l=$Te(n);r.series.push(l)}}),r}var XTe=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var n=r.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var l=document.createElement("div");l.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",l.style.backgroundColor=i.get("backgroundColor")||Be.color.neutral00;var o=document.createElement("h4"),c=i.get("lang")||[];o.innerHTML=c[0]||i.get("title"),o.style.cssText="margin:10px 20px",o.style.color=i.get("textColor");var d=document.createElement("div"),u=document.createElement("textarea");d.style.cssText="overflow:auto";var h=i.get("optionToContent"),f=i.get("contentToOption"),p=GTe(t);if(Yt(h)){var g=h(r.getOption());At(g)?d.innerHTML=g:Sx(g)&&d.appendChild(g)}else{u.readOnly=i.get("readOnly");var b=u.style;b.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",b.color=i.get("textColor"),b.borderColor=i.get("textareaBorderColor"),b.backgroundColor=i.get("textareaColor"),u.value=p.value,d.appendChild(u)}var w=p.meta,j=document.createElement("div");j.style.cssText="position:absolute;bottom:5px;left:0;right:0";var k="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",T=document.createElement("div"),E=document.createElement("div");k+=";background-color:"+i.get("buttonColor"),k+=";color:"+i.get("buttonTextColor");var I=this;function R(){n.removeChild(l),I._dom=null}C4(T,"click",R),C4(E,"click",function(){if(f==null&&h!=null||f!=null&&h==null){R();return}var P;try{Yt(f)?P=f(d,r.getOption()):P=qTe(u.value,w)}catch(H){throw R(),new Error("Data view format error "+H)}P&&r.dispatchAction({type:"changeDataView",newOption:P}),R()}),T.innerHTML=c[1],E.innerHTML=c[2],E.style.cssText=T.style.cssText=k,!i.get("readOnly")&&j.appendChild(E),j.appendChild(T),l.appendChild(o),l.appendChild(d),l.appendChild(j),d.style.height=n.clientHeight-80+"px",n.appendChild(l),this._dom=l},e.prototype.remove=function(t,r){this._dom&&r.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.getDefaultOption=function(t){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:Be.color.background,textColor:Be.color.primary,textareaColor:Be.color.background,textareaBorderColor:Be.color.border,buttonColor:Be.color.accent50,buttonTextColor:Be.color.neutral00};return r},e})(Kl);function ZTe(a,e){return ct(a,function(t,r){var n=e&&e[r];if(aa(n)&&!lt(n)){var i=aa(t)&&!lt(t);i||(t={value:t});var l=n.name!=null&&t.name==null;return t=ta(t,n),l&&delete t.name,t}else return t})}Bc({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(a,e){var t=[];se(a.newOption.series,function(r){var n=e.getSeriesByName(r.name)[0];if(!n)t.push(et({type:"scatter"},r));else{var i=n.get("data");t.push({name:r.name,data:ZTe(r.data,i)})}}),e.mergeOption(ta({series:t},a.newOption))});var fK=se,pK=Ia();function KTe(a,e){var t=O6(a);fK(e,function(r,n){for(var i=t.length-1;i>=0;i--){var l=t[i];if(l[n])break}if(i<0){var o=a.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(o){var c=o.getPercentRange();t[0][n]={dataZoomId:n,start:c[0],end:c[1]}}}}),t.push(e)}function QTe(a){var e=O6(a),t=e[e.length-1];e.length>1&&e.pop();var r={};return fK(t,function(n,i){for(var l=e.length-1;l>=0;l--)if(n=e[l][i],n){r[i]=n;break}}),r}function JTe(a){pK(a).snapshots=null}function eMe(a){return O6(a).length}function O6(a){var e=pK(a);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var tMe=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){JTe(t),r.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return r},e})(Kl);Bc({type:"restore",event:"restore",update:"prepareAndUpdate"},function(a,e){e.resetOption("recreate")});var aMe=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],P6=(function(){function a(e,t,r){var n=this;this._targetInfoList=[];var i=_F(t,e);se(rMe,function(l,o){(!r||!r.include||ja(r.include,o)>=0)&&l(i,n._targetInfoList)})}return a.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(r,n,i){if((r.coordRanges||(r.coordRanges=[])).push(n),!r.coordRange){r.coordRange=n;var l=wC[r.brushType](0,i,n);r.__rangeOffset={offset:kF[r.brushType](l.values,r.range,[1,1]),xyMinMax:l.xyMinMax}}}),e},a.prototype.matchOutputRanges=function(e,t,r){se(e,function(n){var i=this.findTargetInfo(n,t);i&&i!==!0&&se(i.coordSyses,function(l){var o=wC[n.brushType](1,l,n.range,!0);r(n,o.values,l,t)})},this)},a.prototype.setInputRanges=function(e,t){se(e,function(r){var n=this.findTargetInfo(r,t);if(r.range=r.range||[],n&&n!==!0){r.panelId=n.panelId;var i=wC[r.brushType](0,n.coordSys,r.coordRange),l=r.__rangeOffset;r.range=l?kF[r.brushType](i.values,l.offset,nMe(i.xyMinMax,l.xyMinMax)):i.values}},this)},a.prototype.makePanelOpts=function(e,t){return ct(this._targetInfoList,function(r){var n=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:t?t(r):null,clipPath:bZ(n),isTargetByCursor:wZ(n,e,r.coordSysModel),getLinearBrushOtherExtent:yZ(n)}})},a.prototype.controlSeries=function(e,t,r){var n=this.findTargetInfo(e,r);return n===!0||n&&ja(n.coordSyses,t.coordinateSystem)>=0},a.prototype.findTargetInfo=function(e,t){for(var r=this._targetInfoList,n=_F(t,e),i=0;i<r.length;i++){var l=r[i],o=e.panelId;if(o){if(l.panelId===o)return l}else for(var c=0;c<NF.length;c++)if(NF[c](n,l))return l}return!0},a})();function gA(a){return a[0]>a[1]&&a.reverse(),a}function _F(a,e){return ux(a,e,{includeMainTypes:aMe})}var rMe={grid:function(a,e){var t=a.xAxisModels,r=a.yAxisModels,n=a.gridModels,i=Pt(),l={},o={};!t&&!r&&!n||(se(t,function(c){var d=c.axis.grid.model;i.set(d.id,d),l[d.id]=!0}),se(r,function(c){var d=c.axis.grid.model;i.set(d.id,d),o[d.id]=!0}),se(n,function(c){i.set(c.id,c),l[c.id]=!0,o[c.id]=!0}),i.each(function(c){var d=c.coordinateSystem,u=[];se(d.getCartesians(),function(h,f){(ja(t,h.getAxis("x").model)>=0||ja(r,h.getAxis("y").model)>=0)&&u.push(h)}),e.push({panelId:"grid--"+c.id,gridModel:c,coordSysModel:c,coordSys:u[0],coordSyses:u,getPanelRect:jF.grid,xAxisDeclared:l[c.id],yAxisDeclared:o[c.id]})}))},geo:function(a,e){se(a.geoModels,function(t){var r=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:r,coordSyses:[r],getPanelRect:jF.geo})})}},NF=[function(a,e){var t=a.xAxisModel,r=a.yAxisModel,n=a.gridModel;return!n&&t&&(n=t.axis.grid.model),!n&&r&&(n=r.axis.grid.model),n&&n===e.gridModel},function(a,e){var t=a.geoModel;return t&&t===e.geoModel}],jF={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var a=this.coordSys,e=a.getBoundingRect().clone();return e.applyTransform(d0(a)),e}},wC={lineX:ya(SF,0),lineY:ya(SF,1),rect:function(a,e,t,r){var n=a?e.pointToData([t[0][0],t[1][0]],r):e.dataToPoint([t[0][0],t[1][0]],r),i=a?e.pointToData([t[0][1],t[1][1]],r):e.dataToPoint([t[0][1],t[1][1]],r),l=[gA([n[0],i[0]]),gA([n[1],i[1]])];return{values:l,xyMinMax:l}},polygon:function(a,e,t,r){var n=[[1/0,-1/0],[1/0,-1/0]],i=ct(t,function(l){var o=a?e.pointToData(l,r):e.dataToPoint(l,r);return n[0][0]=Math.min(n[0][0],o[0]),n[1][0]=Math.min(n[1][0],o[1]),n[0][1]=Math.max(n[0][1],o[0]),n[1][1]=Math.max(n[1][1],o[1]),o});return{values:i,xyMinMax:n}}};function SF(a,e,t,r){var n=t.getAxis(["x","y"][a]),i=gA(ct([0,1],function(o){return e?n.coordToData(n.toLocalCoord(r[o]),!0):n.toGlobalCoord(n.dataToCoord(r[o]))})),l=[];return l[a]=i,l[1-a]=[NaN,NaN],{values:i,xyMinMax:l}}var kF={lineX:ya(CF,0),lineY:ya(CF,1),rect:function(a,e,t){return[[a[0][0]-t[0]*e[0][0],a[0][1]-t[0]*e[0][1]],[a[1][0]-t[1]*e[1][0],a[1][1]-t[1]*e[1][1]]]},polygon:function(a,e,t){return ct(a,function(r,n){return[r[0]-t[0]*e[n][0],r[1]-t[1]*e[n][1]]})}};function CF(a,e,t,r){return[e[0]-r[a]*t[0],e[1]-r[a]*t[1]]}function nMe(a,e){var t=AF(a),r=AF(e),n=[t[0]/r[0],t[1]/r[1]];return isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n}function AF(a){return a?[a[0][1]-a[0][0],a[1][1]-a[1][0]]:[NaN,NaN]}var vA=se,iMe=age("toolbox-dataZoom_"),sMe=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.render=function(t,r,n,i){this._brushController||(this._brushController=new o6(n.getZr()),this._brushController.on("brush",Tt(this._onBrush,this)).mount()),cMe(t,r,this,i,n),oMe(t,r)},e.prototype.onclick=function(t,r,n){lMe[n].call(this)},e.prototype.remove=function(t,r){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,r){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var r=t.areas;if(!t.isEnd||!r.length)return;var n={},i=this.ecModel;this._brushController.updateCovers([]);var l=new P6(z6(this.model),i,{include:["grid"]});l.matchOutputRanges(r,i,function(d,u,h){if(h.type==="cartesian2d"){var f=d.brushType;f==="rect"?(o("x",h,u[0]),o("y",h,u[1])):o({lineX:"x",lineY:"y"}[f],h,u)}}),KTe(i,n),this._dispatchZoomAction(n);function o(d,u,h){var f=u.getAxis(d),p=f.model,g=c(d,p,i),b=g.findRepresentativeAxisProxy(p).getMinMaxSpan();(b.minValueSpan!=null||b.maxValueSpan!=null)&&(h=jh(0,h.slice(),f.scale.getExtent(),0,b.minValueSpan,b.maxValueSpan)),g&&(n[g.id]={dataZoomId:g.id,startValue:h[0],endValue:h[1]})}function c(d,u,h){var f;return h.eachComponent({mainType:"dataZoom",subType:"select"},function(p){var g=p.getAxisModel(d,u.componentIndex);g&&(f=p)}),f}},e.prototype._dispatchZoomAction=function(t){var r=[];vA(t,function(n,i){r.push(Xt(n))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},e.getDefaultOption=function(t){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:Be.color.backgroundTint}};return r},e})(Kl),lMe={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(QTe(this.ecModel))}};function z6(a){var e={xAxisIndex:a.get("xAxisIndex",!0),yAxisIndex:a.get("yAxisIndex",!0),xAxisId:a.get("xAxisId",!0),yAxisId:a.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function oMe(a,e){a.setIconStatus("back",eMe(e)>1?"emphasis":"normal")}function cMe(a,e,t,r,n){var i=t._isZoomActive;r&&r.type==="takeGlobalCursor"&&(i=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),t._isZoomActive=i,a.setIconStatus("zoom",i?"emphasis":"normal");var l=new P6(z6(a),e,{include:["grid"]}),o=l.makePanelOpts(n,function(c){return c.xAxisDeclared&&!c.yAxisDeclared?"lineX":!c.xAxisDeclared&&c.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(o).enableBrush(i&&o.length?{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()}:!1)}Bbe("dataZoom",function(a){var e=a.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var r=e.getModel(t),n=[],i=z6(r),l=ux(a,i);vA(l.xAxisModels,function(c){return o(c,"xAxis","xAxisIndex")}),vA(l.yAxisModels,function(c){return o(c,"yAxis","yAxisIndex")});function o(c,d,u){var h=c.componentIndex,f={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:iMe+d+h};f[u]=h,n.push(f)}return n});function dMe(a){a.registerComponentModel(LTe),a.registerComponentView(OTe),qp("saveAsImage",zTe),qp("magicType",FTe),qp("dataView",XTe),qp("dataZoom",sMe),qp("restore",tMe),Ta(RTe)}var uMe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,displayTransition:!0,enterable:!1,backgroundColor:Be.color.neutral00,shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,defaultBorderColor:Be.color.border,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:Be.color.borderShade,width:1,type:"dashed",textStyle:{}}},textStyle:{color:Be.color.tertiary,fontSize:14}},e})(za);function xK(a){var e=a.get("confine");return e!=null?!!e:a.get("renderMode")==="richText"}function mK(a){if(Ba.domSupported){for(var e=document.documentElement.style,t=0,r=a.length;t<r;t++)if(a[t]in e)return a[t]}}var gK=mK(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),hMe=mK(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function vK(a,e){if(!a)return e;e=yY(e,!0);var t=a.indexOf(e);return a=t===-1?e:"-"+a.slice(0,t)+"-"+e,a.toLowerCase()}function fMe(a,e){var t=a.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(a);return t?t[e]:null}var pMe=vK(hMe,"transition"),B6=vK(gK,"transform"),xMe="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Ba.transform3dSupported?"will-change:transform;":"");function mMe(a){return a=a==="left"?"right":a==="right"?"left":a==="top"?"bottom":"top",a}function gMe(a,e,t){if(!At(t)||t==="inside")return"";var r=a.get("backgroundColor"),n=a.get("borderWidth");e=k0(e);var i=mMe(t),l=Math.max(Math.round(n)*1.5,6),o="",c=B6+":",d;ja(["left","right"],i)>-1?(o+="top:50%",c+="translateY(-50%) rotate("+(d=i==="left"?-225:-45)+"deg)"):(o+="left:50%",c+="translateX(-50%) rotate("+(d=i==="top"?225:45)+"deg)");var u=d*Math.PI/180,h=l+n,f=h*Math.abs(Math.cos(u))+h*Math.abs(Math.sin(u)),p=Math.round(((f-Math.SQRT2*n)/2+Math.SQRT2*n-(f-h)/2)*100)/100;o+=";"+i+":-"+p+"px";var g=e+" solid "+n+"px;",b=["position:absolute;width:"+l+"px;height:"+l+"px;z-index:-1;",o+";"+c+";","border-bottom:"+g,"border-right:"+g,"background-color:"+r+";"];return'<div style="'+b.join("")+'"></div>'}function vMe(a,e,t){var r="cubic-bezier(0.23,1,0.32,1)",n="",i="";return t&&(n=" "+a/2+"s "+r,i="opacity"+n+",visibility"+n),e||(n=" "+a+"s "+r,i+=(i.length?",":"")+(Ba.transformSupported?""+B6+n:",left"+n+",top"+n)),pMe+":"+i}function TF(a,e,t){var r=a.toFixed(0)+"px",n=e.toFixed(0)+"px";if(!Ba.transformSupported)return t?"top:"+n+";left:"+r+";":[["top",n],["left",r]];var i=Ba.transform3dSupported,l="translate"+(i?"3d":"")+"("+r+","+n+(i?",0":"")+")";return t?"top:0;left:0;"+B6+":"+l+";":[["top",0],["left",0],[gK,l]]}function bMe(a){var e=[],t=a.get("fontSize"),r=a.getTextColor();r&&e.push("color:"+r),e.push("font:"+a.getFont());var n=Ht(a.get("lineHeight"),Math.round(t*3/2));t&&e.push("line-height:"+n+"px");var i=a.get("textShadowColor"),l=a.get("textShadowBlur")||0,o=a.get("textShadowOffsetX")||0,c=a.get("textShadowOffsetY")||0;return i&&l&&e.push("text-shadow:"+o+"px "+c+"px "+l+"px "+i),se(["decoration","align"],function(d){var u=a.get(d);u&&e.push("text-"+d+":"+u)}),e.join(";")}function yMe(a,e,t,r){var n=[],i=a.get("transitionDuration"),l=a.get("backgroundColor"),o=a.get("shadowBlur"),c=a.get("shadowColor"),d=a.get("shadowOffsetX"),u=a.get("shadowOffsetY"),h=a.getModel("textStyle"),f=l$(a,"html"),p=d+"px "+u+"px "+o+"px "+c;return n.push("box-shadow:"+p),e&&i>0&&n.push(vMe(i,t,r)),l&&n.push("background-color:"+l),se(["width","color","radius"],function(g){var b="border-"+g,w=yY(b),j=a.get(w);j!=null&&n.push(b+":"+j+(g==="color"?"":"px"))}),n.push(bMe(h)),f!=null&&n.push("padding:"+Rb(f).join("px ")+"px"),n.join(";")+";"}function MF(a,e,t,r,n){var i=e&&e.painter;if(t){var l=i&&i.getViewportRoot();l&&Sxe(a,l,t,r,n)}else{a[0]=r,a[1]=n;var o=i&&i.getViewportRootOffset();o&&(a[0]+=o.offsetLeft,a[1]+=o.offsetTop)}a[2]=a[0]/e.getWidth(),a[3]=a[1]/e.getHeight()}var wMe=(function(){function a(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,Ba.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var n=this._zr=e.getZr(),i=t.appendTo,l=i&&(At(i)?document.querySelector(i):Sx(i)?i:Yt(i)&&i(e.getDom()));MF(this._styleCoord,n,l,e.getWidth()/2,e.getHeight()/2),(l||e.getDom()).appendChild(r),this._api=e,this._container=l;var o=this;r.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},r.onmousemove=function(c){if(c=c||window.event,!o._enterable){var d=n.handler,u=n.painter.getViewportRoot();Wl(u,c,!0),d.dispatch("mousemove",c)}},r.onmouseleave=function(){o._inContent=!1,o._enterable&&o._show&&o.hideLater(o._hideDelay)}}return a.prototype.update=function(e){if(!this._container){var t=this._api.getDom(),r=fMe(t,"position"),n=t.style;n.position!=="absolute"&&r!=="absolute"&&(n.position="relative")}var i=e.get("alwaysShowContent");i&&this._moveIfResized(),this._alwaysShowContent=i,this._enableDisplayTransition=e.get("displayTransition")&&e.get("transitionDuration")>0,this.el.className=e.get("className")||""},a.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,n=r.style,i=this._styleCoord;r.innerHTML?n.cssText=xMe+yMe(e,!this._firstShow,this._longHide,this._enableDisplayTransition)+TF(i[0],i[1],!0)+("border-color:"+k0(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):n.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},a.prototype.setContent=function(e,t,r,n,i){var l=this.el;if(e==null){l.innerHTML="";return}var o="";if(At(i)&&r.get("trigger")==="item"&&!xK(r)&&(o=gMe(r,n,i)),At(e))l.innerHTML=e+o;else if(e){l.innerHTML="",lt(e)||(e=[e]);for(var c=0;c<e.length;c++)Sx(e[c])&&e[c].parentNode!==l&&l.appendChild(e[c]);if(o&&l.childNodes.length){var d=document.createElement("div");d.innerHTML=o,l.appendChild(d)}}},a.prototype.setEnterable=function(e){this._enterable=e},a.prototype.getSize=function(){var e=this.el;return e?[e.offsetWidth,e.offsetHeight]:[0,0]},a.prototype.moveTo=function(e,t){if(this.el){var r=this._styleCoord;if(MF(r,this._zr,this._container,e,t),r[0]!=null&&r[1]!=null){var n=this.el.style,i=TF(r[0],r[1]);se(i,function(l){n[l[0]]=l[1]})}}},a.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},a.prototype.hide=function(){var e=this,t=this.el.style;this._enableDisplayTransition?(t.visibility="hidden",t.opacity="0"):t.display="none",Ba.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},a.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Tt(this.hide,this),e)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this._zr;kxe(e&&e.painter&&e.painter.getViewportRoot(),this._container);var t=this.el;if(t){t.onmouseenter=t.onmousemove=t.onmouseleave=null;var r=t.parentNode;r&&r.removeChild(t)}this.el=this._container=null},a})(),_Me=(function(){function a(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),DF(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return a.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},a.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},a.prototype.setContent=function(e,t,r,n,i){var l=this;aa(e)&&cr(""),this.el&&this._zr.remove(this.el);var o=r.getModel("textStyle");this.el=new tr({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:n,textShadowColor:o.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:l$(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),se(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(d){l.el.style[d]=r.get(d)}),se(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(d){l.el.style[d]=o.get(d)||0}),this._zr.add(this.el);var c=this;this.el.on("mouseover",function(){c._enterable&&(clearTimeout(c._hideTimeout),c._show=!0),c._inContent=!0}),this.el.on("mouseout",function(){c._enterable&&c._show&&c.hideLater(c._hideDelay),c._inContent=!1})},a.prototype.setEnterable=function(e){this._enterable=e},a.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),r=EF(e.style);return[t.width+r.left+r.right,t.height+r.top+r.bottom]},a.prototype.moveTo=function(e,t){var r=this.el;if(r){var n=this._styleCoord;DF(n,this._zr,e,t),e=n[0],t=n[1];var i=r.style,l=Bu(i.borderWidth||0),o=EF(i);r.x=e+l+o.left,r.y=t+l+o.top,r.markRedraw()}},a.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},a.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},a.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Tt(this.hide,this),e)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){this._zr.remove(this.el)},a})();function Bu(a){return Math.max(0,a)}function EF(a){var e=Bu(a.shadowBlur||0),t=Bu(a.shadowOffsetX||0),r=Bu(a.shadowOffsetY||0);return{left:Bu(e-t),right:Bu(e+t),top:Bu(e-r),bottom:Bu(e+r)}}function DF(a,e,t,r){a[0]=t,a[1]=r,a[2]=a[0]/e.getWidth(),a[3]=a[1]/e.getHeight()}var NMe=new Ea({shape:{x:-1,y:-1,width:2,height:2}}),jMe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){if(!(Ba.node||!r.getDom())){var n=t.getComponent("tooltip"),i=this._renderMode=cge(n.get("renderMode"));this._tooltipContent=i==="richText"?new _Me(r):new wMe(r,{appendTo:n.get("appendToBody",!0)?"body":n.get("appendTo",!0)})}},e.prototype.render=function(t,r,n){if(!(Ba.node||!n.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=r,this._api=n;var i=this._tooltipContent;i.update(t),i.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?Jx(this,"_updatePosition",50,"fixRate"):Zv(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,r=t.get("triggerOn");JZ("itemTooltip",this._api,Tt(function(n,i,l){r!=="none"&&(r.indexOf(n)>=0?this._tryShow(i,l):n==="leave"&&this._hide(l))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,r=this._ecModel,n=this._api,i=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&i!=="none"&&i!=="click"){var l=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&l.manuallyShowTip(t,r,n,{x:l._lastX,y:l._lastY,dataByCoordSys:l._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,r,n,i){if(!(i.from===this.uid||Ba.node||!n.getDom())){var l=IF(i,n);this._ticket="";var o=i.dataByCoordSys,c=AMe(i,r,n);if(c){var d=c.el.getBoundingRect().clone();d.applyTransform(c.el.transform),this._tryShow({offsetX:d.x+d.width/2,offsetY:d.y+d.height/2,target:c.el,position:i.position,positionDefault:"bottom"},l)}else if(i.tooltip&&i.x!=null&&i.y!=null){var u=NMe;u.x=i.x,u.y=i.y,u.update(),la(u).tooltipConfig={name:null,option:i.tooltip},this._tryShow({offsetX:i.x,offsetY:i.y,target:u},l)}else if(o)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:o,tooltipOption:i.tooltipOption},l);else if(i.seriesIndex!=null){if(this._manuallyAxisShowTip(t,r,n,i))return;var h=eK(i,r),f=h.point[0],p=h.point[1];f!=null&&p!=null&&this._tryShow({offsetX:f,offsetY:p,target:h.el,position:i.position,positionDefault:"bottom"},l)}else i.x!=null&&i.y!=null&&(n.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:n.getZr().findHover(i.x,i.y).target},l))}},e.prototype.manuallyHideTip=function(t,r,n,i){var l=this._tooltipContent;this._tooltipModel&&l.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,i.from!==this.uid&&this._hide(IF(i,n))},e.prototype._manuallyAxisShowTip=function(t,r,n,i){var l=i.seriesIndex,o=i.dataIndex,c=r.getComponent("axisPointer").coordSysAxesInfo;if(!(l==null||o==null||c==null)){var d=r.getSeriesByIndex(l);if(d){var u=d.getData(),h=Ng([u.getItemModel(o),d,(d.coordinateSystem||{}).model],this._tooltipModel);if(h.get("trigger")==="axis")return n.dispatchAction({type:"updateAxisPointer",seriesIndex:l,dataIndex:o,position:i.position}),!0}}},e.prototype._tryShow=function(t,r){var n=t.target,i=this._tooltipModel;if(i){this._lastX=t.offsetX,this._lastY=t.offsetY;var l=t.dataByCoordSys;if(l&&l.length)this._showAxisTooltip(l,t);else if(n){var o=la(n);if(o.ssrType==="legend")return;this._lastDataByCoordSys=null;var c,d;Kf(n,function(u){if(u.tooltipDisabled)return c=d=null,!0;c||d||(la(u).dataIndex!=null?c=u:la(u).tooltipConfig!=null&&(d=u))},!0),c?this._showSeriesItemTooltip(t,c,r):d?this._showComponentItemTooltip(t,d,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(t,r){var n=t.get("showDelay");r=Tt(r,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(r,n):r()},e.prototype._showAxisTooltip=function(t,r){var n=this._ecModel,i=this._tooltipModel,l=[r.offsetX,r.offsetY],o=Ng([r.tooltipOption],i),c=this._renderMode,d=[],u=Qn("section",{blocks:[],noHeader:!0}),h=[],f=new ak;se(t,function(k){se(k.dataByAxis,function(T){var E=n.getComponent(T.axisDim+"Axis",T.axisIndex),I=T.value;if(!(!E||I==null)){var R=ZZ(I,E.axis,n,T.seriesDataIndices,T.valueLabelOpt),P=Qn("section",{header:R,noHeader:!eo(R),sortBlocks:!0,blocks:[]});u.blocks.push(P),se(T.seriesDataIndices,function(H){var G=n.getSeriesByIndex(H.seriesIndex),X=H.dataIndexInside,U=G.getDataParams(X);if(!(U.dataIndex<0)){U.axisDim=T.axisDim,U.axisIndex=T.axisIndex,U.axisType=T.axisType,U.axisId=T.axisId,U.axisValue=t_(E.axis,{value:I}),U.axisValueLabel=R,U.marker=f.makeTooltipMarker("item",k0(U.color),c);var te=qP(G.formatTooltip(X,!0,null)),Z=te.frag;if(Z){var J=Ng([G],i).get("valueFormatter");P.blocks.push(J?et({valueFormatter:J},Z):Z)}te.text&&h.push(te.text),d.push(U)}})}})}),u.blocks.reverse(),h.reverse();var p=r.position,g=o.get("order"),b=e9(u,f,c,g,n.get("useUTC"),o.get("textStyle"));b&&h.unshift(b);var w=c==="richText"?`

`:"<br/>",j=h.join(w);this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(t,d)?this._updatePosition(o,p,l[0],l[1],this._tooltipContent,d):this._showTooltipContent(o,j,d,Math.random()+"",l[0],l[1],p,null,f)})},e.prototype._showSeriesItemTooltip=function(t,r,n){var i=this._ecModel,l=la(r),o=l.seriesIndex,c=i.getSeriesByIndex(o),d=l.dataModel||c,u=l.dataIndex,h=l.dataType,f=d.getData(h),p=this._renderMode,g=t.positionDefault,b=Ng([f.getItemModel(u),d,c&&(c.coordinateSystem||{}).model],this._tooltipModel,g?{position:g}:null),w=b.get("trigger");if(!(w!=null&&w!=="item")){var j=d.getDataParams(u,h),k=new ak;j.marker=k.makeTooltipMarker("item",k0(j.color),p);var T=qP(d.formatTooltip(u,!1,h)),E=b.get("order"),I=b.get("valueFormatter"),R=T.frag,P=R?e9(I?et({valueFormatter:I},R):R,k,p,E,i.get("useUTC"),b.get("textStyle")):T.text,H="item_"+d.name+"_"+u;this._showOrMove(b,function(){this._showTooltipContent(b,P,j,H,t.offsetX,t.offsetY,t.position,t.target,k)}),n({type:"showTip",dataIndexInside:u,dataIndex:f.getRawIndex(u),seriesIndex:o,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,r,n){var i=this._renderMode==="html",l=la(r),o=l.tooltipConfig,c=o.option||{},d=c.encodeHTMLContent;if(At(c)){var u=c;c={content:u,formatter:u},d=!0}d&&i&&c.content&&(c=Xt(c),c.content=Ss(c.content));var h=[c],f=this._ecModel.getComponent(l.componentMainType,l.componentIndex);f&&h.push(f),h.push({formatter:c.content});var p=t.positionDefault,g=Ng(h,this._tooltipModel,p?{position:p}:null),b=g.get("content"),w=Math.random()+"",j=new ak;this._showOrMove(g,function(){var k=Xt(g.get("formatterParams")||{});this._showTooltipContent(g,b,k,w,t.offsetX,t.offsetY,t.position,r,j)}),n({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,r,n,i,l,o,c,d,u){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var h=this._tooltipContent;h.setEnterable(t.get("enterable"));var f=t.get("formatter");c=c||t.get("position");var p=r,g=this._getNearestPoint([l,o],n,t.get("trigger"),t.get("borderColor"),t.get("defaultBorderColor",!0)),b=g.color;if(f)if(At(f)){var w=t.ecModel.get("useUTC"),j=lt(n)?n[0]:n,k=j&&j.axisType&&j.axisType.indexOf("time")>=0;p=f,k&&(p=kN(j.axisValue,p,w)),p=wY(p,n,!0)}else if(Yt(f)){var T=Tt(function(E,I){E===this._ticket&&(h.setContent(I,u,t,b,c),this._updatePosition(t,c,l,o,h,n,d))},this);this._ticket=i,p=f(n,i,T)}else p=f;h.setContent(p,u,t,b,c),h.show(t,b),this._updatePosition(t,c,l,o,h,n,d)}},e.prototype._getNearestPoint=function(t,r,n,i,l){if(n==="axis"||lt(r))return{color:i||l};if(!lt(r))return{color:i||r.color||r.borderColor}},e.prototype._updatePosition=function(t,r,n,i,l,o,c){var d=this._api.getWidth(),u=this._api.getHeight();r=r||t.get("position");var h=l.getSize(),f=t.get("align"),p=t.get("verticalAlign"),g=c&&c.getBoundingRect().clone();if(c&&g.applyTransform(c.transform),Yt(r)&&(r=r([n,i],o,l.el,g,{viewSize:[d,u],contentSize:h.slice()})),lt(r))n=kt(r[0],d),i=kt(r[1],u);else if(aa(r)){var b=r;b.width=h[0],b.height=h[1];var w=cn(b,{width:d,height:u});n=w.x,i=w.y,f=null,p=null}else if(At(r)&&c){var j=CMe(r,g,h,t.get("borderWidth"));n=j[0],i=j[1]}else{var j=SMe(n,i,l,d,u,f?null:20,p?null:20);n=j[0],i=j[1]}if(f&&(n-=RF(f)?h[0]/2:f==="right"?h[0]:0),p&&(i-=RF(p)?h[1]/2:p==="bottom"?h[1]:0),xK(t)){var j=kMe(n,i,l,d,u);n=j[0],i=j[1]}l.moveTo(n,i)},e.prototype._updateContentNotChangedOnAxis=function(t,r){var n=this._lastDataByCoordSys,i=this._cbParamsList,l=!!n&&n.length===t.length;return l&&se(n,function(o,c){var d=o.dataByAxis||[],u=t[c]||{},h=u.dataByAxis||[];l=l&&d.length===h.length,l&&se(d,function(f,p){var g=h[p]||{},b=f.seriesDataIndices||[],w=g.seriesDataIndices||[];l=l&&f.value===g.value&&f.axisType===g.axisType&&f.axisId===g.axisId&&b.length===w.length,l&&se(b,function(j,k){var T=w[k];l=l&&j.seriesIndex===T.seriesIndex&&j.dataIndex===T.dataIndex}),i&&se(f.seriesDataIndices,function(j){var k=j.seriesIndex,T=r[k],E=i[k];T&&E&&E.data!==T.data&&(l=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=r,!!l},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,r){Ba.node||!r.getDom()||(Zv(this,"_updatePosition"),this._tooltipContent.dispose(),dA("itemTooltip",r))},e.type="tooltip",e})(tn);function Ng(a,e,t){var r=e.ecModel,n;t?(n=new Fa(t,r,r),n=new Fa(e.option,n,r)):n=e;for(var i=a.length-1;i>=0;i--){var l=a[i];l&&(l instanceof Fa&&(l=l.get("tooltip",!0)),At(l)&&(l={formatter:l}),l&&(n=new Fa(l,n,r)))}return n}function IF(a,e){return a.dispatchAction||Tt(e.dispatchAction,e)}function SMe(a,e,t,r,n,i,l){var o=t.getSize(),c=o[0],d=o[1];return i!=null&&(a+c+i+2>r?a-=c+i:a+=i),l!=null&&(e+d+l>n?e-=d+l:e+=l),[a,e]}function kMe(a,e,t,r,n){var i=t.getSize(),l=i[0],o=i[1];return a=Math.min(a+l,r)-l,e=Math.min(e+o,n)-o,a=Math.max(a,0),e=Math.max(e,0),[a,e]}function CMe(a,e,t,r){var n=t[0],i=t[1],l=Math.ceil(Math.SQRT2*r)+8,o=0,c=0,d=e.width,u=e.height;switch(a){case"inside":o=e.x+d/2-n/2,c=e.y+u/2-i/2;break;case"top":o=e.x+d/2-n/2,c=e.y-i-l;break;case"bottom":o=e.x+d/2-n/2,c=e.y+u+l;break;case"left":o=e.x-n-l,c=e.y+u/2-i/2;break;case"right":o=e.x+d+l,c=e.y+u/2-i/2}return[o,c]}function RF(a){return a==="center"||a==="middle"}function AMe(a,e,t){var r=VT(a).queryOptionMap,n=r.keys()[0];if(!(!n||n==="series")){var i=Yx(e,n,r.get(n),{useDefault:!1,enableAll:!1,enableNone:!1}),l=i.models[0];if(l){var o=t.getViewOfComponentModel(l),c;if(o.group.traverse(function(d){var u=la(d).tooltipConfig;if(u&&u.name===a.name)return c=d,!0}),c)return{componentMainType:n,componentIndex:l.componentIndex,el:c}}}}function TMe(a){Ta(Wb),a.registerComponentModel(uMe),a.registerComponentView(jMe),a.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Bn),a.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Bn)}var MMe=["rect","polygon","keep","clear"];function EMe(a,e){var t=Or(a?a.brush:[]);if(t.length){var r=[];se(t,function(c){var d=c.hasOwnProperty("toolbox")?c.toolbox:[];d instanceof Array&&(r=r.concat(d))});var n=a&&a.toolbox;lt(n)&&(n=n[0]),n||(n={feature:{}},a.toolbox=[n]);var i=n.feature||(n.feature={}),l=i.brush||(i.brush={}),o=l.type||(l.type=[]);o.push.apply(o,r),DMe(o),e&&!o.length&&o.push.apply(o,MMe)}}function DMe(a){var e={};se(a,function(t){e[t]=1}),a.length=0,se(e,function(t,r){a.push(r)})}var LF=se;function OF(a){if(a){for(var e in a)if(a.hasOwnProperty(e))return!0}}function bA(a,e,t){var r={};return LF(e,function(i){var l=r[i]=n();LF(a[i],function(o,c){if(Ni.isValidType(c)){var d={type:c,visual:o};t&&t(d,i),l[c]=new Ni(d),c==="opacity"&&(d=Xt(d),d.type="colorAlpha",l.__hidden.__alphaForOpacity=new Ni(d))}})}),r;function n(){var i=function(){};i.prototype.__hidden=i.prototype;var l=new i;return l}}function bK(a,e,t){var r;se(t,function(n){e.hasOwnProperty(n)&&OF(e[n])&&(r=!0)}),r&&se(t,function(n){e.hasOwnProperty(n)&&OF(e[n])?a[n]=Xt(e[n]):delete a[n]})}function IMe(a,e,t,r,n,i){var l={};se(a,function(h){var f=Ni.prepareVisualTypes(e[h]);l[h]=f});var o;function c(h){return _M(t,o,h)}function d(h,f){g$(t,o,h,f)}t.each(u);function u(h,f){o=h;var p=t.getRawDataItem(o);if(!(p&&p.visualMap===!1))for(var g=r.call(n,h),b=e[g],w=l[g],j=0,k=w.length;j<k;j++){var T=w[j];b[T]&&b[T].applyVisual(h,c,d)}}}function RMe(a,e,t,r){var n={};return se(a,function(i){var l=Ni.prepareVisualTypes(e[i]);n[i]=l}),{progress:function(l,o){var c;r!=null&&(c=o.getDimensionIndex(r));function d(I){return _M(o,h,I)}function u(I,R){g$(o,h,I,R)}for(var h,f=o.getStore();(h=l.next())!=null;){var p=o.getRawDataItem(h);if(!(p&&p.visualMap===!1))for(var g=r!=null?f.get(c,h):h,b=t(g),w=e[b],j=n[b],k=0,T=j.length;k<T;k++){var E=j[k];w[E]&&w[E].applyVisual(g,d,u)}}}}}function LMe(a){var e=a.brushType,t={point:function(r){return PF[e].point(r,t,a)},rect:function(r){return PF[e].rect(r,t,a)}};return t}var PF={lineX:zF(0),lineY:zF(1),rect:{point:function(a,e,t){return a&&t.boundingRect.contain(a[0],a[1])},rect:function(a,e,t){return a&&t.boundingRect.intersect(a)}},polygon:{point:function(a,e,t){return a&&t.boundingRect.contain(a[0],a[1])&&Vf(t.range,a[0],a[1])},rect:function(a,e,t){var r=t.range;if(!a||r.length<=1)return!1;var n=a.x,i=a.y,l=a.width,o=a.height,c=r[0];if(Vf(r,n,i)||Vf(r,n+l,i)||Vf(r,n,i+o)||Vf(r,n+l,i+o)||ra.create(a).contain(c[0],c[1])||Gg(n,i,n+l,i,r)||Gg(n,i,n,i+o,r)||Gg(n+l,i,n+l,i+o,r)||Gg(n,i+o,n+l,i+o,r))return!0}}};function zF(a){var e=["x","y"],t=["width","height"];return{point:function(r,n,i){if(r){var l=i.range,o=r[a];return jg(o,l)}},rect:function(r,n,i){if(r){var l=i.range,o=[r[e[a]],r[e[a]]+r[t[a]]];return o[1]<o[0]&&o.reverse(),jg(o[0],l)||jg(o[1],l)||jg(l[0],o)||jg(l[1],o)}}}}function jg(a,e){return e[0]<=a&&a<=e[1]}var BF=["inBrush","outOfBrush"],_C="__ecBrushSelect",yA="__ecInBrushSelectEvent";function yK(a){a.eachComponent({mainType:"brush"},function(e){var t=e.brushTargetManager=new P6(e.option,a);t.setInputRanges(e.areas,a)})}function OMe(a,e,t){var r=[],n,i;a.eachComponent({mainType:"brush"},function(l){t&&t.type==="takeGlobalCursor"&&l.setBrushOption(t.key==="brush"?t.brushOption:{brushType:!1})}),yK(a),a.eachComponent({mainType:"brush"},function(l,o){var c={brushId:l.id,brushIndex:o,brushName:l.name,areas:Xt(l.areas),selected:[]};r.push(c);var d=l.option,u=d.brushLink,h=[],f=[],p=[],g=!1;o||(n=d.throttleType,i=d.throttleDelay);var b=ct(l.areas,function(I){var R=FMe[I.brushType],P=ta({boundingRect:R?R(I):void 0},I);return P.selectors=LMe(P),P}),w=bA(l.option,BF,function(I){I.mappingMethod="fixed"});lt(u)&&se(u,function(I){h[I]=1});function j(I){return u==="all"||!!h[I]}function k(I){return!!I.length}a.eachSeries(function(I,R){var P=p[R]=[];I.subType==="parallel"?T(I,R):E(I,R,P)});function T(I,R){var P=I.coordinateSystem;g=g||P.hasAxisBrushed(),j(R)&&P.eachActiveState(I.getData(),function(H,G){H==="active"&&(f[G]=1)})}function E(I,R,P){if(!(!I.brushSelector||BMe(l,R))&&(se(b,function(G){l.brushTargetManager.controlSeries(G,I,a)&&P.push(G),g=g||k(P)}),j(R)&&k(P))){var H=I.getData();H.each(function(G){FF(I,P,H,G)&&(f[G]=1)})}}a.eachSeries(function(I,R){var P={seriesId:I.id,seriesIndex:R,seriesName:I.name,dataIndex:[]};c.selected.push(P);var H=p[R],G=I.getData(),X=j(R)?function(U){return f[U]?(P.dataIndex.push(G.getRawIndex(U)),"inBrush"):"outOfBrush"}:function(U){return FF(I,H,G,U)?(P.dataIndex.push(G.getRawIndex(U)),"inBrush"):"outOfBrush"};(j(R)?g:k(H))&&IMe(BF,w,G,X)})}),PMe(e,n,i,r,t)}function PMe(a,e,t,r,n){if(n){var i=a.getZr();if(!i[yA]){i[_C]||(i[_C]=zMe);var l=Jx(i,_C,t,e);l(a,r)}}}function zMe(a,e){if(!a.isDisposed()){var t=a.getZr();t[yA]=!0,a.dispatchAction({type:"brushSelect",batch:e}),t[yA]=!1}}function FF(a,e,t,r){for(var n=0,i=e.length;n<i;n++){var l=e[n];if(a.brushSelector(r,t,l.selectors,l))return!0}}function BMe(a,e){var t=a.option.seriesIndex;return t!=null&&t!=="all"&&(lt(t)?ja(t,e)<0:e!==t)}var FMe={rect:function(a){return VF(a.range)},polygon:function(a){for(var e,t=a.range,r=0,n=t.length;r<n;r++){e=e||[[1/0,-1/0],[1/0,-1/0]];var i=t[r];i[0]<e[0][0]&&(e[0][0]=i[0]),i[0]>e[0][1]&&(e[0][1]=i[0]),i[1]<e[1][0]&&(e[1][0]=i[1]),i[1]>e[1][1]&&(e[1][1]=i[1])}return e&&VF(e)}};function VF(a){return new ra(a[0][0],a[1][0],a[0][1]-a[0][0],a[1][1]-a[1][0])}var VMe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){this.ecModel=t,this.api=r,this.model,(this._brushController=new o6(r.getZr())).on("brush",Tt(this._onBrush,this)).mount()},e.prototype.render=function(t,r,n,i){this.model=t,this._updateController(t,r,n,i)},e.prototype.updateTransform=function(t,r,n,i){yK(r),this._updateController(t,r,n,i)},e.prototype.updateVisual=function(t,r,n,i){this.updateTransform(t,r,n,i)},e.prototype.updateView=function(t,r,n,i){this._updateController(t,r,n,i)},e.prototype._updateController=function(t,r,n,i){(!i||i.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(n)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var r=this.model.id,n=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:Xt(n),$from:r}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:Xt(n),$from:r})},e.type="brush",e})(tn),HMe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.areas=[],t.brushOption={},t}return e.prototype.optionUpdated=function(t,r){var n=this.option;!r&&bK(n,t,["inBrush","outOfBrush"]);var i=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:this.option.defaultOutOfBrushColor},i.hasOwnProperty("liftZ")||(i.liftZ=5)},e.prototype.setAreas=function(t){t&&(this.areas=ct(t,function(r){return HF(this.option,r)},this))},e.prototype.setBrushOption=function(t){this.brushOption=HF(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:Be.color.backgroundTint,borderColor:Be.color.borderTint},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4,defaultOutOfBrushColor:Be.color.disabled},e})(za);function HF(a,e){return Ca({brushType:a.brushType,brushMode:a.brushMode,transformable:a.transformable,brushStyle:new Fa(a.brushStyle).getItemStyle(),removeOnClick:a.removeOnClick,z:a.z},e,!0)}var UMe=["rect","polygon","lineX","lineY","keep","clear"],GMe=(function(a){Ie(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.render=function(t,r,n){var i,l,o;r.eachComponent({mainType:"brush"},function(c){i=c.brushType,l=c.brushOption.brushMode||"single",o=o||!!c.areas.length}),this._brushType=i,this._brushMode=l,se(t.get("type",!0),function(c){t.setIconStatus(c,(c==="keep"?l==="multiple":c==="clear"?o:c===i)?"emphasis":"normal")})},e.prototype.updateView=function(t,r,n){this.render(t,r,n)},e.prototype.getIcons=function(){var t=this.model,r=t.get("icon",!0),n={};return se(t.get("type",!0),function(i){r[i]&&(n[i]=r[i])}),n},e.prototype.onclick=function(t,r,n){var i=this._brushType,l=this._brushMode;n==="clear"?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:n==="keep"?i:i===n?!1:n,brushMode:n==="keep"?l==="multiple"?"single":"multiple":l}})},e.getDefaultOption=function(t){var r={show:!0,type:UMe.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])};return r},e})(Kl);function WMe(a){a.registerComponentView(VMe),a.registerComponentModel(HMe),a.registerPreprocessor(EMe),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,OMe),a.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(r){r.setAreas(e.areas)})}),a.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},Bn),a.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},Bn),qp("brush",GMe)}var YMe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:"center",top:Be.size.m,backgroundColor:Be.color.transparent,borderColor:Be.color.primary,borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:Be.color.primary},subtextStyle:{fontSize:12,color:Be.color.quaternary}},e})(za),$Me=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){if(this.group.removeAll(),!!t.get("show")){var i=this.group,l=t.getModel("textStyle"),o=t.getModel("subtextStyle"),c=t.get("textAlign"),d=Ht(t.get("textBaseline"),t.get("textVerticalAlign")),u=new tr({style:Fr(l,{text:t.get("text"),fill:l.getTextColor()},{disableBox:!0}),z2:10}),h=u.getBoundingRect(),f=t.get("subtext"),p=new tr({style:Fr(o,{text:f,fill:o.getTextColor(),y:h.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),g=t.get("link"),b=t.get("sublink"),w=t.get("triggerEvent",!0);u.silent=!g&&!w,p.silent=!b&&!w,g&&u.on("click",function(){Y2(g,"_"+t.get("target"))}),b&&p.on("click",function(){Y2(b,"_"+t.get("subtarget"))}),la(u).eventData=la(p).eventData=w?{componentType:"title",componentIndex:t.componentIndex}:null,i.add(u),f&&i.add(p);var j=i.getBoundingRect(),k=t.getBoxLayoutParams();k.width=j.width,k.height=j.height;var T=pi(t,n),E=cn(k,T.refContainer,t.get("padding"));c||(c=t.get("left")||t.get("right"),c==="middle"&&(c="center"),c==="right"?E.x+=E.width:c==="center"&&(E.x+=E.width/2)),d||(d=t.get("top")||t.get("bottom"),d==="center"&&(d="middle"),d==="bottom"?E.y+=E.height:d==="middle"&&(E.y+=E.height/2),d=d||"top"),i.x=E.x,i.y=E.y,i.markRedraw();var I={align:c,verticalAlign:d};u.setStyle(I),p.setStyle(I),j=i.getBoundingRect();var R=E.margin,P=t.getItemStyle(["color","opacity"]);P.fill=t.get("backgroundColor");var H=new Ea({shape:{x:j.x-R[3],y:j.y-R[0],width:j.width+R[1]+R[3],height:j.height+R[0]+R[2],r:t.get("borderRadius")},style:P,subPixelOptimize:!0,silent:!0});i.add(H)}},e.type="title",e})(tn);function qMe(a){a.registerComponentModel(YMe),a.registerComponentView($Me)}var UF=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.layoutMode="box",t}return e.prototype.init=function(t,r,n){this.mergeDefaultAndTheme(t,n),this._initData()},e.prototype.mergeOption=function(t){a.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){t==null&&(t=this.option.currentIndex);var r=this._data.count();this.option.loop?t=(t%r+r)%r:(t>=r&&(t=r-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t=this.option,r=t.data||[],n=t.axisType,i=this._names=[],l;n==="category"?(l=[],se(r,function(d,u){var h=ui(Wx(d),""),f;aa(d)?(f=Xt(d),f.value=u):f=u,l.push(f),i.push(h)})):l=r;var o={category:"ordinal",time:"time",value:"number"}[n]||"number",c=this._data=new As([{name:"value",type:o}],this);c.initData(l,i)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:Be.size.m,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:Be.color.secondary},data:[]},e})(za),wK=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline.slider",e.defaultOption=Dh(UF.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:Be.color.border,borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:Be.color.accent10},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:Be.color.tertiary},itemStyle:{color:Be.color.accent20,borderWidth:0},checkpointStyle:{symbol:"circle",symbolSize:15,color:Be.color.accent50,borderColor:Be.color.accent50,borderWidth:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0, 0, 0, 0)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M15 0C23.2843 0 30 6.71573 30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15C0 6.71573 6.71573 0 15 0ZM15 3C8.37258 3 3 8.37258 3 15C3 21.6274 8.37258 27 15 27C21.6274 27 27 21.6274 27 15C27 8.37258 21.6274 3 15 3ZM11.5 10.6699C11.5 9.90014 12.3333 9.41887 13 9.80371L20.5 14.1338C21.1667 14.5187 21.1667 15.4813 20.5 15.8662L13 20.1963C12.3333 20.5811 11.5 20.0999 11.5 19.3301V10.6699Z",stopIcon:"path://M15 0C23.2843 0 30 6.71573 30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15C0 6.71573 6.71573 0 15 0ZM15 3C8.37258 3 3 8.37258 3 15C3 21.6274 8.37258 27 15 27C21.6274 27 27 21.6274 27 15C27 8.37258 21.6274 3 15 3ZM11.5 10C12.3284 10 13 10.6716 13 11.5V18.5C13 19.3284 12.3284 20 11.5 20C10.6716 20 10 19.3284 10 18.5V11.5C10 10.6716 10.6716 10 11.5 10ZM18.5 10C19.3284 10 20 10.6716 20 11.5V18.5C20 19.3284 19.3284 20 18.5 20C17.6716 20 17 19.3284 17 18.5V11.5C17 10.6716 17.6716 10 18.5 10Z",nextIcon:"path://M0.838834 18.7383C0.253048 18.1525 0.253048 17.2028 0.838834 16.617L7.55635 9.89949L0.838834 3.18198C0.253048 2.59619 0.253048 1.64645 0.838834 1.06066C1.42462 0.474874 2.37437 0.474874 2.96015 1.06066L10.7383 8.83883L10.8412 8.95277C11.2897 9.50267 11.2897 10.2963 10.8412 10.8462L10.7383 10.9602L2.96015 18.7383C2.37437 19.3241 1.42462 19.3241 0.838834 18.7383Z",prevIcon:"path://M10.9602 1.06066C11.5459 1.64645 11.5459 2.59619 10.9602 3.18198L4.24264 9.89949L10.9602 16.617C11.5459 17.2028 11.5459 18.1525 10.9602 18.7383C10.3744 19.3241 9.42462 19.3241 8.83883 18.7383L1.06066 10.9602L0.957771 10.8462C0.509245 10.2963 0.509245 9.50267 0.957771 8.95277L1.06066 8.83883L8.83883 1.06066C9.42462 0.474874 10.3744 0.474874 10.9602 1.06066Z",prevBtnSize:18,nextBtnSize:18,color:Be.color.accent50,borderColor:Be.color.accent50,borderWidth:0},emphasis:{label:{show:!0,color:Be.color.accent60},itemStyle:{color:Be.color.accent60,borderColor:Be.color.accent60},controlStyle:{color:Be.color.accent70,borderColor:Be.color.accent70}},progress:{lineStyle:{color:Be.color.accent30},itemStyle:{color:Be.color.accent40}},data:[]}),e})(UF);ei(wK,TN.prototype);var XMe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline",e})(tn),ZMe=(function(a){Ie(e,a);function e(t,r,n,i){var l=a.call(this,t,r,n)||this;return l.type=i||"value",l}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e})(Fo),NC=Math.PI,GF=Ia(),KMe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){this.api=r},e.prototype.render=function(t,r,n){if(this.model=t,this.api=n,this.ecModel=r,this.group.removeAll(),t.get("show",!0)){var i=this._layout(t,n),l=this._createGroup("_mainGroup"),o=this._createGroup("_labelGroup"),c=this._axis=this._createAxis(i,t);t.formatTooltip=function(d){var u=c.scale.getLabel({value:d});return Qn("nameValue",{noName:!0,value:u})},se(["AxisLine","AxisTick","Control","CurrentPointer"],function(d){this["_render"+d](i,l,c,t)},this),this._renderAxisLabel(i,o,c,t),this._position(i,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,r){var n=t.get(["label","position"]),i=t.get("orient"),l=JMe(t,r),o;n==null||n==="auto"?o=i==="horizontal"?l.y+l.height/2<r.getHeight()/2?"-":"+":l.x+l.width/2<r.getWidth()/2?"+":"-":At(n)?o={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][n]:o=n;var c={horizontal:"center",vertical:o>=0||o==="+"?"left":"right"},d={horizontal:o>=0||o==="+"?"top":"bottom",vertical:"middle"},u={horizontal:0,vertical:NC/2},h=i==="vertical"?l.height:l.width,f=t.getModel("controlStyle"),p=f.get("show",!0),g=p?f.get("itemSize"):0,b=p?f.get("itemGap"):0,w=g+b,j=t.get(["label","rotate"])||0;j=j*NC/180;var k,T,E,I=f.get("position",!0),R=p&&f.get("showPlayBtn",!0),P=p&&f.get("showPrevBtn",!0),H=p&&f.get("showNextBtn",!0),G=0,X=h;I==="left"||I==="bottom"?(R&&(k=[0,0],G+=w),P&&(T=[G,0],G+=w),H&&(E=[X-g,0],X-=w)):(R&&(k=[X-g,0],X-=w),P&&(T=[0,0],G+=w),H&&(E=[X-g,0],X-=w));var U=[G,X];return t.get("inverse")&&U.reverse(),{viewRect:l,mainLength:h,orient:i,rotation:u[i],labelRotation:j,labelPosOpt:o,labelAlign:t.get(["label","align"])||c[i],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||d[i],playPosition:k,prevBtnPosition:T,nextBtnPosition:E,axisExtent:U,controlSize:g,controlGap:b}},e.prototype._position=function(t,r){var n=this._mainGroup,i=this._labelGroup,l=t.viewRect;if(t.orient==="vertical"){var o=Li(),c=l.x,d=l.y+l.height;Ec(o,o,[-c,-d]),Mh(o,o,-NC/2),Ec(o,o,[c,d]),l=l.clone(),l.applyTransform(o)}var u=k(l),h=k(n.getBoundingRect()),f=k(i.getBoundingRect()),p=[n.x,n.y],g=[i.x,i.y];g[0]=p[0]=u[0][0];var b=t.labelPosOpt;if(b==null||At(b)){var w=b==="+"?0:1;T(p,h,u,1,w),T(g,f,u,1,1-w)}else{var w=b>=0?0:1;T(p,h,u,1,w),g[1]=p[1]+b}n.setPosition(p),i.setPosition(g),n.rotation=i.rotation=t.rotation,j(n),j(i);function j(E){E.originX=u[0][0]-E.x,E.originY=u[1][0]-E.y}function k(E){return[[E.x,E.x+E.width],[E.y,E.y+E.height]]}function T(E,I,R,P,H){E[P]+=R[P][H]-I[P][H]}},e.prototype._createAxis=function(t,r){var n=r.getData(),i=r.get("axisType"),l=QMe(r,i);l.getTicks=function(){return n.mapArray(["value"],function(d){return{value:d}})};var o=n.getDataExtent("value");l.setExtent(o[0],o[1]),l.calcNiceTicks();var c=new ZMe("value",l,t.axisExtent,i);return c.model=r,c},e.prototype._createGroup=function(t){var r=this[t]=new $t;return this.group.add(r),r},e.prototype._renderAxisLine=function(t,r,n,i){var l=n.getExtent();if(i.get(["lineStyle","show"])){var o=new qn({shape:{x1:l[0],y1:0,x2:l[1],y2:0},style:et({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});r.add(o);var c=this._progressLine=new qn({shape:{x1:l[0],x2:this._currentPointer?this._currentPointer.x:l[0],y1:0,y2:0},style:ta({lineCap:"round",lineWidth:o.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});r.add(c)}},e.prototype._renderAxisTick=function(t,r,n,i){var l=this,o=i.getData(),c=n.scale.getTicks();this._tickSymbols=[],se(c,function(d){var u=n.dataToCoord(d.value),h=o.getItemModel(d.value),f=h.getModel("itemStyle"),p=h.getModel(["emphasis","itemStyle"]),g=h.getModel(["progress","itemStyle"]),b={x:u,y:0,onclick:Tt(l._changeTimeline,l,d.value)},w=WF(h,f,r,b);w.ensureState("emphasis").style=p.getItemStyle(),w.ensureState("progress").style=g.getItemStyle(),c0(w);var j=la(w);h.get("tooltip")?(j.dataIndex=d.value,j.dataModel=i):j.dataIndex=j.dataModel=null,l._tickSymbols.push(w)})},e.prototype._renderAxisLabel=function(t,r,n,i){var l=this,o=n.getLabelModel();if(o.get("show")){var c=i.getData(),d=n.getViewLabels();this._tickLabels=[],se(d,function(u){var h=u.tickValue,f=c.getItemModel(h),p=f.getModel("label"),g=f.getModel(["emphasis","label"]),b=f.getModel(["progress","label"]),w=n.dataToCoord(u.tickValue),j=new tr({x:w,y:0,rotation:t.labelRotation-t.rotation,onclick:Tt(l._changeTimeline,l,h),silent:!1,style:Fr(p,{text:u.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});j.ensureState("emphasis").style=Fr(g),j.ensureState("progress").style=Fr(b),r.add(j),c0(j),GF(j).dataIndex=h,l._tickLabels.push(j)})}},e.prototype._renderControl=function(t,r,n,i){var l=t.controlSize,o=t.rotation,c=i.getModel("controlStyle").getItemStyle(),d=i.getModel(["emphasis","controlStyle"]).getItemStyle(),u=i.getPlayState(),h=i.get("inverse",!0);f(t.nextBtnPosition,"next",Tt(this._changeTimeline,this,h?"-":"+")),f(t.prevBtnPosition,"prev",Tt(this._changeTimeline,this,h?"+":"-")),f(t.playPosition,u?"stop":"play",Tt(this._handlePlayClick,this,!u),!0);function f(p,g,b,w){if(p){var j=Ro(Ht(i.get(["controlStyle",g+"BtnSize"]),l),l),k=[0,-j/2,j,j],T=e6e(i,g+"Icon",k,{x:p[0],y:p[1],originX:l/2,originY:0,rotation:w?-o:0,rectHover:!0,style:c,onclick:b});T.ensureState("emphasis").style=d,r.add(T),c0(T)}}},e.prototype._renderCurrentPointer=function(t,r,n,i){var l=i.getData(),o=i.getCurrentIndex(),c=l.getItemModel(o).getModel("checkpointStyle"),d=this,u={onCreate:function(h){h.draggable=!0,h.drift=Tt(d._handlePointerDrag,d),h.ondragend=Tt(d._handlePointerDragend,d),YF(h,d._progressLine,o,n,i,!0)},onUpdate:function(h){YF(h,d._progressLine,o,n,i)}};this._currentPointer=WF(c,c,this._mainGroup,{},this._currentPointer,u)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,r,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,r){var n=this._toAxisCoord(t)[0],i=this._axis,l=to(i.getExtent().slice());n>l[1]&&(n=l[1]),n<l[0]&&(n=l[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var o=this._progressLine;o&&(o.shape.x2=n,o.dirty());var c=this._findNearestTick(n),d=this.model;(r||c!==d.getCurrentIndex()&&d.get("realtime"))&&this._changeTimeline(c)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var r=t.model;t._changeTimeline(r.getCurrentIndex()+(r.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){var r=this._mainGroup.getLocalTransform();return To(t,r,!0)},e.prototype._findNearestTick=function(t){var r=this.model.getData(),n=1/0,i,l=this._axis;return r.each(["value"],function(o,c){var d=l.dataToCoord(o),u=Math.abs(d-t);u<n&&(n=u,i=c)}),i},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var r=this.model.getCurrentIndex();t==="+"?t=r+1:t==="-"&&(t=r-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),r=this._tickSymbols,n=this._tickLabels;if(r)for(var i=0;i<r.length;i++)r&&r[i]&&r[i].toggleState("progress",i<t);if(n)for(var i=0;i<n.length;i++)n&&n[i]&&n[i].toggleState("progress",GF(n[i]).dataIndex<=t)},e.type="timeline.slider",e})(XMe);function QMe(a,e){if(e=e||a.get("type"),e)switch(e){case"category":return new Dx({ordinalMeta:a.getCategories(),extent:[1/0,-1/0]});case"time":return new DM({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new Vd}}function JMe(a,e){return cn(a.getBoxLayoutParams(),pi(a,e).refContainer,a.get("padding"))}function e6e(a,e,t,r){var n=r.style,i=Ib(a.get(["controlStyle",e]),r||{},new ra(t[0],t[1],t[2],t[3]));return n&&i.setStyle(n),i}function WF(a,e,t,r,n,i){var l=e.get("color");if(n)n.setColor(l),t.add(n),i&&i.onUpdate(n);else{var o=a.get("symbol");n=Jn(o,-1,-1,2,2,l),n.setStyle("strokeNoScale",!0),t.add(n),i&&i.onCreate(n)}var c=e.getItemStyle(["color"]);n.setStyle(c),r=Ca({rectHover:!0,z2:100},r,!0);var d=em(a.get("symbolSize"));r.scaleX=d[0]/2,r.scaleY=d[1]/2;var u=P0(a.get("symbolOffset"),d);u&&(r.x=(r.x||0)+u[0],r.y=(r.y||0)+u[1]);var h=a.get("symbolRotate");return r.rotation=(h||0)*Math.PI/180||0,n.attr(r),n.updateTransform(),n}function YF(a,e,t,r,n,i){if(!a.dragging){var l=n.getModel("checkpointStyle"),o=r.dataToCoord(n.getData().get("value",t));if(i||!l.get("animation",!0))a.attr({x:o,y:0}),e&&e.attr({shape:{x2:o}});else{var c={duration:l.get("animationDuration",!0),easing:l.get("animationEasing",!0)};a.stopAnimation(null,!0),a.animateTo({x:o,y:0},c),e&&e.animateTo({shape:{x2:o}},c)}}}function t6e(a){a.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t,r){var n=t.getComponent("timeline");return n&&e.currentIndex!=null&&(n.setCurrentIndex(e.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),r.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),t.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),ta({currentIndex:n.option.currentIndex},e)}),a.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var r=t.getComponent("timeline");r&&e.playState!=null&&r.setPlayState(e.playState)})}function a6e(a){var e=a&&a.timeline;lt(e)||(e=e?[e]:[]),se(e,function(t){t&&r6e(t)})}function r6e(a){var e=a.type,t={number:"value",time:"time"};if(t[e]&&(a.axisType=t[e],delete a.type),$F(a),Gf(a,"controlPosition")){var r=a.controlStyle||(a.controlStyle={});Gf(r,"position")||(r.position=a.controlPosition),r.position==="none"&&!Gf(r,"show")&&(r.show=!1,delete r.position),delete a.controlPosition}se(a.data||[],function(n){aa(n)&&!lt(n)&&(!Gf(n,"value")&&Gf(n,"name")&&(n.value=n.name),$F(n))})}function $F(a){var e=a.itemStyle||(a.itemStyle={}),t=e.emphasis||(e.emphasis={}),r=a.label||a.label||{},n=r.normal||(r.normal={}),i={normal:1,emphasis:1};se(r,function(l,o){!i[o]&&!Gf(n,o)&&(n[o]=l)}),t.label&&!Gf(r,"emphasis")&&(r.emphasis=t.label,delete t.label)}function Gf(a,e){return a.hasOwnProperty(e)}function n6e(a){a.registerComponentModel(wK),a.registerComponentView(KMe),a.registerSubTypeDefaulter("timeline",function(){return"slider"}),t6e(a),a.registerPreprocessor(a6e)}function F6(a,e){if(!a)return!1;for(var t=lt(a)?a:[a],r=0;r<t.length;r++)if(t[r]&&t[r][e])return!0;return!1}function gw(a){y0(a,"label",["show"])}var vw=Ia(),Oc=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.createdBySelf=!1,t.preventAutoZ=!0,t}return e.prototype.init=function(t,r,n){this.mergeDefaultAndTheme(t,n),this._mergeOption(t,n,!1,!0)},e.prototype.isAnimationEnabled=function(){if(Ba.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,r){this._mergeOption(t,r,!1,!1)},e.prototype._mergeOption=function(t,r,n,i){var l=this.mainType;n||r.eachSeries(function(o){var c=o.get(this.mainType,!0),d=vw(o)[l];if(!c||!c.data){vw(o)[l]=null;return}d?d._mergeOption(c,r,!0):(i&&gw(c),se(c.data,function(u){u instanceof Array?(gw(u[0]),gw(u[1])):gw(u)}),d=this.createMarkerModelFromSeries(c,this,r),et(d,{mainType:this.mainType,seriesIndex:o.seriesIndex,name:o.name,createdBySelf:!0}),d.__hostSeries=o),vw(o)[l]=d},this)},e.prototype.formatTooltip=function(t,r,n){var i=this.getData(),l=this.getRawValue(t),o=i.getName(t);return Qn("section",{header:this.name,blocks:[Qn("nameValue",{name:o,value:l,noName:!o,noValue:l==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.prototype.getDataParams=function(t,r){var n=TN.prototype.getDataParams.call(this,t,r),i=this.__hostSeries;return i&&(n.seriesId=i.id,n.seriesName=i.name,n.seriesType=i.subType),n},e.getMarkerModelFromSeries=function(t,r){return vw(t)[r]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e})(za);ei(Oc,TN.prototype);var i6e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,n){return new e(t,r,n)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e})(Oc);function wA(a){return!(isNaN(parseFloat(a.x))&&isNaN(parseFloat(a.y)))}function s6e(a){return!isNaN(parseFloat(a.x))&&!isNaN(parseFloat(a.y))}function bw(a,e,t,r,n,i,l){var o=[],c=_h(e,n),d=c?e.getCalculationInfo("stackResultDimension"):n,u=S_(e,d,a),h=e.hostModel,f=h.indicesOfNearest(t,d,u)[0];o[i]=e.get(r,f),o[l]=e.get(d,f);var p=e.get(n,f),g=mc(e.get(n,f));return g=Math.min(g,20),g>=0&&(o[l]=+o[l].toFixed(g)),[o,p]}var yw={min:ya(bw,"min"),max:ya(bw,"max"),average:ya(bw,"average"),median:ya(bw,"median")};function hb(a,e){if(e){var t=a.getData(),r=a.coordinateSystem,n=r&&r.dimensions;if(!s6e(e)&&!lt(e.coord)&&lt(n)){var i=_K(e,t,r,a);if(e=Xt(e),e.type&&yw[e.type]&&i.baseAxis&&i.valueAxis){var l=ja(n,i.baseAxis.dim),o=ja(n,i.valueAxis.dim),c=yw[e.type](t,i.valueAxis.dim,i.baseDataDim,i.valueDataDim,l,o);e.coord=c[0],e.value=c[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!lt(n)){e.coord=[];var d=a.getBaseAxis();if(d&&e.type&&yw[e.type]){var u=r.getOtherAxis(d);u&&(e.value=S_(t,t.mapDimension(u.dim),e.type))}}else for(var h=e.coord,f=0;f<2;f++)yw[h[f]]&&(h[f]=S_(t,t.mapDimension(n[f]),h[f]));return e}}function _K(a,e,t,r){var n={};return a.valueIndex!=null||a.valueDim!=null?(n.valueDataDim=a.valueIndex!=null?e.getDimension(a.valueIndex):a.valueDim,n.valueAxis=t.getAxis(l6e(r,n.valueDataDim)),n.baseAxis=t.getOtherAxis(n.valueAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim)):(n.baseAxis=r.getBaseAxis(),n.valueAxis=t.getOtherAxis(n.baseAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim),n.valueDataDim=e.mapDimension(n.valueAxis.dim)),n}function l6e(a,e){var t=a.getData().getDimensionInfo(e);return t&&t.coordDim}function fb(a,e){return a&&a.containData&&e.coord&&!wA(e)?a.containData(e.coord):!0}function o6e(a,e,t){return a&&a.containZone&&e.coord&&t.coord&&!wA(e)&&!wA(t)?a.containZone(e.coord,t.coord):!0}function NK(a,e){return a?function(t,r,n,i){var l=i<2?t.coord&&t.coord[i]:t.value;return fh(l,e[i])}:function(t,r,n,i){return fh(t.value,e[i])}}function S_(a,e,t){if(t==="average"){var r=0,n=0;return a.each(e,function(i,l){isNaN(i)||(r+=i,n++)}),r/n}else return t==="median"?a.getMedian(e):a.getDataExtent(e)[t==="max"?1:0]}var jC=Ia(),V6=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this.markerGroupMap=Pt()},e.prototype.render=function(t,r,n){var i=this,l=this.markerGroupMap;l.each(function(o){jC(o).keep=!1}),r.eachSeries(function(o){var c=Oc.getMarkerModelFromSeries(o,i.type);c&&i.renderSeries(o,c,r,n)}),l.each(function(o){!jC(o).keep&&i.group.remove(o.group)}),c6e(r,l,this.type)},e.prototype.markKeep=function(t){jC(t).keep=!0},e.prototype.toggleBlurSeries=function(t,r){var n=this;se(t,function(i){var l=Oc.getMarkerModelFromSeries(i,n.type);if(l){var o=l.getData();o.eachItemGraphicEl(function(c){c&&(r?OW(c):XT(c))})}})},e.type="marker",e})(tn);function c6e(a,e,t){a.eachSeries(function(r){var n=Oc.getMarkerModelFromSeries(r,t),i=e.get(r.id);if(n&&i&&i.group){var l=S0(n),o=l.z,c=l.zlevel;jN(i.group,o,c)}})}function qF(a,e,t){var r=e.coordinateSystem,n=t.getWidth(),i=t.getHeight(),l=r&&r.getArea&&r.getArea();a.each(function(o){var c=a.getItemModel(o),d=c.get("relativeTo")==="coordinate",u=d?l?l.width:0:n,h=d?l?l.height:0:i,f=d&&l?l.x:0,p=d&&l?l.y:0,g,b=kt(c.get("x"),u)+f,w=kt(c.get("y"),h)+p;if(!isNaN(b)&&!isNaN(w))g=[b,w];else if(e.getMarkerPosition)g=e.getMarkerPosition(a.getValues(a.dimensions,o));else if(r){var j=a.get(r.dimensions[0],o),k=a.get(r.dimensions[1],o);g=r.dataToPoint([j,k])}isNaN(b)||(g[0]=b),isNaN(w)||(g[1]=w),a.setItemLayout(o,g)})}var d6e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,n){r.eachSeries(function(i){var l=Oc.getMarkerModelFromSeries(i,"markPoint");l&&(qF(l.getData(),i,n),this.markerGroupMap.get(i.id).updateLayout())},this)},e.prototype.renderSeries=function(t,r,n,i){var l=t.coordinateSystem,o=t.id,c=t.getData(),d=this.markerGroupMap,u=d.get(o)||d.set(o,new Vb),h=u6e(l,t,r);r.setData(h),qF(r.getData(),t,i),h.each(function(f){var p=h.getItemModel(f),g=p.getShallow("symbol"),b=p.getShallow("symbolSize"),w=p.getShallow("symbolRotate"),j=p.getShallow("symbolOffset"),k=p.getShallow("symbolKeepAspect");if(Yt(g)||Yt(b)||Yt(w)||Yt(j)){var T=r.getRawValue(f),E=r.getDataParams(f);Yt(g)&&(g=g(T,E)),Yt(b)&&(b=b(T,E)),Yt(w)&&(w=w(T,E)),Yt(j)&&(j=j(T,E))}var I=p.getModel("itemStyle").getItemStyle(),R=p.get("z2"),P=Pb(c,"color");I.fill||(I.fill=P),h.setItemVisual(f,{z2:Ht(R,0),symbol:g,symbolSize:b,symbolRotate:w,symbolOffset:j,symbolKeepAspect:k,style:I})}),u.updateData(h),this.group.add(u.group),h.eachItemGraphicEl(function(f){f.traverse(function(p){la(p).dataModel=r})}),this.markKeep(u),u.group.silent=r.get("silent")||t.get("silent")},e.type="markPoint",e})(V6);function u6e(a,e,t){var r;a?r=ct(a&&a.dimensions,function(o){var c=e.getData().getDimensionInfo(e.getData().mapDimension(o))||{};return et(et({},c),{name:o,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var n=new As(r,t),i=ct(t.get("data"),ya(hb,e));a&&(i=pr(i,ya(fb,a)));var l=NK(!!a,r);return n.initData(i,null,l),n}function h6e(a){a.registerComponentModel(i6e),a.registerComponentView(d6e),a.registerPreprocessor(function(e){F6(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})})}var f6e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,n){return new e(t,r,n)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e})(Oc),ww=Ia(),p6e=function(a,e,t,r){var n=a.getData(),i;if(lt(r))i=r;else{var l=r.type;if(l==="min"||l==="max"||l==="average"||l==="median"||r.xAxis!=null||r.yAxis!=null){var o=void 0,c=void 0;if(r.yAxis!=null||r.xAxis!=null)o=e.getAxis(r.yAxis!=null?"y":"x"),c=$i(r.yAxis,r.xAxis);else{var d=_K(r,n,e,a);o=d.valueAxis;var u=Z$(n,d.valueDataDim);c=S_(n,u,l)}var h=o.dim==="x"?0:1,f=1-h,p=Xt(r),g={coord:[]};p.type=null,p.coord=[],p.coord[f]=-1/0,g.coord[f]=1/0;var b=t.get("precision");b>=0&&Ka(c)&&(c=+c.toFixed(Math.min(b,20))),p.coord[h]=g.coord[h]=c,i=[p,g,{type:l,valueIndex:r.valueIndex,value:c}]}else i=[]}var w=[hb(a,i[0]),hb(a,i[1]),et({},i[2])];return w[2].type=w[2].type||null,Ca(w[2],w[0]),Ca(w[2],w[1]),w};function k_(a){return!isNaN(a)&&!isFinite(a)}function XF(a,e,t,r){var n=1-a,i=r.dimensions[a];return k_(e[n])&&k_(t[n])&&e[a]===t[a]&&r.getAxis(i).containData(e[a])}function x6e(a,e){if(a.type==="cartesian2d"){var t=e[0].coord,r=e[1].coord;if(t&&r&&(XF(1,t,r,a)||XF(0,t,r,a)))return!0}return fb(a,e[0])&&fb(a,e[1])}function SC(a,e,t,r,n){var i=r.coordinateSystem,l=a.getItemModel(e),o,c=kt(l.get("x"),n.getWidth()),d=kt(l.get("y"),n.getHeight());if(!isNaN(c)&&!isNaN(d))o=[c,d];else{if(r.getMarkerPosition)o=r.getMarkerPosition(a.getValues(a.dimensions,e));else{var u=i.dimensions,h=a.get(u[0],e),f=a.get(u[1],e);o=i.dataToPoint([h,f])}if(Nh(i,"cartesian2d")){var p=i.getAxis("x"),g=i.getAxis("y"),u=i.dimensions;k_(a.get(u[0],e))?o[0]=p.toGlobalCoord(p.getExtent()[t?0:1]):k_(a.get(u[1],e))&&(o[1]=g.toGlobalCoord(g.getExtent()[t?0:1]))}isNaN(c)||(o[0]=c),isNaN(d)||(o[1]=d)}a.setItemLayout(e,o)}var m6e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,n){r.eachSeries(function(i){var l=Oc.getMarkerModelFromSeries(i,"markLine");if(l){var o=l.getData(),c=ww(l).from,d=ww(l).to;c.each(function(u){SC(c,u,!0,i,n),SC(d,u,!1,i,n)}),o.each(function(u){o.setItemLayout(u,[c.getItemLayout(u),d.getItemLayout(u)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},e.prototype.renderSeries=function(t,r,n,i){var l=t.coordinateSystem,o=t.id,c=t.getData(),d=this.markerGroupMap,u=d.get(o)||d.set(o,new s6);this.group.add(u.group);var h=g6e(l,t,r),f=h.from,p=h.to,g=h.line;ww(r).from=f,ww(r).to=p,r.setData(g);var b=r.get("symbol"),w=r.get("symbolSize"),j=r.get("symbolRotate"),k=r.get("symbolOffset");lt(b)||(b=[b,b]),lt(w)||(w=[w,w]),lt(j)||(j=[j,j]),lt(k)||(k=[k,k]),h.from.each(function(E){T(f,E,!0),T(p,E,!1)}),g.each(function(E){var I=g.getItemModel(E),R=I.getModel("lineStyle").getLineStyle();g.setItemLayout(E,[f.getItemLayout(E),p.getItemLayout(E)]);var P=I.get("z2");R.stroke==null&&(R.stroke=f.getItemVisual(E,"style").fill),g.setItemVisual(E,{z2:Ht(P,0),fromSymbolKeepAspect:f.getItemVisual(E,"symbolKeepAspect"),fromSymbolOffset:f.getItemVisual(E,"symbolOffset"),fromSymbolRotate:f.getItemVisual(E,"symbolRotate"),fromSymbolSize:f.getItemVisual(E,"symbolSize"),fromSymbol:f.getItemVisual(E,"symbol"),toSymbolKeepAspect:p.getItemVisual(E,"symbolKeepAspect"),toSymbolOffset:p.getItemVisual(E,"symbolOffset"),toSymbolRotate:p.getItemVisual(E,"symbolRotate"),toSymbolSize:p.getItemVisual(E,"symbolSize"),toSymbol:p.getItemVisual(E,"symbol"),style:R})}),u.updateData(g),h.line.eachItemGraphicEl(function(E){la(E).dataModel=r,E.traverse(function(I){la(I).dataModel=r})});function T(E,I,R){var P=E.getItemModel(I);SC(E,I,R,t,i);var H=P.getModel("itemStyle").getItemStyle();H.fill==null&&(H.fill=Pb(c,"color")),E.setItemVisual(I,{symbolKeepAspect:P.get("symbolKeepAspect"),symbolOffset:Ht(P.get("symbolOffset",!0),k[R?0:1]),symbolRotate:Ht(P.get("symbolRotate",!0),j[R?0:1]),symbolSize:Ht(P.get("symbolSize"),w[R?0:1]),symbol:Ht(P.get("symbol",!0),b[R?0:1]),style:H})}this.markKeep(u),u.group.silent=r.get("silent")||t.get("silent")},e.type="markLine",e})(V6);function g6e(a,e,t){var r;a?r=ct(a&&a.dimensions,function(d){var u=e.getData().getDimensionInfo(e.getData().mapDimension(d))||{};return et(et({},u),{name:d,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var n=new As(r,t),i=new As(r,t),l=new As([],t),o=ct(t.get("data"),ya(p6e,e,a,t));a&&(o=pr(o,ya(x6e,a)));var c=NK(!!a,r);return n.initData(ct(o,function(d){return d[0]}),null,c),i.initData(ct(o,function(d){return d[1]}),null,c),l.initData(ct(o,function(d){return d[2]})),l.hasItemOption=!0,{from:n,to:i,line:l}}function v6e(a){a.registerComponentModel(f6e),a.registerComponentView(m6e),a.registerPreprocessor(function(e){F6(e.series,"markLine")&&(e.markLine=e.markLine||{})})}var b6e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,n){return new e(t,r,n)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e})(Oc),_w=Ia(),y6e=function(a,e,t,r){var n=r[0],i=r[1];if(!(!n||!i)){var l=hb(a,n),o=hb(a,i),c=l.coord,d=o.coord;c[0]=$i(c[0],-1/0),c[1]=$i(c[1],-1/0),d[0]=$i(d[0],1/0),d[1]=$i(d[1],1/0);var u=ET([{},l,o]);return u.coord=[l.coord,o.coord],u.x0=l.x,u.y0=l.y,u.x1=o.x,u.y1=o.y,u}};function C_(a){return!isNaN(a)&&!isFinite(a)}function ZF(a,e,t,r){var n=1-a;return C_(e[n])&&C_(t[n])}function w6e(a,e){var t=e.coord[0],r=e.coord[1],n={coord:t,x:e.x0,y:e.y0},i={coord:r,x:e.x1,y:e.y1};return Nh(a,"cartesian2d")?t&&r&&(ZF(1,t,r)||ZF(0,t,r))?!0:o6e(a,n,i):fb(a,n)||fb(a,i)}function KF(a,e,t,r,n){var i=r.coordinateSystem,l=a.getItemModel(e),o,c=kt(l.get(t[0]),n.getWidth()),d=kt(l.get(t[1]),n.getHeight());if(!isNaN(c)&&!isNaN(d))o=[c,d];else{if(r.getMarkerPosition){var u=a.getValues(["x0","y0"],e),h=a.getValues(["x1","y1"],e),f=i.clampData(u),p=i.clampData(h),g=[];t[0]==="x0"?g[0]=f[0]>p[0]?h[0]:u[0]:g[0]=f[0]>p[0]?u[0]:h[0],t[1]==="y0"?g[1]=f[1]>p[1]?h[1]:u[1]:g[1]=f[1]>p[1]?u[1]:h[1],o=r.getMarkerPosition(g,t,!0)}else{var b=a.get(t[0],e),w=a.get(t[1],e),j=[b,w];i.clampData&&i.clampData(j,j),o=i.dataToPoint(j,!0)}if(Nh(i,"cartesian2d")){var k=i.getAxis("x"),T=i.getAxis("y"),b=a.get(t[0],e),w=a.get(t[1],e);C_(b)?o[0]=k.toGlobalCoord(k.getExtent()[t[0]==="x0"?0:1]):C_(w)&&(o[1]=T.toGlobalCoord(T.getExtent()[t[1]==="y0"?0:1]))}isNaN(c)||(o[0]=c),isNaN(d)||(o[1]=d)}return o}var QF=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],_6e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,n){r.eachSeries(function(i){var l=Oc.getMarkerModelFromSeries(i,"markArea");if(l){var o=l.getData();o.each(function(c){var d=ct(QF,function(h){return KF(o,c,h,i,n)});o.setItemLayout(c,d);var u=o.getItemGraphicEl(c);u.setShape("points",d)})}},this)},e.prototype.renderSeries=function(t,r,n,i){var l=t.coordinateSystem,o=t.id,c=t.getData(),d=this.markerGroupMap,u=d.get(o)||d.set(o,{group:new $t});this.group.add(u.group),this.markKeep(u);var h=N6e(l,t,r);r.setData(h),h.each(function(f){var p=ct(QF,function(X){return KF(h,f,X,t,i)}),g=l.getAxis("x").scale,b=l.getAxis("y").scale,w=g.getExtent(),j=b.getExtent(),k=[g.parse(h.get("x0",f)),g.parse(h.get("x1",f))],T=[b.parse(h.get("y0",f)),b.parse(h.get("y1",f))];to(k),to(T);var E=!(w[0]>k[1]||w[1]<k[0]||j[0]>T[1]||j[1]<T[0]),I=!E;h.setItemLayout(f,{points:p,allClipped:I});var R=h.getItemModel(f),P=R.getModel("itemStyle").getItemStyle(),H=R.get("z2"),G=Pb(c,"color");P.fill||(P.fill=G,At(P.fill)&&(P.fill=D2(P.fill,.4))),P.stroke||(P.stroke=G),h.setItemVisual(f,"style",P),h.setItemVisual(f,"z2",Ht(H,0))}),h.diff(_w(u).data).add(function(f){var p=h.getItemLayout(f),g=h.getItemVisual(f,"z2");if(!p.allClipped){var b=new fs({z2:Ht(g,0),shape:{points:p.points}});h.setItemGraphicEl(f,b),u.group.add(b)}}).update(function(f,p){var g=_w(u).data.getItemGraphicEl(p),b=h.getItemLayout(f),w=h.getItemVisual(f,"z2");b.allClipped?g&&u.group.remove(g):(g?nr(g,{z2:Ht(w,0),shape:{points:b.points}},r,f):g=new fs({shape:{points:b.points}}),h.setItemGraphicEl(f,g),u.group.add(g))}).remove(function(f){var p=_w(u).data.getItemGraphicEl(f);u.group.remove(p)}).execute(),h.eachItemGraphicEl(function(f,p){var g=h.getItemModel(p),b=h.getItemVisual(p,"style");f.useStyle(h.getItemVisual(p,"style")),ji(f,fi(g),{labelFetcher:r,labelDataIndex:p,defaultText:h.getName(p)||"",inheritColor:At(b.fill)?D2(b.fill,1):Be.color.neutral99}),hi(f,g),on(f,null,null,g.get(["emphasis","disabled"])),la(f).dataModel=r}),_w(u).data=h,u.group.silent=r.get("silent")||t.get("silent")},e.type="markArea",e})(V6);function N6e(a,e,t){var r,n,i=["x0","y0","x1","y1"];if(a){var l=ct(a&&a.dimensions,function(d){var u=e.getData(),h=u.getDimensionInfo(u.mapDimension(d))||{};return et(et({},h),{name:d,ordinalMeta:null})});n=ct(i,function(d,u){return{name:d,type:l[u%2].type}}),r=new As(n,t)}else n=[{name:"value",type:"float"}],r=new As(n,t);var o=ct(t.get("data"),ya(y6e,e,a,t));a&&(o=pr(o,ya(w6e,a)));var c=a?function(d,u,h,f){var p=d.coord[Math.floor(f/2)][f%2];return fh(p,n[f])}:function(d,u,h,f){return fh(d.value,n[f])};return r.initData(o,null,c),r.hasItemOption=!0,r}function j6e(a){a.registerComponentModel(b6e),a.registerComponentView(_6e),a.registerPreprocessor(function(e){F6(e.series,"markArea")&&(e.markArea=e.markArea||{})})}var S6e=function(a,e){if(e==="all")return{type:"all",title:a.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:a.getLocaleModel().get(["legend","selector","inverse"])}},_A=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,r,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,r){a.prototype.mergeOption.call(this,t,r),this._updateSelector(t)},e.prototype._updateSelector=function(t){var r=t.selector,n=this.ecModel;r===!0&&(r=t.selector=["all","inverse"]),lt(r)&&se(r,function(i,l){At(i)&&(i={type:i}),r[l]=Ca(i,S6e(n,i.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var r=!1,n=0;n<t.length;n++){var i=t[n].get("name");if(this.isSelected(i)){this.select(i),r=!0;break}}!r&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var r=[],n=[];t.eachRawSeries(function(c){var d=c.name;n.push(d);var u;if(c.legendVisualProvider){var h=c.legendVisualProvider,f=h.getAllNames();t.isSeriesFiltered(c)||(n=n.concat(f)),f.length?r=r.concat(f):u=!0}else u=!0;u&&FT(c)&&r.push(c.name)}),this._availableNames=n;var i=this.get("data")||r,l=Pt(),o=ct(i,function(c){return(At(c)||Ka(c))&&(c={name:c}),l.get(c.name)?null:(l.set(c.name,!0),new Fa(c,this,this.ecModel))},this);this._data=pr(o,function(c){return!!c})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var r=this.option.selected,n=this.get("selectedMode");if(n==="single"){var i=this._data;se(i,function(l){r[l.get("name")]=!1})}r[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var r=this.option.selected;r.hasOwnProperty(t)||(r[t]=!0),this[r[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,r=this.option.selected;se(t,function(n){r[n.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,r=this.option.selected;se(t,function(n){var i=n.get("name",!0);r.hasOwnProperty(i)||(r[i]=!0),r[i]=!r[i]})},e.prototype.isSelected=function(t){var r=this.option.selected;return!(r.hasOwnProperty(t)&&!r[t])&&ja(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",bottom:Be.size.m,align:"auto",backgroundColor:Be.color.transparent,borderColor:Be.color.border,borderRadius:0,borderWidth:0,padding:5,itemGap:8,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:Be.color.disabled,inactiveBorderColor:Be.color.disabled,inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:Be.color.disabled,inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:Be.color.secondary},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:Be.color.tertiary,borderWidth:1,borderColor:Be.color.border},emphasis:{selectorLabel:{show:!0,color:Be.color.quaternary}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1},triggerEvent:!1},e})(za),Fp=ya,NA=se,Nw=$t,jK=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new Nw),this.group.add(this._selectorGroup=new Nw),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,r,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var l=t.get("align"),o=t.get("orient");(!l||l==="auto")&&(l=t.get("left")==="right"&&o==="vertical"?"right":"left");var c=t.get("selector",!0),d=t.get("selectorPosition",!0);c&&(!d||d==="auto")&&(d=o==="horizontal"?"end":"start"),this.renderInner(l,t,r,n,c,o,d);var u=pi(t,n).refContainer,h=t.getBoxLayoutParams(),f=t.get("padding"),p=cn(h,u,f),g=this.layoutInner(t,l,p,i,c,d),b=cn(ta({width:g.width,height:g.height},h),u,f);this.group.x=b.x-g.x,this.group.y=b.y-g.y,this.group.markRedraw(),this.group.add(this._backgroundEl=hK(g,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,r,n,i,l,o,c){var d=this.getContentGroup(),u=Pt(),h=r.get("selectedMode"),f=r.get("triggerEvent"),p=[];n.eachRawSeries(function(g){!g.get("legendHoverLink")&&p.push(g.id)}),NA(r.getData(),function(g,b){var w=this,j=g.get("name");if(!this.newlineDisabled&&(j===""||j===`
`)){var k=new Nw;k.newline=!0,d.add(k);return}var T=n.getSeriesByName(j)[0];if(!u.get(j))if(T){var E=T.getData(),I=E.getVisual("legendLineStyle")||{},R=E.getVisual("legendIcon"),P=E.getVisual("style"),H=this._createItem(T,j,b,g,r,t,I,P,R,h,i);H.on("click",Fp(JF,j,null,i,p)).on("mouseover",Fp(jA,T.name,null,i,p)).on("mouseout",Fp(SA,T.name,null,i,p)),n.ssr&&H.eachChild(function(G){var X=la(G);X.seriesIndex=T.seriesIndex,X.dataIndex=b,X.ssrType="legend"}),f&&H.eachChild(function(G){w.packEventData(G,r,T,b,j)}),u.set(j,!0)}else n.eachRawSeries(function(G){var X=this;if(!u.get(j)&&G.legendVisualProvider){var U=G.legendVisualProvider;if(!U.containName(j))return;var te=U.indexOfName(j),Z=U.getItemVisual(te,"style"),J=U.getItemVisual(te,"legendIcon"),B=Ks(Z.fill);B&&B[3]===0&&(B[3]=.2,Z=et(et({},Z),{fill:kc(B,"rgba")}));var W=this._createItem(G,j,b,g,r,t,{},Z,J,h,i);W.on("click",Fp(JF,null,j,i,p)).on("mouseover",Fp(jA,null,j,i,p)).on("mouseout",Fp(SA,null,j,i,p)),n.ssr&&W.eachChild(function($){var Q=la($);Q.seriesIndex=G.seriesIndex,Q.dataIndex=b,Q.ssrType="legend"}),f&&W.eachChild(function($){X.packEventData($,r,G,b,j)}),u.set(j,!0)}},this)},this),l&&this._createSelector(l,r,i,o,c)},e.prototype.packEventData=function(t,r,n,i,l){var o={componentType:"legend",componentIndex:r.componentIndex,dataIndex:i,value:l,seriesIndex:n.seriesIndex};la(t).eventData=o},e.prototype._createSelector=function(t,r,n,i,l){var o=this.getSelectorGroup();NA(t,function(d){var u=d.type,h=new tr({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:u==="all"?"legendAllSelect":"legendInverseSelect",legendId:r.id})}});o.add(h);var f=r.getModel("selectorLabel"),p=r.getModel(["emphasis","selectorLabel"]);ji(h,{normal:f,emphasis:p},{defaultText:d.title}),c0(h)})},e.prototype._createItem=function(t,r,n,i,l,o,c,d,u,h,f){var p=t.visualDrawType,g=l.get("itemWidth"),b=l.get("itemHeight"),w=l.isSelected(r),j=i.get("symbolRotate"),k=i.get("symbolKeepAspect"),T=i.get("icon");u=T||u||"roundRect";var E=k6e(u,i,c,d,p,w,f),I=new Nw,R=i.getModel("textStyle");if(Yt(t.getLegendIcon)&&(!T||T==="inherit"))I.add(t.getLegendIcon({itemWidth:g,itemHeight:b,icon:u,iconRotate:j,itemStyle:E.itemStyle,lineStyle:E.lineStyle,symbolKeepAspect:k}));else{var P=T==="inherit"&&t.getData().getVisual("symbol")?j==="inherit"?t.getData().getVisual("symbolRotate"):j:0;I.add(C6e({itemWidth:g,itemHeight:b,icon:u,iconRotate:P,itemStyle:E.itemStyle,symbolKeepAspect:k}))}var H=o==="left"?g+5:-5,G=o,X=l.get("formatter"),U=r;At(X)&&X?U=X.replace("{name}",r??""):Yt(X)&&(U=X(r));var te=w?R.getTextColor():i.get("inactiveColor");I.add(new tr({style:Fr(R,{text:U,x:H,y:b/2,fill:te,align:G,verticalAlign:"middle"},{inheritColor:te})}));var Z=new Ea({shape:I.getBoundingRect(),style:{fill:"transparent"}}),J=i.getModel("tooltip");return J.get("show")&&Yd({el:Z,componentModel:l,itemName:r,itemTooltipOption:J.option}),I.add(Z),I.eachChild(function(B){B.silent=!0}),Z.silent=!h,this.getContentGroup().add(I),c0(I),I.__legendDataIndex=n,I},e.prototype.layoutInner=function(t,r,n,i,l,o){var c=this.getContentGroup(),d=this.getSelectorGroup();u0(t.get("orient"),c,t.get("itemGap"),n.width,n.height);var u=c.getBoundingRect(),h=[-u.x,-u.y];if(d.markRedraw(),c.markRedraw(),l){u0("horizontal",d,t.get("selectorItemGap",!0));var f=d.getBoundingRect(),p=[-f.x,-f.y],g=t.get("selectorButtonGap",!0),b=t.getOrient().index,w=b===0?"width":"height",j=b===0?"height":"width",k=b===0?"y":"x";o==="end"?p[b]+=u[w]+g:h[b]+=f[w]+g,p[1-b]+=u[j]/2-f[j]/2,d.x=p[0],d.y=p[1],c.x=h[0],c.y=h[1];var T={x:0,y:0};return T[w]=u[w]+g+f[w],T[j]=Math.max(u[j],f[j]),T[k]=Math.min(0,f[k]+p[1-b]),T}else return c.x=h[0],c.y=h[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e})(tn);function k6e(a,e,t,r,n,i,l){function o(w,j){w.lineWidth==="auto"&&(w.lineWidth=j.lineWidth>0?2:0),NA(w,function(k,T){w[T]==="inherit"&&(w[T]=j[T])})}var c=e.getModel("itemStyle"),d=c.getItemStyle(),u=a.lastIndexOf("empty",0)===0?"fill":"stroke",h=c.getShallow("decal");d.decal=!h||h==="inherit"?r.decal:Ex(h,l),d.fill==="inherit"&&(d.fill=r[n]),d.stroke==="inherit"&&(d.stroke=r[u]),d.opacity==="inherit"&&(d.opacity=(n==="fill"?r:t).opacity),o(d,r);var f=e.getModel("lineStyle"),p=f.getLineStyle();if(o(p,t),d.fill==="auto"&&(d.fill=r.fill),d.stroke==="auto"&&(d.stroke=r.fill),p.stroke==="auto"&&(p.stroke=r.fill),!i){var g=e.get("inactiveBorderWidth"),b=d[u];d.lineWidth=g==="auto"?r.lineWidth>0&&b?2:0:d.lineWidth,d.fill=e.get("inactiveColor"),d.stroke=e.get("inactiveBorderColor"),p.stroke=f.get("inactiveColor"),p.lineWidth=f.get("inactiveWidth")}return{itemStyle:d,lineStyle:p}}function C6e(a){var e=a.icon||"roundRect",t=Jn(e,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill,a.symbolKeepAspect);return t.setStyle(a.itemStyle),t.rotation=(a.iconRotate||0)*Math.PI/180,t.setOrigin([a.itemWidth/2,a.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill=Be.color.neutral00,t.style.lineWidth=2),t}function JF(a,e,t,r){SA(a,e,t,r),t.dispatchAction({type:"legendToggleSelect",name:a??e}),jA(a,e,t,r)}function SK(a){for(var e=a.getZr().storage.getDisplayList(),t,r=0,n=e.length;r<n&&!(t=e[r].states.emphasis);)r++;return t&&t.hoverLayer}function jA(a,e,t,r){SK(t)||t.dispatchAction({type:"highlight",seriesName:a,name:e,excludeSeriesId:r})}function SA(a,e,t,r){SK(t)||t.dispatchAction({type:"downplay",seriesName:a,name:e,excludeSeriesId:r})}function A6e(a){var e=a.findComponents({mainType:"legend"});e&&e.length&&a.filterSeries(function(t){for(var r=0;r<e.length;r++)if(!e[r].isSelected(t.name))return!1;return!0})}function Sg(a,e,t){var r=a==="allSelect"||a==="inverseSelect",n={},i=[];t.eachComponent({mainType:"legend",query:e},function(o){r?o[a]():o[a](e.name),eV(o,n),i.push(o.componentIndex)});var l={};return t.eachComponent("legend",function(o){se(n,function(c,d){o[c?"select":"unSelect"](d)}),eV(o,l)}),r?{selected:l,legendIndex:i}:{name:e.name,selected:l}}function eV(a,e){var t=e||{};return se(a.getData(),function(r){var n=r.get("name");if(!(n===`
`||n==="")){var i=a.isSelected(n);Rt(t,n)?t[n]=t[n]&&i:t[n]=i}}),t}function T6e(a){a.registerAction("legendToggleSelect","legendselectchanged",ya(Sg,"toggleSelected")),a.registerAction("legendAllSelect","legendselectall",ya(Sg,"allSelect")),a.registerAction("legendInverseSelect","legendinverseselect",ya(Sg,"inverseSelect")),a.registerAction("legendSelect","legendselected",ya(Sg,"select")),a.registerAction("legendUnSelect","legendunselected",ya(Sg,"unSelect"))}function kK(a){a.registerComponentModel(_A),a.registerComponentView(jK),a.registerProcessor(a.PRIORITY.PROCESSOR.SERIES_FILTER,A6e),a.registerSubTypeDefaulter("legend",function(){return"plain"}),T6e(a)}var M6e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,r,n){var i=L0(t);a.prototype.init.call(this,t,r,n),tV(this,t,i)},e.prototype.mergeOption=function(t,r){a.prototype.mergeOption.call(this,t,r),tV(this,this.option,t)},e.type="legend.scroll",e.defaultOption=Dh(_A.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:Be.color.accent50,pageIconInactiveColor:Be.color.accent10,pageIconSize:15,pageTextStyle:{color:Be.color.tertiary},animationDurationUpdate:800}),e})(_A);function tV(a,e,t){var r=a.getOrient(),n=[1,1];n[r.index]=0,Rc(e,t,{type:"box",ignoreSize:!!n})}var aV=$t,kC=["width","height"],CC=["x","y"],E6e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){a.prototype.init.call(this),this.group.add(this._containerGroup=new aV),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new aV)},e.prototype.resetInner=function(){a.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,r,n,i,l,o,c){var d=this;a.prototype.renderInner.call(this,t,r,n,i,l,o,c);var u=this._controllerGroup,h=r.get("pageIconSize",!0),f=lt(h)?h:[h,h];g("pagePrev",0);var p=r.getModel("pageTextStyle");u.add(new tr({name:"pageText",style:{text:"xx/xx",fill:p.getTextColor(),font:p.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),g("pageNext",1);function g(b,w){var j=b+"DataIndex",k=Ib(r.get("pageIcons",!0)[r.getOrient().name][w],{onclick:Tt(d._pageGo,d,j,r,i)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});k.name=b,u.add(k)}},e.prototype.layoutInner=function(t,r,n,i,l,o){var c=this.getSelectorGroup(),d=t.getOrient().index,u=kC[d],h=CC[d],f=kC[1-d],p=CC[1-d];l&&u0("horizontal",c,t.get("selectorItemGap",!0));var g=t.get("selectorButtonGap",!0),b=c.getBoundingRect(),w=[-b.x,-b.y],j=Xt(n);l&&(j[u]=n[u]-b[u]-g);var k=this._layoutContentAndController(t,i,j,d,u,f,p,h);if(l){if(o==="end")w[d]+=k[u]+g;else{var T=b[u]+g;w[d]-=T,k[h]-=T}k[u]+=b[u]+g,w[1-d]+=k[p]+k[f]/2-b[f]/2,k[f]=Math.max(k[f],b[f]),k[p]=Math.min(k[p],b[p]+w[1-d]),c.x=w[0],c.y=w[1],c.markRedraw()}return k},e.prototype._layoutContentAndController=function(t,r,n,i,l,o,c,d){var u=this.getContentGroup(),h=this._containerGroup,f=this._controllerGroup;u0(t.get("orient"),u,t.get("itemGap"),i?n.width:null,i?null:n.height),u0("horizontal",f,t.get("pageButtonItemGap",!0));var p=u.getBoundingRect(),g=f.getBoundingRect(),b=this._showController=p[l]>n[l],w=[-p.x,-p.y];r||(w[i]=u[d]);var j=[0,0],k=[-g.x,-g.y],T=Ht(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(b){var E=t.get("pageButtonPosition",!0);E==="end"?k[i]+=n[l]-g[l]:j[i]+=g[l]+T}k[1-i]+=p[o]/2-g[o]/2,u.setPosition(w),h.setPosition(j),f.setPosition(k);var I={x:0,y:0};if(I[l]=b?n[l]:p[l],I[o]=Math.max(p[o],g[o]),I[c]=Math.min(0,g[c]+k[1-i]),h.__rectSize=n[l],b){var R={x:0,y:0};R[l]=Math.max(n[l]-g[l]-T,0),R[o]=I[o],h.setClipPath(new Ea({shape:R})),h.__rectSize=R[l]}else f.eachChild(function(H){H.attr({invisible:!0,silent:!0})});var P=this._getPageInfo(t);return P.pageIndex!=null&&nr(u,{x:P.contentPosition[0],y:P.contentPosition[1]},b?t:null),this._updatePageInfoView(t,P),I},e.prototype._pageGo=function(t,r,n){var i=this._getPageInfo(r)[t];i!=null&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:r.id})},e.prototype._updatePageInfoView=function(t,r){var n=this._controllerGroup;se(["pagePrev","pageNext"],function(u){var h=u+"DataIndex",f=r[h]!=null,p=n.childOfName(u);p&&(p.setStyle("fill",f?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),p.cursor=f?"pointer":"default")});var i=n.childOfName("pageText"),l=t.get("pageFormatter"),o=r.pageIndex,c=o!=null?o+1:0,d=r.pageCount;i&&l&&i.setStyle("text",At(l)?l.replace("{current}",c==null?"":c+"").replace("{total}",d==null?"":d+""):l({current:c,total:d}))},e.prototype._getPageInfo=function(t){var r=t.get("scrollDataIndex",!0),n=this.getContentGroup(),i=this._containerGroup.__rectSize,l=t.getOrient().index,o=kC[l],c=CC[l],d=this._findTargetItemIndex(r),u=n.children(),h=u[d],f=u.length,p=f?1:0,g={contentPosition:[n.x,n.y],pageCount:p,pageIndex:p-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!h)return g;var b=E(h);g.contentPosition[l]=-b.s;for(var w=d+1,j=b,k=b,T=null;w<=f;++w)T=E(u[w]),(!T&&k.e>j.s+i||T&&!I(T,j.s))&&(k.i>j.i?j=k:j=T,j&&(g.pageNextDataIndex==null&&(g.pageNextDataIndex=j.i),++g.pageCount)),k=T;for(var w=d-1,j=b,k=b,T=null;w>=-1;--w)T=E(u[w]),(!T||!I(k,T.s))&&j.i<k.i&&(k=j,g.pagePrevDataIndex==null&&(g.pagePrevDataIndex=j.i),++g.pageCount,++g.pageIndex),j=T;return g;function E(R){if(R){var P=R.getBoundingRect(),H=P[c]+R[c];return{s:H,e:H+P[o],i:R.__legendDataIndex}}}function I(R,P){return R.e>=P&&R.s<=P+i}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var r,n=this.getContentGroup(),i;return n.eachChild(function(l,o){var c=l.__legendDataIndex;i==null&&c!=null&&(i=o),c===t&&(r=o)}),r??i},e.type="legend.scroll",e})(jK);function D6e(a){a.registerAction("legendScroll","legendscroll",function(e,t){var r=e.scrollDataIndex;r!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(n){n.setScrollDataIndex(r)})})}function I6e(a){Ta(kK),a.registerComponentModel(M6e),a.registerComponentView(E6e),D6e(a)}function R6e(a){Ta(kK),Ta(I6e)}var L6e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.inside",e.defaultOption=Dh(ub.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e})(ub),H6=Ia();function O6e(a,e,t){H6(a).coordSysRecordMap.each(function(r){var n=r.dataZoomInfoMap.get(e.uid);n&&(n.getRange=t)})}function P6e(a,e){for(var t=H6(a).coordSysRecordMap,r=t.keys(),n=0;n<r.length;n++){var i=r[n],l=t.get(i),o=l.dataZoomInfoMap;if(o){var c=e.uid,d=o.get(c);d&&(o.removeKey(c),o.keys().length||CK(t,l))}}}function CK(a,e){if(e){a.removeKey(e.model.uid);var t=e.controller;t&&t.dispose()}}function z6e(a,e){var t={model:e,containsPoint:ya(F6e,e),dispatchAction:ya(B6e,a),dataZoomInfoMap:null,controller:null},r=t.controller=new F0(a.getZr());return se(["pan","zoom","scrollMove"],function(n){r.on(n,function(i){var l=[];t.dataZoomInfoMap.each(function(o){if(i.isAvailableBehavior(o.model.option)){var c=(o.getRange||{})[n],d=c&&c(o.dzReferCoordSysInfo,t.model.mainType,t.controller,i);!o.model.get("disabled",!0)&&d&&l.push({dataZoomId:o.model.id,start:d[0],end:d[1]})}}),l.length&&t.dispatchAction(l)})}),t}function B6e(a,e){a.isDisposed()||a.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function F6e(a,e,t,r){return a.coordinateSystem.containPoint([t,r])}function V6e(a,e,t){var r,n="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},l=!0;return a.each(function(o){var c=o.model,d=c.get("disabled",!0)?!1:c.get("zoomLock",!0)?"move":!0;i[n+d]>i[n+r]&&(r=d),l=l&&c.get("preventDefaultMouseMove",!0)}),{controlType:r,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!l,api:t,zInfo:{component:e.model},triggerInfo:{roamTrigger:null,isInSelf:e.containsPoint}}}}function H6e(a){a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,function(e,t){var r=H6(t),n=r.coordSysRecordMap||(r.coordSysRecordMap=Pt());n.each(function(i){i.dataZoomInfoMap=null}),e.eachComponent({mainType:"dataZoom",subType:"inside"},function(i){var l=cK(i);se(l.infoList,function(o){var c=o.model.uid,d=n.get(c)||n.set(c,z6e(t,o.model)),u=d.dataZoomInfoMap||(d.dataZoomInfoMap=Pt());u.set(i.uid,{dzReferCoordSysInfo:o,model:i,getRange:null})})}),n.each(function(i){var l=i.controller,o,c=i.dataZoomInfoMap;if(c){var d=c.keys()[0];d!=null&&(o=c.get(d))}if(!o){CK(n,i);return}var u=V6e(c,i,t);l.enable(u.controlType,u.opt),Jx(i,"dispatchAction",o.model.get("throttle",!0),"fixRate")})})}var U6e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return e.prototype.render=function(t,r,n){if(a.prototype.render.apply(this,arguments),t.noTarget()){this._clear();return}this.range=t.getPercentRange(),O6e(n,t,{pan:Tt(AC.pan,this),zoom:Tt(AC.zoom,this),scrollMove:Tt(AC.scrollMove,this)})},e.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){P6e(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e})(R6),AC={zoom:function(a,e,t,r){var n=this.range,i=n.slice(),l=a.axisModels[0];if(l){var o=TC[e](null,[r.originX,r.originY],l,t,a),c=(o.signal>0?o.pixelStart+o.pixelLength-o.pixel:o.pixel-o.pixelStart)/o.pixelLength*(i[1]-i[0])+i[0],d=Math.max(1/r.scale,0);i[0]=(i[0]-c)*d+c,i[1]=(i[1]-c)*d+c;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(jh(0,i,[0,100],0,u.minSpan,u.maxSpan),this.range=i,n[0]!==i[0]||n[1]!==i[1])return i}},pan:rV(function(a,e,t,r,n,i){var l=TC[r]([i.oldX,i.oldY],[i.newX,i.newY],e,n,t);return l.signal*(a[1]-a[0])*l.pixel/l.pixelLength}),scrollMove:rV(function(a,e,t,r,n,i){var l=TC[r]([0,0],[i.scrollDelta,i.scrollDelta],e,n,t);return l.signal*(a[1]-a[0])*i.scrollDelta})};function rV(a){return function(e,t,r,n){var i=this.range,l=i.slice(),o=e.axisModels[0];if(o){var c=a(l,o,e,t,r,n);if(jh(c,l,[0,100],"all"),this.range=l,i[0]!==l[0]||i[1]!==l[1])return l}}}var TC={grid:function(a,e,t,r,n){var i=t.axis,l={},o=n.model.coordinateSystem.getRect();return a=a||[0,0],i.dim==="x"?(l.pixel=e[0]-a[0],l.pixelLength=o.width,l.pixelStart=o.x,l.signal=i.inverse?1:-1):(l.pixel=e[1]-a[1],l.pixelLength=o.height,l.pixelStart=o.y,l.signal=i.inverse?-1:1),l},polar:function(a,e,t,r,n){var i=t.axis,l={},o=n.model.coordinateSystem,c=o.getRadiusAxis().getExtent(),d=o.getAngleAxis().getExtent();return a=a?o.pointToCoord(a):[0,0],e=o.pointToCoord(e),t.mainType==="radiusAxis"?(l.pixel=e[0]-a[0],l.pixelLength=c[1]-c[0],l.pixelStart=c[0],l.signal=i.inverse?1:-1):(l.pixel=e[1]-a[1],l.pixelLength=d[1]-d[0],l.pixelStart=d[0],l.signal=i.inverse?-1:1),l},singleAxis:function(a,e,t,r,n){var i=t.axis,l=n.model.coordinateSystem.getRect(),o={};return a=a||[0,0],i.orient==="horizontal"?(o.pixel=e[0]-a[0],o.pixelLength=l.width,o.pixelStart=l.x,o.signal=i.inverse?1:-1):(o.pixel=e[1]-a[1],o.pixelLength=l.height,o.pixelStart=l.y,o.signal=i.inverse?-1:1),o}};function AK(a){L6(a),a.registerComponentModel(L6e),a.registerComponentView(U6e),H6e(a)}var G6e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Dh(ub.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:Be.color.accent10,borderRadius:0,backgroundColor:Be.color.transparent,dataBackground:{lineStyle:{color:Be.color.accent30,width:.5},areaStyle:{color:Be.color.accent20,opacity:.2}},selectedDataBackground:{lineStyle:{color:Be.color.accent40,width:.5},areaStyle:{color:Be.color.accent20,opacity:.3}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:Be.color.neutral00,borderColor:Be.color.accent20},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:Be.color.accent40,opacity:.5},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:Be.color.tertiary},brushSelect:!0,brushStyle:{color:Be.color.accent30,opacity:.3},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:Be.color.accent40},moveHandleStyle:{opacity:.8}},defaultLocationEdgeGap:15}),e})(ub),kg=Ea,W6e=1,MC=30,Y6e=7,Cg="horizontal",nV="vertical",$6e=5,q6e=["line","bar","candlestick","scatter"],X6e={easing:"cubicOut",duration:100,delay:0},Z6e=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t._displayables={},t}return e.prototype.init=function(t,r){this.api=r,this._onBrush=Tt(this._onBrush,this),this._onBrushEnd=Tt(this._onBrushEnd,this)},e.prototype.render=function(t,r,n,i){if(a.prototype.render.apply(this,arguments),Jx(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),t.get("show")===!1){this.group.removeAll();return}if(t.noTarget()){this._clear(),this.group.removeAll();return}(!i||i.type!=="dataZoom"||i.from!==this.uid)&&this._buildView(),this._updateView()},e.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){Zv(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var r=this._displayables.sliderGroup=new $t;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(r),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,r=this.api,n=t.get("brushSelect"),i=n?Y6e:0,l=pi(t,r).refContainer,o=this._findCoordRect(),c=t.get("defaultLocationEdgeGap",!0)||0,d=this._orient===Cg?{right:l.width-o.x-o.width,top:l.height-MC-c-i,width:o.width,height:MC}:{right:c,top:o.y,width:MC,height:o.height},u=L0(t.option);se(["right","top","width","height"],function(f){u[f]==="ph"&&(u[f]=d[f])});var h=cn(u,l);this._location={x:h.x,y:h.y},this._size=[h.width,h.height],this._orient===nV&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,r=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),l=i&&i.get("inverse"),o=this._displayables.sliderGroup,c=(this._dataShadowInfo||{}).otherAxisInverse;o.attr(n===Cg&&!l?{scaleY:c?1:-1,scaleX:1}:n===Cg&&l?{scaleY:c?1:-1,scaleX:-1}:n===nV&&!l?{scaleY:c?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:c?-1:1,scaleX:-1,rotation:Math.PI/2});var d=t.getBoundingRect([o]);t.x=r.x-d.x,t.y=r.y-d.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,r=this._size,n=this._displayables.sliderGroup,i=t.get("brushSelect");n.add(new kg({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var l=new kg({shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:"transparent"},z2:0,onclick:Tt(this._onClickPanel,this)}),o=this.api.getZr();i?(l.on("mousedown",this._onBrushStart,this),l.cursor="crosshair",o.on("mousemove",this._onBrush),o.on("mouseup",this._onBrushEnd)):(o.off("mousemove",this._onBrush),o.off("mouseup",this._onBrushEnd)),n.add(l)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!t)return;var r=this._size,n=this._shadowSize||[],i=t.series,l=i.getRawData(),o=i.getShadowDim&&i.getShadowDim(),c=o&&l.getDimensionInfo(o)?i.getShadowDim():t.otherDim;if(c==null)return;var d=this._shadowPolygonPts,u=this._shadowPolylinePts;if(l!==this._shadowData||c!==this._shadowDim||r[0]!==n[0]||r[1]!==n[1]){var h=l.getDataExtent(t.thisDim),f=l.getDataExtent(c),p=(f[1]-f[0])*.3;f=[f[0]-p,f[1]+p];var g=[0,r[1]],b=[0,r[0]],w=[[r[0],0],[0,0]],j=[],k=b[1]/Math.max(1,l.count()-1),T=r[0]/(h[1]-h[0]),E=t.thisAxis.type==="time",I=-k,R=Math.round(l.count()/r[0]),P;l.each([t.thisDim,c],function(te,Z,J){if(R>0&&J%R){E||(I+=k);return}I=E?(+te-h[0])*T:I+k;var B=Z==null||isNaN(Z)||Z==="",W=B?0:fr(Z,f,g,!0);B&&!P&&J?(w.push([w[w.length-1][0],0]),j.push([j[j.length-1][0],0])):!B&&P&&(w.push([I,0]),j.push([I,0])),B||(w.push([I,W]),j.push([I,W])),P=B}),d=this._shadowPolygonPts=w,u=this._shadowPolylinePts=j}this._shadowData=l,this._shadowDim=c,this._shadowSize=[r[0],r[1]];var H=this.dataZoomModel;function G(te){var Z=H.getModel(te?"selectedDataBackground":"dataBackground"),J=new $t,B=new fs({shape:{points:d},segmentIgnoreThreshold:1,style:Z.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),W=new Xi({shape:{points:u},segmentIgnoreThreshold:1,style:Z.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return J.add(B),J.add(W),J}for(var X=0;X<3;X++){var U=G(X===1);this._displayables.sliderGroup.add(U),this._displayables.dataShadowSegs.push(U)}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,r=t.get("showDataShadow");if(r!==!1){var n,i=this.ecModel;return t.eachTargetAxis(function(l,o){var c=t.getAxisProxy(l,o).getTargetSeriesModels();se(c,function(d){if(!n&&!(r!==!0&&ja(q6e,d.get("type"))<0)){var u=i.getComponent(sh(l),o).axis,h=K6e(l),f,p=d.coordinateSystem;h!=null&&p.getOtherAxis&&(f=p.getOtherAxis(u).inverse),h=d.getData().mapDimension(h);var g=d.getData().mapDimension(l);n={thisAxis:u,series:d,thisDim:g,otherDim:h,otherAxisInverse:f}}},this)},this),n}},e.prototype._renderHandle=function(){var t=this.group,r=this._displayables,n=r.handles=[null,null],i=r.handleLabels=[null,null],l=this._displayables.sliderGroup,o=this._size,c=this.dataZoomModel,d=this.api,u=c.get("borderRadius")||0,h=c.get("brushSelect"),f=r.filler=new kg({silent:h,style:{fill:c.get("fillerColor")},textConfig:{position:"inside"}});l.add(f),l.add(new kg({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:o[0],height:o[1],r:u},style:{stroke:c.get("dataBackgroundColor")||c.get("borderColor"),lineWidth:W6e,fill:Be.color.transparent}})),se([0,1],function(T){var E=c.get("handleIcon");!X2[E]&&E.indexOf("path://")<0&&E.indexOf("image://")<0&&(E="path://"+E);var I=Jn(E,-1,0,2,2,null,!0);I.attr({cursor:Q6e(this._orient),draggable:!0,drift:Tt(this._onDragMove,this,T),ondragend:Tt(this._onDragEnd,this),onmouseover:Tt(this._showDataInfo,this,!0),onmouseout:Tt(this._showDataInfo,this,!1),z2:5});var R=I.getBoundingRect(),P=c.get("handleSize");this._handleHeight=kt(P,this._size[1]),this._handleWidth=R.width/R.height*this._handleHeight,I.setStyle(c.getModel("handleStyle").getItemStyle()),I.style.strokeNoScale=!0,I.rectHover=!0,I.ensureState("emphasis").style=c.getModel(["emphasis","handleStyle"]).getItemStyle(),c0(I);var H=c.get("handleColor");H!=null&&(I.style.fill=H),l.add(n[T]=I);var G=c.getModel("textStyle"),X=c.get("handleLabel")||{},U=X.show||!1;t.add(i[T]=new tr({silent:!0,invisible:!U,style:Fr(G,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:G.getTextColor(),font:G.getFont()}),z2:10}))},this);var p=f;if(h){var g=kt(c.get("moveHandleSize"),o[1]),b=r.moveHandle=new Ea({style:c.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:o[1]-.5,height:g}}),w=g*.8,j=r.moveHandleIcon=Jn(c.get("moveHandleIcon"),-w/2,-w/2,w,w,Be.color.neutral00,!0);j.silent=!0,j.y=o[1]+g/2-.5,b.ensureState("emphasis").style=c.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var k=Math.min(o[1]/2,Math.max(g,10));p=r.moveZone=new Ea({invisible:!0,shape:{y:o[1]-k,height:g+k}}),p.on("mouseover",function(){d.enterEmphasis(b)}).on("mouseout",function(){d.leaveEmphasis(b)}),l.add(b),l.add(j),l.add(p)}p.attr({draggable:!0,cursor:"default",drift:Tt(this._onDragMove,this,"all"),ondragstart:Tt(this._showDataInfo,this,!0),ondragend:Tt(this._onDragEnd,this),onmouseover:Tt(this._showDataInfo,this,!0),onmouseout:Tt(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),r=this._getViewExtent();this._handleEnds=[fr(t[0],[0,100],r,!0),fr(t[1],[0,100],r,!0)]},e.prototype._updateInterval=function(t,r){var n=this.dataZoomModel,i=this._handleEnds,l=this._getViewExtent(),o=n.findRepresentativeAxisProxy().getMinMaxSpan(),c=[0,100];jh(r,i,l,n.get("zoomLock")?"all":t,o.minSpan!=null?fr(o.minSpan,c,l,!0):null,o.maxSpan!=null?fr(o.maxSpan,c,l,!0):null);var d=this._range,u=this._range=to([fr(i[0],l,c,!0),fr(i[1],l,c,!0)]);return!d||d[0]!==u[0]||d[1]!==u[1]},e.prototype._updateView=function(t){var r=this._displayables,n=this._handleEnds,i=to(n.slice()),l=this._size;se([0,1],function(p){var g=r.handles[p],b=this._handleHeight;g.attr({scaleX:b/2,scaleY:b/2,x:n[p]+(p?-1:1),y:l[1]/2-b/2})},this),r.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:l[1]});var o={x:i[0],width:i[1]-i[0]};r.moveHandle&&(r.moveHandle.setShape(o),r.moveZone.setShape(o),r.moveZone.getBoundingRect(),r.moveHandleIcon&&r.moveHandleIcon.attr("x",o.x+o.width/2));for(var c=r.dataShadowSegs,d=[0,i[0],i[1],l[0]],u=0;u<c.length;u++){var h=c[u],f=h.getClipPath();f||(f=new Ea,h.setClipPath(f)),f.setShape({x:d[u],y:0,width:d[u+1]-d[u],height:l[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var r=this.dataZoomModel,n=this._displayables,i=n.handleLabels,l=this._orient,o=["",""];if(r.get("showDetail")){var c=r.findRepresentativeAxisProxy();if(c){var d=c.getAxisModel().axis,u=this._range,h=t?c.calculateDataWindow({start:u[0],end:u[1]}).valueWindow:c.getDataValueWindow();o=[this._formatLabel(h[0],d),this._formatLabel(h[1],d)]}}var f=to(this._handleEnds.slice());p.call(this,0),p.call(this,1);function p(g){var b=d0(n.handles[g].parent,this.group),w=NN(g===0?"right":"left",b),j=this._handleWidth/2+$6e,k=To([f[g]+(g===0?-j:j),this._size[1]/2],b);i[g].setStyle({x:k[0],y:k[1],verticalAlign:l===Cg?"middle":w,align:l===Cg?w:"center",text:o[g]})}},e.prototype._formatLabel=function(t,r){var n=this.dataZoomModel,i=n.get("labelFormatter"),l=n.get("labelPrecision");(l==null||l==="auto")&&(l=r.getPixelPrecision());var o=t==null||isNaN(t)?"":r.type==="category"||r.type==="time"?r.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(l,20));return Yt(i)?i(t,o):At(i)?i.replace("{value}",o):o},e.prototype._showDataInfo=function(t){var r=this.dataZoomModel.get("handleLabel")||{},n=r.show||!1,i=this.dataZoomModel.getModel(["emphasis","handleLabel"]),l=i.get("show")||!1,o=t||this._dragging?l:n,c=this._displayables,d=c.handleLabels;d[0].attr("invisible",!o),d[1].attr("invisible",!o),c.moveHandle&&this.api[o?"enterEmphasis":"leaveEmphasis"](c.moveHandle,1)},e.prototype._onDragMove=function(t,r,n,i){this._dragging=!0,Od(i.event);var l=this._displayables.sliderGroup.getLocalTransform(),o=To([r,n],l,!0),c=this._updateInterval(t,o[0]),d=this.dataZoomModel.get("realtime");this._updateView(!d),c&&d&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var r=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>r[0]||n[1]<0||n[1]>r[1])){var i=this._handleEnds,l=(i[0]+i[1])/2,o=this._updateInterval("all",n[0]-l);this._updateView(),o&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var r=t.offsetX,n=t.offsetY;this._brushStart=new Qt(r,n),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var r=this._displayables.brushRect;if(this._brushing=!1,!!r){r.attr("ignore",!0);var n=r.shape,i=+new Date;if(!(i-this._brushStartTime<200&&Math.abs(n.width)<5)){var l=this._getViewExtent(),o=[0,100],c=this._handleEnds=[n.x,n.x+n.width],d=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();jh(0,c,l,0,d.minSpan!=null?fr(d.minSpan,o,l,!0):null,d.maxSpan!=null?fr(d.maxSpan,o,l,!0):null),this._range=to([fr(c[0],l,o,!0),fr(c[1],l,o,!0)]),this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(Od(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,r){var n=this._displayables,i=this.dataZoomModel,l=n.brushRect;l||(l=n.brushRect=new kg({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(l)),l.attr("ignore",!1);var o=this._brushStart,c=this._displayables.sliderGroup,d=c.transformCoordToLocal(t,r),u=c.transformCoordToLocal(o.x,o.y),h=this._size;d[0]=Math.max(Math.min(h[0],d[0]),0),l.setShape({x:u[0],y:0,width:d[0]-u[0],height:h[1]})},e.prototype._dispatchZoomAction=function(t){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?X6e:null,start:r[0],end:r[1]})},e.prototype._findCoordRect=function(){var t,r=cK(this.dataZoomModel).infoList;if(!t&&r.length){var n=r[0].model.coordinateSystem;t=n.getRect&&n.getRect()}if(!t){var i=this.api.getWidth(),l=this.api.getHeight();t={x:i*.2,y:l*.2,width:i*.6,height:l*.6}}return t},e.type="dataZoom.slider",e})(R6);function K6e(a){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[a]}function Q6e(a){return a==="vertical"?"ns-resize":"ew-resize"}function TK(a){a.registerComponentModel(G6e),a.registerComponentView(Z6e),L6(a)}function J6e(a){Ta(AK),Ta(TK)}var MK={get:function(a,e,t){var r=Xt((eEe[a]||{})[e]);return t&&lt(r)?r[r.length-1]:r}},eEe={color:{active:["#006edd","#e0ffff"],inactive:[Be.color.transparent]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},iV=Ni.mapVisual,tEe=Ni.eachVisual,aEe=lt,sV=se,rEe=to,nEe=fr,A_=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.stateList=["inRange","outOfRange"],t.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],t.layoutMode={type:"box",ignoreSize:!0},t.dataBound=[-1/0,1/0],t.targetVisuals={},t.controllerVisuals={},t}return e.prototype.init=function(t,r,n){this.mergeDefaultAndTheme(t,n)},e.prototype.optionUpdated=function(t,r){var n=this.option;!r&&bK(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var r=this.stateList;t=Tt(t,this),this.controllerVisuals=bA(this.option.controller,r,t),this.targetVisuals=bA(this.option.target,r,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesId,r=this.option.seriesIndex;r==null&&t==null&&(r="all");var n=Yx(this.ecModel,"series",{index:r,id:t},{useDefault:!1,enableAll:!0,enableNone:!1}).models;return ct(n,function(i){return i.componentIndex})},e.prototype.eachTargetSeries=function(t,r){se(this.getTargetSeriesIndices(),function(n){var i=this.ecModel.getSeriesByIndex(n);i&&t.call(r,i)},this)},e.prototype.isTargetSeries=function(t){var r=!1;return this.eachTargetSeries(function(n){n===t&&(r=!0)}),r},e.prototype.formatValueText=function(t,r,n){var i=this.option,l=i.precision,o=this.dataBound,c=i.formatter,d;n=n||["<",">"],lt(t)&&(t=t.slice(),d=!0);var u=r?t:d?[h(t[0]),h(t[1])]:h(t);if(At(c))return c.replace("{value}",d?u[0]:u).replace("{value2}",d?u[1]:u);if(Yt(c))return d?c(t[0],t[1]):c(t);if(d)return t[0]===o[0]?n[0]+" "+u[1]:t[1]===o[1]?n[1]+" "+u[0]:u[0]+" - "+u[1];return u;function h(f){return f===o[0]?"min":f===o[1]?"max":(+f).toFixed(Math.min(l,20))}},e.prototype.resetExtent=function(){var t=this.option,r=rEe([t.min,t.max]);this._dataExtent=r},e.prototype.getDataDimensionIndex=function(t){var r=this.option.dimension;if(r!=null)return t.getDimensionIndex(r);for(var n=t.dimensions,i=n.length-1;i>=0;i--){var l=n[i],o=t.getDimensionInfo(l);if(!o.isCalculationCoord)return o.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,r=this.option,n={inRange:r.inRange,outOfRange:r.outOfRange},i=r.target||(r.target={}),l=r.controller||(r.controller={});Ca(i,n),Ca(l,n);var o=this.isCategory();c.call(this,i),c.call(this,l),d.call(this,i,"inRange","outOfRange"),u.call(this,l);function c(h){aEe(r.color)&&!h.inRange&&(h.inRange={color:r.color.slice().reverse()}),h.inRange=h.inRange||{color:t.get("gradientColor")}}function d(h,f,p){var g=h[f],b=h[p];g&&!b&&(b=h[p]={},sV(g,function(w,j){if(Ni.isValidType(j)){var k=MK.get(j,"inactive",o);k!=null&&(b[j]=k,j==="color"&&!b.hasOwnProperty("opacity")&&!b.hasOwnProperty("colorAlpha")&&(b.opacity=[0,0]))}}))}function u(h){var f=(h.inRange||{}).symbol||(h.outOfRange||{}).symbol,p=(h.inRange||{}).symbolSize||(h.outOfRange||{}).symbolSize,g=this.get("inactiveColor"),b=this.getItemSymbol(),w=b||"roundRect";sV(this.stateList,function(j){var k=this.itemSize,T=h[j];T||(T=h[j]={color:o?g:[g]}),T.symbol==null&&(T.symbol=f&&Xt(f)||(o?w:[w])),T.symbolSize==null&&(T.symbolSize=p&&Xt(p)||(o?k[0]:[k[0],k[0]])),T.symbol=iV(T.symbol,function(R){return R==="none"?w:R});var E=T.symbolSize;if(E!=null){var I=-1/0;tEe(E,function(R){R>I&&(I=R)}),T.symbolSize=iV(E,function(R){return nEe(R,[0,I],[0,k[0]],!0)})}},this)}},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:Be.color.transparent,borderColor:Be.color.borderTint,contentColor:Be.color.theme[0],inactiveColor:Be.color.disabled,borderWidth:0,padding:Be.size.m,textGap:10,precision:0,textStyle:{color:Be.color.secondary}},e})(za),lV=[20,140],iEe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(t,r){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(n){n.mappingMethod="linear",n.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){a.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(t[0]==null||isNaN(t[0]))&&(t[0]=lV[0]),(t[1]==null||isNaN(t[1]))&&(t[1]=lV[1])},e.prototype._resetRange=function(){var t=this.getExtent(),r=this.option.range;!r||r.auto?(t.auto=1,this.option.range=t):lt(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],t[0]),r[1]=Math.min(r[1],t[1]))},e.prototype.completeVisualOption=function(){a.prototype.completeVisualOption.apply(this,arguments),se(this.stateList,function(t){var r=this.option.controller[t].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),r=to((this.get("range")||[]).slice());return r[0]>t[1]&&(r[0]=t[1]),r[1]>t[1]&&(r[1]=t[1]),r[0]<t[0]&&(r[0]=t[0]),r[1]<t[0]&&(r[1]=t[0]),r},e.prototype.getValueState=function(t){var r=this.option.range,n=this.getExtent(),i=Ht(this.option.unboundedRange,!0);return(i&&r[0]<=n[0]||r[0]<=t)&&(i&&r[1]>=n[1]||t<=r[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var r=[];return this.eachTargetSeries(function(n){var i=[],l=n.getData();l.each(this.getDataDimensionIndex(l),function(o,c){t[0]<=o&&o<=t[1]&&i.push(c)},this),r.push({seriesId:n.id,dataIndex:i})},this),r},e.prototype.getVisualMeta=function(t){var r=oV(this,"outOfRange",this.getExtent()),n=oV(this,"inRange",this.option.range.slice()),i=[];function l(p,g){i.push({value:p,color:t(p,g)})}for(var o=0,c=0,d=n.length,u=r.length;c<u&&(!n.length||r[c]<=n[0]);c++)r[c]<n[o]&&l(r[c],"outOfRange");for(var h=1;o<d;o++,h=0)h&&i.length&&l(n[o],"outOfRange"),l(n[o],"inRange");for(var h=1;c<u;c++)(!n.length||n[n.length-1]<r[c])&&(h&&(i.length&&l(i[i.length-1].value,"outOfRange"),h=0),l(r[c],"outOfRange"));var f=i.length;return{stops:i,outerColors:[f?i[0].color:"transparent",f?i[f-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Dh(A_.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:Be.color.neutral00,borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:Be.color.neutral00,borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:Be.color.shadow}}),e})(A_);function oV(a,e,t){if(t[0]===t[1])return t.slice();for(var r=200,n=(t[1]-t[0])/r,i=t[0],l=[],o=0;o<=r&&i<t[1];o++)l.push(i),i+=n;return l.push(t[1]),l}var EK=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.autoPositionValues={left:1,right:1,top:1,bottom:1},t}return e.prototype.init=function(t,r){this.ecModel=t,this.api=r},e.prototype.render=function(t,r,n,i){if(this.visualMapModel=t,t.get("show")===!1){this.group.removeAll();return}this.doRender(t,r,n,i)},e.prototype.renderBackground=function(t){var r=this.visualMapModel,n=Rb(r.get("padding")||0),i=t.getBoundingRect();t.add(new Ea({z2:-1,silent:!0,shape:{x:i.x-n[3],y:i.y-n[0],width:i.width+n[3]+n[1],height:i.height+n[0]+n[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,r,n){n=n||{};var i=n.forceState,l=this.visualMapModel,o={};if(r==="color"){var c=l.get("contentColor");o.color=c}function d(p){return o[p]}function u(p,g){o[p]=g}var h=l.controllerVisuals[i||l.getValueState(t)],f=Ni.prepareVisualTypes(h);return se(f,function(p){var g=h[p];n.convertOpacityToAlpha&&p==="opacity"&&(p="colorAlpha",g=h.__alphaForOpacity),Ni.dependsOn(p,r)&&g&&g.applyVisual(t,d,u)}),o[r]},e.prototype.positionGroup=function(t){var r=this.visualMapModel,n=this.api,i=pi(r,n).refContainer;CN(t,r.getBoxLayoutParams(),i)},e.prototype.doRender=function(t,r,n,i){},e.type="visualMap",e})(tn),cV=[["left","right","width"],["top","bottom","height"]];function DK(a,e,t){var r=a.option,n=r.align;if(n!=null&&n!=="auto")return n;for(var i={width:e.getWidth(),height:e.getHeight()},l=r.orient==="horizontal"?1:0,o=cV[l],c=[0,null,10],d={},u=0;u<3;u++)d[cV[1-l][u]]=c[u],d[o[u]]=u===2?t[0]:r[o[u]];var h=[["x","width",3],["y","height",0]][l],f=cn(d,i,r.padding);return o[(f.margin[h[2]]||0)+f[h[0]]+f[h[1]]*.5<i[h[1]]*.5?0:1]}function t2(a,e){return se(a||[],function(t){t.dataIndex!=null&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),a}var oc=fr,sEe=se,dV=Math.min,EC=Math.max,lEe=12,oEe=6,cEe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t._shapes={},t._dataInterval=[],t._handleEnds=[],t._hoverLinkDataIndices=[],t}return e.prototype.init=function(t,r){a.prototype.init.call(this,t,r),this._hoverLinkFromSeriesMouseOver=Tt(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=Tt(this._hideIndicator,this)},e.prototype.doRender=function(t,r,n,i){(!i||i.type!=="selectDataRange"||i.from!==this.uid)&&this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,r=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(r);var n=t.get("text");this._renderEndsText(r,n,0),this._renderEndsText(r,n,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},e.prototype._renderEndsText=function(t,r,n){if(r){var i=r[1-n];i=i!=null?i+"":"";var l=this.visualMapModel,o=l.get("textGap"),c=l.itemSize,d=this._shapes.mainGroup,u=this._applyTransform([c[0]/2,n===0?-o:c[1]+o],d),h=this._applyTransform(n===0?"bottom":"top",d),f=this._orient,p=this.visualMapModel.textStyleModel;this.group.add(new tr({style:Fr(p,{x:u[0],y:u[1],verticalAlign:p.get("verticalAlign")||(f==="horizontal"?"middle":h),align:p.get("align")||(f==="horizontal"?h:"center"),text:i})}))}},e.prototype._renderBar=function(t){var r=this.visualMapModel,n=this._shapes,i=r.itemSize,l=this._orient,o=this._useHandle,c=DK(r,this.api,i),d=n.mainGroup=this._createBarGroup(c),u=new $t;d.add(u),u.add(n.outOfRange=uV()),u.add(n.inRange=uV(null,o?fV(this._orient):null,Tt(this._dragHandle,this,"all",!1),Tt(this._dragHandle,this,"all",!0))),u.setClipPath(new Ea({shape:{x:0,y:0,width:i[0],height:i[1],r:3}}));var h=r.textStyleModel.getTextRect(""),f=EC(h.width,h.height);o&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(r,d,0,i,f,l),this._createHandle(r,d,1,i,f,l)),this._createIndicator(r,d,i,f,l),t.add(d)},e.prototype._createHandle=function(t,r,n,i,l,o){var c=Tt(this._dragHandle,this,n,!1),d=Tt(this._dragHandle,this,n,!0),u=Ro(t.get("handleSize"),i[0]),h=Jn(t.get("handleIcon"),-u/2,-u/2,u,u,null,!0),f=fV(this._orient);h.attr({cursor:f,draggable:!0,drift:c,ondragend:d,onmousemove:function(j){Od(j.event)}}),h.x=i[0]/2,h.useStyle(t.getModel("handleStyle").getItemStyle()),h.setStyle({strokeNoScale:!0,strokeFirst:!0}),h.style.lineWidth*=2,h.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),Xf(h,!0),r.add(h);var p=this.visualMapModel.textStyleModel,g=new tr({cursor:f,draggable:!0,drift:c,onmousemove:function(j){Od(j.event)},ondragend:d,style:Fr(p,{x:0,y:0,text:""})});g.ensureState("blur").style={opacity:.1},g.stateTransition={duration:200},this.group.add(g);var b=[u,0],w=this._shapes;w.handleThumbs[n]=h,w.handleLabelPoints[n]=b,w.handleLabels[n]=g},e.prototype._createIndicator=function(t,r,n,i,l){var o=Ro(t.get("indicatorSize"),n[0]),c=Jn(t.get("indicatorIcon"),-o/2,-o/2,o,o,null,!0);c.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var d=t.getModel("indicatorStyle").getItemStyle();if(c instanceof Pi){var u=c.style;c.useStyle(et({image:u.image,x:u.x,y:u.y,width:u.width,height:u.height},d))}else c.useStyle(d);r.add(c);var h=this.visualMapModel.textStyleModel,f=new tr({silent:!0,invisible:!0,style:Fr(h,{x:0,y:0,text:""})});this.group.add(f);var p=[(l==="horizontal"?i/2:oEe)+n[0]/2,0],g=this._shapes;g.indicator=c,g.indicatorLabel=f,g.indicatorLabelPoint=p,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,r,n,i){if(this._useHandle){if(this._dragging=!r,!r){var l=this._applyTransform([n,i],this._shapes.mainGroup,!0);this._updateInterval(t,l[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():hV(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,r=this._dataInterval=t.getSelected(),n=t.getExtent(),i=[0,t.itemSize[1]];this._handleEnds=[oc(r[0],n,i,!0),oc(r[1],n,i,!0)]},e.prototype._updateInterval=function(t,r){r=r||0;var n=this.visualMapModel,i=this._handleEnds,l=[0,n.itemSize[1]];jh(r,i,l,t,0);var o=n.getExtent();this._dataInterval=[oc(i[0],l,o,!0),oc(i[1],l,o,!0)]},e.prototype._updateView=function(t){var r=this.visualMapModel,n=r.getExtent(),i=this._shapes,l=[0,r.itemSize[1]],o=t?l:this._handleEnds,c=this._createBarVisual(this._dataInterval,n,o,"inRange"),d=this._createBarVisual(n,n,l,"outOfRange");i.inRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),i.outOfRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),this._updateHandle(o,c)},e.prototype._createBarVisual=function(t,r,n,i){var l={forceState:i,convertOpacityToAlpha:!0},o=this._makeColorGradient(t,l),c=[this.getControllerVisual(t[0],"symbolSize",l),this.getControllerVisual(t[1],"symbolSize",l)],d=this._createBarPoints(n,c);return{barColor:new qx(0,0,0,1,o),barPoints:d,handlesColor:[o[0].color,o[o.length-1].color]}},e.prototype._makeColorGradient=function(t,r){var n=100,i=[],l=(t[1]-t[0])/n;i.push({color:this.getControllerVisual(t[0],"color",r),offset:0});for(var o=1;o<n;o++){var c=t[0]+l*o;if(c>t[1])break;i.push({color:this.getControllerVisual(c,"color",r),offset:o/n})}return i.push({color:this.getControllerVisual(t[1],"color",r),offset:1}),i},e.prototype._createBarPoints=function(t,r){var n=this.visualMapModel.itemSize;return[[n[0]-r[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-r[1],t[1]]]},e.prototype._createBarGroup=function(t){var r=this._orient,n=this.visualMapModel.get("inverse");return new $t(r==="horizontal"&&!n?{scaleX:t==="bottom"?1:-1,rotation:Math.PI/2}:r==="horizontal"&&n?{scaleX:t==="bottom"?-1:1,rotation:-Math.PI/2}:r==="vertical"&&!n?{scaleX:t==="left"?1:-1,scaleY:-1}:{scaleX:t==="left"?1:-1})},e.prototype._updateHandle=function(t,r){if(this._useHandle){var n=this._shapes,i=this.visualMapModel,l=n.handleThumbs,o=n.handleLabels,c=i.itemSize,d=i.getExtent(),u=this._applyTransform("left",n.mainGroup);sEe([0,1],function(h){var f=l[h];f.setStyle("fill",r.handlesColor[h]),f.y=t[h];var p=oc(t[h],[0,c[1]],d,!0),g=this.getControllerVisual(p,"symbolSize");f.scaleX=f.scaleY=g/c[0],f.x=c[0]-g/2;var b=To(n.handleLabelPoints[h],d0(f,this.group));if(this._orient==="horizontal"){var w=u==="left"||u==="top"?(c[0]-g)/2:(c[0]-g)/-2;b[1]+=w}o[h].setStyle({x:b[0],y:b[1],text:i.formatValueText(this._dataInterval[h]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",n.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(t,r,n,i){var l=this.visualMapModel,o=l.getExtent(),c=l.itemSize,d=[0,c[1]],u=this._shapes,h=u.indicator;if(h){h.attr("invisible",!1);var f={convertOpacityToAlpha:!0},p=this.getControllerVisual(t,"color",f),g=this.getControllerVisual(t,"symbolSize"),b=oc(t,o,d,!0),w=c[0]-g/2,j={x:h.x,y:h.y};h.y=b,h.x=w;var k=To(u.indicatorLabelPoint,d0(h,this.group)),T=u.indicatorLabel;T.attr("invisible",!1);var E=this._applyTransform("left",u.mainGroup),I=this._orient,R=I==="horizontal";T.setStyle({text:(n||"")+l.formatValueText(r),verticalAlign:R?E:"middle",align:R?"center":E});var P={x:w,y:b,style:{fill:p}},H={style:{x:k[0],y:k[1]}};if(l.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var G={duration:100,easing:"cubicInOut",additive:!0};h.x=j.x,h.y=j.y,h.animateTo(P,G),T.animateTo(H,G)}else h.attr(P),T.attr(H);this._firstShowIndicator=!1;var X=this._shapes.handleLabels;if(X)for(var U=0;U<X.length;U++)this.api.enterBlur(X[U])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(r){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,i=t._applyTransform([r.offsetX,r.offsetY],t._shapes.mainGroup,!0,!0);i[1]=dV(EC(0,i[1]),n[1]),t._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=n[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,r){var n=this.visualMapModel,i=n.itemSize;if(n.option.hoverLink){var l=[0,i[1]],o=n.getExtent();t=dV(EC(l[0],t),l[1]);var c=dEe(n,o,l),d=[t-c,t+c],u=oc(t,l,o,!0),h=[oc(d[0],l,o,!0),oc(d[1],l,o,!0)];d[0]<l[0]&&(h[0]=-1/0),d[1]>l[1]&&(h[1]=1/0),r&&(h[0]===-1/0?this._showIndicator(u,h[1],"< ",c):h[1]===1/0?this._showIndicator(u,h[0],"> ",c):this._showIndicator(u,u," ",c));var f=this._hoverLinkDataIndices,p=[];(r||hV(n))&&(p=this._hoverLinkDataIndices=n.findTargetDataIndices(h));var g=ige(f,p);this._dispatchHighDown("downplay",t2(g[0],n)),this._dispatchHighDown("highlight",t2(g[1],n))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var r;if(Kf(t.target,function(c){var d=la(c);if(d.dataIndex!=null)return r=d,!0},!0),!!r){var n=this.ecModel.getSeriesByIndex(r.seriesIndex),i=this.visualMapModel;if(i.isTargetSeries(n)){var l=n.getData(r.dataType),o=l.getStore().get(i.getDataDimensionIndex(l),r.dataIndex);isNaN(o)||this._showIndicator(o,o)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var n=0;n<r.length;n++)this.api.leaveBlur(r[n])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",t2(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,r,n,i){var l=d0(r,i?null:this.group);return lt(t)?To(t,l,n):NN(t,l,n)},e.prototype._dispatchHighDown=function(t,r){r&&r.length&&this.api.dispatchAction({type:t,batch:r})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e})(EK);function uV(a,e,t,r){return new fs({shape:{points:a},draggable:!!t,cursor:e,drift:t,onmousemove:function(n){Od(n.event)},ondragend:r})}function dEe(a,e,t){var r=lEe/2,n=a.get("hoverLinkDataSize");return n&&(r=oc(n,e,t,!0)/2),r}function hV(a){var e=a.get("hoverLinkOnHandle");return!!(e??a.get("realtime"))}function fV(a){return a==="vertical"?"ns-resize":"ew-resize"}var uEe={type:"selectDataRange",event:"dataRangeSelected",update:"update"},hEe=function(a,e){e.eachComponent({mainType:"visualMap",query:a},function(t){t.setSelected(a.selected)})},fEe=[{createOnAllSeries:!0,reset:function(a,e){var t=[];return e.eachComponent("visualMap",function(r){var n=a.pipelineContext;!r.isTargetSeries(a)||n&&n.large||t.push(RMe(r.stateList,r.targetVisuals,Tt(r.getValueState,r),r.getDataDimensionIndex(a.getData())))}),t}},{createOnAllSeries:!0,reset:function(a,e){var t=a.getData(),r=[];e.eachComponent("visualMap",function(n){if(n.isTargetSeries(a)){var i=n.getVisualMeta(Tt(pEe,null,a,n))||{stops:[],outerColors:[]},l=n.getDataDimensionIndex(t);l>=0&&(i.dimension=l,r.push(i))}}),a.getData().setVisual("visualMeta",r)}}];function pEe(a,e,t,r){for(var n=e.targetVisuals[r],i=Ni.prepareVisualTypes(n),l={color:Pb(a.getData(),"color")},o=0,c=i.length;o<c;o++){var d=i[o],u=n[d==="opacity"?"__alphaForOpacity":d];u&&u.applyVisual(t,h,f)}return l.color;function h(p){return l[p]}function f(p,g){l[p]=g}}var pV=se;function xEe(a){var e=a&&a.visualMap;lt(e)||(e=e?[e]:[]),pV(e,function(t){if(t){Vp(t,"splitList")&&!Vp(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var r=t.pieces;r&&lt(r)&&pV(r,function(n){aa(n)&&(Vp(n,"start")&&!Vp(n,"min")&&(n.min=n.start),Vp(n,"end")&&!Vp(n,"max")&&(n.max=n.end))})}})}function Vp(a,e){return a&&a.hasOwnProperty&&a.hasOwnProperty(e)}var xV=!1;function IK(a){xV||(xV=!0,a.registerSubTypeDefaulter("visualMap",function(e){return!e.categories&&(!(e.pieces?e.pieces.length>0:e.splitNumber>0)||e.calculable)?"continuous":"piecewise"}),a.registerAction(uEe,hEe),se(fEe,function(e){a.registerVisual(a.PRIORITY.VISUAL.COMPONENT,e)}),a.registerPreprocessor(xEe))}function RK(a){a.registerComponentModel(iEe),a.registerComponentView(cEe),IK(a)}var mEe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t._pieceList=[],t}return e.prototype.optionUpdated=function(t,r){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var n=this._mode=this._determineMode();this._pieceList=[],gEe[this._mode].call(this,this._pieceList),this._resetSelected(t,r);var i=this.option.categories;this.resetVisual(function(l,o){n==="categories"?(l.mappingMethod="category",l.categories=Xt(i)):(l.dataExtent=this.getExtent(),l.mappingMethod="piecewise",l.pieceList=ct(this._pieceList,function(c){return c=Xt(c),o!=="inRange"&&(c.visual=null),c}))})},e.prototype.completeVisualOption=function(){var t=this.option,r={},n=Ni.listVisualTypes(),i=this.isCategory();se(t.pieces,function(o){se(n,function(c){o.hasOwnProperty(c)&&(r[c]=1)})}),se(r,function(o,c){var d=!1;se(this.stateList,function(u){d=d||l(t,u,c)||l(t.target,u,c)},this),!d&&se(this.stateList,function(u){(t[u]||(t[u]={}))[c]=MK.get(c,u==="inRange"?"active":"inactive",i)})},this);function l(o,c,d){return o&&o[c]&&o[c].hasOwnProperty(d)}a.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,r){var n=this.option,i=this._pieceList,l=(r?n:t).selected||{};if(n.selected=l,se(i,function(c,d){var u=this.getSelectedMapKey(c);l.hasOwnProperty(u)||(l[u]=!0)},this),n.selectedMode==="single"){var o=!1;se(i,function(c,d){var u=this.getSelectedMapKey(c);l[u]&&(o?l[u]=!1:o=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return this._mode==="categories"?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=Xt(t)},e.prototype.getValueState=function(t){var r=Ni.findPieceIndex(t,this._pieceList);return r!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var r=[],n=this._pieceList;return this.eachTargetSeries(function(i){var l=[],o=i.getData();o.each(this.getDataDimensionIndex(o),function(c,d){var u=Ni.findPieceIndex(c,n);u===t&&l.push(d)},this),r.push({seriesId:i.id,dataIndex:l})},this),r},e.prototype.getRepresentValue=function(t){var r;if(this.isCategory())r=t.value;else if(t.value!=null)r=t.value;else{var n=t.interval||[];r=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return r},e.prototype.getVisualMeta=function(t){if(this.isCategory())return;var r=[],n=["",""],i=this;function l(u,h){var f=i.getRepresentValue({interval:u});h||(h=i.getValueState(f));var p=t(f,h);u[0]===-1/0?n[0]=p:u[1]===1/0?n[1]=p:r.push({value:u[0],color:p},{value:u[1],color:p})}var o=this._pieceList.slice();if(!o.length)o.push({interval:[-1/0,1/0]});else{var c=o[0].interval[0];c!==-1/0&&o.unshift({interval:[-1/0,c]}),c=o[o.length-1].interval[1],c!==1/0&&o.push({interval:[c,1/0]})}var d=-1/0;return se(o,function(u){var h=u.interval;h&&(h[0]>d&&l([d,h[0]],"outOfRange"),l(h.slice()),d=h[1])},this),{stops:r,outerColors:n}},e.type="visualMap.piecewise",e.defaultOption=Dh(A_.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e})(A_),gEe={splitNumber:function(a){var e=this.option,t=Math.min(e.precision,20),r=this.getExtent(),n=e.splitNumber;n=Math.max(parseInt(n,10),1),e.splitNumber=n;for(var i=(r[1]-r[0])/n;+i.toFixed(t)!==i&&t<5;)t++;e.precision=t,i=+i.toFixed(t),e.minOpen&&a.push({interval:[-1/0,r[0]],close:[0,0]});for(var l=0,o=r[0];l<n;o+=i,l++){var c=l===n-1?r[1]:o+i;a.push({interval:[o,c],close:[1,1]})}e.maxOpen&&a.push({interval:[r[1],1/0],close:[0,0]}),PO(a),se(a,function(d,u){d.index=u,d.text=this.formatValueText(d.interval)},this)},categories:function(a){var e=this.option;se(e.categories,function(t){a.push({text:this.formatValueText(t,!0),value:t})},this),mV(e,a)},pieces:function(a){var e=this.option;se(e.pieces,function(t,r){aa(t)||(t={value:t});var n={text:"",index:r};if(t.label!=null&&(n.text=t.label),t.hasOwnProperty("value")){var i=n.value=t.value;n.interval=[i,i],n.close=[1,1]}else{for(var l=n.interval=[],o=n.close=[0,0],c=[1,0,1],d=[-1/0,1/0],u=[],h=0;h<2;h++){for(var f=[["gte","gt","min"],["lte","lt","max"]][h],p=0;p<3&&l[h]==null;p++)l[h]=t[f[p]],o[h]=c[p],u[h]=p===2;l[h]==null&&(l[h]=d[h])}u[0]&&l[1]===1/0&&(o[0]=0),u[1]&&l[0]===-1/0&&(o[1]=0),l[0]===l[1]&&o[0]&&o[1]&&(n.value=l[0])}n.visual=Ni.retrieveVisuals(t),a.push(n)},this),mV(e,a),PO(a),se(a,function(t){var r=t.close,n=[["<",""][r[1]],[">",""][r[0]]];t.text=t.text||this.formatValueText(t.value!=null?t.value:t.interval,!1,n)},this)}};function mV(a,e){var t=a.inverse;(a.orient==="vertical"?!t:t)&&e.reverse()}var vEe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.doRender=function(){var t=this.group;t.removeAll();var r=this.visualMapModel,n=r.get("textGap"),i=r.textStyleModel,l=this._getItemAlign(),o=r.itemSize,c=this._getViewData(),d=c.endsText,u=$i(r.get("showLabel",!0),!d),h=!r.get("selectedMode");d&&this._renderEndsText(t,d[0],o,u,l),se(c.viewPieceList,function(f){var p=f.piece,g=new $t;g.onclick=Tt(this._onItemClick,this,p),this._enableHoverLink(g,f.indexInModelPieceList);var b=r.getRepresentValue(p);if(this._createItemSymbol(g,b,[0,0,o[0],o[1]],h),u){var w=this.visualMapModel.getValueState(b),j=i.get("align")||l;g.add(new tr({style:Fr(i,{x:j==="right"?-n:o[0]+n,y:o[1]/2,text:p.text,verticalAlign:i.get("verticalAlign")||"middle",align:j,opacity:Ht(i.get("opacity"),w==="outOfRange"?.5:1)}),silent:h}))}t.add(g)},this),d&&this._renderEndsText(t,d[1],o,u,l),u0(r.get("orient"),t,r.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,r){var n=this;t.on("mouseover",function(){return i("highlight")}).on("mouseout",function(){return i("downplay")});var i=function(l){var o=n.visualMapModel;o.option.hoverLink&&n.api.dispatchAction({type:l,batch:t2(o.findTargetDataIndices(r),o)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,r=t.option;if(r.orient==="vertical")return DK(t,this.api,t.itemSize);var n=r.align;return(!n||n==="auto")&&(n="left"),n},e.prototype._renderEndsText=function(t,r,n,i,l){if(r){var o=new $t,c=this.visualMapModel.textStyleModel;o.add(new tr({style:Fr(c,{x:i?l==="right"?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:i?l:"center",text:r})})),t.add(o)}},e.prototype._getViewData=function(){var t=this.visualMapModel,r=ct(t.getPieceList(),function(o,c){return{piece:o,indexInModelPieceList:c}}),n=t.get("text"),i=t.get("orient"),l=t.get("inverse");return(i==="horizontal"?l:!l)?r.reverse():n&&(n=n.slice().reverse()),{viewPieceList:r,endsText:n}},e.prototype._createItemSymbol=function(t,r,n,i){var l=Jn(this.getControllerVisual(r,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(r,"color"));l.silent=i,t.add(l)},e.prototype._onItemClick=function(t){var r=this.visualMapModel,n=r.option,i=n.selectedMode;if(i){var l=Xt(n.selected),o=r.getSelectedMapKey(t);i==="single"||i===!0?(l[o]=!0,se(l,function(c,d){l[d]=d===o})):l[o]=!l[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:l})}},e.type="visualMap.piecewise",e})(EK);function LK(a){a.registerComponentModel(mEe),a.registerComponentView(vEe),IK(a)}function bEe(a){Ta(RK),Ta(LK)}var yEe=(function(){function a(e){this._thumbnailModel=e}return a.prototype.reset=function(e){this._renderVersion=e.getMainProcessVersion()},a.prototype.renderContent=function(e){var t=e.api.getViewOfComponentModel(this._thumbnailModel);t&&(e.group.silent=!0,t.renderContent({group:e.group,targetTrans:e.targetTrans,z2Range:rY(e.group),roamType:e.roamType,viewportRect:e.viewportRect,renderVersion:this._renderVersion}))},a.prototype.updateWindow=function(e,t){var r=t.getViewOfComponentModel(this._thumbnailModel);r&&r.updateWindow({targetTrans:e,renderVersion:this._renderVersion})},a})(),wEe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.preventAutoZ=!0,t}return e.prototype.optionUpdated=function(t,r){this._updateBridge()},e.prototype._updateBridge=function(){var t=this._birdge=this._birdge||new yEe(this);if(this._target=null,this.ecModel.eachSeries(function(n){Vz(n,null)}),this.shouldShow()){var r=this.getTarget();Vz(r.baseMapProvider,t)}},e.prototype.shouldShow=function(){return this.getShallow("show",!0)},e.prototype.getBridge=function(){return this._birdge},e.prototype.getTarget=function(){if(this._target)return this._target;var t=this.getReferringComponents("series",{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];return t?t.subType!=="graph"&&(t=null):t=this.ecModel.queryComponents({mainType:"series",subType:"graph"})[0],this._target={baseMapProvider:t},this._target},e.type="thumbnail",e.layoutMode="box",e.dependencies=["series","geo"],e.defaultOption={show:!0,right:1,bottom:1,height:"25%",width:"25%",itemStyle:{borderColor:Be.color.border,borderWidth:2},windowStyle:{borderWidth:1,color:Be.color.neutral30,borderColor:Be.color.neutral40,opacity:.3},z:10},e})(za),_Ee=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){if(this._api=n,this._model=t,this._coordSys||(this._coordSys=new V0),!this._isEnabled()){this._clear();return}this._renderVersion=n.getMainProcessVersion();var i=this.group;i.removeAll();var l=t.getModel("itemStyle"),o=l.getItemStyle();o.fill==null&&(o.fill=r.get("backgroundColor")||Be.color.neutral00);var c=pi(t,n).refContainer,d=cn(kY(t,!0),c),u=o.lineWidth||0,h=this._contentRect=j0(d.clone(),u/2,!0,!0),f=new $t;i.add(f),f.setClipPath(new Ea({shape:h.plain()}));var p=this._targetGroup=new $t;f.add(p);var g=d.plain();g.r=l.getShallow("borderRadius",!0),i.add(this._bgRect=new Ea({style:o,shape:g,silent:!1,cursor:"grab"}));var b=t.getModel("windowStyle"),w=b.getShallow("borderRadius",!0);f.add(this._windowRect=new Ea({shape:{x:0,y:0,width:0,height:0,r:w},style:b.getItemStyle(),silent:!1,cursor:"grab"})),this._dealRenderContent(),this._dealUpdateWindow(),vV(t,this)},e.prototype.renderContent=function(t){this._bridgeRendered=t,this._isEnabled()&&(this._dealRenderContent(),this._dealUpdateWindow(),vV(this._model,this))},e.prototype._dealRenderContent=function(){var t=this._bridgeRendered;if(!(!t||t.renderVersion!==this._renderVersion)){var r=this._targetGroup,n=this._coordSys,i=this._contentRect;if(r.removeAll(),!!t){var l=t.group,o=l.getBoundingRect();r.add(l),this._bgRect.z2=t.z2Range.min-10,n.setBoundingRect(o.x,o.y,o.width,o.height);var c=cn({left:"center",top:"center",aspect:o.width/o.height},i);n.setViewRect(c.x,c.y,c.width,c.height),l.attr(n.getTransformInfo().raw),this._windowRect.z2=t.z2Range.max+10,this._resetRoamController(t.roamType)}}},e.prototype.updateWindow=function(t){var r=this._bridgeRendered;r&&r.renderVersion===t.renderVersion&&(r.targetTrans=t.targetTrans),this._isEnabled()&&this._dealUpdateWindow()},e.prototype._dealUpdateWindow=function(){var t=this._bridgeRendered;if(!(!t||t.renderVersion!==this._renderVersion)){var r=Io([],t.targetTrans),n=Sc([],this._coordSys.transform,r);this._transThisToTarget=Io([],n);var i=t.viewportRect;i?i=i.clone():i=new ra(0,0,this._api.getWidth(),this._api.getHeight()),i.applyTransform(n);var l=this._windowRect,o=l.shape.r;l.setShape(ta({r:o},i))}},e.prototype._resetRoamController=function(t){var r=this,n=this._api,i=this._roamController;if(i||(i=this._roamController=new F0(n.getZr())),!t||!this._isEnabled()){i.disable();return}i.enable(t,{api:n,zInfo:{component:this._model},triggerInfo:{roamTrigger:null,isInSelf:function(l,o,c){return r._contentRect.contain(o,c)}}}),i.off("pan").off("zoom").on("pan",Tt(this._onPan,this)).on("zoom",Tt(this._onZoom,this))},e.prototype._onPan=function(t){var r=this._transThisToTarget;if(!(!this._isEnabled()||!r)){var n=Fn([],[t.oldX,t.oldY],r),i=Fn([],[t.oldX-t.dx,t.oldY-t.dy],r);this._api.dispatchAction(gV(this._model.getTarget().baseMapProvider,{dx:i[0]-n[0],dy:i[1]-n[1]}))}},e.prototype._onZoom=function(t){var r=this._transThisToTarget;if(!(!this._isEnabled()||!r)){var n=Fn([],[t.originX,t.originY],r);this._api.dispatchAction(gV(this._model.getTarget().baseMapProvider,{zoom:1/t.scale,originX:n[0],originY:n[1]}))}},e.prototype._isEnabled=function(){var t=this._model;if(!t||!t.shouldShow())return!1;var r=t.getTarget().baseMapProvider;return!!r},e.prototype._clear=function(){this.group.removeAll(),this._bridgeRendered=null,this._roamController&&this._roamController.disable()},e.prototype.remove=function(){this._clear()},e.prototype.dispose=function(){this._clear()},e.type="thumbnail",e})(tn);function gV(a,e){var t=a.mainType==="series"?a.subType+"Roam":a.mainType+"Roam",r={type:t};return r[a.mainType+"Id"]=a.id,et(r,e),r}function vV(a,e){var t=S0(a);jN(e.group,t.z,t.zlevel)}function NEe(a){a.registerComponentModel(wEe),a.registerComponentView(_Ee)}var jEe={label:{enabled:!0},decal:{show:!1}},bV=Ia(),SEe={};function kEe(a,e){var t=a.getModel("aria");if(!t.get("enabled"))return;var r=Xt(jEe);Ca(r.label,a.getLocaleModel().get("aria"),!1),Ca(t.option,r,!1),n(),i();function n(){var d=t.getModel("decal"),u=d.get("show");if(u){var h=Pt();a.eachSeries(function(f){if(!f.isColorBySeries()){var p=h.get(f.type);p||(p={},h.set(f.type,p)),bV(f).scope=p}}),a.eachRawSeries(function(f){if(a.isSeriesFiltered(f))return;if(Yt(f.enableAriaDecal)){f.enableAriaDecal();return}var p=f.getData();if(f.isColorBySeries()){var k=h3(f.ecModel,f.name,SEe,a.getSeriesCount()),T=p.getVisual("decal");p.setVisual("decal",E(T,k))}else{var g=f.getRawData(),b={},w=bV(f).scope;p.each(function(I){var R=p.getRawIndex(I);b[R]=I});var j=g.count();g.each(function(I){var R=b[I],P=g.getName(I)||I+"",H=h3(f.ecModel,P,w,j),G=p.getItemVisual(R,"decal");p.setItemVisual(R,"decal",E(G,H))})}function E(I,R){var P=I?et(et({},R),I):R;return P.dirty=!0,P}})}}function i(){var d=e.getZr().dom;if(d){var u=a.getLocaleModel().get("aria"),h=t.getModel("label");if(h.option=ta(h.option,u),!!h.get("enabled")){if(d.setAttribute("role","img"),h.get("description")){d.setAttribute("aria-label",h.get("description"));return}var f=a.getSeriesCount(),p=h.get(["data","maxCount"])||10,g=h.get(["series","maxCount"])||10,b=Math.min(f,g),w;if(!(f<1)){var j=o();if(j){var k=h.get(["general","withTitle"]);w=l(k,{title:j})}else w=h.get(["general","withoutTitle"]);var T=[],E=f>1?h.get(["series","multiple","prefix"]):h.get(["series","single","prefix"]);w+=l(E,{seriesCount:f}),a.eachSeries(function(H,G){if(G<b){var X=void 0,U=H.get("name"),te=U?"withName":"withoutName";X=f>1?h.get(["series","multiple",te]):h.get(["series","single",te]),X=l(X,{seriesId:H.seriesIndex,seriesName:H.get("name"),seriesType:c(H.subType)});var Z=H.getData();if(Z.count()>p){var J=h.get(["data","partialData"]);X+=l(J,{displayCnt:p})}else X+=h.get(["data","allData"]);for(var B=h.get(["data","separator","middle"]),W=h.get(["data","separator","end"]),$=h.get(["data","excludeDimensionId"]),Q=[],ne=0;ne<Z.count();ne++)if(ne<p){var re=Z.getName(ne),K=$?pr(Z.getValues(ne),function(ce,de){return ja($,de)===-1}):Z.getValues(ne),ae=h.get(["data",re?"withName":"withoutName"]);Q.push(l(ae,{name:re,value:K.join(B)}))}X+=Q.join(B)+W,T.push(X)}});var I=h.getModel(["series","multiple","separator"]),R=I.get("middle"),P=I.get("end");w+=T.join(R)+P,d.setAttribute("aria-label",w)}}}}function l(d,u){if(!At(d))return d;var h=d;return se(u,function(f,p){h=h.replace(new RegExp("\\{\\s*"+p+"\\s*\\}","g"),f)}),h}function o(){var d=a.get("title");return d&&d.length&&(d=d[0]),d&&d.text}function c(d){var u=a.getLocaleModel().get(["series","typeNames"]);return u[d]||u.chart}}function CEe(a){if(!(!a||!a.aria)){var e=a.aria;e.show!=null&&(e.enabled=e.show),e.label=e.label||{},se(["description","general","series","data"],function(t){e[t]!=null&&(e.label[t]=e[t])})}}function AEe(a){a.registerPreprocessor(CEe),a.registerVisual(a.PRIORITY.VISUAL.ARIA,kEe)}var yV={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},TEe=(function(){function a(e){var t=this._condVal=At(e)?new RegExp(e):gxe(e)?e:null;if(t==null){var r="";cr(r)}}return a.prototype.evaluate=function(e){var t=typeof e;return At(t)?this._condVal.test(e):Ka(t)?this._condVal.test(e+""):!1},a})(),MEe=(function(){function a(){}return a.prototype.evaluate=function(){return this.value},a})(),EEe=(function(){function a(){}return a.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(!e[t].evaluate())return!1;return!0},a})(),DEe=(function(){function a(){}return a.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(e[t].evaluate())return!0;return!1},a})(),IEe=(function(){function a(){}return a.prototype.evaluate=function(){return!this.child.evaluate()},a})(),REe=(function(){function a(){}return a.prototype.evaluate=function(){for(var e=!!this.valueParser,t=this.getValue,r=t(this.valueGetterParam),n=e?this.valueParser(r):null,i=0;i<this.subCondList.length;i++)if(!this.subCondList[i].evaluate(e?n:r))return!1;return!0},a})();function U6(a,e){if(a===!0||a===!1){var t=new MEe;return t.value=a,t}var r="";return OK(a)||cr(r),a.and?wV("and",a,e):a.or?wV("or",a,e):a.not?LEe(a,e):OEe(a,e)}function wV(a,e,t){var r=e[a],n="";lt(r)||cr(n),r.length||cr(n);var i=a==="and"?new EEe:new DEe;return i.children=ct(r,function(l){return U6(l,t)}),i.children.length||cr(n),i}function LEe(a,e){var t=a.not,r="";OK(t)||cr(r);var n=new IEe;return n.child=U6(t,e),n.child||cr(r),n}function OEe(a,e){for(var t="",r=e.prepareGetValue(a),n=[],i=Ua(a),l=a.parser,o=l?qY(l):null,c=0;c<i.length;c++){var d=i[c];if(!(d==="parser"||e.valueGetterAttrMap.get(d))){var u=Rt(yV,d)?yV[d]:d,h=a[d],f=o?o(h):h,p=y1e(u,f)||u==="reg"&&new TEe(f);p||cr(t),n.push(p)}}n.length||cr(t);var g=new REe;return g.valueGetterParam=r,g.valueParser=o,g.getValue=e.getValue,g.subCondList=n,g}function OK(a){return aa(a)&&!ds(a)}var PEe=(function(){function a(e,t){this._cond=U6(e,t)}return a.prototype.evaluate=function(){return this._cond.evaluate()},a})();function zEe(a,e){return new PEe(a,e)}var BEe={type:"echarts:filter",transform:function(a){for(var e=a.upstream,t,r=zEe(a.config,{valueGetterAttrMap:Pt({dimension:!0}),prepareGetValue:function(o){var c="",d=o.dimension;Rt(o,"dimension")||cr(c);var u=e.getDimensionInfo(d);return u||cr(c),{dimIdx:u.index}},getValue:function(o){return e.retrieveValueFromItem(t,o.dimIdx)}}),n=[],i=0,l=e.count();i<l;i++)t=e.getRawDataItem(i),r.evaluate()&&n.push(t);return{data:n}}},FEe={type:"echarts:sort",transform:function(a){var e=a.upstream,t=a.config,r="",n=Or(t);n.length||cr(r);var i=[];se(n,function(u){var h=u.dimension,f=u.order,p=u.parser,g=u.incomparable;if(h==null&&cr(r),f!=="asc"&&f!=="desc"&&cr(r),g&&g!=="min"&&g!=="max"){var b="";cr(b)}if(f!=="asc"&&f!=="desc"){var w="";cr(w)}var j=e.getDimensionInfo(h);j||cr(r);var k=p?qY(p):null;p&&!k&&cr(r),i.push({dimIdx:j.index,parser:k,comparator:new ZY(f,g)})});var l=e.sourceFormat;l!==Oi&&l!==Ml&&cr(r);for(var o=[],c=0,d=e.count();c<d;c++)o.push(e.getRawDataItem(c));return o.sort(function(u,h){for(var f=0;f<i.length;f++){var p=i[f],g=e.retrieveValueFromItem(u,p.dimIdx),b=e.retrieveValueFromItem(h,p.dimIdx);p.parser&&(g=p.parser(g),b=p.parser(b));var w=p.comparator.evaluate(g,b);if(w!==0)return w}return 0}),{data:o}}};function VEe(a){a.registerTransform(BEe),a.registerTransform(FEe)}var HEe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="dataset",t}return e.prototype.init=function(t,r,n){a.prototype.init.call(this,t,r,n),this._sourceManager=new e$(this),QP(this)},e.prototype.mergeOption=function(t,r){a.prototype.mergeOption.call(this,t,r),QP(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:Mo},e})(za),UEe=(function(a){Ie(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="dataset",t}return e.type="dataset",e})(tn);function GEe(a){a.registerComponentModel(HEe),a.registerComponentView(UEe)}var ic=Ic.CMD;function nx(a,e){return Math.abs(a-e)<1e-5}function kA(a){var e=a.data,t=a.len(),r=[],n,i=0,l=0,o=0,c=0;function d(Z,J){n&&n.length>2&&r.push(n),n=[Z,J]}function u(Z,J,B,W){nx(Z,B)&&nx(J,W)||n.push(Z,J,B,W,B,W)}function h(Z,J,B,W,$,Q){var ne=Math.abs(J-Z),re=Math.tan(ne/4)*4/3,K=J<Z?-1:1,ae=Math.cos(Z),ce=Math.sin(Z),de=Math.cos(J),he=Math.sin(J),pe=ae*$+B,Re=ce*Q+W,Te=de*$+B,ke=he*Q+W,Le=$*re*K,Ne=Q*re*K;n.push(pe-Le*ce,Re+Ne*ae,Te+Le*he,ke-Ne*de,Te,ke)}for(var f,p,g,b,w=0;w<t;){var j=e[w++],k=w===1;switch(k&&(i=e[w],l=e[w+1],o=i,c=l,(j===ic.L||j===ic.C||j===ic.Q)&&(n=[o,c])),j){case ic.M:i=o=e[w++],l=c=e[w++],d(o,c);break;case ic.L:f=e[w++],p=e[w++],u(i,l,f,p),i=f,l=p;break;case ic.C:n.push(e[w++],e[w++],e[w++],e[w++],i=e[w++],l=e[w++]);break;case ic.Q:f=e[w++],p=e[w++],g=e[w++],b=e[w++],n.push(i+2/3*(f-i),l+2/3*(p-l),g+2/3*(f-g),b+2/3*(p-b),g,b),i=g,l=b;break;case ic.A:var T=e[w++],E=e[w++],I=e[w++],R=e[w++],P=e[w++],H=e[w++]+P;w+=1;var G=!e[w++];f=Math.cos(P)*I+T,p=Math.sin(P)*R+E,k?(o=f,c=p,d(o,c)):u(i,l,f,p),i=Math.cos(H)*I+T,l=Math.sin(H)*R+E;for(var X=(G?-1:1)*Math.PI/2,U=P;G?U>H:U<H;U+=X){var te=G?Math.max(U+X,H):Math.min(U+X,H);h(U,te,T,E,I,R)}break;case ic.R:o=i=e[w++],c=l=e[w++],f=o+e[w++],p=c+e[w++],d(f,c),u(f,c,f,p),u(f,p,o,p),u(o,p,o,c),u(o,c,f,c);break;case ic.Z:n&&u(i,l,o,c),i=o,l=c;break}}return n&&n.length>2&&r.push(n),r}function CA(a,e,t,r,n,i,l,o,c,d){if(nx(a,t)&&nx(e,r)&&nx(n,l)&&nx(i,o)){c.push(l,o);return}var u=2/d,h=u*u,f=l-a,p=o-e,g=Math.sqrt(f*f+p*p);f/=g,p/=g;var b=t-a,w=r-e,j=n-l,k=i-o,T=b*b+w*w,E=j*j+k*k;if(T<h&&E<h){c.push(l,o);return}var I=f*b+p*w,R=-f*j-p*k,P=T-I*I,H=E-R*R;if(P<h&&I>=0&&H<h&&R>=0){c.push(l,o);return}var G=[],X=[];yh(a,t,n,l,.5,G),yh(e,r,i,o,.5,X),CA(G[0],X[0],G[1],X[1],G[2],X[2],G[3],X[3],c,d),CA(G[4],X[4],G[5],X[5],G[6],X[6],G[7],X[7],c,d)}function WEe(a,e){var t=kA(a),r=[];e=e||1;for(var n=0;n<t.length;n++){var i=t[n],l=[],o=i[0],c=i[1];l.push(o,c);for(var d=2;d<i.length;){var u=i[d++],h=i[d++],f=i[d++],p=i[d++],g=i[d++],b=i[d++];CA(o,c,u,h,f,p,g,b,l,e),o=g,c=b}r.push(l)}return r}function PK(a,e,t){var r=a[e],n=a[1-e],i=Math.abs(r/n),l=Math.ceil(Math.sqrt(i*t)),o=Math.floor(t/l);o===0&&(o=1,l=t);for(var c=[],d=0;d<l;d++)c.push(o);var u=l*o,h=t-u;if(h>0)for(var d=0;d<h;d++)c[d%l]+=1;return c}function _V(a,e,t){for(var r=a.r0,n=a.r,i=a.startAngle,l=a.endAngle,o=Math.abs(l-i),c=o*n,d=n-r,u=c>Math.abs(d),h=PK([c,d],u?0:1,e),f=(u?o:d)/h.length,p=0;p<h.length;p++)for(var g=(u?d:o)/h[p],b=0;b<h[p];b++){var w={};u?(w.startAngle=i+f*p,w.endAngle=i+f*(p+1),w.r0=r+g*b,w.r=r+g*(b+1)):(w.startAngle=i+g*b,w.endAngle=i+g*(b+1),w.r0=r+f*p,w.r=r+f*(p+1)),w.clockwise=a.clockwise,w.cx=a.cx,w.cy=a.cy,t.push(w)}}function YEe(a,e,t){for(var r=a.width,n=a.height,i=r>n,l=PK([r,n],i?0:1,e),o=i?"width":"height",c=i?"height":"width",d=i?"x":"y",u=i?"y":"x",h=a[o]/l.length,f=0;f<l.length;f++)for(var p=a[c]/l[f],g=0;g<l[f];g++){var b={};b[d]=f*h,b[u]=g*p,b[o]=h,b[c]=p,b.x+=a.x,b.y+=a.y,t.push(b)}}function NV(a,e,t,r){return a*r-t*e}function $Ee(a,e,t,r,n,i,l,o){var c=t-a,d=r-e,u=l-n,h=o-i,f=NV(u,h,c,d);if(Math.abs(f)<1e-6)return null;var p=a-n,g=e-i,b=NV(p,g,u,h)/f;return b<0||b>1?null:new Qt(b*c+a,b*d+e)}function qEe(a,e,t){var r=new Qt;Qt.sub(r,t,e),r.normalize();var n=new Qt;Qt.sub(n,a,e);var i=n.dot(r);return i}function Hp(a,e){var t=a[a.length-1];t&&t[0]===e[0]&&t[1]===e[1]||a.push(e)}function XEe(a,e,t){for(var r=a.length,n=[],i=0;i<r;i++){var l=a[i],o=a[(i+1)%r],c=$Ee(l[0],l[1],o[0],o[1],e.x,e.y,t.x,t.y);c&&n.push({projPt:qEe(c,e,t),pt:c,idx:i})}if(n.length<2)return[{points:a},{points:a}];n.sort(function(w,j){return w.projPt-j.projPt});var d=n[0],u=n[n.length-1];if(u.idx<d.idx){var h=d;d=u,u=h}for(var f=[d.pt.x,d.pt.y],p=[u.pt.x,u.pt.y],g=[f],b=[p],i=d.idx+1;i<=u.idx;i++)Hp(g,a[i].slice());Hp(g,p),Hp(g,f);for(var i=u.idx+1;i<=d.idx+r;i++)Hp(b,a[i%r].slice());return Hp(b,f),Hp(b,p),[{points:g},{points:b}]}function jV(a){var e=a.points,t=[],r=[];xN(e,t,r);var n=new ra(t[0],t[1],r[0]-t[0],r[1]-t[1]),i=n.width,l=n.height,o=n.x,c=n.y,d=new Qt,u=new Qt;return i>l?(d.x=u.x=o+i/2,d.y=c,u.y=c+l):(d.y=u.y=c+l/2,d.x=o,u.x=o+i),XEe(e,d,u)}function T_(a,e,t,r){if(t===1)r.push(e);else{var n=Math.floor(t/2),i=a(e);T_(a,i[0],n,r),T_(a,i[1],t-n,r)}return r}function ZEe(a,e){for(var t=[],r=0;r<e;r++)t.push(KT(a));return t}function KEe(a,e){e.setStyle(a.style),e.z=a.z,e.z2=a.z2,e.zlevel=a.zlevel}function QEe(a){for(var e=[],t=0;t<a.length;)e.push([a[t++],a[t++]]);return e}function JEe(a,e){var t=[],r=a.shape,n;switch(a.type){case"rect":YEe(r,e,t),n=Ea;break;case"sector":_V(r,e,t),n=hs;break;case"circle":_V({r0:0,r:r.r,startAngle:0,endAngle:Math.PI*2,cx:r.cx,cy:r.cy},e,t),n=hs;break;default:var i=a.getComputedTransform(),l=i?Math.sqrt(Math.max(i[0]*i[0]+i[1]*i[1],i[2]*i[2]+i[3]*i[3])):1,o=ct(WEe(a.getUpdatedPathProxy(),l),function(j){return QEe(j)}),c=o.length;if(c===0)T_(jV,{points:o[0]},e,t);else if(c===e)for(var d=0;d<c;d++)t.push({points:o[d]});else{var u=0,h=ct(o,function(j){var k=[],T=[];xN(j,k,T);var E=(T[1]-k[1])*(T[0]-k[0]);return u+=E,{poly:j,area:E}});h.sort(function(j,k){return k.area-j.area});for(var f=e,d=0;d<c;d++){var p=h[d];if(f<=0)break;var g=d===c-1?f:Math.ceil(p.area/u*e);g<0||(T_(jV,{points:p.poly},g,t),f-=g)}}n=fs;break}if(!n)return ZEe(a,e);for(var b=[],d=0;d<t.length;d++){var w=new n;w.setShape(t[d]),KEe(a,w),b.push(w)}return b}function eDe(a,e){var t=a.length,r=e.length;if(t===r)return[a,e];for(var n=[],i=[],l=t<r?a:e,o=Math.min(t,r),c=Math.abs(r-t)/6,d=(o-2)/6,u=Math.ceil(c/d)+1,h=[l[0],l[1]],f=c,p=2;p<o;){var g=l[p-2],b=l[p-1],w=l[p++],j=l[p++],k=l[p++],T=l[p++],E=l[p++],I=l[p++];if(f<=0){h.push(w,j,k,T,E,I);continue}for(var R=Math.min(f,u-1)+1,P=1;P<=R;P++){var H=P/R;yh(g,w,k,E,H,n),yh(b,j,T,I,H,i),g=n[3],b=i[3],h.push(n[1],i[1],n[2],i[2],g,b),w=n[5],j=i[5],k=n[6],T=i[6]}f-=R-1}return l===a?[h,e]:[a,h]}function SV(a,e){for(var t=a.length,r=a[t-2],n=a[t-1],i=[],l=0;l<e.length;)i[l++]=r,i[l++]=n;return i}function tDe(a,e){for(var t,r,n,i=[],l=[],o=0;o<Math.max(a.length,e.length);o++){var c=a[o],d=e[o],u=void 0,h=void 0;c?d?(t=eDe(c,d),u=t[0],h=t[1],r=u,n=h):(h=SV(n||c,c),u=c):(u=SV(r||d,d),h=d),i.push(u),l.push(h)}return[i,l]}function kV(a){for(var e=0,t=0,r=0,n=a.length,i=0,l=n-2;i<n;l=i,i+=2){var o=a[l],c=a[l+1],d=a[i],u=a[i+1],h=o*u-d*c;e+=h,t+=(o+d)*h,r+=(c+u)*h}return e===0?[a[0]||0,a[1]||0]:[t/e/3,r/e/3,e]}function aDe(a,e,t,r){for(var n=(a.length-2)/6,i=1/0,l=0,o=a.length,c=o-2,d=0;d<n;d++){for(var u=d*6,h=0,f=0;f<o;f+=2){var p=f===0?u:(u+f-2)%c+2,g=a[p]-t[0],b=a[p+1]-t[1],w=e[f]-r[0],j=e[f+1]-r[1],k=w-g,T=j-b;h+=k*k+T*T}h<i&&(i=h,l=d)}return l}function rDe(a){for(var e=[],t=a.length,r=0;r<t;r+=2)e[r]=a[t-r-2],e[r+1]=a[t-r-1];return e}function nDe(a,e,t,r){for(var n=[],i,l=0;l<a.length;l++){var o=a[l],c=e[l],d=kV(o),u=kV(c);i==null&&(i=d[2]<0!=u[2]<0);var h=[],f=[],p=0,g=1/0,b=[],w=o.length;i&&(o=rDe(o));for(var j=aDe(o,c,d,u)*6,k=w-2,T=0;T<k;T+=2){var E=(j+T)%k+2;h[T+2]=o[E]-d[0],h[T+3]=o[E+1]-d[1]}h[0]=o[j]-d[0],h[1]=o[j+1]-d[1];for(var I=r/t,R=-r/2;R<=r/2;R+=I){for(var P=Math.sin(R),H=Math.cos(R),G=0,T=0;T<o.length;T+=2){var X=h[T],U=h[T+1],te=c[T]-u[0],Z=c[T+1]-u[1],J=te*H-Z*P,B=te*P+Z*H;b[T]=J,b[T+1]=B;var W=J-X,$=B-U;G+=W*W+$*$}if(G<g){g=G,p=R;for(var Q=0;Q<b.length;Q++)f[Q]=b[Q]}}n.push({from:h,to:f,fromCp:d,toCp:u,rotation:-p})}return n}function M_(a){return a.__isCombineMorphing}var zK="__mOriginal_";function E_(a,e,t){var r=zK+e,n=a[r]||a[e];a[r]||(a[r]=a[e]);var i=t.replace,l=t.after,o=t.before;a[e]=function(){var c=arguments,d;return o&&o.apply(this,c),i?d=i.apply(this,c):d=n.apply(this,c),l&&l.apply(this,c),d}}function gv(a,e){var t=zK+e;a[t]&&(a[e]=a[t],a[t]=null)}function CV(a,e){for(var t=0;t<a.length;t++)for(var r=a[t],n=0;n<r.length;){var i=r[n],l=r[n+1];r[n++]=e[0]*i+e[2]*l+e[4],r[n++]=e[1]*i+e[3]*l+e[5]}}function BK(a,e){var t=a.getUpdatedPathProxy(),r=e.getUpdatedPathProxy(),n=tDe(kA(t),kA(r)),i=n[0],l=n[1],o=a.getComputedTransform(),c=e.getComputedTransform();function d(){this.transform=null}o&&CV(i,o),c&&CV(l,c),E_(e,"updateTransform",{replace:d}),e.transform=null;var u=nDe(i,l,10,Math.PI),h=[];E_(e,"buildPath",{replace:function(f){for(var p=e.__morphT,g=1-p,b=[],w=0;w<u.length;w++){var j=u[w],k=j.from,T=j.to,E=j.rotation*p,I=j.fromCp,R=j.toCp,P=Math.sin(E),H=Math.cos(E);Ow(b,I,R,p);for(var G=0;G<k.length;G+=2){var X=k[G],U=k[G+1],te=T[G],Z=T[G+1],J=X*g+te*p,B=U*g+Z*p;h[G]=J*H-B*P+b[0],h[G+1]=J*P+B*H+b[1]}var W=h[0],$=h[1];f.moveTo(W,$);for(var G=2;G<k.length;){var te=h[G++],Z=h[G++],Q=h[G++],ne=h[G++],re=h[G++],K=h[G++];W===te&&$===Z&&Q===re&&ne===K?f.lineTo(re,K):f.bezierCurveTo(te,Z,Q,ne,re,K),W=re,$=K}}}})}function G6(a,e,t){if(!a||!e)return e;var r=t.done,n=t.during;BK(a,e),e.__morphT=0;function i(){gv(e,"buildPath"),gv(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return e.animateTo({__morphT:1},ta({during:function(l){e.dirtyShape(),n&&n(l)},done:function(){i(),r&&r()}},t)),e}function iDe(a,e,t,r,n,i){var l=16;a=n===t?0:Math.round(32767*(a-t)/(n-t)),e=i===r?0:Math.round(32767*(e-r)/(i-r));for(var o=0,c,d=(1<<l)/2;d>0;d/=2){var u=0,h=0;(a&d)>0&&(u=1),(e&d)>0&&(h=1),o+=d*d*(3*u^h),h===0&&(u===1&&(a=d-1-a,e=d-1-e),c=a,a=e,e=c)}return o}function D_(a){var e=1/0,t=1/0,r=-1/0,n=-1/0,i=ct(a,function(o){var c=o.getBoundingRect(),d=o.getComputedTransform(),u=c.x+c.width/2+(d?d[4]:0),h=c.y+c.height/2+(d?d[5]:0);return e=Math.min(u,e),t=Math.min(h,t),r=Math.max(u,r),n=Math.max(h,n),[u,h]}),l=ct(i,function(o,c){return{cp:o,z:iDe(o[0],o[1],e,t,r,n),path:a[c]}});return l.sort(function(o,c){return o.z-c.z}).map(function(o){return o.path})}function FK(a){return JEe(a.path,a.count)}function AA(){return{fromIndividuals:[],toIndividuals:[],count:0}}function sDe(a,e,t){var r=[];function n(I){for(var R=0;R<I.length;R++){var P=I[R];M_(P)?n(P.childrenRef()):P instanceof Ra&&r.push(P)}}n(a);var i=r.length;if(!i)return AA();var l=t.dividePath||FK,o=l({path:e,count:i});if(o.length!==i)return console.error("Invalid morphing: unmatched splitted path"),AA();r=D_(r),o=D_(o);for(var c=t.done,d=t.during,u=t.individualDelay,h=new Cd,f=0;f<i;f++){var p=r[f],g=o[f];g.parent=e,g.copyTransform(h),u||BK(p,g)}e.__isCombineMorphing=!0,e.childrenRef=function(){return o};function b(I){for(var R=0;R<o.length;R++)o[R].addSelfToZr(I)}E_(e,"addSelfToZr",{after:function(I){b(I)}}),E_(e,"removeSelfFromZr",{after:function(I){for(var R=0;R<o.length;R++)o[R].removeSelfFromZr(I)}});function w(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,gv(e,"addSelfToZr"),gv(e,"removeSelfFromZr")}var j=o.length;if(u)for(var k=j,T=function(){k--,k===0&&(w(),c&&c())},f=0;f<j;f++){var E=u?ta({delay:(t.delay||0)+u(f,j,r[f],o[f]),done:T},t):t;G6(r[f],o[f],E)}else e.__morphT=0,e.animateTo({__morphT:1},ta({during:function(I){for(var R=0;R<j;R++){var P=o[R];P.__morphT=e.__morphT,P.dirtyShape()}d&&d(I)},done:function(){w();for(var I=0;I<a.length;I++)gv(a[I],"updateTransform");c&&c()}},t));return e.__zr&&b(e.__zr),{fromIndividuals:r,toIndividuals:o,count:j}}function lDe(a,e,t){var r=e.length,n=[],i=t.dividePath||FK;function l(p){for(var g=0;g<p.length;g++){var b=p[g];M_(b)?l(b.childrenRef()):b instanceof Ra&&n.push(b)}}if(M_(a)){l(a.childrenRef());var o=n.length;if(o<r)for(var c=0,d=o;d<r;d++)n.push(KT(n[c++%o]));n.length=r}else{n=i({path:a,count:r});for(var u=a.getComputedTransform(),d=0;d<n.length;d++)n[d].setLocalTransform(u);if(n.length!==r)return console.error("Invalid morphing: unmatched splitted path"),AA()}n=D_(n),e=D_(e);for(var h=t.individualDelay,d=0;d<r;d++){var f=h?ta({delay:(t.delay||0)+h(d,r,n[d],e[d])},t):t;G6(n[d],e[d],f)}return{fromIndividuals:n,toIndividuals:e,count:e.length}}function AV(a){return lt(a[0])}function TV(a,e){for(var t=[],r=a.length,n=0;n<r;n++)t.push({one:a[n],many:[]});for(var n=0;n<e.length;n++){var i=e[n].length,l=void 0;for(l=0;l<i;l++)t[l%r].many.push(e[n][l])}for(var o=0,n=r-1;n>=0;n--)if(!t[n].many.length){var c=t[o].many;if(c.length<=1)if(o)o=0;else return t;var i=c.length,d=Math.ceil(i/2);t[n].many=c.slice(d,i),t[o].many=c.slice(0,d),o++}return t}var oDe={clone:function(a){for(var e=[],t=1-Math.pow(1-a.path.style.opacity,1/a.count),r=0;r<a.count;r++){var n=KT(a.path);n.setStyle("opacity",t),e.push(n)}return e},split:null};function DC(a,e,t,r,n,i){if(!a.length||!e.length)return;var l=Xx("update",r,n);if(!(l&&l.duration>0))return;var o=r.getModel("universalTransition").get("delay"),c=Object.assign({setToFinal:!0},l),d,u;AV(a)&&(d=a,u=e),AV(e)&&(d=e,u=a);function h(j,k,T,E,I){var R=j.many,P=j.one;if(R.length===1&&!I){var H=k?R[0]:P,G=k?P:R[0];if(M_(H))h({many:[H],one:G},!0,T,E,!0);else{var X=o?ta({delay:o(T,E)},c):c;G6(H,G,X),i(H,G,H,G,X)}}else for(var U=ta({dividePath:oDe[t],individualDelay:o&&function($,Q,ne,re){return o($+T,E)}},c),te=k?sDe(R,P,U):lDe(P,R,U),Z=te.fromIndividuals,J=te.toIndividuals,B=Z.length,W=0;W<B;W++){var X=o?ta({delay:o(W,B)},c):c;i(Z[W],J[W],k?R[W]:j.one,k?j.one:R[W],X)}}for(var f=d?d===a:a.length>e.length,p=d?TV(u,d):TV(f?e:a,[f?a:e]),g=0,b=0;b<p.length;b++)g+=p[b].many.length;for(var w=0,b=0;b<p.length;b++)h(p[b],f,w,g),w+=p[b].many.length}function Ff(a){if(!a)return[];if(lt(a)){for(var e=[],t=0;t<a.length;t++)e.push(Ff(a[t]));return e}var r=[];return a.traverse(function(n){n instanceof Ra&&!n.disableMorphing&&!n.invisible&&!n.ignore&&r.push(n)}),r}var VK=1e4,cDe=0,MV=1,EV=2,dDe=Ia();function uDe(a,e){for(var t=a.dimensions,r=0;r<t.length;r++){var n=a.getDimensionInfo(t[r]);if(n&&n.otherDims[e]===0)return t[r]}}function hDe(a,e,t){var r=a.getDimensionInfo(t),n=r&&r.ordinalMeta;if(r){var i=a.get(r.name,e);return n&&n.categories[i]||i+""}}function DV(a,e,t,r){var n=r?"itemChildGroupId":"itemGroupId",i=uDe(a,n);if(i){var l=hDe(a,e,i);return l}var o=a.getRawDataItem(e),c=r?"childGroupId":"groupId";if(o&&o[c])return o[c]+"";if(!r)return t||a.getId(e)}function IV(a){var e=[];return se(a,function(t){var r=t.data,n=t.dataGroupId;if(!(r.count()>VK))for(var i=r.getIndices(),l=0;l<i.length;l++)e.push({data:r,groupId:DV(r,l,n,!1),childGroupId:DV(r,l,n,!0),divide:t.divide,dataIndex:l})}),e}function IC(a,e,t){a.traverse(function(r){r instanceof Ra&&en(r,{style:{opacity:0}},e,{dataIndex:t,isFrom:!0})})}function RC(a){if(a.parent){var e=a.getComputedTransform();a.setLocalTransform(e),a.parent.remove(a)}}function Up(a){a.stopAnimation(),a.isGroup&&a.traverse(function(e){e.stopAnimation()})}function fDe(a,e,t){var r=Xx("update",t,e);r&&a.traverse(function(n){if(n instanceof so){var i=$ve(n);i&&n.animateFrom({style:i},r)}})}function pDe(a,e){var t=a.length;if(t!==e.length)return!1;for(var r=0;r<t;r++){var n=a[r],i=e[r];if(n.data.getId(n.dataIndex)!==i.data.getId(i.dataIndex))return!1}return!0}function HK(a,e,t){var r=IV(a),n=IV(e);function i(T,E,I,R,P){(I||T)&&E.animateFrom({style:I&&I!==T?et(et({},I.style),T.style):T.style},P)}var l=!1,o=cDe,c=Pt(),d=Pt();r.forEach(function(T){T.groupId&&c.set(T.groupId,!0),T.childGroupId&&d.set(T.childGroupId,!0)});for(var u=0;u<n.length;u++){var h=n[u].groupId;if(d.get(h)){o=MV;break}var f=n[u].childGroupId;if(f&&c.get(f)){o=EV;break}}function p(T,E){return function(I){var R=I.data,P=I.dataIndex;return E?R.getId(P):T?o===MV?I.childGroupId:I.groupId:o===EV?I.childGroupId:I.groupId}}var g=pDe(r,n),b={};if(!g)for(var u=0;u<n.length;u++){var w=n[u],j=w.data.getItemGraphicEl(w.dataIndex);j&&(b[j.id]=!0)}function k(T,E){var I=r[E],R=n[T],P=R.data.hostModel,H=I.data.getItemGraphicEl(I.dataIndex),G=R.data.getItemGraphicEl(R.dataIndex);if(H===G){G&&fDe(G,R.dataIndex,P);return}H&&b[H.id]||G&&(Up(G),H?(Up(H),RC(H),l=!0,DC(Ff(H),Ff(G),R.divide,P,T,i)):IC(G,P,T))}new Fd(r,n,p(!0,g),p(!1,g),null,"multiple").update(k).updateManyToOne(function(T,E){var I=n[T],R=I.data,P=R.hostModel,H=R.getItemGraphicEl(I.dataIndex),G=pr(ct(E,function(X){return r[X].data.getItemGraphicEl(r[X].dataIndex)}),function(X){return X&&X!==H&&!b[X.id]});H&&(Up(H),G.length?(se(G,function(X){Up(X),RC(X)}),l=!0,DC(Ff(G),Ff(H),I.divide,P,T,i)):IC(H,P,I.dataIndex))}).updateOneToMany(function(T,E){var I=r[E],R=I.data.getItemGraphicEl(I.dataIndex);if(!(R&&b[R.id])){var P=pr(ct(T,function(G){return n[G].data.getItemGraphicEl(n[G].dataIndex)}),function(G){return G&&G!==R}),H=n[T[0]].data.hostModel;P.length&&(se(P,function(G){return Up(G)}),R?(Up(R),RC(R),l=!0,DC(Ff(R),Ff(P),I.divide,H,T[0],i)):se(P,function(G){return IC(G,H,T[0])}))}}).updateManyToMany(function(T,E){new Fd(E,T,function(I){return r[I].data.getId(r[I].dataIndex)},function(I){return n[I].data.getId(n[I].dataIndex)}).update(function(I,R){k(T[I],E[R])}).execute()}).execute(),l&&se(e,function(T){var E=T.data,I=E.hostModel,R=I&&t.getViewOfSeriesModel(I),P=Xx("update",I,0);R&&I.isAnimationEnabled()&&P&&P.duration>0&&R.group.traverse(function(H){H instanceof Ra&&!H.animators.length&&H.animateFrom({style:{opacity:0}},P)})})}function RV(a){var e=a.getModel("universalTransition").get("seriesKey");return e||a.id}function LV(a){return lt(a)?a.sort().join(","):a}function Hu(a){if(a.hostModel)return a.hostModel.getModel("universalTransition").get("divideShape")}function xDe(a,e){var t=Pt(),r=Pt(),n=Pt();return se(a.oldSeries,function(i,l){var o=a.oldDataGroupIds[l],c=a.oldData[l],d=RV(i),u=LV(d);r.set(u,{dataGroupId:o,data:c}),lt(d)&&se(d,function(h){n.set(h,{key:u,dataGroupId:o,data:c})})}),se(e.updatedSeries,function(i){if(i.isUniversalTransitionEnabled()&&i.isAnimationEnabled()){var l=i.get("dataGroupId"),o=i.getData(),c=RV(i),d=LV(c),u=r.get(d);if(u)t.set(d,{oldSeries:[{dataGroupId:u.dataGroupId,divide:Hu(u.data),data:u.data}],newSeries:[{dataGroupId:l,divide:Hu(o),data:o}]});else if(lt(c)){var h=[];se(c,function(g){var b=r.get(g);b.data&&h.push({dataGroupId:b.dataGroupId,divide:Hu(b.data),data:b.data})}),h.length&&t.set(d,{oldSeries:h,newSeries:[{dataGroupId:l,data:o,divide:Hu(o)}]})}else{var f=n.get(c);if(f){var p=t.get(f.key);p||(p={oldSeries:[{dataGroupId:f.dataGroupId,data:f.data,divide:Hu(f.data)}],newSeries:[]},t.set(f.key,p)),p.newSeries.push({dataGroupId:l,data:o,divide:Hu(o)})}}}}),t}function OV(a,e){for(var t=0;t<a.length;t++){var r=e.seriesIndex!=null&&e.seriesIndex===a[t].seriesIndex||e.seriesId!=null&&e.seriesId===a[t].id;if(r)return t}}function mDe(a,e,t,r){var n=[],i=[];se(Or(a.from),function(l){var o=OV(e.oldSeries,l);o>=0&&n.push({dataGroupId:e.oldDataGroupIds[o],data:e.oldData[o],divide:Hu(e.oldData[o]),groupIdDim:l.dimension})}),se(Or(a.to),function(l){var o=OV(t.updatedSeries,l);if(o>=0){var c=t.updatedSeries[o].getData();i.push({dataGroupId:e.oldDataGroupIds[o],data:c,divide:Hu(c),groupIdDim:l.dimension})}}),n.length>0&&i.length>0&&HK(n,i,r)}function gDe(a){a.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){se(Or(r.seriesTransition),function(n){se(Or(n.to),function(i){for(var l=r.updatedSeries,o=0;o<l.length;o++)(i.seriesIndex!=null&&i.seriesIndex===l[o].seriesIndex||i.seriesId!=null&&i.seriesId===l[o].id)&&(l[o][qw]=!0)})})}),a.registerUpdateLifecycle("series:transition",function(e,t,r){var n=dDe(t);if(n.oldSeries&&r.updatedSeries&&r.optionChanged){var i=r.seriesTransition;if(i)se(Or(i),function(p){mDe(p,n,r,t)});else{var l=xDe(n,r);se(l.keys(),function(p){var g=l.get(p);HK(g.oldSeries,g.newSeries,t)})}se(r.updatedSeries,function(p){p[qw]&&(p[qw]=!1)})}for(var o=e.getSeries(),c=n.oldSeries=[],d=n.oldDataGroupIds=[],u=n.oldData=[],h=0;h<o.length;h++){var f=o[h].getData();f.count()<VK&&(c.push(o[h]),d.push(o[h].get("dataGroupId")),u.push(f))}})}var vDe=(function(){function a(){this.breaks=[],this._elapsedExtent=[1/0,-1/0]}return a.prototype.setBreaks=function(e){this.breaks=e.breaks},a.prototype.update=function(e){yDe(this,e);var t=this._elapsedExtent;t[0]=this.elapse(e[0]),t[1]=this.elapse(e[1])},a.prototype.hasBreaks=function(){return!!this.breaks.length},a.prototype.calcNiceTickMultiple=function(e,t){for(var r=0;r<this.breaks.length;r++){var n=this.breaks[r];if(n.vmin<e&&e<n.vmax){var i=t(e,n.vmax);return i}}return 0},a.prototype.getExtentSpan=function(){return this._elapsedExtent[1]-this._elapsedExtent[0]},a.prototype.normalize=function(e){var t=this._elapsedExtent[1]-this._elapsedExtent[0];return t===0?.5:(this.elapse(e)-this._elapsedExtent[0])/t},a.prototype.scale=function(e){return this.unelapse(e*(this._elapsedExtent[1]-this._elapsedExtent[0])+this._elapsedExtent[0])},a.prototype.elapse=function(e){for(var t=PV,r=zV,n=!0,i=0;i<this.breaks.length;i++){var l=this.breaks[i];if(e<=l.vmax){e>l.vmin?t+=l.vmin-r+(e-l.vmin)/(l.vmax-l.vmin)*l.gapReal:t+=e-r,r=l.vmax,n=!1;break}t+=l.vmin-r+l.gapReal,r=l.vmax}return n&&(t+=e-r),t},a.prototype.unelapse=function(e){for(var t=PV,r=zV,n=!0,i=0,l=0;l<this.breaks.length;l++){var o=this.breaks[l],c=t+o.vmin-r,d=c+o.gapReal;if(e<=d){e>c?i=o.vmin+(e-c)/(d-c)*(o.vmax-o.vmin):i=r+e-t,r=o.vmax,n=!1;break}t=d,r=o.vmax}return n&&(i=r+e-t),i},a})();function bDe(){return new vDe}var PV=0,zV=0;function yDe(a,e){var t=0,r={tpAbs:{span:0,val:0},tpPrct:{span:0,val:0}},n=function(){return{has:!1,span:NaN,inExtFrac:NaN,val:NaN}},i={S:{tpAbs:n(),tpPrct:n()},E:{tpAbs:n(),tpPrct:n()}};se(a.breaks,function(o){var c=o.gapParsed;c.type==="tpPrct"&&(t+=c.val);var d=W6(o,e);if(d){var u=d.vmin!==o.vmin,h=d.vmax!==o.vmax,f=d.vmax-d.vmin;if(!(u&&h))if(u||h){var p=u?"S":"E";i[p][c.type].has=!0,i[p][c.type].span=f,i[p][c.type].inExtFrac=f/(o.vmax-o.vmin),i[p][c.type].val=c.val}else r[c.type].span+=f,r[c.type].val+=c.val}});var l=t*(0+(e[1]-e[0])+(r.tpAbs.val-r.tpAbs.span)+(i.S.tpAbs.has?(i.S.tpAbs.val-i.S.tpAbs.span)*i.S.tpAbs.inExtFrac:0)+(i.E.tpAbs.has?(i.E.tpAbs.val-i.E.tpAbs.span)*i.E.tpAbs.inExtFrac:0)-r.tpPrct.span-(i.S.tpPrct.has?i.S.tpPrct.span*i.S.tpPrct.inExtFrac:0)-(i.E.tpPrct.has?i.E.tpPrct.span*i.E.tpPrct.inExtFrac:0))/(1-r.tpPrct.val-(i.S.tpPrct.has?i.S.tpPrct.val*i.S.tpPrct.inExtFrac:0)-(i.E.tpPrct.has?i.E.tpPrct.val*i.E.tpPrct.inExtFrac:0));se(a.breaks,function(o){var c=o.gapParsed;c.type==="tpPrct"&&(o.gapReal=t!==0?Math.max(l,0)*c.val/t:0),c.type==="tpAbs"&&(o.gapReal=c.val),o.gapReal==null&&(o.gapReal=0)})}function wDe(a,e,t,r,n,i){a!=="no"&&se(t,function(l){var o=W6(l,i);if(o)for(var c=e.length-1;c>=0;c--){var d=e[c],u=r(d),h=n*3/4;u>o.vmin-h&&u<o.vmax+h&&(a!=="preserve_extent_bound"||u!==i[0]&&u!==i[1])&&e.splice(c,1)}})}function _De(a,e,t,r){se(e,function(n){var i=W6(n,t);i&&(a.push({value:i.vmin,break:{type:"vmin",parsedBreak:i},time:r?r(i):void 0}),a.push({value:i.vmax,break:{type:"vmax",parsedBreak:i},time:r?r(i):void 0}))}),e.length&&a.sort(function(n,i){return n.value-i.value})}function W6(a,e){var t=Math.max(a.vmin,e[0]),r=Math.min(a.vmax,e[1]);return t<r||t===r&&t>e[0]&&t<e[1]?{vmin:t,vmax:r,breakOption:a.breakOption,gapParsed:a.gapParsed,gapReal:a.gapReal}:null}function TA(a,e,t){var r=[];if(!a)return{breaks:r};function n(l,o){return l>=0&&l<1-1e-5}se(a,function(l){if(!(!l||l.start==null||l.end==null)&&!l.isExpanded){var o={breakOption:Xt(l),vmin:e(l.start),vmax:e(l.end),gapParsed:{type:"tpAbs",val:0},gapReal:null};if(l.gap!=null){var c=!1;if(At(l.gap)){var d=eo(l.gap);if(d.match(/%$/)){var u=parseFloat(d)/100;n(u)||(u=0),o.gapParsed.type="tpPrct",o.gapParsed.val=u,c=!0}}if(!c){var h=e(l.gap);(!isFinite(h)||h<0)&&(h=0),o.gapParsed.type="tpAbs",o.gapParsed.val=h}}if(o.vmin===o.vmax&&(o.gapParsed.type="tpAbs",o.gapParsed.val=0),t&&t.noNegative&&se(["vmin","vmax"],function(p){o[p]<0&&(o[p]=0)}),o.vmin>o.vmax){var f=o.vmax;o.vmax=o.vmin,o.vmin=f}r.push(o)}}),r.sort(function(l,o){return l.vmin-o.vmin});var i=-1/0;return se(r,function(l,o){i>l.vmin&&(r[o]=null),i=l.vmax}),{breaks:r.filter(function(l){return!!l})}}function Y6(a,e){return MA(e)===MA(a)}function MA(a){return a.start+"_\0_"+a.end}function NDe(a,e,t){var r=[];se(a,function(i,l){var o=e(i);o&&o.type==="vmin"&&r.push([l])}),se(a,function(i,l){var o=e(i);if(o&&o.type==="vmax"){var c=E0(r,function(d){return Y6(e(a[d[0]]).parsedBreak.breakOption,o.parsedBreak.breakOption)});c&&c.push(l)}});var n=[];return se(r,function(i){i.length===2&&n.push(t?i:[a[i[0]],a[i[1]]])}),n}function jDe(a,e,t,r){var n,i;if(a.break){var l=a.break.parsedBreak,o=E0(t,function(h){return Y6(h.breakOption,a.break.parsedBreak.breakOption)}),c=r(Math.pow(e,l.vmin),o.vmin),d=r(Math.pow(e,l.vmax),o.vmax),u={type:l.gapParsed.type,val:l.gapParsed.type==="tpAbs"?$n(Math.pow(e,l.vmin+l.gapParsed.val))-c:l.gapParsed.val};n={type:a.break.type,parsedBreak:{breakOption:l.breakOption,vmin:c,vmax:d,gapParsed:u,gapReal:l.gapReal}},i=o[a.break.type]}return{brkRoundingCriterion:i,vBreak:n}}function SDe(a,e,t){var r={noNegative:!0},n=TA(a,t,r),i=TA(a,t,r),l=Math.log(e);return i.breaks=ct(i.breaks,function(o){var c=Math.log(o.vmin)/l,d=Math.log(o.vmax)/l,u={type:o.gapParsed.type,val:o.gapParsed.type==="tpAbs"?Math.log(o.vmin+o.gapParsed.val)/l-c:o.gapParsed.val};return{vmin:c,vmax:d,gapParsed:u,gapReal:o.gapReal,breakOption:o.breakOption}}),{parsedOriginal:n,parsedLogged:i}}var kDe={vmin:"start",vmax:"end"};function CDe(a,e){return e&&(a=a||{},a.break={type:kDe[e.type],start:e.parsedBreak.vmin,end:e.parsedBreak.vmax}),a}function ADe(){mbe({createScaleBreakContext:bDe,pruneTicksByBreak:wDe,addBreaksToTicks:_De,parseAxisBreakOption:TA,identifyAxisBreak:Y6,serializeAxisBreakIdentifier:MA,retrieveAxisBreakPairs:NDe,getTicksLogTransformBreak:jDe,logarithmicParseBreaksFromOption:SDe,makeAxisLabelFormatterParamBreak:CDe})}var BV=Ia();function TDe(a,e){var t=E0(a,function(r){return Xn().identifyAxisBreak(r.parsedBreak.breakOption,e.breakOption)});return t||a.push(t={zigzagRandomList:[],parsedBreak:e,shouldRemove:!1}),t}function MDe(a){se(a,function(e){return e.shouldRemove=!0})}function EDe(a){for(var e=a.length-1;e>=0;e--)a[e].shouldRemove&&a.splice(e,1)}function DDe(a,e,t,r,n){var i=t.axis;if(i.scale.isBlank()||!Xn())return;var l=Xn().retrieveAxisBreakPairs(i.scale.getTicks({breakTicks:"only_break"}),function(G){return G.break},!1);if(!l.length)return;var o=t.getModel("breakArea"),c=o.get("zigzagAmplitude"),d=o.get("zigzagMinSpan"),u=o.get("zigzagMaxSpan");d=Math.max(2,d||0),u=Math.max(d,u||0);var h=o.get("expandOnClick"),f=o.get("zigzagZ"),p=o.getModel("itemStyle"),g=p.getItemStyle(),b=g.stroke,w=g.lineWidth,j=g.lineDash,k=g.fill,T=new $t({ignoreModelZ:!0}),E=i.isHorizontal(),I=BV(e).visualList||(BV(e).visualList=[]);MDe(I);for(var R=function(G){var X=l[G][0].break.parsedBreak,U=[];U[0]=i.toGlobalCoord(i.dataToCoord(X.vmin,!0)),U[1]=i.toGlobalCoord(i.dataToCoord(X.vmax,!0)),U[1]<U[0]&&U.reverse();var te=TDe(I,X);te.shouldRemove=!1;var Z=new $t;H(te.zigzagRandomList,Z,U[0],U[1],E,X),h&&Z.on("click",function(){var J={type:LN,breaks:[{start:X.breakOption.start,end:X.breakOption.end}]};J[i.dim+"AxisIndex"]=t.componentIndex,n.dispatchAction(J)}),Z.silent=!h,T.add(Z)},P=0;P<l.length;P++)R(P);a.add(T),EDe(I);function H(G,X,U,te,Z,J){var B={stroke:b,lineWidth:w,lineDash:j,fill:"none"},W=Z?0:1,$=1-W,Q=r[fa[$]]+r[Kn[$]];function ne(Oe){var De=[],Ge=[];De[W]=Ge[W]=Oe,De[$]=r[fa[$]],Ge[$]=Q;var Ee={x1:De[0],y1:De[1],x2:Ge[0],y2:Ge[1]};return gN(Ee,Ee,{lineWidth:1}),De[0]=Ee.x1,De[1]=Ee.y1,De[W]}U=ne(U),te=ne(te);for(var re=[],K=[],ae=!0,ce=r[fa[$]],de=0;;de++){var he=ce===r[fa[$]],pe=ce>=Q;pe&&(ce=Q);var Re=[],Te=[];Re[W]=U,Te[W]=te,!he&&!pe&&(Re[W]+=ae?-c:c,Te[W]-=ae?c:-c),Re[$]=ce,Te[$]=ce,re.push(Re),K.push(Te);var ke=void 0;if(de<G.length?ke=G[de]:(ke=Math.random(),G.push(ke)),ce+=ke*(u-d)+d,ae=!ae,pe)break}var Le=Xn().serializeAxisBreakIdentifier(J.breakOption);if(X.add(new Xi({anid:"break_a_"+Le,shape:{points:re},style:B,z:f})),J.gapReal!==0){X.add(new Xi({anid:"break_b_"+Le,shape:{points:K},style:B,z:f}));var Ne=K.slice();Ne.reverse();var _e=re.concat(Ne);X.add(new fs({anid:"break_c_"+Le,shape:{points:_e},style:{fill:k,opacity:g.opacity},z:f}))}}}function IDe(a,e,t,r){var n=a.axis,i=t.transform;us(r.style);var l=n.getExtent();n.inverse&&(l=l.slice(),l.reverse());var o=Xn().retrieveAxisBreakPairs(n.scale.getTicks({breakTicks:"only_break"}),function(w){return w.break},!1),c=ct(o,function(w){var j=w[0].break.parsedBreak,k=[n.dataToCoord(j.vmin,!0),n.dataToCoord(j.vmax,!0)];return k[0]>k[1]&&k.reverse(),{coordPair:k,brkId:Xn().serializeAxisBreakIdentifier(j.breakOption)}});c.sort(function(w,j){return w.coordPair[0]-j.coordPair[0]});for(var d=l[0],u=null,h=0;h<c.length;h++){var f=c[h],p=Math.max(f.coordPair[0],l[0]),g=Math.min(f.coordPair[1],l[1]);d<=p&&b(d,p,u,f),d=g,u=f}d<=l[1]&&b(d,l[1],u,null);function b(w,j,k,T){function E(U,te){i&&(Fn(U,U,i),Fn(te,te,i))}function I(U,te){var Z={x1:U[0],y1:U[1],x2:te[0],y2:te[1]};gN(Z,Z,r.style),U[0]=Z.x1,U[1]=Z.y1,te[0]=Z.x2,te[1]=Z.y2}var R=[w,0],P=[j,0],H=[w,5],G=[j,5];E(R,H),I(R,H),E(P,G),I(P,G),I(R,P);var X=new qn(et({shape:{x1:R[0],y1:R[1],x2:P[0],y2:P[1]}},r));e.add(X),X.anid="breakLine_"+(k?k.brkId:"\0")+"_\0_"+(T?T.brkId:"\0")}}function RDe(a,e,t){if(E0(t,function(k){return!k}))return;var r=new Qt;if(!IN(t[0],t[1],r,{direction:-(a?e+Math.PI:e),touchThreshold:0,bidirectional:!1}))return;var n=Li();Mh(n,n,-e);var i=ct(t,function(k){return k.transform?Sc(Li(),n,k.transform):n});function l(k){var T=t[0].localRect,E=new Qt(T[Kn[k]]*i[0][0],T[Kn[k]]*i[0][1]);return Math.abs(E.y)<1e-5}var o=.5;if(l(0)||l(1)){var c=ct(t,function(k,T){var E=k.localRect.clone();return E.applyTransform(i[T]),E}),d=new Qt;d.copy(t[0].label).add(t[1].label).scale(.5),d.transform(n);var u=r.clone().transform(n),h=c[0].x+c[1].x+(u.x>=0?c[0].width:c[1].width),f=(h+u.x)/2-d.x,p=Math.min(f,f-u.x),g=Math.max(f,f-u.x),b=g<0?g:p>0?p:0;o=(f-b)/u.x}var w=new Qt,j=new Qt;Qt.scale(w,r,-o),Qt.scale(j,r,1-o),E3(t[0],w),E3(t[1],j)}function LDe(a,e){var t={breaks:[]};return se(e.breaks,function(r){if(r){var n=E0(a.get("breaks",!0),function(o){return Xn().identifyAxisBreak(o,r)});if(n){var i=e.type,l={isExpanded:!!n.isExpanded};n.isExpanded=i===LN?!0:i===cX?!1:i===dX?!n.isExpanded:n.isExpanded,t.breaks.push({start:n.start,end:n.end,isExpanded:!!n.isExpanded,old:l})}}}),t}function ODe(){ENe({adjustBreakLabelPair:RDe,buildAxisBreakLine:IDe,rectCoordBuildBreakAxis:DDe,updateModelAxisBreak:LDe})}function PDe(a){PNe(a),ADe(),ODe()}function zDe(){nje(BDe)}function BDe(a,e){se(a,function(t){if(!t.model.get(["axisLabel","inside"])){var r=FDe(t);if(r){var n=t.isHorizontal()?"height":"width",i=t.model.get(["axisLabel","margin"]);e[n]-=r[n]+i,t.position==="top"?e.y+=r.height+i:t.position==="left"&&(e.x+=r.width+i)}}})}function FDe(a){var e=a.model,t=a.scale;if(!e.get(["axisLabel","show"])||t.isBlank())return;var r,n,i=t.getExtent();t instanceof Dx?n=t.count():(r=t.getTicks(),n=r.length);var l=a.getLabelModel(),o=tm(a),c,d=1;n>40&&(d=Math.ceil(n/40));for(var u=0;u<n;u+=d){var h=r?r[u]:{value:i[0]+u},f=o(h,u),p=l.getTextRect(f),g=b(p,l.get("rotate")||0);c?c.union(g):c=g}return c;function b(w,j){var k=j*Math.PI/180,T=w.width,E=w.height,I=T*Math.abs(Math.cos(k))+Math.abs(E*Math.sin(k)),R=T*Math.abs(Math.sin(k))+Math.abs(E*Math.cos(k)),P=new ra(w.x,w.y,I,R);return P}}Ta([T_e]);Ta([j_e]);Ta([X_e,dNe,yNe,Nje,Rje,NSe,ZSe,I5e,eke,lke,fke,wke,pCe,zCe,XCe,u4e,x4e,S4e,D4e,U4e,X4e,i3e,U3e]);Ta(oAe);Ta(IAe);Ta(OX);Ta(WAe);Ta(_Z);Ta(XAe);Ta(xTe);Ta(jTe);Ta(dMe);Ta(TMe);Ta(Wb);Ta(WMe);Ta(qMe);Ta(n6e);Ta(h6e);Ta(v6e);Ta(j6e);Ta(R6e);Ta(J6e);Ta(AK);Ta(TK);Ta(bEe);Ta(RK);Ta(LK);Ta(NEe);Ta(AEe);Ta(VEe);Ta(GEe);Ta(gDe);Ta(G2e);Ta(PDe);Ta(zDe);Ta(jje);const VDe=()=>{const{showAlert:a}=wa(),[e,t]=F.useState([]),[r,n]=F.useState(new Date().getFullYear()),[i,l]=F.useState(!1),[o,c]=F.useState(""),[d,u]=F.useState([]),[h,f]=F.useState(null),[p,g]=F.useState(!1),b=F.useRef(null),w=F.useRef(null);F.useEffect(()=>{const E=new Date().getFullYear(),I=[];for(let P=0;P<5;P++)I.push(E-P);t(I);const R=()=>{w.current&&w.current.resize()};return window.addEventListener("resize",R),j(E),()=>{window.removeEventListener("resize",R),w.current&&w.current.dispose()}},[]);const j=async E=>{E=E||r,l(!0),c(`${E}     ...`),f(null);try{const I=await Ke("get_sales_by_region_analysis",{year:Number(E)});u(I||[]),c("   ..."),await k(I||[]),l(!1),T(I||[],E)}catch(I){console.error("Region Analysis Error:",I),a(" ",I.toString()),l(!1)}},k=async E=>{if(b.current){w.current&&w.current.dispose(),w.current=B$(b.current),w.current.showLoading({color:"#6366f1",text:"  ...",textColor:"#1e293b"});try{if(!pwe("south-korea")){const G=await fetch("https://raw.githubusercontent.com/southkorea/southkorea-maps/master/kostat/2018/json/skorea-provinces-2018-geo.json");if(!G.ok)throw new Error("   ");const X=await G.json();X.features.forEach(U=>{U.properties.name=U.properties.name||U.properties.name_ko}),G$("south-korea",X)}const I=E.map(H=>({name:H.region,value:H.total_amount})),R=Math.max(...E.map(H=>H.total_amount),1e7),P={tooltip:{trigger:"item",formatter:H=>{const G=H.value?H.value.toLocaleString():"0";return`<div class="font-sans text-sm p-1">
                                    <div class="font-bold text-slate-700 mb-1">${H.name}</div>
                                    <div class="text-indigo-600 font-bold">${G}</div>
                                </div>`},backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#e2e8f0",borderWidth:1,textStyle:{color:"#334155"}},visualMap:{min:0,max:R,left:"right",bottom:"20",text:["High Sales","Low Sales"],calculable:!0,inRange:{color:["#f5f3ff","#a5b4fc","#6366f1","#4338ca","#1e1b4b"]},orient:"horizontal",right:20},series:[{name:"",type:"map",map:"south-korea",roam:!0,zoom:1.2,label:{show:!0,fontSize:10,color:"#64748b"},itemStyle:{areaColor:"#f8fafc",borderColor:"#cbd5e1",borderWidth:1},emphasis:{label:{show:!0,color:"#fff",fontWeight:"bold"},itemStyle:{areaColor:"#f43f5e"}},select:{itemStyle:{areaColor:"#f43f5e"}},data:I}]};w.current.hideLoading(),w.current.setOption(P)}catch(I){console.error(I),w.current.hideLoading(),b.current.innerHTML=`<div class="h-full flex flex-col items-center justify-center text-slate-400">
                <span class="material-symbols-rounded text-4xl mb-2">broken_image</span>
                <p>   .</p>
            </div>`}}},T=async(E,I)=>{g(!0);try{const R=E.slice(0,8).map(G=>`${G.region}: ${Fe(G.total_amount)} (${G.total_quantity})`).join(", "),P=`
                 Mycelium    ''.
                ${I}     : [${R}].
                
                   :
                1. **  **:      
                2. **  **:        (  )
                3. ** **:       (2-3)
                
                  () .
            `,H=await Co(a,"call_gemini_ai",{prompt:P});f(H)}catch(R){console.error("AI Error:",R),f("AI    . (API   )")}finally{g(!1)}};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Geographical Intelligence"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-700 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["AI    ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Regional Heatmap"})]}),s.jsxs("p",{className:"text-slate-400 text-sm mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"map"}),"         ."]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 min-h-0 custom-scrollbar flex flex-col gap-6",children:[s.jsx("div",{className:"bg-white rounded-2xl p-4 border border-slate-200 shadow-sm flex flex-col md:flex-row justify-between items-center gap-4",children:s.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[s.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 border border-slate-200 rounded-lg px-3 py-1",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Analysis Year"}),s.jsx("select",{value:r,onChange:E=>{n(E.target.value),j(E.target.value)},className:"bg-transparent text-sm font-bold text-slate-800 outline-none border-none cursor-pointer",children:e.map(E=>s.jsxs("option",{value:E,children:[E,""]},E))})]}),s.jsxs("button",{onClick:()=>j(r),disabled:i,className:"px-5 py-2 bg-indigo-600 text-white text-sm font-bold rounded-lg hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200 flex items-center gap-2 disabled:opacity-50",children:[s.jsx("span",{className:`material-symbols-rounded ${i?"animate-spin":""}`,children:i?"sync":"analytics"}),i?" ...":" "]})]})}),s.jsxs("div",{className:"flex flex-col xl:flex-row gap-6 min-h-[600px]",children:[s.jsxs("div",{className:"flex-[2] bg-white rounded-2xl border border-slate-200 shadow-sm relative flex flex-col overflow-hidden min-h-[500px]",children:[s.jsxs("div",{className:"absolute top-5 left-5 z-10 bg-white/90 backdrop-blur px-3 py-2 rounded-xl border border-slate-100 shadow-sm",children:[s.jsx("h3",{className:"text-slate-700 font-bold text-sm",children:"   "}),s.jsx("div",{className:"text-xs text-slate-400",children:"   "})]}),s.jsx("div",{ref:b,className:"flex-1 w-full h-full bg-slate-50/30"}),i&&s.jsxs("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center z-20",children:[s.jsx("span",{className:"material-symbols-rounded text-5xl text-indigo-500 animate-spin mb-4",children:"public"}),s.jsx("h3",{className:"font-bold text-slate-700",children:o})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col gap-6 w-full xl:w-[450px]",children:[s.jsxs("div",{className:"bg-gradient-to-br from-violet-50 to-white rounded-2xl border-l-[6px] border-violet-500 p-6 shadow-sm relative overflow-hidden group",children:[s.jsx("div",{className:"absolute right-[-20px] bottom-[-20px] opacity-5 transform rotate-[-15deg] transition-transform group-hover:rotate-0 duration-700",children:s.jsx("span",{className:"material-symbols-rounded",style:{fontSize:"150px"},children:"psychology_alt"})}),s.jsxs("h3",{className:"text-violet-700 font-bold mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"auto_awesome"}),"    "]}),s.jsx("div",{className:"relative min-h-[100px]",children:p?s.jsxs("div",{className:"flex items-center gap-3 text-slate-400 py-4",children:[s.jsx("span",{className:"material-symbols-rounded animate-spin",children:"smart_toy"}),s.jsx("span",{className:"text-sm",children:"AI     ..."})]}):s.jsx("div",{className:"text-sm text-slate-700 leading-relaxed whitespace-pre-line animate-in fade-in",children:h||"   AI  ."})})]}),s.jsxs("div",{className:"flex-1 bg-white rounded-2xl border border-slate-200 flex flex-col min-h-0 overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[s.jsx("h3",{className:"font-bold text-slate-700 text-sm",children:"  "}),s.jsx("span",{className:"text-xs font-bold text-slate-400",children:"TOP 10"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"sticky top-0 bg-white z-10 shadow-sm text-xs uppercase text-slate-400 font-bold",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-3 px-4 text-center w-[15%]",children:""}),s.jsx("th",{className:"py-3 px-4 w-[40%]",children:""}),s.jsx("th",{className:"py-3 px-4 text-right w-[45%]",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[d.slice(0,10).map((E,I)=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsx("td",{className:"py-3 px-4 text-center font-bold text-slate-400",children:I+1}),s.jsx("td",{className:"py-3 px-4 font-bold text-slate-700",children:E.region}),s.jsx("td",{className:"py-3 px-4 text-right font-mono font-bold text-indigo-600",children:Fe(E.total_amount)})]},I)),d.length===0&&!i&&s.jsx("tr",{children:s.jsx("td",{colSpan:"3",className:"p-8 text-center text-slate-400",children:" ."})})]})]})}),d.length>0&&s.jsxs("div",{className:"p-4 border-t border-slate-100 bg-slate-50/30 text-xs text-slate-500 text-center",children:[" ",s.jsx("strong",{className:"text-slate-800",children:d.length}),"    ."]})]})]})]})]})]})},HDe=()=>{const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState({name:"   ...",products:""}),[n,i]=F.useState(!1),[l,o]=F.useState(""),[c,d]=F.useState(null),[u,h]=F.useState([]),[f,p]=F.useState(!1);F.useEffect(()=>{g()},[]);const g=async()=>{try{const E=await Ke("get_company_info",{});r({name:E?.company_name||"  ",products:"( :   )"})}catch(E){console.error(E),r({name:"   ",products:""})}},b=async()=>{i(!0),p(!1),d(null),h([]);try{o("     ...");const E=t.name==="   ..."||!t.name?"":t.name,I=await Ke("fetch_naver_search",{query:E});o("   ...");const R=I.map(G=>({source:"Naver Blog",text:G.title.replace(/<[^>]*>?/gm,"")+" "+G.description.replace(/<[^>]*>?/gm,""),date:G.postdate||new Date().toISOString().slice(0,10),link:G.link}));o("Gemini AI     ...");const P=await Co(a,"analyze_online_sentiment",{mentions:R}),H=(P.analyzed_mentions||[]).map((G,X)=>{const U=R[X];return{date:U?U.date:new Date().toISOString().slice(0,10),channel:"Naver Blog",text:G.original_text,sentiment:G.sentiment_label,score:G.sentiment_score,link:U?U.link:"#"}});d({totalScore:P.total_score,verdict:P.verdict,summary:P.summary,keywords:P.keywords||[]}),h(H),p(!0)}catch(E){console.error("Analysis Error:",E);const I=typeof E=="string"?E:E.message||String(E);I!=="AI_QUOTA_EXCEEDED"&&a(" ",`    : ${I}`)}finally{i(!1)}},w=()=>{if(!c){a("","  .    .");return}`${t.name}`;const E=`
            <style>
                @page { size: A4; margin: 20mm; }
                .report-print-wrapper { font-family: 'Pretendard', sans-serif; padding: 20px; color: #334155; line-height: 1.6; }
                .report-print-wrapper .header { text-align: center; margin-bottom: 40px; border-bottom: 3px solid #7c3aed; padding-bottom: 20px; }
                .report-print-wrapper .header h1 { margin: 0; font-size: 28px; font-weight: 900; color: #1e1b4b; }
                .report-print-wrapper .header p { margin: 10px 0 0; font-weight: bold; font-size: 14px; color: #64748b; }
                .report-print-wrapper .score-section { display: flex; justify-content: space-around; align-items: center; margin-bottom: 40px; background: #f5f3ff; padding: 30px; rounded: 20px; border: 1px solid #ddd6fe; }
                .report-print-wrapper .score-box { text-align: center; }
                .report-print-wrapper .score-label { font-size: 12px; font-weight: 800; color: #7c3aed; text-transform: uppercase; letter-spacing: 0.1em; }
                .report-print-wrapper .score-value { font-size: 48px; font-weight: 900; color: #1e1b4b; }
                .report-print-wrapper .verdict { font-size: 18px; font-weight: 800; color: #7c3aed; }
                .report-print-wrapper .section-title { font-size: 18px; font-weight: 900; color: #1e1b4b; margin-bottom: 15px; border-left: 5px solid #7c3aed; padding-left: 12px; }
                .report-print-wrapper .content-box { background: #fff; border: 1px solid #e2e8f0; padding: 20px; border-radius: 12px; margin-bottom: 30px; }
                .report-print-wrapper .summary { font-size: 14px; white-space: pre-wrap; }
                .report-print-wrapper .keyword-tag { display: inline-block; padding: 4px 12px; background: #ede9fe; color: #6d28d9; border-radius: 20px; font-size: 12px; font-weight: bold; margin: 4px; }
                .report-print-wrapper table { width: 100%; border-collapse: collapse; font-size: 11px; margin-top: 20px; }
                .report-print-wrapper th, .report-print-wrapper td { border-bottom: 1px solid #e2e8f0; padding: 12px 8px; text-align: left; }
                .report-print-wrapper th { color: #64748b; font-weight: 800; text-transform: uppercase; font-size: 10px; }
                .report-print-wrapper .sentiment-pos { color: #059669; font-weight: bold; }
                .report-print-wrapper .sentiment-neg { color: #dc2626; font-weight: bold; }
                .footer { text-align: center; margin-top: 50px; font-size: 10px; color: #94a3b8; border-top: 1px solid #f1f5f9; padding-top: 20px; }
            </style>
            <div class="report-print-wrapper">
                    <div class="header">
                        <h1> AI   </h1>
                        <p> : ${t.name} | : ${new Date().toLocaleString()}</p>
                    </div>
                    
                    <div class="score-section">
                        <div class="score-box">
                            <div class="score-label">Sentiment Score</div>
                            <div class="score-value">${c.totalScore}</div>
                            <div class="verdict">${c.verdict}</div>
                        </div>
                    </div>

                    <div class="section-title">  </div>
                    <div class="content-box">
                        ${c.keywords.map(I=>`<span class="keyword-tag">#${I.text}</span>`).join("")}
                    </div>

                    <div class="section-title">AI   </div>
                    <div class="content-box summary">
                        <strong>[ ]</strong><br/>
                        ${c.summary}
                    </div>

                    <div class="section-title">    (Top 10)</div>
                    <table>
                        <thead>
                            <tr>
                                <th></th>
                                <th></th>
                                <th> </th>
                                <th></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            ${u.slice(0,10).map(I=>`
                                <tr>
                                    <td>${I.date}</td>
                                    <td style="font-weight:bold;">${I.channel}</td>
                                    <td>${I.text}</td>
                                    <td class="${I.sentiment==="pos"?"sentiment-pos":I.sentiment==="neg"?"sentiment-neg":""}">
                                        ${I.sentiment==="pos"?"":I.sentiment==="neg"?"":""}
                                    </td>
                                    <td>${I.score}</td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>

                    <div class="footer">  Mycelium Social Intelligence    .</div>
                </div>
        `;oo(E)},j=async()=>{a("",'PDF     (Ctrl+P)  "PDF "    .')},k=E=>E==="pos"?{bg:"bg-emerald-100",text:"text-emerald-700"}:E==="neg"?{bg:"bg-red-100",text:"text-red-700"}:{bg:"bg-slate-100",text:"text-slate-600"},T=E=>E>=80?"text-emerald-600":E>=50?"text-amber-500":"text-red-600";return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-violet-500 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-violet-500 uppercase",children:"AI Reputation Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-700 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:[" AI   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"ORM Analysis"})]}),s.jsxs("p",{className:"text-slate-400 text-sm mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"public"}),"     AI     ."]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 min-h-0 custom-scrollbar flex flex-col gap-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl p-6 border-l-4 border-violet-500 shadow-sm flex flex-col md:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"  (Target)"}),s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsx("h2",{className:"text-2xl font-black text-slate-800",children:t.name}),s.jsx("span",{className:"text-sm text-slate-500",children:t.products})]})]}),s.jsxs("button",{onClick:b,disabled:n,className:"px-6 py-3 bg-violet-600 text-white rounded-xl font-bold hover:bg-violet-700 transition-all shadow-lg shadow-violet-200 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n?s.jsx("span",{className:"material-symbols-rounded animate-spin",children:"sync"}):s.jsx("span",{className:"material-symbols-rounded",children:"youtube_searched_for"}),n?"  ...":"   "]})]}),n&&s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center min-h-[400px]",children:[s.jsxs("div",{className:"relative mb-6",children:[s.jsx("div",{className:"absolute inset-0 bg-violet-500 opacity-20 blur-xl rounded-full animate-pulse"}),s.jsx("span",{className:"material-symbols-rounded text-7xl text-violet-600 relative z-10 animate-bounce",children:"satellite_alt"})]}),s.jsx("h3",{className:"text-xl font-bold text-slate-700 mb-2",children:"AI     ..."}),s.jsx("p",{className:"text-slate-500 font-medium animate-pulse",children:l})]}),!n&&f&&c&&s.jsxs("div",{className:"flex flex-col gap-6 animate-in slide-in-from-bottom-5 duration-700",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl p-8 border border-slate-200 shadow-sm flex flex-col items-center justify-center relative overflow-hidden",children:[s.jsx("h3",{className:"text-slate-500 font-bold mb-6 text-sm",children:"   (Sentiment Score)"}),s.jsxs("div",{className:"relative w-48 h-24 overflow-hidden mb-4",children:[s.jsx("div",{className:"w-full h-full bg-slate-100 rounded-t-full"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full rounded-t-full origin-bottom transition-transform duration-1000 ease-out",style:{background:"linear-gradient(90deg, #ef4444 0%, #f59e0b 50%, #10b981 100%)",transform:`rotate(${c.totalScore/100*180-180}deg)`}})]}),s.jsxs("div",{className:`text-4xl font-black ${T(c.totalScore)}`,children:[c.totalScore,""]}),s.jsx("div",{className:"text-slate-400 font-bold mt-2",children:c.verdict})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm flex flex-col",children:[s.jsxs("h3",{className:"text-slate-500 font-bold mb-4 text-sm flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-violet-500",children:"tag"}),"   "]}),s.jsxs("div",{className:"flex-1 bg-slate-50 rounded-xl p-4 flex flex-wrap items-center justify-center gap-3 relative min-h-[200px]",children:[c.keywords.length===0&&s.jsx("span",{className:"text-slate-400",children:"  ."}),c.keywords.map((E,I)=>{const R=k(E.type||E.sentiment_type),P=.8+E.weight*.1;return s.jsxs("span",{className:`px-3 py-1.5 rounded-full font-bold ${R.bg} ${R.text} hover:scale-110 transition-transform cursor-default`,style:{fontSize:`${P}rem`},children:["#",E.text]},I)})]})]})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[s.jsxs("div",{className:"flex-[3] bg-white rounded-2xl border border-slate-200 p-6 flex flex-col",children:[s.jsxs("h3",{className:"text-slate-700 font-bold mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-slate-400",children:"list_alt"}),"    "]}),s.jsx("div",{className:"flex-1 overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left whitespace-nowrap",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-100 text-slate-500",children:[s.jsx("th",{className:"py-3 px-2 w-[15%]",children:""}),s.jsx("th",{className:"py-3 px-2 w-[15%]",children:""}),s.jsx("th",{className:"py-3 px-2",children:" "}),s.jsx("th",{className:"py-3 px-2 text-center w-[10%]",children:""}),s.jsx("th",{className:"py-3 px-2 text-center w-[10%]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:u.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"p-8 text-center text-slate-400",children:" ."})}):u.map((E,I)=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsx("td",{className:"py-3 px-2 text-slate-500 text-xs",children:E.date}),s.jsx("td",{className:"py-3 px-2 font-bold text-slate-600",children:E.channel}),s.jsx("td",{className:"py-3 px-2 max-w-[300px] truncate text-slate-700",children:s.jsx("a",{href:E.link,target:"_blank",rel:"noopener noreferrer",className:"hover:text-violet-600 hover:underline",children:E.text})}),s.jsx("td",{className:"py-3 px-2 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${k(E.sentiment).bg} ${k(E.sentiment).text}`,children:E.sentiment==="pos"?"":E.sentiment==="neg"?"":""})}),s.jsx("td",{className:"py-3 px-2 text-center text-slate-600 font-mono",children:E.score})]},I))})]})})]}),s.jsxs("div",{className:"flex-[2] bg-white rounded-2xl border-l-4 border-violet-500 p-6 shadow-sm flex flex-col justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-violet-100 flex items-center justify-center text-violet-600",children:s.jsx("span",{className:"material-symbols-rounded",children:"psychology_alt"})}),s.jsx("h3",{className:"font-bold text-slate-800",children:"    "})]}),s.jsxs("div",{className:"prose prose-sm text-slate-600 leading-relaxed mb-6",children:[s.jsxs("p",{className:"mb-4",children:[s.jsx("strong",{className:"text-violet-700",children:"[ ]"})," ",c.summary]}),s.jsxs("div",{className:"bg-orange-50 border-l-4 border-orange-400 p-4 rounded-r-lg text-orange-900 text-xs font-medium",children:[s.jsx("strong",{className:"block mb-1 text-orange-700",children:" AI Insight"}),"      ",s.jsx("span",{className:"underline decoration-orange-300 decoration-2",children:c.verdict}),"  ."]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100",children:[s.jsxs("button",{onClick:w,className:"px-4 py-2 rounded-lg border border-slate-200 hover:bg-slate-50 text-slate-600 font-bold text-sm flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"print"})," "]}),s.jsxs("button",{onClick:j,className:"px-4 py-2 rounded-lg bg-slate-800 hover:bg-slate-900 text-white font-bold text-sm flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"picture_as_pdf"})," PDF "]})]})]})]})]}),s.jsxs("div",{className:"mt-8 border-t border-slate-200 pt-8 grid grid-cols-1 md:grid-cols-2 gap-8 text-sm text-slate-500",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-bold text-slate-700 mb-2 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-blue-500",children:"info"}),"    ?"]}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"  :"}),"         ."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"   :"}),"       ."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"  :"}),"        ."]})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-bold text-slate-700 mb-2 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-emerald-500",children:"settings"}),"  :   "]}),s.jsxs("p",{className:"leading-relaxed",children:["   ",s.jsxs("strong",{children:["[   ",">","  ]"]}),"  ",s.jsx("strong",{children:"''"}),"   .  AI        ."]})]})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsxs("p",{className:"text-indigo-500 font-medium italic text-sm",children:['"         . ',s.jsx("br",{}),'  ,      ! - Jenny"']})})]})]})},UDe=()=>{const a=an(),{showAlert:e,showConfirm:t}=wa(),{isAuthorized:r,checkAdmin:n,isVerifying:i}=ps(),[l,o]=F.useState([]),[c,d]=F.useState(""),[u,h]=F.useState("product"),[f,p]=F.useState("ALL"),[g,b]=F.useState(new Set),[w,j]=F.useState(!1),[k,T]=F.useState(!1),[E,I]=F.useState(""),[R,P]=F.useState(!1),[H,G]=F.useState(!1),[X,U]=F.useState([]),[te,Z]=F.useState(!1),[J,B]=F.useState(!1),[W,$]=F.useState(null),[Q,ne]=F.useState({name:"",spec:"",price:0,cost:0,safety:10,type:"product",bomList:[],sync:!1,taxType:"",taxExemptValue:0}),[re,K]=F.useState(!1),[ae,ce]=F.useState(""),[de,he]=F.useState([]),[pe,Re]=F.useState(null),[Te,ke]=F.useState([]),Le=or.useRef(!1);F.useEffect(()=>{if(Le.current)return;Le.current=!0,(async()=>await n()||a("/"))()},[]);const Ne=F.useCallback(async()=>{T(!0);try{const je=await ht("get_product_list");o(je||[])}catch(je){console.error("Failed to load products:",je)}finally{T(!1)}},[]);F.useEffect(()=>{r&&Ne()},[r,Ne]);const _e=async(je=null,He=!1)=>{T(!0);try{let it=[],Ye={name:"",spec:"",price:0,cost:0,safety:10,type:u,bomList:[],sync:!1,productCode:"",category:"",taxType:"",taxExemptValue:0};if(je){$(He?null:je);try{const Ot=await ht("get_product_bom",{productId:je.product_id});Ot&&Ot.length>0?it=Ot.map(st=>({materialId:st.material_id,ratio:st.ratio,type:st.item_type==="aux_material"||st.item_type==="raw_material"||st.item_type==="material"?"aux":st.item_type==="product"?"prod":"raw",key:Math.random().toString(36).substr(2,9)})):(je.material_id&&it.push({materialId:je.material_id,ratio:je.material_ratio||1,type:"raw",key:Math.random().toString(36).substr(2,9)}),je.aux_material_id&&it.push({materialId:je.aux_material_id,ratio:je.aux_material_ratio||1,type:"aux",key:Math.random().toString(36).substr(2,9)}))}catch(Ot){console.error("Failed to fetch BOM:",Ot)}Ye={name:He?`${je.product_name} ()`:je.product_name,spec:je.specification||"",price:je.unit_price,cost:je.cost_price||0,safety:je.safety_stock||10,type:je.item_type||"product",bomList:it,sync:!1,productCode:je.product_code||"",category:je.category||"",taxType:je.tax_type||"",taxExemptValue:je.tax_exempt_value||0}}ne(Ye),B(!0)}finally{T(!1)}},Oe=()=>{B(!1),$(null),K(!1),ce(""),he([])},De=je=>{ne(He=>({...He,bomList:[...He.bomList,{materialId:"",ratio:1,type:je,key:Math.random().toString(36).substr(2,9)}]}))},Ge=je=>{ne(He=>({...He,bomList:He.bomList.filter(it=>it.key!==je)}))},Ee=(je,He,it)=>{ne(Ye=>({...Ye,bomList:Ye.bomList.map(Ot=>Ot.key===je?{...Ot,[He]:it}:Ot)}))},rt=je=>{ne(He=>({...He,sync:je}))},dt=async je=>{if(je){ce(je);try{const He=await ht("get_product_bom",{productId:Number(je)});he(He||[]),ke(He.map(it=>it.material_id))}catch(He){e(" ","  : "+He)}}},wt=je=>{ke(He=>He.includes(je)?He.filter(it=>it!==je):[...He,je])},vt=()=>{if(Te.length===0){K(!1);return}const je=de.filter(He=>Te.includes(He.material_id)).map(He=>{const it=l.find(Ot=>Ot.product_id===He.material_id),Ye=it?.item_type==="raw_material"||it?.item_type==="material"||it?.item_type==="harvest_item"?"raw":"aux";return{materialId:He.material_id,ratio:He.ratio,type:Ye,key:Math.random()}});ne(He=>({...He,bomList:[...He.bomList,...je]})),K(!1),he([]),ce("")},$e=async je=>{if(je.preventDefault(),!Q.name.trim()){e(" "," .");return}T(!0);try{const He=Q.bomList.find(Jt=>Jt.type==="raw"&&Jt.materialId),it=Q.bomList.find(Jt=>Jt.type==="aux"&&Jt.materialId),Ye={productName:Q.name,specification:Q.spec||null,unitPrice:Q.type==="product"?Q.price:0,safetyStock:Q.safety,costPrice:Q.cost,materialId:He?Number(He.materialId):null,materialRatio:He?Number(He.ratio):1,auxMaterialId:it?Number(it.materialId):null,auxMaterialRatio:it?Number(it.ratio):1,itemType:Q.type,productCode:Q.productCode||null,category:Q.category||null,taxType:Q.taxType,taxExemptValue:Q.taxExemptValue};let Ot;W?(Ot=W.product_id,await ht("update_product",{productId:Ot,...Ye,stockQuantity:null,status:Q.status,syncSalesNames:Q.sync||!1})):Ot=await ht("create_product",{...Ye,stockQuantity:0});const st=Q.bomList.filter(Jt=>Jt.materialId&&Number(Jt.materialId)>0).map(Jt=>({material_id:Number(Jt.materialId),ratio:Number(Jt.ratio)}));await ht("save_product_bom",{productId:Ot,bomList:st}),Oe(),Ne(),window.dispatchEvent(new Event("product-data-changed"))}catch(He){e(" "," : "+He)}finally{T(!1)}},na=async je=>{if(await t(" ",`[${je.product_name}]   ?`))try{await ht("delete_product",{productId:je.product_id}),Ne(),window.dispatchEvent(new Event("product-data-changed"))}catch(He){if(He.toString().includes("HAS_HISTORY")){if(await t(" ",`[${je.product_name}]       .
 '()' ?`))try{await ht("discontinue_product",{productId:je.product_id}),e(" ","   ."),Ne(),window.dispatchEvent(new Event("product-data-changed"))}catch(Ye){e("  "," : "+Ye)}}else He.toString().includes("USED_AS_BOM")?e(" ",`[${je.product_name}]    ()  .
       .`):e(" "," : "+He)}},xt=je=>{P_("product",{title:je.product_name,code:je.product_code||`PRD-${je.product_id}`,spec:je.specification||"-",price:je.unit_price||0,qrValue:`PRODUCT|${je.product_id}|${je.product_code||"NA"}|${je.product_name}|${je.specification||"NA"}`})},Bt=async je=>{Z(!0);try{const He=await ht("get_product_history",{productId:je});U(He||[]),G(!0)}catch(He){e("  "," : "+He)}finally{Z(!1)}},_a=async je=>{if(!je)return;if(!await t(" ",`   (, , BOM, ) ?
      .`)){I("");return}P(!0);try{await ht("apply_preset",{presetType:je}),e("","   ."),Ne(),I("")}catch(it){console.error(it),e("","    : "+it)}finally{P(!1)}},Nt=F.useMemo(()=>{let je=l;return u==="harvest_item"?je=je.filter(He=>He.item_type==="harvest_item"):u==="aux_material"?je=je.filter(He=>He.item_type==="aux_material"||He.item_type==="raw_material"||He.item_type==="material"):je=je.filter(He=>!He.item_type||He.item_type==="product"),w||(je=je.filter(He=>He.status!=="")),c&&(je=je.filter(He=>He.product_name.toLowerCase().includes(c.toLowerCase())||He.product_code&&He.product_code.toLowerCase().includes(c.toLowerCase()))),f!=="ALL"&&u==="aux_material"&&(je=je.filter(He=>f===" "?!He.category||He.category===" ":He.category===f)),je},[l,u,c,w,f]),La=F.useMemo(()=>l.filter(je=>je.item_type==="harvest_item"),[l]),oa=F.useMemo(()=>l.filter(je=>je.item_type==="aux_material"||je.item_type==="raw_material"||je.item_type==="material"),[l]),Sa=F.useMemo(()=>l.filter(je=>je.item_type==="product"&&je.product_id!==W?.product_id),[l,W]),zt=F.useMemo(()=>W||!Q.name||Q.name.length<2||Q.bomList.length>0?null:l.find(He=>He.product_id!==W?.product_id&&(He.item_type==="product"||!He.item_type)&&Q.name.split(" ").some(it=>it.length>1&&He.product_name.includes(it))),[Q.name,Q.bomList.length,l,W]);return r?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative",children:[s.jsx("div",{id:"local-modal-root",className:"absolute inset-0 z-[9999] pointer-events-none"}),s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-4",children:[s.jsx("div",{className:"flex justify-between items-end",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"System Settings"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-800 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["/  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Product & Material Master"})]})]})}),s.jsxs("div",{className:"mt-6 flex flex-col xl:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-indigo-50/50 border border-indigo-100 p-4 rounded-2xl flex items-start gap-3 transition-all hover:bg-indigo-50",children:[s.jsx("div",{className:"w-8 h-8 rounded-xl bg-indigo-600 text-white flex items-center justify-center shrink-0 shadow-lg shadow-indigo-100",children:s.jsx(_c,{size:16})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-black text-indigo-900 mb-0.5",children:""}),s.jsxs("p",{className:"text-[10px] text-indigo-600 font-bold leading-relaxed",children:["  .",s.jsx("br",{}),"(, 1kg  )"]})]})]}),s.jsxs("div",{className:"bg-emerald-50/50 border border-emerald-100 p-4 rounded-2xl flex items-start gap-3 transition-all hover:bg-emerald-50",children:[s.jsx("div",{className:"w-8 h-8 rounded-xl bg-emerald-600 text-white flex items-center justify-center shrink-0 shadow-lg shadow-emerald-100",children:s.jsx(Eg,{size:16})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-black text-emerald-900 mb-0.5",children:" ()"}),s.jsxs("p",{className:"text-[10px] text-emerald-600 font-bold leading-relaxed",children:["   .",s.jsx("br",{}),"(  )"]})]})]}),s.jsxs("div",{className:"bg-orange-50/50 border border-orange-100 p-4 rounded-2xl flex items-start gap-3 transition-all hover:bg-orange-50",children:[s.jsx("div",{className:"w-8 h-8 rounded-xl bg-orange-600 text-white flex items-center justify-center shrink-0 shadow-lg shadow-orange-100",children:s.jsx(q8,{size:16})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-black text-orange-900 mb-0.5",children:" ()"}),s.jsxs("p",{className:"text-[10px] text-orange-600 font-bold leading-relaxed",children:["/ /",s.jsx("br",{}),"   "]})]})]})]}),s.jsxs("div",{className:"w-full xl:w-80 bg-white border-2 border-dashed border-slate-200 rounded-2xl p-4 flex flex-col justify-center gap-2 relative group hover:border-indigo-200 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(XH,{size:14,className:"text-indigo-500 fill-indigo-500"}),s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none",children:"   (Preset)"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:E,onChange:je=>{I(je.target.value),je.target.value&&_a(je.target.value)},disabled:R,className:"flex-1 h-10 px-3 bg-slate-50 border border-slate-200 rounded-xl text-xs font-bold text-slate-600 outline-none focus:ring-4 focus:ring-indigo-50 focus:bg-white focus:border-indigo-300 transition-all disabled:opacity-50 appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",backgroundSize:"1rem"},children:[s.jsx("option",{value:"",children:"  ..."}),s.jsx("option",{value:"mushroom",children:"   (/)"}),s.jsx("option",{value:"strawberry",children:"   (/)"}),s.jsx("option",{value:"potato",children:"   (/)"}),s.jsx("option",{value:"shinemuscat",children:"  ( )"}),s.jsx("option",{value:"apple",children:"   (/)"}),s.jsx("option",{value:"tomato",children:"  (/)"})]}),R&&s.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-indigo-50 text-indigo-600 rounded-xl",children:s.jsx(Nv,{size:18,className:"animate-spin"})})]})]})]})]}),s.jsx("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pb-8 overflow-hidden",children:s.jsxs("div",{className:"flex flex-col gap-6 h-full",children:[s.jsxs("div",{className:"bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-200 p-6 ring-1 ring-slate-900/5",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[s.jsxs("div",{className:"flex p-1 bg-slate-100 rounded-2xl w-full md:w-auto",children:[s.jsxs("button",{onClick:()=>{h("product"),p("ALL")},className:`flex-1 md:flex-none px-4 py-2.5 rounded-[1.25rem] font-black text-xs transition-all flex items-center justify-center gap-2
                                        ${u==="product"?"bg-white text-indigo-600 shadow-lg shadow-indigo-500/10":"text-slate-400 hover:text-slate-600"}
                                    `,children:[s.jsx(_c,{size:14})," "]}),s.jsxs("button",{onClick:()=>{h("harvest_item"),p("ALL")},className:`flex-1 md:flex-none px-4 py-2.5 rounded-[1.25rem] font-black text-xs transition-all flex items-center justify-center gap-2
                                        ${u==="harvest_item"?"bg-white text-emerald-600 shadow-lg shadow-emerald-500/10":"text-slate-400 hover:text-slate-600"}
                                    `,children:[s.jsx(Eg,{size:14}),"  ()"]}),s.jsxs("button",{onClick:()=>{h("aux_material"),p("ALL")},className:`flex-1 md:flex-none px-4 py-2.5 rounded-[1.25rem] font-black text-xs transition-all flex items-center justify-center gap-2
                                        ${u==="aux_material"?"bg-white text-orange-600 shadow-lg shadow-orange-500/10":"text-slate-400 hover:text-slate-600"}
                                    `,children:[s.jsx(q8,{size:14}),"  ()"]})]}),s.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer px-3 py-2 rounded-xl hover:bg-slate-100 transition-colors",children:[s.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${w?"bg-slate-600 border-slate-600":"bg-white border-slate-300"}`,children:w&&s.jsx(di,{size:12,className:"text-white"})}),s.jsx("input",{type:"checkbox",checked:w,onChange:je=>j(je.target.checked),className:"hidden"}),s.jsx("span",{className:"text-xs font-bold text-slate-500",children:""})]}),s.jsx("div",{className:"relative flex-1 md:w-80 group text-left",children:s.jsx("input",{type:"text",value:c,onChange:je=>d(je.target.value),placeholder:" ",className:"w-full h-12 px-6 bg-slate-50 border-none rounded-2xl font-bold text-sm focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 focus:ring-indigo-500/20"})}),s.jsxs("button",{onClick:()=>_e(),className:`h-12 px-6 rounded-2xl font-black text-sm flex items-center gap-2 text-white shadow-lg transition-all active:scale-[0.98]
                                        ${u==="product"?"bg-indigo-600 hover:bg-indigo-500 shadow-indigo-200":u==="harvest_item"?"bg-emerald-600 hover:bg-emerald-500 shadow-emerald-200":"bg-orange-500 hover:bg-orange-400 shadow-orange-200"}
                                    `,children:[s.jsx(kl,{size:20}),"   "]})]})]}),u==="aux_material"&&s.jsx("div",{className:"flex bg-slate-50 p-1 rounded-xl border border-slate-200 animate-in slide-in-from-left-4 duration-300 mt-4",children:[{id:"ALL",label:""},{id:"/",label:" /"},{id:"/",label:" /"},{id:"/",label:" /"},{id:"",label:" "},{id:" ",label:" "}].map(je=>s.jsx("button",{onClick:()=>p(je.id),className:`px-3 py-1.5 rounded-lg text-[10px] font-black transition-all ${f===je.id?"bg-white text-orange-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:je.label},je.id))})]}),s.jsx("div",{className:"flex-1 bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 flex flex-col",children:s.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{className:"sticky top-0 z-10 bg-slate-50/80 backdrop-blur-md border-b border-slate-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center w-[5%] min-w-[50px]",children:"No."}),s.jsx("th",{className:"px-4 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest w-[8%] min-w-[70px] text-center",children:""}),s.jsx("th",{className:"px-4 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest w-[8%] min-w-[70px] text-center",children:""}),s.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-left w-[25%] min-w-[200px]",children:""}),s.jsx("th",{className:"px-4 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center w-[10%] min-w-[100px]",children:""}),u==="product"&&s.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right w-[12%] min-w-[120px]",children:""}),s.jsx("th",{className:"px-4 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right w-[8%] min-w-[80px]",children:""}),s.jsx("th",{className:"px-4 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right w-[8%] min-w-[80px]",children:""}),s.jsx("th",{className:"px-4 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center w-[6%] min-w-[70px]",children:""}),s.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center w-[10%] min-w-[160px]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:Nt.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"10",className:"py-32 text-center",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[s.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-3xl flex items-center justify-center text-slate-200",children:s.jsx(Sv,{size:32})}),s.jsx("p",{className:"text-slate-400 font-bold tracking-tight",children:"  "})]})})}):Nt.map((je,He)=>{const it=(je.stock_quantity||0)<=(je.safety_stock||10);return s.jsxs("tr",{className:"group hover:bg-slate-50/50 transition-all",children:[s.jsx("td",{className:"px-8 py-4 text-center text-xs font-black text-slate-300 group-hover:text-slate-400",children:He+1}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:`px-3 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest border
                                                            ${je.item_type==="harvest_item"||je.item_type==="raw_material"||je.item_type==="material"?"bg-emerald-50 text-emerald-600 border-emerald-100":je.item_type==="aux_material"?"bg-orange-50 text-orange-600 border-orange-100":"bg-indigo-50 text-indigo-600 border-indigo-100"}
                                                        `,children:je.item_type==="harvest_item"?"":je.item_type==="raw_material"||je.item_type==="material"?"":je.item_type==="aux_material"?"":""})}),s.jsx("td",{className:"px-6 py-4 text-center",children:je.category?s.jsx("span",{className:"text-[10px] font-bold text-slate-500 bg-slate-100 px-2 py-1 rounded-md",children:je.category}):s.jsx("span",{className:"text-[10px] font-bold text-slate-300 italic",children:"-"})}),s.jsx("td",{className:"px-6 py-4 font-black text-sm text-slate-700",children:je.product_name}),s.jsx("td",{className:"px-6 py-4 text-center text-xs font-bold text-slate-400 bg-slate-50/30",children:je.specification||"-"}),u==="product"&&s.jsx("td",{className:"px-6 py-4 text-right font-black text-sm text-slate-800 tabular-nums",children:Fe(je.unit_price)}),s.jsx("td",{className:"px-6 py-4 text-right text-xs font-bold text-slate-400",children:je.safety_stock?je.safety_stock.toLocaleString():10}),s.jsx("td",{className:"px-6 py-4 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[it&&s.jsx(H_,{size:14,className:"text-rose-500"}),s.jsx("span",{className:`font-black text-sm tabular-nums ${it?"text-rose-600 underline underline-offset-4 decoration-rose-200":"text-slate-600"}`,children:(je.stock_quantity||0).toLocaleString()})]})}),s.jsx("td",{className:"px-4 py-4 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-black ${je.status===""?"bg-slate-100 text-slate-400":"bg-green-50 text-green-600"}`,children:je.status||""})}),s.jsx("td",{className:"px-8 py-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("button",{onClick:()=>_e(je),className:"w-9 h-9 rounded-xl bg-slate-100 text-slate-500 hover:bg-indigo-50 hover:text-indigo-600 transition-all shadow-sm flex items-center justify-center",title:"",children:s.jsx("span",{className:"material-symbols-rounded text-[18px]",children:"edit"})}),s.jsx("button",{onClick:()=>_e(je,!0),className:"w-9 h-9 rounded-xl bg-slate-100 text-slate-500 hover:bg-emerald-50 hover:text-emerald-600 transition-all shadow-sm flex items-center justify-center border border-transparent hover:border-emerald-100",title:"  (Clone)",children:s.jsx("span",{className:"material-symbols-rounded text-[18px]",children:"content_copy"})}),s.jsx("button",{onClick:()=>Bt(je.product_id),className:"w-9 h-9 rounded-xl bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-indigo-600 transition-all shadow-sm flex items-center justify-center",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-[18px]",children:"history"})}),s.jsx("button",{onClick:()=>xt(je),className:"w-9 h-9 rounded-xl bg-slate-100 text-slate-500 hover:bg-indigo-50 hover:text-indigo-600 transition-all shadow-sm flex items-center justify-center border border-transparent hover:border-indigo-100",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-[18px]",children:"qr_code"})}),s.jsx("button",{onClick:()=>na(je),className:"w-9 h-9 rounded-xl bg-slate-100 text-slate-400 hover:bg-rose-50 hover:text-rose-600 transition-all shadow-sm flex items-center justify-center",title:"",children:s.jsx("span",{className:"material-symbols-rounded text-[18px]",children:"delete"})})]})})]},je.product_id)})})]})})})]})}),J&&s.jsxs("div",{className:"absolute inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md animate-in fade-in duration-300"}),s.jsxs("div",{className:"relative bg-white w-[560px] rounded-[2.5rem] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300 ring-1 ring-slate-900/10",children:[k&&s.jsxs("div",{className:"absolute inset-0 z-50 bg-white/80 backdrop-blur-[2px] flex flex-col items-center justify-center animate-in fade-in duration-200",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-indigo-100 border-t-indigo-600 rounded-full animate-spin mb-4 shadow-lg shadow-indigo-200"}),s.jsx("p",{className:"text-sm font-black text-slate-700 animate-pulse",children:W&&Q.sync?"   ...":" ..."}),W&&Q.sync&&s.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-1",children:"      "})]}),s.jsxs("div",{className:"px-8 py-6 bg-slate-50/50 border-b border-slate-100 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:`w-4 h-1 rounded-full ${Q.type==="product"?"bg-indigo-600":Q.type==="aux_material"?"bg-orange-500":"bg-emerald-500"}`}),s.jsx("span",{className:`text-[10px] font-black uppercase tracking-widest ${Q.type==="product"?"text-indigo-600":Q.type==="aux_material"?"text-orange-500":"text-emerald-600"}`,children:W?"Update Item":"Register New"})]}),s.jsx("h3",{className:"text-2xl font-black text-slate-800 tracking-tight",children:W?" ":`${Q.type==="raw_material"?"()":Q.type==="aux_material"?"()":Q.type==="harvest_item"?"()":""} `})]}),s.jsx("button",{onClick:Oe,disabled:k,className:"w-10 h-10 rounded-2xl bg-white border border-slate-200 text-slate-400 flex items-center justify-center hover:bg-slate-100 hover:text-slate-600 transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(Ri,{size:20})})]}),s.jsxs("form",{onSubmit:$e,className:"flex flex-col max-h-[75vh]",children:[s.jsxs("div",{className:"p-8 space-y-4 overflow-y-auto custom-scrollbar flex-1 min-h-0",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:" (Item Name)"}),s.jsx("input",{type:"text",value:Q.name,onChange:je=>ne({...Q,name:je.target.value}),placeholder:"    ",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 disabled:opacity-70",required:!0,autoFocus:!0,disabled:k}),W&&s.jsx("div",{className:"mt-2 ml-1",children:s.jsxs("label",{className:`flex items-start gap-2 cursor-pointer group ${k?"pointer-events-none opacity-50":""}`,children:[s.jsx("div",{className:`mt-0.5 w-4 h-4 rounded border flex items-center justify-center transition-colors ${Q.sync?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:Q.sync&&s.jsx(di,{size:12,className:"text-white"})}),s.jsx("input",{type:"checkbox",checked:Q.sync||!1,onChange:je=>rt(je.target.checked),className:"hidden",disabled:k}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-xs font-bold text-slate-700 block group-hover:text-indigo-600 transition-colors",children:"    ()"}),s.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5 leading-tight",children:" ,      /     . (    )"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:" (Specification)"}),s.jsx("input",{type:"text",value:Q.spec,onChange:je=>ne({...Q,spec:je.target.value}),placeholder:"ex) 1kg, 20",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 disabled:opacity-70",disabled:k})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:" "}),s.jsx("input",{type:"number",value:Q.safety,onChange:je=>ne({...Q,safety:parseInt(je.target.value)}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 text-right disabled:opacity-70",disabled:k})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:"  (Tax Type)"}),s.jsx("div",{className:"flex p-1 bg-slate-100 rounded-xl",children:[{id:"",label:"  (Exempt)"},{id:"",label:"  (Taxable)"},{id:"",label:"  (Integrated)"}].map(je=>s.jsx("button",{type:"button",disabled:k,onClick:()=>ne(He=>({...He,taxType:je.id})),className:`flex-1 py-2 rounded-lg text-xs font-black transition-all ${Q.taxType===je.id?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"} disabled:opacity-50`,children:je.label},je.id))}),Q.taxType===""&&s.jsxs("div",{className:"mt-3 p-4 bg-amber-50 rounded-xl border border-amber-100 animate-in slide-in-from-top-2 duration-300",children:[s.jsxs("label",{className:"block text-[10px] font-black text-amber-700 uppercase tracking-widest mb-1.5 flex justify-between",children:[s.jsx("span",{children:"   (Exempt Portion)"}),s.jsx("span",{className:"text-amber-400",children:"   "})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:Q.taxExemptValue.toLocaleString(),onChange:je=>{const He=parseInt(je.target.value.replace(/,/g,""))||0;ne({...Q,taxExemptValue:He})},className:"w-full h-11 px-4 bg-white border-none rounded-lg font-black font-mono text-sm focus:ring-2 focus:ring-amber-500 transition-all ring-1 ring-inset ring-amber-200 text-right pr-8"}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs font-bold text-amber-300",children:""})]}),s.jsx("p",{className:"text-[10px] text-amber-600/70 mt-2 leading-tight italic",children:"*           ,  ( )  ."})]}),s.jsx("p",{className:"text-[10px] text-slate-400 mt-1.5 ml-2 leading-tight",children:"*  /   ,      ."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:" "}),s.jsx("input",{type:"text",value:Q.productCode,onChange:je=>ne({...Q,productCode:je.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm focus:ring-2 focus:ring-indigo-500 transition-all ring-1 ring-inset ring-slate-200",placeholder:"",disabled:k})]}),(Q.type==="aux_material"||Q.type==="raw_material"||Q.type==="material")&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:" "}),s.jsxs("select",{value:Q.category,onChange:je=>ne({...Q,category:je.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm focus:ring-2 focus:ring-indigo-500 transition-all ring-1 ring-inset ring-slate-200",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"/",children:" /"}),s.jsx("option",{value:"/",children:" /"}),s.jsx("option",{value:"/",children:" /"}),s.jsx("option",{value:"",children:"  (/)"}),s.jsx("option",{value:" ",children:"  "})]})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:Q.type==="product"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"cost-input",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:" (Cost Price)"}),s.jsx("input",{id:"cost-input",type:"text",value:Q.cost.toLocaleString(),onChange:je=>{const He=parseInt(je.target.value.replace(/,/g,""))||0;ne({...Q,cost:He})},className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold font-mono text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 text-right disabled:opacity-70",disabled:k})]}),s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-between items-center mb-1.5 ml-2",children:s.jsx("label",{htmlFor:"price-input",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:" "})}),s.jsx("input",{id:"price-input",type:"text",value:Q.price.toLocaleString(),onChange:je=>{const He=parseInt(je.target.value.replace(/,/g,""))||0;ne({...Q,price:He})},className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold font-mono text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 text-right disabled:opacity-70",disabled:k})]})]}):s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:Q.type==="raw_material"||Q.type==="material"?"  (Production Cost)":"  (Purchase Price)"}),s.jsx("input",{type:"text",value:Q.cost.toLocaleString(),onChange:je=>{const He=parseInt(je.target.value.replace(/,/g,""))||0;ne({...Q,cost:He})},placeholder:Q.type==="raw_material"||Q.type==="material"?"   ":"  ",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold font-mono text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 text-right disabled:opacity-70",disabled:k})]})}),Q.type==="product"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 pb-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"  (Bill of Materials)"}),s.jsxs("div",{className:"flex items-center gap-2",children:[zt&&s.jsxs("button",{type:"button",onClick:()=>dt(zt.product_id).then(()=>vt()),className:"text-[10px] font-black flex items-center gap-1.5 text-emerald-600 hover:text-emerald-700 bg-emerald-50 px-3 py-1.5 rounded-lg transition-all border border-emerald-100 shadow-sm animate-bounce-short",children:[s.jsx(di,{size:14}),"   [",zt.product_name,"]   "]}),s.jsxs("button",{type:"button",onClick:()=>K(!re),disabled:k,className:"text-[10px] font-black flex items-center gap-1.5 text-indigo-600 hover:text-indigo-700 bg-indigo-50 px-3 py-1.5 rounded-lg transition-colors border border-indigo-100 shadow-sm",children:[s.jsx(Eg,{size:14}),"    "]})]})]}),re&&s.jsxs("div",{className:"p-5 bg-indigo-50/50 rounded-2xl border border-indigo-100 animate-in slide-in-from-top-4 duration-300",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h4",{className:"text-xs font-black text-indigo-800",children:"   "}),s.jsx("button",{type:"button",onClick:()=>K(!1),className:"text-indigo-400 hover:text-indigo-600",children:s.jsx(Ri,{size:16})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("select",{value:ae,onChange:je=>dt(je.target.value),className:"w-full h-10 px-3 bg-white border-none rounded-xl font-bold text-xs focus:ring-2 focus:ring-indigo-500 transition-all ring-1 ring-inset ring-indigo-200",children:[s.jsx("option",{value:"",children:"   ..."}),l.filter(je=>je.product_id!==W?.product_id&&(je.item_type==="product"||!je.item_type)).map(je=>s.jsxs("option",{value:je.product_id,children:[je.product_name," ",je.specification&&`(${je.specification})`]},je.product_id))]}),de.length>0&&s.jsxs("div",{className:"bg-white rounded-xl border border-indigo-100 overflow-hidden",children:[s.jsx("div",{className:"px-4 py-2 bg-indigo-50/30 border-b border-indigo-100 text-[9px] font-black text-indigo-400 uppercase tracking-widest",children:"  (Check to Import)"}),s.jsx("div",{className:"max-h-40 overflow-y-auto divide-y divide-slate-50",children:de.map(je=>{const He=l.find(it=>it.product_id===je.material_id);return s.jsxs("label",{className:"flex items-center gap-3 px-4 py-2.5 hover:bg-slate-50 cursor-pointer transition-colors",children:[s.jsx("div",{className:`w-4 h-4 rounded-md border flex items-center justify-center transition-colors ${Te.includes(je.material_id)?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300"}`,children:Te.includes(je.material_id)&&s.jsx(di,{size:10,className:"text-white"})}),s.jsx("input",{type:"checkbox",className:"hidden",checked:Te.includes(je.material_id),onChange:()=>wt(je.material_id)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-xs font-bold text-slate-700",children:He?.product_name||"   "}),s.jsxs("span",{className:"text-[10px] text-slate-400 ml-2 font-mono",children:["x ",je.ratio]})]}),s.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded border ${He?.item_type==="raw_material"||He?.item_type==="material"?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-orange-50 text-orange-600 border-orange-100"}`,children:He?.item_type==="harvest_item"?"":He?.item_type==="raw_material"||He?.item_type==="material"?"":""})]},je.material_id)})}),s.jsx("div",{className:"p-3 bg-slate-50 border-t border-indigo-100",children:s.jsxs("button",{type:"button",onClick:vt,className:"w-full py-2 bg-indigo-600 text-white rounded-lg font-black text-[11px] shadow-sm hover:bg-indigo-700 transition-all flex items-center justify-center gap-2",children:[s.jsx(kl,{size:14}),"  ",Te.length,"  "]})})]})]})]}),s.jsxs("div",{className:"bg-emerald-50/50 rounded-2xl border border-emerald-100/50 p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("span",{className:"text-xs font-bold text-emerald-800 flex items-center gap-1.5",children:[s.jsx(Eg,{size:14}),"  ()"]}),s.jsx("button",{type:"button",onClick:()=>De("raw"),disabled:k,className:"text-[10px] font-black bg-white border border-emerald-200 text-emerald-600 px-3 py-1.5 rounded-lg hover:bg-emerald-50 transition-colors shadow-sm disabled:opacity-50",children:"+  "})]}),s.jsxs("div",{className:"space-y-2",children:[Q.bomList.filter(je=>je.type==="raw").length===0&&s.jsx("div",{className:"text-center py-4 bg-white/50 rounded-xl border border-dashed border-emerald-200/50 text-xs text-emerald-400",children:"  ."}),Q.bomList.filter(je=>je.type==="raw").map(je=>s.jsxs("div",{className:"flex gap-2 items-center animate-in slide-in-from-left-2 duration-200",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("select",{"aria-label":" ",value:je.materialId,onChange:He=>Ee(je.key,"materialId",He.target.value),className:"w-full h-10 px-3 bg-white border-none rounded-xl font-bold text-xs focus:ring-2 focus:ring-emerald-500 transition-all ring-1 ring-inset ring-emerald-200 disabled:opacity-70",disabled:k,children:[s.jsx("option",{value:"",children:" ..."}),La.map(He=>s.jsxs("option",{value:He.product_id,children:[He.product_name," ",He.specification&&`(${He.specification})`]},He.product_id))]})}),s.jsxs("div",{className:"w-24 relative",children:[s.jsx("input",{type:"number",step:"0.1",value:je.ratio,onChange:He=>Ee(je.key,"ratio",He.target.value),className:"w-full h-10 px-3 bg-white border-none rounded-xl font-bold text-xs focus:ring-2 focus:ring-emerald-500 transition-all ring-1 ring-inset ring-emerald-200 text-right pr-8 disabled:opacity-70",disabled:k}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] text-emerald-300 font-bold",children:""})]}),s.jsx("button",{type:"button",onClick:()=>Ge(je.key),disabled:k,className:"w-10 h-10 flex items-center justify-center text-rose-400 hover:text-rose-600 hover:bg-rose-50 rounded-xl transition-all active:scale-95 shrink-0",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-[20px]",children:"delete"})})]},je.key))]})]}),s.jsxs("div",{className:"bg-orange-50/50 rounded-2xl border border-orange-100/50 p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("span",{className:"text-xs font-bold text-orange-800 flex items-center gap-1.5",children:[s.jsx(_c,{size:14}),"   ()"]}),s.jsx("button",{type:"button",onClick:()=>De("aux"),disabled:k,className:"text-[10px] font-black bg-white border border-orange-200 text-orange-600 px-3 py-1.5 rounded-lg hover:bg-orange-50 transition-colors shadow-sm disabled:opacity-50",children:"+  "})]}),(()=>{const je=Q.bomList.filter(it=>it.type==="aux");if(je.length===0)return s.jsx("div",{className:"text-center py-4 bg-white/50 rounded-xl border border-dashed border-orange-200/50 text-xs text-orange-400",children:"  ."});const He=je.reduce((it,Ye)=>{const st=l.find(Jt=>Jt.product_id===Number(Ye.materialId))?.category||"";return it[st]||(it[st]=[]),it[st].push(Ye),it},{});return Object.entries(He).sort((it,Ye)=>it[0]===""?1:Ye[0]===""?-1:0).map(([it,Ye])=>{const Ot=g.has(it),st=()=>{const Jt=new Set(g);Jt.has(it)?Jt.delete(it):Jt.add(it),b(Jt)};return s.jsxs("div",{className:"space-y-2 mb-2",children:[s.jsxs("button",{type:"button",onClick:st,className:"w-full flex justify-between items-center px-3 py-2 bg-white/60 hover:bg-white rounded-xl border border-orange-100 transition-all group",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`transition-transform duration-300 ${Ot?"-rotate-90":""}`,children:s.jsx(WA,{size:14,className:"text-orange-400"})}),s.jsx("span",{className:"text-[11px] font-black text-orange-700",children:it}),s.jsx("span",{className:"text-[10px] font-bold text-orange-300 bg-orange-50 px-1.5 py-0.5 rounded-full",children:Ye.length})]}),Ot&&s.jsx("div",{className:"flex gap-1 overflow-hidden max-w-[200px]",children:Ye.map(Jt=>{const Ar=l.find(xs=>xs.product_id===Number(Jt.materialId));return s.jsxs("span",{className:"text-[9px] text-orange-400 whitespace-nowrap",children:[" ",Ar?.product_name||"..."]},Jt.key)})})]}),!Ot&&s.jsx("div",{className:"space-y-2 pl-2 animate-in slide-in-from-top-2 duration-300",children:Ye.map(Jt=>s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("select",{value:Jt.materialId,onChange:Ar=>Ee(Jt.key,"materialId",Ar.target.value),className:"w-full h-10 px-3 bg-white border-none rounded-xl font-bold text-xs focus:ring-2 focus:ring-orange-500 transition-all ring-1 ring-inset ring-orange-200 disabled:opacity-70",disabled:k,children:[s.jsx("option",{value:"",children:" ..."}),oa.map(Ar=>s.jsxs("option",{value:Ar.product_id,children:[Ar.product_name," ",Ar.specification&&`(${Ar.specification})`]},Ar.product_id))]})}),s.jsxs("div",{className:"w-24 relative",children:[s.jsx("input",{type:"number",step:"0.1",value:Jt.ratio,onChange:Ar=>Ee(Jt.key,"ratio",Ar.target.value),className:"w-full h-10 px-3 bg-white border-none rounded-xl font-bold text-xs focus:ring-2 focus:ring-orange-500 transition-all ring-1 ring-inset ring-orange-200 text-right pr-8 disabled:opacity-70",disabled:k}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] text-orange-300 font-bold",children:""})]}),s.jsx("button",{type:"button",onClick:()=>Ge(Jt.key),disabled:k,className:"w-10 h-10 flex items-center justify-center text-rose-400 hover:text-rose-600 hover:bg-rose-50 rounded-xl transition-all active:scale-95 shrink-0",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-[20px]",children:"delete"})})]},Jt.key))})]},it)})})()]}),s.jsxs("div",{className:"bg-indigo-50/50 rounded-2xl border border-indigo-100/50 p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("span",{className:"text-xs font-bold text-indigo-800 flex items-center gap-1.5",children:[s.jsx(zH,{size:14}),"   ( )"]}),s.jsx("button",{type:"button",onClick:()=>De("prod"),disabled:k,className:"text-[10px] font-black bg-white border border-indigo-200 text-indigo-600 px-3 py-1.5 rounded-lg hover:bg-indigo-50 transition-colors shadow-sm disabled:opacity-50",children:"+  "})]}),s.jsxs("div",{className:"space-y-2",children:[Q.bomList.filter(je=>je.type==="prod").length===0&&s.jsx("div",{className:"text-center py-4 bg-white/50 rounded-xl border border-dashed border-indigo-200/50 text-xs text-indigo-400",children:"   ."}),Q.bomList.filter(je=>je.type==="prod").map(je=>s.jsxs("div",{className:"flex gap-2 items-center animate-in slide-in-from-left-2 duration-200",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("select",{value:je.materialId,onChange:He=>Ee(je.key,"materialId",He.target.value),className:"w-full h-10 px-3 bg-white border-none rounded-xl font-bold text-xs focus:ring-2 focus:ring-indigo-500 transition-all ring-1 ring-inset ring-indigo-200 disabled:opacity-70",disabled:k,children:[s.jsx("option",{value:"",children:"  ..."}),Sa.map(He=>s.jsxs("option",{value:He.product_id,children:[He.product_name," ",He.specification&&`(${He.specification})`]},He.product_id))]})}),s.jsxs("div",{className:"w-24 relative",children:[s.jsx("input",{type:"number",step:"0.1",value:je.ratio,onChange:He=>Ee(je.key,"ratio",He.target.value),className:"w-full h-10 px-3 bg-white border-none rounded-xl font-bold text-xs focus:ring-2 focus:ring-indigo-500 transition-all ring-1 ring-inset ring-indigo-200 text-right pr-8 disabled:opacity-70",disabled:k}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] text-indigo-300 font-bold",children:""})]}),s.jsx("button",{type:"button",onClick:()=>Ge(je.key),disabled:k,className:"w-10 h-10 flex items-center justify-center text-rose-400 hover:text-rose-600 hover:bg-rose-50 rounded-xl transition-all active:scale-95 shrink-0",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-[20px]",children:"delete"})})]},je.key))]})]})]})]}),s.jsxs("div",{className:"px-8 py-5 flex gap-3 border-t border-slate-100 bg-slate-50/30",children:[s.jsx("div",{className:"flex-1"}),s.jsx("button",{type:"button",onClick:Oe,disabled:k,className:"h-12 px-8 bg-slate-100 text-slate-600 rounded-xl font-black text-xs hover:bg-slate-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:""}),s.jsxs("button",{type:"submit",disabled:k,className:`h-12 px-10 text-white rounded-xl font-black text-xs shadow-lg transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed
                                        ${Q.type==="product"?"bg-indigo-600 hover:bg-indigo-500 shadow-indigo-200":Q.type==="raw_material"?"bg-emerald-600 hover:bg-emerald-500 shadow-emerald-200":"bg-orange-500 hover:bg-orange-400 shadow-orange-200"}
                                    `,children:[s.jsx(di,{size:16})," ",W?"  ":" "]})]})]})]})]}),H&&s.jsxs("div",{className:"absolute inset-0 z-[110] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300"}),s.jsxs("div",{className:"relative bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300 ring-1 ring-slate-900/10",children:[s.jsxs("div",{className:"px-8 py-6 bg-slate-50/50 border-b border-slate-100 flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xl font-black text-slate-800 tracking-tight flex items-center gap-2",children:[s.jsx(no,{size:20,className:"text-indigo-600"}),"   "]}),s.jsx("button",{onClick:()=>G(!1),className:"w-8 h-8 rounded-xl bg-white border border-slate-200 text-slate-400 flex items-center justify-center hover:bg-slate-100 hover:text-slate-600 transition-all shadow-sm",children:s.jsx(Ri,{size:16})})]}),s.jsx("div",{className:"p-0 max-h-[60vh] overflow-y-auto custom-scrollbar",children:X.length===0?s.jsx("div",{className:"p-10 text-center",children:s.jsx("p",{className:"text-slate-400 font-bold text-sm",children:"   ."})}):s.jsx("div",{className:"divide-y divide-slate-100",children:X.map((je,He)=>{const it=je.history_type==="";return s.jsxs("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 tracking-wider uppercase",children:ZH(je.date)}),s.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full border ${it?"bg-indigo-50 text-indigo-600 border-indigo-100":je.history_type===""?"bg-green-50 text-green-600 border-green-100":"bg-slate-100 text-slate-500 border-slate-200"}`,children:je.title})]}),it?s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm font-bold text-slate-400 decoration-slate-300 line-through tabular-nums decoration-2",children:parseInt(je.old_value||"0").toLocaleString()}),s.jsx(z_,{size:14,className:"text-slate-300"}),s.jsx("span",{className:"text-lg font-black text-slate-700 tabular-nums",children:parseInt(je.new_value||"0").toLocaleString()})]}):s.jsx("div",{className:"text-sm font-bold text-slate-700",children:je.description})]},He)})})}),s.jsx("div",{className:"p-4 bg-slate-50/50 border-t border-slate-100 flex justify-center",children:s.jsx("button",{onClick:()=>G(!1),className:"w-full py-3 bg-white border border-slate-200 rounded-xl text-slate-600 font-bold text-sm hover:bg-slate-50 transition-colors shadow-sm",children:" ()"})})]})]})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[i?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Ii,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:i?"  ...":"  ..."})]})})},GDe=()=>{const a=an(),{showAlert:e,showConfirm:t}=wa(),{isAuthorized:r,checkAdmin:n,isVerifying:i}=ps(),[l,o]=F.useState([]),[c,d]=F.useState(!1),[u,h]=F.useState(null),[f,p]=F.useState({username:"",password:"",role:"user",ui_mode:"pro"}),g=or.useRef(null),b=or.useRef(!1);F.useEffect(()=>{if(b.current)return;b.current=!0,(async()=>await n()||a("/"))()},[]);const w=F.useCallback(async()=>{d(!0);try{const I=await ht("get_all_users");o(I||[])}catch(I){console.error("Failed to load users:",I)}finally{d(!1)}},[]);F.useEffect(()=>{r&&w()},[r,w]);const j=I=>{h(I),p({username:I.username,password:"",role:I.role,ui_mode:I.ui_mode||"pro"}),g.current?.focus()},k=()=>{h(null),p({username:"",password:"",role:"user",ui_mode:"pro"})},T=async I=>{if(I.preventDefault(),!f.username.trim()){e(" "," .");return}try{if(u)await ht("update_user",{id:u.id,username:f.username,password:f.password||null,role:f.role,ui_mode:f.ui_mode}),e(" ","  .");else{if(!f.password){e(" "," .");return}await ht("create_user",{username:f.username,password:f.password,role:f.role,ui_mode:f.ui_mode}),e(" ","  .")}k(),w()}catch(R){e(" "," : "+R)}},E=async I=>{if(I.username==="admin"){e(" ","    .");return}if(await t(" ",`[${I.username}]   ?`))try{await ht("delete_user",{id:I.id}),u&&u.id===I.id&&k(),w()}catch(R){e(" "," : "+R)}};return r?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative",children:[s.jsx("div",{id:"local-modal-root",className:"absolute inset-0 z-[9999] pointer-events-none"}),s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-4",children:s.jsx("div",{className:"flex justify-between items-end",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Access Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"User & Permissions"})]})]})})}),s.jsx("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pb-8 overflow-hidden",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 h-full",children:[s.jsx("div",{className:"lg:col-span-4 space-y-6",children:s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 sticky top-0",children:[s.jsxs("div",{className:"px-8 py-6 bg-slate-50/50 border-b border-slate-100 flex items-center justify-between",children:[s.jsxs("h3",{className:"font-black text-slate-800 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"manage_accounts"}),u?"  ":"  "]}),u&&s.jsx("button",{onClick:k,className:"text-[10px] font-black text-indigo-600 bg-indigo-50 px-3 py-1.5 rounded-lg hover:bg-indigo-100 transition-all",children:"  "})]}),s.jsxs("form",{onSubmit:T,className:"p-8 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2 text-left",children:"User ID"}),s.jsx("input",{ref:g,type:"text",value:f.username,onChange:I=>p({...f,username:I.target.value}),disabled:u?.username==="admin",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 disabled:opacity-50",placeholder:"  ",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2 text-left",children:u?"New Password (Optional)":"Password"}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"password",value:f.password,onChange:I=>p({...f,password:I.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:u?"  ":" ",required:!u})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2 text-left",children:"Role"}),s.jsxs("select",{value:f.role,onChange:I=>p({...f,role:I.target.value}),disabled:u?.username==="admin",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 disabled:opacity-50",children:[s.jsx("option",{value:"user",children:"  (User)"}),s.jsx("option",{value:"admin",children:" (Admin)"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2 text-left",children:"UI Mode"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("button",{type:"button",onClick:()=>p({...f,ui_mode:"lite"}),className:`h-11 rounded-xl font-black text-[10px] uppercase transition-all border-2 ${f.ui_mode==="lite"?"bg-indigo-50 border-indigo-500 text-indigo-600":"bg-slate-50 border-transparent text-slate-400 hover:bg-slate-100"}`,children:"Lite ( )"}),s.jsx("button",{type:"button",onClick:()=>p({...f,ui_mode:"pro"}),className:`h-11 rounded-xl font-black text-[10px] uppercase transition-all border-2 ${f.ui_mode==="pro"?"bg-indigo-50 border-indigo-500 text-indigo-600":"bg-slate-50 border-transparent text-slate-400 hover:bg-slate-100"}`,children:"Pro ( )"})]})]}),s.jsxs("div",{className:"pt-4 border-t border-slate-100 flex flex-col gap-3",children:[s.jsxs("button",{type:"submit",className:"h-12 w-full bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-black text-xs shadow-lg shadow-indigo-200 transition-all flex items-center justify-center gap-2",children:[s.jsx(di,{size:16})," ",u?"  ":"  "]}),u&&s.jsx("button",{type:"button",onClick:k,className:"h-12 w-full bg-slate-100 text-slate-600 rounded-xl font-black text-xs hover:bg-slate-200 transition-all",children:"  "})]})]})]})}),s.jsxs("div",{className:"lg:col-span-8 flex flex-col h-full overflow-hidden",children:[s.jsx("div",{className:"bg-white rounded-t-[2rem] border-b border-slate-100 p-6 flex justify-between items-center z-10 sticky top-0 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600",children:s.jsx(gx,{size:20})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Registered Users"}),s.jsxs("p",{className:"font-black text-slate-700",children:[" ",l.length," "]})]})]})}),s.jsx("div",{className:"flex-1 bg-white rounded-b-[2rem] shadow-xl shadow-slate-200/50 border border-t-0 border-slate-200 overflow-hidden ring-1 ring-slate-900/5 flex flex-col",children:s.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{className:"sticky top-0 z-10 bg-slate-50/95 backdrop-blur-md border-b border-slate-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center w-[10%]",children:"No."}),s.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest w-[30%]",children:" ID"}),s.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest w-[15%]",children:""}),s.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest w-[15%]",children:"UI "}),s.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center w-[20%]",children:""}),s.jsx("th",{className:"px-4 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center w-[15%]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:l.map((I,R)=>s.jsxs("tr",{className:`group transition-all ${u?.id===I.id?"bg-indigo-50/60":"hover:bg-slate-50/50"}`,children:[s.jsx("td",{className:"px-4 py-4 text-center text-xs font-black text-slate-300 group-hover:text-slate-400",children:R+1}),s.jsxs("td",{className:"px-4 py-4 font-black text-sm text-slate-700 flex items-center gap-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 ${I.role==="admin"?"bg-amber-50 text-amber-500":"bg-slate-50 text-slate-400"}`,children:I.role==="admin"?s.jsx(o2,{size:16}):s.jsx(gx,{size:16})}),s.jsx("span",{className:"truncate",children:I.username}),I.username==="admin"&&s.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-500 px-1.5 py-0.5 rounded font-black uppercase whitespace-nowrap",children:"System"})]}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("span",{className:`px-3 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest border whitespace-nowrap
                                                        ${I.role==="admin"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100"}
                                                    `,children:I.role==="admin"?"":" "})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("span",{className:`px-2 py-1 rounded-md text-[8px] font-black uppercase tracking-tight border
                                                        ${I.ui_mode==="lite"?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-indigo-50 text-indigo-600 border-indigo-100"}
                                                    `,children:I.ui_mode==="lite"?"LITE":"PRO"})}),s.jsx("td",{className:"px-4 py-4 text-center text-xs font-bold text-slate-400 tabular-nums whitespace-nowrap",children:I.created_at?I.created_at.substring(0,10):"-"}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("button",{onClick:()=>j(I),"aria-label":"",className:`w-10 h-10 rounded-xl transition-all shadow-sm flex items-center justify-center
                                                                ${u?.id===I.id?"bg-indigo-600 text-white shadow-indigo-300":"bg-slate-100 text-slate-500 hover:bg-indigo-50 hover:text-indigo-600"}
                                                            `,children:s.jsx("span",{className:"material-symbols-rounded text-[20px]",children:"edit"})}),s.jsx("button",{onClick:()=>E(I),disabled:I.username==="admin","aria-label":"",className:`w-10 h-10 rounded-xl transition-all shadow-sm flex items-center justify-center
                                                                ${I.username==="admin"?"bg-slate-50/50 text-slate-200 cursor-not-allowed":"bg-slate-100 text-slate-500 hover:bg-rose-50 hover:text-rose-600"}
                                                            `,children:s.jsx("span",{className:"material-symbols-rounded text-[20px]",children:"delete"})})]})})]},I.id))})]})})})]})]})})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[i?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Ii,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:i?"  ...":"  ..."})]})})},WDe=()=>{const a=an(),{showAlert:e}=wa(),{isAuthorized:t,checkAdmin:r,isVerifying:n}=ps(),[i,l]=F.useState(!1),[o,c]=F.useState({company_name:"",representative_name:"",phone_number:"",mobile_number:"",business_reg_number:"",registration_date:"",address:"",business_type:"",item:"",memo:"",certification_info:{gap:"",haccp:"",organic:""}}),d=or.useRef(!1);F.useEffect(()=>{if(d.current)return;d.current=!0,(async()=>await r()||a("/"))()},[]),F.useEffect(()=>{t&&(async()=>{try{const f=await ht("get_company_info");f&&c({company_name:f.company_name||"",representative_name:f.representative_name||"",phone_number:f.phone_number||"",mobile_number:f.mobile_number||"",business_reg_number:f.business_reg_number||"",registration_date:f.registration_date?f.registration_date.substring(0,10):"",address:f.address||"",business_type:f.business_type||"",item:f.item||"",memo:f.memo||"",certification_info:f.certification_info||{gap:"",haccp:"",organic:""}})}catch(f){console.error("Failed to load company info:",f)}})()},[t]);const u=async h=>{if(h.preventDefault(),!o.company_name.trim()){e(" "," .");return}l(!0);try{await ht("save_company_info",{companyName:o.company_name,representativeName:o.representative_name||null,phoneNumber:o.phone_number||null,mobileNumber:o.mobile_number||null,businessRegNumber:o.business_reg_number||null,registrationDate:o.registration_date||null,address:o.address||null,businessType:o.business_type||null,item:o.item||null,memo:o.memo||null,certificationInfo:o.certification_info}),window.dispatchEvent(new Event("company-info-changed")),await e(" ","  .")}catch(f){e(" "," : "+f)}finally{l(!1)}};return t?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative text-left",children:[s.jsx("div",{id:"local-modal-root",className:"absolute inset-0 z-[9999] pointer-events-none"}),s.jsx("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 py-6 overflow-auto custom-scrollbar",children:s.jsx("form",{onSubmit:u,className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 transition-all",children:[s.jsxs("div",{className:"px-8 py-6 border-b border-slate-50 bg-slate-50/30 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"System Identity"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Management"})]})]}),s.jsxs("button",{type:"submit",disabled:i,className:"h-10 px-6 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-black text-xs flex items-center gap-2 shadow-lg shadow-indigo-200 transition-all active:scale-[0.98] disabled:opacity-50",children:[s.jsx(Yi,{size:16})," ",i?" ...":" "]})]}),s.jsxs("div",{className:"p-6 border-b border-slate-50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 text-indigo-600 flex items-center justify-center",children:s.jsx(jae,{size:16})}),s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:"  "})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-left",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:[" () ",s.jsx("span",{className:"text-rose-500",children:"*"})]}),s.jsx("input",{type:"text",value:o.company_name,onChange:h=>c({...o,company_name:h.target.value}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:" "})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{type:"text",value:o.representative_name,onChange:h=>c({...o,representative_name:h.target.value}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:" "})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{type:"text",value:o.business_reg_number,onChange:h=>c({...o,business_reg_number:h.target.value}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:"000-00-00000"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"  ()"}),s.jsx("input",{type:"date",value:o.registration_date,onChange:h=>c({...o,registration_date:h.target.value}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200"})]}),s.jsxs("div",{className:"space-y-1 col-span-1 md:col-span-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsx("input",{type:"text",value:o.address,onChange:h=>c({...o,address:h.target.value}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:"  "})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{type:"text",value:o.business_type,onChange:h=>c({...o,business_type:h.target.value}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:": , "})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{type:"text",value:o.item,onChange:h=>c({...o,item:h.target.value}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:": , "})]})]})]}),s.jsxs("div",{className:"p-6 bg-slate-50/30 border-b border-slate-50 text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 text-indigo-600 flex items-center justify-center",children:s.jsx(Bre,{size:16})}),s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:" "})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsx("input",{type:"tel",value:o.phone_number,onChange:h=>c({...o,phone_number:h.target.value}),className:"w-full h-11 px-4 bg-white border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 transition-all ring-1 ring-inset ring-slate-200",placeholder:"02-000-0000"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{type:"tel",value:o.mobile_number,onChange:h=>c({...o,mobile_number:h.target.value}),className:"w-full h-11 px-4 bg-white border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 transition-all ring-1 ring-inset ring-slate-200",placeholder:"010-0000-0000"})]})]})]}),s.jsxs("div",{className:"p-6 bg-white border-b border-slate-50 text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-teal-50 text-teal-600 flex items-center justify-center",children:s.jsx(di,{size:16})}),s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:"    "})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-teal-600",children:"GAP "}),s.jsx("input",{type:"text",value:o.certification_info.gap,onChange:h=>c({...o,certification_info:{...o.certification_info,gap:h.target.value}}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-teal-500/10 transition-all ring-1 ring-inset ring-slate-200",placeholder:"GAP  "})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-teal-600",children:"HACCP "}),s.jsx("input",{type:"text",value:o.certification_info.haccp,onChange:h=>c({...o,certification_info:{...o.certification_info,haccp:h.target.value}}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-teal-500/10 transition-all ring-1 ring-inset ring-slate-200",placeholder:"HACCP  "})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-teal-600",children:"/ "}),s.jsx("input",{type:"text",value:o.certification_info.organic,onChange:h=>c({...o,certification_info:{...o.certification_info,organic:h.target.value}}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-teal-500/10 transition-all ring-1 ring-inset ring-slate-200",placeholder:" "})]})]})]}),s.jsxs("div",{className:"p-6 text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 text-indigo-600 flex items-center justify-center",children:s.jsx($A,{size:16})}),s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:" "})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"  / "}),s.jsx("textarea",{value:o.memo,onChange:h=>c({...o,memo:h.target.value}),className:"w-full p-4 bg-slate-50 border-none rounded-2xl font-bold text-sm text-slate-900 focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200 resize-none custom-scrollbar min-h-[100px]",placeholder:"     "})]})]})]})})})]}):s.jsx("div",{className:"flex h-screen items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[n?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Ii,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:n?"  ...":"  ..."})]})})},YDe=()=>{const a=an(),{showAlert:e}=wa(),{isAuthorized:t,checkAdmin:r,isVerifying:n}=ps(),[i,l]=F.useState(!1),[o,c]=F.useState({gemini:!1,sms:!1,naver:!1,naver_commerce_id:!1,naver_commerce_secret:!1,coupang_access_key:!1,sabangnet:!1,playauto:!1,courier:!1,tax:!1,weather:!1}),[d,u]=F.useState({gemini_api_key:"",sms_api_key:"",sms_sender_number:"",sms_provider:"aligo",naver_client_id:"",naver_client_secret:"",naver_commerce_id:"",naver_commerce_secret:"",coupang_access_key:"",coupang_secret_key:"",coupang_vendor_id:"",sabangnet_api_key:"",sabangnet_id:"",playauto_api_key:"",playauto_id:"",courier_provider:"sweettracker",courier_api_key:"",courier_client_id:"",tax_api_key:"",tax_client_id:"",weather_api_key:"",weather_location:"Gangneung",weather_provider:"openweathermap"}),h=or.useRef(!1);F.useEffect(()=>{if(h.current)return;h.current=!0,(async()=>await r()||a("/"))()},[]),F.useEffect(()=>{t&&(async()=>{try{const R=await ht("get_all_integrations_config");u(P=>({...P,gemini_api_key:R.gemini_api_key||"",sms_api_key:R.sms?.apiKey||"",sms_sender_number:R.sms?.senderNumber||"",sms_provider:R.sms?.provider||"aligo",naver_client_id:R.naver?.clientId||"",naver_client_secret:R.naver?.clientSecret||"",naver_commerce_id:R.mall?.naver_commerce_id||"",naver_commerce_secret:R.mall?.naver_commerce_secret||"",coupang_access_key:R.mall?.coupang_access_key||"",coupang_secret_key:R.mall?.coupang_secret_key||"",coupang_vendor_id:R.mall?.coupang_vendor_id||"",sabangnet_api_key:R.mall?.sabangnet_api_key||"",sabangnet_id:R.mall?.sabangnet_id||"",playauto_api_key:R.mall?.playauto_api_key||"",playauto_id:R.mall?.playauto_id||"",courier_provider:R.courier?.provider||"sweettracker",courier_api_key:R.courier?.api_key||"",courier_client_id:R.courier?.client_id||"",tax_api_key:R.tax?.api_key||"",tax_client_id:R.tax?.client_id||"",weather_api_key:R.weather?.api_key||"",weather_location:R.weather?.location||"Gangneung",weather_provider:R.weather?.provider||"openweathermap"}))}catch(R){console.error("Failed to load configs:",R)}})()},[t]);const f=async()=>{l(!0);try{await ht("save_gemini_api_key",{key:d.gemini_api_key}),await e(" ","Gemini API  .")}catch(I){e(" ",I)}finally{l(!1)}},p=async()=>{if(!d.gemini_api_key){e(""," API   .");return}l(!0);try{const I=await Co(e,"test_gemini_connection",{key:d.gemini_api_key});I==="OK"?e("","Gemini AI  !   ."):e("",`: ${I}`)}catch(I){console.error(I),I.message?.includes("AI_QUOTA_EXCEEDED")||e(" ",` : ${I}`)}finally{l(!1)}},g=async()=>{l(!0);try{await ht("save_sms_config",{apiKey:d.sms_api_key,senderNumber:d.sms_sender_number,provider:d.sms_provider}),await e(" ","SMS  .")}catch(I){e(" ",I)}finally{l(!1)}},b=async()=>{l(!0);try{await ht("save_naver_keys",{clientId:d.naver_client_id,clientSecret:d.naver_client_secret}),await e(" ","Naver API  .")}catch(I){e(" ",I)}finally{l(!1)}},w=async()=>{l(!0);try{await ht("save_mall_keys",{config:{naver_commerce_id:d.naver_commerce_id,naver_commerce_secret:d.naver_commerce_secret,coupang_access_key:d.coupang_access_key,coupang_secret_key:d.coupang_secret_key,coupang_vendor_id:d.coupang_vendor_id,sabangnet_api_key:d.sabangnet_api_key,sabangnet_id:d.sabangnet_id,playauto_api_key:d.playauto_api_key,playauto_id:d.playauto_id}}),await e(" ","   .")}catch(I){e(" ",I)}finally{l(!1)}},j=async()=>{l(!0);try{await ht("save_courier_config",{config:{provider:d.courier_provider,api_key:d.courier_api_key,client_id:d.courier_client_id}}),await e(" ","   .")}catch(I){e(" ",I)}finally{l(!1)}},k=async()=>{l(!0);try{await ht("save_tax_filing_config",{config:{provider:d.tax_provider,api_key:d.tax_api_key,client_id:d.tax_client_id}}),await e(" "," API  .")}catch(I){e(" ",I)}finally{l(!1)}},T=async()=>{l(!0);try{await ht("save_weather_config",{api_key:d.weather_api_key,location:d.weather_location,provider:d.weather_provider}),await e(" ","   .")}catch(I){e(" ",I)}finally{l(!1)}},E=I=>{c(R=>({...R,[I]:!R[I]}))};return t?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative",children:[s.jsx("div",{id:"local-modal-root",className:"absolute inset-0 z-[9999] pointer-events-none"}),s.jsx("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pb-8 overflow-auto custom-scrollbar",children:s.jsxs("div",{className:"max-w-4xl mx-auto py-8 space-y-6",children:[s.jsxs("div",{className:"mb-2 px-4 text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-12 h-1.5 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[10px] font-black tracking-[0.25em] text-indigo-600 uppercase",children:"Integrations"})]}),s.jsxs("h1",{className:"text-4xl font-black text-slate-800 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-2 text-2xl tracking-normal",children:"API & Service Node"})]}),s.jsx("p",{className:"mt-2 text-slate-400 font-medium text-sm",children:"  ,          ."})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[s.jsx("div",{className:"bg-white rounded-[2.5rem] shadow-2xl shadow-slate-200/40 border border-slate-100 overflow-hidden group hover:border-indigo-200 transition-all duration-500",children:s.jsxs("div",{className:"p-8 lg:p-10",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center shadow-inner group-hover:scale-110 transition-transform duration-500",children:s.jsx(WC,{size:28,strokeWidth:2.5})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-xl font-black text-slate-800 tracking-tight",children:"Google Gemini AI"}),d.gemini_api_key?s.jsx("span",{className:"px-2 py-0.5 rounded-md bg-emerald-50 text-emerald-600 text-[9px] font-black uppercase tracking-wider border border-emerald-100",children:"Set"}):s.jsx("span",{className:"px-2 py-0.5 rounded-md bg-slate-50 text-slate-400 text-[9px] font-black uppercase tracking-wider border border-slate-100",children:"Empty"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"text-[12px] font-bold text-slate-400",children:"     AI "}),s.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-200"}),s.jsxs("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-indigo-500 hover:text-indigo-700 text-[11px] font-black flex items-center gap-1 transition-colors",children:["API   ",s.jsx(Df,{size:10})]})]})]})]}),s.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[s.jsxs("button",{onClick:p,disabled:i,className:"flex-1 md:flex-none h-11 px-6 bg-white border border-indigo-100 text-indigo-600 rounded-2xl font-black text-xs flex items-center justify-center gap-2 hover:bg-indigo-50/50 hover:border-indigo-200 transition-all active:scale-[0.97]",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"check_circle"}),"  "]}),s.jsxs("button",{onClick:f,disabled:i,className:"flex-1 md:flex-none h-11 px-6 bg-slate-900 border border-slate-900 text-white rounded-2xl font-black text-xs flex items-center justify-center gap-2 shadow-lg shadow-slate-200 hover:bg-slate-800 transition-all active:scale-[0.97]",children:[s.jsx(Yi,{size:16})," "]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Gemini Project API Key"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:o.gemini?"text":"password",value:d.gemini_api_key,onChange:I=>u({...d,gemini_api_key:I.target.value}),className:"w-full h-14 px-6 pr-14 bg-slate-50/50 border border-slate-100 rounded-[1.25rem] font-bold text-[15px] focus:ring-4 focus:ring-indigo-500/5 focus:bg-white focus:border-indigo-200 transition-all",placeholder:"AI     "}),s.jsx("button",{type:"button",onClick:()=>E("gemini"),className:"absolute right-5 top-1/2 -translate-y-1/2 text-slate-300 hover:text-slate-500 transition-colors",children:o.gemini?s.jsx(Au,{size:20}):s.jsx(cc,{size:20})})]}),s.jsx("p",{className:"ml-1 text-[11px] text-slate-400 font-medium",children:"        ."})]})]})}),s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 p-8 text-left transition-all",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-50 text-orange-600 flex items-center justify-center",children:s.jsx(jv,{size:20})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:"SMS & Messaging"}),s.jsxs("a",{href:"https://aligo.in/",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-orange-50 text-orange-600 text-[10px] font-black hover:bg-orange-100 transition-colors",children:[s.jsx(Df,{size:10}),"  "]})]}),s.jsx("p",{className:"text-[11px] font-bold text-slate-400",children:"     "})]})]}),s.jsxs("button",{onClick:g,disabled:i,className:"h-10 px-5 bg-orange-600 hover:bg-orange-500 text-white rounded-xl font-black text-xs flex items-center gap-2 shadow-lg shadow-orange-100 transition-all active:scale-[0.95]",children:[s.jsx(Yi,{size:14})," "]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:"SMS API "}),s.jsxs("div",{className:"relative group",children:[s.jsx("input",{type:o.sms?"text":"password",value:d.sms_api_key,onChange:I=>u({...d,sms_api_key:I.target.value}),className:"w-full h-12 px-5 pr-12 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-orange-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200"}),s.jsx("button",{type:"button",onClick:()=>E("sms"),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 cursor-pointer",children:o.sms?s.jsx(Au,{size:16}):s.jsx(cc,{size:16})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:"  (Sender Number)"}),s.jsx("div",{className:"relative group",children:s.jsx("input",{type:"tel",value:d.sms_sender_number,onChange:I=>u({...d,sms_sender_number:I.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-orange-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:"010-0000-0000"})})]}),s.jsxs("div",{className:"space-y-3 col-span-1 md:col-span-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"  "}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:["aligo","coolsms","solapi"].map(I=>s.jsx("button",{type:"button",onClick:()=>u({...d,sms_provider:I}),className:`h-12 rounded-xl border-2 font-black text-[11px] capitalize transition-all
                                                ${d.sms_provider===I?"bg-orange-50 border-orange-500 text-orange-600 shadow-md transform -translate-y-0.5":"bg-white border-slate-100 text-slate-400 hover:border-slate-200"}
                                            `,children:I},I))})]})]})]}),s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 p-8 text-left transition-all",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-50 text-green-600 flex items-center justify-center",children:s.jsx(qA,{size:20})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:"Naver Search & Trends"}),s.jsxs("a",{href:"https://developers.naver.com/apps/",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-green-50 text-green-600 text-[10px] font-black hover:bg-green-100 transition-colors",children:[s.jsx(Df,{size:10}),"  "]})]}),s.jsx("p",{className:"text-[11px] font-bold text-slate-400",children:" /     "})]})]}),s.jsxs("button",{onClick:b,disabled:i,className:"h-10 px-5 bg-green-600 hover:bg-green-500 text-white rounded-xl font-black text-xs flex items-center gap-2 shadow-lg shadow-green-100 transition-all active:scale-[0.95]",children:[s.jsx(Yi,{size:14})," "]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:"  ID"}),s.jsx("input",{type:"text",value:d.naver_client_id,onChange:I=>u({...d,naver_client_id:I.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-green-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200"})]}),s.jsxs("div",{className:"space-y-3 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"  Secret"}),s.jsxs("div",{className:"relative group",children:[s.jsx("input",{type:o.naver?"text":"password",value:d.naver_client_secret,onChange:I=>u({...d,naver_client_secret:I.target.value}),className:"w-full h-12 px-5 pr-12 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-green-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:"Secret "}),s.jsx("button",{type:"button",onClick:()=>E("naver"),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 cursor-pointer",children:o.naver?s.jsx(Au,{size:16}):s.jsx(cc,{size:16})})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 p-8 text-left transition-all",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-sky-50 text-sky-600 flex items-center justify-center",children:s.jsx(Kae,{size:20})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:"Weather Service (OpenWeather)"}),s.jsxs("a",{href:"https://home.openweathermap.org/api_keys",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-sky-50 text-sky-600 text-[10px] font-black hover:bg-sky-100 transition-colors",children:[s.jsx(Df,{size:10}),"  "]})]}),s.jsx("p",{className:"text-[11px] font-bold text-slate-400",children:"       "})]})]}),s.jsxs("button",{onClick:T,disabled:i,className:"h-10 px-5 bg-sky-600 hover:bg-sky-500 text-white rounded-xl font-black text-xs flex items-center gap-2 shadow-lg shadow-sky-100 transition-all active:scale-[0.95]",children:[s.jsx(Yi,{size:14})," "]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:" API "}),s.jsxs("div",{className:"relative group",children:[s.jsx("input",{type:o.weather?"text":"password",value:d.weather_api_key,onChange:I=>u({...d,weather_api_key:I.target.value}),className:"w-full h-12 px-5 pr-12 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-sky-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:"OpenWeather API Key"}),s.jsx("button",{type:"button",onClick:()=>E("weather"),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 cursor-pointer",children:o.weather?s.jsx(Au,{size:16}):s.jsx(cc,{size:16})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:"  (  ,)"}),s.jsx("input",{type:"text",value:d.weather_location,onChange:I=>u({...d,weather_location:I.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-sky-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:": Gangneung  37.75,128.87"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 p-8 text-left transition-all",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-teal-50 text-teal-600 flex items-center justify-center",children:s.jsx(GH,{size:20})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:"E-commerce & Mall Sync"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("a",{href:"https://apicenter.commerce.naver.com/",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-teal-50 text-teal-600 text-[10px] font-black hover:bg-teal-100 transition-colors",children:" "}),s.jsx("a",{href:"https://wing.coupang.com/",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-teal-50 text-teal-600 text-[10px] font-black hover:bg-teal-100 transition-colors",children:" "})]})]}),s.jsx("p",{className:"text-[11px] font-bold text-slate-400",children:"       "})]})]}),s.jsxs("button",{onClick:w,disabled:i,className:"h-10 px-5 bg-teal-600 hover:bg-teal-500 text-white rounded-xl font-black text-xs flex items-center gap-2 shadow-lg shadow-teal-100 transition-all active:scale-[0.95]",children:[s.jsx(Yi,{size:14})," "]})]}),s.jsx("div",{className:"space-y-8",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest border-l-4 border-teal-500 pl-2",children:"Mall Integration Aggregators (Best for Multi-Channel)"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 pt-2",children:[s.jsxs("div",{className:"bg-slate-50/50 p-6 rounded-3xl border border-slate-100 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-teal-500 text-white flex items-center justify-center font-black text-xs",children:"S"}),s.jsx("h4",{className:"font-black text-slate-700",children:" (Sabangnet)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-500 ml-1",children:" (API Key)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:o.sabangnet?"text":"password",value:d.sabangnet_api_key,onChange:I=>u({...d,sabangnet_api_key:I.target.value}),className:"w-full h-11 px-4 pr-10 bg-white border border-slate-200 rounded-xl font-bold text-sm focus:ring-4 focus:ring-teal-500/10 transition-all",placeholder:"Sabangnet API Key"}),s.jsx("button",{onClick:()=>E("sabangnet"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:o.sabangnet?s.jsx(Au,{size:14}):s.jsx(cc,{size:14})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-500 ml-1",children:"  (Company ID)"}),s.jsx("input",{type:"text",value:d.sabangnet_id,onChange:I=>u({...d,sabangnet_id:I.target.value}),className:"w-full h-11 px-4 bg-white border border-slate-200 rounded-xl font-bold text-sm focus:ring-4 focus:ring-teal-500/10 transition-all",placeholder:"Company ID"})]})]}),s.jsxs("div",{className:"bg-slate-50/50 p-6 rounded-3xl border border-slate-100 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-500 text-white flex items-center justify-center font-black text-xs",children:"P"}),s.jsx("h4",{className:"font-black text-slate-700",children:" (PlayAuto)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-500 ml-1",children:"   (API Key)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:o.playauto?"text":"password",value:d.playauto_api_key,onChange:I=>u({...d,playauto_api_key:I.target.value}),className:"w-full h-11 px-4 pr-10 bg-white border border-slate-200 rounded-xl font-bold text-sm focus:ring-4 focus:ring-teal-500/10 transition-all",placeholder:"PlayAuto API Key"}),s.jsx("button",{onClick:()=>E("playauto"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:o.playauto?s.jsx(Au,{size:14}):s.jsx(cc,{size:14})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-500 ml-1",children:"  (Member ID)"}),s.jsx("input",{type:"text",value:d.playauto_id,onChange:I=>u({...d,playauto_id:I.target.value}),className:"w-full h-11 px-4 bg-white border border-slate-200 rounded-xl font-bold text-sm focus:ring-4 focus:ring-teal-500/10 transition-all",placeholder:"Member ID"})]})]})]}),s.jsxs("div",{className:"pt-6 border-t border-slate-100",children:[s.jsx("h3",{className:"text-[10px] font-black text-slate-300 uppercase tracking-[0.2em] mb-4",children:"Advanced: Direct Mall Connectivity"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 opacity-60 hover:opacity-100 transition-opacity",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-[11px] font-black text-slate-400 pl-1",children:"Naver SmartStore"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("input",{type:"text",value:d.naver_commerce_id,onChange:I=>u({...d,naver_commerce_id:I.target.value}),className:"w-full h-10 px-4 bg-slate-50 border border-slate-200 rounded-xl font-bold text-xs",placeholder:"Client ID"}),s.jsx("input",{type:"password",value:d.naver_commerce_secret,onChange:I=>u({...d,naver_commerce_secret:I.target.value}),className:"w-full h-10 px-4 bg-slate-50 border border-slate-200 rounded-xl font-bold text-xs",placeholder:"Client Secret"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-[11px] font-black text-slate-400 pl-1",children:"Coupang Marketplace"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("input",{type:"text",value:d.coupang_access_key,onChange:I=>u({...d,coupang_access_key:I.target.value}),className:"w-full h-10 px-4 bg-slate-50 border border-slate-200 rounded-xl font-bold text-xs",placeholder:"Access Key"}),s.jsx("input",{type:"password",value:d.coupang_secret_key,onChange:I=>u({...d,coupang_secret_key:I.target.value}),className:"w-full h-10 px-4 bg-slate-50 border border-slate-200 rounded-xl font-bold text-xs",placeholder:"Secret Key"})]})]})]})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 p-8 text-left transition-all",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 text-blue-600 flex items-center justify-center",children:s.jsx(_ne,{size:20})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:"Courier Service Integration"}),s.jsxs("a",{href:"https://www.sweettracker.co.kr/",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-blue-50 text-blue-600 text-[10px] font-black hover:bg-blue-100 transition-colors",children:[s.jsx(Df,{size:10}),"  "]})]}),s.jsx("p",{className:"text-[11px] font-bold text-slate-400",children:"        "})]})]}),s.jsxs("button",{onClick:j,disabled:i,className:"h-10 px-5 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-black text-xs flex items-center gap-2 shadow-lg shadow-blue-100 transition-all active:scale-[0.95]",children:[s.jsx(Yi,{size:14})," "]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3 col-span-1 md:col-span-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"  "}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:["sweettracker","smartparcel","delivery"].map(I=>s.jsx("button",{type:"button",onClick:()=>u({...d,courier_provider:I}),className:`h-12 rounded-xl border-2 font-black text-[11px] capitalize transition-all
                                                ${d.courier_provider===I?"bg-blue-50 border-blue-500 text-blue-600 shadow-md transform -translate-y-0.5":"bg-white border-slate-100 text-slate-400 hover:border-slate-200"}
                                            `,children:I==="sweettracker"?"":I==="smartparcel"?"":" API"},I))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:"API  (API Key)"}),s.jsxs("div",{className:"relative group",children:[s.jsx("input",{type:o.courier?"text":"password",value:d.courier_api_key,onChange:I=>u({...d,courier_api_key:I.target.value}),className:"w-full h-12 px-5 pr-12 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-blue-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200"}),s.jsx("button",{type:"button",onClick:()=>E("courier"),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 cursor-pointer",children:o.courier?s.jsx(Au,{size:16}):s.jsx(cc,{size:16})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:" ID / "}),s.jsx("input",{type:"text",value:d.courier_client_id,onChange:I=>u({...d,courier_client_id:I.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-blue-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:"Client ID  "})]})]})]}),s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 p-8 text-left transition-all",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-violet-50 text-violet-600 flex items-center justify-center",children:s.jsx(o2,{size:20})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-lg font-black text-slate-700 tracking-tight",children:"Tax Filing API (Hometax Integration)"}),s.jsxs("a",{href:"https://www.hometax.go.kr/",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-violet-50 text-violet-600 text-[10px] font-black hover:bg-violet-100 transition-colors",children:[s.jsx(Df,{size:10}),"  "]})]}),s.jsx("p",{className:"text-[11px] font-bold text-slate-400",children:"     "})]})]}),s.jsxs("button",{onClick:k,disabled:i,className:"h-10 px-5 bg-violet-600 hover:bg-violet-500 text-white rounded-xl font-black text-xs flex items-center gap-2 shadow-lg shadow-violet-100 transition-all active:scale-[0.95]",children:[s.jsx(Yi,{size:14})," "]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3 col-span-1 md:col-span-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:"  (Tax Provider)"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{id:"sim_hometax",name:"  (Sim)"},{id:"popbill",name:" (Popbill)"},{id:"smartbill",name:" (Smart)"}].map(I=>s.jsx("button",{type:"button",onClick:()=>u({...d,tax_provider:I.id}),className:`h-12 rounded-xl border-2 font-black text-[11px] transition-all
                                                ${d.tax_provider===I.id?"bg-violet-50 border-violet-500 text-violet-600 shadow-md transform -translate-y-0.5":"bg-white border-slate-100 text-slate-400 hover:border-slate-200"}
                                            `,children:I.name},I.id))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:"API  (Secret Key)"}),s.jsxs("div",{className:"relative group",children:[s.jsx("input",{type:o.tax?"text":"password",value:d.tax_api_key,onChange:I=>u({...d,tax_api_key:I.target.value}),className:"w-full h-12 px-5 pr-12 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-violet-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:"  API Key "}),s.jsx("button",{type:"button",onClick:()=>E("tax"),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 cursor-pointer",children:o.tax?s.jsx(Au,{size:16}):s.jsx(cc,{size:16})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:" / "}),s.jsx("input",{type:"text",value:d.tax_client_id,onChange:I=>u({...d,tax_client_id:I.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm focus:ring-4 focus:ring-violet-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-200",placeholder:"   "})]})]})]})]})]})})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[n?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Ii,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:n?"  ...":"  ..."})]})})},$De=()=>{const a=an(),{isAuthorized:e,checkAdmin:t,isVerifying:r}=ps(),[n,i]=F.useState([]),[l,o]=F.useState(null),[c,d]=F.useState(!1),[u,h]=F.useState(!1),[f,p]=F.useState(!1),[g,b]=F.useState(""),[w,j]=F.useState(!1),[k,T]=F.useState({progress:0,message:"",startTime:null,currentRecord:"",elapsedSeconds:0,remainingSeconds:-1,currentTable:0,totalTables:0}),[E,I]=F.useState(null),[R,P]=F.useState(!0),[H,G]=F.useState(!1),[X,U]=F.useState(90),[te,Z]=F.useState(!1),{showAlert:J,showConfirm:B}=wa(),W=F.useRef(null);F.useEffect(()=>()=>{W.current&&clearTimeout(W.current)},[]);const $=pe=>{if(pe<0||!isFinite(pe))return" ...";const Re=Math.floor(pe/60),Te=Math.floor(pe%60);return Re>0?`${Re} ${Te}`:`${Te}`},Q=F.useRef(!1);F.useEffect(()=>{if(Q.current)return;Q.current=!0,(async()=>await t()||a("/"))()},[t,a]);const ne=F.useCallback(async()=>{if(e){d(!0);try{const[pe,Re,Te]=await Promise.all([ht("get_auto_backups"),ht("get_backup_status"),ht("get_backup_path_external")]);i(pe||[]),o(Re),b(Te||"")}catch(pe){console.error("Failed to load backup settings:",pe)}finally{d(!1)}}},[e]);F.useEffect(()=>{e&&ne()},[ne,e]);const re=async(pe=!1)=>{if(u||f)return;h(!0),I("backup"),T({progress:0,message:"   ...",startTime:Date.now(),currentRecord:"System.Initialization"}),W.current&&clearTimeout(W.current);const Re=async()=>{try{const Te=await ht("get_backup_progress");Te&&T(ke=>({...ke,progress:Number(Te.percentage?.toFixed(1)||0),message:Te.message||" ...",currentRecord:Te.message?.includes("  ")?`${(Te.processed/(1024*1024)).toFixed(1)}MB / ${(Te.total/(1024*1024)).toFixed(1)}MB`:`${Te.processed?.toLocaleString()||0} / ${(Te.total||"?")?.toLocaleString()} `,elapsedSeconds:Te.elapsed_seconds||0,remainingSeconds:Te.estimated_remaining_seconds??-1,currentTable:Te.current_table||0,totalTables:Te.total_tables||0}))}catch(Te){console.warn("Polling error:",Te)}W.current=setTimeout(Re,200)};W.current=setTimeout(Re,200);try{await ht("run_daily_custom_backup",{is_incremental:pe,use_compression:R}),W.current&&(clearTimeout(W.current),W.current=null),T(Te=>({...Te,progress:100,message:" ",currentRecord:"Success",remainingSeconds:0})),setTimeout(()=>{J(" ",`${pe?"":""}   .`),h(!1),I(null),T({progress:0,message:"",startTime:null,currentRecord:"",elapsedSeconds:0,remainingSeconds:-1,currentTable:0,totalTables:0}),ne()},800)}catch(Te){W.current&&(clearTimeout(W.current),W.current=null),h(!1),I(null),T({progress:0,message:"",startTime:null,currentRecord:"",elapsedSeconds:0,remainingSeconds:-1,currentTable:0,totalTables:0});const ke=Te.message||Te.toString();ke.includes("")||J(" ",` : ${ke}`)}},K=async pe=>{if(u||f||!await B(" ",`    ?

       .     .`))return;p(!0),I("restore"),T({progress:0,message:"   ...",startTime:Date.now(),currentRecord:"Restore.Initialize"}),W.current&&clearTimeout(W.current);const Te=async()=>{try{const ke=await ht("get_backup_progress");ke&&(ke.total>0||ke.percentage>0)&&T(Le=>({...Le,progress:Number(ke.percentage?.toFixed(1)||0),message:ke.message||" ...",currentRecord:`${(ke.processed/(1024*1024)).toFixed(1)}MB / ${(ke.total/(1024*1024)).toFixed(1)}MB`,elapsedSeconds:ke.elapsed_seconds||0,remainingSeconds:ke.estimated_remaining_seconds??-1}))}catch{}W.current=setTimeout(Te,200)};W.current=setTimeout(Te,200);try{await ht("restore_database",{path:pe}),W.current&&(clearTimeout(W.current),W.current=null),T(ke=>({...ke,progress:100,message:" ",currentRecord:"Success",remainingSeconds:0})),setTimeout(()=>{J(" ","   .     ."),setTimeout(()=>{window.location.reload()},1500)},800)}catch(ke){W.current&&(clearTimeout(W.current),W.current=null),p(!1),I(null),T({progress:0,message:"",startTime:null,currentRecord:"",elapsedSeconds:0,remainingSeconds:-1,currentTable:0,totalTables:0});const Le=ke.message||ke.toString();Le.includes("")||J(" ",`   : ${Le}`)}},ae=async()=>{j(!0);try{await ht("save_external_backup_path",{path:g}),J(" ","   .")}catch(pe){J(" ",` : ${pe.message}`)}finally{j(!1)}},ce=async()=>{if(await B(" ",`  ?
      .`)){d(!0);try{await ht("run_db_maintenance"),J(" ","   .")}catch(Re){J(" ",` : ${Re.message}`)}finally{d(!1)}}},de=async()=>{try{await ht("cancel_backup_restore"),W.current&&(clearTimeout(W.current),W.current=null),T({progress:0,message:"",startTime:null,currentRecord:"",elapsedSeconds:0,remainingSeconds:-1,currentTable:0,totalTables:0}),h(!1),p(!1),I(null),J(" ","    .")}catch(pe){J(" ",`    : ${pe.message||pe}`)}},he=async()=>{Z(!0);try{const pe=await ht("cleanup_old_backups",{retention_days:X}),Re=pe?.deleted_count||0,Te=((pe?.freed_bytes||0)/(1024*1024)).toFixed(2);G(!1),J(" ",`${Re}   . (${Te} MB )`),ne()}catch(pe){J(" ",`    : ${pe.message||pe}`)}finally{Z(!1)}};return e?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsx("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4",children:s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-amber-500 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-amber-500 uppercase",children:"System Maintenance"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["    ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Backup & Recovery"})]}),s.jsx("p",{className:"text-sm text-slate-400 mt-1 font-medium",children:"      ."})]}),s.jsxs("button",{onClick:ne,disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-600 text-xs font-black shadow-sm hover:bg-slate-50 transition-all",children:[s.jsx(yi,{size:14,className:c?"animate-spin":""}),""]})]})}),s.jsx("div",{className:"flex-1 px-6 lg:px-8 pb-8 mt-4 overflow-y-auto custom-scrollbar",children:s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"xl:col-span-1 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-200 p-6 shadow-sm overflow-hidden relative",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-amber-50 text-amber-500 flex items-center justify-center",children:s.jsx(o2,{size:24})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-black text-slate-700",children:"  "}),s.jsx("p",{className:"text-xs text-slate-400 font-medium tracking-tight",children:"   (6 )"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(mh,{size:16,className:"text-slate-400"}),s.jsx("span",{className:"text-xs font-bold text-slate-600",children:" "})]}),s.jsx("span",{className:"text-xs font-black text-slate-800",children:l?Wt(l.last_backup).format("YYYY-MM-DD HH:mm"):" "})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Eo,{size:16,className:"text-slate-400"}),s.jsx("span",{className:"text-xs font-bold text-slate-600",children:" "})]}),s.jsx("span",{className:"text-xs font-black text-indigo-600",children:" 6 "})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(mae,{size:16,className:"text-slate-400"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-bold text-slate-600",children:"Gzip "}),s.jsx("p",{className:"text-[9px] text-slate-400 mt-0.5",children:"   "})]})]}),s.jsx("button",{onClick:()=>P(!R),className:`relative w-12 h-6 rounded-full transition-all duration-300 ${R?"bg-emerald-500":"bg-slate-300"}`,"aria-label":"Gzip  ",children:s.jsx("div",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full shadow-md transition-all duration-300 ${R?"left-[26px]":"left-0.5"}`})})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsxs("button",{onClick:()=>re(!1),disabled:u,className:"flex-1 py-4 bg-slate-900 text-white rounded-2xl font-black text-xs flex flex-col items-center justify-center gap-2 shadow-lg shadow-slate-200 hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50",children:[u?s.jsx(yi,{size:18,className:"animate-spin"}):s.jsx(wd,{size:18})," "]}),s.jsxs("button",{onClick:()=>re(!0),disabled:u,className:"flex-1 py-4 bg-white border-2 border-slate-900 text-slate-900 rounded-2xl font-black text-xs flex flex-col items-center justify-center gap-2 shadow-lg shadow-slate-200 hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50",children:[u?s.jsx(yi,{size:18,className:"animate-spin"}):s.jsx(mh,{size:18})," "]})]})]}),s.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-200 p-6 shadow-sm",children:[s.jsxs("h3",{className:"text-sm font-black text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[s.jsx(xre,{size:14}),"  "]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-2 block ml-1",children:"   (Network/HDD)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:g,onChange:pe=>b(pe.target.value),placeholder:": D:\\MyceliumBackups",className:"flex-1 h-12 bg-slate-50 border border-slate-200 rounded-xl px-4 text-xs font-bold text-slate-600 focus:bg-white focus:border-amber-500 transition-all"}),s.jsx("button",{onClick:ae,disabled:w,className:"w-12 h-12 bg-amber-50 text-amber-600 rounded-xl flex items-center justify-center hover:bg-amber-100 transition-all disabled:opacity-50",children:s.jsx(Yi,{size:18})})]}),s.jsx("p",{className:"text-[9px] text-slate-400 mt-2 ml-1 leading-relaxed",children:"*   USB         ."})]})})]}),s.jsxs("div",{className:"bg-rose-50/50 rounded-[2rem] border border-rose-100 p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4 text-rose-600",children:[s.jsx(H_,{size:18}),s.jsx("h3",{className:"text-sm font-black uppercase tracking-tight",children:"   "})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:ce,className:"w-full h-11 bg-white border border-rose-100 text-rose-600 text-xs font-black rounded-xl hover:bg-rose-50 transition-all flex items-center justify-center gap-2",children:[s.jsx(wd,{size:14}),"  (VACUUM)"]}),s.jsxs("button",{onClick:()=>G(!0),className:"w-full h-11 bg-white border border-rose-100 text-rose-600 text-xs font-black rounded-xl hover:bg-rose-50 transition-all flex items-center justify-center gap-2",children:[s.jsx(Cs,{size:14}),"    (Retention)"]})]})]})]}),s.jsxs("div",{className:"xl:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-[2.5rem] border border-slate-200 shadow-xl shadow-slate-200/40 overflow-hidden flex flex-col min-h-[500px]",children:[s.jsxs("div",{className:"px-8 py-6 border-b border-slate-50 flex justify-between items-center",children:[s.jsxs("h3",{className:"text-xl font-black text-slate-800 flex items-center gap-3",children:[s.jsx(wd,{size:24,className:"text-indigo-500"}),"  ",s.jsxs("span",{className:"text-slate-300 font-light text-sm ml-1",children:[n.length," Files"]})]}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"text",placeholder:" ...",className:"px-4 py-2 bg-slate-100 border-none rounded-xl text-xs font-bold text-slate-600 w-48 focus:ring-2 focus:ring-indigo-500/20 transition-all"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest border-b border-slate-50",children:[s.jsx("th",{className:"px-6 py-4",children:" / "}),s.jsx("th",{className:"px-6 py-4 text-center",children:""}),s.jsx("th",{className:"px-6 py-4 text-center",children:""}),s.jsx("th",{className:"px-6 py-4 text-center",children:" "}),s.jsx("th",{className:"px-4 py-4 w-32 text-center",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:n.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"py-20 text-center",children:s.jsx("p",{className:"text-slate-300 font-bold italic",children:"   ."})})}):n.map((pe,Re)=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-500 flex items-center justify-center",children:s.jsx(wd,{size:18})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-black text-slate-700",children:pe.filename}),s.jsx("div",{className:"text-[10px] text-slate-400 font-mono",children:pe.path})]})]})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:"px-2 py-0.5 rounded-lg bg-emerald-50 text-emerald-600 border border-emerald-100 text-[9px] font-black uppercase tracking-tighter",children:pe.is_auto?"Auto":"Manual"})}),s.jsx("td",{className:"px-6 py-4 text-center text-xs font-mono text-slate-500 font-bold",children:pe.size?(pe.size/(1024*1024)).toFixed(2)+" MB":"-"}),s.jsxs("td",{className:"px-6 py-4 text-center",children:[s.jsx("div",{className:"text-xs font-black text-slate-500 font-mono",children:Wt(pe.timestamp*1e3).format("HH:mm:ss")}),s.jsx("div",{className:"text-[9px] text-slate-300 font-bold",children:Wt(pe.timestamp*1e3).format("YYYY-MM-DD")})]}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("button",{onClick:()=>K(pe.path),className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-[10px] font-black text-slate-600 hover:bg-slate-900 hover:text-white hover:border-slate-900 transition-all whitespace-nowrap",children:""})})]},Re))})]})})]}),s.jsxs("div",{className:"bg-indigo-50/50 rounded-3xl p-6 border border-indigo-100 flex gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-2xl bg-white flex items-center justify-center text-indigo-500 shrink-0 shadow-sm border border-indigo-100",children:s.jsx(di,{size:20})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-black text-indigo-900 mb-1",children:"   "}),s.jsx("p",{className:"text-xs text-indigo-700 leading-relaxed font-medium",children:"       'daily_backups' .     **  **         ."})]})]})]})]})}),(u||f)&&s.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center animate-in fade-in duration-300",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/80 backdrop-blur-md"}),s.jsxs("div",{className:"relative w-full max-w-xl bg-white p-12 rounded-[3.5rem] shadow-[0_35px_60px_-15px_rgba(0,0,0,0.3)] flex flex-col items-center gap-10 border-2 border-slate-100 animate-in zoom-in-95 duration-500",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-32 h-32 border-8 border-slate-50 rounded-full"}),s.jsx("div",{className:`absolute top-0 left-0 w-32 h-32 border-8 ${E==="backup"?"border-indigo-600":"border-amber-600"} border-t-transparent rounded-full animate-spin`,style:{animationDuration:"0.8s"}}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:E==="backup"?s.jsx(wd,{className:"text-indigo-600 animate-bounce",size:48}):s.jsx(yi,{className:"text-amber-600 animate-spin",size:48,style:{animationDuration:"3s"}})})]}),s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx("h3",{className:"text-3xl font-black text-slate-800 tracking-tight",children:E==="backup"?"   ":"  "}),s.jsx("p",{className:"text-sm font-bold text-slate-400 max-w-[320px] mx-auto leading-relaxed",children:E==="backup"?"    .   .":"    .    ."})]}),s.jsxs("div",{className:"w-full space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-end px-1",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:k.message}),s.jsx("p",{className:"text-xs font-mono font-bold text-indigo-500",children:k.currentRecord})]}),s.jsx("div",{className:"text-right",children:s.jsxs("span",{className:"text-2xl font-black text-slate-800 tabular-nums",children:[k.progress.toFixed(1),"%"]})})]}),s.jsx("div",{className:"w-full h-4 bg-slate-100 rounded-full overflow-hidden border border-slate-200",children:s.jsx("div",{className:`h-full ${E==="backup"?"bg-indigo-600":"bg-amber-600"} transition-all duration-150 ease-out relative`,style:{width:`${k.progress}%`},children:s.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-white/30 to-transparent",style:{backgroundSize:"200% 100%"}})})}),s.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-widest text-slate-400 px-1",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{children:[": ",$(k.elapsedSeconds)]}),s.jsxs("span",{children:[" : ",$(k.remainingSeconds)]})]}),k.totalTables>0&&E==="backup"?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(wd,{size:10,className:"text-indigo-400"})," ",k.currentTable,"/",k.totalTables]}):s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(o2,{size:10,className:"text-emerald-500"}),"Security Verified"]})]})]}),s.jsxs("button",{onClick:de,className:"flex items-center gap-3 px-8 py-4 bg-rose-50 border-2 border-rose-200 text-rose-600 rounded-2xl font-black text-sm hover:bg-rose-100 hover:border-rose-300 active:scale-95 transition-all",children:[s.jsx(Wae,{size:20})," "]}),s.jsxs("div",{className:"flex items-center gap-3 px-6 py-3 bg-slate-50 rounded-2xl border border-slate-100",children:[s.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-ping"}),s.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-tight",children:"System is processing records..."})]})]})]}),H&&s.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center animate-in fade-in duration-200",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>G(!1)}),s.jsxs("div",{className:"relative bg-white rounded-[2.5rem] p-8 max-w-md w-full mx-4 shadow-2xl border border-slate-100 animate-in zoom-in-95 duration-300",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-rose-50 text-rose-500 flex items-center justify-center",children:s.jsx(Cs,{size:24})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-black text-slate-800",children:"   "}),s.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"     "})]})]}),s.jsxs("div",{className:"space-y-3 mb-8",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block ml-1",children:"  "}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:[30,60,90,180].map(pe=>s.jsxs("button",{onClick:()=>U(pe),className:`py-3 rounded-xl text-xs font-black transition-all border-2 ${X===pe?"bg-rose-50 border-rose-500 text-rose-600":"bg-slate-50 border-slate-100 text-slate-500 hover:bg-slate-100"}`,children:[pe," "]},pe))}),s.jsxs("p",{className:"text-[10px] text-rose-400 font-bold mt-2 ml-1",children:[" ",X,"   /    ."]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>G(!1),className:"flex-1 py-3 bg-slate-100 text-slate-600 rounded-xl font-black text-xs hover:bg-slate-200 transition-all",children:""}),s.jsxs("button",{onClick:he,disabled:te,className:"flex-1 py-3 bg-rose-500 text-white rounded-xl font-black text-xs hover:bg-rose-600 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:[te?s.jsx(yi,{size:14,className:"animate-spin"}):s.jsx(Cs,{size:14}),te?" ...":" "]})]})]})]})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[r?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Ii,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:r?"  ...":"  ..."})]})})},FV=[{id:"mushroom",name:"  (/)",description:",     .",details:[" : (1kg/2kg), , ",": (1kg/2kg), , ","BOM:  1kg   ",": 1~3 , , "],icon:WH,color:"indigo",active:!0},{id:"strawberry",name:" ",description:" /   .",details:[" : (/),  ",": , ,  ","BOM:  ,  ",": , , "],icon:$8,color:"rose",active:!0},{id:"potato",name:"  ()",description:",       .",details:[" : (/), ",": (10kg/5kg), ","BOM:     ",":  , , "],icon:mne,color:"amber",active:!0},{id:"shinemuscat",name:" ",description:"()      .",details:[" : (/), ",":  (2kg), , ","BOM:  2kg  ",": , , "],icon:$8,color:"lime",active:!0},{id:"apple",name:"  ()",description:"()       .",details:[" : (/), ",":  (5kg), ,  ","BOM:  5kg   ",":  ,  , "],icon:W8,color:"red",active:!0},{id:"tomato",name:" ",description:"/   .",details:[" : , ",": , ,  ","BOM:   ",": , , "],icon:W8,color:"orange",active:!0}],qDe=({isOpen:a,onClose:e,onConfirm:t,preset:r,data:n,loading:i})=>a?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:e}),s.jsxs("div",{className:"relative w-full max-w-4xl max-h-[90vh] bg-white rounded-[2.5rem] shadow-2xl shadow-indigo-500/10 flex flex-col overflow-hidden animate-in zoom-in-95 duration-300 border border-slate-100",children:[s.jsxs("div",{className:"p-8 pb-4 shrink-0 flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl bg-${r.color}-50 flex items-center justify-center text-${r.color}-600`,children:s.jsx(r.icon,{size:28})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:`w-4 h-1 bg-${r.color}-500 rounded-full`}),s.jsx("span",{className:"text-[10px] font-black tracking-widest text-slate-400 uppercase",children:"Preset Preview"})]}),s.jsxs("h2",{className:"text-2xl font-black text-slate-700 tracking-tight",children:[r.name,"  "]})]})]}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-xl transition-colors text-slate-400",children:s.jsx(Ri,{size:24})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-8 pb-8 custom-scrollbar",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4 px-1",children:[s.jsx(_c,{size:18,className:"text-indigo-500"}),s.jsxs("h3",{className:"font-black text-slate-700",children:["   (",n.products.length,")"]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:n.products.map((l,o)=>s.jsxs("div",{className:"bg-slate-50 border border-slate-100 p-3 rounded-2xl flex items-center justify-between group hover:bg-white hover:border-indigo-100 transition-all",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-black text-slate-700",children:l.name}),s.jsxs("div",{className:"text-[10px] font-bold text-slate-400",children:[l.specification||"-"," | ",l.category||"-"]})]}),s.jsxs("div",{className:"text-xs font-black text-indigo-600",children:[l.price.toLocaleString(),""]})]},o))})]}),s.jsxs("section",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4 px-1",children:[s.jsx(F_,{size:18,className:"text-rose-500"}),s.jsxs("h3",{className:"font-black text-slate-700",children:["/  (",n.spaces.length,")"]})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.spaces.map((l,o)=>s.jsxs("div",{className:"bg-slate-50 border border-slate-100 px-3 py-1.5 rounded-xl text-[10px] font-black text-slate-500",children:[l.name," ",s.jsxs("span",{className:"text-[8px] opacity-60 ml-1",children:["(",l.space_type,")"]})]},o))})]})]}),s.jsx("div",{className:"space-y-6",children:s.jsxs("section",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4 px-1",children:[s.jsx(Mae,{size:18,className:"text-amber-500"}),s.jsx("h3",{className:"font-black text-slate-700",children:"  (BOM)"})]}),s.jsx("div",{className:"space-y-3",children:n.boms.map((l,o)=>s.jsxs("div",{className:"bg-slate-900 text-white p-4 rounded-3xl relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:scale-110 transition-transform",children:s.jsx(qC,{size:40})}),s.jsx("div",{className:"text-[10px] font-black text-indigo-400 mb-1 uppercase tracking-wider",children:"Production BOM"}),s.jsx("div",{className:"font-black text-lg mb-3 tracking-tight",children:l.product_name}),s.jsx("div",{className:"space-y-1.5",children:l.materials.map((c,d)=>s.jsxs("div",{className:"flex items-center justify-between text-xs font-bold text-slate-400",children:[s.jsxs("span",{children:[" ",c.material_name]}),s.jsxs("span",{className:"text-white",children:["x",c.ratio]})]},d))})]},o))})]})})]})}),s.jsxs("div",{className:"p-8 bg-slate-50 border-t border-slate-100 flex items-center justify-between shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[s.jsx(H_,{size:16}),s.jsx("span",{className:"text-xs font-bold",children:"  /   ."})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:e,className:"px-6 h-12 rounded-xl font-black text-sm text-slate-400 hover:bg-slate-200 transition-colors",children:""}),s.jsxs("button",{onClick:t,disabled:i,className:`
                                h-12 px-8 rounded-xl font-black text-sm flex items-center gap-2 shadow-lg transition-all active:scale-95
                                ${i?"bg-slate-300":`bg-${r.color}-600 hover:bg-${r.color}-500 text-white shadow-${r.color}-200`}
                            `,children:[i?s.jsx(Nv,{size:18,className:"animate-spin"}):s.jsx(wd,{size:18}),"  "]})]})]})]})]}):null,XDe=({isOpen:a,onClose:e,onSave:t,loading:r})=>{const[n,i]=F.useState(""),[l,o]=F.useState("");return a?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:e}),s.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-[2rem] shadow-2xl p-8 animate-in zoom-in-95 duration-300",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:s.jsx(Yi,{size:24})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-black text-slate-700",children:"   "}),s.jsx("p",{className:"text-xs font-bold text-slate-400",children:"    ."})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:" "}),s.jsx("input",{type:"text",value:n,onChange:c=>i(c.target.value),placeholder:"    A",className:"w-full h-12 px-4 bg-slate-50 border border-slate-100 rounded-xl text-sm font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:" ()"}),s.jsx("textarea",{value:l,onChange:c=>o(c.target.value),placeholder:" 5, BOM 3 ",className:"w-full h-24 px-4 py-3 bg-slate-50 border border-slate-100 rounded-xl text-sm font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all resize-none"})]})]}),s.jsxs("div",{className:"flex gap-3 mt-8",children:[s.jsx("button",{onClick:e,className:"flex-1 h-12 rounded-xl font-black text-sm text-slate-400 hover:bg-slate-50 transition-colors",children:""}),s.jsxs("button",{onClick:()=>t({name:n,description:l}),disabled:!n.trim()||r,className:"flex-[2] h-12 bg-indigo-600 text-white rounded-xl font-black text-sm shadow-lg shadow-indigo-200 hover:bg-indigo-500 disabled:bg-slate-200 disabled:shadow-none transition-all flex items-center justify-center gap-2",children:[r?s.jsx(Nv,{size:18,className:"animate-spin"}):s.jsx(di,{size:18}),""]})]})]})]}):null},ZDe=()=>{const a=an(),{showAlert:e,showConfirm:t}=wa(),{isAuthorized:r,checkAdmin:n,isVerifying:i}=ps(),[l,o]=F.useState(!1),[c,d]=F.useState(null),[u,h]=F.useState(!1),[f,p]=F.useState(!1),[g,b]=F.useState(null),[w,j]=F.useState([]),[k,T]=F.useState(""),E=or.useRef(!1);or.useEffect(()=>{if(E.current)return;E.current=!0,(async()=>await n()||a("/"))()},[n,a]);const I=async()=>{try{const Z=await ht("get_custom_presets");j(Z.map(J=>({id:`custom_${J.preset_id}`,name:J.name,description:J.description||"   .",details:[`${J.preset_data.products.length} `,`${J.preset_data.boms.length} `,`${J.preset_data.spaces.length} `],icon:QA,color:"slate",active:!0,isCustom:!0,dbId:J.preset_id})))}catch(Z){console.error(Z)}};or.useEffect(()=>{r&&I()},[r]);const R=async({name:Z,description:J})=>{o(!0);try{await ht("save_current_as_preset",{name:Z,description:J}),p(!1),await e(" ","    ."),I()}catch(B){console.error(B),await e("","   : "+B)}finally{o(!1)}},P=async(Z,J)=>{if(Z.stopPropagation(),await t(" ","    ?")){o(!0);try{await ht("delete_custom_preset",{presetId:J}),I(),c===`custom_${J}`&&d(null)}catch(B){console.error(B),await e("","   .")}finally{o(!1)}}},H=async()=>{if(c){o(!0);try{const Z=await ht("get_preset_data",{presetType:c});b(Z),h(!0)}catch(Z){console.error(Z),await e("","    : "+Z)}finally{o(!1)}}},G=async()=>{o(!0);try{await ht("apply_preset",{presetType:c}),h(!1),await e(" ","   ."),a("/settings/product-list")}catch(Z){console.error(Z),await e("","   : "+Z)}finally{o(!1)}},X=async()=>{if(k!==""){e(" ","''  .");return}if(await t("   ",`    ?
          .

(     .)`)){o(!0);try{const Z=await ht("reset_database");await e(" ",Z),T(""),I()}catch(Z){e(" ",Z)}finally{o(!1)}}},te=[...FV,...w].find(Z=>Z.id===c);return r?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-8 pb-4 shrink-0",children:s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"System Init & Reset"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["    ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl tracking-normal",children:"Factory Reset"})]}),s.jsx("p",{className:"text-slate-400 text-xs font-bold mt-2 ml-1",children:"     ,      ."})]}),s.jsxs("button",{onClick:()=>p(!0),className:"group flex items-center gap-2 bg-white px-5 py-3 rounded-2xl border border-slate-100 shadow-sm hover:border-indigo-100 hover:shadow-indigo-100/20 transition-all active:scale-95",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center text-indigo-600 group-hover:scale-110 transition-transform",children:s.jsx(Yi,{size:18})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:"Backup config"}),s.jsx("div",{className:"text-xs font-black text-slate-700",children:"  "})]})]})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-6 lg:px-8 min-[2000px]:px-12 pb-12",children:[w.length>0&&s.jsxs("div",{className:"mt-8 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6 px-1",children:[s.jsx(no,{size:18,className:"text-indigo-500"}),s.jsx("h2",{className:"text-lg font-black text-slate-700",children:"  "})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 max-w-7xl",children:w.map(Z=>s.jsxs("div",{onClick:()=>d(Z.id),className:`
                                        relative rounded-[2.5rem] p-8 border-2 transition-all cursor-pointer group
                                        ${c===Z.id?"border-indigo-500 bg-white ring-4 ring-indigo-500/10 shadow-xl shadow-indigo-500/20 transform scale-[1.02]":"border-slate-100 bg-white hover:border-slate-200 hover:shadow-xl hover:shadow-slate-200/50 hover:-translate-y-1"}
                                    `,children:[s.jsx("div",{className:`
                                        w-16 h-16 rounded-3xl flex items-center justify-center mb-6 text-2xl shadow-lg transition-transform group-hover:rotate-6
                                        bg-slate-50 text-indigo-600 shadow-indigo-100
                                    `,children:s.jsx(Z.icon,{size:32,strokeWidth:2.5})}),s.jsx("h3",{className:"text-xl font-black text-slate-700 mb-2 truncate pr-10",children:Z.name}),s.jsx("p",{className:"text-sm font-bold text-slate-400 leading-relaxed mb-6 min-h-[40px]",children:Z.description}),s.jsx("div",{className:"space-y-3 mb-4",children:Z.details.map((J,B)=>s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500",children:[s.jsx(di,{size:14,className:"text-indigo-500"}),J]},B))}),s.jsx("button",{onClick:J=>P(J,Z.dbId),className:"absolute top-6 right-6 p-2 rounded-xl text-slate-300 hover:text-rose-500 hover:bg-rose-50 transition-all opacity-0 group-hover:opacity-100",children:s.jsx(Cs,{size:18})}),c===Z.id&&s.jsxs("div",{className:"absolute bottom-6 right-8 px-3 py-1 bg-indigo-100 text-indigo-600 text-[10px] font-black rounded-lg uppercase tracking-wide flex items-center gap-1",children:[s.jsx(di,{size:12})," Selected"]})]},Z.id))})]}),s.jsxs("div",{className:"mt-12 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6 px-1",children:[s.jsx(qC,{size:18,className:"text-amber-500"}),s.jsx("h2",{className:"text-lg font-black text-slate-700",children:"  "})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 max-w-7xl",children:FV.map(Z=>s.jsxs("div",{onClick:()=>Z.active&&!l&&d(Z.id),className:`
                                    relative rounded-[2.5rem] p-8 border-2 transition-all cursor-pointer group
                                    ${Z.active?c===Z.id?`border-${Z.color}-500 bg-white ring-4 ring-${Z.color}-500/10 shadow-xl shadow-${Z.color}-500/20 transform scale-[1.02]`:"border-slate-100 bg-white hover:border-slate-200 hover:shadow-xl hover:shadow-slate-200/50 hover:-translate-y-1":"opacity-50 grayscale cursor-not-allowed border-slate-100 bg-slate-50"}
                                `,children:[s.jsx("div",{className:`
                                    w-16 h-16 rounded-3xl flex items-center justify-center mb-6 text-2xl shadow-lg transition-transform group-hover:rotate-6
                                    ${Z.active?`bg-${Z.color}-50 text-${Z.color}-600 shadow-${Z.color}-100`:"bg-slate-100 text-slate-400"}
                                `,children:s.jsx(Z.icon,{size:32,strokeWidth:2.5})}),s.jsx("h3",{className:"text-xl font-black text-slate-700 mb-2",children:Z.name}),s.jsx("p",{className:"text-sm font-bold text-slate-400 leading-relaxed mb-6 min-h-[40px]",children:Z.description}),s.jsx("div",{className:"space-y-3 mb-8",children:Z.details.map((J,B)=>s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500",children:[s.jsx(di,{size:14,className:Z.active?`text-${Z.color}-500`:"text-slate-300"}),J]},B))}),!Z.active&&s.jsx("div",{className:"absolute top-6 right-6 px-3 py-1 bg-slate-100 text-slate-400 text-[10px] font-black rounded-lg uppercase tracking-wide",children:"Coming Soon"}),c===Z.id&&s.jsxs("div",{className:`absolute top-6 right-6 px-3 py-1 bg-${Z.color}-100 text-${Z.color}-600 text-[10px] font-black rounded-lg uppercase tracking-wide flex items-center gap-1`,children:[s.jsx(di,{size:12})," Selected"]})]},Z.id))})]}),s.jsx("div",{className:"mt-20 mb-12 border-t border-slate-200 pt-12",children:s.jsxs("div",{className:"flex items-center justify-between gap-8 bg-white rounded-[3rem] border border-rose-100 p-10 shadow-xl shadow-rose-500/5",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-rose-50 text-rose-500 flex items-center justify-center",children:s.jsx(H_,{size:18})}),s.jsx("h2",{className:"text-xl font-black text-slate-800 tracking-tight",children:":  "})]}),s.jsxs("p",{className:"text-sm font-bold text-slate-400 leading-relaxed pr-8",children:["  (, ,  )  .",s.jsx("br",{}),s.jsx("span",{className:"text-rose-600",children:"       ."})]})]}),s.jsxs("div",{className:"w-96 space-y-4",children:[s.jsx("div",{className:"relative",children:s.jsx("input",{type:"text",value:k,onChange:Z=>T(Z.target.value),placeholder:"'' ",className:"w-full h-14 px-6 bg-slate-50 border border-slate-100 rounded-2xl font-black text-center text-rose-600 placeholder:text-slate-300 focus:outline-none focus:ring-4 focus:ring-rose-500/10 focus:border-rose-200 transition-all"})}),s.jsxs("button",{onClick:X,disabled:k!==""||l,className:"w-full h-14 bg-rose-600 hover:bg-rose-500 disabled:bg-slate-100 disabled:text-slate-300 text-white rounded-2xl font-black text-sm flex items-center justify-center gap-2 shadow-lg shadow-rose-200 transition-all active:scale-95",children:[l?s.jsx(Nv,{size:18,className:"animate-spin"}):s.jsx(Cs,{size:18}),"   "]})]})]})})]}),s.jsxs("div",{className:"bg-white border-t border-slate-100 px-6 lg:px-8 py-6 shrink-0 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-indigo-500 bg-indigo-50 px-4 py-2 rounded-xl border border-indigo-100",children:[s.jsx(qC,{size:16}),s.jsx("p",{className:"text-xs font-bold",children:":   , BOM,       ."})]}),s.jsx("div",{className:"flex gap-4",children:s.jsxs("button",{onClick:H,disabled:!c||l,className:`
                            h-12 px-8 rounded-xl font-black text-sm flex items-center gap-2 shadow-lg transition-all
                            ${!c||l?"bg-slate-100 text-slate-300 cursor-not-allowed shadow-none":"bg-slate-800 hover:bg-slate-700 text-white shadow-slate-200 active:scale-95"}
                        `,children:[l?s.jsx(Nv,{size:18,className:"animate-spin"}):s.jsx(_c,{size:18})," "]})})]}),s.jsx(XDe,{isOpen:f,onClose:()=>p(!1),onSave:R,loading:l}),g&&s.jsx(qDe,{isOpen:u,onClose:()=>h(!1),onConfirm:G,preset:te,data:g,loading:l})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[i?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Ii,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:i?"  ...":"  ..."})]})})},VV=[{id:"default",name:"/ ",icon:"Campaign",title:"/  "},{id:"repurchase",name:" ",icon:"RotateCcw",title:"  "},{id:"churn",name:"  ",icon:"Shield",title:"    "},{id:"shipping_receipt",name:":  ",icon:"Clock",title:"   "},{id:"shipping_paid",name:":  ",icon:"CheckCircle2",title:"   "},{id:"shipping_done",name:":  ",icon:"Package",title:" /  "}],KDe={Campaign:Dre,RotateCcw:Xre,Shield:XA,Clock:mh,CheckCircle2:di,Package:_c},QDe=()=>{const a=an(),{showAlert:e,showConfirm:t}=wa(),{isAuthorized:r,checkAdmin:n,isVerifying:i}=ps(),[l,o]=F.useState(!1),[c,d]=F.useState("default"),[u,h]=F.useState({}),f=or.useRef(!1);F.useEffect(()=>{if(f.current)return;f.current=!0,(async()=>await n()||a("/"))()},[]),F.useEffect(()=>{r&&p()},[r]);const p=async()=>{try{const I=await ht("get_message_templates");h(I||{})}catch(I){console.error("Failed to load templates:",I),h({default:[", ${name}! Mycelium. "],repurchase:["${name},     ? "],churn:["${name}, !  . "],shipping_receipt:["  .     ! "],shipping_paid:[" .   . "],shipping_done:[" !  . "]})}},g=async()=>{if(await t(" ","   ?")){o(!0);try{await ht("save_message_templates",{templates:u}),await e(" ","   .")}catch(R){e(" ",R)}finally{o(!1)}}},b=async()=>{if(await t(" ","    ?    .")){o(!0);try{const R=await ht("reset_message_templates");h(R),e(" ","  .")}catch(R){e(" ",R)}finally{o(!1)}}},w=()=>{const I={...u};I[c]||(I[c]=[]),I[c].push("${name}, ! Mycelium."),h(I)},j=I=>{const R={...u};R[c].splice(I,1),h(R)},k=(I,R)=>{const P={...u};P[c][I]=R,h(P)},T=VV.find(I=>I.id===c),E=u[c]||[];return r?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative",children:[s.jsx("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pt-8 pb-8 overflow-hidden",children:s.jsxs("div",{className:"max-w-6xl mx-auto h-full flex flex-col",children:[s.jsxs("div",{className:"flex gap-6 items-end mb-4",children:[s.jsxs("div",{className:"w-72 px-4 text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Messaging"})]}),s.jsx("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:" "})]}),s.jsxs("div",{className:"flex-1 flex justify-end gap-3 px-2",children:[s.jsxs("button",{onClick:b,className:"h-10 px-5 bg-white border border-slate-200 text-slate-500 hover:text-slate-700 hover:bg-slate-50 rounded-xl font-black text-xs flex items-center gap-2 transition-all active:scale-[0.95] shadow-sm",children:[s.jsx(no,{size:15})," "]}),s.jsxs("button",{onClick:g,disabled:l,className:"h-10 px-5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-black text-xs flex items-center gap-2 shadow-lg shadow-indigo-100 transition-all active:scale-[0.95]",children:[s.jsx(Yi,{size:15}),"  "]})]})]}),s.jsxs("div",{className:"flex-1 flex gap-6 overflow-hidden",children:[s.jsxs("div",{className:"w-72 bg-white rounded-[2rem] border border-slate-200 shadow-xl shadow-slate-200/50 p-6 flex flex-col ring-1 ring-slate-900/5",children:[s.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-6 px-2 text-left",children:" "}),s.jsx("div",{className:"space-y-1.5 overflow-y-auto custom-scrollbar pr-1",children:VV.map(I=>{const R=KDe[I.icon]||jv,P=c===I.id;return s.jsxs("button",{onClick:()=>d(I.id),className:`w-full group flex items-center gap-3 px-4 py-3.5 rounded-2xl transition-all text-left ${P?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-transparent text-slate-500 hover:bg-slate-50 hover:text-indigo-600"}`,children:[s.jsx("div",{className:`p-2 rounded-xl transition-all ${P?"bg-white/20":"bg-slate-50 group-hover:bg-indigo-50"}`,children:s.jsx(R,{size:18})}),s.jsx("span",{className:"font-bold text-sm tracking-tight flex-1",children:I.name}),s.jsx(s2,{size:14,className:`opacity-0 group-hover:opacity-40 transition-opacity ${P&&"hidden"}`})]},I.id)})})]}),s.jsxs("div",{className:"flex-1 bg-white rounded-[2rem] border border-slate-200 shadow-xl shadow-slate-200/50 flex flex-col ring-1 ring-slate-900/5 overflow-hidden",children:[s.jsxs("div",{className:"px-8 py-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/40",children:[s.jsxs("div",{className:"flex flex-col text-left",children:[s.jsx("h3",{className:"text-xl font-black text-slate-700 tracking-tight",children:T?.title}),s.jsxs("p",{className:"text-[11px] font-bold text-slate-400 mt-0.5",children:["  $","{name}","  ."]})]}),s.jsxs("button",{onClick:w,className:"h-10 px-5 bg-indigo-50 text-indigo-600 hover:bg-indigo-100 rounded-xl font-black text-[11px] flex items-center gap-2 transition-all active:scale-[0.95]",children:[s.jsx(kl,{size:16,"aria-hidden":"true"}),"  "]})]}),s.jsx("div",{className:"flex-1 p-8 overflow-y-auto custom-scrollbar space-y-6",children:E.length>0?E.map((I,R)=>s.jsxs("div",{className:"group relative bg-slate-50/50 border border-slate-200 rounded-3xl p-6 transition-all hover:bg-white hover:shadow-xl hover:shadow-slate-200/30 hover:-translate-y-0.5",children:[s.jsx("button",{onClick:()=>j(R),className:"absolute -top-2 -right-2 w-8 h-8 rounded-full bg-rose-500 text-white shadow-lg opacity-0 group-hover:opacity-100 transition-all flex items-center justify-center hover:bg-rose-600 transform hover:scale-110 active:scale-90 z-10","aria-label":"",children:s.jsx(Cs,{size:14,"aria-hidden":"true"})}),s.jsx("div",{className:"relative",children:s.jsx("textarea",{value:I,onChange:P=>k(R,P.target.value),className:"w-full min-h-[120px] bg-transparent border-none p-0 focus:ring-0 font-bold text-slate-600 leading-relaxed text-base resize-none",placeholder:"  ... (  ${name} )"})}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-slate-300 uppercase tracking-widest",children:[s.jsx(jne,{size:12}),"Template Item #",R+1]}),s.jsxs("div",{className:"px-3 py-1 bg-white rounded-lg border border-slate-200 shadow-sm",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 mr-1.5 uppercase tracking-widest text-[9px]",children:"Characters"}),s.jsx("span",{className:`text-xs font-black ${I.length>80?"text-orange-500":"text-indigo-600"}`,children:I.length})]})]})]},R)):s.jsxs("div",{className:"h-full flex flex-col items-center justify-center py-20 opacity-40",children:[s.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-[2rem] flex items-center justify-center mb-6",children:s.jsx(jv,{size:32})}),s.jsx("p",{className:"font-black text-slate-400 text-sm",children:"  ."}),s.jsx("p",{className:"text-xs font-bold text-slate-300 mt-1",children:" [ ]    ."})]})})]})]})]})}),s.jsx("style",{children:`
                .custom-scrollbar::-webkit-scrollbar {
                    width: 6px;
                }
                .custom-scrollbar::-webkit-scrollbar-track {
                    background: transparent;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb {
                    background: #e2e8f0;
                    border-radius: 10px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                    background: #cbd5e1;
                }
            `})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[i?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Ii,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:i?"  ...":"  ..."})]})})},JDe=()=>{const a=an(),{showAlert:e}=wa(),{isAuthorized:t,checkAdmin:r,isVerifying:n}=ps(),[i,l]=F.useState([]),[o,c]=F.useState(""),[d,u]=F.useState(window.location.port||"3000"),[h,f]=F.useState(!1),[p,g]=F.useState(!0),[b,w]=F.useState({access_pin:"",use_pin:!1}),j=or.useRef(!1);F.useEffect(()=>{if(j.current)return;j.current=!0,(async()=>await r()?k():a("/"))()},[r,a]);const k=async()=>{g(!0);try{const[R,P]=await Promise.all([Ke("get_local_ip_command").catch(()=>["127.0.0.1"]),Ke("get_mobile_config").catch(()=>({access_pin:"",use_pin:!1}))]);l(R);const H=R.filter(X=>X!=="127.0.0.1"&&!X.startsWith("169.254.")),G=H.find(X=>X.startsWith("192.168."))||H.find(X=>X.startsWith("100."))||H[0]||"127.0.0.1";c(G),w(P||{access_pin:"",use_pin:!1})}catch(R){console.error("Failed to load mobile settings:",R),c("127.0.0.1")}finally{g(!1)}},T=async()=>{f(!0);try{await Ke("save_mobile_config",{config:b}),e(" ","    .")}catch(R){console.error(R),e(" ","    .")}finally{f(!1)}},I=(R=>{if(!R||R==="127.0.0.1")return null;const P=R.split(":")[0],H=d?`:${d}`:"";return`http://${P}${H}/mobile-dashboard`})(o);return t?p?s.jsx("div",{className:"flex items-center justify-center h-full bg-slate-50",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(yi,{className:"w-8 h-8 text-indigo-500 animate-spin"}),s.jsx("p",{className:"text-slate-400 font-bold text-sm",children:"   ..."})]})}):s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] animate-in fade-in duration-700 overflow-y-auto custom-scrollbar font-sans",children:[s.jsxs("div",{className:"max-w-5xl mx-auto w-full px-6 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-24",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Connected Farm Ecosystem"})]}),s.jsxs("h1",{className:"text-2xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-base",children:"Mobile Center"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 mb-12",children:[s.jsxs("div",{className:"lg:col-span-7 bg-white p-1 rounded-[2.5rem] shadow-2xl shadow-indigo-100/50 border border-slate-100 flex flex-col relative overflow-hidden group",children:[s.jsxs("div",{className:"p-10 flex flex-col items-center justify-center text-center relative z-10",children:[s.jsx("div",{className:"flex flex-col items-center justify-center mb-10",children:s.jsxs("div",{className:"px-6 py-2 bg-indigo-50 text-indigo-600 rounded-2xl text-[10px] font-black border border-indigo-100 flex items-center gap-2",children:[s.jsx(ZA,{size:14}),"   "]})}),s.jsxs("div",{className:"relative mb-8 group/qr",children:[s.jsx("div",{className:"absolute -inset-4 bg-gradient-to-tr from-indigo-500/10 to-purple-500/10 blur-2xl rounded-full scale-0 group-hover/qr:scale-100 transition-transform duration-700"}),I?s.jsxs("div",{className:"relative p-8 bg-white rounded-[2.5rem] shadow-xl border border-slate-50 ring-1 ring-slate-100 group-hover/qr:translate-y-[-4px] transition-transform duration-500 cursor-pointer","data-testid":"qr-container",onClick:()=>{navigator.clipboard.writeText(I),e(" ","   .")},children:[s.jsx(vb,{value:I,size:220,level:"H",includeMargin:!0,className:"relative z-10"}),s.jsx("div",{className:"absolute bottom-4 right-4 bg-indigo-600 text-white p-2 rounded-xl shadow-lg shadow-indigo-200",children:s.jsx(M0,{size:18})})]},I):s.jsxs("div",{className:"w-[300px] h-[300px] bg-slate-50 rounded-[2.5rem] flex flex-col items-center justify-center text-slate-300 gap-4 border-2 border-dashed border-slate-200",children:[s.jsxs("div",{className:"relative",children:[s.jsx(kv,{size:48}),s.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-rose-500 rounded-full border-2 border-white animate-pulse"})]}),s.jsxs("div",{className:"px-12 text-center",children:[s.jsx("span",{className:"text-sm font-black text-slate-400",children:"  "}),s.jsx("br",{}),s.jsx("span",{className:"text-[10px] font-bold text-slate-400 leading-tight block mt-2",children:"      .    ."})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-black text-slate-800 text-lg tracking-tight",children:"  QR "}),s.jsx("p",{className:"text-slate-400 font-bold max-w-sm mx-auto leading-relaxed",children:"         . (Wi-Fi  Tailscale IP)"})]}),s.jsxs("div",{className:"mt-10 bg-slate-50 px-8 py-4 rounded-[1.5rem] border border-slate-100 flex items-center justify-between gap-4 w-full max-w-lg group/url hover:bg-white hover:shadow-md transition-all duration-300",children:[s.jsxs("div",{className:"flex flex-col items-start gap-1 min-w-0",children:[s.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Connect URL"}),s.jsx("code",{className:"text-indigo-600 font-black tracking-wide text-xs truncate w-full",children:I||"  "})]}),s.jsx("div",{className:"shrink-0 w-8 h-8 rounded-lg bg-white flex items-center justify-center text-slate-300 group-hover/url:text-indigo-500 transition-colors shadow-sm",children:s.jsx(z_,{size:16})})]})]}),s.jsx("div",{className:"absolute -bottom-24 -right-24 w-64 h-64 bg-indigo-500/5 blur-[100px] rounded-full"}),s.jsx("div",{className:"absolute -top-24 -left-24 w-64 h-64 bg-purple-500/5 blur-[100px] rounded-full"})]}),s.jsxs("div",{className:"lg:col-span-5 space-y-8",children:[s.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-xl border border-slate-100 relative overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h3",{className:"font-black text-slate-800 flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 text-emerald-600 flex items-center justify-center",children:s.jsx(di,{size:18})})," "]}),s.jsxs("span",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 text-[10px] font-black rounded-full border border-emerald-100 flex items-center gap-1.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),"ACTIVE"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-slate-400 font-bold",children:" IP "}),s.jsx("select",{value:o,onChange:R=>c(R.target.value),className:"bg-slate-50 border border-slate-200 rounded-lg px-2 py-1 text-xs font-black text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/20",children:i.filter(R=>R!=="127.0.0.1").length>0?i.filter(R=>R!=="127.0.0.1").map(R=>s.jsxs("option",{value:R,children:[R," ",R.startsWith("100.")?"(Tailscale)":R.startsWith("169.254.")?"()":"()"]},R)):s.jsx("option",{value:"127.0.0.1",children:"127.0.0.1"})})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-slate-400 font-bold",children:" "}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:d,onChange:R=>u(R.target.value.replace(/[^0-9]/g,"")),className:"w-16 h-8 bg-slate-50 border border-slate-200 rounded-lg text-center text-xs font-black text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500/20"}),s.jsx(ene,{size:14,className:"text-slate-300"})]})]})]})]}),s.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-xl border border-slate-100 space-y-8 relative",children:[s.jsx("div",{className:"absolute top-0 right-0 p-8 text-slate-50/50 pointer-events-none",children:s.jsx(m0,{size:80,strokeWidth:1})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-orange-50 text-orange-600 flex items-center justify-center shadow-inner",children:s.jsx(m0,{size:24})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-black text-slate-800",children:"   "}),s.jsx("p",{className:"text-[11px] text-slate-400 font-bold",children:"    ."})]})]}),s.jsxs("div",{className:"p-5 bg-slate-50/80 rounded-[1.5rem] border border-slate-100 flex items-center justify-between group hover:bg-slate-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`p-2 rounded-xl transition-colors ${b.use_pin?"bg-indigo-100 text-indigo-600":"bg-slate-200 text-slate-400"}`,children:s.jsx(Ii,{size:18})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-black text-slate-800",children:" PIN  "}),s.jsx("div",{className:"text-[10px] text-slate-400 font-bold",children:"   "})]})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer",checked:b.use_pin,onChange:R=>w({...b,use_pin:R.target.checked})}),s.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),b.use_pin&&s.jsxs("div",{className:"space-y-3 animate-in slide-in-from-top-4 duration-500 ease-out",children:[s.jsx("label",{className:"text-xs font-black text-slate-500 px-1",children:" PIN  (4~6)"}),s.jsx("input",{type:"password",maxLength:6,placeholder:"",className:"w-full h-14 bg-white border-2 border-indigo-500/20 rounded-[1.25rem] px-4 text-center text-2xl font-black tracking-[0.5em] text-indigo-600 placeholder:text-indigo-200 placeholder:tracking-normal focus:border-indigo-500 focus:shadow-xl focus:shadow-indigo-500/10 transition-all",value:b.access_pin,onChange:R=>w({...b,access_pin:R.target.value.replace(/[^0-9]/g,"")})})]}),s.jsxs("button",{onClick:T,disabled:h,className:"w-full h-14 bg-gradient-to-r from-indigo-600 to-indigo-700 rounded-[1.25rem] text-white font-black text-sm flex items-center justify-center gap-2 shadow-xl shadow-indigo-100 hover:shadow-indigo-200 active:scale-[0.98] transition-all disabled:opacity-50",children:[h?s.jsx(yi,{size:20,className:"animate-spin"}):s.jsx(Yi,{size:20}),"  "]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"p-8 bg-slate-100/50 rounded-[2.5rem] border border-slate-200/60 flex flex-col md:flex-row gap-6 items-start transition-all hover:bg-white hover:shadow-xl hover:shadow-slate-200/50 group",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white flex items-center justify-center text-indigo-500 shrink-0 shadow-sm group-hover:scale-110 transition-transform duration-500",children:s.jsx(kv,{size:28})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-sm font-black text-slate-700 flex items-center gap-2",children:["  (Local) ",s.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-500 text-[10px] rounded-md uppercase font-black",children:"Wi-Fi Connection"})]}),s.jsxs("p",{className:"text-xs text-slate-500 font-medium leading-relaxed",children:[" (Wi-Fi) PC     . ",s.jsx("br",{}),"  3000   , 'Windows '      ."]})]})]}),s.jsxs("div",{className:"p-8 bg-white rounded-[2.5rem] border border-purple-100 shadow-xl shadow-purple-500/5 flex flex-col gap-8 relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-purple-500/5 blur-[80px] rounded-full -mr-20 -mt-20"}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start relative z-10",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-purple-600 flex items-center justify-center text-white shrink-0 shadow-lg shadow-purple-200 group-hover:rotate-6 transition-transform duration-500",children:s.jsx(qA,{size:28})}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-black text-slate-700 flex items-center gap-2",children:["Tailscale   (Remote) ",s.jsx("span",{className:"px-2 py-0.5 bg-purple-50 text-purple-600 text-[10px] rounded-md uppercase font-black",children:"Secure VPN Access"})]}),s.jsx("p",{className:"text-xs text-slate-500 font-medium leading-relaxed mt-2",children:"Tailscale            ."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 pt-2",children:[{step:"01",title:"",desc:"    .",icon:s.jsx(Df,{size:14}),link:"https://tailscale.com"},{step:"02",title:"PC ",desc:" PC Tailscale  .",icon:null},{step:"03",title:" ",desc:"      .",icon:null},{step:"04",title:" ",desc:" ' IP ' Tailscale IP .",icon:null}].map((R,P)=>s.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100 hover:border-purple-200 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-[10px] font-black text-purple-500",children:R.step}),R.icon&&s.jsx("a",{href:R.link,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-700",children:R.icon})]}),s.jsx("h5",{className:"text-[11px] font-black text-slate-700 mb-1",children:R.title}),s.jsx("p",{className:"text-[10px] text-slate-400 font-bold leading-tight",children:R.desc})]},P))}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50/50 rounded-2xl border border-purple-100/50",children:[s.jsx(yb,{size:16,className:"text-purple-500 shrink-0"}),s.jsx("p",{className:"text-[10px] text-purple-700 font-bold",children:"Tailscale    IP         ."})]})]})]})]})]})]}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                .custom-scrollbar::-webkit-scrollbar {
                    width: 6px;
                }
                .custom-scrollbar::-webkit-scrollbar-track {
                    background: transparent;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb {
                    background: #e2e8f0;
                    border-radius: 10px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                    background: #cbd5e1;
                }
            `}})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[n?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Ii,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:n?"  ...":"  ..."})]})})},eIe=()=>{const a=an(),{showAlert:e,showConfirm:t}=wa(),{isAuthorized:r,checkAdmin:n}=ps(),[i,l]=F.useState([]),[o,c]=F.useState([]),[d,u]=F.useState(!1),[h,f]=F.useState(null),[p,g]=F.useState({sensor_name:"",space_id:null,device_type:"wifi",connection_info:"",is_active:!0}),b=or.useRef(!1);F.useEffect(()=>{if(b.current)return;b.current=!0,(async()=>await n()||a("/"))()},[n,a]);const w=F.useCallback(async()=>{u(!0);try{const[I,R]=await Promise.all([ht("get_sensors"),ht("get_production_spaces")]);l(I||[]),c(R||[])}catch(I){console.error("Failed to load IoT settings:",I)}finally{u(!1)}},[]);F.useEffect(()=>{r&&w()},[r,w]);const j=I=>{f(I),g({sensor_name:I.sensor_name,space_id:I.space_id,device_type:I.device_type,connection_info:I.connection_info||"",is_active:I.is_active})},k=()=>{f(null),g({sensor_name:"",space_id:null,device_type:"wifi",connection_info:"",is_active:!0})},T=async I=>{if(I.preventDefault(),!p.sensor_name.trim()){e(" ","  .");return}try{await ht("save_sensor",{sensor:{...p,sensor_id:h?h.sensor_id:0,space_id:p.space_id?parseInt(p.space_id):null}}),e(" ",h?"  .":"  ."),k(),w()}catch(R){e(" "," : "+R)}},E=async I=>{if(await t(" ",`[${I.sensor_name}]  ?`))try{await ht("delete_sensor",{sensorId:I.sensor_id}),w(),h?.sensor_id===I.sensor_id&&k()}catch(R){e(" "," : "+R)}};return r?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-4",children:s.jsx("div",{className:"flex justify-between items-end",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-emerald-500 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-emerald-600 uppercase",children:"IoT Device Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",children:["IoT   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Integrated Gateway"})]})]})})}),s.jsx("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pb-8 overflow-hidden",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 h-full",children:[s.jsx("div",{className:"lg:col-span-4 flex flex-col gap-6",children:s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5 sticky top-0",children:[s.jsxs("div",{className:"px-8 py-6 bg-slate-50/50 border-b border-slate-100 flex items-center justify-between",children:[s.jsxs("h3",{className:"font-black text-slate-800 flex items-center gap-2",children:[s.jsx(sx,{size:20,className:"text-emerald-500"}),h?"  ":"  "]}),h&&s.jsx("button",{onClick:k,className:"text-[10px] font-black text-emerald-600 bg-emerald-50 px-3 py-1.5 rounded-lg hover:bg-emerald-100 transition-all",children:" "})]}),s.jsxs("form",{onSubmit:T,className:"p-8 space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"sensor-name-input",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:" "}),s.jsx("input",{id:"sensor-name-input",type:"text",value:p.sensor_name,onChange:I=>g({...p,sensor_name:I.target.value}),placeholder:": 1   ",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm ring-1 ring-slate-200 focus:ring-4 focus:ring-emerald-500/10 focus:bg-white transition-all",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"space-select",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:" "}),s.jsxs("select",{id:"space-select",value:p.space_id||"",onChange:I=>g({...p,space_id:I.target.value||null}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm ring-1 ring-slate-200",children:[s.jsx("option",{value:"",children:" "}),o.map(I=>s.jsx("option",{value:I.space_id,children:I.space_name},I.space_id))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left text-left",children:" "}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["wifi","usb","virtual"].map(I=>s.jsxs("button",{type:"button",onClick:()=>g({...p,device_type:I}),className:`py-3 rounded-xl border-2 font-black text-[10px] uppercase flex flex-col items-center gap-1 transition-all ${p.device_type===I?"border-emerald-500 bg-emerald-50 text-emerald-600":"border-slate-50 text-slate-400 hover:border-slate-100"}`,children:[I==="wifi"?s.jsx(kv,{size:14}):I==="usb"?s.jsx(Z8,{size:14}):s.jsx(WC,{size:14}),I]},I))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 text-left",children:"  (IP/COM)"}),s.jsx("input",{type:"text",value:p.connection_info,onChange:I=>g({...p,connection_info:I.target.value}),placeholder:p.device_type==="wifi"?"192.168.1.100":p.device_type==="usb"?"COM3":"Internal PID",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-xl font-bold text-sm ring-1 ring-slate-200"})]}),s.jsxs("button",{type:"submit",className:"w-full h-14 bg-emerald-600 text-white rounded-2xl font-black text-sm shadow-xl shadow-emerald-100 hover:bg-emerald-500 transition-all flex items-center justify-center gap-2",children:[s.jsx(di,{size:18})," ",h?"  ":"  "]})]})]})}),s.jsx("div",{className:"lg:col-span-8 flex flex-col gap-4",children:s.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden flex flex-col h-full",children:[s.jsx("div",{className:"p-6 border-b border-slate-50 bg-slate-50/30 flex justify-between items-center",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-emerald-50 rounded-2xl flex items-center justify-center text-emerald-600",children:s.jsx(wv,{size:20})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-slate-400 capitalize tracking-widest",children:"Active Gateways"}),s.jsxs("p",{className:"font-black text-slate-700",children:["  : ",i.length,""]})]})]})}),s.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{className:"sticky top-0 bg-white border-b border-slate-100 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"/"}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:" "}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:" "}),s.jsx("th",{className:"px-6 py-4 text-right"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:i.map(I=>s.jsxs("tr",{className:"hover:bg-slate-50/50 transition-all group",children:[s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-xl flex items-center justify-center ${I.device_type==="wifi"?"bg-blue-50 text-blue-500":I.device_type==="usb"?"bg-amber-50 text-amber-500":"bg-emerald-50 text-emerald-500"}`,children:I.device_type==="wifi"?s.jsx(kv,{size:16}):I.device_type==="usb"?s.jsx(Z8,{size:16}):s.jsx(WC,{size:16})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-black text-slate-700",children:I.sensor_name}),s.jsxs("p",{className:"text-[9px] font-bold text-slate-300 uppercase tracking-tighter",children:[I.device_type," connection"]})]})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(F_,{size:14,className:"text-slate-200"}),s.jsx("span",{className:"text-xs font-bold text-slate-600",children:o.find(R=>R.space_id===I.space_id)?.space_name||""})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("code",{className:"px-2 py-1 bg-slate-100 rounded text-[10px] font-bold text-indigo-500",children:I.connection_info||"N/A"})}),s.jsx("td",{className:"px-6 py-5 text-right",children:s.jsxs("div",{className:"flex gap-1 justify-end opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>j(I),className:"p-2 text-slate-300 hover:text-indigo-600 transition-colors",children:s.jsx(V_,{size:16})}),s.jsx("button",{onClick:()=>E(I),className:"p-2 text-slate-300 hover:text-rose-600 transition-colors",children:s.jsx(Cs,{size:16})})]})})]},I.sensor_id))})]})})]})})]})})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:"  ..."})]})})},tIe=()=>{const a=an(),{showAlert:e,showConfirm:t}=wa(),{isAuthorized:r,checkAdmin:n,isVerifying:i}=ps(),[l,o]=F.useState([]),[c,d]=F.useState(!1),u=F.useRef(!1);F.useEffect(()=>{if(u.current)return;u.current=!0,(async()=>await n()||a("/"))()},[n,a]);const h=F.useCallback(async()=>{if(r){d(!0);try{const g=await ht("get_auth_sessions");o(g||[])}catch(g){console.error("Failed to load sessions:",g),e("","   .")}finally{d(!1)}}},[e,r]);F.useEffect(()=>{r&&h()},[h,r]);const f=async g=>{if(await t(" ","   ?"))try{await ht("revoke_auth_session",{session_id:g}),e("","  ."),h()}catch(b){e("","    : "+b)}},p=g=>{if(!g)return{type:"unknown",name:"Unknown Device"};const b=g.toLowerCase();let w="desktop";(b.includes("mobi")||b.includes("android"))&&(w="mobile");let j="Web Browser";b.includes("chrome")?j="Chrome":b.includes("firefox")?j="Firefox":b.includes("safari")?j="Safari":b.includes("edge")&&(j="Edge");let k="";return b.includes("windows")?k="Windows":b.includes("macintosh")?k="macOS":b.includes("android")?k="Android":b.includes("iphone")&&(k="iPhone"),{type:w,name:`${j} (${k||"Unknown OS"})`}};return r?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsx("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4",children:s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Security & Privacy"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Active Sessions"})]}),s.jsx("p",{className:"text-sm text-slate-400 mt-1 font-medium",children:"          ."})]}),s.jsxs("button",{onClick:h,disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-600 text-xs font-black shadow-sm hover:bg-slate-50 transition-all disabled:opacity-50",children:[s.jsx(yi,{size:14,className:c?"animate-spin":""}),""]})]})}),s.jsxs("div",{className:"flex-1 px-6 lg:px-8 pb-8 overflow-y-auto custom-scrollbar",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:l.length===0&&!c?s.jsxs("div",{className:"col-span-full py-20 bg-white rounded-[2rem] border-2 border-dashed border-slate-200 flex flex-col items-center justify-center",children:[s.jsx(no,{size:48,className:"text-slate-200 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:"  ."})]}):l.map(g=>{const b=p(g.user_agent),w=g.last_activity?new Date(g.last_activity):null,j=g.created_at?new Date(g.created_at):null;return s.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-200 shadow-xl shadow-slate-200/40 p-6 relative group transition-all hover:scale-[1.02] hover:shadow-indigo-100/50",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 ${b.type==="mobile"?"bg-amber-50 text-amber-500":"bg-indigo-50 text-indigo-500"}`,children:b.type==="mobile"?s.jsx(ZA,{size:28}):s.jsx($C,{size:28})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-center gap-2 mb-1",children:s.jsx("h3",{className:"font-black text-slate-700 truncate",children:b.name})}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-slate-400 font-bold",children:[s.jsx(qA,{size:12}),g.client_ip||"   IP"]}),s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-slate-400 font-bold",children:[s.jsx(mh,{size:12}),": ",w?.toLocaleString("ko-KR")||"-"]}),s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-slate-400 font-bold",children:[s.jsx(no,{size:12})," : ",j?.toLocaleString("ko-KR")||"-"]})]})]})]}),s.jsxs("div",{className:"mt-6 flex items-center justify-between pt-4 border-t border-slate-50",children:[s.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] font-black text-emerald-500 uppercase tracking-widest bg-emerald-50 px-2 py-1 rounded-lg",children:[s.jsx(m0,{size:12})," Active"]}),s.jsxs("button",{onClick:()=>f(g.session_id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-xl text-[10px] font-black text-rose-500 bg-white border border-rose-100 shadow-sm hover:bg-rose-50 transition-all opacity-0 group-hover:opacity-100",children:[s.jsx(Sre,{size:12}),"  "]})]})]},g.session_id)})}),s.jsx("div",{className:"mt-12 bg-indigo-50/50 rounded-[2.5rem] p-10 border border-indigo-100",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center",children:[s.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl shadow-lg border border-indigo-100 flex items-center justify-center text-indigo-600 shrink-0",children:s.jsx(m0,{size:32})}),s.jsxs("div",{className:"flex-1 text-center md:text-left",children:[s.jsx("h4",{className:"text-lg font-black text-slate-700 tracking-tight mb-2",children:"  "}),s.jsx("p",{className:"text-sm text-slate-500 font-medium leading-relaxed",children:"       ,         .           ."})]})]})})]})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[i?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Ii,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:i?"  ...":"  ..."})]})})},aIe=()=>{const a=an(),{isAuthorized:e,checkAdmin:t,isVerifying:r}=ps(),[n,i]=F.useState(null),[l,o]=F.useState(!1),c=F.useRef(!1);F.useEffect(()=>{if(c.current)return;c.current=!0,(async()=>await t()||a("/"))()},[t,a]);const d=F.useCallback(async()=>{if(e){o(!0);try{const f=await ht("get_security_status");i(f)}catch(f){console.error("Failed to load security status:",f)}finally{o(!1)}}},[e]);F.useEffect(()=>{e&&d()},[e,d]);const u=f=>f.includes("JWT")?s.jsx(bre,{size:20}):f.includes("DB")?s.jsx(wd,{size:20}):f.includes("AUDIT")?s.jsx(no,{size:20}):s.jsx(Ii,{size:20}),h=f=>{switch(f){case"High":return"bg-rose-50 text-rose-600 border-rose-100";case"Medium":return"bg-amber-50 text-amber-600 border-amber-100";case"Low":return"bg-blue-50 text-blue-600 border-blue-100";default:return"bg-slate-50 text-slate-600 border-slate-100"}};return e?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsx("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4",children:s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Security Analysis"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["    ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Security Audit"})]}),s.jsx("p",{className:"text-sm text-slate-400 mt-1 font-medium",children:"        ."})]}),s.jsxs("button",{onClick:d,disabled:l,className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-600 text-xs font-black shadow-sm hover:bg-slate-50 transition-all disabled:opacity-50",children:[s.jsx(yi,{size:14,className:l?"animate-spin":""})," "]})]})}),s.jsxs("div",{className:"flex-1 px-6 lg:px-8 pb-8 overflow-y-auto custom-scrollbar",children:[n&&s.jsxs("div",{className:"mt-6 space-y-6",children:[s.jsx("div",{className:`rounded-[2.5rem] p-8 border ${n.is_secure?"bg-emerald-50 border-emerald-100":"bg-rose-50 border-rose-100"} transition-all`,children:s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center shadow-lg ${n.is_secure?"bg-white text-emerald-500 shadow-emerald-200":"bg-white text-rose-500 shadow-rose-200"}`,children:n.is_secure?s.jsx(m0,{size:40}):s.jsx(XA,{size:40})}),s.jsxs("div",{children:[s.jsx("h2",{className:`text-2xl font-black tracking-tight ${n.is_secure?"text-emerald-700":"text-rose-700"}`,children:n.is_secure?"   ":"    "}),s.jsxs("p",{className:`text-sm font-medium mt-1 ${n.is_secure?"text-emerald-600/80":"text-rose-600/80"}`,children:[n.warnings.length,"   . ",n.is_secure?"      .":"      ."]})]})]})}),s.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.warnings.length===0?s.jsxs("div",{className:"py-20 bg-white rounded-[2rem] border-2 border-dashed border-slate-200 flex flex-col items-center justify-center",children:[s.jsx(m0,{size:48,className:"text-slate-200 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:"   ."})]}):n.warnings.sort((f,p)=>{const g={High:0,Medium:1,Low:2};return g[f.level]-g[p.level]}).map((f,p)=>s.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-200 shadow-xl shadow-slate-200/40 p-6 flex items-start gap-6 transition-all hover:border-indigo-200",children:[s.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 ${h(f.level)} border`,children:u(f.code)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-black uppercase tracking-widest border ${h(f.level)}`,children:[f.level," Risk"]}),s.jsx("h3",{className:"font-black text-slate-700 text-lg",children:f.message})]}),s.jsx("p",{className:"text-sm text-slate-500 font-medium leading-relaxed",children:f.recommendation})]}),s.jsx("div",{className:"shrink-0 pt-2",children:s.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 group-hover:bg-indigo-50 group-hover:text-indigo-600 transition-all",children:s.jsx(z_,{size:16})})})]},p))}),s.jsxs("div",{className:"bg-slate-900 rounded-[2.5rem] p-10 text-white relative overflow-hidden",children:[s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row gap-8 items-center",children:[s.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-2xl backdrop-blur-md flex items-center justify-center text-white shrink-0",children:s.jsx(Ii,{size:32})}),s.jsxs("div",{className:"flex-1 text-center md:text-left",children:[s.jsx("h4",{className:"text-lg font-black tracking-tight mb-2",children:"  "}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-xs font-medium text-slate-400",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),"    "]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),"  (.env)   "]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),"   "]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),"    "]})]})]})]}),s.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-600/20 rounded-full blur-[100px] -mr-32 -mt-32"})]})]}),l&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-40",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-600 rounded-full animate-spin mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:"   ..."})]})]})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[r?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Ii,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:r?"  ...":"  ..."})]})})},rIe=()=>{const a=an(),{showAlert:e}=wa(),{isAuthorized:t,checkAdmin:r,isVerifying:n}=ps(),[i,l]=F.useState([]),[o,c]=F.useState(!1),[d,u]=F.useState(""),h=F.useRef(!1);F.useEffect(()=>{if(h.current)return;h.current=!0,(async()=>await r()||a("/"))()},[r,a]);const f=async()=>{if(t){c(!0);try{const g=await Ke("get_sms_logs");l(g||[])}catch(g){console.error(g),e("","SMS    .")}finally{c(!1)}}};F.useEffect(()=>{t&&f()},[t]);const p=i.filter(g=>g.recipient_name.includes(d)||g.mobile_number.includes(d)||g.content.includes(d));return t?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-amber-500 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-amber-500 uppercase",children:"Communication Log"})]}),s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-black text-slate-700 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["SMS   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Transmission Logs"})]}),s.jsxs("p",{className:"text-slate-400 text-sm mt-1 flex items-center gap-1",children:[s.jsx(ZA,{size:14}),"        ."]})]}),s.jsxs("button",{onClick:f,disabled:o,className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-600 font-bold text-sm shadow-sm hover:bg-slate-50 transition-all active:scale-95",children:[s.jsx(yi,{size:16,className:o?"animate-spin":""}),""]})]})]}),s.jsx("div",{className:"px-6 lg:px-8 pb-4 shrink-0",children:s.jsx("div",{className:"relative group",children:s.jsx("input",{type:"text",placeholder:" ,     ...",value:d,onChange:g=>u(g.target.value),className:"w-full h-12 px-6 bg-white border border-slate-200 rounded-2xl outline-none focus:ring-4 focus:ring-amber-500/10 focus:border-amber-500 transition-all font-medium text-slate-700 shadow-sm"})})}),s.jsx("div",{className:"flex-1 overflow-hidden px-6 lg:px-8 pb-8",children:s.jsx("div",{className:"h-full bg-white rounded-[2rem] border border-slate-200 shadow-xl shadow-slate-200/40 flex flex-col overflow-hidden",children:s.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{className:"sticky top-0 z-10",children:s.jsxs("tr",{className:"bg-slate-50/80 backdrop-blur-md border-b border-slate-100",children:[s.jsx("th",{className:"px-6 py-4 text-[11px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("th",{className:"px-6 py-4 text-[11px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("th",{className:"px-6 py-4 text-[11px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("th",{className:"px-6 py-4 text-[11px] font-black text-slate-400 uppercase tracking-widest",children:" "}),s.jsx("th",{className:"px-6 py-4 text-[11px] font-black text-slate-400 uppercase tracking-widest",children:" "})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[p.map(g=>s.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[s.jsx("td",{className:"px-6 py-4",children:g.status===""?s.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-emerald-50 text-emerald-600 border border-emerald-100 font-bold text-[11px]",children:[s.jsx(YA,{size:12}),""]}):s.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-rose-50 text-rose-600 border border-rose-100 font-bold text-[11px]",children:[s.jsx(bb,{size:12}),""]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"font-bold text-slate-700",children:g.recipient_name})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"font-mono text-slate-500 text-sm",children:g.mobile_number})}),s.jsx("td",{className:"px-6 py-4 max-w-md",children:s.jsx("p",{className:"text-slate-600 text-sm truncate group-hover:whitespace-normal group-hover:overflow-visible transition-all",title:g.content,children:g.content})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-slate-500 text-[13px] font-medium",children:g.sent_at.split(" ")[0]}),s.jsx("span",{className:"text-slate-300 text-[11px] font-bold uppercase tracking-tighter",children:g.sent_at.split(" ")[1]})]})})]},g.log_id)),p.length===0&&!o&&s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"py-20 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-3 grayscale opacity-30",children:[s.jsx(Cre,{size:48}),s.jsx("p",{className:"font-bold text-slate-500",children:"  ."})]})})})]})]})})})})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[n?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Ii,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:n?"  ...":"  ..."})]})})},nIe=()=>{const a=an(),{isAuthorized:e,checkAdmin:t,isVerifying:r}=ps(),[n,i]=F.useState([]),[l,o]=F.useState(!1),[c,d]=F.useState({action_type:"",limit:100}),[u,h]=F.useState(null),f=F.useRef(!1);F.useEffect(()=>{if(f.current)return;f.current=!0,(async()=>await t()||a("/"))()},[t,a]);const p=F.useCallback(async()=>{if(e){o(!0);try{const w=await ht("get_audit_logs",c);i(w)}catch(w){console.error("Failed to load audit logs:",w)}finally{o(!1)}}},[c,e]);F.useEffect(()=>{e&&p()},[p,e]);const g=w=>w.includes("CREATE")?"bg-emerald-50 text-emerald-600 border-emerald-100":w.includes("UPDATE")?"bg-blue-50 text-blue-600 border-blue-100":w.includes("DELETE")?"bg-rose-50 text-rose-600 border-rose-100":w.includes("LOGIN")?"bg-indigo-50 text-indigo-600 border-indigo-100":w.includes("LOGOUT")?"bg-slate-50 text-slate-600 border-slate-100":w.includes("REVOKE")?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100",b=[{label:"",value:""},{label:"",value:"LOGIN"},{label:"",value:"LOGOUT"},{label:" ",value:"LOGIN_FAILED"},{label:" ",value:"REVOKE_SESSION"},{label:" ",value:"CREATE_PRODUCT"},{label:" ",value:"UPDATE_PRODUCT"},{label:" ",value:"DELETE_PRODUCT"},{label:" ",value:"CREATE_USER"}];return e?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"System Audit Trails"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["    ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Audit Management"})]}),s.jsx("p",{className:"text-sm text-slate-400 mt-1 font-medium",children:"          ."})]}),s.jsxs("button",{onClick:p,disabled:l,className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-600 text-xs font-black shadow-sm hover:bg-slate-50 transition-all disabled:opacity-50",children:[s.jsx(yi,{size:14,className:l?"animate-spin":""}),""]})]}),s.jsxs("div",{className:"mt-8 flex items-center gap-3",children:[s.jsx("div",{className:"flex bg-white p-1 rounded-2xl border border-slate-200 shadow-sm overflow-x-auto no-scrollbar",children:b.map(w=>s.jsx("button",{onClick:()=>d({...c,action_type:w.value}),className:`px-4 py-2 rounded-xl text-xs font-black transition-all whitespace-nowrap ${c.action_type===w.value?"bg-slate-900 text-white shadow-md":"text-slate-500 hover:bg-slate-50"}`,children:w.label},w.value))}),s.jsx("div",{className:"flex-1"}),s.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-2xl border border-slate-200 text-slate-400 text-[10px] font-black uppercase tracking-widest",children:[s.jsx(no,{size:12}),"Showing Last ",n.length," entries"]})]})]}),s.jsx("div",{className:"flex-1 px-6 lg:px-8 pb-8 mt-4 overflow-hidden",children:s.jsx("div",{className:"h-full bg-white rounded-[2.5rem] border border-slate-200 shadow-xl shadow-slate-200/40 overflow-hidden flex flex-col",children:s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{className:"sticky top-0 bg-slate-50/80 backdrop-blur-md z-10 border-b border-slate-200",children:s.jsxs("tr",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:[s.jsx("th",{className:"px-6 py-4 w-12 text-center",children:"No."}),s.jsx("th",{className:"px-6 py-4",children:""}),s.jsx("th",{className:"px-6 py-4 text-center",children:" "}),s.jsx("th",{className:"px-6 py-4",children:"  "}),s.jsx("th",{className:"px-6 py-4",children:"IP / "}),s.jsx("th",{className:"px-6 py-4 text-center",children:" "}),s.jsx("th",{className:"px-6 py-4 w-20 text-center",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:n.length===0&&!l?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"py-40 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx(no,{size:48,className:"text-slate-100"}),s.jsx("p",{className:"text-slate-300 font-black text-lg",children:"  ."})]})})}):n.map((w,j)=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[s.jsx("td",{className:"px-6 py-4 text-center text-[11px] font-mono text-slate-300 font-bold",children:n.length-j}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-xl bg-slate-100 flex items-center justify-center text-slate-400 group-hover:bg-indigo-50 group-hover:text-indigo-500 transition-all",children:s.jsx(QA,{size:14})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-black text-slate-700",children:w.user_name||"System"}),s.jsxs("div",{className:"text-[10px] text-slate-400 font-bold",children:["UID: ",w.user_id||"N/A"]})]})]})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black border tracking-wider uppercase ${g(w.action_type)}`,children:w.action_type})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-slate-600",children:w.description||"No description"}),w.target_table&&s.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[s.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-400 font-black px-1.5 py-0.5 rounded uppercase",children:w.target_table}),s.jsxs("span",{className:"text-[10px] text-slate-300 font-mono",children:["ID: ",w.target_id||"-"]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-mono text-slate-500 font-bold",children:[s.jsx($C,{size:10,className:"text-slate-300"}),w.ip_address||"Local"]}),s.jsx("div",{className:"text-[9px] text-slate-300 truncate max-w-[150px] font-medium",title:w.user_agent,children:w.user_agent||"N/A"})]})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"text-xs font-black text-slate-500 font-mono",children:Wt(w.created_at).format("HH:mm:ss")}),s.jsx("div",{className:"text-[9px] text-slate-300 font-bold",children:Wt(w.created_at).format("YYYY-MM-DD")})]})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("button",{onClick:()=>h(w),className:"w-8 h-8 rounded-xl bg-white border border-slate-100 shadow-sm flex items-center justify-center text-slate-400 hover:text-indigo-600 hover:border-indigo-100 transition-all active:scale-95",children:s.jsx(cc,{size:14})})})]},w.log_id))})]})})})}),u&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-md animate-in fade-in duration-300",children:s.jsxs("div",{className:"bg-white rounded-[2.5rem] w-full max-w-2xl shadow-2xl overflow-hidden border border-white/50 animate-in zoom-in-95 duration-300",children:[s.jsxs("div",{className:"bg-slate-50 p-8 border-b border-slate-100 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black uppercase border ${g(u.action_type)}`,children:u.action_type}),s.jsx("span",{className:"text-[10px] font-black text-slate-400 tracking-widest uppercase",children:"Detail View"})]}),s.jsx("h3",{className:"text-2xl font-black text-slate-800 tracking-tight",children:"   "})]}),s.jsx("button",{onClick:()=>h(null),className:"w-10 h-10 rounded-full bg-white border border-slate-200 text-slate-400 hover:text-slate-600 transition-all flex items-center justify-center",children:s.jsx(bb,{size:20,className:"rotate-45"})})]}),s.jsxs("div",{className:"p-8 space-y-8 overflow-y-auto max-h-[60vh] custom-scrollbar",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"p-5 bg-slate-50 rounded-3xl border border-slate-100",children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2",children:"Actor ()"}),s.jsx("div",{className:"text-lg font-black text-slate-700",children:u.user_name||"System"}),s.jsxs("div",{className:"text-xs text-slate-400 font-bold mt-1",children:["ID: ",u.user_id||"Internal Process"]})]}),s.jsxs("div",{className:"p-5 bg-slate-50 rounded-3xl border border-slate-100",children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2",children:"Timestamp ()"}),s.jsx("div",{className:"text-lg font-black text-slate-700",children:Wt(u.created_at).format("YYYY-MM-DD HH:mm:ss")}),s.jsx("div",{className:"text-xs text-slate-400 font-bold mt-1",children:"UTC Reference Available"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"flex items-center gap-2 text-sm font-black text-slate-800 uppercase tracking-tight",children:[s.jsx(wd,{size:16,className:"text-indigo-500"}),"Data Changes (  )"]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-[10px] font-black text-slate-400 uppercase ml-2 flex items-center gap-1.5",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Old State ( )"]}),s.jsx("pre",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100 text-[11px] font-mono text-slate-500 overflow-x-auto",children:u.old_values?JSON.stringify(u.old_values,null,2):"No previous data"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-[10px] font-black text-emerald-500 uppercase ml-2 flex items-center gap-1.5",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"})," New State (  )"]}),s.jsx("pre",{className:"p-4 bg-emerald-50/30 rounded-2xl border border-emerald-100 text-[11px] font-mono text-slate-700 overflow-x-auto",children:u.new_values?JSON.stringify(u.new_values,null,2):"No modification data"})]})]})]}),s.jsxs("div",{className:"p-5 bg-slate-900 rounded-3xl text-white relative overflow-hidden shadow-xl shadow-slate-200",children:[s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2",children:"Technical Meta"}),s.jsxs("div",{className:"flex gap-8 text-[11px] font-bold",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($C,{size:12,className:"text-indigo-400"}),"IP: ",s.jsx("span",{className:"text-white",children:u.ip_address||"N/A"})]}),s.jsxs("div",{className:"flex-1 truncate",children:["UA: ",s.jsx("span",{className:"text-white",children:u.user_agent||"N/A"})]})]})]}),s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/10 rounded-full blur-3xl -mr-16 -mt-16"})]})]}),s.jsx("div",{className:"p-8 bg-slate-50 border-t border-slate-100 flex justify-end",children:s.jsx("button",{onClick:()=>h(null),className:"px-8 py-3 bg-slate-900 text-white rounded-2xl text-xs font-black shadow-lg shadow-slate-200 transition-all active:scale-95",children:" "})})]})})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[r?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Ii,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:r?"  ...":"  ..."})]})})},iIe=({fileInputRef:a,onCsvUpload:e})=>s.jsxs("div",{className:"flex justify-between items-end mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Sales Management System"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Reception"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>a.current?.click(),className:"group h-10 px-5 rounded-xl bg-white border border-slate-200 text-slate-600 font-bold hover:border-indigo-500 hover:text-indigo-600 transition-all flex items-center gap-2 shadow-sm text-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-lg group-hover:scale-110 transition-transform",children:"upload_file"}),"  (CSV)"]}),s.jsx("input",{type:"file",ref:a,onChange:e,className:"hidden",accept:".csv"})]})]}),sIe=({orderDate:a,setOrderDate:e,custSearchRef:t,handleSearchCustomer:r,customer:n})=>s.jsxs("div",{className:"grid grid-cols-12 gap-2 items-stretch",children:[s.jsxs("div",{className:"col-span-2 bg-white rounded-[1.5rem] px-3 py-2 border border-slate-100 shadow-sm transition-all hover:shadow-md text-sm",children:[s.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest mb-1 block ml-1",children:" "}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"date",value:a,onChange:i=>e(i.target.value),className:"w-full h-10 bg-slate-100 border-slate-200 border rounded-xl font-black text-slate-800 focus:ring-2 focus:ring-indigo-500 transition-all px-3 text-[14px]"})})]}),s.jsxs("div",{className:"col-span-3 bg-white rounded-[1.5rem] px-3 py-2 border border-slate-100 shadow-sm transition-all hover:shadow-md text-sm",children:[s.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest mb-1 block ml-1",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:t,onKeyDown:i=>i.key==="Enter"&&r(),placeholder:"   ...",className:"w-full h-10 bg-slate-900 border-none rounded-xl text-white placeholder:text-slate-500 font-bold px-4 pr-12 focus:ring-4 focus:ring-indigo-500/20 transition-all text-[14px]"}),s.jsx("button",{onClick:r,className:"absolute right-1.5 top-1.5 bottom-1.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg px-2 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-base",children:"search"})})]})]}),s.jsxs("div",{className:"col-span-7 bg-white rounded-[1.5rem] px-3 py-2 border border-slate-100 shadow-sm transition-all hover:shadow-md relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 w-24 h-full bg-indigo-50/50 -skew-x-12 translate-x-10 transition-transform group-hover:translate-x-5"}),s.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest mb-1 block ml-1",children:"  "}),s.jsx("div",{className:"flex items-center gap-6 h-10 px-1 relative z-10",children:n?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-white font-black text-xs",children:n.customer_name[0]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-black text-slate-900 block leading-tight text-sm",children:n.customer_name}),s.jsx("span",{className:"text-[8px] text-slate-400 font-bold uppercase",children:n.customer_id})]})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1 text-slate-500 mb-0.5",children:[s.jsx("span",{className:"material-symbols-rounded text-[12px]",children:"location_on"}),s.jsx("span",{className:"text-[8px] font-black uppercase",children:"  "})]}),s.jsxs("span",{className:"text-xs text-slate-700 font-bold block truncate",children:["[",n.zip_code||"-","] ",n.address_primary," ",n.address_detail]})]}),s.jsxs("div",{className:"shrink-0 text-right",children:[s.jsxs("div",{className:"flex items-center justify-end gap-1 text-indigo-500 mb-0.5",children:[s.jsx("span",{className:"material-symbols-rounded text-[12px]",children:"call"}),s.jsx("span",{className:"text-[8px] font-black uppercase",children:""})]}),s.jsx("span",{className:"text-xs font-black text-slate-900",children:n.mobile_number})]})]}):s.jsxs("div",{className:"flex items-center gap-2 text-slate-600 italic font-black text-xs",children:[s.jsx("span",{className:"material-symbols-rounded animate-pulse text-indigo-500 text-base",children:"fingerprint"}),"      ..."]})})]})]}),lIe=({inputState:a,handleInputChange:e,products:t,addresses:r,prodSelectRef:n,handleAddressSearch:i,handleAddRow:l,editingTempId:o})=>s.jsxs("div",{className:"bg-white rounded-[1.5rem] px-5 py-3 shadow-lg border border-slate-200/60 relative mb-2",children:[s.jsxs("div",{className:"absolute top-3 left-6 flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-600 animate-pulse"}),s.jsx("span",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest",children:" "})]}),s.jsxs("div",{className:"grid grid-cols-12 gap-2 mb-2 mt-3",children:[s.jsxs("div",{className:"col-span-3",children:[s.jsx("label",{htmlFor:"product-select",className:"text-[10.5px] font-bold text-slate-600 uppercase mb-1 block",children:""}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{id:"product-select",name:"product",value:a.product,onChange:e,ref:n,className:"w-full h-10 rounded-xl bg-white border-slate-200 text-[14px] font-bold focus:ring-2 focus:ring-indigo-600 transition-all appearance-none px-4",children:[s.jsx("option",{value:"",children:" "}),t.map(c=>s.jsx("option",{value:c.product_name,children:c.product_name},c.product_id))]}),s.jsx("span",{className:"material-symbols-rounded absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400 text-base",children:"unfold_more"})]})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-slate-600 uppercase text-center mb-1 block",children:""}),s.jsx("input",{name:"spec",value:a.spec,readOnly:!0,className:"w-full h-10 rounded-xl bg-slate-100 border-none text-[14px] text-center font-bold text-slate-500 shadow-inner"})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{htmlFor:"qty-input",className:"text-[10.5px] font-bold text-slate-600 uppercase text-center mb-1 block",children:""}),s.jsx("input",{id:"qty-input",type:"number",name:"qty",value:a.qty,onChange:e,inputMode:"numeric",className:"w-full h-10 rounded-xl bg-white border-slate-200 text-center font-black focus:ring-2 focus:ring-indigo-600 transition-all text-[14px]"})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{htmlFor:"price-input",className:"text-[10.5px] font-bold text-slate-600 uppercase text-right pr-2 mb-1 block",children:""}),s.jsx("input",{id:"price-input",name:"price",value:Fe(a.price),onChange:e,inputMode:"numeric",className:"w-full h-10 rounded-xl bg-white border-slate-200 text-right font-black pr-3 focus:ring-2 focus:ring-indigo-600 transition-all text-[14px]"})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-slate-600 uppercase text-center mb-1 block",children:"(%)"}),s.jsx("input",{type:"number",name:"discountRate",value:a.discountRate,onChange:e,inputMode:"numeric",className:"w-full h-10 rounded-xl bg-white border-slate-200 text-center font-black focus:ring-2 focus:ring-indigo-600 transition-all text-[14px] text-indigo-600 px-0"})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{htmlFor:"amount-input",className:"text-[10.5px] font-bold text-indigo-600 uppercase text-right pr-2 mb-1 block",children:""}),s.jsx("input",{id:"amount-input",value:Fe(a.amount),readOnly:!0,className:"w-full h-10 rounded-xl bg-slate-100 border-none text-slate-900 text-right font-black text-[14px] px-4 shadow-inner"})]})]}),s.jsxs("div",{className:"bg-slate-100/50 px-4 py-3 rounded-[1.5rem] border border-slate-200 flex flex-col gap-2",children:[s.jsxs("div",{className:"flex gap-4 items-end",children:[s.jsxs("div",{className:"shrink-0 flex items-center gap-3 pr-4 border-r border-slate-200",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-white border border-slate-200 flex items-center justify-center text-slate-500 shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"local_shipping"})}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-black text-slate-700 uppercase tracking-tight block mb-1",children:" "}),s.jsxs("select",{name:"shipType",value:a.shipType,onChange:e,className:"w-48 h-10 rounded-lg border-slate-200 bg-white text-[14px] font-bold text-slate-900 shadow-sm focus:ring-2 focus:ring-indigo-500 px-3 py-1 transition-all",children:[s.jsx("option",{value:"basic",children:" "}),r.map(c=>s.jsx("option",{value:`addr_${c.address_id}`,children:c.is_default?" ":c.address_alias||c.address_primary},c.address_id)),s.jsx("option",{value:"new",children:" "})]})]})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-12 gap-2",children:[s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-slate-600 uppercase block mb-1 ml-1 text-center",children:""}),s.jsx("input",{name:"shipZip",value:a.shipZip,readOnly:!0,onClick:()=>i("input"),className:"w-full h-9 rounded-lg border-slate-100 text-[14px] font-black text-slate-900 text-center bg-slate-100 shadow-sm cursor-pointer"})]}),s.jsxs("div",{className:"col-span-5",children:[s.jsx("label",{htmlFor:"ship-addr-input",className:"text-[10.5px] font-bold text-slate-600 uppercase block mb-1 ml-1",children:"   ( )"}),s.jsx("input",{id:"ship-addr-input",name:"shipAddr1",value:a.shipAddr1,readOnly:!0,onClick:()=>i("input"),className:"w-full h-9 rounded-lg border-slate-100 text-[14px] font-bold text-slate-900 bg-slate-100 px-2 shadow-sm cursor-pointer"})]}),s.jsxs("div",{className:"col-span-6",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-slate-600 uppercase block mb-1 ml-1",children:"  "}),s.jsx("input",{name:"shipAddr2",value:a.shipAddr2,onChange:e,placeholder:" ,    ",className:"w-full h-9 rounded-lg border-slate-200 bg-slate-100 text-[14px] font-bold text-slate-900 px-3 focus:ring-2 focus:ring-indigo-600 transition-all"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-slate-600 uppercase block mb-1 ml-1",children:"()"}),s.jsx("input",{name:"shipName",value:a.shipName,onChange:e,placeholder:"",className:"w-full h-10 rounded-lg border-slate-200 bg-slate-100 text-[14px] font-bold text-slate-900 px-3 focus:ring-2 focus:ring-indigo-600 transition-all"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-slate-600 uppercase block mb-1 ml-1",children:""}),s.jsx("input",{name:"shipMobile",value:a.shipMobile,onChange:e,placeholder:"010-0000-0000",inputMode:"tel",className:"w-full h-10 rounded-lg border-slate-200 bg-slate-100 text-[14px] font-black text-slate-900 px-3 focus:ring-2 focus:ring-indigo-600 text-center"})]}),s.jsxs("div",{className:"col-span-4",children:[s.jsx("label",{className:"text-[10.5px] font-bold text-indigo-600 uppercase block mb-1 ml-1",children:" "}),s.jsx("input",{name:"shipMemo",value:a.shipMemo,onChange:e,placeholder:"  ...",className:"w-full h-10 rounded-lg border-slate-200 bg-slate-100 text-[14px] font-black text-black px-3 focus:ring-2 focus:ring-indigo-600 transition-all"})]}),s.jsxs("div",{className:"col-span-4 flex items-center justify-between pl-4 gap-3",children:[s.jsx("div",{className:"flex flex-col gap-1",children:s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none group",children:[s.jsx("input",{type:"checkbox",name:"isSaveAddr",checked:a.isSaveAddr,onChange:e,className:"w-4 h-4 rounded-md text-blue-600 border-slate-300 focus:ring-0 cursor-pointer"}),s.jsx("span",{className:"text-[11px] font-black text-blue-600 group-hover:text-blue-700 transition-colors uppercase",children:" "})]})}),s.jsxs("button",{onClick:l,className:`flex-1 h-11 px-6 rounded-xl font-black text-xs flex items-center justify-center gap-2 transition-all shadow-lg ${o?"bg-emerald-500 hover:bg-emerald-600 text-white":"bg-slate-900 hover:bg-indigo-600 text-white shadow-indigo-200"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:o?"edit_square":"add_circle"}),o?" ":" "]})]})]})]})]}),oIe=({salesRows:a,editingTempId:e,handleEditRow:t,handleDeleteRow:r})=>s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col bg-white rounded-[1.5rem] shadow-xl border border-slate-200 relative mb-2",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"}),s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar p-0.5",children:s.jsxs("table",{className:"w-full text-xs border-separate border-spacing-0",children:[s.jsx("thead",{className:"sticky top-0 z-20",children:s.jsxs("tr",{className:"bg-slate-50/80 backdrop-blur-md",children:[s.jsx("th",{className:"px-4 py-1.5 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-1.5 text-left text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-1.5 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-1.5 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-1.5 text-right text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-1.5 text-right text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-1.5 text-right text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-1.5 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-1.5 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[a.map((n,i)=>s.jsxs("tr",{className:`group hover:bg-slate-50/50 transition-all ${e===n.tempId?"bg-indigo-50/40":""}`,children:[s.jsx("td",{className:"px-4 py-1.5 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:a.length-i}),s.jsx("td",{className:"px-4 py-1.5 border-b border-slate-100",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-6 rounded-full bg-slate-100 group-hover:bg-indigo-500 transition-all"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-black text-slate-900 text-sm group-hover:text-indigo-600 transition-colors uppercase",children:n.product}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[9px] text-slate-400 font-bold uppercase truncate max-w-[150px]",children:n.shipAddr1}),s.jsx("span",{className:"text-[9px] text-indigo-500/70 font-black shrink-0",children:n.shipName})]})]})]})}),s.jsx("td",{className:"px-4 py-1.5 text-center border-b border-slate-100",children:s.jsx("div",{className:"inline-flex items-center justify-center min-w-[32px] h-5 rounded bg-slate-100 text-slate-500 font-bold text-[9px]",children:n.spec||"-"})}),s.jsx("td",{className:"px-4 py-1.5 text-center font-black text-black border-b border-slate-100",children:n.qty}),s.jsx("td",{className:"px-4 py-1.5 text-right font-bold text-slate-500 border-b border-slate-100",children:Fe(n.price)}),s.jsxs("td",{className:"px-4 py-1.5 text-right font-bold text-indigo-500 border-b border-slate-100",children:[n.discountRate,"%"]}),s.jsx("td",{className:"px-4 py-1.5 text-right border-b border-slate-100",children:s.jsx("span",{className:"text-sm font-black text-slate-900 tracking-tighter",children:Fe(n.amount)})}),s.jsx("td",{className:"px-4 py-1.5 text-center border-b border-slate-100",children:s.jsx("span",{className:"text-[9px] font-black text-slate-500 bg-slate-50 px-1.5 py-0.5 rounded border border-slate-100",children:n.status})}),s.jsx("td",{className:"px-4 py-1.5 text-center border-b border-slate-100",children:s.jsxs("div",{className:"flex justify-center gap-1.5 opacity-40 group-hover:opacity-100 transition-all duration-300",children:[s.jsx("button",{onClick:()=>t(n),className:"w-7 h-7 rounded-lg bg-white border border-slate-200 text-slate-500 hover:text-indigo-600 hover:border-indigo-200 hover:shadow-sm transition-all",title:"",children:s.jsx("span",{className:"material-symbols-rounded text-base",children:"edit_note"})}),s.jsx("button",{onClick:()=>r(n),className:"w-7 h-7 rounded-lg bg-white border border-slate-200 text-slate-500 hover:text-rose-600 hover:border-rose-200 hover:shadow-sm transition-all",title:"",children:s.jsx("span",{className:"material-symbols-rounded text-base",children:"delete_sweep"})})]})})]},n.tempId)),a.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"9",className:"pt-12 pb-6 text-center bg-white",children:s.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400",children:[s.jsx("span",{className:"material-symbols-rounded text-3xl mb-2 opacity-50",children:"auto_stories"}),s.jsx("div",{className:"font-black text-sm text-slate-700",children:"  "}),s.jsx("p",{className:"text-slate-500 text-[11px] mt-1 font-medium",children:"    ."})]})})})]})]})})]}),cIe=({summary:a,handleReset:e,handlePrintStatement:t,handleSaveAll:r,isProcessing:n,customer:i,salesRows:l})=>s.jsxs("div",{className:"bg-slate-900 p-4 px-8 flex justify-between items-center text-white border-t border-slate-800 rounded-b-[1.5rem]",children:[s.jsxs("div",{className:"flex gap-10 items-center",children:[s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40",children:s.jsx("span",{className:"material-symbols-rounded",children:"analytics"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"  "}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsxs("span",{className:"text-xl font-black",children:[a.count,""]}),s.jsx("span",{className:"mx-2 w-1 h-3 bg-white/10 rounded-full"}),s.jsxs("span",{className:"text-xl font-black",children:[a.qty,""]})]})]})]}),s.jsxs("div",{className:"flex flex-col pl-10 border-l border-white/10 ml-2",children:[s.jsx("span",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest italic mb-0.5",children:" "}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-[9px] font-black text-indigo-400/50 uppercase",children:"KRW"}),s.jsxs("span",{className:"text-xl font-black text-indigo-400 leading-none",children:[Fe(a.amount),""]})]})]})]}),s.jsxs("div",{className:"flex gap-3 h-12",children:[s.jsx("button",{onClick:e,className:"px-6 rounded-xl bg-slate-800 hover:bg-slate-700 text-slate-400 font-black transition-all text-xs",children:""}),s.jsxs("button",{onClick:t,className:`px-6 rounded-xl border-2 font-black transition-all text-xs flex items-center gap-2 ${!i||l.length===0?"bg-slate-800 border-slate-700 text-slate-500 cursor-not-allowed opacity-50":"bg-white border-slate-700 text-slate-700 hover:bg-slate-50"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"print"}),"  "]}),s.jsxs("button",{onClick:r,disabled:n||!i,className:`px-10 rounded-xl font-black shadow-xl flex items-center gap-2 transition-all ${n?"bg-slate-700 text-slate-500":"bg-indigo-600 hover:bg-indigo-500 text-white shadow-indigo-600/40"}`,children:[n?s.jsx("span",{className:"material-symbols-rounded animate-spin text-lg",children:"refresh"}):s.jsx("span",{className:"material-symbols-rounded text-lg",children:"save_as"}),s.jsx("span",{className:"text-sm uppercase tracking-tight",children:" "})]})]})]}),dIe=({isOpen:a,onClose:e,searchResults:t,selectCustomer:r,setQuickRegisterName:n,setShowRegisterModal:i,custSearchRef:l})=>a?s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/60 backdrop-blur-sm",onClick:e}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-4xl shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200 text-slate-900 text-left",children:[s.jsxs("div",{className:"bg-indigo-600 p-6 text-white flex justify-between items-center",children:[s.jsx("h3",{className:"text-xl font-bold",children:" "}),s.jsx("button",{onClick:e,className:"hover:bg-white/10 rounded-lg p-1",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"   .   ."}),s.jsx("div",{className:"max-h-[400px] overflow-y-auto pr-2 stylish-scrollbar",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"sticky top-0 bg-white",children:s.jsxs("tr",{className:"text-slate-400 text-[10px] uppercase font-black border-b border-slate-100",children:[s.jsx("th",{className:"py-2 text-left",children:""}),s.jsx("th",{className:"py-2 text-left",children:""}),s.jsx("th",{className:"py-2 text-left",children:""}),s.jsx("th",{className:"py-2 text-center",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:t.map(o=>s.jsxs("tr",{"data-testid":"customer-row",onClick:()=>{r(o),e()},className:"hover:bg-slate-50/80 group transition-colors cursor-pointer border-b border-slate-50 last:border-0",children:[s.jsx("td",{className:"py-3 px-2 font-bold text-slate-800 group-hover:text-indigo-700 transition-colors",children:o.customer_name}),s.jsx("td",{className:"py-3 px-2 text-slate-600 font-medium",children:o.mobile_number}),s.jsx("td",{className:"py-3 px-2 text-slate-400 text-xs truncate max-w-[180px]",children:o.address_primary}),s.jsx("td",{className:"py-3 px-2 text-center",children:s.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-slate-400 group-hover:bg-indigo-600 group-hover:text-white transition-all shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"check"})})})]},o.customer_id))})]})})]}),s.jsxs("div",{className:"bg-slate-50 p-4 flex justify-between items-center text-left",children:[s.jsx("span",{className:"text-xs text-slate-400",children:"  ?"}),s.jsxs("button",{onClick:()=>{e(),n(l.current?.value),i(!0)},className:"px-4 py-2 bg-slate-900 text-white rounded-xl font-bold text-sm hover:bg-slate-800 transition-all flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"person_add"}),"   "]})]})]})]}):null,uIe=({isOpen:a,onClose:e,quickRegisterName:t,fileInputRef:r,handleQuickRegister:n,handleAddressSearch:i})=>a?s.jsxs("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/60 backdrop-blur-sm",onClick:e,"aria-label":"modal-background"}),s.jsxs("form",{"aria-label":"quick-register-form",onSubmit:l=>{l.preventDefault();const o=l.target.elements,c={name:o.name.value,mobile:o.mobile.value,phone:o.phone.value,level:o.level.value,zip:o.zip.value,addr1:o.addr1.value,addr2:o.addr2.value,memo:o.memo.value};n(c)},className:"bg-white rounded-3xl w-full max-w-3xl shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200 text-slate-900 text-left",children:[s.jsxs("div",{className:"bg-slate-900 p-6 text-white flex justify-between items-center text-left",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold",children:"   "}),s.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase mt-1",children:"     "})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>r.current?.click(),className:"h-9 px-4 rounded-xl bg-slate-800 text-white text-xs font-bold hover:bg-slate-700 transition-all flex items-center gap-2 border border-slate-700",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"upload_file"})," "]}),s.jsx("button",{type:"button",onClick:e,className:"hover:bg-white/10 rounded-lg p-1 text-white",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{htmlFor:"quick-name",className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsx("input",{id:"quick-name",name:"name",defaultValue:t,required:!0,className:"w-full h-11 px-4 rounded-xl bg-slate-100 border-none focus:ring-4 focus:ring-indigo-600/20 font-black text-[14px]",placeholder:" "})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{htmlFor:"quick-level",className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:" "}),s.jsxs("select",{id:"quick-level",name:"level",className:"w-full h-11 px-4 rounded-xl bg-slate-100 border-none focus:ring-4 focus:ring-indigo-600/20 font-black text-[14px] appearance-none",children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:"VIP",children:"VIP "}),s.jsx("option",{value:"/",children:"/"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{htmlFor:"quick-mobile",className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsx("input",{id:"quick-mobile",name:"mobile",required:!0,placeholder:"010-0000-0000",onChange:l=>l.target.value=kn(l.target.value),className:"w-full h-11 px-4 rounded-xl bg-slate-100 border-none focus:ring-4 focus:ring-indigo-600/20 font-black text-[14px]"})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{htmlFor:"quick-phone",className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsx("input",{id:"quick-phone",name:"phone",placeholder:"",onChange:l=>l.target.value=kn(l.target.value),className:"w-full h-11 px-4 rounded-xl bg-slate-100 border-none focus:ring-4 focus:ring-indigo-600/20 font-black text-[14px]"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{className:"col-span-1",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsx("input",{name:"zip",id:"quick-zip",className:"w-full h-11 px-4 rounded-xl bg-slate-100 border-none cursor-pointer font-black text-[14px]",readOnly:!0,onClick:()=>i({zipId:"quick-zip",addr1Id:"quick-addr1"}),placeholder:""})]}),s.jsxs("div",{className:"col-span-3",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:" "}),s.jsx("input",{name:"addr1",id:"quick-addr1",className:"w-full h-11 px-4 rounded-xl bg-slate-100 border-none cursor-pointer font-black text-[14px]",readOnly:!0,onClick:()=>i({zipId:"quick-zip",addr1Id:"quick-addr1"}),placeholder:"  "})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:" "}),s.jsx("input",{name:"addr2",id:"quick-addr2",className:"w-full h-11 px-4 rounded-xl bg-slate-100 border-none focus:ring-4 focus:ring-indigo-600/20 font-black text-[14px]",placeholder:" "})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:"   "}),s.jsx("textarea",{name:"memo",rows:"2",className:"w-full px-4 py-3 rounded-xl bg-slate-100 border-none focus:ring-4 focus:ring-indigo-600/20 font-black text-[14px]",placeholder:"   "})]})]}),s.jsxs("div",{className:"bg-slate-50 p-6 flex justify-end gap-3 shrink-0",children:[s.jsx("button",{type:"button",onClick:e,className:"px-6 py-3 rounded-xl text-slate-500 font-black hover:bg-slate-200 transition-all text-sm",children:""}),s.jsx("button",{type:"submit",className:"px-10 py-3 bg-indigo-600 text-white rounded-xl font-black shadow-lg shadow-indigo-600/30 hover:bg-indigo-500 transition-all text-sm",children:"   "})]})]})]}):null,hIe=({isOpen:a,onClose:e})=>a?s.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/60 backdrop-blur-sm shadow-2xl",onClick:e}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-[500px] h-[600px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col",children:[s.jsxs("div",{className:"bg-slate-900 px-6 py-4 text-white flex justify-between items-center shrink-0",children:[s.jsx("span",{className:"font-bold",children:" "}),s.jsx("button",{onClick:e,className:"hover:bg-white/10 rounded-lg p-1",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{id:"addr-layer-container",className:"flex-1 w-full bg-slate-50"})]})]}):null,HV=`
    @media print {
        @page { size: A4; margin: 0; }
        html, body { 
            background: white !important; 
            color: black !important;
            color-scheme: light !important;
            margin: 0 !important;
            padding: 0 !important;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }
        nav, .tauri-drag-region, .print\\:hidden { display: none !important; }
        #root > div:not(.fixed) { display: none !important; }
        #printable-statement {
            display: block !important;
            position: absolute !important;
            left: 0 !important;
            top: 0 !important;
            width: 100% !important;
            margin: 0 !important;
            padding: 10mm !important;
            padding-top: 15mm !important;
            visibility: visible !important;
            background: white !important;
            box-shadow: none !important;
        }
        #printable-statement * {
            visibility: visible !important;
            border-color: black !important;
        }
        .no-break {
            page-break-inside: avoid !important;
            break-inside: avoid !important;
        }
    }
    .custom-scrollbar::-webkit-scrollbar { width: 6px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
`,fIe=({isOpen:a,onClose:e,customer:t,salesRows:r,companyInfo:n,orderDate:i,summary:l,onPrint:o})=>{if(!a||!t)return null;const c=f=>{const p=["","","",""],g=["","","",""],b=["","","","","","","","","",""];if(f===0)return"";let w="",j=0,k=f;for(;k>0;){let T=k%1e4,E="";for(let I=0;I<4;I++){let R=T%10;R>0&&(E=(R===1&&I>0?"":b[R])+p[I]+E),T=Math.floor(T/10)}E!==""&&(w=E+g[j]+w),j++,k=Math.floor(k/1e4)}return w},d=Wt(i).format("YYYY MM DD"),u=F.useMemo(()=>{const f=[...r];for(;f.length<12;)f.push(null);return f},[r]),h=()=>{const f=document.getElementById("printable-statement");if(!f)return;const p=`
            <style>${HV}</style>
            ${f.outerHTML}
        `;oo(p)};return s.jsxs("div",{className:"fixed inset-0 z-[300] bg-slate-900/60 backdrop-blur-md flex items-center justify-center p-4 print:p-0 print:bg-white print:block print:relative print:z-0",children:[s.jsxs("div",{className:"fixed top-8 right-8 flex flex-col gap-4 print:hidden z-[310]",children:[s.jsx("button",{onClick:e,className:"w-14 h-14 bg-white text-slate-400 rounded-2xl shadow-2xl hover:text-rose-500 hover:scale-110 active:scale-95 transition-all flex items-center justify-center group",title:"",children:s.jsx(Ri,{size:32,className:"group-hover:rotate-90 transition-transform duration-300"})}),s.jsx("div",{className:"h-px bg-white/20 w-full"}),s.jsxs("button",{onClick:h,className:"h-14 px-8 rounded-2xl font-black text-sm bg-indigo-600 text-white shadow-2xl shadow-indigo-500/30 hover:bg-indigo-700 hover:-translate-y-1 active:translate-y-0 transition-all flex items-center gap-3",children:[s.jsx(HH,{size:20}),"  / PDF "]})]}),s.jsx("div",{className:"w-full max-w-[210mm] max-h-[92vh] bg-white rounded-[2.5rem] shadow-[0_50px_100px_-20px_rgba(0,0,0,0.5)] overflow-y-auto custom-scrollbar print:max-h-none print:shadow-none print:rounded-none print:overflow-visible print:w-full relative",children:s.jsxs("div",{id:"printable-statement",className:"p-[15mm] bg-white text-slate-900 print:p-[10mm]",children:[s.jsxs("div",{className:"text-center mb-6 relative",children:[s.jsx("h1",{className:"text-3xl font-black tracking-[0.5em] underline underline-offset-8 decoration-2 text-slate-800",children:"    "}),s.jsxs("div",{className:"absolute top-0 right-0 text-[10px] font-bold text-slate-400 border border-slate-200 px-2 py-1 rounded",children:[": ",Wt(i).format("YYYYMMDD"),"-",t.customer_id.toString().slice(-4)]})]}),s.jsxs("div",{className:"flex gap-4 mb-4 items-stretch",children:[s.jsx("div",{className:"flex-1 flex flex-col",children:s.jsx("table",{className:"w-full border-2 border-slate-800 h-full border-collapse",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("th",{className:"w-20 bg-slate-100 border border-slate-800 p-1.5 text-xs font-black",children:" "}),s.jsx("td",{className:"border border-slate-800 p-1.5 text-sm font-bold text-center italic",children:d})]}),s.jsxs("tr",{children:[s.jsx("th",{className:"bg-slate-100 border border-slate-800 p-2 text-xs font-black h-16",children:""}),s.jsxs("td",{className:"border border-slate-800 p-2 align-middle",children:[s.jsxs("div",{className:"text-lg font-black text-center",children:[t.customer_name," ",s.jsx("span",{className:"text-base font-bold",children:""})]}),s.jsx("div",{className:"text-[9px] text-slate-500 text-center",children:t.mobile_number})]})]}),s.jsxs("tr",{children:[s.jsx("th",{className:"bg-slate-100 border border-slate-800 p-1.5 text-xs font-black",children:""}),s.jsx("td",{className:"border border-slate-800 p-1.5 bg-slate-50",children:s.jsxs("div",{className:"flex justify-between items-center px-2",children:[s.jsx("span",{className:"text-sm font-black",children:""}),s.jsx("span",{className:"text-base font-black",children:Fe(l.amount)})]})})]})]})})}),s.jsx("div",{className:"w-[55%] flex flex-col",children:s.jsx("table",{className:"w-full border-2 border-slate-800 border-collapse h-full",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsxs("th",{rowSpan:4,className:"w-8 bg-slate-100 border border-slate-800 text-[10px] leading-tight font-black text-center",children:["",s.jsx("br",{}),"",s.jsx("br",{}),""]}),s.jsx("th",{className:"w-20 bg-slate-100 border border-slate-800 p-1 text-[10px] font-black",children:""}),s.jsx("td",{colSpan:3,className:"border border-slate-800 p-1 text-center font-black text-sm tracking-widest",children:n?.business_reg_number||"000-00-00000"})]}),s.jsxs("tr",{children:[s.jsx("th",{className:"bg-slate-100 border border-slate-800 p-1 text-[10px] font-black",children:" "}),s.jsx("td",{className:"border border-slate-800 p-1 text-xs font-bold text-center",children:n?.company_name||"()"}),s.jsx("th",{className:"w-12 bg-slate-100 border border-slate-800 p-1 text-[10px] font-black text-center",children:" "}),s.jsxs("td",{className:"border border-slate-800 p-1 text-xs text-center relative",children:[s.jsx("span",{className:"font-bold",children:n?.representative_name||""}),s.jsx("div",{className:"absolute top-0 right-1 w-6 h-6 opacity-20 border border-rose-500 rounded-full flex items-center justify-center text-[8px] font-bold text-rose-500",children:""})]})]}),s.jsxs("tr",{children:[s.jsx("th",{className:"bg-slate-100 border border-slate-800 p-1 text-[10px] font-black",children:" "}),s.jsx("td",{colSpan:3,className:"border border-slate-800 p-1 text-[9px] leading-tight font-medium",children:n?.address||" ..."})]}),s.jsxs("tr",{children:[s.jsx("th",{className:"bg-slate-100 border border-slate-800 p-1 text-[10px] font-black",children:" "}),s.jsx("td",{colSpan:3,className:"border border-slate-800 p-1 text-xs font-bold",children:n?.phone_number||n?.mobile_number||"-"})]})]})})})]}),s.jsxs("div",{className:"border-2 border-slate-800 p-3 mb-4 bg-slate-50 flex justify-between items-center px-8",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-xs font-black text-slate-400",children:" (KOR)"}),s.jsxs("span",{className:"text-lg font-black text-slate-800",children:[" ",c(l.amount)," "]})]}),s.jsxs("div",{className:"text-slate-400 text-sm italic font-medium",children:["(  ",Fe(l.amount)," )"]})]}),s.jsx("div",{className:"border-x-2 border-t-2 border-slate-800",children:s.jsxs("table",{className:"w-full border-collapse table-fixed",children:[s.jsx("thead",{className:"bg-slate-100 border-b-2 border-slate-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"w-10 p-2 text-[10px] font-black border-r border-slate-800",children:"NO"}),s.jsx("th",{className:"w-auto p-2 text-[10px] font-black border-r border-slate-800",children:"  "}),s.jsx("th",{className:"w-12 p-2 text-[10px] font-black border-r border-slate-800",children:""}),s.jsx("th",{className:"w-12 p-2 text-[10px] font-black border-r border-slate-800",children:""}),s.jsx("th",{className:"w-24 p-2 text-[10px] font-black border-r border-slate-800",children:""}),s.jsx("th",{className:"w-28 p-2 text-[10px] font-black border-r border-slate-800",children:""}),s.jsx("th",{className:"w-20 p-2 text-[10px] font-black border-r border-slate-800",children:""}),s.jsx("th",{className:"w-24 p-2 text-[10px] font-black",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-800",children:u.map((f,p)=>s.jsxs("tr",{className:"h-9 border-b border-slate-800",children:[s.jsx("td",{className:"p-1 text-[10px] font-bold text-slate-400 text-center border-r border-slate-800",children:p+1}),s.jsxs("td",{className:"p-1 px-3 text-xs font-black text-slate-800 border-r border-slate-800 whitespace-nowrap overflow-hidden text-ellipsis",children:[f?.product,f?.spec&&s.jsxs("span",{className:"ml-2 text-[9px] font-normal text-slate-400",children:["(",f.spec,")"]})]}),s.jsx("td",{className:"p-1 text-[10px] font-bold text-center border-r border-slate-800",children:f?"EA":""}),s.jsx("td",{className:"p-1 text-[10px] font-black text-center border-r border-slate-800",children:f?.qty}),s.jsx("td",{className:"p-1 px-2 text-[10px] font-bold text-right border-r border-slate-800",children:f?Fe(f.price):""}),s.jsx("td",{className:"p-1 px-2 text-[10px] font-black text-right border-r border-slate-800 bg-slate-50/30",children:f?Fe(f.supplyValue||f.amount):""}),s.jsx("td",{className:"p-1 px-2 text-[10px] font-bold text-right border-r border-slate-800",children:f?Fe(f.vatAmount||0):""}),s.jsx("td",{className:"p-1 px-2 text-[9px] text-slate-500 overflow-hidden text-ellipsis whitespace-nowrap",children:f?.shipName||""})]},p))}),s.jsx("tfoot",{className:"bg-slate-50/80 border-t-2 border-slate-800",children:s.jsxs("tr",{className:"h-8",children:[s.jsx("td",{colSpan:4,className:"text-center text-xs font-black border-r border-slate-800",children:" "}),s.jsx("td",{className:"border-r border-slate-800"}),s.jsx("td",{className:"p-1 px-2 text-xs font-black text-right border-r border-slate-800",children:Fe(l.supply)}),s.jsx("td",{className:"p-1 px-2 text-xs font-black text-right border-r border-slate-800",children:Fe(l.vat)}),s.jsx("td",{})]})})]})}),s.jsxs("div",{className:"no-break",children:[s.jsxs("div",{className:"flex mt-2 border-2 border-slate-800 divide-x-2 divide-slate-800 bg-slate-900 text-white rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"flex-1 p-2 flex justify-between items-center px-6",children:[s.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Total Supply Value"}),s.jsxs("span",{className:"text-sm font-black whitespace-nowrap",children:[" ",Fe(l.supply)]})]}),s.jsxs("div",{className:"flex-1 p-2 flex justify-between items-center px-6",children:[s.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Total VAT"}),s.jsxs("span",{className:"text-sm font-black whitespace-nowrap",children:[" ",Fe(l.vat)]})]}),s.jsxs("div",{className:"flex-[1.2] p-2 flex justify-between items-center px-8 bg-indigo-600",children:[s.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Grand Total"}),s.jsxs("span",{className:"text-lg font-black whitespace-nowrap",children:[" ",Fe(l.amount)]})]})]}),s.jsxs("div",{className:"mt-6 text-center space-y-1",children:[s.jsx("p",{className:"text-sm font-bold text-slate-700",children:"   ()."}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] font-black text-slate-300 italic pt-4",children:[s.jsx($A,{size:12}),"Generated by Mycelium Smart Farm Integration System v2.0"]})]})]})]})}),s.jsx("style",{children:HV})]})},pIe=()=>{const{showAlert:a,showConfirm:e}=wa(),{orderDate:t,setOrderDate:r,customer:n,addresses:i,products:l,salesRows:o,editingTempId:c,isProcessing:d,inputState:u,setInputState:h,loadProducts:f,loadCompanyInfo:p,loadSalesHistory:g,selectCustomer:b,handleInputChange:w,handleAddRow:j,handleEditRow:k,handleDeleteRow:T,handleSaveAll:E,handleReset:I,handlePrintStatement:R,closeStatement:P,showStatement:H,handleCsvUpload:G,companyInfo:X,summary:U,isDraftRestored:te,tempDraft:Z,handleRestoreDraft:J,handleDiscardDraft:B}=aG(a,e),W=F.useRef(null),$=F.useRef(null),Q=F.useRef(null),[ne,re]=F.useState(!1),[K,ae]=F.useState([]),[ce,de]=F.useState(!1),[he,pe]=F.useState(!1),[Re,Te]=F.useState("");F.useEffect(()=>{f(),p()},[f,p]);const ke=F.useRef(!0);F.useEffect(()=>{if(!n&&W.current&&(W.current.value=""),te&&ke.current){ke.current=!1,n&&W.current&&(W.current.value=n.customer_name);return}n&&t&&g(n.customer_id,t)},[n,t,g,te]);const Le=async()=>{const Oe=W.current?.value.trim();if(!Oe)return a("","  .");try{const De=await ht("search_customers_by_name",{name:Oe});if(!De||De.length===0){await e(" ","  .   ?")&&(Te(Oe),de(!0));return}De.length===1?b(De[0]):(ae(De),re(!0))}catch(De){console.error("Search Error:",De),a("",`    : ${De.message}`)}},Ne=async Oe=>{try{await ht("create_customer",{...Oe,joinDate:new Date().toISOString().split("T")[0],mobile:kn(Oe.mobile),phone:kn(Oe.phone)});const De=await ht("search_customers_by_name",{name:Oe.name}),Ge=De.find(Ee=>Ee.mobile_number===Oe.mobile)||De[0];Ge&&(b(Ge),de(!1),a("","  ."))}catch(De){a("",`  : ${De}`)}},_e=(Oe="input")=>{if(!window.daum||!window.daum.Postcode)return a("","     .");pe(!0),setTimeout(()=>{new window.daum.Postcode({oncomplete:De=>{let Ge=De.address;if(De.addressType==="R"){let Ee=(De.bname!==""?De.bname:"")+(De.buildingName!==""?De.bname!==""?`, ${De.buildingName}`:De.buildingName:"");Ge+=Ee!==""?` (${Ee})`:""}Oe==="input"?h(Ee=>({...Ee,shipZip:De.zonecode,shipAddr1:Ge})):(Oe.zipId&&(document.getElementById(Oe.zipId).value=De.zonecode),Oe.addr1Id&&(document.getElementById(Oe.addr1Id).value=Ge)),pe(!1)},width:"100%",height:"100%"}).embed(document.getElementById("addr-layer-container"))},100)};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-3 lg:pt-4 min-[2000px]:pt-6 pb-1",children:[s.jsx(iIe,{fileInputRef:Q,onCsvUpload:G}),s.jsx(sIe,{orderDate:t,setOrderDate:r,custSearchRef:W,handleSearchCustomer:Le,customer:n}),te&&s.jsxs("div",{className:"mt-2 bg-amber-50 border border-amber-200 rounded-xl px-4 py-2 flex items-center justify-between animate-in slide-in-from-top-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-amber-500 text-sm",children:"history_edu"}),s.jsx("span",{className:"text-[11px] font-bold text-amber-700",children:"   ."})]}),s.jsx("button",{onClick:I,className:"text-[10px] font-black text-amber-600 hover:text-amber-800 underline",children:" "})]})]}),s.jsxs("div",{className:`px-6 lg:px-8 min-[2000px]:px-12 mt-1 flex flex-col gap-1.5 overflow-hidden flex-1 pb-4 lg:pb-6 min-[2000px]:pb-8 ${n?"":"pointer-events-none opacity-50"}`,children:[s.jsx(lIe,{inputState:u,handleInputChange:w,products:l,addresses:i,prodSelectRef:$,handleAddressSearch:_e,handleAddRow:j,editingTempId:c}),s.jsx(oIe,{salesRows:o,editingTempId:c,handleEditRow:k,handleDeleteRow:T}),s.jsx(cIe,{summary:U,handleReset:I,handlePrintStatement:R,handleSaveAll:E,isProcessing:d,customer:n,salesRows:o})]}),s.jsx(dIe,{isOpen:ne,onClose:()=>re(!1),searchResults:K,selectCustomer:b,setQuickRegisterName:Te,setShowRegisterModal:de,custSearchRef:W}),s.jsx(uIe,{isOpen:ce,onClose:()=>de(!1),quickRegisterName:Re,fileInputRef:Q,handleQuickRegister:Ne,handleAddressSearch:_e}),s.jsx(hIe,{isOpen:he,onClose:()=>pe(!1)}),s.jsx(fIe,{isOpen:H,onClose:P,customer:n,salesRows:o,companyInfo:X,orderDate:t,summary:U}),Z&&s.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-6 bg-slate-900/60 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-white rounded-[2rem] w-full max-w-md p-8 shadow-2xl animate-in zoom-in-95 duration-200",children:[s.jsx("div",{className:"w-16 h-16 rounded-2xl bg-amber-50 text-amber-500 flex items-center justify-center mb-6",children:s.jsx("span",{className:"material-symbols-rounded text-3xl",children:"restore_page"})}),s.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:"   "}),s.jsxs("p",{className:"text-sm text-slate-500 font-medium leading-relaxed mb-8",children:["    ?",s.jsx("br",{}),"(: ",Z.customer?.customer_name||"",", : ",Z.salesRows?.length||0,")"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:B,className:"flex-1 h-12 rounded-xl bg-slate-100 text-slate-500 font-bold text-sm hover:bg-slate-200 transition-all",children:"  "}),s.jsx("button",{onClick:J,className:"flex-1 h-12 rounded-xl bg-indigo-600 text-white font-bold text-sm hover:bg-indigo-500 shadow-lg shadow-indigo-200 transition-all",children:" "})]})]})})]})},xIe=()=>{const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState({event_id:"",event_name:"",organizer:"",manager_name:"",manager_contact:"",location_address:"",memo:"",start_date:"",end_date:""}),[n,i]=F.useState([]),[l,o]=F.useState([]),[c,d]=F.useState([]),[u,h]=F.useState(!1),[f,p]=F.useState([]),[g,b]=F.useState(""),[w,j]=F.useState(null),[k,T]=F.useState(!1),[E,I]=F.useState(!1),[R,P]=F.useState(!1),H=F.useMemo(()=>{const K=n.length,ae=n.reduce((de,he)=>de+Number(he.qty),0),ce=n.reduce((de,he)=>de+Number(he.amount),0);return{count:K,qty:ae,amount:ce}},[n]);F.useEffect(()=>{G()},[]);const G=async()=>{try{const K=await ht("get_product_list");d(K.filter(ae=>(ae.item_type||"product")==="product")||[])}catch(K){console.error(K)}};F.useEffect(()=>{const K=localStorage.getItem("mycelium_draft_special");if(K)try{const ae=JSON.parse(K);(ae.salesRows?.length>0||ae.eventData?.event_name)&&(r(ae.eventData),i(ae.salesRows||[]),o(ae.deletedSalesIds||[]),P(!0),I(!0))}catch(ae){console.error("Special Draft restore error:",ae)}},[]),F.useEffect(()=>{if(R||n.length>0||t.event_name){const K={eventData:t,salesRows:n,deletedSalesIds:l};localStorage.setItem("mycelium_draft_special",JSON.stringify(K))}},[t,n,l,R]);const X=()=>{localStorage.removeItem("mycelium_draft_special"),I(!1)},U=K=>{const{name:ae,value:ce}=K.target;r(de=>({...de,[ae]:ce})),P(!0)},te=async()=>{const K=(t.event_name||"").trim();if(!K){a(""," .");return}if(K===w){f.length>0&&!u&&h(!0);return}b(K);try{const ae=await ht("search_events_by_name",{name:K});p(ae||[]),h(!0),j(K)}catch(ae){await a("","  : "+ae)}},Z=async K=>{r({event_id:K.event_id,event_name:K.event_name,organizer:K.organizer||"",manager_name:K.manager_name||"",manager_contact:K.manager_contact||"",location_address:K.location_address||"",memo:K.memo||"",start_date:K.start_date||"",end_date:K.end_date||""}),h(!1),P(!0),J(K.event_id,K.start_date,K.end_date)},J=async(K,ae,ce)=>{try{const he=(await ht("get_sales_by_event_id_and_date_range",{eventId:String(K),startDate:ae||null,endDate:ce||null})).map(pe=>({id:pe.sales_id,tempId:Math.random(),orderDate:pe.order_date,product:pe.product_name,spec:pe.specification,qty:pe.quantity,price:pe.unit_price,discount:pe.discount_rate||0,amount:pe.total_amount,memo:pe.memo||""}));i(he.reverse()),o([]),P(!1)}catch(de){console.error(de)}},B=()=>{r({event_id:"",event_name:g||"",organizer:"",manager_name:"",manager_contact:"",location_address:"",memo:"",start_date:ev(new Date),end_date:ev(new Date)}),i([]),h(!1),P(!0)},W=()=>{if(!t.event_name){a("","   .");return}let ae=ev(new Date);t.start_date&&ae<t.start_date.substring(0,10)&&(ae=t.start_date.substring(0,10)),t.end_date&&ae>t.end_date.substring(0,10)&&(ae=t.end_date.substring(0,10)),i(ce=>[{tempId:Date.now()+Math.random(),orderDate:ae,product:"",spec:"",qty:1,price:"",discount:0,amount:0,memo:""},...ce]),P(!0)},$=(K,ae,ce)=>{i(de=>de.map(he=>{if(he.tempId!==K)return he;const pe={...he,[ae]:ce};if(ae==="product"){const Re=c.find(Te=>Te.product_name===ce);Re&&(pe.spec=Re.specification,pe.price=Re.unit_price)}if(["qty","price","discount","product"].includes(ae)){const Re=Number(pe.qty)||0,Te=Number(pe.price)||0,ke=Number(pe.discount)||0;pe.amount=Math.floor(Re*Te*(1-ke/100)/10)*10}return pe})),P(!0)},Q=K=>{K.id&&o(ae=>[...ae,K.id]),i(ae=>ae.filter(ce=>ce.tempId!==K.tempId)),P(!0)},ne=()=>{if(!t.event_name){a("","   .");return}const K=prompt(" QR  .");if(!K)return;const ae=K.trim();console.log("Special Sales Scanned QR:",ae);const ce=ae.split("|").map(pe=>pe.trim());let de=null;if(ce[0]==="PRODUCT"&&ce[1]){const pe=parseInt(ce[1]),Re=ce[3],Te=ce[4]==="NA"||!ce[4]?"":ce[4];if(de=c.find(ke=>Number(ke.product_id)===pe),!de||de&&Re&&de.product_name!==Re){const ke=c.find(Le=>Le.product_name===Re&&(Te?Le.specification===Te:!0));ke&&(de=ke)}console.log(`Matched by PRODUCT structure: ${pe} | ${Re}`,de)}else if(ce[0]==="HARVEST"&&ce[3]){const pe=ce[3],Re=ce[4]||"";if(de=c.find(Te=>Te.product_name===pe&&(Te.specification===Re||Te.specification&&Re&&Te.specification.includes(Re))),!de){const Te=c.filter(ke=>ke.product_name===pe);if(Te.length===1)de=Te[0];else if(Te.length>1){a(" ",`[${pe}]    .    .`);return}}console.log(`Matched by HARVEST Name/Spec: ${pe}`,de)}else if(ae.includes("ID:")){const pe=ae.split("ID:").pop().trim(),Re=parseInt(pe.replace(/[^0-9]/g,""));de=c.find(Te=>Number(Te.product_id)===Re),console.log(`Matched by Legacy ID: ${Re}`,de)}else{if(de=c.find(pe=>pe.product_code&&pe.product_code===ae||pe.product_name===ae||`${pe.product_name} ${pe.specification||""}`.trim()===ae||`${pe.product_name}(${pe.specification||""})`.trim()===ae),!de&&/^\d+$/.test(ae)){const pe=parseInt(ae);de=c.find(Re=>Number(Re.product_id)===pe)}console.log(`Matched by fallback/numeric: ${ae}`,de)}if(!de){a(" ",`[${ae}]    .    .`);return}const he=new Date().toISOString().split("T")[0];i(pe=>[{tempId:Date.now()+Math.random(),orderDate:he,product:de.product_name,spec:de.specification,qty:1,price:de.unit_price,discount:0,amount:de.unit_price,memo:""},...pe]),P(!0)},re=async()=>{if(t.event_name&&await e(""," ?")){T(!0);try{const K={...t,start_date:t.start_date||null,end_date:t.end_date||null},ae=n.filter(de=>de.product).map(de=>({sales_id:de.id?String(de.id):"",order_date:de.orderDate,product_name:de.product,specification:de.spec||null,quantity:Number(de.qty),unit_price:Number(de.price),discount_rate:Number(de.discount),memo:de.memo||null})),ce=await ht("save_special_sales_batch",{event:K,sales:ae,deletedSalesIds:l});r(de=>({...de,event_id:ce})),await a("","."),X(),J(ce,K.start_date,K.end_date)}catch(K){console.error(K),await a(""," : "+K)}finally{T(!1)}}};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:[s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Special Event Sales"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Event Sales"})]})]})}),s.jsx("div",{className:"grid grid-cols-12 gap-3 items-stretch mt-4",children:s.jsxs("div",{className:"col-span-12 bg-white rounded-[1.5rem] p-6 border border-slate-100 shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{className:"grid grid-cols-12 gap-6 mb-2",children:[s.jsxs("div",{className:"col-span-4 lg:col-span-3",children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:" (/)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{value:t.event_name,name:"event_name",onChange:U,onKeyDown:K=>{(K.key==="Enter"||K.key==="Tab")&&(K.preventDefault(),te())},className:"w-full h-11 bg-slate-50 border border-slate-200 rounded-xl font-bold text-slate-800 px-4 focus:bg-white focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all text-sm shadow-sm",placeholder:" "}),s.jsx("button",{onClick:te,className:"min-w-[50px] h-11 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-colors shadow-sm flex items-center justify-center",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"search"})})]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:""}),s.jsx("input",{value:t.organizer,name:"organizer",onChange:U,className:"w-full h-11 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all px-4 text-sm"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:""}),s.jsx("input",{value:t.manager_name,name:"manager_name",onChange:U,className:"w-full h-11 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all px-4 text-sm"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:""}),s.jsx("input",{value:t.manager_contact,name:"manager_contact",onChange:U,className:"w-full h-11 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all px-4 text-sm"})]}),s.jsxs("div",{className:"col-span-2 lg:col-span-3",children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:" "}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"date",value:t.start_date,name:"start_date",onChange:U,className:"w-full h-11 bg-white border border-slate-200 rounded-xl text-sm px-3 font-bold text-slate-700 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",title:""}),s.jsx("span",{className:"text-slate-300 font-bold",children:"~"}),s.jsx("input",{type:"date",value:t.end_date,name:"end_date",onChange:U,className:"w-full h-11 bg-white border border-slate-200 rounded-xl text-sm px-3 font-bold text-slate-700 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",title:""})]})]})]}),s.jsx("div",{className:"grid grid-cols-12 gap-4",children:s.jsxs("div",{className:"col-span-12",children:[s.jsx("label",{className:"text-[11px] font-bold text-slate-500 uppercase mb-1.5 block ml-1",children:"  "}),s.jsx("input",{value:t.location_address,name:"location_address",onChange:U,className:"w-full h-11 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all px-4 text-sm",placeholder:"   "})]})})]})})]}),s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 mt-1 flex flex-col gap-3 overflow-hidden flex-1 pb-6 lg:pb-8 min-[2000px]:pb-12",children:s.jsxs("div",{className:"bg-white rounded-[1.5rem] shadow-xl border border-slate-200 relative flex flex-col h-full overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 z-10"}),s.jsxs("div",{className:"flex justify-between items-center mb-2 shrink-0 p-5 pb-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),s.jsx("span",{className:"text-[11px] font-black text-slate-500 uppercase tracking-widest",children:" "})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:ne,className:"h-10 px-4 rounded-xl bg-purple-50 hover:bg-purple-100 text-purple-700 border border-purple-100 text-xs font-bold flex items-center gap-2 transition-all hover:scale-105",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"qr_code_scanner"})," QR "]}),s.jsxs("button",{onClick:W,className:"h-10 px-4 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-bold flex items-center gap-2 transition-all shadow-md shadow-indigo-200 hover:scale-105 active:scale-95",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"add"}),"  "]})]})]}),s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar p-0.5 relative",children:s.jsxs("table",{className:"w-full text-xs text-left border-collapse table-fixed",children:[s.jsx("thead",{className:"sticky top-0 z-20",children:s.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 shadow-sm",children:[s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 w-[5%] tracking-wider",children:"No"}),s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 w-[12%] tracking-wider",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 w-[20%] tracking-wider",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 w-[10%] tracking-wider",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 w-[8%] tracking-wider",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 w-[10%] tracking-wider",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 w-[8%] tracking-wider",children:"(%)"}),s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 w-[12%] tracking-wider",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 tracking-wider",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[10px] font-black uppercase text-slate-500 w-[5%] tracking-wider",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100 bg-white",children:[n.map((K,ae)=>s.jsxs("tr",{className:"hover:bg-indigo-50/20 transition-colors group",children:[s.jsx("td",{className:"text-center text-slate-400 font-bold text-xs",children:n.length-ae}),s.jsx("td",{className:"p-2",children:s.jsx("input",{type:"date",value:K.orderDate,onChange:ce=>$(K.tempId,"orderDate",ce.target.value),className:"w-full h-10 bg-slate-50 border border-slate-200 rounded-lg px-2 text-center text-xs text-slate-600 font-bold focus:bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all outline-none"})}),s.jsxs("td",{className:"p-2",children:[s.jsx("input",{list:`dl-${K.tempId}`,value:K.product,onChange:ce=>$(K.tempId,"product",ce.target.value),className:"w-full h-10 bg-white border border-slate-200 rounded-lg px-3 text-left text-xs text-slate-800 font-bold focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all outline-none placeholder:font-normal",placeholder:""}),s.jsx("datalist",{id:`dl-${K.tempId}`,children:c.map(ce=>s.jsx("option",{value:ce.product_name,children:ce.specification?`${ce.product_name} (${ce.specification})`:ce.product_name},`${ce.product_id}-${ce.product_name}`))})]}),s.jsx("td",{className:"p-2",children:s.jsx("input",{value:K.spec,readOnly:!0,className:"w-full h-10 bg-slate-50/50 border border-slate-100 rounded-lg px-2 text-center text-xs text-slate-500 font-medium outline-none",tabIndex:-1})}),s.jsx("td",{className:"p-2",children:s.jsx("input",{type:"number",value:K.qty,onChange:ce=>$(K.tempId,"qty",ce.target.value),className:"w-full h-10 bg-white border border-slate-200 rounded-lg px-2 text-center text-xs font-bold text-slate-700 focus:border-orange-400 focus:ring-2 focus:ring-orange-100 transition-all outline-none"})}),s.jsx("td",{className:"p-2",children:s.jsx("input",{value:Fe(K.price),onChange:ce=>$(K.tempId,"price",ce.target.value.replace(/[^0-9]/g,"")),className:"w-full h-10 bg-white border border-slate-200 rounded-lg px-2 text-right text-xs text-slate-600 font-bold focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all outline-none"})}),s.jsx("td",{className:"p-2",children:s.jsx("input",{type:"number",value:K.discount,onChange:ce=>$(K.tempId,"discount",ce.target.value),className:"w-full h-10 bg-white border border-slate-200 rounded-lg px-2 text-center text-xs text-red-500 font-bold focus:border-red-400 focus:ring-2 focus:ring-red-100 transition-all outline-none"})}),s.jsx("td",{className:"p-2",children:s.jsx("input",{value:Fe(K.amount),readOnly:!0,className:"w-full h-10 bg-slate-50 border border-slate-200 rounded-lg px-3 text-right text-xs font-black text-indigo-600 outline-none",tabIndex:-1})}),s.jsx("td",{className:"p-2",children:s.jsx("input",{value:K.memo,onChange:ce=>$(K.tempId,"memo",ce.target.value),className:"w-full h-10 bg-white border border-slate-200 rounded-lg px-3 text-left text-xs text-slate-600 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all outline-none placeholder:text-slate-300",placeholder:""})}),s.jsx("td",{className:"text-center p-2",children:s.jsx("button",{onClick:()=>Q(K),className:"w-8 h-8 rounded-lg text-slate-300 hover:text-red-500 hover:bg-red-50 transition-all flex items-center justify-center mx-auto group-hover:block",title:"",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"delete"})})})]},K.tempId)),n.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"10",className:"pt-12 pb-6 text-center bg-white border-b-0",children:s.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400",children:[s.jsx("span",{className:"material-symbols-rounded text-3xl mb-2 opacity-50",children:"auto_stories"}),s.jsx("div",{className:"font-black text-sm text-slate-700",children:"  "}),s.jsx("p",{className:"text-slate-500 text-[11px] mt-1 font-medium",children:"    ."})]})})})]})]})}),s.jsxs("div",{className:"bg-slate-900 p-4 px-8 flex justify-between items-center text-white border-t border-slate-800 rounded-b-[1.5rem]",children:[s.jsxs("div",{className:"flex gap-10 items-center",children:[s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40",children:s.jsx("span",{className:"material-symbols-rounded",children:"analytics"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"  "}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsxs("span",{className:"text-xl font-black",children:[H.count,""]}),s.jsx("span",{className:"mx-2 w-1 h-3 bg-white/10 rounded-full"}),s.jsxs("span",{className:"text-xl font-black",children:[H.qty,""]})]})]})]}),s.jsxs("div",{className:"flex flex-col pl-10 border-l border-white/10 ml-2",children:[s.jsx("span",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest italic mb-0.5",children:" "}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-[9px] font-black text-indigo-400/50 uppercase",children:"KRW"}),s.jsxs("span",{className:"text-xl font-black text-indigo-400 leading-none",children:[Fe(H.amount),""]})]})]})]}),s.jsxs("div",{className:"flex gap-3 h-12",children:[s.jsx("button",{onClick:()=>{r({event_id:"",event_name:"",organizer:"",manager_name:"",manager_contact:"",location_address:"",memo:"",start_date:"",end_date:""}),i([]),o([]),P(!1),X()},className:"px-6 rounded-xl bg-slate-800 hover:bg-slate-700 text-slate-400 font-black transition-all text-xs",children:""}),s.jsxs("button",{onClick:re,disabled:k||!t.event_name,className:`px-10 rounded-xl font-black shadow-xl flex items-center gap-2 transition-all ${k?"bg-slate-700 text-slate-500":"bg-indigo-600 hover:bg-indigo-500 text-white shadow-indigo-600/40"}`,children:[k?s.jsx("span",{className:"material-symbols-rounded animate-spin text-lg",children:"refresh"}):s.jsx("span",{className:"material-symbols-rounded text-lg",children:"save_as"}),s.jsx("span",{className:"text-sm uppercase tracking-tight",children:" "})]})]})]})]})}),u&&s.jsx("div",{className:"modal flex fixed inset-0 z-50 items-center justify-center bg-black/60 backdrop-blur-md animate-in fade-in duration-300",children:s.jsxs("div",{className:"bg-white w-[800px] rounded-[2.5rem] shadow-2xl overflow-hidden p-0 border border-white/50 relative transform transition-all scale-100",children:[s.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-white p-8 border-b border-slate-100 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[s.jsx("span",{className:"w-10 h-10 rounded-2xl bg-indigo-100 text-indigo-600 flex items-center justify-center shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded text-2xl",children:"search"})})," "]}),s.jsx("p",{className:"text-slate-400 text-sm mt-1 ml-14 font-medium",children:"      ."})]}),s.jsx("button",{onClick:()=>h(!1),className:"w-10 h-10 rounded-full bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-slate-600 flex items-center justify-center transition-all",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"close"})})]}),s.jsxs("div",{className:"p-8 bg-slate-50/50",children:[s.jsx("div",{className:"max-h-[500px] overflow-auto border border-slate-200 rounded-2xl mb-6 bg-white shadow-sm",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 text-[11px] uppercase text-slate-500 sticky top-0 font-black tracking-wider z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-5 text-left pl-8 w-1/2",children:""}),s.jsx("th",{className:"p-5 text-center w-1/4",children:""}),s.jsx("th",{className:"p-5 text-center w-1/4",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100",children:[f.map(K=>s.jsxs("tr",{onClick:()=>Z(K),className:"cursor-pointer hover:bg-indigo-50/50 transition-colors group",children:[s.jsxs("td",{className:"p-5 pl-8",children:[s.jsx("div",{className:"font-bold text-slate-700 text-base group-hover:text-indigo-700 transition-colors",children:K.event_name}),s.jsx("div",{className:"text-xs text-slate-400 mt-1 font-medium truncate max-w-[300px]",children:K.location_address||"  "})]}),s.jsx("td",{className:"p-5 text-center",children:s.jsxs("div",{className:"inline-flex items-center px-2.5 py-1 rounded-lg bg-slate-100 text-slate-600 text-xs font-bold border border-slate-200",children:[K.start_date?.substring(0,10)," ~ ",K.end_date?.substring(0,10)]})}),s.jsx("td",{className:"p-5 text-center text-slate-600 font-medium",children:K.organizer})]},K.event_id)),f.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"3",className:"p-16 text-center",children:s.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-300",children:[s.jsx("span",{className:"material-symbols-rounded text-5xl mb-3 opacity-30",children:"rule_folder"}),s.jsx("span",{className:"text-lg font-bold text-slate-400",children:"  ."}),s.jsx("span",{className:"text-sm mt-1",children:"   ' '  ."})]})})})]})]})}),s.jsxs("div",{className:"flex justify-between items-center pt-2",children:[s.jsxs("div",{className:"text-xs text-slate-400 font-bold",children:["* : ",s.jsxs("span",{className:"text-indigo-500",children:["'",g,"'"]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>h(!1),className:"h-12 px-6 rounded-2xl bg-white border border-slate-200 text-slate-500 font-bold hover:bg-slate-50 transition-colors text-sm",children:""}),s.jsxs("button",{onClick:B,className:"h-12 px-8 rounded-2xl bg-indigo-600 text-white font-bold hover:bg-indigo-700 transition-all text-sm shadow-lg shadow-indigo-200 hover:scale-105 active:scale-95 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"add_circle"}),"  "]})]})]})]})]})})]})},mIe=({isOpen:a,onClose:e,fileData:t,onImport:r})=>{const[n,i]=F.useState({customer_name:-1,mobile:-1,zip:-1,address1:-1,address2:-1,product:-1,qty:-1,price:-1,memo:-1}),[l,o]=F.useState([]),[c,d]=F.useState([]),[u,h]=F.useState([]);F.useEffect(()=>{if(t){d(t.headers||[]),h(t.rows||[]);const g={...n};t.headers.forEach((b,w)=>{const j=b.replace(/\s/g,"").toLowerCase();(j.includes("")||j.includes("")||j.includes(""))&&(g.customer_name=w),(j.includes("")||j.includes("")||j.includes(""))&&(g.mobile=w),(j.includes("")||j.includes(""))&&(g.zip=w),j.includes("")&&!j.includes("")&&(g.address1=w),(j.includes("")||j.includes("")&&j.includes("2"))&&(g.address2=w),(j.includes("")||j.includes(""))&&(g.product=w),j.includes("")&&(g.qty=w),(j.includes("")||j.includes(""))&&(g.price=w),(j.includes("")||j.includes(""))&&(g.memo=w)}),i(g)}},[t]);const f=()=>{const g=u.map(b=>({shipName:n.customer_name!==-1?b[n.customer_name]:"",shipMobile:n.mobile!==-1?kn(b[n.mobile]):"",shipZip:n.zip!==-1?b[n.zip]:"",shipAddr1:n.address1!==-1?b[n.address1]:"",shipAddr2:n.address2!==-1?b[n.address2]:"",product:n.product!==-1?b[n.product]:"",qty:n.qty!==-1&&parseInt(String(b[n.qty]).replace(/[^0-9]/g,""))||1,price:n.price!==-1&&parseInt(String(b[n.price]).replace(/[^0-9]/g,""))||0,shipMemo:n.memo!==-1?b[n.memo]:""})).filter(b=>b.shipName||b.product);r(g),e()};if(!a)return null;const p=[{key:"customer_name",label:"/",required:!0},{key:"mobile",label:"",required:!0},{key:"product",label:"",required:!0},{key:"qty",label:""},{key:"price",label:""},{key:"zip",label:""},{key:"address1",label:""},{key:"address2",label:""},{key:"memo",label:""}];return s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4",children:s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col overflow-hidden border border-white/20",children:[s.jsxs("div",{className:"px-8 py-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-black text-slate-800 tracking-tight",children:"   "}),s.jsx("p",{className:"text-xs text-slate-400 font-bold mt-1 uppercase tracking-wider",children:"Excel/CSV Column Mapping & Preview"})]}),s.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full hover:bg-slate-200 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-slate-400",children:"close"})})]}),s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col p-8 gap-8",children:[s.jsx("div",{className:"grid grid-cols-3 gap-6",children:p.map(g=>s.jsxs("div",{children:[s.jsxs("label",{htmlFor:`mapping-select-${g.key}`,className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 ml-1",children:[g.label," ",g.required&&s.jsx("span",{className:"text-rose-500",children:"*"})]}),s.jsxs("select",{id:`mapping-select-${g.key}`,value:n[g.key],onChange:b=>i(w=>({...w,[g.key]:parseInt(b.target.value)})),className:"w-full h-11 bg-slate-100 border-none rounded-2xl px-4 font-bold text-slate-700 focus:ring-4 focus:ring-indigo-500/10 transition-all text-sm",children:[s.jsx("option",{value:-1,children:"--   --"}),c.map((b,w)=>s.jsx("option",{value:w,children:b},w))]})]},g.key))}),s.jsxs("div",{className:"flex-1 flex flex-col min-h-0 border border-slate-200 rounded-[1.5rem] overflow-hidden",children:[s.jsxs("div",{className:"bg-slate-900 px-6 py-3 text-white flex justify-between items-center",children:[s.jsx("span",{className:"text-xs font-black uppercase tracking-widest opacity-80",children:"  ( 5)"}),s.jsxs("span",{className:"text-[10px] font-bold bg-white/20 px-2 py-0.5 rounded-full",children:[" ",u.length,"  "]})]}),s.jsx("div",{className:"flex-1 overflow-auto bg-slate-50",children:s.jsxs("table",{className:"w-full text-xs text-left border-collapse",children:[s.jsx("thead",{className:"sticky top-0 bg-slate-100/90 backdrop-blur z-10",children:s.jsx("tr",{children:c.map((g,b)=>s.jsx("th",{className:"p-3 border-b border-slate-200 font-black text-slate-500 uppercase tracking-tighter whitespace-nowrap",children:g},b))})}),s.jsx("tbody",{children:u.slice(0,5).map((g,b)=>s.jsx("tr",{className:"border-b border-slate-200/50 bg-white hover:bg-indigo-50/30 transition-colors",children:g.map((w,j)=>s.jsx("td",{className:"p-3 whitespace-nowrap text-slate-600 font-medium",children:w},j))},b))})]})})]})]}),s.jsxs("div",{className:"p-8 bg-slate-50 border-t border-slate-100 flex justify-end gap-3",children:[s.jsx("button",{onClick:e,className:"h-14 px-8 rounded-2xl border border-slate-200 bg-white font-black text-slate-500 hover:bg-slate-100 transition-all",children:""}),s.jsxs("button",{onClick:f,disabled:n.customer_name===-1||n.product===-1,className:"h-14 px-10 rounded-2xl bg-indigo-600 text-white font-black hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-xl shadow-indigo-200 transition-all transform hover:scale-[1.02] active:scale-95",children:["  (",u.length,")"]})]})]})})},gIe=()=>{const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState(null),[n,i]=F.useState("sabangnet"),[l,o]=F.useState([]),[c,d]=F.useState([]),[u,h]=F.useState({}),[f,p]=F.useState("upload"),[g,b]=F.useState(!1),[w,j]=F.useState(!1),[k,T]=F.useState(null),[E,I]=F.useState(!1),[R,P]=F.useState({name:"",spec:"1kg",price:"",tag:""}),[H,G]=F.useState(null),[X,U]=F.useState(null),[te,Z]=F.useState(!1);F.useEffect(()=>{J(),B()},[]);const J=async()=>{try{const _e=await Ke("get_product_list");d((_e||[]).filter(Oe=>(Oe.item_type||"product")==="product"))}catch(_e){console.error(_e)}},B=()=>{const _e=localStorage.getItem("online_product_mappings");if(_e){const Oe=JSON.parse(_e);for(const De in Oe)typeof Oe[De]=="number"&&(Oe[De]={id:Oe[De],price:0});h(Oe)}},W=_e=>{h(_e),localStorage.setItem("online_product_mappings",JSON.stringify(_e))},$=_e=>{_e.target.files&&_e.target.files[0]&&r(_e.target.files[0])},Q=async _e=>{try{return await Ke("search_customers",{name:_e})||[]}catch(Oe){return console.warn(Oe),[]}},ne=()=>{if(!t)return;console.log("handleParse called with file:",t.name);const _e=new FileReader;_e.onload=async Oe=>{const De=Oe.target.result;let Ee=new TextDecoder("utf-8").decode(De);!Ee.includes("")&&!Ee.includes("")&&(Ee=new TextDecoder("euc-kr").decode(De));try{let rt=[];if(n==="naver"?rt=K(Ee):n==="coupang"?rt=ae(Ee):n==="custom"||(rt=ce(Ee)),rt.length===0){Z(!0);const wt=await K8(n,Ee);U(wt),Z(!1);return}const dt=[];for(let wt=0;wt<rt.length;wt++){const vt=rt[wt];try{if(!vt.mobile)vt.isNewCustomer=!0;else{const $e=await Q(vt.mobile);$e&&$e.length>0?(vt.isNewCustomer=!1,vt.existingCustomerId=$e[0].customer_id,vt.existingCustomerName=$e[0].customer_name,vt.customerStatus="Exist"):vt.isNewCustomer=!0}dt.push(vt)}catch($e){console.warn("Customer identification error:",$e),vt.isNewCustomer=!0,dt.push(vt)}}o(dt),p("review")}catch(rt){console.error(rt),Z(!0);const dt=await K8(n,Ee);U(dt),Z(!1)}},_e.readAsArrayBuffer(t)},re=_e=>_e.split(/\r?\n/).map(De=>{const Ge=[];let Ee="",rt=!1;for(let dt=0;dt<De.length;dt++){const wt=De[dt];wt==='"'?rt=!rt:wt===","&&!rt?(Ge.push(Ee.trim()),Ee=""):Ee+=wt}return Ge.push(Ee.trim()),Ge}),K=_e=>{const Oe=re(_e);if(Oe.length<2)return[];const De=Oe[0],Ge={name:De.indexOf(""),orderer:De.indexOf(""),receiver:De.indexOf(""),mobile:De.indexOf("1"),zip:De.indexOf(""),addr:De.indexOf(""),prodName:De.indexOf(""),option:De.indexOf(""),qty:De.indexOf(""),price:De.indexOf(""),orderId:De.indexOf("")};Ge.prodName===-1&&(Ge.prodName=De.findIndex(rt=>rt.includes("")),Ge.orderer=De.findIndex(rt=>rt.includes("")),Ge.receiver=De.findIndex(rt=>rt.includes("")),Ge.mobile=De.findIndex(rt=>rt.includes("")),Ge.addr=De.findIndex(rt=>rt.includes("")),Ge.qty=De.findIndex(rt=>rt.includes("")));const Ee=[];for(let rt=1;rt<Oe.length;rt++){const dt=Oe[rt];if(!dt[Ge.prodName])continue;const wt=dt[Ge.prodName]+(dt[Ge.option]?` (${dt[Ge.option]})`:""),vt=Yu(dt[Ge.price])||0;Ee.push({orderId:dt[Ge.orderId]||"",customerName:dt[Ge.orderer]||dt[Ge.receiver],receiverName:dt[Ge.receiver],mobile:dt[Ge.mobile],zip:dt[Ge.zip],address:dt[Ge.addr],mallProductName:wt.trim(),qty:parseInt(dt[Ge.qty])||1,unitPrice:vt,internalProductId:he(wt.trim(),vt)})}return Ee},ae=_e=>{const Oe=re(_e);if(Oe.length<2)return[];const De=Oe[0],Ge={orderId:De.indexOf(""),orderer:De.indexOf(""),receiver:De.indexOf(""),mobile:De.indexOf(""),zip:De.indexOf(""),addr:De.findIndex(rt=>rt.includes("")),prodName:De.indexOf(""),qty:De.indexOf(""),price:De.indexOf("")};Ge.prodName===-1&&(Ge.prodName=De.findIndex(rt=>rt.includes("")),Ge.orderer=De.findIndex(rt=>rt.includes("")||rt.includes("")),Ge.receiver=De.findIndex(rt=>rt.includes("")),Ge.mobile=De.findIndex(rt=>rt.includes("")||rt.includes("")));const Ee=[];for(let rt=1;rt<Oe.length;rt++){const dt=Oe[rt];if(!dt[Ge.prodName])continue;const wt=parseInt(dt[Ge.qty])||1,vt=Yu(dt[Ge.price])/wt||0;Ee.push({orderId:dt[Ge.orderId]||"",customerName:dt[Ge.orderer]||dt[Ge.receiver],receiverName:dt[Ge.receiver],mobile:dt[Ge.mobile],zip:dt[Ge.zip],address:dt[Ge.addr],mallProductName:dt[Ge.prodName].trim(),qty:wt,unitPrice:vt,internalProductId:he(dt[Ge.prodName].trim(),vt)})}return Ee},ce=_e=>{const Oe=re(_e);return Oe.length<2?[]:Oe.slice(1).map(De=>{const Ge=Yu(De[6])||0,Ee=he(De[4],Ge);return{customerName:De[0],mobile:De[1],zip:De[2],address:De[3],mallProductName:De[4],qty:parseInt(De[5])||1,unitPrice:Ge,internalProductId:Ee}}).filter(De=>De.customerName)},de=async _e=>{const Oe=_e.map(De=>({orderId:"EXCEL-"+Date.now().toString().slice(-4),customerName:De.shipName,receiverName:De.shipName,mobile:De.shipMobile,zip:De.shipZip,address:De.shipAddr1+(De.shipAddr2?" "+De.shipAddr2:""),mallProductName:De.product,qty:De.qty,unitPrice:De.price,internalProductId:he(De.product,De.price)}));for(const De of Oe)try{if(!De.mobile){De.isNewCustomer=!0;continue}const Ge=await Q(De.mobile);Ge&&Ge.length>0?(De.isNewCustomer=!1,De.existingCustomerId=Ge[0].customer_id,De.existingCustomerName=Ge[0].customer_name):De.isNewCustomer=!0}catch(Ge){console.warn(Ge),De.isNewCustomer=!0}o(Oe),p("review")},he=(_e,Oe)=>{if(u[_e])return u[_e].id||u[_e];const De=c.find(Ge=>_e.includes(Ge.product_name)||Ge.product_name.includes(_e));return De?Oe>0&&De.unit_price>0&&Math.abs(Oe-De.unit_price)/De.unit_price>.5?null:De.product_id:null},pe=(_e,Oe)=>{if(Oe==="NEW"){G({index:_e,...l[_e]}),P({name:l[_e].mallProductName,spec:"1kg",price:Fe(l[_e].unitPrice),tag:""}),I(!0);return}const De=l[_e],Ge=[...l];if(Ge[_e]={...De,internalProductId:Oe},o(Ge),Oe){const Ee={...u,[De.mallProductName]:{id:Number(Oe),price:De.unitPrice}};W(Ee)}},Re=async()=>{if(!H)return;const _e=Yu(R.price);let Oe=R.name;R.tag&&(Oe=`[${R.tag}] ${R.name}`);try{const Ge=(await Ke("create_product",{productName:Oe,specification:R.spec,unitPrice:_e,stockQuantity:100,safetyStock:10,costPrice:0})).productId;await J();const Ee={...u,[H.mallProductName]:{id:Ge,price:_e}};W(Ee),pe(H.index,Ge),await a("","  ."),I(!1)}catch(De){await a("","  : "+De)}},[Te,ke]=F.useState(!1),Le=async()=>{if(n==="generic"){await a("","     .  .");return}ke(!0);try{const _e=await Ke("fetch_external_orders",{mallType:n});if(!_e||_e.length===0){await a("","    .");return}for(const Oe of _e){try{if(!Oe.mobile){Oe.isNewCustomer=!0;continue}const De=await Q(Oe.mobile);De&&De.length>0?(Oe.isNewCustomer=!1,Oe.existingCustomerId=De[0].customer_id,Oe.existingCustomerName=De[0].customer_name):Oe.isNewCustomer=!0}catch(De){console.warn(De),Oe.isNewCustomer=!0}Oe.internalProductId=he(Oe.mallProductName,Oe.unitPrice)}o(_e),p("review")}catch(_e){await a(" ",_e.toString())}finally{ke(!1)}},Ne=async()=>{const _e=l.filter(Ge=>!Ge.internalProductId).length;if(_e>0){await a("",`${_e}   .`);return}if(!await e("",`${l.length}  ?`))return;let Oe=0,De=0;for(const Ge of l)try{let Ee=Ge.existingCustomerId;Ee||(Ee=(await Ke("create_customer",{name:Ge.customerName,mobile:Ge.mobile,zip:Ge.zip,addr1:Ge.address,level:"",memo:`[] ${Ge.mallProductName}`})).customerId);const rt=c.find(dt=>dt.product_id==Ge.internalProductId)||{product_name:"Unknown",unit_price:Ge.unitPrice};await Ke("create_sale",{customerId:Ee,productName:rt.product_name,specification:rt.specification||null,unitPrice:Number(Ge.unitPrice),quantity:Number(Ge.qty),totalAmount:Number(Ge.unitPrice*Ge.qty),status:"",memo:`[] ${Ge.orderId}`,orderDateStr:new Date().toISOString().split("T")[0],shippingName:Ge.receiverName||Ge.customerName,shippingZipCode:Ge.zip||null,shippingAddressPrimary:Ge.address||null,shippingAddressDetail:"",shippingMobileNumber:Ge.mobile||null,shippingDate:null,paidAmount:Number(Ge.unitPrice*Ge.qty)}),Oe++}catch(Ee){console.error(Ee),De++}await a("",`: ${Oe}, : ${De}`),p("upload"),r(null),o([])};return s.jsxs("div",{className:"h-full flex flex-col relative overflow-hidden",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1 shrink-0",children:s.jsx("div",{className:"flex justify-center items-center mb-4",children:s.jsxs("div",{className:"inline-flex flex-col items-start",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-teal-500 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-teal-600 uppercase",children:"Multi-Channel Sync Engine"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Omni-Channel Sync"})]})]})})}),f==="upload"&&s.jsx("div",{className:"flex-1 flex flex-col items-center pt-10 px-8 pb-20",children:s.jsxs("div",{className:"w-[600px] bg-white p-10 rounded-[2.5rem] shadow-2xl border border-slate-100/50 text-center relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1.5 bg-gradient-to-r from-teal-400 via-emerald-400 to-green-400"}),s.jsxs("div",{className:"mb-8 relative z-10",children:[s.jsx("div",{className:"w-24 h-24 mx-auto bg-slate-50 rounded-full flex items-center justify-center mb-4 shadow-inner",children:s.jsx("span",{className:"material-symbols-rounded text-5xl text-teal-500",children:"cloud_sync"})}),s.jsx("h3",{className:"text-2xl font-black text-slate-700 mt-2",children:"  "}),s.jsx("p",{className:"text-slate-400 text-sm font-bold mt-2",children:" API    "})]}),s.jsxs("div",{className:"mb-6 text-left bg-slate-50 p-6 rounded-2xl border border-slate-100",children:[s.jsx("label",{htmlFor:"mall-type-select",className:"block text-xs font-black text-slate-400 uppercase mb-2 ml-1",children:" "}),s.jsxs("select",{id:"mall-type-select",value:n,onChange:_e=>i(_e.target.value),className:"w-full h-12 px-4 rounded-xl bg-white border border-slate-200 font-bold text-slate-700 focus:ring-4 focus:ring-teal-500/20 focus:border-teal-500 transition-all outline-none",children:[s.jsx("option",{value:"sabangnet",children:" (Sabangnet API)"}),s.jsx("option",{value:"playauto",children:" (PlayAuto API)"}),s.jsx("option",{value:"naver",children:"  (Commerce API)"}),s.jsx("option",{value:"coupang",children:" ( API)"}),s.jsx("option",{value:"custom",children:"   (  )"}),s.jsx("option",{value:"generic",children:" (,,,)"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsx("div",{className:"flex flex-col gap-2",children:s.jsxs("button",{onClick:Le,disabled:Te||n==="generic",className:"h-24 rounded-2xl bg-teal-50 border-2 border-teal-100 hover:border-teal-400 hover:bg-teal-100/50 transition-all flex flex-col items-center justify-center gap-2 group disabled:opacity-50 disabled:grayscale",children:[Te?s.jsx("div",{className:"w-6 h-6 border-2 border-teal-500 border-t-transparent rounded-full animate-spin"}):s.jsx("span",{className:"material-symbols-rounded text-3xl text-teal-600 group-hover:scale-110 transition-transform",children:"bolt"}),s.jsx("span",{className:"text-xs font-black text-teal-700",children:"API  "})]})}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("button",{onClick:()=>document.getElementById("file-upload").click(),className:"h-24 rounded-2xl bg-slate-50 border-2 border-dashed border-slate-200 hover:border-teal-400 hover:bg-slate-100/50 transition-all flex flex-col items-center justify-center gap-2 group",children:[s.jsx("span",{className:"material-symbols-rounded text-3xl text-slate-400 group-hover:text-teal-600 transition-colors",children:"upload_file"}),s.jsx("span",{className:"text-xs font-black text-slate-500",children:"  "})]}),s.jsx("input",{id:"file-upload",type:"file",onChange:$,className:"hidden",accept:".csv"})]})]}),t&&s.jsxs("div",{className:"mb-4 bg-emerald-50 p-3 rounded-xl flex items-center justify-between border border-emerald-100 animate-in fade-in slide-in-from-top-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-emerald-600 text-sm",children:"check_circle"}),s.jsx("span",{className:"text-[11px] font-bold text-emerald-700",children:t.name})]}),s.jsx("button",{onClick:()=>r(null),className:"text-emerald-400 hover:text-emerald-600",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"close"})})]}),te&&s.jsxs("div",{className:"mb-6 bg-blue-50 p-6 rounded-2xl border border-blue-100 flex flex-col items-center gap-3 animate-pulse",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-xs font-black text-blue-600 uppercase tracking-widest",children:"AI    ..."})]}),X&&!te&&s.jsxs("div",{className:"mb-6 bg-gradient-to-br from-indigo-50 to-blue-50 p-6 rounded-[2rem] border border-blue-100 text-left relative overflow-hidden animate-in fade-in zoom-in duration-300",children:[s.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:s.jsx("span",{className:"material-symbols-rounded text-6xl text-indigo-500",children:"auto_awesome"})}),s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-lg bg-indigo-500 flex items-center justify-center shadow-lg shadow-indigo-200",children:s.jsx("span",{className:"material-symbols-rounded text-white text-[14px]",children:"smart_toy"})}),s.jsx("span",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-[0.2em]",children:"Smart AI Guide"})]}),s.jsx("div",{className:"text-slate-700 text-[13px] font-medium leading-relaxed whitespace-pre-wrap",children:X}),s.jsx("button",{onClick:()=>U(null),className:"mt-4 w-full h-10 bg-white/50 hover:bg-white text-slate-500 text-[11px] font-black rounded-xl border border-indigo-100/50 transition-all flex items-center justify-center gap-2",children:" "})]}),s.jsxs("div",{className:"mt-4 flex gap-3",children:[s.jsx("button",{className:"flex-1 h-12 rounded-xl bg-slate-100 text-slate-500 font-black hover:bg-slate-200 transition-colors",onClick:()=>b(!0),children:"  "}),s.jsx("button",{className:"flex-[2] h-12 rounded-xl bg-teal-600 text-white font-black hover:bg-teal-500 shadow-lg shadow-teal-200 transition-all hover:scale-[1.02] disabled:opacity-50 disabled:scale-100",disabled:!t,onClick:ne,children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:"  "}),s.jsx("span",{className:"material-symbols-rounded text-lg",children:"arrow_forward"})]})})]})]})}),f==="review"&&s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 mt-1 flex flex-col gap-3 overflow-hidden flex-1 pb-6 lg:pb-8 min-[2000px]:pb-12",children:s.jsxs("div",{className:"bg-white rounded-[1.5rem] shadow-xl border border-slate-200 relative flex flex-col h-full overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-teal-400 via-emerald-400 to-green-400 z-10"}),s.jsxs("div",{className:"flex justify-between items-center mb-2 shrink-0 p-5 pb-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-teal-500 animate-pulse"}),s.jsx("span",{className:"text-[11px] font-black text-slate-500 uppercase tracking-widest",children:"  "}),s.jsxs("span",{className:"bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-[10px] font-bold ml-2",children:[" ",l.length,""]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("button",{onClick:()=>{p("upload"),o([]),r(null)},className:"h-8 px-3 rounded-lg bg-slate-100 hover:bg-slate-200 text-slate-600 text-xs font-bold flex items-center gap-1 transition-colors",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"arrow_back"})," "]})})]}),s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar p-0.5",children:s.jsxs("table",{className:"w-full text-xs border-separate border-spacing-0",children:[s.jsx("thead",{className:"sticky top-0 z-10",children:s.jsxs("tr",{className:"bg-slate-50/80 backdrop-blur-md",children:[s.jsx("th",{className:"px-4 py-2 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[5%]",children:"No"}),s.jsx("th",{className:"px-4 py-2 text-left text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[20%]",children:""}),s.jsx("th",{className:"px-4 py-2 text-left text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[25%]",children:" "}),s.jsx("th",{className:"px-4 py-2 text-left text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[25%]",children:"  "}),s.jsx("th",{className:"px-4 py-2 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[15%]",children:"/"}),s.jsx("th",{className:"px-4 py-2 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[10%]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:l.map((_e,Oe)=>{const De=!!_e.internalProductId;return s.jsxs("tr",{className:`hover:bg-slate-50/80 transition-colors ${De?"":"bg-red-50/30"}`,children:[s.jsx("td",{className:"px-4 py-3 text-center text-slate-400 font-bold",children:Oe+1}),s.jsxs("td",{className:"px-4 py-3",children:[s.jsxs("div",{className:"font-bold flex gap-2 items-center text-slate-700",children:[_e.customerName,_e.isNewCustomer?s.jsx("span",{className:"bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded text-[10px] font-black uppercase tracking-tight",children:"New"}):s.jsx("span",{className:"bg-purple-50 text-purple-600 px-1.5 py-0.5 rounded text-[10px] font-black uppercase tracking-tight",children:"Exist"})]}),s.jsx("div",{className:"text-[10px] text-slate-400 font-bold mt-0.5",children:_e.mobile})]}),s.jsx("td",{className:"px-4 py-3 text-slate-600 font-medium",children:_e.mallProductName}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("select",{className:`w-full h-8 pl-2 pr-8 rounded-lg text-xs font-bold border outline-none bg-white focus:ring-2 focus:ring-teal-500/20 transition-all appearance-none cursor-pointer
                                                        ${De?"border-slate-200 text-slate-700":"border-red-300 text-red-500 bg-red-50/50"}`,value:_e.internalProductId||"",onChange:Ge=>pe(Oe,Ge.target.value),style:{backgroundImage:"none"},children:[s.jsx("option",{value:"",children:"--    --"}),s.jsx("option",{value:"NEW",className:"font-black text-blue-600",children:"   ..."}),c.map(Ge=>s.jsxs("option",{value:Ge.product_id,children:[Ge.product_name," (",Ge.specification,")"]},Ge.product_id))]})}),s.jsxs("td",{className:"px-4 py-3 text-center",children:[s.jsxs("div",{className:"font-bold text-slate-700",children:[_e.qty,""]}),s.jsxs("div",{className:"text-[10px] text-slate-400 font-bold",children:[Fe(_e.unitPrice),""]})]}),s.jsx("td",{className:"px-4 py-3 text-center",children:De?s.jsx("span",{className:"text-emerald-500 font-black text-[10px] bg-emerald-50 px-2 py-1 rounded-full",children:"MATCHED"}):s.jsx("span",{className:"text-red-500 font-black text-[10px] bg-red-50 px-2 py-1 rounded-full animate-pulse",children:"CHECK"})})]},Oe)})})]})}),s.jsxs("div",{className:"bg-slate-900 border-t border-slate-800 p-4 px-8 flex justify-between items-center shrink-0 z-20 h-[88px]",children:[s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40",children:s.jsx("span",{className:"material-symbols-rounded",children:"sync_alt"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:" "}),s.jsxs("div",{className:"flex items-baseline gap-3 text-white",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),s.jsxs("span",{className:"text-sm font-bold",children:[" ",l.filter(_e=>_e.internalProductId).length]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),s.jsxs("span",{className:"text-sm font-bold",children:[" ",l.filter(_e=>!_e.internalProductId).length]})]})]})]})]}),s.jsxs("button",{onClick:Ne,className:"px-10 h-12 rounded-xl bg-teal-600 hover:bg-teal-500 text-white font-black shadow-lg shadow-teal-900/40 transition-all hover:scale-105 text-sm flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"cloud_sync"}),s.jsx("span",{className:"text-sm uppercase tracking-tight",children:"  "})]})]})]})}),E&&s.jsxs("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/60 backdrop-blur-sm",onClick:()=>I(!1)}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-[450px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"bg-slate-900 px-6 py-4 flex justify-between items-center",children:[s.jsx("h3",{className:"text-white font-bold text-lg",children:"   "}),s.jsx("button",{onClick:()=>I(!1),className:"text-slate-400 hover:text-white",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:" "}),s.jsx("input",{value:R.name,readOnly:!0,className:"w-full h-10 px-3 rounded-xl bg-slate-50 border-none font-bold text-sm text-slate-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:"  ()"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:R.tag,onChange:_e=>P({...R,tag:_e.target.value}),className:"w-24 h-10 px-2 rounded-xl bg-slate-100 border-none font-bold text-sm",children:[s.jsx("option",{value:"",children:"()"}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsx("input",{value:R.name,onChange:_e=>P({...R,name:_e.target.value}),className:"flex-1 h-10 px-3 rounded-xl bg-slate-100 border-none font-bold text-sm focus:ring-2 focus:ring-teal-500"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsx("input",{value:R.spec,onChange:_e=>P({...R,spec:_e.target.value}),className:"w-full h-10 px-3 rounded-xl bg-slate-100 border-none font-bold text-sm focus:ring-2 focus:ring-teal-500"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsx("input",{value:R.price,onChange:_e=>P({...R,price:_e.target.value}),className:"w-full h-10 px-3 rounded-xl bg-slate-100 border-none font-bold text-sm text-right focus:ring-2 focus:ring-teal-500"})]})]})]}),s.jsxs("div",{className:"p-4 bg-slate-50 flex justify-end gap-2 border-t border-slate-100",children:[s.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 rounded-xl text-slate-500 font-bold hover:bg-slate-200 text-xs",children:""}),s.jsx("button",{onClick:Re,className:"px-6 py-2 rounded-xl bg-teal-600 text-white font-bold hover:bg-teal-500 shadow-lg shadow-teal-200 text-xs",children:"  "})]})]})]}),g&&s.jsxs("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/60 backdrop-blur-sm",onClick:()=>b(!1)}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[80vh]",children:[s.jsxs("div",{className:"bg-slate-900 px-6 py-4 flex justify-between items-center shrink-0",children:[s.jsx("h3",{className:"text-white font-bold text-lg",children:"   "}),s.jsx("button",{onClick:()=>b(!1),className:"text-slate-400 hover:text-white",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"flex-1 overflow-auto p-0",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{className:"bg-slate-50 sticky top-0 border-b border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left font-black text-slate-500",children:" "}),s.jsx("th",{className:"px-4 py-3 text-left font-black text-slate-500",children:"  "}),s.jsx("th",{className:"px-4 py-3 w-16 text-center font-black text-slate-500",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:Object.entries(u).map(([_e,Oe])=>{const De=Oe.id||Oe,Ge=c.find(Ee=>Ee.product_id==De);return s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-4 py-3 text-slate-600 font-medium",children:_e}),s.jsx("td",{className:"px-4 py-3 text-blue-600 font-bold",children:Ge?`${Ge.product_name} (${Ge.specification})`:`ID: ${De} ()`}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("button",{onClick:()=>{const Ee={...u};delete Ee[_e],W(Ee)},className:"w-8 h-8 rounded-lg hover:bg-red-50 text-slate-300 hover:text-red-500 transition-colors flex items-center justify-center mx-auto",children:s.jsx("span",{className:"material-symbols-rounded text-base",children:"delete"})})})]},_e)})})]})})]})]}),s.jsx(mIe,{isOpen:w,onClose:()=>j(!1),fileData:k,onImport:de})]})},vIe=`
    @media print {
        @page { size: A4 landscape; margin: 0; }
        html, body { 
            background: white !important; 
            color: black !important;
            color-scheme: light !important;
            margin: 0 !important;
            padding: 0 !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }
        #printable-shipping-report {
            display: block !important;
            position: absolute !important;
            left: 0 !important;
            top: 0 !important;
            width: 100% !important;
            padding: 10mm !important;
            visibility: visible !important;
            background: white !important;
        }
        #printable-shipping-report * {
            visibility: visible !important;
            border-color: black !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }
    }
    .print-report-wrapper { 
        font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; 
        color: #000; 
        width: 100%;
    }
    .report-card {
        border: 2px solid #000 !important;
        padding: 30px;
        background: white !important;
    }
    .report-header h1 { 
        margin: 0; 
        font-size: 32px; 
        font-weight: 900; 
        letter-spacing: 0.3em; 
        border-bottom: 5px double #000 !important;
        display: inline-block;
        padding: 0 50px 10px 50px;
    }
    table { 
        width: 100%; 
        border-collapse: collapse !important; 
        font-size: 10px; 
        border: 2px solid #000 !important; 
        table-layout: fixed;
    }
    th, td { 
        border: 1px solid #000 !important; 
        padding: 6px 4px; 
        text-align: center; 
    }
    th { 
        background: #f0f0f0 !important; 
        font-weight: 900; 
        border-bottom: 2px solid #000 !important;
    }
    .bg-row { background: #fafafa !important; }
    .summary-table {
        width: 400px;
        border: 2px solid #000 !important;
    }
    .summary-table th, .summary-table td { border: 1px solid #000 !important; }
`,bIe=()=>{const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState(""),[n,i]=F.useState({start:new Date(Date.now()-10080*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),[l,o]=F.useState(""),[c,d]=F.useState([]),[u,h]=F.useState(new Set),[f,p]=F.useState(!1),[g,b]=F.useState(!1),[w,j]=F.useState(!1),[k,T]=F.useState(!1),[E,I]=F.useState([]),[R,P]=F.useState({date:new Date().toISOString().split("T")[0],carrier:"CJ",trackingMap:{}}),H=F.useCallback(async()=>{b(!0);try{const re=["","","","","","",""];let K=[];for(const ae of re){const ce=await ht("get_shipments_by_status",{status:ae,search:l,startDate:n.start,endDate:n.end}),de=Array.isArray(ce)?ce:[];K=K.concat(de.map(he=>({...he,current_status:ae})))}K.sort((ae,ce)=>new Date(ce.order_date)-new Date(ae.order_date)),d(K)}catch(re){console.error("Load Error:",re)}finally{b(!1)}},[n,l]);F.useEffect(()=>{H()},[H]);const G=F.useMemo(()=>t===""?c:c.filter(re=>re.current_status===t),[c,t]),X=F.useMemo(()=>({all:c.length,receipt:c.filter(re=>re.current_status==="").length,pending:c.filter(re=>re.current_status==="").length,paid:c.filter(re=>["",""].includes(re.current_status)).length,shipping:c.filter(re=>re.current_status==="").length,completed:c.filter(re=>re.current_status==="").length}),[c]),U=re=>{const K=new Set(u);K.has(re)?K.delete(re):K.add(re),h(K)},te=re=>{if(re){const K=new Set(G.filter(ae=>ae.current_status!=="").map(ae=>ae.sales_id));h(K)}else h(new Set)},Z=async re=>{const K=c.filter(ae=>u.has(ae.sales_id));if(K.length===0){a("","  .");return}if(re==="set_pending"){if(await e("  ",` ${K.length} ''  ?`))try{for(const ae of K)await ht("update_sale_status",{salesId:String(ae.sales_id),status:""});a("","."),H(),h(new Set)}catch(ae){a("",`  : ${ae}`)}}else if(re==="confirm_payment"){if(await e(" ",` ${K.length} '' ?`))try{for(const ae of K)await ht("update_sale_status",{salesId:String(ae.sales_id),status:""});a("","."),H(),h(new Set)}catch(ae){a("",`  : ${ae}`)}}else if(re==="shipping_process"){const ae=K.filter(de=>["","",""].includes(de.current_status)),ce=()=>{I(K),P(de=>({...de,trackingMap:K.reduce((he,pe)=>({...he,[pe.sales_id]:""}),{})})),j(!0)};ae.length>0?await e("   ",`   ${ae.length}     ('', '').

      '' .
   ?`)&&ce():ce()}else if(re==="delete"){if(await e("",` ${K.length}  ?
    .`))try{for(const ae of K)await ht("delete_sale",{salesId:String(ae.sales_id)});a("","."),H(),h(new Set)}catch(ae){a("",`  : ${ae}`)}}else if(re==="complete_delivery"&&await e("  ",` ${K.length} '' ?
    .`))try{for(const ae of K)await ht("update_sale_status",{salesId:String(ae.sales_id),status:""});a("","  ."),H(),h(new Set)}catch(ae){a("",`  : ${ae}`)}},J=async()=>{try{for(const re of E){const K=R.trackingMap[re.sales_id];await ht("complete_shipment",{salesId:String(re.sales_id),carrier:R.carrier,trackingNumber:K||null,shippingDate:R.date,memo:re.memo})}j(!1),a("","  ."),H(),h(new Set)}catch(re){a("",`  : ${re}`)}},B=(re,K)=>{P(ae=>({...ae,trackingMap:{...ae.trackingMap,[re]:K}}))},W=async()=>{if(G.length===0){a("","  .");return}const K=[["","","","","","","","","","",""].join(","),...G.map(de=>[de.order_date.substring(0,10),de.current_status,`"${de.customer_name}"`,`"${de.mobile_number}"`,`"${de.product_name}"`,`"${de.specification}"`,de.quantity,de.total_amount,`"${de.courier_name||""}"`,`"${de.tracking_number||""}"`,`"${de.memo||""}"`].join(","))].join(`
`),ae=new Blob(["\uFEFF"+K],{type:"text/csv;charset=utf-8;"}),ce=document.createElement("a");ce.href=URL.createObjectURL(ae),ce.download=`_${new Date().toISOString().slice(0,10)}.csv`,ce.click(),a("","CSV   .")},$=()=>{const re=document.getElementById("printable-shipping-content");if(!re)return;const K=`
            <style>
                ${vIe}
                @page { size: A4 landscape; margin: 10mm; }
                body { font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; margin: 0; padding: 10mm; }
            </style>
            ${re.outerHTML}
        `;oo(K)},Q=async(re,K)=>{if(re.stopPropagation(),!K.tracking_number)return;let ae="";const ce=K.tracking_number.replace(/[^0-9]/g,""),de=K.courier_name||"";de.includes("CJ")||de.includes("")?ae=`https://www.cjlogistics.com/ko/tool/parcel/tracking?gnrlCode=${ce}`:de.includes("")?ae=`https://service.epost.go.kr/trace.RetrieveDomRgiTraceList.comm?sid1=${ce}`:de.includes("")?ae=`https://www.lotteglogis.com/home/reservation/tracking/index?InvNo=${ce}`:de.includes("")?ae=`https://www.hanjin.com/kor/CMS/DeliveryMgr/WaybillResult.do?mCode=MN038&wblNum=${ce}`:de.includes("")?ae=`https://www.ilogen.com/web/personal/trace/${ce}`:ae=`https://search.naver.com/search.naver?query=${ce}`,ae&&window.open(ae,"_blank","noopener,noreferrer")},ne=({status:re})=>{const K={:"bg-slate-100 text-slate-600 border-slate-200",:"bg-rose-50 text-rose-600 border-rose-100",:"bg-amber-50 text-amber-600 border-amber-100",:"bg-indigo-50 text-indigo-600 border-indigo-100",:"bg-blue-50 text-blue-600 border-blue-100",:"bg-purple-50 text-purple-600 border-purple-100",:"bg-emerald-50 text-emerald-600 border-emerald-100"},ae=K[re]||K.;return s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black border ${ae}`,children:re})};return s.jsxs("div",{id:"print-root",className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative",children:[s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1 no-print",children:[s.jsxs("div",{className:"flex justify-between items-end mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-emerald-500 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-emerald-600 uppercase",children:"Logistics System"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Shipping"})]})]}),s.jsxs("button",{onClick:()=>p(!f),className:"no-print flex items-center gap-1 text-slate-400 hover:text-emerald-600 transition-colors text-xs font-bold bg-white px-3 py-1.5 rounded-full border border-slate-100 hover:border-emerald-200 shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"help"}),s.jsx("span",{children:" "})]})]}),f&&s.jsx("div",{className:"mb-4 bg-slate-50 border border-slate-200 rounded-2xl p-4 animate-in fade-in slide-in-from-top-2 duration-300 shadow-sm",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-black border bg-slate-100 text-slate-600 border-slate-200",children:""}),s.jsx("span",{className:"text-sm font-bold text-slate-700",children:"   "})]}),s.jsxs("p",{className:"text-xs text-slate-500 leading-relaxed pl-1",children:["    ,      .",s.jsx("br",{}),"     ."]})]}),s.jsx("div",{className:"hidden md:block w-px bg-slate-200"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-black border bg-rose-50 text-rose-600 border-rose-100",children:""}),s.jsx("span",{className:"text-sm font-bold text-slate-700",children:"    "})]}),s.jsxs("p",{className:"text-xs text-slate-500 leading-relaxed pl-1",children:[" ",s.jsx("strong",{children:" (Confirm)"}),",        .",s.jsx("br",{}),"''      ''     ."]})]}),s.jsx("div",{className:"hidden md:block w-px bg-slate-200"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-black border bg-indigo-50 text-indigo-600 border-indigo-100",children:""}),s.jsx("span",{className:"text-sm font-bold text-slate-700",children:"   "})]}),s.jsxs("p",{className:"text-xs text-slate-500 leading-relaxed pl-1",children:[s.jsx("strong",{children:"[  ]"}),"    API(  )     .",s.jsx("br",{}),"     ",s.jsx("strong",{children:"''"}),"  ."]})]})]})}),s.jsx("div",{className:"grid grid-cols-6 gap-3 mb-4 no-print",children:[{label:"",count:X.all,icon:"inventory_2",color:"slate"},{label:"",count:X.receipt,icon:"receipt_long",color:"sky"},{label:"",count:X.pending,icon:"payments",color:"cyan"},{label:"",count:X.paid,icon:"credit_score",color:"teal"},{label:"",count:X.shipping,icon:"local_shipping",color:"emerald"},{label:"",count:X.completed,icon:"check_circle",color:"slate"}].map(re=>s.jsxs("div",{onClick:()=>{r(re.label),h(new Set)},className:`p-3 rounded-[1.5rem] border transition-all cursor-pointer relative overflow-hidden group hover:shadow-md 
                                ${t===re.label?`bg-${re.color}-50 border-${re.color}-600 ring-1 ring-${re.color}-600 shadow-md transform scale-[1.02]`:`bg-white border-slate-200 hover:border-${re.color}-300 hover:bg-${re.color}-50/30`}
                            `,children:[s.jsx("div",{className:`absolute top-0 right-0 p-3 transition-opacity ${t===re.label?"opacity-20":"opacity-10 group-hover:opacity-20"} text-${re.color}-600`,children:s.jsx("span",{className:"material-symbols-rounded text-4xl",children:re.icon})}),s.jsx("div",{className:`text-[10px] font-bold uppercase tracking-wider mb-0.5 ${t===re.label?`text-${re.color}-900`:"text-slate-500"}`,children:re.label}),s.jsx("div",{className:`text-2xl font-black ${t===re.label?`text-${re.color}-700`:"text-slate-700"}`,children:re.count})]},re.label))}),s.jsxs("div",{className:"flex items-center justify-between gap-3 bg-white p-3 rounded-[1.2rem] border border-slate-200 shadow-sm mb-2 no-print",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 pl-2 border-r border-slate-200 pr-4",children:[s.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" "}),s.jsx("input",{type:"date",value:n.start,onChange:re=>i({...n,start:re.target.value}),className:"h-8 rounded-lg border-slate-200 text-xs font-bold text-slate-600 focus:ring-emerald-500"}),s.jsx("span",{className:"text-slate-300",children:"~"}),s.jsx("input",{type:"date",value:n.end,onChange:re=>i({...n,end:re.target.value}),className:"h-8 rounded-lg border-slate-200 text-xs font-bold text-slate-600 focus:ring-emerald-500"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{value:l,onChange:re=>o(re.target.value),placeholder:", , ...",className:"h-8 w-64 rounded-lg border-slate-200 pl-8 text-xs font-bold focus:ring-emerald-500"}),s.jsx("span",{className:"material-symbols-rounded absolute left-2 top-1.5 text-slate-400 text-base",children:"search"})]}),s.jsx("button",{onClick:H,className:"h-8 w-8 rounded-lg bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-500",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"refresh"})}),s.jsxs("button",{onClick:async()=>{b(!0);try{const re=await ht("batch_sync_courier_statuses"),K=typeof re=="object"&&re?.count!==void 0?re.count:re;a(" ",`${K}   .`),H()}catch(re){a("",` : ${re}`)}finally{b(!1)}},className:"h-8 px-3 rounded-lg bg-indigo-50 text-indigo-600 hover:bg-indigo-100 font-bold text-[10px] flex items-center gap-1.5 transition-all",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"sync_alt"}),"  "]})]}),s.jsx("div",{className:"flex items-center gap-2",children:u.size>0&&(()=>{const re=c.filter(he=>u.has(he.sales_id)),K=re.some(he=>he.current_status===""),ae=re.some(he=>["","",""].includes(he.current_status)),ce=re.some(he=>["","","","",""].includes(he.current_status)),de=re.some(he=>he.current_status==="");return s.jsxs("div",{className:"flex gap-2 animate-in fade-in slide-in-from-right-4 duration-300",children:[K&&s.jsxs("button",{onClick:()=>Z("set_pending"),className:"h-8 px-3 rounded-lg bg-amber-50 text-amber-600 hover:bg-amber-100 font-bold text-xs flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"hourglass_top"})," "]}),ae&&s.jsxs("button",{onClick:()=>Z("confirm_payment"),className:"h-8 px-3 rounded-lg bg-indigo-50 text-indigo-600 hover:bg-indigo-100 font-bold text-xs flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"check_circle"})," "]}),ce&&s.jsxs("button",{onClick:()=>Z("shipping_process"),className:"h-8 px-3 rounded-lg bg-emerald-600 text-white hover:bg-emerald-700 font-bold text-xs flex items-center gap-1 shadow-sm shadow-emerald-200",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"local_shipping"})," "]}),de&&s.jsxs("button",{onClick:()=>Z("complete_delivery"),className:"h-8 px-3 rounded-lg bg-slate-800 text-white hover:bg-slate-900 font-bold text-xs flex items-center gap-1 shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"task_alt"})," "]}),s.jsxs("button",{onClick:()=>Z("delete"),className:"h-8 px-3 rounded-lg bg-white border border-rose-100 text-rose-500 hover:bg-rose-50 font-bold text-xs flex items-center gap-1 transition-all",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"delete"})," "]})]})})()})]})]}),s.jsx("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pb-6 lg:pb-8 min-[2000px]:pb-12 overflow-hidden flex flex-col no-print",children:s.jsxs("div",{className:"flex-1 bg-white rounded-[1.5rem] shadow-sm border border-slate-200 relative overflow-hidden flex flex-col",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-emerald-500 to-teal-400"}),s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar p-0.5",children:s.jsxs("table",{className:"w-full text-xs border-separate border-spacing-0",children:[s.jsx("thead",{className:"sticky top-0 z-10 bg-slate-50/95 backdrop-blur",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 border-b border-slate-100 w-10 text-center",children:G.length>0&&G.some(re=>re.current_status!=="")&&s.jsx("input",{type:"checkbox",onChange:re=>te(re.target.checked),className:"rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"})}),s.jsx("th",{className:"px-4 py-3 border-b border-slate-100 text-left font-black text-slate-400 uppercase text-[9px]",children:""}),s.jsx("th",{className:"px-4 py-3 border-b border-slate-100 text-left font-black text-slate-400 uppercase text-[9px]",children:""}),s.jsx("th",{className:"px-4 py-3 border-b border-slate-100 text-left font-black text-slate-400 uppercase text-[9px]",children:""}),s.jsx("th",{className:"px-4 py-3 border-b border-slate-100 text-left font-black text-slate-400 uppercase text-[9px]",children:"/"}),s.jsx("th",{className:"px-4 py-3 border-b border-slate-100 text-right font-black text-slate-400 uppercase text-[9px]",children:""}),s.jsx("th",{className:"px-4 py-3 border-b border-slate-100 text-center font-black text-slate-400 uppercase text-[9px]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:g?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"p-20 text-center text-slate-400 bg-slate-50/30 animate-pulse",children:"  ..."})}):G.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"p-20 text-center text-slate-400",children:"   ."})}):G.map(re=>{const K=re.current_status==="";return s.jsxs("tr",{onClick:()=>!K&&U(re.sales_id),className:`group hover:bg-slate-50/80 transition-all cursor-pointer ${u.has(re.sales_id)?"bg-emerald-50/30":""} ${K?"opacity-70 grayscale":""}`,children:[s.jsx("td",{className:"px-4 py-3 text-center border-b border-slate-50",onClick:ae=>ae.stopPropagation(),children:!K&&s.jsx("input",{type:"checkbox",checked:u.has(re.sales_id),onChange:()=>U(re.sales_id),className:"rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"})}),s.jsx("td",{className:"px-4 py-3 border-b border-slate-50 font-bold text-slate-600",children:re.order_date.substring(0,10)}),s.jsx("td",{className:"px-4 py-3 border-b border-slate-50",children:s.jsx(ne,{status:re.current_status})}),s.jsxs("td",{className:"px-4 py-3 border-b border-slate-50",children:[s.jsx("div",{className:"font-black text-slate-800 text-sm mb-0.5",children:re.customer_name}),s.jsx("div",{className:"text-[10px] text-slate-400 font-bold",children:kn(re.mobile_number)})]}),s.jsxs("td",{className:"px-4 py-3 border-b border-slate-50",children:[s.jsxs("div",{className:"font-bold text-slate-700 mb-1",children:[re.product_name," ",s.jsxs("span",{className:"text-slate-400 font-normal",children:["(",re.specification,")"]})," x ",re.quantity]}),s.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-slate-500",children:[s.jsx("span",{className:"material-symbols-rounded text-[14px] text-slate-300",children:"local_shipping"}),s.jsx("span",{className:"text-slate-600 truncate max-w-[200px]",title:re.shipping_address_primary,children:re.shipping_address_primary}),s.jsx("span",{className:"font-bold text-emerald-600 shrink-0",children:re.shipping_name!==re.customer_name?`(${re.shipping_name})`:""})]})]}),s.jsx("td",{className:"px-4 py-3 border-b border-slate-50 text-right font-black text-slate-700",children:Fe(re.total_amount)}),s.jsx("td",{className:"px-4 py-3 border-b border-slate-50 text-center",children:re.tracking_number?s.jsxs("div",{onClick:ae=>Q(ae,re),className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-slate-100 border border-slate-200 text-slate-600 cursor-pointer hover:bg-emerald-50 hover:text-emerald-700 hover:border-emerald-200 transition-all group/track",children:[s.jsx("span",{className:"text-[10px] font-bold",children:re.courier_name}),s.jsx("span",{className:"text-[11px] font-black tracking-wide group-hover/track:underline decoration-emerald-400 decoration-2 underline-offset-2",children:re.tracking_number}),s.jsx("span",{className:"material-symbols-rounded text-[14px] text-slate-400 group-hover/track:text-emerald-500",children:"open_in_new"})]}):s.jsx("span",{className:"text-[11px] text-slate-300 font-medium",children:"-"})})]},re.sales_id)})})]})})]})}),s.jsx("div",{id:"printable-shipping-report",style:{display:"none"},children:s.jsx("div",{style:{fontFamily:'"Malgun Gothic", sans-serif',padding:"0",color:"#000",width:"100%"},children:s.jsxs("div",{style:{border:"2px solid #000",padding:"30px",backgroundColor:"#fff"},children:[s.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[s.jsx("h1",{style:{margin:"0",fontSize:"32px",fontWeight:"900",letterSpacing:"0.3em",borderBottom:"5px double #000",display:"inline-block",padding:"0 50px 10px 50px"},children:"    "}),s.jsxs("div",{style:{marginTop:"20px",display:"flex",justifyContent:"space-between",fontSize:"14px",fontWeight:"bold"},children:[s.jsxs("span",{children:[" : ",s.jsxs("strong",{children:[n.start," ~ ",n.end]})]}),s.jsxs("span",{children:[" : ",new Date().toLocaleString()]})]})]}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"2px solid #000",tableLayout:"fixed"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"35px",fontWeight:"900"},children:"No"}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"80px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"60px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"80px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left",paddingLeft:"10px",fontWeight:"900"},children:"  / "}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"40px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"80px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left",paddingLeft:"10px",fontWeight:"900"},children:"  / "}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"120px",fontWeight:"900"},children:" "})]})}),s.jsx("tbody",{children:G.map((re,K)=>s.jsxs("tr",{style:{backgroundColor:K%2===1?"#fafafa":"#fff"},children:[s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center"},children:K+1}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center"},children:re.order_date.substring(0,10)}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontWeight:"900"},children:re.current_status}),s.jsxs("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontWeight:"900"},children:[re.customer_name,s.jsx("div",{style:{fontSize:"8px",fontWeight:"normal"},children:kn(re.mobile_number)})]}),s.jsxs("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left"},children:[s.jsx("div",{style:{fontWeight:"900"},children:re.product_name}),s.jsx("div",{style:{fontSize:"9px",color:"#555"},children:re.specification||"-"})]}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontWeight:"900"},children:re.quantity}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"right"},children:re.total_amount.toLocaleString()}),s.jsxs("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left",fontSize:"9px"},children:[s.jsxs("div",{children:[re.shipping_address_primary," ",re.shipping_address_detail||""]}),re.shipping_name!==re.customer_name&&s.jsxs("div",{style:{fontWeight:"900",borderTop:"1px dashed #ccc",marginTop:"2px"},children:[": ",re.shipping_name]})]}),s.jsxs("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontSize:"9px"},children:[re.courier_name&&s.jsx("div",{style:{color:"#666"},children:re.courier_name}),s.jsx("div",{style:{fontWeight:"900"},children:re.tracking_number||"-"})]})]},K))})]}),s.jsx("div",{style:{marginTop:"30px",display:"flex",justifyContent:"flex-end"},children:s.jsx("table",{style:{width:"400px",border:"2px solid #000",borderCollapse:"collapse"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",backgroundColor:"#f0f0f0",width:"50%",fontSize:"11px"},children:" () "}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 15px",textAlign:"right",fontSize:"14px",fontWeight:"900"},children:[G.length," "]})]}),s.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",fontSize:"11px"},children:"   "}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 15px",textAlign:"right",fontSize:"14px",fontWeight:"900",color:"#d32f2f"},children:[" ",Fe(G.reduce((re,K)=>re+K.total_amount,0))]})]})]})})}),s.jsx("div",{style:{marginTop:"40px",textAlign:"center",fontSize:"12px",fontWeight:"bold",color:"#444"},children:"       ."}),s.jsx("div",{style:{marginTop:"50px",textAlign:"center",fontSize:"10px",color:"#999",borderTop:"1px solid #eee",paddingTop:"10px"},children:" Mycelium Smart Farm Integration System - All Rights Reserved."})]})})}),s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pb-6 lg:pb-8 min-[2000px]:pb-12 flex justify-end gap-2 animate-in slide-in-from-bottom-2 duration-500 delay-100 no-print",children:[s.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-1.5 px-4 py-2 rounded-xl bg-white border border-slate-200 text-slate-600 font-bold text-xs hover:bg-slate-50 hover:border-slate-300 shadow-sm transition-all",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"print"})," "]}),s.jsxs("button",{onClick:W,className:"flex items-center gap-1.5 px-4 py-2 rounded-xl bg-teal-600 text-white font-bold text-xs hover:bg-teal-700 shadow-sm shadow-teal-200 transition-all",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"download"}),"CSV "]})]}),w&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm animate-in fade-in",children:s.jsxs("div",{className:"bg-white rounded-[1.5rem] shadow-2xl w-[600px] overflow-hidden animate-in zoom-in-95 duration-300",children:[s.jsxs("div",{className:"p-5 bg-slate-900 text-white flex justify-between items-center",children:[s.jsxs("h3",{className:"text-lg font-black flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"local_shipping"}),"  "]}),s.jsx("button",{onClick:()=>j(!1),className:"opacity-70 hover:opacity-100 transition-opacity",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase block mb-1",children:""}),s.jsx("input",{type:"date",value:R.date,onChange:re=>P({...R,date:re.target.value}),className:"w-full rounded-xl border-slate-200 font-bold text-sm focus:ring-emerald-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase block mb-1",children:""}),s.jsxs("select",{value:R.carrier,onChange:re=>P({...R,carrier:re.target.value}),className:"w-full rounded-xl border-slate-200 font-bold text-sm focus:ring-emerald-500",children:[s.jsx("option",{value:"CJ",children:"CJ"}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:"/"})]})]})]}),s.jsx("div",{className:"mb-2 flex justify-between items-end",children:s.jsxs("span",{className:"text-xs font-bold text-slate-500",children:["   (",E.length,")"]})}),s.jsx("div",{className:"max-h-[300px] overflow-y-auto border border-slate-100 rounded-xl bg-slate-50 p-2 stylish-scrollbar",children:E.map((re,K)=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border border-slate-100 shadow-sm mb-2 last:mb-0",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-50 flex items-center justify-center text-indigo-600 font-black text-xs",children:K+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"font-bold text-slate-800 text-sm truncate",children:[re.customer_name," ",s.jsxs("span",{className:"text-slate-400 font-normal",children:[" ",re.shipping_name]})]}),s.jsx("div",{className:"text-[11px] text-slate-500 truncate",children:re.product_name})]}),s.jsx("div",{className:"w-40",children:s.jsx("input",{autoFocus:K===0,placeholder:"",value:R.trackingMap[re.sales_id]||"",onChange:ae=>B(re.sales_id,ae.target.value),className:"w-full h-8 rounded-lg border-slate-200 text-sm font-bold focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 transition-all"})})]},re.sales_id))})]}),s.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>j(!1),className:"px-5 py-2.5 rounded-xl text-slate-500 font-bold hover:bg-slate-200 transition-all text-xs",children:""}),s.jsxs("button",{onClick:J,className:"px-6 py-2.5 rounded-xl bg-emerald-600 text-white font-black hover:bg-emerald-700 shadow-lg shadow-emerald-200 transition-all text-xs flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"send"}),"   "]})]})]})}),k&&s.jsxs("div",{className:"fixed inset-0 z-[300] bg-slate-900/80 backdrop-blur-md flex items-center justify-center p-4",children:[s.jsxs("div",{className:"fixed top-8 right-8 flex flex-col gap-4 z-[310]",children:[s.jsx("button",{onClick:()=>T(!1),className:"w-14 h-14 bg-white text-slate-400 rounded-2xl shadow-2xl hover:text-rose-500 hover:scale-110 active:scale-95 transition-all flex items-center justify-center group",title:"",children:s.jsx("span",{className:"material-symbols-rounded text-3xl group-hover:rotate-90 transition-transform duration-300",children:"close"})}),s.jsx("div",{className:"h-px bg-white/20 w-full"}),s.jsxs("button",{onClick:$,className:"h-14 px-8 rounded-2xl font-black text-sm bg-indigo-600 text-white shadow-2xl shadow-indigo-500/30 hover:bg-indigo-700 hover:-translate-y-1 active:translate-y-0 transition-all flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-xl",children:"print"})," "]})]}),s.jsx("div",{className:"w-full max-w-[297mm] h-[210mm] max-h-[90vh] bg-white rounded-[1rem] shadow-2xl overflow-y-auto overflow-x-hidden relative custom-scrollbar",children:s.jsx("div",{id:"printable-shipping-content",className:"p-[10mm]",children:s.jsx("div",{style:{fontFamily:'"Malgun Gothic", sans-serif',color:"#000",width:"100%"},children:s.jsxs("div",{style:{border:"2px solid #000",padding:"30px",backgroundColor:"#fff"},children:[s.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[s.jsx("h1",{style:{margin:"0",fontSize:"32px",fontWeight:"900",letterSpacing:"0.3em",borderBottom:"5px double #000",display:"inline-block",padding:"0 50px 10px 50px"},children:"   "}),s.jsxs("div",{style:{marginTop:"20px",display:"flex",justifyContent:"space-between",fontSize:"14px",fontWeight:"bold"},children:[s.jsxs("span",{children:[" : ",s.jsxs("strong",{children:[n.start," ~ ",n.end]})]}),s.jsxs("span",{children:[" : ",new Date().toLocaleString()]})]})]}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"2px solid #000",tableLayout:"fixed"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"35px",fontWeight:"900"},children:"No"}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"60px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"70px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"70px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"90px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left",paddingLeft:"10px",fontWeight:"900"},children:" "}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left",paddingLeft:"10px",fontWeight:"900"},children:"/"}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"35px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"80px",fontWeight:"900"},children:""})]})}),s.jsx("tbody",{children:G.map((re,K)=>s.jsxs("tr",{style:{backgroundColor:K%2===1?"#fafafa":"#fff"},children:[s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center"},children:K+1}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontWeight:"900"},children:re.current_status}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center"},children:re.order_date.substring(0,10)}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontWeight:"900"},children:re.shipping_name}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center"},children:re.shipping_mobile_number?kn(re.shipping_mobile_number):"-"}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left",fontSize:"9px",lineHeight:"1.2"},children:re.shipping_address_primary}),s.jsxs("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left"},children:[s.jsx("div",{style:{fontWeight:"900"},children:re.product_name}),s.jsx("div",{style:{fontSize:"8px",color:"#555"},children:re.specification||""})]}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontWeight:"900"},children:re.quantity}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontSize:"9px"},children:re.tracking_number||"-"})]},K))})]}),s.jsx("div",{style:{marginTop:"30px",display:"flex",justifyContent:"flex-end"},children:s.jsx("table",{style:{width:"300px",border:"2px solid #000",borderCollapse:"collapse"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",width:"50%",fontSize:"11px"},children:"  "}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 15px",textAlign:"right",fontSize:"14px",fontWeight:"900"},children:[G.length," "]})]}),s.jsxs("tr",{children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",fontSize:"11px"},children:"  "}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 15px",textAlign:"right",fontSize:"14px",fontWeight:"900",color:"#d32f2f"},children:[G.reduce((re,K)=>re+(K.quantity||0),0).toLocaleString()," "]})]})]})})}),s.jsx("div",{style:{marginTop:"40px",textAlign:"center",fontSize:"12px",fontWeight:"bold"},children:"    ."}),s.jsx("div",{style:{marginTop:"50px",textAlign:"center",fontSize:"10px",color:"#999",borderTop:"1px solid #eee",paddingTop:"10px"},children:" Mycelium Smart Farm Integration System - All Rights Reserved."})]})})})})]})]})},yIe=()=>{const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState([]),[n,i]=F.useState({start:new Date(new Date().setMonth(new Date().getMonth()-1)).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),l=F.useMemo(()=>({pending:t.filter(Z=>Z.claim_status===""||Z.claim_status==="").length,today:t.filter(Z=>Z.created_at?.startsWith(new Date().toISOString().split("T")[0])).length}),[t]),[o,c]=F.useState({open:!1,claim:null,refundAmount:0,recoverInventory:!1,memo:""}),[d,u]=F.useState({open:!1,claim:null,category:"",qty:0,memo:""}),[h,f]=F.useState({open:!1,saleId:null,data:null}),[p,g]=F.useState({open:!1,query:"",results:[],loading:!1}),[b,w]=F.useState({open:!1,sale:null,type:"",category:"",qty:1,memo:""});F.useEffect(()=>{j()},[n]);const j=async()=>{try{const Z=await ht("get_sales_claims",{startDate:n.start||null,endDate:n.end||null});Array.isArray(Z)?(Z.sort((J,B)=>new Date(B.created_at)-new Date(J.created_at)),r(Z)):r([])}catch(Z){console.error(Z),r([])}},k=async Z=>{await e(" ",`   ?
     .`)&&T(Z)},T=async Z=>{try{await ht("delete_sales_claim",{claimId:Z}),a("","."),j()}catch(J){a(""," : "+J)}},E=Z=>{c({open:!0,claim:Z,refundAmount:0,recoverInventory:Z.claim_type==="",memo:""})},I=async Z=>{await e(" ",`  '${Z}' ?`)&&R(Z)},R=async Z=>{const{claim:J,refundAmount:B,recoverInventory:W,memo:$}=o;try{const Q=Number(String(B).replace(/[^0-9]/g,""));await ht("process_sales_claim",{claimId:J.claim_id,claimStatus:Z,isInventoryRecovered:W,refundAmount:Q});let ne=!1;if(Z===""&&J.customer_id){const K=`[ ] ${J.claim_type}   `,ae=`: ${J.sales_id}
: ${J.claim_type}
: ${J.reason_category}
: ${J.memo||"-"}

[ ]
: ${Fe(Q)}
: ${$||"-"}`;try{await ht("create_consultation",{customerId:J.customer_id,guestName:J.customer_name||"",contact:"",channel:"",counselorName:"",category:"",priority:"",title:K,content:ae}),ne=!0,console.log("CRM Log created successfully")}catch(ce){console.error("CRM Log failed:",ce),a("","  , CRM    : "+ce)}}c({...o,open:!1});let re=`  ${Z}.`;ne&&(re+=`
(CRM    )`),a("",re),j()}catch(Q){a(""," : "+Q)}},P=Z=>{u({open:!0,claim:Z,category:Z.reason_category,qty:Z.quantity,memo:Z.memo||""})},H=async()=>{try{await ht("update_sales_claim",{claimId:d.claim.claim_id,reasonCategory:d.category,quantity:Number(d.qty),memo:d.memo}),u({...d,open:!1}),a("","."),j()}catch(Z){a(""," : "+Z)}},G=async Z=>{if(!Z){a("","   .");return}f({open:!0,saleId:Z,data:null});try{const J=await ht("get_sale_detail",{salesId:Z});f(B=>({...B,data:J}))}catch(J){console.error("Failed to fetch sale detail:",J),f(B=>({...B,error:J}))}},X=async()=>{if(p.query){g(Z=>({...Z,loading:!0,results:[]}));try{const Z=await ht("search_sales_by_any",{query:p.query,period:"all"});g(J=>({...J,results:Array.isArray(Z)?Z:[],loading:!1}))}catch(Z){console.error(Z),g(J=>({...J,loading:!1}))}}},U=Z=>{const J=["","","",""].includes(Z.status);w({open:!0,sale:Z,type:J?"":"",category:"",qty:Z.quantity,memo:""}),g({...p,open:!1})},te=async()=>{try{await ht("create_sales_claim",{salesId:b.sale.sales_id,customerId:b.sale.customer_id||null,claimType:b.type,reasonCategory:b.category,quantity:Number(b.qty),memo:b.memo}),w({...b,open:!1}),a(""," ."),j()}catch(Z){a(""," : "+Z)}};return s.jsxs("div",{className:"h-full flex flex-col relative overflow-hidden",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1 shrink-0",children:s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-rose-500 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-rose-600 uppercase",children:"Claims Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["//  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Claims"})]})]})})}),s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 mb-3 shrink-0",children:s.jsxs("div",{className:"bg-white p-4 rounded-[2rem] shadow-xl border border-slate-100 flex justify-between items-center relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-rose-400 via-pink-400 to-rose-400 opacity-30"}),s.jsxs("div",{className:"flex gap-6 items-center z-10",children:[s.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 px-4 py-2 rounded-xl border border-slate-100",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wider",children:" "}),s.jsx("div",{className:"h-4 w-px bg-slate-200"}),s.jsx("input",{type:"date",value:n.start,onChange:Z=>i({...n,start:Z.target.value}),className:"bg-transparent border-none text-xs font-bold text-slate-600 focus:ring-0 p-0 font-mono"}),s.jsx("span",{className:"text-slate-300 text-xs",children:"~"}),s.jsx("input",{type:"date",value:n.end,onChange:Z=>i({...n,end:Z.target.value}),className:"bg-transparent border-none text-xs font-bold text-slate-600 focus:ring-0 p-0 font-mono"})]}),s.jsx("button",{onClick:j,className:"w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-500 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"refresh"})})]}),s.jsxs("div",{className:"flex gap-6 items-center z-10",children:[s.jsxs("div",{className:"flex gap-4 pr-6 border-r border-slate-100",children:[s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-[9px] font-black text-rose-400 uppercase tracking-wider",children:" "}),s.jsx("span",{className:"text-xl font-black text-rose-500 leading-none",children:l.pending})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-wider",children:" "}),s.jsx("span",{className:"text-xl font-black text-slate-600 leading-none",children:l.today})]})]}),s.jsxs("button",{onClick:()=>g({open:!0,query:"",results:[]}),className:"h-10 px-5 rounded-xl bg-gradient-to-br from-rose-500 to-pink-600 text-white font-bold shadow-lg shadow-rose-200 hover:shadow-rose-300 hover:scale-[1.02] transition-all flex items-center gap-2 text-xs",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"add_circle"}),"  "]})]})]})}),s.jsx("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pb-6 lg:pb-8 min-[2000px]:pb-12 overflow-hidden",children:s.jsx("div",{className:"h-full bg-white rounded-[1.5rem] shadow-xl border border-slate-200 relative flex flex-col overflow-hidden",children:s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar p-0.5",children:s.jsxs("table",{className:"w-full text-xs border-separate border-spacing-0",children:[s.jsx("thead",{className:"sticky top-0 z-10",children:s.jsxs("tr",{className:"bg-slate-50/80 backdrop-blur-md",children:[s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[8%]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[8%]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[12%]",children:""}),s.jsx("th",{className:"px-4 py-3 text-left text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[15%]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[10%]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[10%]",children:""}),s.jsx("th",{className:"px-4 py-3 text-left text-[9px] font-black uppercase text-slate-400 border-b border-slate-100",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[6%]",children:""}),s.jsx("th",{className:"px-4 py-3 text-right text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[10%]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center text-[9px] font-black uppercase text-slate-400 border-b border-slate-100 w-[10%]",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[t.map(Z=>s.jsxs("tr",{className:"hover:bg-rose-50/30 transition-colors cursor-pointer group",onClick:()=>{const J=Z.sales_id||Z.salesId;J?G(J):console.warn("Claim missing sales_id:",Z)},children:[s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-black tracking-tight ${Z.claim_status===""?"bg-purple-100 text-purple-600":Z.claim_status===""?"bg-emerald-100 text-emerald-600":Z.claim_status===""?"bg-slate-100 text-slate-500":"bg-amber-100 text-amber-600"}`,children:Z.claim_status})}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`text-[10px] font-bold ${Z.claim_type===""?"text-rose-500":Z.claim_type===""?"text-orange-500":"text-blue-500"}`,children:Z.claim_type})}),s.jsx("td",{className:"px-4 py-3 text-center text-slate-400 font-mono text-[10px]",children:Z.created_at?.substring(5,16).replace("T"," ")}),s.jsxs("td",{className:"px-4 py-3",children:[s.jsx("div",{className:"font-bold text-slate-700",children:Z.customer_name||""}),s.jsx("div",{className:"text-[10px] text-slate-400",children:Z.customer_id||"-"})]}),s.jsx("td",{className:"px-4 py-3 text-center text-[10px] font-mono text-slate-500",children:Z.sales_id}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:"bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-[10px] font-bold",children:Z.reason_category})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"truncate max-w-[200px] text-slate-500 font-medium text-[11px]",title:Z.memo,children:Z.memo||"-"})}),s.jsx("td",{className:"px-4 py-3 text-center font-bold text-slate-700",children:Z.quantity}),s.jsx("td",{className:"px-4 py-3 text-right font-black text-rose-500/80",children:Fe(Z.refund_amount)}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsxs("div",{className:"flex justify-end items-center gap-1 opacity-60 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:[(Z.claim_status===""||Z.claim_status==="")&&s.jsx("button",{onClick:J=>{J.stopPropagation(),E(Z)},className:"h-6 px-2 rounded-md bg-rose-500 hover:bg-rose-600 text-white text-[10px] font-bold shadow-sm transition-colors shrink-0",children:""}),s.jsx("button",{onClick:J=>{J.stopPropagation(),P(Z)},className:"w-6 h-6 rounded-md hover:bg-blue-50 text-slate-400 hover:text-blue-500 transition-colors flex items-center justify-center shrink-0",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"edit"})}),s.jsx("button",{onClick:J=>{J.stopPropagation(),k(Z.claim_id)},className:"w-6 h-6 rounded-md hover:bg-red-50 text-slate-400 hover:text-red-500 transition-colors flex items-center justify-center shrink-0",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"delete"})})]})})]},Z.claim_id)),t.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"10",className:"py-20 text-center text-slate-300 font-bold text-sm",children:"   ."})})]})]})})})}),o.open&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm transition-opacity",onClick:()=>c({...o,open:!1})}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-[400px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"bg-rose-50 px-6 py-4 border-b border-rose-100 flex justify-between items-center",children:[s.jsxs("h3",{className:"text-rose-600 font-black text-lg flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"gavel"}),"  "]}),s.jsx("button",{onClick:()=>c({...o,open:!1}),className:"text-rose-300 hover:text-rose-500 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-4 inline-flex items-center gap-2 px-3 py-1.5 rounded-lg bg-slate-50 border border-slate-100 text-xs font-bold text-slate-600",children:[s.jsx("span",{className:"text-rose-500",children:o.claim.claim_type}),s.jsx("span",{className:"text-slate-300",children:"|"}),s.jsx("span",{children:o.claim.reason_category})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{value:Fe(o.refundAmount),onChange:Z=>c({...o,refundAmount:Z.target.value.replace(/[^0-9]/g,"")}),className:"w-full h-10 px-3 text-right rounded-xl bg-slate-50 border-none font-bold text-slate-700 focus:ring-2 focus:ring-rose-200"}),s.jsx("span",{className:"absolute left-3 top-2.5 text-xs text-slate-400 font-bold",children:"KRW"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-slate-50 border border-slate-100 cursor-pointer",onClick:()=>c({...o,recoverInventory:!o.recoverInventory}),children:[s.jsx("div",{className:`w-5 h-5 rounded-md border flex items-center justify-center transition-colors ${o.recoverInventory?"bg-rose-500 border-rose-500":"bg-white border-slate-300"}`,children:o.recoverInventory&&s.jsx("span",{className:"material-symbols-rounded text-white text-sm",children:"check"})}),s.jsx("span",{className:"text-xs font-bold text-slate-600",children:"  (  )"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:" "}),s.jsx("textarea",{value:o.memo,onChange:Z=>c({...o,memo:Z.target.value}),className:"w-full h-24 p-3 rounded-xl bg-slate-50 border-none text-xs font-medium text-slate-600 resize-none focus:ring-2 focus:ring-rose-200",placeholder:"   ."})]})]})]}),s.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-between items-center",children:[s.jsx("button",{onClick:()=>I(""),className:"text-xs font-bold text-slate-400 hover:text-rose-500 px-2 py-1 transition-colors",children:"/"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>c({...o,open:!1}),className:"px-4 py-2 rounded-xl text-slate-500 font-bold hover:bg-slate-200 text-xs transition-colors",children:""}),s.jsx("button",{onClick:()=>I(""),className:"px-6 py-2 rounded-xl bg-rose-500 hover:bg-rose-600 text-white font-bold shadow-lg shadow-rose-200 text-xs transition-colors hover:scale-[1.02]",children:" "})]})]})]})]}),h.open&&GA.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:()=>f({...h,open:!1})}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-[500px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"bg-slate-900 px-6 py-4 flex justify-between items-center",children:[s.jsx("h3",{className:"text-white font-bold text-lg",children:"  "}),s.jsx("button",{onClick:()=>f({...h,open:!1}),className:"text-slate-400 hover:text-white",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"p-6",children:h.error?s.jsxs("div",{className:"py-10 text-center text-rose-500 font-bold",children:["    .",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-rose-400 font-normal",children:String(h.error)})]}):h.data?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-end border-b border-slate-100 pb-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wide",children:""}),s.jsx("div",{className:"text-xl font-black text-slate-800 font-mono tracking-tight",children:h.data.sales_id})]}),s.jsxs("div",{className:"text-xs font-bold text-slate-500 bg-slate-100 px-2 py-1 rounded-lg",children:[": ",h.data.order_date?.substring(0,10)]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2",children:" "}),s.jsx("div",{className:"font-bold text-slate-700",children:h.data.product_name}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[h.data.specification||"-"," / ",h.data.quantity,""]}),s.jsxs("div",{className:"text-sm font-black text-slate-500 mt-2",children:[Fe(h.data.unit_price),""]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2",children:" "}),s.jsx("div",{className:"font-bold text-slate-700",children:h.data.customer_name||""}),s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:h.data.customer_id||"-"})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-2 ml-1",children:" "}),s.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100 text-xs text-slate-600",children:[s.jsxs("div",{className:"mb-1",children:[s.jsx("span",{className:"font-bold mr-2",children:" :"})," ",h.data.shipping_name||"-"]}),s.jsxs("div",{className:"mb-1",children:[s.jsx("span",{className:"font-bold mr-2",children:":"})," ",h.data.shipping_mobile_number||"-"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold mr-2",children:":"})," [",h.data.shipping_zip_code||"-","] ",h.data.shipping_address_primary," ",h.data.shipping_address_detail]})]})]}),h.data.memo&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase ml-1",children:" "}),s.jsx("div",{className:"p-4 bg-amber-50 rounded-2xl border border-amber-100 text-xs text-amber-900 font-medium",children:h.data.memo})]})]}):s.jsx("div",{className:"py-20 flex justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-slate-200 border-t-rose-500 rounded-full animate-spin"})})}),h.data&&s.jsx("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-end",children:s.jsx("button",{onClick:()=>f({...h,open:!1}),className:"px-6 py-2 rounded-xl bg-slate-200 hover:bg-slate-300 text-slate-600 font-bold text-xs transition-colors",children:""})})]})]}),document.body),p.open&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:()=>g({...p,open:!1})}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-[600px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[85vh]",children:[s.jsxs("div",{className:"p-6 border-b border-slate-100",children:[s.jsx("h3",{className:"text-lg font-black text-slate-700 mb-4",children:"   "}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("span",{className:"absolute left-3 top-3 text-slate-400 material-symbols-rounded",children:"search"}),s.jsx("input",{value:p.query,onChange:Z=>g({...p,query:Z.target.value}),onKeyDown:Z=>Z.key==="Enter"&&X(),className:"w-full h-12 pl-10 pr-4 rounded-xl bg-slate-50 border-none font-bold text-slate-600 focus:ring-2 focus:ring-rose-200",placeholder:", ,   ",autoFocus:!0})]}),s.jsx("button",{onClick:X,className:"px-6 h-12 rounded-xl bg-slate-800 hover:bg-slate-700 text-white font-bold transition-colors",children:""})]})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-0 bg-slate-50 relative",children:[p.loading&&s.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center bg-white/80 backdrop-blur-sm",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-rose-500 rounded-full animate-spin mb-3"}),s.jsx("span",{className:"text-rose-500 font-bold text-xs animate-pulse",children:" ..."})]}),s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{className:"bg-slate-100 sticky top-0 border-b border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-center font-bold text-slate-500",children:""}),s.jsx("th",{className:"px-4 py-3 text-center font-bold text-slate-500",children:""}),s.jsx("th",{className:"px-4 py-3 text-left font-bold text-slate-500",children:""}),s.jsx("th",{className:"px-4 py-3 w-16 text-center font-bold text-slate-500",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100 bg-white",children:[p.results.map(Z=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-4 py-3 text-center text-slate-400",children:Z.order_date?.substring(0,10)}),s.jsx("td",{className:"px-4 py-3 text-center font-bold text-slate-700",children:Z.customer_name}),s.jsx("td",{className:"px-4 py-3 font-medium text-slate-600",children:Z.product_name}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("button",{onClick:()=>U(Z),className:"px-3 py-1.5 rounded-lg bg-rose-50 text-rose-600 font-bold hover:bg-rose-100 transition-colors text-[10px]",children:""})})]},Z.sales_id)),!p.loading&&p.results.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"4",className:"py-20 text-center text-slate-400 font-medium",children:"  ."})})]})]})]}),s.jsx("div",{className:"p-4 border-t border-slate-100 flex justify-end bg-white",children:s.jsx("button",{onClick:()=>g({...p,open:!1}),className:"text-slate-400 font-bold hover:text-slate-600 transition-colors text-xs px-4 py-2",children:""})})]})]}),b.open&&b.sale&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:()=>w({...b,open:!1})}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-[400px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"bg-slate-900 px-6 py-4 flex justify-between items-center",children:[s.jsx("h3",{className:"text-white font-bold text-lg",children:"  "}),s.jsx("button",{onClick:()=>w({...b,open:!1}),className:"text-slate-400 hover:text-white",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl mb-6 border border-slate-100",children:[s.jsx("div",{className:"text-xs text-slate-400 font-bold mb-1",children:" "}),s.jsxs("div",{className:"font-bold text-slate-700",children:[b.sale.customer_name," - ",b.sale.product_name]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsx("select",{value:b.type,onChange:Z=>w({...b,type:Z.target.value}),className:"w-full h-10 px-2 rounded-xl bg-slate-50 border-none font-bold text-xs text-slate-600 focus:ring-2 focus:ring-slate-200",children:["","","",""].includes(b.sale.status)?s.jsx("option",{children:""}):s.jsxs(s.Fragment,{children:[s.jsx("option",{children:""}),s.jsx("option",{children:""})]})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsxs("select",{value:b.category,onChange:Z=>w({...b,category:Z.target.value}),className:"w-full h-10 px-2 rounded-xl bg-slate-50 border-none font-bold text-xs text-slate-600 focus:ring-2 focus:ring-slate-200",children:[s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsx("input",{type:"number",min:"1",max:b.sale.quantity,value:b.qty,onChange:Z=>w({...b,qty:Z.target.value}),className:"w-full h-10 px-3 rounded-xl bg-slate-50 border-none font-bold text-slate-600 focus:ring-2 focus:ring-slate-200"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:" "}),s.jsx("textarea",{value:b.memo,onChange:Z=>w({...b,memo:Z.target.value}),className:"w-full h-20 p-3 rounded-xl bg-slate-50 border-none text-xs font-medium text-slate-600 resize-none focus:ring-2 focus:ring-slate-200",placeholder:"   ."})]})]})]}),s.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>w({...b,open:!1}),className:"px-4 py-2 rounded-xl text-slate-500 font-bold hover:bg-slate-200 text-xs transition-colors",children:""}),s.jsx("button",{onClick:te,className:"px-6 py-2 rounded-xl bg-slate-800 text-white font-bold hover:bg-slate-700 shadow-lg shadow-slate-300 text-xs transition-colors hover:scale-[1.02]",children:" "})]})]})]}),d.open&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:()=>u({...d,open:!1})}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-[400px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"bg-white px-6 py-4 flex justify-between items-center border-b border-slate-100",children:[s.jsx("h3",{className:"text-slate-700 font-black text-lg",children:"  "}),s.jsx("button",{onClick:()=>u({...d,open:!1}),className:"text-slate-300 hover:text-slate-500",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:" "}),s.jsxs("select",{value:d.category,onChange:Z=>u({...d,category:Z.target.value}),className:"w-full h-10 px-2 rounded-xl bg-slate-50 border-none font-bold text-xs text-slate-600 focus:ring-2 focus:ring-blue-100",children:[s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:""}),s.jsx("input",{type:"number",value:d.qty,onChange:Z=>u({...d,qty:Z.target.value}),className:"w-full h-10 px-3 rounded-xl bg-slate-50 border-none font-bold text-slate-600 focus:ring-2 focus:ring-blue-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 block ml-1",children:" "}),s.jsx("textarea",{value:d.memo,onChange:Z=>u({...d,memo:Z.target.value}),className:"w-full h-24 p-3 rounded-xl bg-slate-50 border-none text-xs font-medium text-slate-600 resize-none focus:ring-2 focus:ring-blue-100"})]})]}),s.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>u({...d,open:!1}),className:"px-4 py-2 rounded-xl text-slate-500 font-bold hover:bg-slate-200 text-xs transition-colors",children:""}),s.jsx("button",{onClick:H,className:"px-6 py-2 rounded-xl bg-blue-600 text-white font-bold hover:bg-blue-500 shadow-lg shadow-blue-200 text-xs transition-colors hover:scale-[1.02]",children:" "})]})]})]})]})},wIe=`
    @media print {
        @page { size: A4 landscape; margin: 0; }
        html, body { 
            background: white !important; 
            color: black !important;
            color-scheme: light !important;
            margin: 0 !important;
            padding: 0 !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }
        #printable-daily-receipts {
            display: block !important;
            position: absolute !important;
            left: 0 !important;
            top: 0 !important;
            width: 100% !important;
            padding: 10mm !important;
            visibility: visible !important;
            background: white !important;
        }
        #printable-daily-receipts * {
            visibility: visible !important;
            border-color: black !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }
    }
    .print-report-wrapper { 
        font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; 
        color: #000; 
        width: 100%;
    }
    .report-card {
        border: 2px solid #000 !important;
        padding: 30px;
        background: white !important;
    }
    .report-header h1 { 
        margin: 0; 
        font-size: 32px; 
        font-weight: 900; 
        letter-spacing: 0.3em; 
        border-bottom: 5px double #000 !important;
        display: inline-block;
        padding: 0 50px 10px 50px;
    }
    table { 
        width: 100%; 
        border-collapse: collapse !important; 
        font-size: 11px; 
        border: 2px solid #000 !important; 
        table-layout: fixed;
    }
    th, td { 
        border: 1px solid #000 !important; 
        padding: 8px 5px; 
        text-align: center; 
    }
    th { 
        background: #f0f0f0 !important; 
        font-weight: 900; 
        border-bottom: 2px solid #000 !important;
    }
    .bg-row { background: #fafafa !important; }
    .summary-table {
        width: 450px;
        border: 2px solid #000 !important;
    }
    .summary-table th, .summary-table td { border: 1px solid #000 !important; }
`,_Ie=()=>{const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState(new Date().toISOString().split("T")[0]),[n,i]=F.useState([]),[l,o]=F.useState(!1),[c,d]=F.useState(!1);F.useRef(null);const u=F.useMemo(()=>{const k={total:{count:0,qty:0,amt:0,supply:0,vat:0},gen:{count:0,qty:0,amt:0},mall:{count:0,qty:0,amt:0},status:{receipt:0,paid:0,shipped:0}};return n.forEach(T=>{const E=T.quantity||0,I=T.total_amount||0,R=T.supply_value||0,P=T.vat_amount||0,H=(T.memo||"").includes("[]"),G=T.status||"";k.total.count++,k.total.qty+=E,k.total.amt+=I,k.total.supply+=R,k.total.vat+=P,H?(k.mall.count++,k.mall.qty+=E,k.mall.amt+=I):(k.gen.count++,k.gen.qty+=E,k.gen.amt+=I),G===""?k.status.receipt++:G===""?k.status.paid++:G===""&&k.status.shipped++}),k},[n]);F.useEffect(()=>{h()},[t]);const h=async()=>{o(!0);try{const k=await Ke("get_daily_receipts",{date:t});i(k||[])}catch(k){console.error(k),i([]),a("","  : "+k)}finally{o(!1)}},f=k=>{const T=new Date().toISOString().split("T")[0];if(k>T){a("","    .");return}r(k)},p=()=>{const k=new Date(t);k.setDate(k.getDate()-1),f(k.toISOString().split("T")[0])},g=()=>{const k=new Date(t);k.setDate(k.getDate()+1),f(k.toISOString().split("T")[0])},b=()=>{const k=document.getElementById("printable-daily-content");if(!k)return;const T=`
            <style>
                ${wIe}
                @page { size: A4 landscape; margin: 10mm; }
                body { font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; margin: 0; padding: 10mm; }
            </style>
            ${k.outerHTML}
        `;oo(T)},w=async()=>{if(n.length===0){a("","  .");return}let k=`\uFEFFNo,,,,,,,,,,,,
`;n.forEach((T,E)=>{const I=[E+1,T.status||"",T.order_date||"-",T.customer_name||"",T.shipping_mobile_number||"-",T.shipping_name||"-",T.product_name,T.specification||"-",T.quantity,T.supply_value||T.total_amount,T.vat_amount||0,T.total_amount,(T.memo||"").replace(/,/g," ").replace(/\n/g," ")].map(R=>`"${R}"`).join(",");k+=I+`
`});try{const T=new Blob([k],{type:"text/csv;charset=utf-8;"}),E=document.createElement("a"),I=URL.createObjectURL(T);E.setAttribute("href",I),E.setAttribute("download",`_${t.replace(/-/g,"")}.csv`),E.style.visibility="hidden",document.body.appendChild(E),E.click(),document.body.removeChild(E),a("","   .")}catch(T){console.error("Failed to save CSV:",T),a("","    : "+T)}},j=t===new Date().toISOString().split("T")[0];return s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 relative overflow-hidden print:bg-white print:h-auto print:overflow-visible print:block",id:"sales-daily-receipts-view",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1 shrink-0 print:hidden",children:s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Daily Sales Overview"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Daily Receipts"})]})]})})}),s.jsxs("div",{className:"flex-1 flex flex-col min-h-0 px-6 lg:px-8 min-[2000px]:px-12 pb-6 lg:pb-8 min-[2000px]:pb-12 bg-white rounded-[1.5rem] shadow-lg border border-slate-200/60 overflow-hidden print:shadow-none print:border-none print:m-0 print:rounded-none",children:[s.jsxs("div",{className:"shrink-0 flex flex-col border-b border-slate-100 bg-white print:hidden",children:[s.jsxs("div",{className:"p-5 flex justify-between items-end border-b border-dashed border-slate-100",children:[s.jsxs("div",{className:"flex gap-4 items-end",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10.5px] font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"  "}),s.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-1 rounded-2xl border border-slate-200 shadow-sm",children:[s.jsx("button",{onClick:p,className:"w-9 h-9 rounded-xl bg-white border border-slate-200 text-slate-500 hover:text-indigo-600 hover:border-indigo-200 shadow-sm flex items-center justify-center transition-all hover:scale-105 active:scale-95",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"chevron_left"})}),s.jsx("div",{className:"relative group",children:s.jsx("input",{type:"date",value:t,max:new Date().toISOString().split("T")[0],onChange:k=>f(k.target.value),className:"pl-3 pr-3 py-2 bg-transparent border-none text-sm font-black text-slate-700 outline-none w-36 font-mono cursor-pointer focus:bg-white focus:ring-2 focus:ring-indigo-100 rounded-lg transition-all"})}),s.jsx("button",{onClick:g,disabled:j,className:`w-9 h-9 rounded-xl bg-white border border-slate-200 flex items-center justify-center transition-all shadow-sm
                                            ${j?"opacity-50 cursor-not-allowed text-slate-300":"text-slate-500 hover:text-indigo-600 hover:border-indigo-200 hover:scale-105 active:scale-95"} `,children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"chevron_right"})})]})]}),s.jsxs("button",{onClick:h,className:"h-[46px] px-6 rounded-2xl bg-indigo-600 hover:bg-indigo-700 text-white font-black text-sm shadow-lg shadow-indigo-200 flex items-center gap-2 transition-all hover:scale-[1.02] active:scale-95 mb-0.5",children:[s.jsx("span",{className:"material-symbols-rounded",children:"search"})," "]})]}),s.jsxs("div",{className:"flex gap-2 mb-0.5",children:[s.jsxs("button",{onClick:()=>d(!0),className:"h-10 px-5 rounded-xl border border-slate-200 bg-white hover:bg-slate-50 text-slate-600 font-bold text-xs flex items-center gap-2 shadow-sm transition-all hover:border-indigo-200 hover:text-indigo-600",children:[s.jsx("span",{className:"material-symbols-rounded filled text-indigo-500",children:"print"}),"  "]}),s.jsxs("button",{onClick:w,className:"h-10 px-5 rounded-xl bg-emerald-500 hover:bg-emerald-600 text-white font-bold text-xs shadow-md shadow-emerald-200 flex items-center gap-2 transition-all active:scale-95",children:[s.jsx("span",{className:"material-symbols-rounded",children:"download"})," (CSV) "]})]})]}),s.jsx("div",{className:"p-5 bg-slate-50/50",children:s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-4 shadow-sm relative overflow-hidden group hover:shadow-md transition-all",children:[s.jsx("div",{className:"absolute right-0 top-0 w-16 h-16 bg-indigo-50 rounded-bl-full -mr-8 -mt-8 transition-transform group-hover:scale-150 group-hover:bg-indigo-100"}),s.jsxs("div",{className:"flex items-center gap-2 mb-3 text-[11px] font-black text-slate-400 uppercase tracking-wider relative z-10",children:[s.jsx("span",{className:"material-symbols-rounded text-lg text-indigo-500",children:"analytics"}),"   "]}),s.jsxs("div",{className:"flex flex-col gap-1 relative z-10",children:[s.jsxs("div",{className:"flex justify-between items-baseline",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:" "}),s.jsxs("span",{className:"text-sm font-black text-slate-800",children:[u.total.count.toLocaleString()," ",s.jsx("span",{className:"text-[10px] font-normal text-slate-400",children:""})]})]}),s.jsxs("div",{className:"flex justify-between items-baseline",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:""}),s.jsxs("span",{className:"text-sm font-black text-slate-700",children:[Fe(u.total.supply),""]})]}),s.jsxs("div",{className:"flex justify-between items-baseline border-b border-slate-100 pb-1 mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:""}),s.jsxs("span",{className:"text-sm font-black text-slate-700",children:[Fe(u.total.vat),""]})]}),s.jsxs("div",{className:"flex justify-between items-baseline",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:""}),s.jsxs("span",{className:"text-lg font-black text-indigo-600 tracking-tight",children:[Fe(u.total.amt),s.jsx("span",{className:"text-[10px] font-normal text-slate-400 ml-0.5",children:""})]})]})]})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-4 shadow-sm relative overflow-hidden group hover:shadow-md transition-all",children:[s.jsx("div",{className:"absolute right-0 top-0 w-16 h-16 bg-emerald-50 rounded-bl-full -mr-8 -mt-8 transition-transform group-hover:scale-150 group-hover:bg-emerald-100"}),s.jsxs("div",{className:"flex items-center gap-2 mb-3 text-[11px] font-black text-slate-400 uppercase tracking-wider relative z-10",children:[s.jsx("span",{className:"material-symbols-rounded text-lg text-emerald-500",children:"phone_in_talk"})," () "]}),s.jsxs("div",{className:"flex flex-col gap-1 relative z-10",children:[s.jsxs("div",{className:"flex justify-between items-baseline",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:" "}),s.jsxs("span",{className:"text-sm font-black text-slate-800",children:[u.gen.count.toLocaleString()," ",s.jsx("span",{className:"text-[10px] font-normal text-slate-400",children:""})]})]}),s.jsxs("div",{className:"flex justify-between items-baseline",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:" "}),s.jsxs("span",{className:"text-lg font-black text-emerald-600 tracking-tight",children:[Fe(u.gen.amt),s.jsx("span",{className:"text-[10px] font-normal text-slate-400 ml-0.5",children:""})]})]})]})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-4 shadow-sm relative overflow-hidden group hover:shadow-md transition-all",children:[s.jsx("div",{className:"absolute right-0 top-0 w-16 h-16 bg-blue-50 rounded-bl-full -mr-8 -mt-8 transition-transform group-hover:scale-150 group-hover:bg-blue-100"}),s.jsxs("div",{className:"flex items-center gap-2 mb-3 text-[11px] font-black text-slate-400 uppercase tracking-wider relative z-10",children:[s.jsx("span",{className:"material-symbols-rounded text-lg text-blue-500",children:"sync_alt"}),"   "]}),s.jsxs("div",{className:"flex flex-col gap-1 relative z-10",children:[s.jsxs("div",{className:"flex justify-between items-baseline",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:" "}),s.jsxs("span",{className:"text-sm font-black text-slate-800",children:[u.mall.count.toLocaleString()," ",s.jsx("span",{className:"text-[10px] font-normal text-slate-400",children:""})]})]}),s.jsxs("div",{className:"flex justify-between items-baseline",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:" "}),s.jsxs("span",{className:"text-lg font-black text-blue-600 tracking-tight",children:[Fe(u.mall.amt),s.jsx("span",{className:"text-[10px] font-normal text-slate-400 ml-0.5",children:""})]})]})]})]}),s.jsxs("div",{className:"bg-slate-800 rounded-2xl p-4 text-white border border-slate-700 shadow-lg relative overflow-hidden group hover:shadow-xl transition-all",children:[s.jsx("div",{className:"absolute right-0 top-0 w-24 h-24 bg-white/5 rounded-full -mr-8 -mt-8 transition-transform group-hover:scale-150"}),s.jsxs("div",{className:"flex items-center gap-2 mb-3 text-[11px] font-black text-slate-400 uppercase tracking-wider relative z-10",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"fact_check"}),"   "]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center relative z-10 h-full items-center pb-2",children:[s.jsxs("div",{className:"bg-white/10 rounded-xl p-2 backdrop-blur-sm border border-white/5",children:[s.jsx("div",{className:"text-[9px] text-slate-300 mb-0.5 font-bold",children:""}),s.jsx("div",{className:"text-base font-black text-red-400",children:u.status.receipt.toLocaleString()})]}),s.jsxs("div",{className:"bg-white/10 rounded-xl p-2 backdrop-blur-sm border border-white/5",children:[s.jsx("div",{className:"text-[9px] text-slate-300 mb-0.5 font-bold",children:""}),s.jsx("div",{className:"text-base font-black text-amber-400",children:u.status.paid.toLocaleString()})]}),s.jsxs("div",{className:"bg-white/10 rounded-xl p-2 backdrop-blur-sm border border-white/5",children:[s.jsx("div",{className:"text-[9px] text-slate-300 mb-0.5 font-bold",children:""}),s.jsx("div",{className:"text-base font-black text-emerald-400",children:u.status.shipped.toLocaleString()})]})]})]})]})})]}),s.jsx("div",{className:"flex-1 overflow-auto bg-white relative stylish-scrollbar print:overflow-visible",children:s.jsxs("table",{className:"w-full text-xs border-collapse table-fixed",children:[s.jsx("thead",{className:"sticky top-0 z-10 bg-white/95 backdrop-blur shadow-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[5%]",children:"No"}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[8%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[8%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[8%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[10%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[10%]",children:""}),s.jsx("th",{className:"py-3 text-left pl-4 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[12%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[6%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[5%]",children:""}),s.jsx("th",{className:"py-3 text-right pr-2 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[8%]",children:""}),s.jsx("th",{className:"py-3 text-right pr-2 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[6%]",children:""}),s.jsx("th",{className:"py-3 text-right pr-4 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[8%]",children:""}),s.jsx("th",{className:"py-3 text-left pl-4 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[20%]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:l?s.jsx("tr",{children:s.jsxs("td",{colSpan:"11",className:"py-32 text-center",children:[s.jsx("div",{className:"inline-block w-10 h-10 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin"}),s.jsx("div",{className:"mt-4 text-slate-400 font-bold text-sm",children:"  ..."})]})}):n.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"13",className:"py-32 text-center text-slate-400 font-bold",children:"    ."})}):n.map((k,T)=>{const E=k.status||"";let I;const R="px-2 py-1 rounded-[6px] text-[10px] font-black tracking-tight border";return E===""?I=s.jsx("span",{className:`${R} bg-orange-50 text-orange-600 border-orange-100`,children:""}):E===""?I=s.jsx("span",{className:`${R} bg-emerald-50 text-emerald-600 border-emerald-100`,children:""}):E===""?I=s.jsx("span",{className:`${R} bg-blue-50 text-blue-600 border-blue-100`,children:""}):E===""?I=s.jsx("span",{className:`${R} bg-red-50 text-red-600 border-red-100 line-through`,children:""}):I=s.jsx("span",{className:`${R} bg-slate-100 text-slate-600 border-slate-200`,children:E}),s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[s.jsx("td",{className:"px-3 py-3 text-center text-slate-400 font-mono text-[10px]",children:T+1}),s.jsx("td",{className:"px-3 py-3 text-center",children:I}),s.jsx("td",{className:"px-3 py-3 text-center text-slate-500 font-mono text-[11px] font-medium",children:k.order_date||"-"}),s.jsx("td",{className:"px-3 py-3 text-center font-bold text-slate-700",children:s.jsx("div",{className:"truncate max-w-[90px] mx-auto",title:k.customer_name,children:k.customer_name||""})}),s.jsx("td",{className:"px-3 py-3 text-center text-slate-500 font-mono text-[10px] tracking-tight",children:kn(k.shipping_mobile_number||k.customer_mobile)||"-"}),s.jsx("td",{className:"px-3 py-3 text-center text-slate-600 font-medium text-[11px]",children:s.jsx("div",{className:"truncate max-w-[90px] mx-auto",title:k.shipping_name||k.customer_name,children:k.shipping_name||k.customer_name||"-"})}),s.jsx("td",{className:"px-3 py-3 pl-4 font-bold text-slate-700 text-[11px] break-keep leading-tight",children:s.jsx("div",{className:"truncate max-w-[180px]",title:k.product_name,children:k.product_name})}),s.jsx("td",{className:"px-3 py-3 text-center text-slate-500 text-[11px]",children:k.specification||"-"}),s.jsx("td",{className:"px-3 py-3 text-center font-black text-slate-800 text-[11px]",children:k.quantity.toLocaleString()}),s.jsx("td",{className:"px-2 py-3 text-right font-medium text-slate-600 text-[10.5px]",children:Fe(k.supply_value||k.total_amount)}),s.jsx("td",{className:"px-2 py-3 text-right font-medium text-slate-500 text-[10.5px]",children:Fe(k.vat_amount||0)}),s.jsx("td",{className:"px-3 py-3 pr-4 text-right font-black text-slate-800 text-[11px] font-mono",children:Fe(k.total_amount)}),s.jsx("td",{className:"px-3 py-3 pl-4 text-slate-400 text-[10px]",children:s.jsx("div",{className:"truncate max-w-[120px]",title:k.memo,children:k.memo||""})})]},T)})})]})})]}),c&&s.jsxs("div",{className:"fixed inset-0 z-[300] bg-slate-900/80 backdrop-blur-md flex items-center justify-center p-4",children:[s.jsxs("div",{className:"fixed top-8 right-8 flex flex-col gap-4 z-[310]",children:[s.jsx("button",{onClick:()=>d(!1),className:"w-14 h-14 bg-white text-slate-400 rounded-2xl shadow-2xl hover:text-rose-500 hover:scale-110 active:scale-95 transition-all flex items-center justify-center group",title:"",children:s.jsx("span",{className:"material-symbols-rounded text-3xl group-hover:rotate-90 transition-transform duration-300",children:"close"})}),s.jsx("div",{className:"h-px bg-white/20 w-full"}),s.jsxs("button",{onClick:b,className:"h-14 px-8 rounded-2xl font-black text-sm bg-indigo-600 text-white shadow-2xl shadow-indigo-500/30 hover:bg-indigo-700 hover:-translate-y-1 active:translate-y-0 transition-all flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-xl",children:"print"})," "]})]}),s.jsx("div",{className:"w-full max-w-[297mm] h-[210mm] max-h-[90vh] bg-white rounded-[1rem] shadow-2xl overflow-y-auto overflow-x-hidden relative custom-scrollbar",children:s.jsx("div",{id:"printable-daily-content",className:"p-[10mm]",children:s.jsx("div",{style:{fontFamily:'"Malgun Gothic", sans-serif',color:"#000",width:"100%"},children:s.jsxs("div",{style:{border:"2px solid #000",padding:"30px",backgroundColor:"#fff"},children:[s.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[s.jsx("h1",{style:{margin:"0",fontSize:"32px",fontWeight:"900",letterSpacing:"0.3em",borderBottom:"5px double #000",display:"inline-block",padding:"0 50px 10px 50px"},children:"   "}),s.jsxs("div",{style:{marginTop:"20px",display:"flex",justifyContent:"space-between",fontSize:"14px",fontWeight:"bold"},children:[s.jsxs("span",{children:[" : ",s.jsx("strong",{children:t})]}),s.jsxs("span",{children:[" : ",new Date().toLocaleString()]})]})]}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px",border:"2px solid #000",tableLayout:"fixed"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"40px",fontWeight:"900"},children:"No"}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"60px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"80px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"90px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"100px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"100px",fontWeight:"900"},children:"()"}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"left",paddingLeft:"10px",fontWeight:"900"},children:" / "}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"50px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"100px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"90px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",width:"110px",fontWeight:"900"},children:""})]})}),s.jsx("tbody",{children:n.map((k,T)=>s.jsxs("tr",{style:{backgroundColor:T%2===1?"#fafafa":"#fff"},children:[s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center"},children:T+1}),s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",fontWeight:"900"},children:k.status||""}),s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center"},children:(k.order_date||"").substring(0,10)}),s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",fontWeight:"900"},children:k.customer_name||""}),s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center"},children:kn(k.shipping_mobile_number||k.customer_mobile||"")}),s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center"},children:k.shipping_name||k.customer_name||"-"}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"left"},children:[s.jsx("div",{style:{fontWeight:"900"},children:k.product_name}),s.jsx("div",{style:{fontSize:"9px",color:"#555"},children:k.specification||"-"})]}),s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",fontWeight:"900"},children:k.quantity.toLocaleString()}),s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"right"},children:Fe(k.supply_value||k.total_amount)}),s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"right"},children:Fe(k.vat_amount||0)}),s.jsx("td",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"right",fontWeight:"900",backgroundColor:"#fafafa"},children:Fe(k.total_amount)})]},T))})]}),s.jsx("div",{style:{marginTop:"30px",display:"flex",justifyContent:"flex-end"},children:s.jsx("table",{style:{width:"450px",border:"2px solid #000",borderCollapse:"collapse"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",backgroundColor:"#f0f0f0",width:"40%",fontSize:"12px"},children:"  "}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 15px",textAlign:"right",fontSize:"16px",fontWeight:"900"},children:[" ",Fe(u.total.supply)]})]}),s.jsxs("tr",{children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",backgroundColor:"#f0f0f0",fontSize:"12px"},children:"  "}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 15px",textAlign:"right",fontSize:"16px",fontWeight:"900"},children:[" ",Fe(u.total.vat)]})]}),s.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",fontSize:"14px"},children:"  "}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 15px",textAlign:"right",fontSize:"16px",fontWeight:"900",color:"#d32f2f"},children:[" ",Fe(u.total.amt)]})]})]})})}),s.jsx("div",{style:{marginTop:"40px",textAlign:"center",fontSize:"12px",fontWeight:"bold",color:"#444"},children:"      ."}),s.jsx("div",{style:{marginTop:"50px",textAlign:"center",fontSize:"10px",color:"#999",borderTop:"1px solid #eee",paddingTop:"10px"},children:" Mycelium Smart Farm Integration System - All Rights Reserved."})]})})})})]})]})},NIe=(a,e)=>{const[t,r]=F.useState("product"),[n,i]=F.useState([]),[l,o]=F.useState([]),[c,d]=F.useState(""),[u,h]=F.useState(""),[f,p]=F.useState(!0),[g,b]=F.useState("ALL"),[w,j]=F.useState({open:!1,primaryMaterialId:"",targets:[{id:Date.now(),productId:"",qty:1}],deductions:[],memo:"",loading:!1}),[k,T]=F.useState({open:!1,items:[{id:Date.now(),targetId:"",qty:"",grade:"A"}],memo:""}),[E,I]=F.useState({open:!1,product:null,val:"",reason:"",memo:""}),[R,P]=F.useState({});F.useEffect(()=>{H()},[t]);const H=async()=>{try{const K=await Ke("get_product_list");i(K||[]);const ae={},ce=await Ke("get_product_freshness");ce&&ce.forEach(he=>{ae[he.product_id]=he.last_in_date}),P(ae);const de=await Ke("get_product_logs",{limit:100,itemType:t});o(de||[])}catch(K){console.error("Failed to load data:",K)}},G=K=>{const ae=R[K];if(!ae)return null;const ce=new Date(ae),he=Math.abs(new Date-ce);return{diffDays:Math.ceil(he/(1e3*60*60*24)),dateStr:ae}},X=K=>{I({open:!0,product:K,val:"",reason:"",memo:""})},U=async()=>{const{product:K,val:ae,reason:ce,memo:de}=E,he=Number(ae);if(!(!K||he===0))try{const pe=he>0?" ()":" ()",Re=de?`${pe} - ${de}`:ce?`${pe} - ${ce}`:pe;await Ke("adjust_product_stock",{productId:K.product_id,changeQty:he,memo:Re,reasonCategory:ce||null}),I(Te=>({...Te,open:!1})),await H()}catch(pe){a(""," : "+pe)}},te=K=>{const ae=n.filter(de=>de.item_type==="harvest_item"&&de.status!=="");if(ae.length===0){a("",`  .
[ ]    .`);return}const ce=typeof K=="number"||typeof K=="string"?Number(K):ae[0].product_id;T({open:!0,items:[{id:Date.now(),targetId:ce,qty:"",grade:"A"}],memo:""})},Z=async()=>{const{items:K,memo:ae}=k,ce=K.filter(de=>de.targetId&&Number(de.qty)>0);if(ce.length===0)return a("","    .");try{await Promise.all(ce.map(de=>Ke("adjust_product_stock",{productId:Number(de.targetId),changeQty:Number(de.qty),memo:`  [${de.grade}]${ae?" - "+ae:""}`,reasonCategory:""}))),await a("",`${ce.length}    .`),T(de=>({...de,open:!1})),H()}catch(de){a(""," : "+de)}},J=(K="")=>{const ae=K?Number(K):null;let ce=[{id:Date.now(),productId:"",qty:1}],de=[],he="";if(ae){const pe=n.find(Re=>Re.product_id===ae);pe&&(!pe.item_type||pe.item_type==="product"?ce=[{id:Date.now(),productId:String(ae),qty:1}]:(de=[{id:Date.now(),materialId:ae,name:pe.product_name,stock:pe.stock_quantity||0,tQty:0,rQty:1,type:"raw"}],he=String(ae)))}j({open:!0,primaryMaterialId:he,targets:ce,deductions:de,memo:"",loading:!1})},B=async()=>{const{targets:K,deductions:ae,memo:ce}=w,de=K.filter(pe=>pe.productId&&Number(pe.qty)>0),he=ae.filter(pe=>pe.materialId&&Number(pe.rQty)>0);if(de.length===0)return a("","  1  .");for(const pe of he)if(pe.stock<pe.rQty&&!await e(" ",`${pe.name}  . (: ${pe.rQty}, : ${pe.stock})
 ?`))return;try{await Ke("convert_product_stock",{targets:de.map(pe=>({product_id:Number(pe.productId),quantity:Number(pe.qty)})),deductions:he.map(pe=>({material_id:pe.materialId,quantity:Number(pe.rQty)})),memo:ce||"  "}),await a("","   ."),j(pe=>({...pe,open:!1})),H()}catch(pe){a(""," : "+pe)}},W=F.useMemo(()=>{let K=n;return t==="harvest_item"?K=K.filter(ae=>ae.item_type==="harvest_item"):t==="aux_material"?(K=K.filter(ae=>ae.item_type==="aux_material"||ae.item_type==="raw_material"||ae.item_type==="material"),g!=="ALL"&&(K=K.filter(ae=>g==="/"?ae.category==="/"||ae.product_name.includes("")||ae.product_name.includes(""):g==="/"?ae.category==="/"||ae.product_name.includes("")||ae.product_name.includes(""):g===""?ae.category===""||ae.product_name.includes("")||ae.product_name.includes(""):g===" "?ae.category===" "||!ae.category&&!ae.product_name.includes("")&&!ae.product_name.includes("")&&!ae.product_name.includes(""):!0))):K=K.filter(ae=>!ae.item_type||ae.item_type==="product"),c&&(K=K.filter(ae=>ae.product_name.toLowerCase().includes(c.toLowerCase()))),K},[n,t,c,g]),$=F.useMemo(()=>{let K=l;if(f&&f)return l.filter(ae=>!ae.reference_id?.startsWith("SALES_AUTO"));if(u){const ae=u.toLowerCase();K=K.filter(ce=>ce.product_name.toLowerCase().includes(ae)||ce.memo&&ce.memo.toLowerCase().includes(ae)||ce.change_type.toLowerCase().includes(ae))}return K},[l,f,u]),[Q,ne]=F.useState({open:!1,product:null});return{tab:t,setTab:r,products:n,setProducts:i,logs:l,setLogs:o,searchQuery:c,setSearchQuery:d,logSearchQuery:u,setLogSearchQuery:h,hideAutoLogs:f,setHideAutoLogs:p,auxSubTab:g,setAuxSubTab:b,convertModal:w,setConvertModal:j,harvestModal:k,setHarvestModal:T,adjustModal:E,setAdjustModal:I,freshnessMap:R,loadData:H,getFreshnessInfo:G,filteredProducts:W,filteredLogs:$,openAdjustModal:X,handleAdjustStock:U,openHarvestModal:te,handleHarvest:Z,openHarvestModal:te,handleHarvest:Z,openConvertModal:J,handleBatchConvert:B,bomModal:Q,setBomModal:ne,openBomModal:K=>{ne({open:!0,product:K})}}},jIe=()=>s.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 px-6 lg:px-8 min-[2000px]:px-12 pt-1 pb-1 shrink-0",children:[s.jsxs("div",{className:"flex-1 min-w-[200px] bg-indigo-50/50 border border-indigo-100 p-3 rounded-2xl flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-600 bg-white p-1.5 rounded-xl text-lg shadow-sm",children:"potted_plant"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase",children:""}),s.jsx("p",{className:"text-[9px] text-indigo-500 font-bold leading-tight uppercase",children:"  (Final Products)"})]})]}),s.jsxs("div",{className:"flex-1 min-w-[200px] bg-emerald-50/50 border border-emerald-100 p-3 rounded-2xl flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-emerald-600 bg-white p-1.5 rounded-xl text-lg shadow-sm",children:"spa"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-emerald-900 uppercase",children:""}),s.jsx("p",{className:"text-[9px] text-emerald-500 font-bold leading-tight uppercase",children:"  (Raw Materials)"})]})]}),s.jsxs("div",{className:"flex-1 min-w-[200px] bg-orange-50/50 border border-orange-100 p-3 rounded-2xl flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-orange-600 bg-white p-1.5 rounded-xl text-lg shadow-sm",children:"layers"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-orange-900 uppercase",children:""}),s.jsx("p",{className:"text-[9px] text-orange-500 font-bold leading-tight uppercase",children:"   (Aux Materials)"})]})]})]}),SIe=({tab:a,setTab:e,openHarvestModal:t,openConvertModal:r,auxSubTab:n,setAuxSubTab:i,searchQuery:l,setSearchQuery:o})=>s.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-white z-10",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:[s.jsxs("button",{onClick:()=>e("product"),className:`px-4 py-3 rounded-lg text-sm font-black flex items-center gap-2 transition-all ${a==="product"?"bg-white text-indigo-600 shadow-sm scale-[1.02]":"text-slate-500 hover:text-slate-700"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-xl",children:"potted_plant"})," "]}),s.jsxs("button",{onClick:()=>e("harvest_item"),className:`px-4 py-3 rounded-lg text-sm font-black flex items-center gap-2 transition-all ${a==="harvest_item"?"bg-white text-emerald-600 shadow-sm scale-[1.02]":"text-slate-500 hover:text-slate-700"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-xl",children:"spa"}),"  ()"]}),s.jsxs("button",{onClick:()=>e("aux_material"),className:`px-4 py-3 rounded-lg text-sm font-black flex items-center gap-2 transition-all ${a==="aux_material"?"bg-white text-orange-600 shadow-sm scale-[1.02]":"text-slate-500 hover:text-slate-700"}`,children:[s.jsx("span",{className:"material-symbols-rounded text-xl",children:"layers"}),"  ()"]})]}),s.jsxs("div",{className:"flex gap-2",children:[a==="harvest_item"&&s.jsxs("button",{onClick:t,className:"px-5 py-2.5 rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white font-black text-sm shadow-lg shadow-emerald-100 flex items-center gap-2 transition-all hover:scale-[1.02] active:scale-95 animate-in fade-in zoom-in duration-300",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"spa"}),"  "]}),(a==="product"||a==="harvest_item")&&s.jsxs("button",{onClick:r,className:"px-5 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white font-black text-sm shadow-lg shadow-indigo-100 flex items-center gap-2 transition-all hover:scale-[1.02] active:scale-95 animate-in fade-in zoom-in duration-300",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"inventory_2"}),"  "]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[a==="aux_material"&&s.jsx("div",{className:"flex bg-slate-50 p-1 rounded-xl border border-slate-200 animate-in slide-in-from-right-4 duration-300",children:[{id:"ALL",label:""},{id:"/",label:" "},{id:"/",label:" "},{id:"",label:" "},{id:" ",label:" "}].map(c=>s.jsx("button",{onClick:()=>i(c.id),className:`px-3 py-1.5 rounded-lg text-[11px] font-black transition-all ${n===c.id?"bg-white text-orange-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:c.label},c.id))}),s.jsxs("div",{className:"relative group w-64",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 material-symbols-rounded text-lg group-focus-within:text-indigo-500 transition-colors",children:"search"}),s.jsx("input",{value:l,onChange:c=>o(c.target.value),className:"pl-10 pr-4 h-10 w-full bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:bg-white focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 transition-all placeholder:text-slate-400",placeholder:" ..."})]})]})]}),kIe=({products:a,tab:e,getFreshnessInfo:t,openAdjustModal:r,openHarvestModal:n,openConvertModal:i,openBomModal:l})=>{const o=c=>{if(c.item_type!=="aux_material"&&c.item_type!=="raw_material"&&c.item_type!=="material")return null;if(c.category){const u=c.category;return u==="/"?{label:"",color:"bg-orange-100 text-orange-700 border-orange-200"}:u==="/"?{label:"",color:"bg-blue-100 text-blue-700 border-blue-200"}:u==="/"?{label:"",color:"bg-emerald-100 text-emerald-700 border-emerald-200"}:u===""?{label:"",color:"bg-purple-100 text-purple-700 border-purple-200"}:{label:u.replace(" ",""),color:"bg-slate-100 text-slate-700 border-slate-200"}}const d=c.product_name;return d.includes("")||d.includes("")?{label:"",color:"bg-orange-100 text-orange-700 border-orange-200"}:d.includes("")||d.includes("")?{label:"",color:"bg-blue-100 text-blue-700 border-blue-200"}:d.includes("")||d.includes("")?{label:"",color:"bg-emerald-100 text-emerald-700 border-emerald-200"}:d.includes("")||d.includes("")?{label:"",color:"bg-purple-100 text-purple-700 border-purple-200"}:d.includes("")||d.includes("")?{label:"",color:"bg-slate-100 text-slate-700 border-slate-200"}:{label:"",color:"bg-amber-100 text-amber-700 border-amber-200"}};return s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar relative",children:s.jsxs("table",{className:"w-full text-xs text-left border-collapse table-fixed",children:[s.jsx("thead",{className:"sticky top-0 bg-slate-50/95 backdrop-blur z-10 shadow-sm text-slate-500 uppercase font-bold tracking-wider",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-3 text-center w-[5%] border-b border-slate-100",children:"No"}),s.jsx("th",{className:"px-2 py-3 w-[25%] border-b border-slate-100",children:e==="raw_material"?" ()":e==="aux_material"?" ()":" ()"}),s.jsx("th",{className:"px-2 py-3 text-center w-[12%] border-b border-slate-100",children:""}),s.jsx("th",{className:"px-2 py-3 text-right w-[15%] border-b border-slate-100 bg-indigo-50/30 text-indigo-900",children:""}),s.jsx("th",{className:"px-2 py-3 text-center w-[15%] border-b border-slate-100 italic text-slate-400",children:" "}),s.jsx("th",{className:"px-2 py-3 text-center w-[13%] border-b border-slate-100",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[a.map((c,d)=>{const u=c.stock_quantity||0,h=u<=(c.safety_stock||10),f=t(c.product_id);let p=null;const g=c.item_type==="raw_material"||c.item_type==="material",b=!c.item_type||c.item_type==="product";if(u>0&&f&&(g||b)){const w=f.diffDays-1;if(w>=7)p=s.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[s.jsx("div",{className:"flex-1 h-1 bg-red-100 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-red-500 w-full animate-pulse"})}),s.jsxs("span",{className:"shrink-0 text-[10px] font-black text-red-600 bg-red-50 px-1 rounded border border-red-100",children:[" ",w,""]})]});else if(w>=3){const j=Math.min(w/7*100,100);p=s.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[s.jsx("div",{className:"flex-1 h-1 bg-orange-100 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-orange-500",style:{width:`${j}%`}})}),s.jsxs("span",{className:"shrink-0 text-[10px] font-black text-orange-600 bg-orange-50 px-1 rounded border border-orange-100",children:[" (",w,")"]})]})}else p=s.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[s.jsx("div",{className:"flex-1 h-1 bg-emerald-100 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-emerald-500",style:{width:"20%"}})}),s.jsxs("span",{className:"shrink-0 text-[10px] font-black text-emerald-600 bg-emerald-50 px-1 rounded border border-emerald-100",children:[" (",w,")"]})]})}return s.jsxs("tr",{className:"hover:bg-slate-50/80 transition-colors group",children:[s.jsx("td",{className:"px-2 py-3 text-center text-slate-400 font-mono text-[10px]",children:d+1}),s.jsx("td",{className:"px-2 py-3",children:s.jsxs("div",{className:"flex flex-col justify-center h-full",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"font-bold text-slate-700 truncate",title:c.product_name,children:c.product_name}),e==="aux_material"&&o(c)&&s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-black border uppercase shrink-0 ${o(c).color}`,children:o(c).label})]}),p]})}),s.jsx("td",{className:"px-2 py-3 text-center text-slate-500 truncate",children:c.specification||"-"}),s.jsxs("td",{className:`px-2 py-3 text-right font-black text-sm bg-indigo-50/5 ${h?"text-red-500":"text-slate-700"}`,children:[Fe(u),h&&s.jsx("span",{className:"material-symbols-rounded text-sm align-middle ml-1 text-red-500 animate-pulse",title:" ",children:"error"})]}),s.jsx("td",{className:"px-2 py-3 text-center text-slate-400 text-[10px] font-medium",children:f?.dateStr?ZH(f.dateStr).split(" ")[0]:"-"}),s.jsx("td",{className:"px-2 py-3 text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[(e==="harvest_item"||e==="product")&&s.jsxs(s.Fragment,{children:[e==="harvest_item"&&s.jsx("button",{onClick:()=>n(c.product_id),className:"inline-flex items-center justify-center p-2 rounded-xl bg-emerald-50 text-emerald-600 hover:bg-emerald-100 transition-all active:scale-95 shadow-sm border border-emerald-100",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-base",children:"spa"})}),s.jsx("button",{onClick:()=>i(c.product_id),className:"inline-flex items-center justify-center p-2 rounded-xl bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition-all active:scale-95 shadow-sm border border-indigo-100",title:e==="product"?" /":" ()",children:s.jsx("span",{className:"material-symbols-rounded text-base",children:"inventory_2"})})]}),s.jsx("button",{onClick:()=>r(c),className:"inline-flex items-center justify-center p-2 rounded-xl bg-orange-50 text-orange-600 hover:bg-orange-100 transition-all active:scale-95 shadow-sm border border-orange-100",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-base",children:"edit_note"})}),e==="product"&&s.jsx("button",{onClick:()=>l(c),className:"inline-flex items-center justify-center p-2 rounded-xl bg-violet-50 text-violet-600 hover:bg-violet-100 transition-all active:scale-95 shadow-sm border border-violet-100",title:"   (BOM)",children:s.jsx("span",{className:"material-symbols-rounded text-base",children:"account_tree"})})]})})]},c.product_id)}),a.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"8",className:"py-20 text-center text-slate-400 font-medium",children:"  ."})})]})]})})},CIe=({logs:a,hideAutoLogs:e,setHideAutoLogs:t,logSearchQuery:r,setLogSearchQuery:n,loadData:i})=>{const l=F.useMemo(()=>{const c={};return a.forEach(d=>{const u=typeof d.created_at=="string"&&!d.created_at.includes("Z")&&!d.created_at.includes("+")?`${d.created_at.replace(" ","T")}Z`:d.created_at,h=new Date(u);if(isNaN(h.getTime())){const g=typeof d.created_at=="string"?d.created_at.split(" "):[],b=g[0]||"Unknown";c[b]||(c[b]=[]),c[b].push({...d,_localTime:g[1]?.substring(0,5)||""});return}const f=`${h.getFullYear()}-${String(h.getMonth()+1).padStart(2,"0")}-${String(h.getDate()).padStart(2,"0")}`,p=`${String(h.getHours()).padStart(2,"0")}:${String(h.getMinutes()).padStart(2,"0")}`;c[f]||(c[f]=[]),c[f].push({...d,_localDate:f,_localTime:p})}),c},[a]),o=F.useMemo(()=>{const c=a.filter(u=>u.change_quantity>0).reduce((u,h)=>u+h.change_quantity,0),d=a.filter(u=>u.change_quantity<0).reduce((u,h)=>u+h.change_quantity,0);return{plus:c,minus:d}},[a]);return s.jsxs("div",{className:"w-[420px] flex flex-col bg-white rounded-[1.5rem] shadow-sm border border-slate-200 overflow-hidden",children:[s.jsxs("div",{className:"p-5 border-b border-slate-100 bg-slate-50/80",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"font-black text-slate-800 text-sm flex items-center gap-2",children:[s.jsx("span",{className:"w-8 h-8 rounded-lg bg-amber-100 text-amber-600 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded text-xl",children:"history"})}),"   (Audit Trail)"]}),s.jsx("button",{onClick:i,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-slate-200 text-slate-400 hover:text-indigo-600 transition-all",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"refresh"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"relative group",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 material-symbols-rounded text-lg group-focus-within:text-orange-500 transition-colors",children:"search"}),s.jsx("input",{id:"log-search-input",value:r,onChange:c=>n(c.target.value),className:"pl-10 pr-4 h-9 w-full bg-white border border-slate-200 rounded-xl text-xs font-bold outline-none focus:ring-4 focus:ring-orange-100 focus:border-orange-300 transition-all placeholder:text-slate-400",placeholder:"  ..."})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("label",{htmlFor:"hide-auto-logs-check",className:"flex items-center gap-2 cursor-pointer group",children:[s.jsxs("div",{className:`w-8 h-4 rounded-full relative transition-colors ${e?"bg-indigo-600":"bg-slate-300"}`,children:[s.jsx("input",{id:"hide-auto-logs-check",type:"checkbox",className:"hidden",checked:e,onChange:c=>t(c.target.checked)}),s.jsx("div",{className:`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all ${e?"left-[18px]":"left-0.5"}`})]}),s.jsx("span",{className:"text-[10px] font-black text-slate-500 group-hover:text-indigo-600 tracking-tighter uppercase transition-colors",children:"  "})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("span",{className:"px-2 py-0.5 rounded bg-blue-50 text-blue-600 text-[10px] font-black",children:["+",Fe(o.plus)]}),s.jsx("span",{className:"px-2 py-0.5 rounded bg-rose-50 text-rose-600 text-[10px] font-black",children:Fe(o.minus)})]})]})]})]}),s.jsx("div",{className:"flex-1 overflow-auto stylish-scrollbar scroll-smooth bg-slate-50/30",children:a.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400 gap-3 p-10",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-300",children:"history_toggle_off"})}),s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-xs font-black text-slate-500 mb-1",children:"  "})})]}):s.jsx("div",{className:"p-4 space-y-6",children:Object.entries(l).sort((c,d)=>d[0].localeCompare(c[0])).map(([c,d])=>s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"sticky top-0 z-10 py-2 mb-3",children:s.jsxs("div",{className:"bg-white/80 backdrop-blur inline-flex items-center gap-2 px-3 py-1 rounded-full border border-slate-200 shadow-sm",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),s.jsx("span",{className:"text-[10px] font-black text-slate-700",children:c}),s.jsxs("span",{className:"text-[10px] text-slate-400 font-bold ml-1",children:[d.length,""]})]})}),s.jsx("div",{className:"space-y-3 ml-2 border-l-2 border-slate-100 pl-4",children:d.map((u,h)=>{const f=u.change_quantity>0;let p="bg-slate-100 text-slate-500 border-slate-200";return u.change_type===""?p="bg-blue-50 text-blue-600 border-blue-100":u.change_type===""?p="bg-rose-50 text-rose-600 border-rose-100":u.change_type===""||u.change_type===""?p="bg-emerald-50 text-emerald-600 border-emerald-100":u.change_type===""?p="bg-green-50 text-green-600 border-green-100":u.change_type===""?p="bg-purple-50 text-purple-600 border-purple-100":u.change_type===""&&(p="bg-amber-50 text-amber-600 border-amber-100"),s.jsxs("div",{className:"group relative bg-white p-3 rounded-xl border border-slate-100 shadow-sm hover:shadow-md hover:border-indigo-200 transition-all",children:[s.jsxs("div",{className:"flex justify-between items-start gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("div",{className:`px-1.5 py-0.5 rounded text-[8px] font-black uppercase border shrink-0 ${p}`,children:u.change_type}),s.jsx("span",{className:"text-[11px] font-black text-slate-800 truncate leading-tight",children:u.product_name})]}),s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-slate-400 font-mono mb-2",children:[s.jsx("span",{children:u._localTime}),s.jsx("span",{className:"w-px h-2 bg-slate-200"}),s.jsxs("span",{className:"font-bold text-slate-500",children:[": ",Fe(u.current_stock)]})]})]}),s.jsxs("div",{className:`text-sm font-black text-right shrink-0 ${f?"text-blue-600":"text-rose-500"}`,children:[f?"+":"",Fe(u.change_quantity)]})]}),u.memo&&s.jsxs("div",{className:"relative mt-1 pl-3 py-1.5 border-l-2 border-indigo-100 bg-indigo-50/30 rounded-r-md",children:[s.jsx("span",{className:"material-symbols-rounded text-[12px] absolute left-[-7px] top-1/2 -translate-y-1/2 bg-white text-indigo-400 rounded-full h-4 w-4 flex items-center justify-center border border-indigo-100",children:"chat_bubble"}),s.jsx("p",{className:"text-[10px] text-slate-600 font-medium leading-relaxed italic",children:u.memo})]})]},h)})})]},c))})})]})},AIe=({isOpen:a,onClose:e,product:t,val:r,setVal:n,reason:i,setReason:l,memo:o,setMemo:c,handleAdjustStock:d})=>{if(!a)return null;const u=t?.stock_quantity||0,h=u+(Number(r)||0);return s.jsxs("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md transition-opacity",onClick:e}),s.jsxs("div",{className:"bg-white rounded-[2rem] w-full max-w-[400px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-amber-600 p-6 text-white relative",children:[s.jsx("span",{className:"material-symbols-rounded absolute -right-6 -top-6 text-[120px] text-white/10 pointer-events-none",children:"edit_note"}),s.jsxs("h3",{className:"text-xl font-black flex items-center gap-2 relative z-10",children:[s.jsx("span",{className:"material-symbols-rounded",children:"edit_note"}),"   "]}),s.jsxs("p",{className:"text-xs text-white/80 mt-1 relative z-10 font-bold",children:["[",t?.product_name,"]  ."]})]}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[s.jsxs("div",{className:"text-center flex-1",children:[s.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:""}),s.jsx("p",{className:"text-xl font-black text-slate-700",children:Fe(u)})]}),s.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded text-slate-300",children:"double_arrow"})}),s.jsxs("div",{className:"text-center flex-1",children:[s.jsx("p",{className:"text-[10px] font-black text-orange-500 uppercase tracking-widest mb-1",children:" "}),s.jsx("p",{className:"text-xl font-black text-orange-600",children:Fe(h)})]})]}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block ml-1",children:"  (+, -)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",className:"w-full h-14 rounded-2xl border-2 border-slate-200 bg-white text-center font-black text-2xl text-slate-700 outline-none focus:border-orange-500 transition-all placeholder:text-slate-200",value:r,onChange:f=>n(f.target.value),placeholder:"0",autoFocus:!0,inputMode:"numeric"}),s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold text-sm",children:t?.specification||""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block ml-1",children:"  (Category)"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{className:"w-full h-12 pl-4 pr-10 rounded-xl border border-slate-200 bg-white font-bold text-sm text-slate-700 outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-400 appearance-none transition-all",value:i,onChange:f=>l(f.target.value),children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:"",children:"()"}),s.jsx("option",{value:"",children:"()"}),s.jsx("option",{value:"",children:"()"}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsx("span",{className:"material-symbols-rounded absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",children:"expand_more"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block ml-1",children:"  (Memo)"}),s.jsx("textarea",{className:"w-full h-20 p-4 rounded-xl border border-slate-200 bg-white text-xs font-bold text-slate-600 outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-400 transition-all resize-none",value:o,onChange:f=>c(f.target.value),placeholder:"  ."})]})]}),s.jsxs("div",{className:"flex gap-3 mt-8",children:[s.jsx("button",{onClick:e,className:"flex-1 h-14 rounded-2xl bg-slate-100 hover:bg-slate-200 text-slate-500 font-black text-sm transition-colors",children:""}),s.jsx("button",{onClick:d,className:"flex-1 h-14 rounded-2xl bg-orange-500 hover:bg-orange-600 text-white font-black text-sm shadow-lg shadow-orange-200 transition-all hover:scale-[1.02] active:scale-95",children:" "})]})]})]})]})},TIe=({isOpen:a,onClose:e,harvestModal:t,setHarvestModal:r,products:n,handleHarvest:i})=>{if(!a)return null;const l=()=>{const d=n.filter(u=>u.item_type==="harvest_item"&&u.status!=="");r(u=>({...u,items:[...u.items,{id:Date.now(),targetId:d[0]?.product_id||"",qty:"",grade:"A"}]}))},o=d=>{t.items.length<=1||r(u=>({...u,items:u.items.filter(h=>h.id!==d)}))},c=(d,u,h)=>{r(f=>({...f,items:f.items.map(p=>p.id===d?{...p,[u]:h}:p)}))};return s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md transition-opacity",onClick:e}),s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-[650px] shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 p-6 text-white relative overflow-hidden shrink-0",children:[s.jsx("span",{className:"material-symbols-rounded absolute -right-6 -top-6 text-[120px] text-white/10 pointer-events-none",children:"spa"}),s.jsxs("h3",{className:"text-lg font-black flex items-center gap-2 relative z-10",children:[s.jsx("span",{className:"material-symbols-rounded",children:"spa"}),"   "]}),s.jsx("p",{className:"text-xs text-white/80 mt-1 relative z-10 font-medium",children:"     ."})]}),s.jsxs("div",{className:"p-6 overflow-y-auto stylish-scrollbar flex-1",children:[s.jsxs("div",{className:"space-y-4",children:[t.items.map((d,u)=>s.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 relative group animate-in slide-in-from-top-2 duration-200",children:s.jsxs("div",{className:"grid grid-cols-12 gap-3 items-end",children:[s.jsxs("div",{className:"col-span-12 md:col-span-5",children:[s.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 block ml-1",children:["  ",u+1]}),s.jsxs("div",{className:"relative",children:[s.jsx("select",{className:"w-full h-11 pl-3 pr-8 rounded-xl border border-slate-200 bg-white text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-300 appearance-none transition-all",value:d.targetId,onChange:h=>c(d.id,"targetId",h.target.value),children:n.filter(h=>h.item_type==="harvest_item"&&h.status!=="").map(h=>s.jsxs("option",{value:h.product_id,children:[" ",h.product_name]},h.product_id))}),s.jsx("span",{className:"material-symbols-rounded absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",children:"expand_more"})]})]}),s.jsxs("div",{className:"col-span-7 md:col-span-4",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 block ml-1",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{className:"w-full h-11 pl-3 pr-8 rounded-xl border border-slate-200 bg-white text-sm font-bold text-slate-600 outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-300 appearance-none transition-all",value:d.grade,onChange:h=>c(d.id,"grade",h.target.value),children:[s.jsx("option",{value:"A",children:"A ()"}),s.jsx("option",{value:"B",children:"B ()"}),s.jsx("option",{value:"C",children:"C ()"}),s.jsx("option",{value:"S",children:"S ()"})]}),s.jsx("span",{className:"material-symbols-rounded absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",children:"expand_more"})]})]}),s.jsxs("div",{className:"col-span-5 md:col-span-3 flex items-center gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 block ml-1 text-right",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",min:"0",step:"any",className:"w-full h-11 rounded-xl border border-slate-200 bg-white text-right font-black text-lg text-emerald-600 pr-8 outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-300 transition-all placeholder:text-slate-200",value:d.qty,onChange:h=>c(d.id,"qty",h.target.value),placeholder:"0",inputMode:"decimal"}),s.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-[9px] font-bold text-slate-400",children:"kg"})]})]}),t.items.length>1&&s.jsx("button",{onClick:()=>o(d.id),className:"mt-6 h-11 w-11 rounded-xl bg-slate-100 text-slate-400 hover:bg-rose-50 hover:text-rose-500 transition-all flex items-center justify-center shrink-0",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"delete"})})]})]})},d.id)),s.jsxs("button",{onClick:l,className:"w-full py-3 rounded-xl border-2 border-dashed border-slate-200 text-slate-400 font-bold text-xs flex items-center justify-center gap-2 hover:bg-slate-50 hover:border-emerald-200 hover:text-emerald-500 transition-all",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"add_circle"}),"   "]})]}),s.jsxs("div",{className:"mt-8",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 block ml-1 italic",children:"  (Harvest Memo)"}),s.jsx("textarea",{className:"w-full h-20 p-3 rounded-xl border border-slate-200 bg-slate-50 text-xs font-bold text-slate-600 outline-none focus:ring-2 focus:ring-emerald-100 focus:border-emerald-300 transition-all resize-none",value:t.memo,onChange:d=>r(u=>({...u,memo:d.target.value})),placeholder:"  ."})]})]}),s.jsx("div",{className:"p-6 bg-slate-50 border-t border-slate-100 shrink-0",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:e,className:"flex-1 h-12 rounded-xl bg-white border border-slate-200 text-slate-500 font-bold text-sm hover:bg-slate-100 transition-colors",children:""}),s.jsx("button",{onClick:i,className:"flex-1 h-12 rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white font-bold text-sm shadow-lg shadow-emerald-200 transition-all flex items-center justify-center",children:"  "})]})})]})]})},MIe=({isOpen:a,onClose:e,convertModal:t,setConvertModal:r,products:n,handleBatchConvert:i})=>{if(!a)return null;const l=(c,d,u)=>{r(h=>({...h,targets:h.targets.map(f=>f.id===c?{...f,[d]:u}:f)}))},o=(c,d)=>{const u=Number(d);r(h=>{const f=h.deductions.find(p=>p.id===c);if(!f)return h;if(h.primaryMaterialId&&f.materialId===Number(h.primaryMaterialId)&&f.tQty>0&&u>0){const p=u/f.tQty;if(isFinite(p)&&Math.abs(p-1)>.001){const g=h.targets.map(b=>({...b,qty:Math.max(1,Math.round(b.qty*p))}));return{...h,targets:g}}}return{...h,deductions:h.deductions.map(p=>p.id===c?{...p,rQty:u}:p)}})};return F.useEffect(()=>{if(!a)return;(async()=>{r(d=>({...d,loading:!0}));try{const d=t.targets.filter(p=>p.productId).map(p=>Number(p.productId));if(d.length===0){r(p=>({...p,loading:!1}));return}const u=[...new Set(d)],h={};for(const p of u){const g=await ht("get_product_bom",{productId:p});h[p]=g||[]}const f={};t.targets.forEach(p=>{const g=Number(p.productId),b=Number(p.qty)||0;if(!g)return;(h[g]||[]).forEach(j=>{f[j.material_id]||(f[j.material_id]={materialId:j.material_id,name:j.product_name,stock:j.stock_quantity,tQty:0,ratio:j.ratio,type:j.item_type==="harvest_item"?"raw":j.item_type==="aux_material"||j.item_type==="raw_material"||j.item_type==="material"?"aux":"prod"}),f[j.material_id].tQty+=Math.ceil(b*j.ratio)})}),r(p=>{const g=Object.values(f);let b=p.primaryMaterialId,w=!1,j=1;const k=g.map(T=>{const E=p.deductions.find(R=>R.materialId===T.materialId);let I=T.tQty;return E&&(b&&E.materialId===Number(b)&&E.tQty===0&&E.rQty>0?T.tQty>0&&(j=E.rQty/T.tQty,isFinite(j)&&j>.001&&(w=!0,I=E.rQty)):I=E.tQty===T.tQty?E.rQty:T.tQty),{id:E?.id||Date.now()+Math.random(),materialId:T.materialId,name:T.name,stock:T.stock,tQty:T.tQty,ratio:T.ratio,rQty:I,type:T.type}});if(!b&&g.length>0){const T=g.find(E=>E.type==="raw");b=String(T?T.materialId:g[0].materialId)}if(w){const T=p.targets.map(E=>({...E,qty:Math.max(1,Math.round(E.qty*j))}));return{...p,deductions:k,targets:T,primaryMaterialId:b,loading:!1}}return{...p,deductions:k,primaryMaterialId:b,loading:!1}})}catch(d){console.error(d),r(u=>({...u,loading:!1}))}})()},[JSON.stringify(t.targets.map(c=>({p:c.productId,q:c.qty})))]),s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md transition-opacity",onClick:e}),s.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-[2.5rem] w-full max-w-[850px] shadow-[0_32px_64px_-16px_rgba(30,41,59,0.25)] relative overflow-hidden animate-in zoom-in-95 fade-in duration-300 flex flex-col max-h-[90vh] border border-white",children:[s.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 via-indigo-700 to-violet-800 p-10 text-white relative overflow-hidden shrink-0",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),s.jsxs("div",{className:"flex justify-between items-start relative z-10",children:[s.jsx("div",{children:s.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white/20 backdrop-blur-md flex items-center justify-center border border-white/30 shadow-xl",children:s.jsx("span",{className:"material-symbols-rounded text-3xl",children:"inventory_2"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-3xl font-black tracking-tight leading-tight",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:"  "}),s.jsx("p",{className:"text-white/60 text-xs font-bold uppercase tracking-widest mt-1",children:"Batch Production Processing"})]})]})}),s.jsx("button",{onClick:e,className:"w-12 h-12 rounded-full hover:bg-white/10 flex items-center justify-center transition-all group active:scale-95",children:s.jsx("span",{className:"material-symbols-rounded text-white/50 group-hover:text-white text-2xl",children:"close"})})]}),s.jsxs("div",{className:"flex gap-4 mt-8",children:[s.jsxs("div",{className:"px-5 py-3 bg-white/10 rounded-2xl border border-white/10 backdrop-blur-md shadow-inner flex flex-col",children:[s.jsx("p",{className:"text-[10px] font-black text-indigo-200 uppercase mb-0.5 tracking-wider",children:" "}),s.jsxs("p",{className:"text-xl font-black",children:[t.targets.filter(c=>c.productId).length," ",s.jsx("span",{className:"text-xs font-bold text-white/40",children:""})]})]}),s.jsxs("div",{className:"px-5 py-3 bg-white/10 rounded-2xl border border-white/10 backdrop-blur-md shadow-inner flex flex-col",children:[s.jsx("p",{className:"text-[10px] font-black text-indigo-200 uppercase mb-0.5 tracking-wider",children:" "}),s.jsxs("p",{className:"text-xl font-black",children:[t.deductions.length," ",s.jsx("span",{className:"text-xs font-bold text-white/40",children:""})]})]})]}),s.jsx("span",{className:"material-symbols-rounded absolute -right-20 -bottom-20 text-[320px] text-white/5 pointer-events-none rotate-12 select-none",children:"conveyor_belt"})]}),s.jsx("div",{className:"flex-1 overflow-hidden flex flex-col bg-slate-50/50",children:s.jsx("div",{className:"flex-1 overflow-y-auto stylish-scrollbar p-8",children:s.jsxs("div",{className:"grid grid-cols-12 gap-10",children:[s.jsxs("div",{className:"col-span-12 lg:col-span-7",children:[s.jsxs("div",{className:"mb-10",children:[s.jsxs("h4",{className:"text-sm font-black text-slate-800 flex items-center gap-2 mb-4",children:[s.jsx("span",{className:"w-6 h-6 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center text-xs",children:"01"}),"  "]}),s.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto pr-2 stylish-scrollbar",children:t.targets.map(c=>s.jsx("div",{"data-testid":`product-target-item-${c.id}`,className:"p-4 bg-white rounded-2xl border border-slate-200 shadow-sm relative group animate-in slide-in-from-left-4 duration-300",children:s.jsxs("div",{className:"grid grid-cols-12 gap-4 items-end",children:[s.jsxs("div",{className:"col-span-7",children:[s.jsx("label",{htmlFor:`product-select-${c.id}`,className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1.5 block ml-1",children:"  "}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{id:`product-select-${c.id}`,className:"w-full h-11 pl-3 pr-8 rounded-xl border border-slate-100 bg-slate-50 text-sm font-bold text-slate-700 outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-300 appearance-none transition-all",value:c.productId,onChange:d=>l(c.id,"productId",d.target.value),children:[s.jsx("option",{value:"",children:"--    --"}),n.filter(d=>(!d.item_type||d.item_type==="product")&&d.status!=="").map(d=>{const u=t.primaryMaterialId&&d.product_name.includes(n.find(h=>h.product_id===Number(t.primaryMaterialId))?.product_name?.split(" ")[0]);return s.jsxs("option",{value:d.product_id,children:[u?" ":"",d.product_name," (",d.specification||"",")"]},d.product_id)})]}),s.jsx("span",{className:"material-symbols-rounded absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",children:"expand_more"})]})]}),s.jsxs("div",{className:"col-span-4",children:[s.jsx("label",{htmlFor:`product-qty-${c.id}`,className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1.5 block ml-1",children:" "}),s.jsxs("div",{className:"relative group/field",children:[s.jsx("input",{id:`product-qty-${c.id}`,type:"number",className:"w-full h-11 rounded-xl border-2 border-indigo-200 bg-white text-right font-black text-lg text-indigo-700 pr-10 outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-400 transition-all shadow-sm",value:c.qty,onChange:d=>l(c.id,"qty",d.target.value),inputMode:"numeric"}),s.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-bold text-slate-400",children:n.find(d=>d.product_id===Number(c.productId))?.specification?.replace(/\d/g,"").replace("g","")||""})]})]})]})},c.id))})]}),s.jsxs("div",{className:"mb-10",children:[s.jsxs("h4",{className:"text-sm font-black text-slate-800 flex items-center gap-2 mb-4",children:[s.jsx("span",{className:"w-6 h-6 rounded-lg bg-emerald-100 text-emerald-600 flex items-center justify-center text-xs",children:"02"}),"   ()"]}),s.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2 stylish-scrollbar",children:t.deductions.filter(c=>c.type==="raw").length===0?s.jsx("div",{className:"p-8 bg-slate-50 border border-dashed border-slate-200 rounded-2xl text-center text-[11px] font-bold text-slate-400",children:"  .    ."}):t.deductions.filter(c=>c.type==="raw").map(c=>{const d=String(c.materialId)===t.primaryMaterialId,h=(n.find(f=>f.product_id===c.materialId)?.specification||"kg").replace(/[0-9.]/g,"").trim();return s.jsxs("div",{"data-testid":`raw-material-item-${c.id}`,className:`p-4 rounded-2xl border transition-all shadow-sm flex items-center gap-4 ${d?"bg-emerald-50/30 border-emerald-200 ring-1 ring-emerald-100":"bg-white border-slate-200"}`,children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:`material-symbols-rounded text-lg ${d?"text-emerald-500":"text-slate-400"}`,children:d?"stars":"spa"}),s.jsx("span",{className:"text-xs font-black text-slate-700 truncate",children:c.name}),d&&s.jsx("span",{className:"text-[9px] font-black bg-emerald-500 text-white px-1.5 py-0.5 rounded uppercase tracking-tighter",children:""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-[10px] font-bold text-slate-400 italic",children:[": ",c.stock?.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2}),h]}),s.jsxs("span",{className:"text-[10px] font-bold text-emerald-600/60 transition-opacity",children:[",  : ",c.ratio?.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2}),h,s.jsxs("span",{className:"ml-1 opacity-60",children:["( : ",c.tQty?.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2}),h,")"]})]})]})]}),s.jsxs("div",{className:"w-32 relative shrink-0",children:[s.jsx("input",{id:`deduction-qty-${c.id}`,type:"number",className:`w-full h-11 rounded-xl border-2 text-right font-black text-lg pr-10 outline-none transition-all shadow-sm ${d?"border-emerald-400 bg-white text-emerald-700 focus:ring-4 focus:ring-emerald-100":"border-slate-200 bg-slate-50 focus:bg-white focus:border-indigo-300"}`,value:c.rQty,onChange:f=>o(c.id,f.target.value),inputMode:"numeric"}),s.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-bold text-slate-400",children:h})]}),!d&&s.jsx("button",{onClick:()=>r(f=>({...f,primaryMaterialId:String(c.materialId)})),className:"h-11 px-3 rounded-xl border border-slate-200 text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 transition-all active:scale-95",title:"  ",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"star_rate"})})]},c.id)})}),t.deductions.some(c=>c.type==="raw")&&s.jsxs("div",{className:"mt-3 text-[10px] font-bold text-slate-400 ml-1 flex items-center gap-1.5",children:[s.jsx("span",{className:"material-symbols-rounded text-sm text-emerald-500",children:"info"}),"         . ( )"]})]}),s.jsxs("div",{className:"mt-8",children:[s.jsxs("label",{htmlFor:"memo-textarea",className:"text-sm font-black text-slate-800 flex items-center gap-2 mb-4",children:[s.jsx("span",{className:"w-6 h-6 rounded-lg bg-slate-200 text-slate-600 flex items-center justify-center text-xs",children:"03"}),"    (Memo)"]}),s.jsx("textarea",{id:"memo-textarea",className:"w-full h-24 p-4 rounded-[1.5rem] border border-slate-200 bg-white shadow-sm text-sm font-medium text-slate-600 outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-300 transition-all resize-none placeholder:text-slate-300",placeholder:"  .",value:t.memo,onChange:c=>r(d=>({...d,memo:c.target.value}))})]})]}),s.jsxs("div",{className:"col-span-12 lg:col-span-5 border-l border-slate-200 pl-4 lg:pl-10",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-black text-slate-800 flex items-center gap-2",children:[s.jsx("span",{className:"w-6 h-6 rounded-lg bg-amber-100 text-amber-600 flex items-center justify-center text-xs",children:"04"}),"    "]}),s.jsx("p",{className:"text-[10px] text-slate-400 mt-1 font-bold",children:" ."})]}),t.loading&&s.jsx("span",{className:"text-[10px] text-indigo-500 animate-pulse font-black uppercase tracking-tighter",children:"Recalculating..."})]}),s.jsxs("div",{className:"bg-slate-100/50 rounded-[2.5rem] border border-slate-200 p-6 flex flex-col min-h-[400px]",children:[t.deductions.filter(c=>c.type!=="raw").length===0&&!t.loading?s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-10 text-center opacity-40",children:[s.jsx("span",{className:"material-symbols-rounded text-5xl mb-4 text-slate-300",children:"fact_check"}),s.jsx("p",{className:"text-xs font-black text-slate-500",children:"BOM  ."})]}):s.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto pr-2 stylish-scrollbar",children:s.jsx("div",{className:"grid grid-cols-1 gap-2",children:t.deductions.filter(c=>c.type!=="raw").map(c=>{const d=c.stock<c.rQty;return s.jsxs("div",{"data-testid":`other-material-item-${c.id}`,className:`flex items-center justify-between p-3 rounded-2xl border bg-white shadow-sm hover:border-indigo-200 transition-all ${d?"border-rose-200 bg-rose-50/30":"border-slate-100"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${c.type==="aux"?"bg-orange-50 text-orange-500":c.type==="prod"?"bg-indigo-50 text-indigo-500":"bg-emerald-50 text-emerald-500"}`,children:s.jsx("span",{className:"material-symbols-rounded text-base",children:c.type==="aux"?"package_2":c.type==="prod"?"box":"spa"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] font-black text-slate-700",children:c.name}),s.jsxs("p",{className:`text-[9px] font-bold ${d?"text-rose-500":"text-slate-400"}`,children:[": ",Fe(c.stock)," ",d&&"()"]})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("span",{className:"text-sm font-black text-slate-600",children:["-",Fe(c.rQty)]})})]},c.id)})})}),s.jsx("div",{className:"mt-6 flex flex-col items-center",children:s.jsxs("div",{className:"px-4 py-2 bg-white/50 border border-dashed border-slate-300 rounded-2xl text-[10px] font-bold text-slate-400 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"info"}),"   "]})})]})]})]})})}),s.jsxs("div",{className:"p-8 bg-white border-t border-slate-100 flex gap-4 shrink-0 shadow-[0_-10px_20px_-15px_rgba(0,0,0,0.1)]",children:[s.jsx("button",{onClick:e,className:"px-8 h-14 rounded-2xl bg-slate-100 hover:bg-slate-200 text-slate-600 font-black text-sm transition-all",children:""}),s.jsxs("button",{onClick:i,className:"flex-1 h-14 rounded-2xl bg-indigo-600 hover:bg-indigo-700 text-white font-black text-lg shadow-lg shadow-indigo-200 transition-all hover:scale-[1.01] active:scale-95 flex items-center justify-center gap-3 group",children:[s.jsx("span",{className:"material-symbols-rounded group-hover:animate-bounce",children:"conveyor_belt"}),"  "]})]})]})]})},EIe=({isOpen:a,onClose:e,product:t,allProducts:r})=>{const{showAlert:n,showConfirm:i}=wa(),[l,o]=F.useState([]),[c,d]=F.useState(!1),[u,h]=F.useState(""),[f,p]=F.useState(1),g=F.useCallback(async()=>{if(t?.product_id){d(!0);try{const k=await ht("get_product_bom",{productId:t.product_id});o(k||[])}catch(k){console.error(k),n("","   .")}finally{d(!1)}}},[t,n]);F.useEffect(()=>{a&&t&&(g(),h(""),p(1))},[a,t,g]);const b=async()=>{if(!u){n(""," .");return}if(f<=0){n(""," 0  .");return}try{await ht("add_bom_item",{productId:t.product_id,materialId:Number(u),ratio:Number(f)}),await g(),h(""),p(1)}catch(k){console.error(k),n("","    . (    )")}},w=async k=>{if(await i(" ","    ?"))try{await ht("remove_bom_item",{productId:t.product_id,materialId:k}),await g()}catch(T){console.error(T),n("","    .")}};if(!a||!t)return null;const j=r.filter(k=>k.product_id!==t.product_id&&(k.item_type==="material"||k.item_type==="aux_material"||k.item_type==="raw_material")&&!l.some(T=>T.material_id===k.product_id));return s.jsxs("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/60 backdrop-blur-sm",onClick:e}),s.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[85vh]",children:[s.jsxs("div",{className:"bg-slate-950 px-8 py-6 flex justify-between items-center relative overflow-hidden shrink-0 border-b border-white/5",children:[s.jsx("div",{className:"absolute inset-0 opacity-20 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-teal-500 via-slate-950 to-slate-950 pointer-events-none"}),s.jsx("div",{className:"absolute -right-16 -top-16 w-64 h-64 bg-teal-500/10 rounded-full blur-[80px]"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-teal-400 shadow-[0_0_12px_rgba(45,212,191,0.6)] animate-pulse"}),s.jsx("span",{className:"text-[10px] font-black text-teal-400 tracking-[0.3em] uppercase",children:"Inventory Architecture"})]}),s.jsxs("h3",{className:"text-white font-black text-2xl flex items-center gap-3 tracking-tight",children:["  ",s.jsx("span",{className:"w-1 h-6 bg-slate-800 rounded-full"}),s.jsx("span",{className:"text-slate-400 font-bold text-lg",children:t.product_name})]})]}),s.jsx("button",{onClick:e,className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center text-slate-400 hover:bg-white/10 hover:text-white transition-all active:scale-90 relative z-10 group",children:s.jsx("span",{className:"material-symbols-rounded text-2xl group-hover:rotate-90 transition-transform duration-300",children:"close"})})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-6 bg-slate-50 space-y-6",children:[s.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-teal-50 rounded-full blur-3xl -z-10 translate-x-10 -translate-y-10"}),s.jsxs("h4",{className:"text-sm font-black text-slate-800 mb-3 flex items-center gap-1.5",children:[s.jsx("span",{className:"material-symbols-rounded text-teal-500 text-lg",children:"add_circle"})," "]}),s.jsxs("div",{className:"flex gap-3 items-end",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{htmlFor:"material-select",className:"block text-[10px] font-bold text-slate-400 uppercase mb-1 ml-1",children:" "}),s.jsxs("select",{id:"material-select",className:"w-full h-11 px-3 rounded-xl bg-slate-50 border border-slate-200 text-sm font-bold text-slate-600 focus:outline-none focus:ring-2 focus:ring-teal-500/50",value:u,onChange:k=>h(k.target.value),children:[s.jsx("option",{value:"",children:" ..."}),j.map(k=>s.jsxs("option",{value:k.product_id,children:[k.product_name," (",k.specification||"-",") - : ",k.stock_quantity||0]},k.product_id))]})]}),s.jsxs("div",{className:"w-32",children:[s.jsx("label",{htmlFor:"ratio-input",className:"block text-[10px] font-bold text-slate-400 uppercase mb-1 ml-1",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"ratio-input",type:"number",step:"0.1",className:"w-full h-11 pl-3 pr-8 rounded-xl bg-slate-50 border border-slate-200 text-sm font-bold text-right text-slate-600 focus:outline-none focus:ring-2 focus:ring-teal-500/50",value:f,onChange:k=>p(k.target.value)}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs font-bold text-slate-400",children:""})]})]}),s.jsxs("button",{onClick:b,className:"h-11 px-5 rounded-xl bg-teal-600 text-white font-bold text-sm shadow-lg shadow-teal-200 hover:bg-teal-500 active:scale-95 transition-all flex items-center gap-1 shrink-0",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"add"}),""]})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-orange-50/50 rounded-xl border border-orange-100 text-orange-800 text-xs",children:[s.jsx("span",{className:"material-symbols-rounded text-orange-500 mt-0.5 shrink-0",children:"info"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",children:"  "}),s.jsxs("p",{className:"mt-1 opacity-80 leading-relaxed",children:[" (",t.product_name,")  ,     ",s.jsx("span",{className:"underline decoration-orange-400 decoration-2 underline-offset-2",children:"  "}),"."]})]})]}),s.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:s.jsxs("table",{className:"w-full text-xs text-left",children:[s.jsx("thead",{className:"bg-slate-50 border-b border-slate-100 text-slate-500 font-bold uppercase",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 w-[60%]",children:" ()"}),s.jsx("th",{className:"px-4 py-3 text-right w-[20%]",children:" "}),s.jsx("th",{className:"px-4 py-3 text-center w-[20%]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:c?s.jsx("tr",{children:s.jsx("td",{colSpan:"3",className:"py-10 text-center text-slate-400",children:"Loading..."})}):l.length===0?s.jsx("tr",{children:s.jsxs("td",{colSpan:"3",className:"py-10 text-center text-slate-400 flex flex-col items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-200",children:"playlist_add"}),s.jsx("span",{children:"   ."})]})}):l.map(k=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[s.jsxs("td",{className:"px-4 py-3",children:[s.jsx("div",{className:"font-bold text-slate-700",children:k.product_name}),s.jsxs("div",{className:"text-[10px] text-slate-400",children:[k.specification," | : ",k.stock_quantity]})]}),s.jsxs("td",{className:"px-4 py-3 text-right font-bold text-slate-600",children:[k.ratio," ",s.jsx("span",{className:"text-[10px] font-normal text-slate-400",children:"EA"})]}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("button",{onClick:()=>w(k.material_id),className:"w-8 h-8 rounded-lg bg-slate-100 text-slate-400 hover:bg-red-50 hover:text-red-500 transition-all flex items-center justify-center mx-auto",title:" ",children:s.jsx("span",{className:"material-symbols-rounded text-base",children:"delete"})})})]},k.material_id))})]})})]}),s.jsx("div",{className:"p-4 bg-white border-t border-slate-100 flex justify-end",children:s.jsx("button",{onClick:e,className:"px-6 py-2.5 rounded-xl bg-slate-100 text-slate-600 font-bold text-sm hover:bg-slate-200 transition-colors",children:""})})]})]})},DIe=()=>{const{showAlert:a,showConfirm:e}=wa(),{tab:t,setTab:r,products:n,searchQuery:i,setSearchQuery:l,logSearchQuery:o,setLogSearchQuery:c,hideAutoLogs:d,setHideAutoLogs:u,auxSubTab:h,setAuxSubTab:f,convertModal:p,setConvertModal:g,harvestModal:b,setHarvestModal:w,adjustModal:j,setAdjustModal:k,bomModal:T,setBomModal:E,loadData:I,getFreshnessInfo:R,filteredProducts:P,filteredLogs:H,openAdjustModal:G,handleAdjustStock:X,openHarvestModal:U,handleHarvest:te,openConvertModal:Z,handleBatchConvert:J,openBomModal:B}=NIe(a,e);return s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 relative overflow-hidden",children:[s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1 shrink-0",children:[s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Inventory Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["/  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Stock & Production"})]})]})}),s.jsx(jIe,{})]}),s.jsxs("div",{className:"flex-1 flex gap-5 px-6 lg:px-8 min-[2000px]:px-12 pb-6 lg:pb-8 min-[2000px]:pb-12 min-h-0",children:[s.jsxs("div",{className:"flex-1 flex flex-col bg-white rounded-[1.5rem] shadow-sm border border-slate-200 overflow-hidden relative",children:[s.jsx(SIe,{tab:t,setTab:r,openHarvestModal:U,openConvertModal:Z,auxSubTab:h,setAuxSubTab:f,searchQuery:i,setSearchQuery:l}),s.jsx(kIe,{products:P,tab:t,getFreshnessInfo:R,openAdjustModal:G,openHarvestModal:U,openConvertModal:Z,openBomModal:B})]}),s.jsx(CIe,{logs:H,hideAutoLogs:d,setHideAutoLogs:u,logSearchQuery:o,setLogSearchQuery:c,loadData:I})]}),s.jsx(AIe,{isOpen:j.open,onClose:()=>k(W=>({...W,open:!1})),product:j.product,val:j.val,setVal:W=>k($=>({...$,val:W})),reason:j.reason,setReason:W=>k($=>({...$,reason:W})),memo:j.memo,setMemo:W=>k($=>({...$,memo:W})),handleAdjustStock:X}),s.jsx(TIe,{isOpen:b.open,onClose:()=>w(W=>({...W,open:!1})),harvestModal:b,setHarvestModal:w,products:n,handleHarvest:te}),s.jsx(MIe,{isOpen:p.open,onClose:()=>g(W=>({...W,open:!1})),convertModal:p,setConvertModal:g,products:n,handleBatchConvert:J}),s.jsx(EIe,{isOpen:T.open,onClose:()=>E(W=>({...W,open:!1})),product:T.product,allProducts:n})]})},IIe=()=>{const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState([]),[n,i]=F.useState(null),[l,o]=F.useState([]),[c,d]=F.useState(""),[u,h]=F.useState(!1),[f,p]=F.useState(!1),[g,b]=F.useState([]),[w,j]=F.useState(""),[k,T]=F.useState(!1),[E,I]=F.useState({id:null,type:"",date:new Date().toISOString().split("T")[0],amount:"",desc:""});F.useEffect(()=>{R()},[]);const R=async()=>{try{const B=await Ke("get_ledger_debtors");r(B||[])}catch(B){console.error(B)}},P=async B=>{i(B),h(!0);try{const W=await Ke("get_ledger",{customer_id:B.customer_id});o(W||[])}catch(W){console.error(W),o([])}finally{h(!1)}},H=async()=>{if(w)try{const B=await Ke("search_customers_by_name",{query:w});b(B||[])}catch(B){console.error(B)}},G=B=>{t.find($=>$.customer_id===B.customer_id)||r($=>[B,...$]),P(B),p(!1),j(""),b([])},X=(B,W=null)=>{n&&(I({id:W?.ledger_id||null,type:W?.transaction_type||B,date:W?.transaction_date||new Date().toISOString().split("T")[0],amount:W?Math.abs(W.amount):"",desc:W?.description||(B===""?" ":B===""?"  ":" ")}),T(!0))},U=async()=>{const{id:B,type:W,date:$,amount:Q,desc:ne}=E,re=Number(String(Q).replace(/[^0-9-]/g,""));if(re===0)return a(""," .");if(n)try{B?(await Ke("update_ledger_entry",{ledgerId:B,transactionDate:$,transactionType:W,amount:re,description:ne}),await a("",".")):(await Ke("create_ledger_entry",{customerId:n.customer_id,transactionDate:$,transactionType:W,amount:re,description:ne}),await a("",".")),T(!1),await R();const K=await Ke("get_customer",{customer_id:n.customer_id});P(K||n)}catch(K){a(""," : "+K.message||K)}},te=async B=>{if(await e(" ",`   ?
    .`))try{await Ke("delete_ledger_entry",{ledgerId:B}),await a("","."),P(n),R()}catch(W){a(""," : "+W.message||W)}},Z=t.filter(B=>(B.customer_name||"").toLowerCase().includes(c.toLowerCase())||(B.mobile_number||"").includes(c)),J=l.length>0?l[0].running_balance:n?.current_balance||0;return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1 bg-[#f8fafc]",children:s.jsxs("div",{className:"flex justify-between items-end mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Sales Management System"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Receivables"})]})]}),s.jsx("div",{className:"flex gap-3",children:s.jsxs("button",{onClick:()=>p(!0),className:"group h-10 px-5 rounded-xl bg-white border border-slate-200 text-slate-600 font-bold hover:border-indigo-500 hover:text-indigo-600 transition-all flex items-center gap-2 shadow-sm text-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-lg group-hover:scale-110 transition-transform",children:"person_add"}),"   ()"]})})]})}),s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 flex gap-4 overflow-hidden flex-1 pb-6 lg:pb-8 min-[2000px]:pb-12 mt-1",children:[s.jsxs("div",{className:"w-[340px] flex flex-col bg-white rounded-[1.5rem] shadow-lg border border-slate-200/60 overflow-hidden",children:[s.jsxs("div",{className:"p-5 border-b border-slate-100 bg-slate-50/50",children:[s.jsx("h2",{className:"text-sm font-black text-slate-700 mb-2 uppercase tracking-wide",children:"Customer List"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"material-symbols-rounded absolute left-3 top-2.5 text-slate-400 text-lg",children:"search"}),s.jsx("input",{className:"w-full h-10 pl-10 pr-4 rounded-xl bg-white border border-slate-200 text-sm font-bold text-slate-700 focus:ring-2 focus:ring-indigo-500 transition-all shadow-sm placeholder:font-medium",placeholder:" ...",value:c,onChange:B=>d(B.target.value)})]}),s.jsxs("div",{className:"flex justify-between items-center mt-3 text-[11px] font-black text-slate-400 uppercase",children:[s.jsxs("span",{children:[" (",Z.length,")"]}),s.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded bg-indigo-50 text-indigo-600",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"check_circle"}),s.jsx("span",{children:" "})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-1",children:[Z.map(B=>s.jsxs("div",{onClick:()=>P(B),className:`p-3 rounded-xl cursor-pointer transition-all border ${n?.customer_id===B.customer_id?"bg-indigo-600 border-indigo-500 shadow-md text-white transform scale-[1.02]":"bg-white border-transparent hover:bg-slate-50 hover:border-slate-100 text-slate-600"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("span",{className:`font-black text-sm ${n?.customer_id===B.customer_id?"text-white":"text-slate-800"}`,children:B.customer_name}),s.jsx("span",{className:`font-mono text-sm font-black ${n?.customer_id===B.customer_id?"text-indigo-200":B.current_balance>0?"text-rose-500":B.current_balance<0?"text-emerald-500":"text-slate-300"}`,children:Fe(B.current_balance)})]}),s.jsx("div",{className:`text-[11px] font-bold ${n?.customer_id===B.customer_id?"text-indigo-200":"text-slate-400"}`,children:B.mobile_number||"-"})]},B.customer_id)),Z.length===0&&s.jsx("div",{className:"p-8 text-center text-slate-400 text-xs font-bold",children:"  ."})]})]}),s.jsx("div",{className:"flex-1 flex flex-col bg-white rounded-[1.5rem] shadow-lg border border-slate-200/60 overflow-hidden relative",children:n?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/30",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-indigo-100 text-indigo-600 flex items-center justify-center shadow-inner",children:s.jsx("span",{className:"material-symbols-rounded text-2xl",children:"account_balance_wallet"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-black text-slate-800 flex items-center gap-2",children:[n.customer_name,s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-slate-100 text-slate-500 font-black border border-slate-200",children:n.customer_id})]}),s.jsx("div",{className:"text-sm text-slate-500 font-bold",children:n.mobile_number})]})]}),s.jsxs("div",{className:"text-right bg-white px-5 py-2 rounded-2xl border border-slate-100 shadow-sm",children:[s.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-wider mb-0.5",children:"  "}),s.jsxs("div",{className:`text-2xl font-black ${J>0?"text-rose-500":J<0?"text-emerald-500":"text-slate-700"}`,children:[Fe(J)," ",s.jsx("span",{className:"text-sm text-slate-400 font-bold",children:"KRW"})]})]})]}),s.jsxs("div",{className:"px-6 py-3 border-b border-slate-100 flex justify-end gap-2 bg-white sticky top-0 z-10",children:[s.jsxs("button",{onClick:()=>X(""),className:"h-9 px-4 rounded-xl bg-white border border-slate-200 text-slate-500 font-black hover:bg-slate-50 hover:text-slate-700 hover:border-slate-300 transition-all flex items-center gap-1.5 text-xs shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"history"}),"  "]}),s.jsxs("button",{onClick:()=>X(""),className:"h-9 px-4 rounded-xl bg-orange-50 border border-orange-100 text-orange-600 font-black hover:bg-orange-100 transition-all flex items-center gap-1.5 text-xs shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"tune"}),"  "]}),s.jsxs("button",{onClick:()=>X(""),className:"h-9 px-5 rounded-xl bg-indigo-600 text-white font-black hover:bg-indigo-500 transition-all flex items-center gap-1.5 text-xs shadow-md shadow-indigo-200",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"payments"}),"  "]})]}),s.jsx("div",{className:"flex-1 overflow-auto bg-slate-50/50 p-4",children:s.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-500 font-black text-xs uppercase border-b border-slate-200 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-center w-[12%] min-w-[100px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[8%] min-w-[60px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-left",children:""}),s.jsx("th",{className:"px-4 py-3 text-right w-[15%] min-w-[100px]",children:""}),s.jsx("th",{className:"px-4 py-3 text-right w-[15%] min-w-[100px] bg-slate-50",children:""}),s.jsx("th",{className:"px-4 py-3 text-center w-[8%] min-w-[80px]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:u?s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"p-20 text-center",children:s.jsx("span",{className:"material-symbols-rounded animate-spin text-3xl text-slate-300",children:"sync"})})}):l.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"p-20 text-center text-slate-400 font-bold italic",children:"  . ( 0)"})}):l.map(B=>{const W=["","","","",""].includes(B.transaction_type);let $="text-slate-600",Q="bg-slate-100";return B.transaction_type===""&&($="text-blue-600",Q="bg-blue-50"),B.transaction_type===""&&($="text-emerald-600",Q="bg-emerald-50"),["",""].includes(B.transaction_type)&&($="text-rose-500",Q="bg-rose-50"),s.jsxs("tr",{className:"hover:bg-slate-50 group transition-colors",children:[s.jsx("td",{className:"px-4 py-3 text-center font-bold text-slate-500 text-xs",children:B.transaction_date}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`px-2 py-0.5 rounded-md font-black text-[10px] ${$} ${Q} uppercase`,children:B.transaction_type})}),s.jsxs("td",{className:"px-4 py-3 font-bold text-slate-700 break-all",children:[B.description,B.reference_id&&s.jsxs("span",{className:"text-xs text-slate-400 font-medium ml-1",children:["(",B.reference_id,")"]})]}),s.jsx("td",{className:"px-4 py-3 text-right font-black text-xs font-mono text-slate-600",children:Fe(B.amount)}),s.jsx("td",{className:"px-4 py-3 text-right font-black text-xs font-mono text-indigo-900 bg-slate-50/50",children:Fe(B.running_balance)}),s.jsx("td",{className:"px-4 py-3 text-center",children:W&&s.jsxs("div",{className:"flex justify-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>X(null,B),className:"w-7 h-7 rounded bg-white border border-slate-200 text-slate-400 hover:text-indigo-600 hover:border-indigo-200 transition-all flex items-center justify-center shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"edit"})}),s.jsx("button",{onClick:()=>te(B.ledger_id),className:"w-7 h-7 rounded bg-white border border-slate-200 text-slate-400 hover:text-rose-600 hover:border-rose-200 transition-all flex items-center justify-center shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded text-sm",children:"delete"})})]})})]},B.ledger_id)})})]})})})]}):s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-300",children:[s.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-50 flex items-center justify-center mb-6 shadow-inner",children:s.jsx("span",{className:"material-symbols-rounded text-5xl opacity-50",children:"account_balance_wallet"})}),s.jsx("p",{className:"font-black text-lg text-slate-400",children:"   ."}),s.jsx("p",{className:"text-sm font-medium opacity-60 mt-2",children:"      ."})]})})]}),f&&s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 backdrop-blur-md bg-slate-900/40 animate-in fade-in duration-300",children:s.jsxs("div",{className:"relative w-full max-w-lg bg-white rounded-[2rem] shadow-2xl overflow-hidden animate-in zoom-in-95 flex flex-col max-h-[70vh]",children:[s.jsxs("div",{className:"px-6 py-5 bg-slate-800 text-white flex justify-between items-center shrink-0",children:[s.jsxs("h3",{className:"text-lg font-black flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-400",children:"person_add"}),"/ "]}),s.jsx("button",{onClick:()=>p(!1),className:"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50 flex gap-2",children:[s.jsx("input",{value:w,onChange:B=>j(B.target.value),onKeyDown:B=>B.key==="Enter"&&H(),className:"flex-1 h-11 px-4 rounded-xl border border-slate-300 font-bold text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:" ...",autoFocus:!0}),s.jsx("button",{onClick:H,className:"h-11 px-6 bg-indigo-600 text-white rounded-xl font-black shadow-lg shadow-indigo-200 hover:bg-indigo-500 transition-all text-sm",children:""})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2",children:s.jsx("table",{className:"w-full text-left text-sm",children:s.jsxs("tbody",{className:"divide-y divide-slate-100",children:[g.map(B=>s.jsxs("tr",{className:"hover:bg-slate-50 group transition-colors",children:[s.jsx("td",{className:"px-4 py-3 font-black text-slate-800",children:B.customer_name}),s.jsx("td",{className:"px-4 py-3 text-slate-500 font-medium text-xs font-mono",children:B.mobile_number}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsx("button",{onClick:()=>G(B),className:"px-4 py-1.5 rounded-lg bg-white border border-slate-200 text-indigo-600 font-black text-xs hover:bg-indigo-600 hover:text-white transition-all shadow-sm",children:""})})]},B.customer_id)),g.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"3",className:"p-10 text-center text-slate-400 font-bold italic",children:"  ."})})]})})})]})}),k&&s.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 backdrop-blur-sm bg-slate-950/40 text-left",children:s.jsxs("div",{className:"relative w-full max-w-sm bg-white rounded-[2rem] shadow-2xl overflow-hidden animate-in zoom-in-95",children:[s.jsxs("div",{className:`px-6 py-5 text-white flex justify-between items-center ${E.type===""?"bg-indigo-600":E.type===""?"bg-slate-700":"bg-orange-500"}`,children:[s.jsx("h3",{className:"text-lg font-black",children:E.id?`${E.type} `:`${E.type} `}),s.jsx("button",{onClick:()=>T(!1),className:"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-black text-slate-400 uppercase ml-1",children:""}),s.jsx("input",{type:"date",value:E.date,onChange:B=>I({...E,date:B.target.value}),className:"w-full h-11 px-4 rounded-xl bg-slate-50 border border-slate-200 font-bold text-slate-700 focus:ring-2 focus:ring-indigo-500"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-black text-slate-400 uppercase ml-1",children:""}),s.jsx("input",{value:Fe(E.amount),onChange:B=>{let W=B.target.value;E.type===""?(W=W.replace(/[^0-9-]/g,""),W.includes("-")&&W.indexOf("-")!==0&&(W=W.replace(/-/g,"")),(W.match(/-/g)||[]).length>1&&(W="-"+W.replace(/-/g,""))):W=W.replace(/[^0-9]/g,""),I({...E,amount:W})},className:"w-full h-11 px-4 rounded-xl bg-white border border-slate-300 text-right font-black text-xl text-indigo-600 focus:ring-2 focus:ring-indigo-500",placeholder:"0"}),s.jsx("div",{className:"text-[11px] text-right font-bold mt-1 text-slate-400",children:E.type===""?s.jsx("span",{className:"text-emerald-500",children:" ."}):s.jsx("span",{className:"text-rose-500",children:" ."})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-black text-slate-400 uppercase ml-1",children:" ()"}),s.jsx("input",{value:E.desc,onChange:B=>I({...E,desc:B.target.value}),className:"w-full h-11 px-4 rounded-xl bg-white border border-slate-200 font-bold text-slate-700 focus:ring-2 focus:ring-indigo-500"})]}),s.jsx("div",{className:"pt-2 flex justify-end",children:s.jsx("button",{onClick:U,className:`h-11 px-8 rounded-xl text-white font-black shadow-lg transition-all text-sm ${E.type===""?"bg-indigo-600 hover:bg-indigo-500 shadow-indigo-200":E.type===""?"bg-slate-700 hover:bg-slate-600 shadow-slate-300":"bg-orange-500 hover:bg-orange-400 shadow-orange-200"}`,children:" "})})]})]})})]})},RIe=`
    @media print {
        @page { size: A4 landscape; margin: 0; }
        html, body { 
            background: white !important; 
            color: black !important;
            color-scheme: light !important;
            margin: 0 !important;
            padding: 0 !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }
        #printable-personal-history {
            display: block !important;
            position: absolute !important;
            left: 0 !important;
            top: 0 !important;
            width: 100% !important;
            padding: 10mm !important;
            visibility: visible !important;
            background: white !important;
        }
        #printable-personal-history * {
            visibility: visible !important;
            border-color: black !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }
    }
    .print-report-wrapper { 
        font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; 
        color: #000; 
        width: 100%;
    }
    .report-card {
        border: 2px solid #000 !important;
        padding: 30px;
        background: white !important;
    }
    .report-header h1 { 
        margin: 0; 
        font-size: 32px; 
        font-weight: 900; 
        letter-spacing: 0.3em; 
        border-bottom: 5px double #000 !important;
        display: inline-block;
        padding: 0 50px 10px 50px;
    }
    table { 
        width: 100%; 
        border-collapse: collapse !important; 
        font-size: 10px; 
        border: 2px solid #000 !important; 
        table-layout: fixed;
    }
    th, td { 
        border: 1px solid #000 !important; 
        padding: 6px 4px; 
        text-align: center; 
    }
    th { 
        background: #f0f0f0 !important; 
        font-weight: 900; 
        border-bottom: 2px solid #000 !important;
    }
    .bg-row { background: #fafafa !important; }
    .summary-table {
        width: 400px;
        border: 2px solid #000 !important;
    }
    .summary-table th, .summary-table td { border: 1px solid #000 !important; }
`,LIe=()=>{const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState(""),[n,i]=F.useState("1year"),[l,o]=F.useState([]),[c,d]=F.useState(!1),[u,h]=F.useState(""),[f,p]=F.useState(!1),[g,b]=F.useState(""),[w,j]=F.useState(!1),[k,T]=F.useState(!1),[E,I]=F.useState(null),R=F.useRef(null),P=F.useRef(null),H=F.useMemo(()=>{let W=0,$=0,Q=0;return l.forEach(ne=>{ne.status!==""&&(W++,$+=ne.quantity,Q+=ne.total_amount)}),{count:W,qty:$,amt:Q}},[l]);F.useEffect(()=>()=>{P.current&&(P.current.dispose(),P.current=null)},[]),F.useEffect(()=>{w&&R.current&&setTimeout(Z,100)},[w,E,l]);const G=async()=>{if(!t.trim()){a("","    .");return}d(!0),h("    ..."),p(!1);try{const W=await Ke("search_sales_all",{query:t.trim(),period:n});o(W||[])}catch(W){console.error(W),o([]),a(""," : "+W)}finally{d(!1)}},X=()=>{r(""),i("1year"),o([]),p(!1),b("")},U=W=>{W.key==="Enter"&&G()},te=()=>{!l||l.length===0||(p(!0),b('<span class="material-symbols-rounded spin text-base animate-spin">sync</span>  ...'),setTimeout(()=>{try{const W=l.filter(ce=>ce.status!=="");if(W.length===0){b("    .");return}const $={};W.forEach(ce=>{$[ce.product_name]=($[ce.product_name]||0)+ce.quantity});const Q=Object.entries($).sort((ce,de)=>de[1]-ce[1])[0],ne=Q?Q[0]:"-",re=W.reduce((ce,de)=>ce+de.total_amount,0),K=W.length>0?re/W.length:0;let ae="";W.length>=5?ae=` !  <b class="text-indigo-600">${ne}</b>  ,  <b class="text-indigo-600">${Fe(K)}</b> .           .`:W.length>=2?ae=` . <b class="text-indigo-600">${ne}</b>    ''      ?`:ae="     .          .",b(ae)}catch{b("   .")}},800))},Z=()=>{const W=R.current;if(!W)return;P.current&&P.current.dispose();const $=B$(W);P.current=$;let Q=[],ne=[],re=[];if(E){const ce={};for(let de=1;de<=12;de++)ce[String(de).padStart(2,"0")]={qty:0,amt:0};l.filter(de=>de.status!==""&&de.order_date.startsWith(E)).forEach(de=>{const he=de.order_date.substring(5,7);ce[he]&&(ce[he].qty+=de.quantity,ce[he].amt+=de.total_amount)}),Q=Object.keys(ce).sort().map(de=>`${de}`),ne=Object.values(ce).map(de=>de.qty),re=Object.values(ce).map(de=>de.amt)}else{const ce={};l.filter(de=>de.status!=="").forEach(de=>{const he=de.order_date.substring(0,4);ce[he]||(ce[he]={qty:0,amt:0}),ce[he].qty+=de.quantity,ce[he].amt+=de.total_amount}),Q=Object.keys(ce).sort(),ne=Q.map(de=>ce[de].qty),re=Q.map(de=>ce[de].amt)}const K={title:{text:E?`${E}  `:"   (   )",left:"center",textStyle:{fontSize:14,color:"#64748b"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["()","()"],bottom:0},grid:{left:"3%",right:"4%",bottom:"10%",top:"15%",containLabel:!0},xAxis:{type:"category",data:Q,axisPointer:{type:"shadow"}},yAxis:[{type:"value",name:"",axisLabel:{formatter:"{value}"}},{type:"value",name:"",axisLabel:{formatter:ce=>(ce/1e4).toLocaleString()+""}}],series:[{name:"()",type:"bar",data:ne,itemStyle:{color:E?"#60a5fa":"#fb7185",borderRadius:[4,4,0,0]},barWidth:"40%",emphasis:{itemStyle:{color:E?"#3b82f6":"#e11d48"}}},{name:"()",type:"line",yAxisIndex:1,data:re,itemStyle:{color:"#6366f1"},lineStyle:{width:3},symbolSize:8,smooth:!0}]};$.setOption(K),E||$.on("click",ce=>{ce.componentType==="series"&&I(ce.name)});const ae=()=>$.resize();return window.addEventListener("resize",ae),()=>window.removeEventListener("resize",ae)},J=()=>{const W=document.getElementById("printable-personal-content");if(!W)return;const $=`
            <style>
                ${RIe}
                @page { size: A4 landscape; margin: 10mm; }
                body { font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; margin: 0; padding: 10mm; }
                table { border-collapse: collapse !important; width: 100%; }
                th, td { border: 1px solid #000 !important; }
            </style>
            ${W.outerHTML}
        `;oo($)},B=async()=>{if(l.length===0){a("","  .");return}const W=[["No","","","","","","","","","","",""]];l.forEach((Q,ne)=>{const re=Q.customer_id&&Q.customer_id.length>=10&&Q.customer_id.substring(9,10)==="0"?"":"";W.push([ne+1,Q.status||"",re,Q.order_date,Q.customer_name||"",Q.customer_mobile||Q.shipping_mobile_number||"",Q.shipping_name||"",Q.product_name,Q.specification||"",Q.quantity,Q.total_amount,(Q.memo||"").replace(/\n/g," ")].map(K=>`"${K}"`))});const $="\uFEFF"+W.map(Q=>Q.join(",")).join(`
`);try{const Q=new Blob([$],{type:"text/csv;charset=utf-8;"}),ne=document.createElement("a"),re=URL.createObjectURL(Q);ne.setAttribute("href",re),ne.setAttribute("download",".csv"),ne.style.visibility="hidden",document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),a(""," .")}catch(Q){console.error(Q),a(""," : "+Q)}};return s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 relative overflow-hidden print:bg-white print:h-auto print:overflow-visible print:block",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1 shrink-0 print:hidden",children:s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Sales Analysis & History"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Personal History"})]})]})})}),s.jsxs("div",{className:"hidden print:block w-full mb-8 text-center",children:[s.jsx("h1",{className:"text-3xl font-black text-black mb-4 pb-2 border-b-2 border-black",style:{fontFamily:'"Malgun Gothic", sans-serif'},children:"  "}),s.jsxs("div",{className:"flex justify-between items-end text-xs text-slate-600 mb-2",children:[s.jsxs("span",{children:[": ",s.jsx("span",{className:"font-bold",children:t})," (",n==="1year"?" 1":" ",")"]}),s.jsxs("span",{children:[": ",new Date().toLocaleString()]})]})]}),s.jsxs("div",{className:`flex-1 flex flex-col min-h-0 px-6 lg:px-8 min-[2000px]:px-12 pb-6 lg:pb-8 min-[2000px]:pb-12 mt-2 bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden print:shadow-none print:border-none print:m-0 print:rounded-none ${c?"opacity-80 pointer-events-none":""}`,children:[s.jsxs("div",{className:"shrink-0 p-4 border-b border-slate-100 flex gap-3 items-center bg-white rounded-t-2xl shadow-sm z-20 print:hidden justify-between",children:[s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx("div",{className:"relative",children:s.jsx("input",{type:"text",value:t,onChange:W=>r(W.target.value),onKeyDown:U,className:"pl-3 pr-4 h-[42px] w-[280px] bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 transition-all placeholder:text-slate-400",placeholder:"   ",autoFocus:!0})}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:n,onChange:W=>i(W.target.value),className:"pl-4 pr-10 h-[42px] w-[140px] bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium focus:outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 cursor-pointer appearance-none",children:[s.jsx("option",{value:"1year",children:" 1"}),s.jsx("option",{value:"all",children:" "})]}),s.jsx("span",{className:"material-symbols-rounded absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",children:"expand_more"})]}),s.jsxs("button",{onClick:G,className:"h-[42px] px-6 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white font-bold text-sm shadow-md shadow-indigo-200 flex items-center gap-2 transition-all active:scale-95",children:[s.jsx("span",{className:"material-symbols-rounded",children:"search"})," "]}),s.jsxs("button",{onClick:X,className:"h-[42px] px-5 rounded-xl bg-white border border-slate-200 text-slate-600 hover:bg-slate-50 font-bold text-sm shadow-sm flex items-center gap-2 transition-all active:scale-95",children:[s.jsx("span",{className:"material-symbols-rounded",children:"refresh"})," "]})]}),l.length>0&&s.jsxs("button",{onClick:te,className:"h-[42px] px-5 rounded-xl bg-sky-50 hover:bg-sky-100 text-sky-600 border border-sky-100 font-bold text-sm flex items-center gap-1.5 transition-all",children:[s.jsx("span",{className:"material-symbols-rounded",children:"auto_awesome"})," "]})]}),c&&s.jsxs("div",{className:"absolute inset-0 z-50 bg-white/60 backdrop-blur-[1px] flex flex-col items-center justify-center",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mb-3"}),s.jsx("div",{className:"text-sm font-bold text-slate-600",children:u})]}),f&&s.jsxs("div",{className:"shrink-0 p-5 bg-gradient-to-r from-sky-50 to-white border-b border-sky-100 relative overflow-hidden print:hidden animate-in slide-in-from-top-2 duration-300",children:[s.jsx("div",{className:"absolute top-[-10px] right-[-10px] opacity-5 pointer-events-none",children:s.jsx("span",{className:"material-symbols-rounded text-[120px]",children:"auto_awesome"})}),s.jsxs("div",{className:"flex items-start gap-3 relative z-10",children:[s.jsx("div",{className:"bg-sky-100 p-2.5 rounded-xl text-sky-600 shadow-sm",children:s.jsx("span",{className:"material-symbols-rounded",children:"psychology_alt"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sky-700 font-bold text-sm mb-1.5 flex items-center gap-1.5",children:"Jenny AI  "}),s.jsx("div",{className:"text-sm text-slate-600 leading-relaxed whitespace-pre-wrap",children:g})]})]})]}),s.jsx("div",{className:"flex-1 overflow-auto bg-white relative stylish-scrollbar print:overflow-visible",children:s.jsxs("table",{className:"w-full text-xs border-collapse table-fixed",children:[s.jsx("thead",{className:"sticky top-0 z-10 bg-white/95 backdrop-blur shadow-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[5%]",children:"No"}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[8%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[6%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[10%]",children:""}),s.jsx("th",{className:"py-3 text-left pl-4 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[12%]",children:" "}),s.jsx("th",{className:"py-3 text-left pl-4 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[10%]",children:""}),s.jsx("th",{className:"py-3 text-left pl-4 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[16%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[8%]",children:""}),s.jsx("th",{className:"py-3 text-center font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[6%]",children:""}),s.jsx("th",{className:"py-3 text-right pr-4 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[10%]",children:""}),s.jsx("th",{className:"py-3 text-left pl-4 font-black text-slate-400 uppercase tracking-wider border-b border-slate-100 bg-slate-50/50 w-[9%]",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:l.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"11",className:"py-20 text-center text-slate-400",children:t?"  .":"     []  ."})}):l.map((W,$)=>{const Q=W.status||"",ne=Q==="",re=W.customer_id&&W.customer_id.length>=10&&W.customer_id.substring(9,10)==="0"?"":"";let K;const ae="px-1.5 py-0.5 rounded text-[10px] font-bold border";ne?K=s.jsx("span",{className:`${ae} bg-red-50 text-red-700 border-red-200 line-through`,children:""}):Q===""?K=s.jsx("span",{className:`${ae} bg-blue-50 text-blue-700 border-blue-200`,children:""}):K=s.jsx("span",{className:`${ae} bg-emerald-50 text-emerald-700 border-emerald-200`,children:Q});const ce=re===""?s.jsx("span",{className:"font-bold text-indigo-500",children:""}):s.jsx("span",{className:"font-bold text-amber-500",children:""});return s.jsxs("tr",{className:`hover:bg-slate-50 transition-colors ${ne?"text-slate-400":""}`,children:[s.jsx("td",{className:"px-3 py-1 text-center text-slate-500",children:$+1}),s.jsx("td",{className:"px-3 py-1 text-center",children:K}),s.jsx("td",{className:"px-3 py-1 text-center text-xs",children:ce}),s.jsx("td",{className:"px-3 py-1 text-center text-slate-600 font-mono text-[11px]",children:W.order_date}),s.jsx("td",{className:"px-3 py-1 text-left",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"font-bold text-slate-700",children:W.customer_name||"-"}),s.jsx("div",{className:"text-[11px] text-slate-500 font-mono -mt-0.5",children:W.customer_mobile||"-"})]})}),s.jsx("td",{className:"px-3 py-1 text-left",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"font-medium text-slate-600 truncate max-w-[80px]",title:W.shipping_name,children:W.shipping_name||"-"}),s.jsx("div",{className:"text-[11px] text-slate-400 font-mono -mt-0.5",children:W.shipping_mobile_number||"-"})]})}),s.jsx("td",{className:"px-3 py-1 font-medium text-slate-700 break-keep",children:W.product_name}),s.jsx("td",{className:"px-3 py-1 text-center text-slate-600",children:W.specification||"-"}),s.jsx("td",{className:"px-3 py-1 text-center font-bold text-slate-700",children:W.quantity.toLocaleString()}),s.jsx("td",{className:"px-3 py-1 text-right font-bold text-slate-800",children:Fe(W.total_amount)}),s.jsx("td",{className:"px-3 py-1 text-slate-400 text-[11px]",children:s.jsx("div",{className:"truncate max-w-[120px]",title:W.memo,children:W.memo||""})})]},$)})}),l.length>0&&s.jsx("tfoot",{className:"bg-slate-50 font-bold border-t border-slate-300 print:table-row-group",children:s.jsxs("tr",{children:[s.jsx("td",{colSpan:"8",className:"px-4 py-3 text-center text-slate-600",children:"  ()"}),s.jsx("td",{className:"px-3 py-3 text-center text-indigo-600 font-black",children:H.qty.toLocaleString()}),s.jsx("td",{className:"px-3 py-3 text-right text-indigo-600 font-black",children:Fe(H.amt)}),s.jsx("td",{})]})})]})}),s.jsxs("div",{className:"shrink-0 p-4 border-t border-slate-100 flex justify-between items-center bg-slate-50 print:hidden",children:[s.jsxs("div",{className:"flex gap-6 text-sm font-bold text-slate-700",children:[s.jsxs("div",{children:[" : ",s.jsx("span",{className:"text-indigo-600",children:l.length})," "]}),s.jsxs("div",{children:[" : ",s.jsx("span",{className:"text-indigo-600",children:H.qty})]}),s.jsxs("div",{children:[" : ",s.jsx("span",{className:"text-indigo-600",children:Fe(H.amt)})," "]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xs text-slate-400 mr-2",children:"*  300 "}),l.length>0&&s.jsxs("button",{onClick:()=>{j(!0),I(null)},className:"h-9 px-4 rounded-xl bg-pink-50 hover:bg-pink-100 text-pink-600 border border-pink-100 font-bold text-xs flex items-center gap-1.5 transition-all",children:[s.jsx("span",{className:"material-symbols-rounded",children:"bar_chart"}),"  "]}),s.jsxs("button",{onClick:()=>T(!0),className:"h-9 px-4 rounded-xl border border-slate-200 bg-white hover:bg-slate-50 text-slate-600 font-bold text-xs flex items-center gap-1.5 shadow-sm transition-all",children:[s.jsx("span",{className:"material-symbols-rounded",children:"print"}),"  "]}),s.jsxs("button",{onClick:B,className:"h-9 px-4 rounded-xl bg-emerald-500 hover:bg-emerald-600 text-white font-bold text-xs shadow-md shadow-emerald-200 flex items-center gap-1.5 transition-all active:scale-95",children:[s.jsx("span",{className:"material-symbols-rounded",children:"download"})," (CSV) "]})]})]})]}),k&&s.jsxs("div",{className:"fixed inset-0 z-[300] bg-slate-900/80 backdrop-blur-md flex items-center justify-center p-4",children:[s.jsxs("div",{className:"fixed top-8 right-8 flex flex-col gap-4 z-[310]",children:[s.jsx("button",{onClick:()=>T(!1),className:"w-14 h-14 bg-white text-slate-400 rounded-2xl shadow-2xl hover:text-rose-500 hover:scale-110 active:scale-95 transition-all flex items-center justify-center group",title:"",children:s.jsx("span",{className:"material-symbols-rounded text-3xl group-hover:rotate-90 transition-transform duration-300",children:"close"})}),s.jsx("div",{className:"h-px bg-white/20 w-full"}),s.jsxs("button",{onClick:J,className:"h-14 px-8 rounded-2xl font-black text-sm bg-indigo-600 text-white shadow-2xl shadow-indigo-500/30 hover:bg-indigo-700 hover:-translate-y-1 active:translate-y-0 transition-all flex items-center gap-3",children:[s.jsx("span",{className:"material-symbols-rounded text-xl",children:"print"})," "]})]}),s.jsx("div",{className:"w-full max-w-[297mm] h-[210mm] max-h-[90vh] bg-white rounded-[1rem] shadow-2xl overflow-y-auto overflow-x-hidden relative custom-scrollbar",children:s.jsx("div",{id:"printable-personal-content",className:"p-[10mm]",children:s.jsx("div",{style:{fontFamily:'"Malgun Gothic", sans-serif',color:"#000",width:"100%"},children:s.jsxs("div",{style:{border:"2px solid #000",padding:"30px",backgroundColor:"#fff"},children:[s.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[s.jsx("h1",{style:{margin:"0",fontSize:"32px",fontWeight:"900",letterSpacing:"0.3em",borderBottom:"5px double #000",display:"inline-block",padding:"0 50px 10px 50px"},children:"    "}),s.jsxs("div",{style:{marginTop:"20px",display:"flex",justifyContent:"space-between",fontSize:"14px",fontWeight:"bold"},children:[s.jsxs("span",{children:[" : ",s.jsx("strong",{children:t})]}),s.jsxs("span",{children:[" : ",new Date().toLocaleString()]})]})]}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"2px solid #000",tableLayout:"fixed"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"35px",fontWeight:"900"},children:"No"}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"60px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"80px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"80px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"100px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"80px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left",paddingLeft:"10px",fontWeight:"900"},children:" / "}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"40px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",width:"80px",fontWeight:"900"},children:""}),s.jsx("th",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left",paddingLeft:"10px",fontWeight:"900"},children:" "})]})}),s.jsx("tbody",{children:l.map((W,$)=>s.jsxs("tr",{style:{backgroundColor:$%2===1?"#fafafa":"#fff"},children:[s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center"},children:$+1}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontWeight:"900"},children:W.status||""}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center"},children:W.order_date.substring(0,10)}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontWeight:"900"},children:W.customer_name||"-"}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center"},children:kn(W.customer_mobile||W.shipping_mobile_number||"")}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center"},children:W.shipping_name||"-"}),s.jsxs("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left"},children:[s.jsx("div",{style:{fontWeight:"900"},children:W.product_name}),s.jsx("div",{style:{fontSize:"8px",color:"#555"},children:W.specification||""})]}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"center",fontWeight:"900"},children:W.quantity.toLocaleString()}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"right",fontWeight:"900"},children:Fe(W.total_amount)}),s.jsx("td",{style:{border:"1px solid #000",padding:"6px 4px",textAlign:"left",fontSize:"9px",color:"#666"},children:W.memo||""})]},$))})]}),s.jsx("div",{style:{marginTop:"30px",display:"flex",justifyContent:"flex-end"},children:s.jsx("table",{style:{width:"400px",border:"2px solid #000",borderCollapse:"collapse"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",width:"45%",fontSize:"11px"},children:"   (Total Orders)"}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 15px",textAlign:"right",fontSize:"14px",fontWeight:"900"},children:[l.length," "]})]}),s.jsxs("tr",{children:[s.jsx("th",{style:{border:"1px solid #000",padding:"8px 5px",textAlign:"center",fontSize:"11px"},children:"   "}),s.jsxs("td",{style:{border:"1px solid #000",padding:"8px 15px",textAlign:"right",fontSize:"14px",fontWeight:"900",color:"#d32f2f"},children:[" ",Fe(l.reduce((W,$)=>W+$.total_amount,0))]})]})]})})}),s.jsx("div",{style:{marginTop:"40px",textAlign:"center",fontSize:"12px",fontWeight:"bold"},children:"       ."}),s.jsx("div",{style:{marginTop:"50px",textAlign:"center",fontSize:"10px",color:"#999",borderTop:"1px solid #eee",paddingTop:"10px"},children:" Mycelium Smart Farm Integration System - All Rights Reserved."})]})})})})]})]})};qi.register(...Sb);const OIe=()=>{const{showAlert:a}=wa(),[e,t]=F.useState([]),[r,n]=F.useState(""),[i,l]=F.useState([]),[o,c]=F.useState([]),[d,u]=F.useState(!1),[h,f]=F.useState(""),[p,g]=F.useState(null),[b,w]=F.useState([]),[j,k]=F.useState(!1),[T,E]=F.useState(null),[I,R]=F.useState(null),P=F.useRef(null),H=F.useRef(null),G=F.useRef(null),X=F.useRef(null);F.useEffect(()=>{const ne=new Date().getFullYear(),re=[];for(let K=0;K<10;K++)re.push(ne-K);return t(re),U(""),()=>{H.current&&H.current.destroy(),X.current&&X.current.destroy()}},[]);const U=async ne=>{u(!0),f(ne===""?"    ...":`${ne}    ...`),l([]),c([]);try{const K=await Ke("get_product_sales_stats",ne===""?{}:{year:ne});if(l(K||[]),J(K||[]),ne!==""){const ae=await Ke("get_profit_margin_analysis",{year:parseInt(ne)});c(ae||[])}}catch(re){console.error(re),a("","  : "+re)}finally{u(!1)}},te=async ne=>{g(ne),k(!0),w([]);try{const re=await Ke("get_product_10yr_sales_stats",{productName:ne});w(re||[]),B(re||[])}catch(re){console.error(re),a("","   ")}finally{k(!1)}},Z=async(ne,re)=>{R(re);try{const K=await Ke("get_product_monthly_analysis",{productName:ne,year:parseInt(re)});E(K||[])}catch(K){console.error(K),a("","   ")}},J=ne=>{if(!P.current)return;H.current&&H.current.destroy();const re=[...ne].sort((K,ae)=>ae.total_amount-K.total_amount).slice(0,10);H.current=new qi(P.current,{type:"bar",data:{labels:re.map(K=>K.product_name),datasets:[{label:"",data:re.map(K=>K.total_amount),backgroundColor:"rgba(99, 102, 241, 0.7)",hoverBackgroundColor:"rgba(99, 102, 241, 0.9)",borderColor:"rgba(99, 102, 241, 1)",borderWidth:1,borderRadius:4}]},options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,layout:{padding:{left:10,right:40,top:10,bottom:10}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:K=>`: ${Fe(K.raw)}`}}},scales:{x:{beginAtZero:!0,grid:{color:"#f1f5f9"},ticks:{font:{size:10},callback:K=>K>=1e8?(K/1e8).toFixed(1)+"":K>=1e4?(K/1e4).toLocaleString()+"":K.toLocaleString()}},y:{grid:{display:!1},ticks:{font:{weight:"bold",size:11},autoSkip:!1}}}}})},B=ne=>{setTimeout(()=>{if(!G.current)return;X.current&&X.current.destroy();const re=[...ne].sort((K,ae)=>K.year-ae.year);X.current=new qi(G.current,{type:"line",data:{labels:re.map(K=>`${K.year}`),datasets:[{label:"",data:re.map(K=>K.total_amount),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",fill:!0,tension:.3}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{right:30,top:10,bottom:10}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:K=>`: ${Fe(K.raw)}`}}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,ticks:{callback:K=>K>=1e8?(K/1e8).toFixed(1)+"":K>=1e4?(K/1e4).toLocaleString()+"":K.toLocaleString()}}}}})},100)},W=ne=>ne>=40?"text-emerald-600":ne<=10?"text-red-600":"text-slate-600",$=ne=>ne>=40?s.jsx("span",{className:"ml-2 px-1.5 py-0.5 rounded text-[10px] font-bold bg-emerald-100 text-emerald-700",children:"High"}):ne<=10?s.jsx("span",{className:"ml-2 px-1.5 py-0.5 rounded text-[10px] font-bold bg-red-100 text-red-700",children:"Low"}):null,Q=ne=>{const re=ne.reduce((ce,de)=>ce+de.record_count,0),K=ne.reduce((ce,de)=>ce+de.total_quantity,0),ae=ne.reduce((ce,de)=>ce+de.total_amount,0);return{count:re,qty:K,amt:ae}};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 pt-6 lg:pt-8 pb-4 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-6 h-1 bg-violet-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-violet-600 uppercase",children:"Sales Analysis"})]}),s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-black text-slate-700 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Product Sales"})]}),s.jsxs("p",{className:"text-slate-400 text-sm mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"inventory_2"}),"     ."]})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-white border border-slate-200 rounded-lg px-3 py-1 shadow-sm",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Year"}),s.jsxs("select",{value:r,onChange:ne=>{n(ne.target.value),U(ne.target.value)},className:"bg-transparent text-sm font-bold text-slate-800 outline-none border-none cursor-pointer",children:[s.jsx("option",{value:"",children:" "}),e.map(ne=>s.jsxs("option",{value:ne,children:[ne,""]},ne))]})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 min-h-0 custom-scrollbar flex flex-col gap-6 relative",children:[d&&s.jsxs("div",{className:"absolute inset-0 z-50 bg-white/70 backdrop-blur-sm flex flex-col items-center justify-center",children:[s.jsx("span",{className:"material-symbols-rounded text-4xl text-violet-500 animate-spin",children:"cyclone"}),s.jsx("div",{className:"mt-4 text-slate-600 font-bold",children:h})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm flex flex-col lg:flex-row min-h-[500px]",children:[s.jsxs("div",{className:"lg:w-[35%] p-6 border-b lg:border-b-0 lg:border-r border-slate-100 flex flex-col min-h-[400px] lg:min-h-0",children:[s.jsxs("h3",{className:"text-slate-700 font-bold mb-4 text-sm flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-violet-500"}),"   (Top 10)"]}),s.jsx("div",{className:"flex-1 relative min-h-0",children:s.jsx("canvas",{ref:P})})]}),s.jsxs("div",{className:"lg:w-2/3 flex flex-col min-h-0",children:[s.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[s.jsx("h3",{className:"font-bold text-slate-700 text-sm",children:"  "}),s.jsx("button",{className:"text-xs text-slate-500 hover:text-indigo-600 underline",onClick:()=>{if(i.length===0){a("","  .");return}const ne=`
                                    <style>
                                        @page { size: A4; margin: 20mm; }
                                        .report-print-wrapper { font-family: 'Pretendard', sans-serif; padding: 20px; color: #000; }
                                        .report-print-wrapper .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #000; padding-bottom: 15px; }
                                        .report-print-wrapper .header h1 { margin: 0; font-size: 24px; font-weight: 900; }
                                        .report-print-wrapper .header p { margin: 5px 0 0; font-weight: bold; font-size: 12px; }
                                        .report-print-wrapper table { width: 100%; border-collapse: collapse; font-size: 12px; }
                                        .report-print-wrapper th, .report-print-wrapper td { border: 1px solid #333; padding: 10px; text-align: center; }
                                        .report-print-wrapper th { background: #f0f0f0; font-weight: bold; }
                                        .report-print-wrapper .text-left { text-align: left; }
                                        .report-print-wrapper .text-right { text-align: right; }
                                    </style>
                                        <div class="report-print-wrapper">
                                            <div class="header">
                                                <h1>  </h1>
                                                <p> : ${r} | : ${new Date().toLocaleString()}</p>
                                            </div>
                                            <table>
                                                <thead>
                                                    <tr>
                                                        <th style="width: 40px;">No</th>
                                                        <th></th>
                                                        <th style="width: 100px;"></th>
                                                        <th style="width: 100px;"></th>
                                                        <th style="width: 150px;"></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    ${i.map((re,K)=>`
                                                        <tr>
                                                            <td>${K+1}</td>
                                                            <td class="text-left" style="font-weight:bold;">${re.product_name}</td>
                                                            <td class="text-right">${Fe(re.record_count)}</td>
                                                            <td class="text-right">${Fe(re.total_quantity)}</td>
                                                            <td class="text-right" style="font-weight:bold;">${Fe(re.total_amount)}</td>
                                                        </tr>
                                                    `).join("")}
                                                </tbody>
                                            </table>
                                            <div style="margin-top:20px; text-align:right; font-size:14px; font-weight:bold;">
                                                 : ${i.length} |  : ${Fe(Q(i).count)} |  : ${Fe(Q(i).amt)}
                                            </div>
                                        </div>
                                `;oo(ne)},children:" "})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-sm text-left whitespace-nowrap",children:[s.jsx("thead",{className:"sticky top-0 bg-white z-10 shadow-sm text-xs uppercase text-slate-400 font-bold",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-3 px-4 w-[30%]",children:""}),s.jsx("th",{className:"py-3 px-4 text-right w-[20%]",children:""}),s.jsx("th",{className:"py-3 px-4 text-right w-[20%]",children:""}),s.jsx("th",{className:"py-3 px-4 text-right w-[30%]",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[i.map((ne,re)=>s.jsxs("tr",{onClick:()=>te(ne.product_name),className:"hover:bg-violet-50 cursor-pointer transition-colors group",children:[s.jsx("td",{className:"py-3 px-4 font-bold text-slate-900 group-hover:text-violet-700",children:ne.product_name}),s.jsx("td",{className:"py-3 px-4 text-right text-black",children:Fe(ne.record_count)}),s.jsx("td",{className:"py-3 px-4 text-right text-black",children:Fe(ne.total_quantity)}),s.jsx("td",{className:"py-3 px-4 text-right font-bold text-slate-900",children:Fe(ne.total_amount)})]},re)),i.length===0&&!d&&s.jsx("tr",{children:s.jsx("td",{colSpan:"4",className:"p-8 text-center text-slate-400",children:" ."})})]})]})}),s.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-6 text-sm font-bold text-slate-700",children:[s.jsxs("div",{children:[" : ",s.jsx("span",{className:"text-indigo-600",children:i.length})]}),s.jsxs("div",{children:[" : ",s.jsx("span",{className:"text-indigo-600",children:Fe(Q(i).count)})]}),s.jsxs("div",{children:[" : ",s.jsx("span",{className:"text-indigo-600",children:Fe(Q(i).amt)})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6",children:[s.jsxs("h3",{className:"text-slate-700 font-bold mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-emerald-500",children:"paid"}),"     ()"]}),r===""?s.jsxs("div",{className:"p-8 text-center bg-slate-50 rounded-xl border border-dashed border-slate-200",children:[s.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-300 mb-2",children:"dvr"}),s.jsxs("p",{className:"text-slate-500 text-sm",children:["  ",s.jsx("b",{children:" "}),"   ."]})]}):s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"w-full text-sm text-left whitespace-nowrap",children:[s.jsx("thead",{className:"bg-emerald-50/50 text-xs uppercase text-emerald-800 font-bold border-b border-emerald-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-3 px-4",children:""}),s.jsx("th",{className:"py-3 px-4 text-right",children:""}),s.jsx("th",{className:"py-3 px-4 text-right",children:"()"}),s.jsx("th",{className:"py-3 px-4 text-right",children:""}),s.jsx("th",{className:"py-3 px-4 text-right",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:o.map((ne,re)=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"py-3 px-4 font-bold text-slate-900",children:ne.product_name}),s.jsx("td",{className:"py-3 px-4 text-right text-black",children:Fe(ne.total_revenue)}),s.jsx("td",{className:"py-3 px-4 text-right text-black",children:Fe(ne.total_cost)}),s.jsx("td",{className:"py-3 px-4 text-right font-bold text-slate-900",children:Fe(ne.net_profit)}),s.jsxs("td",{className:"py-3 px-4 text-right font-mono font-bold",children:[s.jsxs("span",{className:W(ne.margin_rate),children:[ne.margin_rate.toFixed(1),"%"]}),$(ne.margin_rate)]})]},re))})]}),s.jsx("p",{className:"mt-2 text-xs text-right text-slate-400",children:"*  [ ]   ."})]})]})]}),p&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-black text-slate-800",children:p}),s.jsx("p",{className:"text-sm text-slate-500",children:" 10   "})]}),s.jsx("button",{onClick:()=>g(null),className:"p-2 rounded-full hover:bg-slate-200 text-slate-400 hover:text-slate-600 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 min-h-0 custom-scrollbar relative",children:[j&&s.jsx("div",{className:"absolute inset-0 z-10 bg-white/80 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded animate-spin text-4xl text-emerald-500",children:"sync"})}),s.jsx("div",{className:"h-64 mb-6 relative",children:s.jsx("canvas",{ref:G})}),s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 text-xs uppercase text-slate-500 font-bold border-y border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-3 px-4",children:""}),s.jsx("th",{className:"py-3 px-4 text-right",children:""}),s.jsx("th",{className:"py-3 px-4 text-right",children:""}),s.jsx("th",{className:"py-3 px-4 text-right",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:b.map((ne,re)=>s.jsxs("tr",{onClick:()=>Z(p,ne.year),className:"hover:bg-slate-50 cursor-pointer transition-colors",children:[s.jsxs("td",{className:"py-3 px-4 font-bold text-slate-900",children:[ne.year,""]}),s.jsx("td",{className:"py-3 px-4 text-right text-black",children:Fe(ne.record_count)}),s.jsx("td",{className:"py-3 px-4 text-right text-black",children:Fe(ne.total_quantity)}),s.jsx("td",{className:"py-3 px-4 text-right font-bold text-slate-900",children:Fe(ne.total_amount)})]},re))})]})]}),s.jsx("div",{className:"p-4 border-t border-slate-100 bg-slate-50 flex justify-end",children:s.jsx("button",{onClick:()=>g(null),className:"px-5 py-2 bg-white border border-slate-200 shadow-sm rounded-lg text-sm font-bold text-slate-600 hover:bg-slate-100",children:""})})]})}),T&&s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/20 backdrop-blur-[1px] animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg shadow-2xl overflow-hidden border border-slate-200",children:[s.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-violet-50",children:[s.jsxs("h4",{className:"font-bold text-violet-900",children:[I,"  "]}),s.jsx("button",{onClick:()=>E(null),className:"text-violet-400 hover:text-violet-700",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-white sticky top-0 border-b border-slate-200 text-xs font-bold text-slate-500",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-2 px-4",children:""}),s.jsx("th",{className:"py-2 px-4 text-right",children:""}),s.jsx("th",{className:"py-2 px-4 text-right",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[T.map((ne,re)=>s.jsxs("tr",{children:[s.jsxs("td",{className:"py-2 px-4 font-bold text-slate-900",children:[ne.month,""]}),s.jsx("td",{className:"py-2 px-4 text-right text-black",children:Fe(ne.total_quantity)}),s.jsx("td",{className:"py-2 px-4 text-right font-bold text-indigo-700",children:Fe(ne.total_amount)})]},re)),s.jsxs("tr",{className:"bg-slate-50 font-bold border-t border-slate-200",children:[s.jsx("td",{className:"py-2 px-4 text-slate-700",children:""}),s.jsx("td",{className:"py-2 px-4 text-right",children:Fe(T.reduce((ne,re)=>ne+re.total_quantity,0))}),s.jsx("td",{className:"py-2 px-4 text-right",children:Fe(T.reduce((ne,re)=>ne+re.total_amount,0))})]})]})]})})]})})]})},PIe=()=>{const a=an(),{showAlert:e,showConfirm:t}=wa(),{isAuthorized:r,checkAdmin:n,isVerifying:i}=ps(),[l,o]=F.useState([]),[c,d]=F.useState(!1),[u,h]=F.useState({program_id:null,program_name:"",description:"",duration_minutes:60,price_per_person:0,max_participants:10,is_active:!0}),f=F.useRef(null),p=F.useCallback(async()=>{try{const I=await ht("get_experience_programs");o(I)}catch(I){console.error("Failed to load programs:",I)}},[]),g=F.useRef(!1);F.useEffect(()=>{if(g.current)return;g.current=!0,(async()=>await n()||a("/"))()},[]),F.useEffect(()=>{r&&p()},[r,p]);const b=I=>{const{id:R,value:P,type:H,checked:G}=I.target;h(X=>({...X,[R]:H==="checkbox"?G:P}))},w=I=>{const R=I.target.value.replace(/[^0-9]/g,"");h(P=>({...P,price_per_person:parseInt(R||0)}))},j=I=>{h({program_id:I.program_id,program_name:I.program_name,description:I.description||"",duration_minutes:I.duration_min||60,price_per_person:I.price_per_person||0,max_participants:I.max_capacity||10,is_active:I.is_active}),f.current?.focus()},k=()=>{h({program_id:null,program_name:"",description:"",duration_minutes:60,price_per_person:0,max_participants:10,is_active:!0})},T=async I=>{if(I.preventDefault(),!u.program_name){e("  .");return}d(!0);try{const R={program_name:u.program_name,description:u.description||null,duration_min:parseInt(u.duration_minutes||0),price_per_person:parseInt(u.price_per_person||0),max_capacity:parseInt(u.max_participants||0),is_active:u.is_active};u.program_id?(await ht("update_experience_program",{program_id:u.program_id,...R}),e(".")):(await ht("create_experience_program",R),e(".")),k(),p()}catch(R){e(" : "+R)}finally{d(!1)}},E=async I=>{if(await t(" ","  ?         ."))try{await ht("delete_experience_program",{program_id:I}),e("."),p()}catch(R){e(" : "+R)}};return r?s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700 relative text-left",children:[s.jsx("div",{id:"local-modal-root",className:"absolute inset-0 z-[9999] pointer-events-none"}),s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-sky-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-sky-600 uppercase",children:"Experience Configuration System"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Management"})]})]})})}),s.jsx("div",{className:"flex-1 overflow-hidden bg-slate-50 px-6 lg:px-8 py-4 flex flex-col",children:s.jsx("div",{className:"flex-1 overflow-y-auto custom-gray-scrollbar p-1",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 items-start",children:[s.jsx("div",{className:"lg:col-span-5 space-y-6 sticky top-0",children:s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl border border-slate-200/50 overflow-hidden",children:[s.jsxs("div",{className:"px-8 py-6 bg-slate-50/50 border-b border-slate-100 flex items-center justify-between",children:[s.jsxs("h3",{className:"font-black text-slate-800 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-sky-500",children:"edit_note"}),u.program_id?"  ":"  "]}),u.program_id&&s.jsx("button",{onClick:k,className:"text-[10px] font-black text-indigo-600 bg-indigo-50 px-3 py-1.5 rounded-lg hover:bg-indigo-100 transition-all",children:"  "})]}),s.jsxs("form",{onSubmit:T,className:"p-8 space-y-5",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"text-[11px] font-black text-slate-500 uppercase ml-1 block",children:["  ",s.jsx("span",{className:"text-rose-500",children:"*"})]}),s.jsx("input",{ref:f,id:"program_name",value:u.program_name,onChange:b,placeholder:":    ",required:!0,className:"w-full h-12 px-4 rounded-xl border border-slate-200 bg-slate-50/30 font-bold text-slate-800 focus:ring-4 focus:ring-sky-500/10 focus:border-sky-500 outline-none transition-all text-sm"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-500 uppercase ml-1 block",children:"  ()"}),s.jsx("input",{type:"number",id:"duration_minutes",value:u.duration_minutes,onChange:b,className:"w-full h-11 px-4 rounded-xl border border-slate-200 bg-white font-black text-right text-slate-800 focus:ring-4 focus:ring-sky-500/10 focus:border-sky-500 outline-none transition-all text-sm"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-500 uppercase ml-1 block",children:"  ()"}),s.jsx("input",{type:"number",id:"max_participants",value:u.max_participants,onChange:b,className:"w-full h-11 px-4 rounded-xl border border-slate-200 bg-white font-black text-right text-slate-800 focus:ring-4 focus:ring-sky-500/10 focus:border-sky-500 outline-none transition-all text-sm"})]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-500 uppercase ml-1 block",children:"1  "}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 font-black text-slate-400 text-sm",children:""}),s.jsx("input",{type:"text",id:"price_per_person",value:new Intl.NumberFormat("ko-KR").format(u.price_per_person),onChange:w,className:"w-full h-12 pl-10 pr-4 rounded-xl border border-slate-200 bg-white font-black text-right text-indigo-600 focus:ring-4 focus:ring-sky-500/10 focus:border-sky-500 outline-none transition-all text-base shadow-inner"})]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[11px] font-black text-slate-500 uppercase ml-1 block",children:" "}),s.jsx("textarea",{id:"description",value:u.description,onChange:b,rows:"3",placeholder:"    ",className:"w-full p-4 rounded-2xl border border-slate-200 bg-white font-bold text-slate-700 focus:ring-4 focus:ring-sky-500/10 focus:border-sky-500 outline-none transition-all resize-none text-sm"})]}),s.jsx("div",{className:"flex items-center gap-3 pt-2",children:s.jsxs("label",{className:`flex-1 flex items-center justify-center gap-3 h-12 rounded-xl border transition-all cursor-pointer ${u.is_active?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-slate-50 border-slate-200 text-slate-400"}`,children:[s.jsx("input",{type:"checkbox",id:"is_active",checked:u.is_active,onChange:b,className:"w-5 h-5 rounded-md text-emerald-600 border-slate-300 focus:ring-0"}),s.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"   "})]})})]}),s.jsxs("div",{className:"pt-4 flex gap-3",children:[s.jsx("button",{type:"button",onClick:k,className:"h-12 flex-1 bg-white text-slate-500 font-black rounded-xl border border-slate-200 hover:bg-slate-50 transition-all text-xs",children:""}),s.jsxs("button",{type:"submit",disabled:c,className:"h-12 flex-[2] bg-sky-600 text-white font-black rounded-xl hover:bg-sky-500 shadow-xl shadow-sky-100 transition-all flex items-center justify-center gap-2 text-sm",children:[c?s.jsx("div",{className:"w-5 h-5 border-2 border-white/20 border-t-white rounded-full animate-spin"}):s.jsx("span",{className:"material-symbols-rounded",children:"save"}),u.program_id?"  ":" "]})]})]})]})}),s.jsx("div",{className:"lg:col-span-7 space-y-6 h-full",children:s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl border border-slate-200/50 overflow-hidden h-full flex flex-col",children:[s.jsx("div",{className:"px-8 py-6 border-b border-slate-100",children:s.jsxs("h3",{className:"font-black text-slate-800 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-sky-500",children:"list"}),"  "]})}),s.jsx("div",{className:"flex-1 overflow-auto custom-gray-scrollbar",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{className:"sticky top-0 bg-white/95 backdrop-blur-md z-10 border-b border-slate-100",children:s.jsxs("tr",{className:"bg-slate-50/50",children:[s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right",children:" / "}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center",children:""}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:l.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"px-6 py-24 text-center",children:s.jsx("p",{className:"text-slate-300 font-black italic text-sm",children:"  ."})})}):l.map((I,R)=>s.jsxs("tr",{className:"group hover:bg-slate-50/80 transition-all cursor-default",children:[s.jsx("td",{className:"px-6 py-5",children:s.jsxs("span",{className:"text-[10px] font-black text-slate-400",children:["#",(R+1).toString().padStart(2,"0")]})}),s.jsxs("td",{className:"px-6 py-5",children:[s.jsx("div",{className:"font-black text-slate-800 text-sm mb-0.5",children:I.program_name}),s.jsx("div",{className:"text-[10px] font-bold text-slate-400 max-w-xs truncate",children:I.description||"-"})]}),s.jsxs("td",{className:"px-6 py-5 text-right",children:[s.jsxs("div",{className:"font-black text-indigo-700 text-sm",children:["\\",new Intl.NumberFormat("ko-KR").format(I.price_per_person)]}),s.jsxs("div",{className:"text-[10px] font-bold text-slate-400",children:[I.duration_min," / ",I.max_capacity,""]})]}),s.jsx("td",{className:"px-6 py-5 text-center",children:s.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-black border ${I.is_active?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-rose-50 text-rose-600 border-rose-100"}`,children:I.is_active?"":""})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-all",children:[s.jsx("button",{onClick:()=>j(I),className:"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-sky-600 hover:bg-sky-50 rounded-lg transition-all",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"edit_square"})}),s.jsx("button",{onClick:()=>E(I.program_id),className:"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-all",children:s.jsx("span",{className:"material-symbols-rounded text-lg",children:"delete"})})]})})]},I.program_id))})]})})]})})]})})})]}):s.jsx("div",{className:"flex h-full items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center animate-pulse",children:[i?s.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}):s.jsx(Ii,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:i?"  ...":"  ..."})]})})},zIe=()=>{const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState([]),[n,i]=F.useState({program_id:"",reservation_date:new Date().toISOString().split("T")[0],reservation_time:"10:00",participant_count:1,total_amount:0,guest_name:"",guest_contact:"",status:"",payment_status:"",memo:"",customer_id:null}),[l,o]=F.useState(0),[c,d]=F.useState(!1),[u,h]=F.useState(!1),[f,p]=F.useState([]),[g,b]=F.useState(""),w=F.useCallback(async()=>{try{const R=await Ke("get_experience_programs");r(R.filter(P=>P.is_active))}catch(R){console.error("Failed to load programs:",R)}},[]);F.useEffect(()=>{w()},[w]),F.useEffect(()=>{const R=t.find(P=>P.program_id===parseInt(n.program_id));R?(o(R.price_per_person),i(P=>({...P,total_amount:R.price_per_person*P.participant_count}))):(o(0),i(P=>({...P,total_amount:0})))},[n.program_id,n.participant_count,t]);const j=R=>{const{id:P,value:H}=R.target;i(G=>({...G,[P]:H}))},k=async R=>{if(R?.preventDefault(),!!g.trim())try{let P=[];/[0-9]/.test(g)&&(P=await Ke("search_customers_by_mobile",{mobile:g})),P.length===0&&(P=await Ke("search_customers_by_name",{name:g})),p(P)}catch(P){a("  : "+P)}},T=R=>{i(P=>({...P,customer_id:R.customer_id,guest_name:R.customer_name,guest_contact:R.mobile_number||R.phone_number||""})),h(!1),b(""),p([])},E=()=>{i({program_id:"",reservation_date:new Date().toISOString().split("T")[0],reservation_time:"10:00",participant_count:1,total_amount:0,guest_name:"",guest_contact:"",status:"",payment_status:"",memo:"",customer_id:null})},I=async R=>{if(R.preventDefault(),!n.program_id){a(" .");return}d(!0);try{await Ke("create_experience_reservation",{program_id:parseInt(n.program_id),customer_id:n.customer_id,guest_name:n.guest_name,guest_contact:n.guest_contact,reservation_date:n.reservation_date,reservation_time:n.reservation_time,participant_count:parseInt(n.participant_count),total_amount:n.total_amount,status:n.status,payment_status:n.payment_status,memo:n.memo||null}),a(" ."),E()}catch(P){console.error("Reservation error:",P),a("  : "+P)}finally{d(!1)}};return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Experience Management System"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Reservation Entry"})]})]})})}),s.jsx("div",{className:"flex-1 overflow-hidden bg-slate-50 px-6 lg:px-8 py-4 flex flex-col",children:s.jsx("div",{className:"flex-1 overflow-y-auto custom-gray-scrollbar p-1",children:s.jsx("div",{className:"w-full h-full",children:s.jsx("div",{className:"bg-white rounded-[2rem] shadow-xl shadow-slate-200/60 border border-slate-200/50 overflow-hidden",children:s.jsxs("form",{onSubmit:I,children:[s.jsxs("div",{className:"p-8 lg:p-10",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"space-y-5 bg-slate-50/50 p-6 rounded-2xl border border-slate-100",children:[s.jsxs("h3",{className:"text-sm font-black text-indigo-600 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"calendar_today"}),"   "]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"program_id",className:"block text-[11px] font-black text-slate-500 uppercase ml-1 mb-1",children:["  ",s.jsx("span",{className:"text-rose-500",children:"*"})]}),s.jsxs("select",{id:"program_id",value:n.program_id,onChange:j,required:!0,className:"w-full px-4 h-11 bg-white border border-slate-200 rounded-xl font-bold focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all text-sm",children:[s.jsx("option",{value:"",children:" "}),t.map(R=>s.jsxs("option",{value:R.program_id,children:[R.program_name," (\\",new Intl.NumberFormat("ko-KR").format(R.price_per_person),")"]},R.program_id))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"reservation_date",className:"block text-[11px] font-black text-slate-500 uppercase ml-1 mb-1",children:" "}),s.jsx("input",{type:"date",id:"reservation_date",value:n.reservation_date,onChange:j,required:!0,className:"w-full px-4 h-11 bg-white border border-slate-200 rounded-xl font-black focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"reservation_time",className:"block text-[11px] font-black text-slate-500 uppercase ml-1 mb-1",children:" "}),s.jsx("input",{type:"time",id:"reservation_time",value:n.reservation_time,onChange:j,required:!0,className:"w-full px-4 h-11 bg-white border border-slate-200 rounded-xl font-black focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all text-sm"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"participant_count",className:"block text-[11px] font-black text-slate-500 uppercase ml-1 mb-1",children:" "}),s.jsx("input",{type:"number",id:"participant_count",value:n.participant_count,onChange:j,min:"1",required:!0,className:"w-full px-4 h-11 bg-white border border-slate-200 rounded-xl font-black focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all text-right text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[11px] font-black text-indigo-500 uppercase ml-1 mb-1",children:"  "}),s.jsxs("div",{className:"px-4 h-11 flex items-center justify-end bg-indigo-50 border border-indigo-100 rounded-xl text-right font-black text-indigo-700 text-base",children:["\\",new Intl.NumberFormat("ko-KR").format(n.total_amount)]})]})]})]})]})}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"space-y-5 bg-slate-50/50 p-6 rounded-2xl border border-slate-100",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-sm font-black text-indigo-600 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"person"})," "]}),s.jsxs("button",{type:"button",onClick:()=>h(!0),className:"h-7 px-3 rounded-lg bg-slate-900 text-white font-black hover:bg-indigo-600 transition-all flex items-center gap-1.5 text-[10px] shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"search"}),"  "]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"guest_name",className:"block text-[11px] font-black text-slate-500 uppercase ml-1 mb-1",children:[" /  ",s.jsx("span",{className:"text-rose-500",children:"*"})]}),s.jsx("input",{type:"text",id:"guest_name",value:n.guest_name,onChange:j,placeholder:" ",required:!0,className:"w-full px-4 h-11 bg-white border border-slate-200 rounded-xl font-bold focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all text-sm"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"guest_contact",className:"block text-[11px] font-black text-slate-500 uppercase ml-1 mb-1",children:[" ",s.jsx("span",{className:"text-rose-500",children:"*"})]}),s.jsx("input",{type:"text",id:"guest_contact",value:n.guest_contact,onChange:j,placeholder:"010-0000-0000",required:!0,className:"w-full px-4 h-11 bg-white border border-slate-200 rounded-xl font-black focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all text-sm"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"status",className:"block text-[11px] font-black text-slate-500 uppercase ml-1 mb-1",children:" "}),s.jsxs("select",{id:"status",value:n.status,onChange:j,className:"w-full px-4 h-11 bg-white border border-slate-200 rounded-xl font-bold focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all text-xs",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"payment_status",className:"block text-[11px] font-black text-slate-500 uppercase ml-1 mb-1",children:" "}),s.jsxs("select",{id:"payment_status",value:n.payment_status,onChange:j,className:"w-full px-4 h-11 bg-white border border-slate-200 rounded-xl font-bold focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all text-xs",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]})]})]})]})})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("label",{htmlFor:"memo",className:"block text-[11px] font-black text-slate-500 uppercase ml-1 mb-1",children:" / "}),s.jsx("textarea",{id:"memo",value:n.memo,onChange:j,rows:"3",placeholder:"   .",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl font-bold focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all resize-none text-sm"})]})]}),s.jsxs("div",{className:"px-8 py-5 bg-slate-50 border-t border-slate-100 flex items-center justify-end gap-3 rounded-b-[2rem]",children:[s.jsx("button",{type:"button",onClick:E,className:"h-11 px-6 bg-white text-slate-600 font-black rounded-xl border border-slate-200 hover:bg-slate-50 transition-all shadow-sm text-xs",children:""}),s.jsxs("button",{type:"submit",disabled:c,className:"h-11 px-10 bg-indigo-600 text-white font-black rounded-xl hover:bg-indigo-500 shadow-xl shadow-indigo-100 transition-all flex items-center gap-2 disabled:opacity-50 text-sm",children:[c?s.jsx("div",{className:"w-5 h-5 border-2 border-white/20 border-t-white rounded-full animate-spin"}):s.jsx("span",{className:"material-symbols-rounded text-lg",children:"check_circle"}),"  "]})]})]})})})})}),u&&s.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity",onClick:()=>h(!1)}),s.jsxs("div",{className:"relative bg-white w-full max-w-lg rounded-[2rem] shadow-2xl border border-white/20 overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[s.jsxs("h3",{className:"font-black text-lg text-slate-800 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"person_search"})," "]}),s.jsx("button",{onClick:()=>h(!1),className:"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-600 hover:bg-slate-200 rounded-full transition-all",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("form",{onSubmit:k,className:"flex gap-2 mb-6",children:[s.jsx("div",{className:"relative flex-1 group",children:s.jsx("input",{type:"text",autoFocus:!0,placeholder:"     ",value:g,onChange:R=>b(R.target.value),className:"w-full px-4 h-12 bg-slate-50 border border-slate-200 rounded-xl font-black focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all text-sm"})}),s.jsx("button",{className:"h-12 px-6 bg-slate-900 text-white font-black rounded-xl hover:bg-indigo-600 transition-all shadow-lg shadow-slate-200 text-sm",children:""})]}),s.jsx("div",{className:"max-h-[350px] overflow-y-auto space-y-2 pr-1 custom-gray-scrollbar",children:f.length===0?s.jsx("div",{className:"text-center py-12 text-slate-300 font-bold italic text-sm",children:"  ."}):f.map(R=>s.jsxs("button",{onClick:()=>T(R),className:"w-full p-4 flex items-center justify-between hover:bg-indigo-50 border border-slate-50 hover:border-indigo-100 rounded-2xl transition-all text-left group",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-black text-slate-900 group-hover:text-indigo-700",children:R.customer_name}),s.jsx("div",{className:"text-[11px] font-black text-slate-400 mt-0.5",children:kn(R.mobile_number||R.phone_number)})]}),s.jsx("span",{className:"material-symbols-rounded text-indigo-200 group-hover:text-indigo-500 group-hover:translate-x-1 transition-all",children:"chevron_right"})]},R.customer_id))})]})]})]})]})},BIe=()=>{const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState([]),[n,i]=F.useState(!0),[l,o]=F.useState({startDate:new Date(new Date().setDate(new Date().getDate()-30)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],keyword:""}),[c,d]=F.useState([]),[u,h]=F.useState(null),f=F.useCallback(async()=>{try{const J=await Ke("get_experience_programs");d(J)}catch(J){console.error("Failed to load programs:",J)}},[]);F.useEffect(()=>{f()},[f]);const p=F.useCallback(async()=>{i(!0);try{const B=(await Ke("get_experience_reservations",{startDate:l.startDate||null,endDate:l.endDate||null})).filter(W=>(W.guest_name||"").includes(l.keyword)||(W.guest_contact||"").includes(l.keyword)||(W.program_name||"").includes(l.keyword));r(B),b([])}catch(J){console.error("Load error:",J),a("   .")}finally{i(!1)}},[l,a]),[g,b]=F.useState([]),w=J=>{J.target.checked?b(t.map(B=>B.reservation_id)):b([])},j=J=>{b(B=>B.includes(J)?B.filter(W=>W!==J):[...B,J])},k=async J=>{if(g.length===0)return;let B="",W="",$=!1,Q=!1;switch(J){case"status_confirmed":B=` ${g.length} [] ?`,W="";break;case"payment_paid":B=` ${g.length} [] ?`,$=!0;break;case"status_completed":B=` ${g.length} [] ?`,W="";break;case"status_canceled":B=` ${g.length} [] ?
(    [] )`,W="";break;case"delete":B=` ${g.length}  ?`,Q=!0;break;default:return}if(await e(" ",B))try{for(const ne of g)if(Q)await Ke("delete_experience_reservation",{reservation_id:ne});else if($)await Ke("update_experience_payment_status",{reservation_id:ne,payment_status:""});else if(await Ke("update_experience_status",{reservation_id:ne,status:W,append_memo:null}),W===""){const re=t.find(K=>K.reservation_id===ne);re&&re.payment_status===""&&await Ke("update_experience_payment_status",{reservation_id:ne,payment_status:""})}a(" ","   ."),b([]),p()}catch(ne){a("  : "+ne)}},T=async(J,B)=>{if(!J)return;const W=t.find($=>$.reservation_id===J);if(W){if(B===""){if(W.status===""){a(" ",`[${W.guest_name}]       .`);return}W.payment_status===""&&await e("   ",`[${W.guest_name}]    .
  [] ?`)&&await Ke("update_experience_payment_status",{reservation_id:J,payment_status:""})}if(B===""){if(W.payment_status!==""){a(" ",`[${W.guest_name}]        .
   .`);return}if(W.status!==""){a(" ",`[${W.guest_name}] ''  .
   .`);return}}if(!(B===""&&W.status===""&&!await e("","   ?")))try{await Ke("update_experience_status",{reservation_id:J,status:B,append_memo:null}),a("",`[${B}]  .`),p()}catch($){a("","  : "+$)}}},E=async(J,B)=>{if(J)try{await Ke("update_experience_payment_status",{reservation_id:J,payment_status:B}),a("",`[${B}] .`),p()}catch(W){a("","  : "+W)}},I=async J=>{let B=[];if(J&&typeof J=="string")B=[J];else if(g.length>0)B=g;else return;if(await e(" ",` ${B.length}   ?`))try{for(const W of B)await Ke("delete_experience_reservation",{reservation_id:W});a(" ","."),b([]),p()}catch(W){a(""," : "+W)}},R=()=>{if(t.length===0){a("","  .");return}const J=["","","","","","","","","",""],B=t.map(ne=>[ne.reservation_date,ne.reservation_time,ne.program_name,ne.guest_name,ne.guest_contact,ne.participant_count,ne.total_amount,ne.status,ne.payment_status,(ne.memo||"").replace(/,/g," ")]),W="\uFEFF"+[J.join(","),...B.map(ne=>ne.join(","))].join(`
`),$=new Blob([W],{type:"text/csv;charset=utf-8;"}),Q=document.createElement("a");Q.href=URL.createObjectURL($),Q.download=`_${new Date().toISOString().slice(0,10)}.csv`,Q.click()},P=()=>{if(t.length===0){a("","  .");return}`${l.startDate}${l.endDate}`;const J=`
            <style>
                @page { size: A4 landscape; margin: 15mm; }
                .report-print-wrapper { font-family: 'Malgun Gothic', sans-serif; padding: 20px; }
                .report-print-wrapper .header { text-align: center; margin-bottom: 30px; }
                .report-print-wrapper .header h1 { margin: 0; font-size: 24px; }
                .report-print-wrapper .header p { margin: 5px 0 0; color: #666; font-size: 12px; }
                .report-print-wrapper table { width: 100%; border-collapse: collapse; font-size: 11px; }
                .report-print-wrapper th, .report-print-wrapper td { border: 1px solid #ccc; padding: 6px; text-align: center; }
                .report-print-wrapper th { background: #f0f0f0; font-weight: bold; }
                .report-print-wrapper .text-left { text-align: left; }
                .report-print-wrapper .text-right { text-align: right; }
            </style>
            <div class="report-print-wrapper">
                <div class="header">
                    <h1>  </h1>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 12px; color: #333;">
                    <span style="font-weight: bold;"> : ${l.startDate} ~ ${l.endDate}</span>
                    <span style="color: #888;"> : ${new Date().toLocaleString()}</span>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th style="width: 40px;">No</th>
                            <th style="width: 80px;"></th>
                            <th style="width: 60px;"></th>
                            <th></th>
                            <th style="width: 80px;"></th>
                            <th style="width: 100px;"></th>
                            <th style="width: 50px;"></th>
                            <th style="width: 80px;"></th>
                            <th style="width: 60px;"></th>
                            <th style="width: 60px;"></th>
                        </tr>
                    </thead>
                    <tbody>
                        ${t.map((B,W)=>`
                            <tr>
                                <td>${W+1}</td>
                                <td>${B.reservation_date}</td>
                                <td>${B.reservation_time}</td>
                                <td class="text-left">${B.program_name}</td>
                                <td>${B.guest_name}</td>
                                <td>${B.guest_contact}</td>
                                <td>${B.participant_count}</td>
                                <td class="text-right">${Z(B.total_amount)}</td>
                                <td>${B.status}</td>
                                <td>${B.payment_status}</td>
                            </tr>
                        `).join("")}
                    </tbody>
                </table>
            </div>
        `;oo(J)};F.useEffect(()=>{p()},[p]);const H=J=>{const{id:B,value:W}=J.target;o($=>({...$,[B]:W}))},G=async J=>{J.preventDefault();try{await Ke("update_experience_reservation",{reservation_id:u.reservation_id,program_id:parseInt(u.program_id),customer_id:u.customer_id,guest_name:u.guest_name,guest_contact:u.guest_contact,reservation_date:u.reservation_date,reservation_time:u.reservation_time.substring(0,5),participant_count:parseInt(u.participant_count),total_amount:parseInt(u.total_amount),status:u.status,payment_status:u.payment_status,memo:u.memo}),a("  ."),h(null),p()}catch(B){a(" : "+B)}},X=J=>{const{id:B,name:W,value:$}=J.target,Q=W||B;h(ne=>{const re={...ne,[Q]:$};if(Q==="program_id"||Q==="participant_count"){const K=parseInt(Q==="program_id"?$:ne.program_id),ae=parseInt(Q==="participant_count"?$:ne.participant_count),ce=c.find(de=>de.program_id===K);ce&&(re.total_amount=ce.price_per_person*(ae||0),B==="program_id"&&(re.program_name=ce.program_name))}return re})},U=J=>{switch(J){case"":return"bg-sky-50 text-sky-600 border-sky-200";case"":return"bg-emerald-50 text-emerald-600 border-emerald-200";case"":return"bg-rose-50 text-rose-600 border-rose-200";default:return"bg-slate-50 text-slate-500 border-slate-200"}},te=J=>{switch(J){case"":return"bg-indigo-50 text-indigo-600 border-indigo-200";case"":return"bg-amber-50 text-amber-600 border-amber-200";default:return"bg-slate-50 text-slate-500 border-slate-200"}},Z=J=>new Intl.NumberFormat("ko-KR").format(J);return s.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsxs("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1",children:[s.jsxs("div",{className:"flex justify-between items-end mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-amber-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-amber-600 uppercase",children:"Experience Tracking System"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["   ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Inquiry"})]})]}),s.jsxs("div",{className:"flex gap-2 pb-1",children:[s.jsxs("button",{onClick:R,className:"h-10 px-5 bg-white text-slate-600 font-bold rounded-xl border border-slate-200 hover:border-indigo-500 hover:text-indigo-600 transition-all flex items-center gap-2 shadow-sm text-xs",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"download"})," CSV "]}),s.jsxs("button",{onClick:P,className:"h-10 px-5 bg-white text-slate-600 font-bold rounded-xl border border-slate-200 hover:border-indigo-500 hover:text-indigo-600 transition-all flex items-center gap-2 shadow-sm text-xs",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"print"}),"  "]}),s.jsxs("button",{onClick:p,className:"h-10 px-5 bg-slate-900 text-white font-black rounded-xl hover:bg-slate-800 transition-all flex items-center gap-2 shadow-lg shadow-slate-200 text-xs",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"refresh"})," "]})]})]}),s.jsx("div",{className:"w-full mt-4",children:s.jsx("div",{className:"bg-white p-4 lg:p-5 rounded-[1.5rem] shadow-sm border border-slate-200/60 transition-all hover:shadow-md w-full",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-end w-full",children:[s.jsxs("div",{className:"space-y-1.5 flex-shrink-0",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 block",children:"  "}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{type:"date",id:"startDate",name:"startDate",value:l.startDate,onChange:H,className:"w-40 h-10 px-3 bg-slate-50 border border-slate-200 rounded-xl font-black text-xs text-slate-800 focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all"}),s.jsx("span",{className:"text-slate-300 font-black",children:"~"}),s.jsx("input",{type:"date",id:"endDate",name:"endDate",value:l.endDate,onChange:H,className:"w-40 h-10 px-3 bg-slate-50 border border-slate-200 rounded-xl font-black text-xs text-slate-800 focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all"})]})]}),s.jsxs("div",{className:"flex-1 space-y-1.5 w-full flex gap-2 items-end",children:[s.jsxs("div",{className:"flex-1 max-w-md",children:[s.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 block",children:" /  "}),s.jsx("div",{className:"relative group",children:s.jsx("input",{type:"text",id:"keyword",value:l.keyword,onChange:H,placeholder:"   ",className:"w-full h-10 px-4 bg-slate-50 border border-slate-200 rounded-xl font-bold text-xs focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all"})})]}),s.jsxs("button",{onClick:p,className:"h-10 px-6 bg-amber-600 text-white font-black rounded-xl hover:bg-amber-500 transition-all flex items-center justify-center gap-2 shadow-lg shadow-amber-100 text-xs whitespace-nowrap",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"manage_search"})," "]})]})]})})})]}),s.jsxs("div",{className:"flex-1 overflow-hidden bg-slate-50 px-6 lg:px-8 min-[2000px]:px-12 pt-2 pb-6 lg:pb-8 flex flex-col gap-3",children:[g.length>0&&s.jsxs("div",{className:"bg-slate-800 text-white p-3 rounded-xl flex items-center justify-between shadow-lg animate-in slide-in-from-top-2 duration-300",children:[s.jsxs("div",{className:"flex items-center gap-3 px-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-white/20 flex items-center justify-center text-xs font-black",children:g.length}),s.jsx("span",{className:"text-sm font-bold",children:"  ."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>{const J=t.find(B=>B.reservation_id===g[0]);J&&h(J)},disabled:g.length!==1||["",""].includes(t.find(J=>J.reservation_id===g[0])?.status),className:"px-3 py-1.5 bg-indigo-50/80 hover:bg-indigo-100 text-indigo-600 disabled:bg-slate-700 disabled:text-slate-500 disabled:cursor-not-allowed rounded-lg text-xs font-black transition-all flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-sm",children:"edit"}),"  "]}),s.jsx("div",{className:"w-px h-4 bg-white/20 mx-1"}),s.jsx("button",{onClick:()=>k("status_confirmed"),disabled:t.filter(J=>g.includes(J.reservation_id)).some(J=>J.status!==""),className:"px-3 py-1.5 bg-sky-500/80 hover:bg-sky-500 disabled:bg-slate-700 disabled:text-slate-500 disabled:cursor-not-allowed rounded-lg text-xs font-black transition-all",children:""}),s.jsx("button",{onClick:()=>k("payment_paid"),disabled:t.filter(J=>g.includes(J.reservation_id)).every(J=>J.payment_status==="")||t.filter(J=>g.includes(J.reservation_id)).some(J=>J.status===""),className:"px-3 py-1.5 bg-indigo-500/80 hover:bg-indigo-500 disabled:bg-slate-700 disabled:text-slate-500 disabled:cursor-not-allowed rounded-lg text-xs font-black transition-all",children:" "}),s.jsx("button",{onClick:()=>k("status_completed"),disabled:t.filter(J=>g.includes(J.reservation_id)).some(J=>J.status!==""||J.payment_status!==""),className:"px-3 py-1.5 bg-emerald-500/80 hover:bg-emerald-500 disabled:bg-slate-700 disabled:text-slate-500 disabled:cursor-not-allowed rounded-lg text-xs font-black transition-all",children:" "}),s.jsx("button",{onClick:()=>k("status_canceled"),disabled:t.filter(J=>g.includes(J.reservation_id)).some(J=>J.status==="")||t.filter(J=>g.includes(J.reservation_id)).every(J=>J.status===""),className:"px-3 py-1.5 bg-rose-500/80 hover:bg-rose-500 disabled:bg-slate-700 disabled:text-slate-500 disabled:cursor-not-allowed rounded-lg text-xs font-black transition-all",children:" "}),s.jsx("div",{className:"w-px h-4 bg-white/20 mx-1"}),s.jsx("button",{onClick:()=>k("delete"),className:"px-3 py-1.5 bg-slate-600 hover:bg-slate-500 rounded-lg text-xs font-black transition-all",children:" "})]})]}),s.jsxs("div",{className:"flex-1 bg-white rounded-[1.5rem] shadow-xl border border-slate-200 overflow-hidden flex flex-col relative",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-amber-500 to-orange-500"}),s.jsx("div",{className:"overflow-auto flex-1 custom-gray-scrollbar",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{className:"sticky top-0 bg-white/95 backdrop-blur-md z-10 border-b border-slate-100",children:s.jsxs("tr",{className:"bg-slate-50/50",children:[s.jsx("th",{className:"px-6 py-4 w-[50px] text-center",children:s.jsx("input",{type:"checkbox",onChange:w,checked:t.length>0&&g.length===t.length,className:"w-4 h-4 rounded border-slate-300 text-amber-600 focus:ring-amber-500 cursor-pointer"})}),s.jsx("th",{className:"px-2 py-4 w-[120px] text-[10px] font-black text-slate-400 uppercase tracking-widest whitespace-nowrap",children:" "}),s.jsx("th",{className:"px-6 py-4 w-auto text-[10px] font-black text-slate-400 uppercase tracking-widest text-left",children:""}),s.jsx("th",{className:"px-6 py-4 w-[15%] text-[10px] font-black text-slate-400 uppercase tracking-widest text-left",children:" / "}),s.jsx("th",{className:"px-6 py-4 w-[12%] text-[10px] font-black text-slate-400 uppercase tracking-widest text-right",children:" ()"}),s.jsx("th",{className:"px-6 py-4 w-[100px] text-[10px] font-black text-slate-400 uppercase tracking-widest text-center",children:" "}),s.jsx("th",{className:"px-6 py-4 w-[100px] text-[10px] font-black text-slate-400 uppercase tracking-widest text-center",children:" "})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50",children:n?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"px-6 py-24 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-amber-500/20 border-t-amber-500 rounded-full animate-spin"}),s.jsx("p",{className:"text-slate-300 font-black italic text-sm",children:"  ..."})]})})}):t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"px-6 py-24 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-slate-200 text-5xl",children:"folder_off"}),s.jsx("p",{className:"text-slate-300 font-black italic text-sm",children:"   ."})]})})}):t.map(J=>s.jsxs("tr",{className:`group hover: bg - slate - 50 / 80 transition - all ${g.includes(J.reservation_id)?"bg-amber-50/30":""} `,children:[s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"checkbox",checked:g.includes(J.reservation_id),onChange:()=>j(J.reservation_id),className:"w-4 h-4 rounded border-slate-300 text-amber-600 focus:ring-amber-500 cursor-pointer"})}),s.jsx("td",{className:"px-2 py-4",children:s.jsxs("div",{className:"flex items-center gap-2 font-black text-slate-800 text-sm whitespace-nowrap",children:[J.reservation_date,s.jsx("span",{className:"bg-slate-100 text-slate-500 font-bold px-1.5 py-0.5 rounded text-[10px]",children:J.reservation_time})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"font-black text-indigo-700 bg-indigo-50 px-2 py-1 rounded-lg text-xs border border-indigo-100/50",children:J.program_name})}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("div",{className:"font-black text-slate-800 text-sm",children:J.guest_name}),s.jsx("div",{className:"text-[11px] font-black text-slate-400 mt-0.5",children:kn(J.guest_contact)})]}),s.jsxs("td",{className:"px-6 py-4 text-right",children:[s.jsx("div",{className:"text-sm font-black text-slate-800",children:Z(J.total_amount)}),s.jsxs("div",{className:"text-[10px] font-bold text-slate-400",children:[J.participant_count,""]})]}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:`text-[9px] font-black px-2.5 py-1.5 rounded-full border shadow-sm inline-block min-w-[60px] text-center ${U(J.status)}`,children:J.status})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:`text-[9px] font-black px-2.5 py-1.5 rounded-full border shadow-sm inline-block min-w-[60px] text-center ${te(J.payment_status)}`,children:J.payment_status})})]},J.reservation_id))})]})})]}),s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-5 px-2 overflow-x-auto",children:[s.jsx("span",{className:"text-sm font-black text-slate-400 mr-2 flex-shrink-0",children:"  :"}),s.jsxs("div",{className:"flex items-center gap-2 opacity-60 grayscale",children:[s.jsx("span",{className:"w-9 h-9 rounded-full bg-slate-200 text-slate-600 font-black flex items-center justify-center text-sm shadow-sm",children:"1"}),s.jsx("span",{className:"text-sm font-black text-slate-600",children:" ()"})]}),s.jsx("span",{className:"material-symbols-rounded text-slate-300",children:"arrow_forward"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-9 h-9 rounded-full bg-sky-100 text-sky-600 font-black flex items-center justify-center text-sm shadow-sm border border-sky-200",children:"2"}),s.jsx("span",{className:"text-sm font-black text-sky-700",children:" "})]}),s.jsx("span",{className:"material-symbols-rounded text-slate-300",children:"arrow_forward"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-9 h-9 rounded-full bg-indigo-100 text-indigo-600 font-black flex items-center justify-center text-sm shadow-sm border border-indigo-200",children:"3"}),s.jsx("span",{className:"text-sm font-black text-indigo-700",children:" "})]}),s.jsx("span",{className:"material-symbols-rounded text-slate-300",children:"arrow_forward"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-9 h-9 rounded-full bg-emerald-100 text-emerald-600 font-black flex items-center justify-center text-sm shadow-sm border border-emerald-200",children:"4"}),s.jsx("span",{className:"text-sm font-black text-emerald-700",children:" "})]}),s.jsxs("div",{className:"ml-auto flex items-center gap-2 bg-slate-100 border border-slate-200 text-slate-500 px-4 py-2 rounded-xl text-xs font-black shadow-sm",children:[s.jsx("span",{className:"material-symbols-rounded text-base text-amber-500",children:"lightbulb"}),s.jsxs("span",{children:[" ",s.jsx("span",{className:"text-slate-700",children:" "}),"  ",s.jsx("span",{className:"text-indigo-600",children:"  "})," ."]})]})]}),s.jsx("div",{className:"flex items-center bg-slate-100 p-6 rounded-[1.5rem] shadow-md border border-slate-300 w-full",children:s.jsxs("div",{className:"flex gap-10 px-4 w-full justify-around",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"  "}),s.jsxs("span",{className:"text-2xl font-black text-slate-700",children:[t.length," ",s.jsx("span",{className:"text-base text-slate-400 font-bold",children:""})]})]}),s.jsx("div",{className:"w-px h-12 bg-slate-200"}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"  "}),s.jsxs("span",{className:"text-2xl font-black text-indigo-600",children:[t.reduce((J,B)=>J+(B.participant_count||0),0)," ",s.jsx("span",{className:"text-base text-indigo-300 font-bold",children:""})]})]}),s.jsx("div",{className:"w-px h-12 bg-slate-200"}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" "}),s.jsx("span",{className:"text-2xl font-black text-slate-700",children:Z(t.reduce((J,B)=>J+(B.total_amount||0),0))})]})]})})]})]}),u&&s.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>h(null)}),s.jsxs("div",{className:"relative bg-white w-full max-w-xl rounded-[2rem] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[s.jsxs("h3",{className:"font-black text-lg text-slate-800 flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-indigo-500",children:"edit_square"}),"  "]}),s.jsx("button",{onClick:()=>h(null),className:"w-8 h-8 flex items-center justify-center text-slate-400 hover:bg-slate-200 rounded-full transition-all",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:"p-8",children:s.jsxs("form",{onSubmit:G,children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-bold text-slate-400 text-xs uppercase tracking-wider border-b border-slate-100 pb-2 mb-4",children:"  "}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"edit_program_id",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" "}),s.jsx("select",{id:"edit_program_id",name:"program_id",value:u.program_id,onChange:X,className:"w-full h-10 px-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-sm outline-none focus:border-indigo-500",children:c.map(J=>s.jsxs("option",{value:J.program_id,children:[J.program_name," (",Z(J.price_per_person),")"]},J.program_id))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"edit_reservation_date",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" "}),s.jsx("input",{type:"date",id:"edit_reservation_date",name:"reservation_date",value:u.reservation_date,onChange:X,className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-xl font-bold text-sm outline-none focus:border-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"edit_reservation_time",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" "}),s.jsx("input",{type:"time",id:"edit_reservation_time",name:"reservation_time",value:u.reservation_time,onChange:X,className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-xl font-bold text-sm outline-none focus:border-indigo-500"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"edit_participant_count",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" "}),s.jsx("input",{type:"number",id:"edit_participant_count",name:"participant_count",value:u.participant_count,onChange:X,className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-xl font-bold text-sm text-right outline-none focus:border-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" "}),s.jsx("input",{type:"text",value:Z(u.total_amount),disabled:!0,className:"w-full h-10 px-3 bg-indigo-50 border border-indigo-100 rounded-xl font-black text-sm text-right text-indigo-700"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-bold text-slate-400 text-xs uppercase tracking-wider border-b border-slate-100 pb-2 mb-4",children:"   "}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"edit_guest_name",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" "}),s.jsx("input",{type:"text",id:"edit_guest_name",name:"guest_name",value:u.guest_name,onChange:X,className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-xl font-bold text-sm outline-none focus:border-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"edit_guest_contact",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:""}),s.jsx("input",{type:"text",id:"edit_guest_contact",name:"guest_contact",value:u.guest_contact,onChange:X,className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-xl font-bold text-sm outline-none focus:border-indigo-500"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"edit_status",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" "}),s.jsxs("select",{id:"edit_status",name:"status",value:u.status,onChange:X,className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-xl font-bold text-xs outline-none focus:border-indigo-500",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"edit_payment_status",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" "}),s.jsxs("select",{id:"edit_payment_status",name:"payment_status",value:u.payment_status,onChange:X,className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-xl font-bold text-xs outline-none focus:border-indigo-500",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]})]})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{htmlFor:"edit_memo",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:" / "}),s.jsx("textarea",{id:"edit_memo",name:"memo",rows:"3",value:u.memo||"",onChange:X,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-xs outline-none focus:border-indigo-500 resize-none"})]}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-100 overflow-x-auto pb-2",children:[s.jsx("h4",{className:"font-bold text-slate-400 text-xs uppercase tracking-wider mb-3",children:"   (Quick Action)"}),s.jsxs("div",{className:"flex gap-2",children:[u.status!==""&&u.status!==""&&u.status!==""&&s.jsxs("button",{type:"button",onClick:()=>{T(u.reservation_id,""),h(null)},className:"h-10 px-4 bg-sky-50 text-sky-600 font-bold rounded-lg hover:bg-sky-100 transition-all text-xs whitespace-nowrap flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"check_circle"}),"  "]}),u.payment_status!==""&&u.status!==""&&s.jsxs("button",{type:"button",onClick:()=>{E(u.reservation_id,""),h(null)},className:"h-10 px-4 bg-indigo-50 text-indigo-600 font-bold rounded-lg hover:bg-indigo-100 transition-all text-xs whitespace-nowrap flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"credit_card"}),"   "]}),u.status!==""&&u.status!==""&&s.jsxs("button",{type:"button",onClick:()=>{T(u.reservation_id,""),h(null)},className:"h-10 px-4 bg-orange-50 text-orange-600 font-bold rounded-lg hover:bg-orange-100 transition-all text-xs whitespace-nowrap flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"cancel"}),"  "]}),s.jsxs("button",{type:"button",onClick:()=>{I(u.reservation_id),h(null)},className:"h-10 px-4 bg-rose-50 text-rose-600 font-bold rounded-lg hover:bg-rose-100 transition-all text-xs whitespace-nowrap flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"delete"}),"  "]}),u.status===""&&u.payment_status===""&&s.jsxs("button",{type:"button",onClick:()=>{T(u.reservation_id,""),h(null)},className:"h-10 px-4 bg-emerald-50 text-emerald-600 font-bold rounded-lg hover:bg-emerald-100 transition-all text-xs whitespace-nowrap flex items-center gap-1",children:[s.jsx("span",{className:"material-symbols-rounded text-base",children:"task_alt"}),"   "]})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end gap-3 pt-6 border-t border-slate-100",children:[s.jsx("button",{type:"button",onClick:()=>h(null),className:"px-6 py-3 bg-white text-slate-500 font-black rounded-xl border border-slate-200 hover:bg-slate-50 transition-all text-sm",children:""}),s.jsxs("button",{type:"submit",className:"px-10 py-3 bg-indigo-600 text-white font-black rounded-xl hover:bg-indigo-500 transition-all shadow-lg text-sm flex items-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded",children:"save"}),"   ()"]})]})]})})]})]})]})};var a2={exports:{}},FIe=a2.exports,UV;function VIe(){return UV||(UV=1,(function(a,e){(function(t,r){a.exports=r(LH())})(FIe,(function(t){function r(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var n=r(t),i={name:"ko",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),ordinal:function(l){return l+""},formats:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h:mm",LLLL:"YYYY MMMM D dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY MMMM D",lll:"YYYY MMMM D A h:mm",llll:"YYYY MMMM D dddd A h:mm"},meridiem:function(l){return l<12?"":""},relativeTime:{future:"%s ",past:"%s ",s:" ",m:"1",mm:"%d",h:" ",hh:"%d",d:"",dd:"%d",M:" ",MM:"%d",y:" ",yy:"%d"}};return n.default.locale(i,null,!0),i}))})(a2)),a2.exports}VIe();Wt.locale("ko");const HIe=()=>{const{showAlert:a,showConfirm:e}=wa(),[t,r]=F.useState(Wt()),[n,i]=F.useState(Wt()),[l,o]=F.useState([]),[c,d]=F.useState(!1),[u,h]=F.useState(!1),[f,p]=F.useState(null),[g,b]=F.useState({title:"",description:"",startTime:"",endTime:"",status:"Planned"}),w=F.useCallback(async()=>{d(!0);try{const J=t.startOf("month"),B=t.endOf("month"),W=J.startOf("week"),$=B.endOf("week"),Q=W.format("YYYY-MM-DDTHH:mm:ss"),ne=$.format("YYYY-MM-DDTHH:mm:ss"),re=await Ke("get_schedules",{startDate:Q,endDate:ne});o(re||[])}catch(J){console.error("Failed to fetch schedules:",J)}finally{d(!1)}},[t]);F.useEffect(()=>{w()},[w]);const j=()=>r(J=>J.subtract(1,"month")),k=()=>r(J=>J.add(1,"month")),T=()=>{const J=Wt();r(J),i(J)},E=J=>{i(J)},I=(J=null)=>{if(J)p(J),b({title:J.title,description:J.description||"",startTime:Wt(J.start_time).format("YYYY-MM-DDTHH:mm"),endTime:Wt(J.end_time).format("YYYY-MM-DDTHH:mm"),status:J.status||"Planned"});else{p(null);const B=n.hour(Wt().hour()).minute(Wt().minute());b({title:"",description:"",startTime:B.format("YYYY-MM-DDTHH:mm"),endTime:B.add(1,"hour").format("YYYY-MM-DDTHH:mm"),status:"Planned"})}h(!0)},R=()=>{h(!1),p(null)},P=async J=>{if(J.preventDefault(),!g.title||!g.startTime||!g.endTime){a(" ","  .");return}try{f?await Ke("update_schedule",{schedule_id:f.schedule_id,title:g.title,description:g.description,start_time:Wt(g.startTime).format("YYYY-MM-DDTHH:mm:ss"),end_time:Wt(g.endTime).format("YYYY-MM-DDTHH:mm:ss"),status:g.status}):await Ke("create_schedule",{title:g.title,description:g.description,start_time:Wt(g.startTime).format("YYYY-MM-DDTHH:mm:ss"),end_time:Wt(g.endTime).format("YYYY-MM-DDTHH:mm:ss"),status:g.status}),R(),w()}catch(B){console.error("Save failed:",B),a(" "," : "+B)}},H=async J=>{if(await e(" ","   ?"))try{await Ke("delete_schedule",{schedule_id:J}),R(),w()}catch(B){a(" "," : "+B)}},G=F.useMemo(()=>{const B=t.startOf("month").startOf("week"),W=t.endOf("month").endOf("week"),$=[];let Q=B;for(;Q.isBefore(W)||Q.isSame(W,"day");)$.push(Q),Q=Q.add(1,"day");return $},[t]),X=F.useMemo(()=>l.filter(J=>{const B=Wt(J.start_time).startOf("day"),W=Wt(J.end_time).endOf("day");return n.isSame(B,"day")||n.isAfter(B)&&n.isBefore(W)||n.isSame(W,"day")}).sort((J,B)=>Wt(J.start_time).valueOf()-Wt(B.start_time).valueOf()),[l,n]),U=F.useMemo(()=>l.filter(J=>Wt(J.start_time).month()===t.month()).length,[l,t]),te=J=>{switch(J?.toLowerCase()){case"planned":return"bg-sky-50 text-sky-600 border-sky-100";case"inprogress":return"bg-amber-50 text-amber-600 border-amber-100";case"completed":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"important":return"bg-rose-50 text-rose-600 border-rose-100";default:return"bg-slate-50 text-slate-600 border-slate-100"}},Z=J=>{switch(J?.toLowerCase()){case"planned":return"bg-sky-500";case"inprogress":return"bg-amber-500";case"completed":return"bg-emerald-500";case"important":return"bg-rose-500";default:return"bg-slate-500"}};return s.jsxs("div",{className:"flex flex-col h-screen bg-[#f8fafc] overflow-hidden animate-in fade-in duration-700",children:[s.jsx("div",{className:"px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-4",children:s.jsx("div",{className:"flex justify-between items-end",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Farm Operation Management"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Schedule Management"})]})]})})}),s.jsx("div",{className:"flex-1 px-6 lg:px-8 min-[2000px]:px-12 pb-8 overflow-hidden",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-full",children:[s.jsxs("div",{className:"flex-[3] flex flex-col bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden ring-1 ring-slate-900/5",children:[s.jsxs("div",{className:"px-8 py-6 flex items-center justify-between border-b border-slate-100 bg-white/50 backdrop-blur-sm sticky top-0 z-10",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("h2",{className:"text-2xl font-black text-slate-800 tracking-tight",children:t.format("YYYY. MM")}),s.jsxs("div",{className:"flex items-center bg-slate-100 p-1 rounded-xl border border-slate-200 shadow-inner",children:[s.jsx("button",{onClick:j,className:"p-1.5 hover:bg-white hover:text-indigo-600 hover:shadow-sm rounded-lg transition-all",children:s.jsx(Rae,{size:18})}),s.jsx("button",{onClick:k,className:"p-1.5 hover:bg-white hover:text-indigo-600 hover:shadow-sm rounded-lg transition-all",children:s.jsx(s2,{size:18})}),s.jsx("div",{className:"w-px h-4 bg-slate-300 mx-1"}),s.jsx("button",{onClick:T,className:"px-3 py-1 font-bold text-xs text-slate-600 hover:text-indigo-600 transition-colors uppercase tracking-wider",children:"Today"})]})]}),s.jsx("div",{className:"hidden min-[1200px]:flex items-center gap-4",children:[{key:"planned",label:"",color:"bg-sky-500"},{key:"inprogress",label:"",color:"bg-amber-500"},{key:"completed",label:"",color:"bg-emerald-500"},{key:"important",label:"",color:"bg-rose-500"}].map(J=>s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${J.color}`}),s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tight",children:J.label})]},J.key))})]}),s.jsx("div",{className:"grid grid-cols-7 border-b border-slate-50 bg-slate-50/30 backdrop-blur-sm",children:["","","","","","",""].map((J,B)=>s.jsx("div",{className:`py-3 text-center text-[10px] font-black tracking-[0.2em] uppercase ${B===0?"text-rose-500":B===6?"text-indigo-500":"text-slate-400"}`,children:J},J))}),s.jsx("div",{className:"flex-1 grid grid-cols-7 grid-rows-5 overflow-y-auto",children:G.map((J,B)=>{const W=J.isSame(n,"day"),$=J.isSame(Wt(),"day"),Q=J.month()!==t.month(),ne=l.filter(re=>{const K=Wt(re.start_time).startOf("day"),ae=Wt(re.end_time).endOf("day");return J.isSame(K,"day")||J.isAfter(K)&&J.isBefore(ae)||J.isSame(ae,"day")}).sort((re,K)=>Wt(re.start_time).valueOf()-Wt(K.start_time).valueOf());return s.jsxs("div",{onClick:()=>E(J),className:`min-h-[100px] p-2 border-b border-r border-slate-50 group hover:bg-indigo-50/30 transition-all cursor-pointer relative
                                            ${Q?"bg-slate-50/50":""}
                                            ${W?"bg-indigo-50/50 ring-1 ring-inset ring-indigo-100":""}
                                            ${B%7===6?"border-r-0":""}
                                        `,children:[s.jsx("div",{className:"flex justify-between items-start mb-1.5",children:s.jsx("span",{className:`text-xs font-black w-6 h-6 flex items-center justify-center rounded-lg transition-transform group-hover:scale-110
                                                ${$?"bg-indigo-600 text-white shadow-lg shadow-indigo-200":W?"text-indigo-600":Q?"text-slate-300":J.day()===0?"text-rose-500":J.day()===6?"text-indigo-500":"text-slate-500"}
                                            `,children:J.date()})}),s.jsxs("div",{className:"space-y-1 overflow-hidden",children:[ne.slice(0,3).map(re=>s.jsx("div",{onClick:K=>{K.stopPropagation(),I(re)},className:`px-1.5 py-0.5 rounded text-[9px] font-black truncate border transition-transform hover:scale-[1.02]
                                                        ${te(re.status)}
                                                    `,title:re.title,children:re.title},re.schedule_id)),ne.length>3&&s.jsxs("div",{className:"text-[9px] font-black text-slate-400 pl-1.5",children:["+ ",ne.length-3," "]})]})]},B)})})]}),s.jsxs("div",{className:"flex-1 flex flex-col gap-6 lg:max-w-md h-full overflow-hidden",children:[s.jsxs("div",{className:"flex flex-col bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-200 p-8 ring-1 ring-slate-900/5 flex-1 overflow-hidden",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-2",children:"Selected Date"}),s.jsx("div",{className:"text-sm font-black text-indigo-600 mb-1",children:n.format("YYYY M D")}),s.jsxs("h3",{className:"text-2xl font-black text-slate-800 tracking-tight",children:[n.format("dddd")," "]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-4 scrollbar-thin scrollbar-thumb-slate-200 scrollbar-track-transparent",children:X.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-slate-300 bg-slate-50/50 rounded-2xl border border-dashed border-slate-200",children:[s.jsx(BH,{size:48,className:"mb-3 opacity-20"}),s.jsx("p",{className:"text-xs font-bold uppercase tracking-widest text-slate-400",children:" "})]}):X.map(J=>s.jsxs("div",{onClick:()=>I(J),className:"group relative bg-white border border-slate-100 hover:border-indigo-200 p-4 rounded-2xl hover:shadow-xl hover:shadow-indigo-500/10 transition-all cursor-pointer animate-in slide-in-from-right-4 duration-300",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsxs("div",{className:"flex flex-col items-center justify-center py-2 px-3 bg-slate-50 group-hover:bg-indigo-50 rounded-xl transition-colors min-w-[64px]",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 group-hover:text-indigo-400 transition-colors",children:Wt(J.start_time).format("HH:mm")}),s.jsx("div",{className:"w-px h-2 bg-slate-200 my-1"}),s.jsx("span",{className:"text-[10px] font-black text-slate-400 group-hover:text-indigo-400 transition-colors",children:Wt(J.end_time).format("HH:mm")})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Z(J.status)}`}),s.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:J.status||"General"})]}),s.jsx("h4",{className:"text-sm font-black text-slate-700 truncate group-hover:text-indigo-600 transition-colors",children:J.title}),J.description&&s.jsx("p",{className:"text-[11px] font-medium text-slate-400 line-clamp-1 mt-1",children:J.description})]})]}),J.related_type==="EXPERIENCE"&&s.jsx("div",{className:"absolute top-3 right-3",children:s.jsx(yb,{size:14,className:"text-sky-400"})})]},J.schedule_id))}),s.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100",children:s.jsxs("button",{onClick:()=>I(),className:"w-full h-14 bg-indigo-600 text-white rounded-2xl font-black text-sm flex items-center justify-center gap-2 hover:bg-indigo-500 shadow-lg shadow-indigo-200 transition-all active:scale-[0.98]",children:[s.jsx(kl,{size:20}),"   "]})})]}),s.jsx("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-700 rounded-3xl p-8 text-white shadow-xl shadow-indigo-200/50",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-indigo-200 uppercase tracking-[0.2em] mb-1",children:"Monthly Analytics"}),s.jsxs("div",{className:"text-2xl font-black",children:[U,""]}),s.jsx("p",{className:"text-[11px] font-bold text-indigo-100/70 mt-1 italic",children:"    "})]}),s.jsx("div",{className:"w-12 h-12 bg-white/10 backdrop-blur-md rounded-2xl flex items-center justify-center border border-white/20",children:s.jsx(Eo,{size:24,className:"text-white"})})]})})]})]})}),u&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:R}),s.jsxs("div",{className:"relative bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300 ring-1 ring-slate-900/10",children:[s.jsxs("div",{className:"px-10 py-8 bg-slate-50/50 border-b border-slate-100 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-4 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest",children:f?"Edit Schedule":"New Schedule"})]}),s.jsx("h3",{className:"text-2xl font-black text-slate-800 tracking-tight",children:f?"  ":"  "})]}),s.jsx("button",{onClick:R,className:"w-10 h-10 rounded-2xl bg-white border border-slate-200 text-slate-400 flex items-center justify-center hover:bg-slate-100 hover:text-slate-600 transition-all shadow-sm",children:s.jsx(Ri,{size:20})})]}),s.jsxs("form",{onSubmit:P,className:"p-10 space-y-6",children:[f?.related_type==="EXPERIENCE"&&s.jsxs("div",{className:"flex gap-3 bg-sky-50 p-4 rounded-2xl border border-sky-100 border-l-4 border-l-sky-500 animate-in slide-in-from-top-2",children:[s.jsx("div",{className:"p-1 px-1.5",children:s.jsx(bb,{size:18,className:"text-sky-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-black text-sky-800 mb-0.5",children:"    "}),s.jsxs("p",{className:"text-[11px] font-bold text-sky-600 leading-relaxed",children:["    .  ",s.jsx("br",{}),s.jsxs("span",{className:"font-black text-sky-700 underline underline-offset-2 cursor-pointer",onClick:()=>{R()},children:["[  ",">","  ]"]}),"  ."]})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"title",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:"Title"}),s.jsxs("div",{className:"group relative",children:[s.jsx("input",{type:"text",id:"title",name:"title",value:g.title,onChange:J=>b({...g,title:J.target.value}),placeholder:"  ",disabled:f?.related_type==="EXPERIENCE",className:"w-full h-12 px-5 bg-white border border-slate-200 rounded-xl font-bold text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all disabled:bg-slate-50 disabled:text-slate-400",required:!0}),s.jsx("div",{className:"absolute top-1/2 right-4 -translate-y-1/2 opacity-0 group-focus-within:opacity-100 transition-opacity",children:s.jsx(Eo,{size:16,className:"text-indigo-400"})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"startTime",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:"Start At"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"datetime-local",id:"startTime",name:"startTime",value:g.startTime,onChange:J=>b({...g,startTime:J.target.value}),disabled:f?.related_type==="EXPERIENCE",className:"w-full h-12 px-5 bg-white border border-slate-200 rounded-xl font-bold text-xs focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all disabled:bg-slate-50 disabled:text-slate-400",required:!0}),s.jsx("div",{className:"absolute top-1/2 right-4 -translate-y-1/2 text-slate-300 pointer-events-none",children:s.jsx(mh,{size:16})})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"endTime",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:"End At"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"datetime-local",id:"endTime",name:"endTime",value:g.endTime,onChange:J=>b({...g,endTime:J.target.value}),disabled:f?.related_type==="EXPERIENCE",className:"w-full h-12 px-5 bg-white border border-slate-200 rounded-xl font-bold text-xs focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all disabled:bg-slate-50 disabled:text-slate-400",required:!0}),s.jsx("div",{className:"absolute top-1/2 right-4 -translate-y-1/2 text-slate-300 pointer-events-none",children:s.jsx(mh,{size:16})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 ml-2",children:"Status / Color"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"Planned",label:"",color:"bg-sky-500"},{id:"InProgress",label:"",color:"bg-amber-500"},{id:"Completed",label:"",color:"bg-emerald-500"},{id:"Important",label:"",color:"bg-rose-500"}].map(J=>s.jsxs("label",{className:"cursor-pointer",children:[s.jsx("input",{type:"radio",name:"status",value:J.id,checked:g.status===J.id,onChange:B=>b({...g,status:B.target.value}),disabled:f?.related_type==="EXPERIENCE",className:"peer hidden"}),s.jsx("div",{className:`px-4 py-2.5 rounded-xl border-2 font-black text-[10px] uppercase tracking-wider transition-all
                                                ${g.status===J.id?"border-indigo-600 bg-indigo-50 text-indigo-700 shadow-md transform scale-105":"border-slate-100 bg-white text-slate-400 hover:border-slate-200"}
                                                peer-disabled:opacity-50 peer-disabled:cursor-not-allowed
                                            `,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${J.color}`}),J.label]})})]},J.id))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-2",children:"Description"}),s.jsx("textarea",{id:"description",name:"description",value:g.description,onChange:J=>b({...g,description:J.target.value}),placeholder:"   (,  )",disabled:f?.related_type==="EXPERIENCE",rows:3,className:"w-full p-5 bg-white border border-slate-200 rounded-2xl font-bold text-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all resize-none disabled:bg-slate-50 disabled:text-slate-400"})]}),s.jsxs("div",{className:"pt-6 flex gap-3 border-t border-slate-100",children:[f&&f.related_type!=="EXPERIENCE"&&s.jsx("button",{type:"button",onClick:()=>H(f.schedule_id),className:"h-12 w-12 flex items-center justify-center bg-rose-50 text-rose-500 rounded-xl hover:bg-rose-100 transition-all border border-rose-100",children:s.jsx(Cs,{size:20})}),s.jsx("div",{className:"flex-1"}),s.jsx("button",{type:"button",onClick:R,className:"h-12 px-8 bg-slate-100 text-slate-600 rounded-xl font-black text-xs hover:bg-slate-200 transition-all",children:""}),f?.related_type!=="EXPERIENCE"&&s.jsxs("button",{type:"submit",className:"h-12 px-10 bg-indigo-600 text-white rounded-xl font-black text-xs hover:bg-indigo-500 shadow-lg shadow-indigo-200 transition-all flex items-center gap-2",children:[s.jsx(di,{size:16})," ",f?"  ":"  "]})]})]})]})]})]})},UIe=()=>{const[a,e]=F.useState([]),[t,r]=F.useState(!1),{showConfirm:n,showAlert:i}=wa(),[l,o]=F.useState(!1),[c,d]=F.useState(null),[u,h]=F.useState({space_name:"",space_type:"cultivation",location_info:"",area_size:0,area_unit:"m2",is_active:!0,memo:""}),f=async()=>{r(!0);try{const w=await Ke("get_production_spaces");e(w||[])}catch(w){console.error(w)}finally{r(!1)}};F.useEffect(()=>{f()},[]);const p=(w=null)=>{w?(d(w),h({space_id:w.space_id,space_name:w.space_name,space_type:w.space_type||"cultivation",location_info:w.location_info||"",area_size:w.area_size||0,area_unit:w.area_unit||"m2",is_active:w.is_active,memo:w.memo||""})):(d(null),h({space_name:"",space_type:"cultivation",location_info:"",area_size:0,area_unit:"m2",is_active:!0,memo:""})),o(!0)},g=async()=>{if(!u.space_name){i("","/  .");return}try{await Ke("save_production_space",{...u,space_id:c?c.space_id:0,area_size:parseFloat(u.area_size)||0}),o(!1),f(),i("","  .")}catch(w){i("",` : ${w}`)}},b=async w=>{if(await n(" ","  ?        ."))try{await Ke("delete_production_space",{id:w}),f()}catch(k){i("",` : ${k}`)}};return s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-black text-slate-700",children:"   "}),s.jsx("p",{className:"text-xs font-bold text-slate-400 mt-1",children:", ,     ."})]}),s.jsxs("button",{onClick:()=>p(),className:"h-12 px-6 bg-slate-900 border-none rounded-2xl font-black text-sm text-white flex items-center gap-2 shadow-xl shadow-slate-200 transition-all active:scale-[0.95] hover:bg-slate-800",children:[s.jsx(kl,{size:18}),"   "]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.map(w=>s.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-100 shadow-xl shadow-slate-200/50 p-6 group transition-all hover:translate-y-[-4px]",children:[s.jsxs("div",{className:"flex justify-between items-start mb-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:s.jsx(c2,{size:24})}),s.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>p(w),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg",children:s.jsx(V_,{size:16})}),s.jsx("button",{onClick:()=>b(w.space_id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:s.jsx(Cs,{size:16})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h4",{className:"text-lg font-black text-slate-700",children:w.space_name}),w.is_active?s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-teal-50 text-teal-600 text-[9px] font-black uppercase",children:"Active"}):s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-slate-100 text-slate-400 text-[9px] font-black uppercase",children:"Inactive"})]}),s.jsx("p",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest",children:w.space_type})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 font-bold",children:[s.jsx(F_,{size:12,className:"text-slate-300"}),s.jsx("span",{children:w.location_info||"  "})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 font-bold",children:[s.jsx(Mre,{size:12,className:"text-slate-300"}),s.jsxs("span",{children:[w.area_size," ",w.area_unit]})]})]}),w.memo&&s.jsx("div",{className:"p-3 bg-slate-50 rounded-xl",children:s.jsx("p",{className:"text-[10px] text-slate-400 line-clamp-2 leading-relaxed",children:w.memo})})]})]},w.space_id)),a.length===0&&!t&&s.jsxs("div",{className:"col-span-full py-20 bg-white/50 rounded-[2rem] border-2 border-dashed border-slate-200 flex flex-col items-center justify-center",children:[s.jsx(c2,{size:48,className:"text-slate-200 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:"   ."}),s.jsx("button",{onClick:()=>p(),className:"mt-4 text-indigo-600 font-black text-sm hover:underline",children:"  "})]})]}),l&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md transition-opacity"}),s.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl relative z-10 overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsx("div",{className:"p-8 border-b border-slate-50",children:s.jsx("h3",{className:"text-xl font-black text-slate-800",children:c?"  ":"  "})}),s.jsxs("div",{className:"p-8 space-y-6",children:[s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{htmlFor:"space_name",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"/ "}),s.jsx("input",{id:"space_name",type:"text",value:u.space_name,onChange:w=>h({...u,space_name:w.target.value}),placeholder:": 1 ",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-100"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{htmlFor:"space_type",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsxs("select",{id:"space_type",value:u.space_type,onChange:w=>h({...u,space_type:w.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-100",children:[s.jsx("option",{value:"cultivation",children:"/"}),s.jsx("option",{value:"processing",children:"/"}),s.jsx("option",{value:"storage",children:"/"}),s.jsx("option",{value:"lab",children:"/"}),s.jsx("option",{value:"field",children:"/"})]})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>h({...u,is_active:!0}),className:`flex-1 h-12 rounded-2xl border-2 font-black text-xs transition-all ${u.is_active?"bg-indigo-50 border-indigo-500 text-indigo-600":"bg-slate-50 border-transparent text-slate-400"}`,children:" "}),s.jsx("button",{onClick:()=>h({...u,is_active:!1}),className:`flex-1 h-12 rounded-2xl border-2 font-black text-xs transition-all ${u.is_active?"bg-slate-50 border-transparent text-slate-400":"bg-red-50 border-red-500 text-red-600"}`,children:""})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{htmlFor:"area_size",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"/"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"area_size",type:"number",value:u.area_size,onChange:w=>h({...u,area_size:w.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-100"}),s.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-slate-400",children:u.area_unit})]})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{htmlFor:"area_unit",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsxs("select",{id:"area_unit",value:u.area_unit,onChange:w=>h({...u,area_unit:w.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-100",children:[s.jsx("option",{value:"m2",children:"m ()"}),s.jsx("option",{value:"pyeong",children:""}),s.jsx("option",{value:"shelf",children:" ()"}),s.jsx("option",{value:"ha",children:"ha ()"})]})]})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsx("input",{type:"text",value:u.location_info,onChange:w=>h({...u,location_info:w.target.value}),placeholder:"   ",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-100"})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("textarea",{value:u.memo,onChange:w=>h({...u,memo:w.target.value}),className:"w-full h-24 p-5 bg-slate-50 border-none rounded-2xl font-bold text-sm focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all ring-1 ring-inset ring-slate-100 resize-none"})]})]}),s.jsxs("div",{className:"p-8 bg-slate-50 flex gap-3",children:[s.jsx("button",{onClick:()=>o(!1),className:"flex-1 h-12 rounded-2xl font-black text-sm text-slate-400 hover:text-slate-600 transition-colors",children:""}),s.jsx("button",{onClick:g,className:"flex-1 h-12 bg-slate-900 rounded-2xl font-black text-sm text-white shadow-xl shadow-indigo-100 transition-all active:scale-[0.95] hover:bg-slate-800",children:c?" ":" "})]})]})]})]})},GIe=()=>{const[a,e]=F.useState([]),[t,r]=F.useState([]),[n,i]=F.useState([]),[l,o]=F.useState(!1),{showAlert:c,showConfirm:d}=wa(),[u,h]=F.useState(!1),[f,p]=F.useState(null),[g,b]=F.useState(!1),[w,j]=F.useState(null),[k,T]=F.useState(!1),[E,I]=F.useState(null),[R,P]=F.useState({batch_id:0,batch_code:"",product_id:null,space_id:null,start_date:Wt().format("YYYY-MM-DD"),expected_harvest_date:"",status:"growing",initial_quantity:0,unit:""}),H=async()=>{o(!0);try{const[B,W,$]=await Promise.all([Ke("get_production_batches"),Ke("get_production_spaces"),Ke("get_product_list")]);e(B||[]),r(W||[]),i($||[])}catch(B){console.error(B)}finally{o(!1)}};F.useEffect(()=>{H()},[]);const G=()=>{const B=Wt().format("YYMMDD"),W=Math.floor(Math.random()*999).toString().padStart(3,"0");P($=>({...$,batch_code:`B-${B}-${W}`}))},X=(B=null)=>{B?(p(B),P({...B})):(p(null),P({batch_id:0,batch_code:"",product_id:null,space_id:null,start_date:Wt().format("YYYY-MM-DD"),expected_harvest_date:"",status:"growing",initial_quantity:0,unit:""}),setTimeout(()=>G(),0)),h(!0)},U=async()=>{if(!R.batch_code||!R.product_id){c("","    .");return}try{await Ke("save_production_batch",{...R,product_id:parseInt(R.product_id),space_id:R.space_id?parseInt(R.space_id):null,initial_quantity:parseFloat(R.initial_quantity)||0}),h(!1),H(),c("","  .")}catch(B){c("",` : ${B}`)}},te=B=>{const W=n.find(ne=>ne.product_id===B.product_id),$=t.find(ne=>ne.space_id===B.space_id),Q={title:W?.product_name||" ",code:B.batch_code,date:Wt(B.start_date).format("YYYY.MM.DD"),location:$?.space_name||" ",qrValue:`BATCH|${B.batch_id}|${B.batch_code}|${W?.product_name||"NA"}|${$?.space_name||"NA"}`};j(Q),b(!0)},Z=()=>{w&&(P_("batch",w),b(!1))},J=B=>{I(B),T(!0)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-black text-slate-700",children:"    "}),s.jsx("p",{className:"text-xs font-bold text-slate-400 mt-1",children:"   ()   ."})]}),s.jsxs("button",{onClick:()=>X(),className:"h-12 px-6 bg-slate-900 border-none rounded-2xl font-black text-sm text-white flex items-center gap-2 shadow-xl shadow-slate-200 transition-all hover:bg-slate-800",children:[s.jsx(kl,{size:18}),"    "]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.map(B=>{const W=n.find(Q=>Q.product_id===B.product_id),$=t.find(Q=>Q.space_id===B.space_id);return s.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-100 shadow-xl shadow-slate-200/50 p-6 flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:"px-3 py-1 bg-indigo-50 text-indigo-600 rounded-lg text-[10px] font-black uppercase tracking-widest",children:B.batch_code}),s.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-0.5 rounded-full text-[10px] font-bold ${B.status==="growing"?"bg-teal-50 text-teal-600":"bg-slate-100 text-slate-500"}`,children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${B.status==="growing"?"bg-teal-500 animate-pulse":"bg-slate-400"}`}),B.status==="growing"?" ":""]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-lg font-black text-slate-700 mb-1",children:W?.product_name||"  "}),s.jsxs("p",{className:"text-xs font-bold text-slate-400 mb-6 flex items-center gap-1",children:[s.jsx(c2,{size:12})," ",$?.space_name||""]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-50 rounded-2xl mb-6",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1",children:""}),s.jsx("p",{className:"text-xs font-black text-slate-700",children:Wt(B.start_date).format("YYYY.MM.DD")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1",children:""}),s.jsx("p",{className:"text-xs font-black text-slate-700",children:B.expected_harvest_date?Wt(B.expected_harvest_date).format("MM.DD"):"-"})]}),s.jsxs("div",{className:"col-span-2 pt-2 border-t border-slate-200/50",children:[s.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1",children:" "}),s.jsxs("p",{className:"text-xs font-black text-slate-700",children:[B.initial_quantity," ",B.unit]})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>X(B),className:"flex-1 h-10 bg-white border border-slate-100 rounded-xl text-slate-400 hover:text-indigo-600 font-bold text-[11px] transition-colors",children:[s.jsx(V_,{size:14,className:"inline mr-1"})," "]}),s.jsx("button",{onClick:()=>te(B),className:"h-10 w-10 bg-white border border-slate-100 rounded-xl text-slate-400 hover:text-indigo-600 transition-colors flex items-center justify-center",title:"  ",children:s.jsx("span",{className:"material-symbols-rounded text-[20px]",children:"qr_code"})}),s.jsxs("button",{onClick:()=>J(B),className:"flex-1 h-10 bg-indigo-600 text-white rounded-xl font-black text-[11px] shadow-lg shadow-indigo-100 hover:bg-indigo-500 transition-all",children:[s.jsx(Vre,{size:14,className:"inline mr-1"}),"  "]})]})]},B.batch_id)}),a.length===0&&!l&&s.jsxs("div",{className:"col-span-full py-20 bg-white/50 rounded-[2rem] border-2 border-dashed border-slate-200 flex flex-col items-center justify-center",children:[s.jsx(B_,{size:48,className:"text-slate-200 mb-4"}),s.jsx("p",{className:"text-slate-400 font-bold",children:"    ."})]})]}),g&&w&&s.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/80 backdrop-blur-sm"}),s.jsx("div",{className:"bg-white w-full max-w-sm rounded-[3rem] shadow-2xl relative z-10 overflow-hidden animate-in zoom-in-95 duration-200",children:s.jsxs("div",{className:"p-8 flex flex-col items-center",children:[s.jsx("div",{className:"w-20 h-20 bg-indigo-50 rounded-3xl flex items-center justify-center text-indigo-600 mb-6",children:s.jsx("span",{className:"material-symbols-rounded text-[40px]",children:"qr_code"})}),s.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:"   "}),s.jsxs("p",{className:"text-xs font-bold text-slate-400 mb-8 text-center px-6",children:["    ",s.jsx("br",{}),"(Tray) ?"]}),s.jsxs("div",{className:"w-full bg-slate-50 rounded-[2.5rem] p-8 border border-slate-100 mb-8 flex flex-row items-center gap-6",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"bg-white p-2 rounded-xl border-2 border-slate-900 leading-[0]",children:s.jsx(vb,{value:w.qrValue,size:90,level:"M"})}),s.jsx("div",{className:"text-[9px] font-black border border-slate-900 px-1.5 py-0.5 bg-white whitespace-nowrap",children:"   "})]}),s.jsxs("div",{className:"flex-1 flex flex-col justify-center min-w-0",children:[s.jsxs("div",{className:"border-t-2 border-slate-900 pt-2 pb-1 space-y-2",children:[s.jsxs("div",{className:"flex items-center text-[11px] leading-none",children:[s.jsx("span",{className:"font-black text-slate-900 w-12 shrink-0",children:":"}),s.jsx("span",{className:"font-black text-slate-900 truncate",children:w.title})]}),s.jsxs("div",{className:"flex items-center text-[11px] leading-none",children:[s.jsx("span",{className:"font-black text-slate-900 w-12 shrink-0",children:":"}),s.jsx("span",{className:"font-black text-slate-900 truncate",children:w.date})]}),s.jsxs("div",{className:"flex items-center text-[11px] leading-none",children:[s.jsx("span",{className:"font-black text-slate-900 w-12 shrink-0",children:":"}),s.jsx("span",{className:"font-black text-slate-900 truncate",children:w.location})]})]}),s.jsx("div",{className:"text-[11px] font-black text-slate-900 pt-2 border-t-2 border-slate-900 mt-1 truncate",children:w.code})]})]}),s.jsxs("div",{className:"flex gap-3 w-full",children:[s.jsx("button",{onClick:()=>b(!1),className:"flex-1 h-14 rounded-2xl font-black text-slate-400 hover:bg-slate-50 transition-colors",children:""}),s.jsxs("button",{onClick:Z,className:"flex-[2] h-14 bg-slate-900 rounded-2xl font-black text-white shadow-xl shadow-slate-200 flex items-center justify-center gap-2 hover:bg-slate-800 transition-all active:scale-[0.98]",children:[s.jsx("span",{className:"material-symbols-rounded text-[20px]",children:"print"}),"  "]})]})]})})]}),s.jsx(WIe,{isOpen:k,batch:E,onClose:()=>T(!1),showAlert:c}),u&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md transition-opacity"}),s.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl relative z-10 overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsx("div",{className:"p-8 border-b border-slate-50",children:s.jsx("h3",{className:"text-xl font-black text-slate-800",children:"  "})}),s.jsxs("div",{className:"p-8 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{htmlFor:"batch_code",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{id:"batch_code",type:"text",value:R.batch_code,onChange:B=>P({...R,batch_code:B.target.value}),className:"flex-1 h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm ring-1 ring-slate-100"}),s.jsx("button",{onClick:G,className:"px-3 bg-slate-100 rounded-xl text-slate-500 hover:text-indigo-600",children:s.jsx($H,{size:16})})]})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{htmlFor:"status",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsxs("select",{id:"status",value:R.status,onChange:B=>P({...R,status:B.target.value}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm ring-1 ring-slate-100",children:[s.jsx("option",{value:"growing",children:"  (Active)"}),s.jsx("option",{value:"completed",children:" (Done)"}),s.jsx("option",{value:"failed",children:" (Failed)"})]})]})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{htmlFor:"product_id",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"   ()"}),s.jsxs("select",{id:"product_id",value:R.product_id||"",onChange:B=>P({...R,product_id:B.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100",children:[s.jsx("option",{value:"",children:"  "}),n.filter(B=>B.item_type==="harvest_item"||B.item_type==="").map(B=>s.jsxs("option",{value:B.product_id,children:[B.product_name," ",B.specification?`(${B.specification})`:""]},B.product_id))]})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{htmlFor:"space_id",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsxs("select",{id:"space_id",value:R.space_id||"",onChange:B=>P({...R,space_id:B.target.value||null}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100",children:[s.jsx("option",{value:"",children:" "}),t.map(B=>s.jsx("option",{value:B.space_id,children:B.space_name},B.space_id))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{type:"date",value:R.start_date,onChange:B=>P({...R,start_date:B.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100"})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsx("input",{type:"date",value:R.expected_harvest_date,onChange:B=>P({...R,expected_harvest_date:B.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsx("input",{type:"number",value:R.initial_quantity,onChange:B=>P({...R,initial_quantity:B.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100"})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{type:"text",value:R.unit,onChange:B=>P({...R,unit:B.target.value}),placeholder:", kg,  ",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100"})]})]})]}),s.jsxs("div",{className:"p-8 bg-slate-50 flex gap-3",children:[s.jsx("button",{onClick:()=>h(!1),className:"flex-1 h-12 rounded-2xl font-black text-sm text-slate-400",children:""}),s.jsx("button",{onClick:U,className:"flex-1 h-12 bg-slate-900 rounded-2xl font-black text-sm text-white shadow-xl hover:bg-slate-800",children:"  "})]})]})]})]})},WIe=({isOpen:a,batch:e,onClose:t,showAlert:r})=>{const[n,i]=F.useState({log_id:0,batch_id:null,space_id:null,work_type:"inspect",work_content:"",worker_name:localStorage.getItem("last_worker")||"",log_date:Wt().format("YYYY-MM-DD"),env_data:{temp:"",humidity:"",co2:""},photos:[]});if(F.useEffect(()=>{a&&e&&i({log_id:0,batch_id:e.batch_id,space_id:e.space_id,work_type:"inspect",work_content:"",worker_name:localStorage.getItem("last_worker")||"",log_date:Wt().format("YYYY-MM-DD"),env_data:{temp:"",humidity:"",co2:""},photos:[]})},[a,e,i]),!a)return null;const l=async()=>{if(!n.work_content||!n.worker_name){r("","   .");return}try{await Ke("save_farming_log",{...n,batch_id:parseInt(n.batch_id),space_id:n.space_id?parseInt(n.space_id):null,input_materials:null}),localStorage.setItem("last_worker",n.worker_name),t(),r("","  .")}catch(o){r("",` : ${o}`)}};return s.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md",onClick:t}),s.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl relative z-10 overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"p-8 border-b border-slate-50 flex justify-between items-center bg-indigo-600 text-white",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-black",children:"   "}),s.jsx("p",{className:"text-[10px] font-bold opacity-80 uppercase tracking-widest mt-0.5",children:"Quick Batch Activity Log"})]}),s.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center",children:s.jsx(xh,{size:24})})]}),s.jsxs("div",{className:"p-8 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("input",{type:"text",value:n.worker_name,onChange:o=>i({...n,worker_name:o.target.value}),placeholder:" ",className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm ring-1 ring-slate-100 focus:ring-indigo-500/20 transition-all"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:" "}),s.jsx("input",{type:"date",value:n.log_date,onChange:o=>i({...n,log_date:o.target.value}),className:"w-full h-11 px-4 bg-slate-50 border-none rounded-xl font-bold text-sm ring-1 ring-slate-100"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:" "}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{id:"inspect",label:"/",icon:Sv},{id:"water",label:"/",icon:x0},{id:"clean",label:"/",icon:wv}].map(o=>s.jsxs("button",{onClick:()=>i({...n,work_type:o.id}),className:`flex flex-col items-center p-3 rounded-2xl border-2 transition-all ${n.work_type===o.id?"bg-indigo-50 border-indigo-600 text-indigo-700":"bg-white border-slate-50 text-slate-400 hover:border-slate-100"}`,children:[s.jsx(o.icon,{size:18,className:"mb-1"}),s.jsx("span",{className:"text-[9px] font-black",children:o.label})]},o.id))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:" "}),s.jsx("textarea",{value:n.work_content,onChange:o=>i({...n,work_content:o.target.value}),placeholder:" ? (:     )",className:"w-full h-24 p-4 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100 resize-none focus:ring-indigo-500/20 transition-all"})]}),s.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[s.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wb,{size:14,className:"text-rose-400"}),s.jsx("input",{type:"number",step:"0.1",value:n.env_data.temp,onChange:o=>i({...n,env_data:{...n.env_data,temp:o.target.value}}),placeholder:"",className:"w-full h-8 bg-white border-none rounded-lg text-xs font-black shadow-sm"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(x0,{size:14,className:"text-blue-400"}),s.jsx("input",{type:"number",step:"0.1",value:n.env_data.humidity,onChange:o=>i({...n,env_data:{...n.env_data,humidity:o.target.value}}),placeholder:"",className:"w-full h-8 bg-white border-none rounded-lg text-xs font-black shadow-sm"})]})]}),s.jsx("button",{onClick:async()=>{try{const o={temperature:24.5,humidity:65,co2:450};i({...n,env_data:{...n.env_data,temp:o.temperature.toString(),humidity:o.humidity.toString(),co2:o.co2.toString()}})}catch(o){console.error(o)}},className:"p-2 bg-white text-indigo-600 rounded-xl hover:bg-indigo-50 shadow-sm border border-slate-100",children:s.jsx(wv,{size:18})})]})]}),s.jsxs("div",{className:"p-8 bg-slate-50 flex gap-3",children:[s.jsx("button",{onClick:t,className:"flex-1 h-12 rounded-2xl font-black text-sm text-slate-400",children:""}),s.jsx("button",{onClick:l,className:"flex-1 h-12 bg-indigo-600 rounded-2xl font-black text-sm text-white shadow-xl shadow-indigo-100 hover:bg-indigo-500 transition-all",children:"  "})]})]})]})},YIe=()=>{const[a,e]=F.useState([]),[t,r]=F.useState([]),[n,i]=F.useState([]),[l,o]=F.useState(!1),{showAlert:c,showConfirm:d}=wa(),[u,h]=F.useState(!1),[f,p]=F.useState(null),g=F.useRef(null),[b,w]=F.useState("photo");localStorage.getItem("API_BASE_URL");const j=B=>{if(!B)return"";if(B.startsWith("http")||B.startsWith("blob:")||B.startsWith("data:"))return B;let W=B;B.includes("asset.localhost")&&(W=B.replace(/https?:\/\/asset\.localhost\//,"").replace(/asset\.localhost\//,""));try{W=decodeURIComponent(W)}catch(ne){console.warn("URI decode failed",ne)}const $=W.split(/[\\/]/).pop();let Q=localStorage.getItem("API_BASE_URL")||"";return!Q&&window.location.port==="5173"&&(Q="http://localhost:3000"),Q.endsWith("/")&&(Q=Q.slice(0,-1)),`${Q}/api/production/media/${$}`},[k,T]=F.useState({log_id:0,batch_id:null,space_id:null,log_date:Wt().format("YYYY-MM-DD"),worker_name:"",work_type:"plant",work_content:"",input_materials:[],env_data:{temp:"",humidity:"",co2:""},photos:[]}),E=[{id:"plant",label:"/",icon:WH,color:"emerald"},{id:"water",label:"/",icon:ire,color:"blue"},{id:"fertilize",label:"/",icon:B_,color:"purple"},{id:"pesticide",label:"/",icon:qH,color:"red"},{id:"harvest",label:"/",icon:YA,color:"teal"},{id:"process",label:"/",icon:_v,color:"indigo"},{id:"clean",label:"/",icon:x0,color:"indigo"},{id:"inspect",label:"/",icon:Sv,color:"amber"},{id:"education",label:"/",icon:xh,color:"slate"}],I=async()=>{o(!0);try{const[B,W,$]=await Promise.all([Ke("get_production_logs",{limit:100}),Ke("get_production_spaces"),Ke("get_production_batches")]);e(B||[]),r(W||[]),i($||[])}catch(B){console.error(B)}finally{o(!1)}};F.useEffect(()=>{I()},[]);const R=(B=null)=>{B?(p(B),T({...B,env_data:B.env_data||{temp:"",humidity:"",co2:""},input_materials:Array.isArray(B.input_materials)?B.input_materials:[],photos:Array.isArray(B.photos)?B.photos:[]})):(p(null),T({log_id:0,batch_id:null,space_id:null,log_date:Wt().format("YYYY-MM-DD"),worker_name:localStorage.getItem("last_worker")||"",work_type:"plant",work_content:"",input_materials:[],env_data:{temp:"",humidity:"",co2:""},photos:[]})),h(!0)},P=(B="photo")=>{w(B),g.current.click()},H=async B=>{const W=B.target.files[0];if(!W)return;const $=new FormData;$.append("file",W);try{const Q=await Ke("upload_media",$);if(Q){const ne=[...k.photos||[]],re=ne.length+1;ne.push({id:Date.now(),type:b,path:Q,label:`${re})`,displayPath:j(Q)}),T({...k,photos:ne})}else throw new Error("   .")}catch(Q){console.error("File upload failed:",Q);const ne=Q.message||String(Q);ne.includes("413")?c("","    ( 10MB)."):c("","  : "+ne)}B.target.value=""},G=B=>{T(W=>({...W,photos:W.photos.filter($=>$.id!==B)}))},X=()=>{const B=Array.isArray(k.input_materials)?k.input_materials:[];T({...k,input_materials:[...B,{id:Date.now(),name:"",quantity:"",unit:"kg",purpose:""}]})},U=(B,W,$)=>{T({...k,input_materials:k.input_materials.map(Q=>Q.id===B?{...Q,[W]:$}:Q)})},te=B=>{T({...k,input_materials:k.input_materials.filter(W=>W.id!==B)})},Z=async()=>{if(!k.work_content||!k.worker_name){c("","    .");return}try{await Ke("save_farming_log",{...k,batch_id:k.batch_id?parseInt(k.batch_id):null,space_id:k.space_id?parseInt(k.space_id):null,input_materials:k.input_materials.length>0?k.input_materials:null}),localStorage.setItem("last_worker",k.worker_name),h(!1),I(),c(""," .")}catch(B){c("",` : ${B}`)}},J=async B=>{if(await d("","   ?"))try{await Ke("delete_farming_log",{id:B}),I(),c(""," .")}catch($){c("",` : ${$}`)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-black text-slate-700",children:" (GAP/HACCP )"}),s.jsx("p",{className:"text-xs font-bold text-slate-400 mt-1",children:"         ."})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("button",{onClick:()=>R(),className:"h-12 px-6 bg-indigo-600 border-none rounded-2xl font-black text-sm text-white flex items-center gap-2 shadow-xl shadow-indigo-100 transition-all active:scale-[0.95] hover:bg-indigo-500",children:[s.jsx(kl,{size:18}),"   "]})})]}),s.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-xl shadow-slate-200/50 border border-slate-100 overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-slate-50 bg-slate-50/30 flex gap-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Sv,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300",size:16}),s.jsx("input",{type:"text",placeholder:"   ...",className:"w-full h-10 pl-12 pr-4 bg-white border-none rounded-xl text-sm font-bold shadow-sm ring-1 ring-slate-100 focus:ring-indigo-500/20 transition-all"})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50/50 border-b border-slate-100",children:[s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"/"}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"/"}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:" "}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("th",{className:"px-6 py-4 text-right"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[a.map(B=>{const W=E.find(Q=>Q.id===B.work_type)||E[0],$=t.find(Q=>Q.space_id===B.space_id);return s.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"w-10 h-10 rounded-xl bg-slate-100 flex flex-col items-center justify-center shrink-0",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 leading-none",children:Wt(B.log_date).format("MM")}),s.jsx("span",{className:"text-sm font-black text-slate-700 leading-none mt-0.5",children:Wt(B.log_date).format("DD")})]}),s.jsx("div",{className:"px-2 py-1 rounded-lg bg-slate-100 text-slate-600 text-[10px] font-black uppercase",children:W.label})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs font-black text-slate-700",children:$?.space_name||"-"}),B.batch_id&&s.jsxs("p",{className:"text-[10px] text-indigo-500 font-bold",children:["BATCH-",B.batch_id]})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("p",{className:"text-xs font-bold text-slate-600 line-clamp-2 leading-relaxed max-w-sm",children:B.work_content})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-600",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center text-[10px] text-slate-500",children:B.worker_name?.[0]}),B.worker_name]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex gap-3 text-[10px] font-black text-slate-400",children:[B.env_data?.temp&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(wb,{size:12})," ",B.env_data.temp,"C"]}),B.env_data?.humidity&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(x0,{size:12})," ",B.env_data.humidity,"%"]})]})}),s.jsx("td",{className:"px-6 py-5 text-right",children:s.jsxs("div",{className:"flex gap-1 justify-end",children:[s.jsx("button",{onClick:()=>R(B),className:"p-2 text-slate-300 hover:text-indigo-600 transition-colors",children:s.jsx(V_,{size:16})}),s.jsx("button",{onClick:()=>J(B.log_id),className:"p-2 text-slate-300 hover:text-rose-600 transition-colors",children:s.jsx(Cs,{size:16})})]})})]},B.log_id)}),a.length===0&&!l&&s.jsx("tr",{children:s.jsxs("td",{colSpan:"6",className:"py-20 text-center",children:[s.jsx(xh,{size:48,className:"mx-auto text-slate-100 mb-3"}),s.jsx("p",{className:"text-slate-400 font-bold",children:"  ."})]})})]})]})})]}),u&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md transition-opacity"}),s.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-[2.5rem] shadow-2xl relative z-10 overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"p-8 border-b border-slate-50 flex justify-between items-center",children:[s.jsx("h3",{className:"text-xl font-black text-slate-800",children:f?" ":" "}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"   "}),s.jsx("p",{className:"text-xs font-bold text-teal-600",children:"GAP/HACCP  "})]})]}),s.jsxs("div",{className:"p-8 grid grid-cols-2 gap-6 overflow-y-auto max-h-[70vh] custom-scrollbar",children:[s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{htmlFor:"log_date",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsx("input",{id:"log_date",type:"date",value:k.log_date,onChange:B=>T({...k,log_date:B.target.value}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100"})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{htmlFor:"worker_name",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{id:"worker_name",type:"text",value:k.worker_name,onChange:B=>T({...k,worker_name:B.target.value}),placeholder:" ",className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100"})]}),s.jsxs("div",{className:"space-y-2 text-left col-span-2",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 mb-2",children:" "}),s.jsx("div",{className:"grid grid-cols-5 gap-2",children:E.map(B=>s.jsxs("button",{onClick:()=>T({...k,work_type:B.id}),className:`
                                                flex flex-col items-center justify-center p-3 rounded-2xl border-2 transition-all
                                                ${k.work_type===B.id?"bg-indigo-50 border-indigo-600 text-indigo-700":"bg-white border-slate-50 text-slate-400 hover:border-slate-100"}
                                            `,children:[s.jsx(B.icon,{size:20,className:"mb-2"}),s.jsx("span",{className:"text-[10px] font-black",children:B.label})]},B.id))})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{htmlFor:"space_id",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsxs("select",{id:"space_id",value:k.space_id||"",onChange:B=>T({...k,space_id:B.target.value||null}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100",children:[s.jsx("option",{value:"",children:" "}),t.map(B=>s.jsx("option",{value:B.space_id,children:B.space_name},B.space_id))]})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("label",{htmlFor:"batch_id",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Batch Code ()"}),s.jsxs("select",{id:"batch_id",value:k.batch_id||"",onChange:B=>T({...k,batch_id:B.target.value||null}),className:"w-full h-12 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100",children:[s.jsx("option",{value:"",children:" "}),n.map(B=>s.jsx("option",{value:B.batch_id,children:B.batch_code},B.batch_id))]})]}),s.jsxs("div",{className:"space-y-2 text-left col-span-2",children:[s.jsx("label",{htmlFor:"work_content",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"  "}),s.jsx("textarea",{id:"work_content",value:k.work_content,onChange:B=>T({...k,work_content:B.target.value}),className:"w-full h-24 p-5 bg-slate-50 border-none rounded-[2rem] font-bold text-sm ring-1 ring-slate-100 resize-none"})]}),s.jsxs("div",{className:"col-span-2 space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" / "}),s.jsx("button",{type:"button",onClick:X,className:"text-[10px] font-black text-indigo-600 px-3 py-1 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-all",children:"+  "})]}),s.jsx("div",{className:"space-y-2",children:k.input_materials.map(B=>s.jsxs("div",{className:"flex gap-2 items-center bg-slate-50 p-2 rounded-2xl border border-slate-100",children:[s.jsx("input",{type:"text",placeholder:"",value:B.name,onChange:W=>U(B.id,"name",W.target.value),className:"flex-2 h-9 px-3 bg-white border-none rounded-xl text-xs font-bold"}),s.jsx("input",{type:"text",placeholder:"",value:B.quantity,onChange:W=>U(B.id,"quantity",W.target.value),className:"flex-1 h-9 px-3 bg-white border-none rounded-xl text-xs font-bold w-16"}),s.jsxs("select",{value:B.unit,onChange:W=>U(B.id,"unit",W.target.value),className:"h-9 px-2 bg-white border-none rounded-xl text-xs font-bold shadow-sm",children:[s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"",children:""})]}),s.jsx("input",{type:"text",placeholder:"/",value:B.purpose,onChange:W=>U(B.id,"purpose",W.target.value),className:"flex-2 h-9 px-3 bg-white border-none rounded-xl text-xs font-bold"}),s.jsx("button",{type:"button",onClick:()=>te(B.id),className:"p-2 text-rose-400 hover:bg-rose-50 rounded-lg",children:s.jsx(Cs,{size:14})})]},B.id))})]}),s.jsx("div",{className:"col-span-2 space-y-4",children:s.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 rounded-3xl border border-slate-100",children:[s.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase",children:"Temp (C)"}),s.jsx("input",{type:"number",step:"0.1",value:k.env_data.temp,onChange:B=>T({...k,env_data:{...k.env_data,temp:B.target.value}}),className:"w-full h-9 px-3 bg-white border-none rounded-xl text-xs font-black shadow-sm"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase",children:"Humid (%)"}),s.jsx("input",{type:"number",step:"0.1",value:k.env_data.humidity,onChange:B=>T({...k,env_data:{...k.env_data,humidity:B.target.value}}),className:"w-full h-9 px-3 bg-white border-none rounded-xl text-xs font-black shadow-sm"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase",children:"CO2 (ppm)"}),s.jsx("input",{type:"number",value:k.env_data.co2,onChange:B=>T({...k,env_data:{...k.env_data,co2:B.target.value}}),className:"w-full h-9 px-3 bg-white border-none rounded-xl text-xs font-black shadow-sm"})]})]}),s.jsxs("button",{type:"button",onClick:async()=>{try{const B={temperature:24.5,humidity:65,co2:450};T({...k,env_data:{temp:B.temperature.toString(),humidity:B.humidity.toString(),co2:B.co2.toString()}})}catch(B){console.error("Sensor fetch failed:",B)}},className:"ml-4 p-3 bg-emerald-50 text-emerald-600 rounded-2xl hover:bg-emerald-100 transition-all flex flex-col items-center gap-1 min-w-[80px]",children:[s.jsx(wv,{size:18}),s.jsxs("span",{className:"text-[9px] font-black",children:["",s.jsx("br",{}),""]})]})]})}),s.jsxs("div",{className:"col-span-2 space-y-3",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" /"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>P("photo"),className:"flex-1 h-16 rounded-2xl border-2 border-dashed border-slate-200 text-slate-400 font-bold text-[10px] flex flex-col items-center justify-center gap-1 hover:bg-emerald-50 hover:border-emerald-200 hover:text-emerald-600 transition-all",children:[s.jsx(GC,{size:18}),"  "]}),s.jsxs("button",{type:"button",onClick:()=>P("receipt"),className:"flex-1 h-16 rounded-2xl border-2 border-dashed border-slate-200 text-slate-400 font-bold text-[10px] flex flex-col items-center justify-center gap-1 hover:bg-blue-50 hover:border-blue-200 hover:text-blue-600 transition-all",children:[s.jsx($A,{size:18})," "]})]}),k.photos?.length>0&&s.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:k.photos.map(B=>s.jsxs("div",{className:"relative aspect-square rounded-xl border border-slate-100 bg-slate-50 overflow-hidden group",children:[s.jsx("img",{src:j(B.path,B.displayPath),alt:B.label,className:"w-full h-full object-cover",onError:W=>{W.target.onerror=null,W.target.src="https://placehold.co/200x200?text=Image+Not+Found"}}),s.jsx("button",{onClick:()=>G(B.id),className:"absolute top-1 right-1 w-5 h-5 rounded-full bg-rose-500 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Ri,{size:12})})]},B.id))})]})]}),s.jsxs("div",{className:"p-8 bg-slate-50 flex gap-3",children:[s.jsx("button",{onClick:()=>h(!1),className:"flex-1 h-12 rounded-2xl font-black text-sm text-slate-400 hover:bg-slate-100",children:""}),s.jsx("button",{onClick:Z,className:"flex-1 h-12 bg-indigo-600 rounded-2xl font-black text-sm text-white shadow-xl shadow-indigo-100 hover:bg-indigo-500",children:f?"  ":"  "})]})]})]}),s.jsx("input",{type:"file",ref:g,onChange:H,className:"hidden",accept:"image/*"})]})},$Ie=()=>{const[a,e]=F.useState([]),[t,r]=F.useState([]),[n,i]=F.useState([]),[l,o]=F.useState(!1),{showAlert:c,showConfirm:d}=wa(),[u,h]=F.useState(!1),[f,p]=F.useState(null),[g,b]=F.useState(null),[w,j]=F.useState({harvest_id:0,batch_id:null,harvest_date:Wt().format("YYYY-MM-DD"),quantity:0,defective_quantity:0,loss_quantity:0,unit:"kg",grade:"A",traceability_code:"",memo:"",package_count:0,weight_per_package:0,package_unit:""}),[k,T]=F.useState(!1),[E,I]=F.useState(!1),[R,P]=F.useState(null),[H,G]=F.useState(!1),[X,U]=F.useState("live"),[te,Z]=F.useState({batch_id:"",weight:10,unit:"kg",grade:"A"}),[J,B]=F.useState(""),[W,$]=F.useState([]),Q=F.useRef(null);F.useEffect(()=>{if(w.package_count>0&&w.weight_per_package>0){const he=(w.package_count*w.weight_per_package).toFixed(2);j(pe=>({...pe,quantity:parseFloat(he)}))}},[w.package_count,w.weight_per_package]);const ne=async()=>{o(!0);try{const pe=new URLSearchParams(window.location.search).get("batchId"),[Re,Te,ke]=await Promise.all([Ke("get_production_harvests",pe?{batchId:parseInt(pe)}:{}),Ke("get_production_batches"),Ke("get_product_list")]);e(Re||[]),r(Te||[]),i(ke||[])}catch(he){console.error(he)}finally{o(!1)}};F.useEffect(()=>{ne();const he=async()=>{try{const pe=await Ke("get_company_info");b(pe)}catch(pe){console.error("[Harvest] Company fetch failed:",pe)}};return he(),window.addEventListener("company-info-changed",he),()=>window.removeEventListener("company-info-changed",he)},[]);const re=(he=null)=>{he?(p(he),j({...he,package_count:he.package_count||0,weight_per_package:he.weight_per_package||0,package_unit:he.package_unit||""}),T(!1)):(p(null),j({harvest_id:0,batch_id:null,harvest_date:Wt().format("YYYY-MM-DD"),quantity:0,defective_quantity:0,loss_quantity:0,unit:"kg",grade:"A",traceability_code:"",memo:"",package_count:0,weight_per_package:0,package_unit:""}),T(!1)),h(!0)},K=async()=>{if(!w.batch_id||!w.quantity){c("","  .");return}try{await Ke("save_harvest_record",{record:{...w,batch_id:parseInt(w.batch_id),quantity:parseFloat(w.quantity)||0,defective_quantity:parseFloat(w.defective_quantity)||0,loss_quantity:parseFloat(w.loss_quantity)||0,package_count:parseInt(w.package_count)||0,weight_per_package:parseFloat(w.weight_per_package)||0},completeBatch:k}),h(!1),ne(),c("","     .")}catch(he){c("",` : ${he}`)}},ae=async he=>{if(await d(" ","   ?"))try{await Ke("delete_harvest_record",{harvestId:he}),ne()}catch(Re){c("",` : ${Re}`)}},ce=he=>{const pe=t.find(Le=>String(Le.batch_id)===String(he.batch_id)),Re=n.find(Le=>String(Le.product_id)===String(pe?.product_id)),Te=he.traceability_code||(pe?.batch_code?`B-${pe.batch_code}`:`H-${he.harvest_id}`),ke={title:`${Re?.product_name||""} ${he.grade}`,code:Te,date:Wt(he.harvest_date).format("YYYY.MM.DD"),producer:g?.representative_name||"",qrValue:`HARVEST|${he.harvest_id}|${Te}|${Re?.product_name||"NA"}|${he.grade}`};P(ke),I(!0)},de=()=>{console.log("[Harvest]  executePrint button clicked. Job Data:",R),R&&(P_("harvest",R),I(!1))};return F.useEffect(()=>{H&&X==="live"&&Q.current&&Q.current.focus()},[H,X]),F.useEffect(()=>{const he=()=>{H&&X==="live"&&Q.current&&Q.current.focus()};return document.addEventListener("click",he),()=>document.removeEventListener("click",he)},[H,X]),s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-black text-slate-700",children:"   "}),s.jsx("p",{className:"text-xs font-bold text-slate-400 mt-1",children:"     ."})]}),s.jsxs("button",{onClick:()=>re(),className:"h-12 px-6 bg-slate-900 border-none rounded-2xl font-black text-sm text-white flex items-center gap-2 shadow-xl shadow-slate-200 transition-all active:scale-[0.95] hover:bg-slate-800",children:[s.jsx(kl,{size:18}),"   "]})]}),s.jsx("div",{className:"bg-white rounded-[2.5rem] border border-slate-100 shadow-xl shadow-slate-200/50 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50/50 border-b border-slate-100",children:[s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:" "}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"()"}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"/"}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center",children:""}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:""}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center",children:"QR"}),s.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-50",children:[a.map(he=>{const pe=t.find(Re=>Re.batch_id===he.batch_id);return s.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-100 flex items-center justify-center text-slate-500",children:s.jsx(Eo,{size:18})}),s.jsx("p",{className:"text-xs font-black text-slate-700",children:Wt(he.harvest_date).format("YYYY-MM-DD")})]})}),s.jsx("td",{className:"px-6 py-5 font-bold text-xs text-indigo-600",children:pe?.batch_code||"-"}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(UH,{size:14,className:"text-slate-300"}),s.jsxs("p",{className:"text-xs font-black text-slate-700",children:[he.quantity," ",he.unit]})]}),he.package_count>0&&s.jsxs("p",{className:"text-[10px] text-slate-400 font-bold ml-5",children:["(",he.package_count,he.package_unit," x ",he.weight_per_package,"kg)"]})]})}),s.jsxs("td",{className:"px-6 py-5",children:[s.jsxs("div",{className:"flex items-center gap-2 text-rose-500 mb-1",children:[s.jsx("span",{className:"text-[10px] font-black bg-rose-50 px-1.5 py-0.5 rounded",children:""}),s.jsxs("p",{className:"text-[11px] font-bold",children:[he.defective_quantity||0,he.unit]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[s.jsx("span",{className:"text-[10px] font-black bg-slate-100 px-1.5 py-0.5 rounded",children:""}),s.jsxs("p",{className:"text-[11px] font-bold",children:[he.loss_quantity||0,he.unit]})]})]}),s.jsx("td",{className:"px-6 py-5 text-center",children:(()=>{const Re=parseFloat(he.quantity)||0,Te=parseFloat(he.defective_quantity)||0,ke=parseFloat(he.loss_quantity)||0,Le=Re+Te+ke,Ne=Le>0?(Re/Le*100).toFixed(1):0;return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("span",{className:`text-[11px] font-black ${Ne>90?"text-teal-600":Ne>70?"text-indigo-600":"text-amber-600"}`,children:[Ne,"%"]}),s.jsx("div",{className:"w-12 h-1.5 bg-slate-100 rounded-full mt-1 overflow-hidden",children:s.jsx("div",{className:`h-full transition-all duration-1000 ${Ne>90?"bg-teal-500":Ne>70?"bg-indigo-500":"bg-amber-500"}`,style:{width:`${Ne}%`}})})]})})()}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("span",{className:`px-2 py-1 rounded-lg text-[10px] font-black ${he.grade==="A"?"bg-teal-50 text-teal-600":he.grade==="B"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-500"}`,children:[he.grade," "]})}),s.jsx("td",{className:"px-6 py-5 text-xs text-slate-500 font-bold",children:he.traceability_code||"-"}),s.jsx("td",{className:"px-6 py-5 text-center",children:s.jsx("button",{onClick:()=>ce(he),className:"p-2 text-slate-500 hover:text-indigo-600 transition-colors",children:s.jsx("span",{className:"material-symbols-rounded text-[18px]",children:"qr_code"})})}),s.jsx("td",{className:"px-6 py-5 text-right",children:s.jsx("button",{onClick:()=>ae(he.harvest_id),className:"p-2 text-slate-300 hover:text-red-500 transition-colors",children:s.jsx(Cs,{size:16})})})]},he.harvest_id)}),a.length===0&&!l&&s.jsx("tr",{children:s.jsxs("td",{colSpan:"6",className:"py-20 text-center",children:[s.jsx(_v,{size:48,className:"mx-auto text-slate-100 mb-3"}),s.jsx("p",{className:"text-slate-400 font-bold",children:"  ."})]})})]})]})})}),u&&s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md transition-opacity"}),s.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl relative z-10 overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"px-8 py-5 border-b border-slate-50 flex justify-between items-center",children:[s.jsxs("h3",{className:"text-lg font-black text-slate-800 flex items-center gap-2",children:[s.jsx(kl,{size:18,className:"text-indigo-600"}),f?"  ":"   "]}),s.jsx("button",{onClick:()=>h(!1),className:"text-slate-300 hover:text-slate-500 transition-colors",children:s.jsx(Cs,{size:18})})]}),s.jsxs("div",{className:"px-8 py-6 space-y-4",children:[s.jsxs("div",{className:"space-y-1 text-left",children:[s.jsx("label",{htmlFor:"batch_id",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"  "}),s.jsxs("select",{id:"batch_id",value:w.batch_id||"",onChange:he=>j({...w,batch_id:he.target.value}),className:"w-full h-11 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100 focus:ring-indigo-100 transition-all outline-none",children:[s.jsx("option",{value:"",children:" "}),t.map(he=>s.jsxs("option",{value:he.batch_id,children:["[",he.batch_code,"] ",n.find(pe=>pe.product_id===he.product_id)?.product_name||" "]},he.batch_id))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1 text-left",children:[s.jsx("label",{htmlFor:"harvest_date",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{id:"harvest_date",type:"date",value:w.harvest_date,onChange:he=>j({...w,harvest_date:he.target.value}),className:"w-full h-11 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100"})]}),s.jsxs("div",{className:"space-y-1 text-left",children:[s.jsx("label",{htmlFor:"grade",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsxs("select",{id:"grade",value:w.grade,onChange:he=>j({...w,grade:he.target.value}),className:"w-full h-11 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100",children:[s.jsx("option",{value:"A",children:"A ()"}),s.jsx("option",{value:"B",children:"B ()"}),s.jsx("option",{value:"C",children:"C ()"})]})]})]}),s.jsxs("div",{className:"p-4 bg-slate-50/50 rounded-[1.5rem] border border-slate-100 space-y-2.5",children:[s.jsxs("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest ml-1 flex items-center gap-2",children:[s.jsx(_v,{size:12}),"    ()"]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[8px] font-bold text-slate-400 ml-1",children:"( )"}),s.jsx("input",{type:"number",value:w.package_count,onChange:he=>j({...w,package_count:he.target.value}),className:"w-full h-9 px-4 bg-white border-none rounded-xl font-bold text-xs ring-1 ring-slate-100 text-right"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[8px] font-bold text-slate-400 ml-1",children:" "}),s.jsx("input",{type:"number",step:"0.01",value:w.weight_per_package,onChange:he=>j({...w,weight_per_package:he.target.value}),className:"w-full h-9 px-4 bg-white border-none rounded-xl font-bold text-xs ring-1 ring-slate-100 text-right"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-[8px] font-bold text-slate-400 ml-1",children:""}),s.jsx("input",{type:"text",value:w.package_unit,onChange:he=>j({...w,package_unit:he.target.value}),className:"w-full h-9 px-4 bg-white border-none rounded-xl font-bold text-xs ring-1 ring-slate-100"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1 text-left",children:[s.jsx("label",{htmlFor:"quantity",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"  ()"}),s.jsx("input",{id:"quantity",type:"number",step:"0.1",value:w.quantity,onChange:he=>j({...w,quantity:he.target.value}),className:"w-full h-11 px-5 bg-slate-50 border-none rounded-2xl font-black text-sm ring-1 ring-indigo-100 text-indigo-600 text-right"})]}),s.jsxs("div",{className:"space-y-1 text-left",children:[s.jsx("label",{htmlFor:"unit",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:" "}),s.jsx("input",{id:"unit",type:"text",value:w.unit,onChange:he=>j({...w,unit:he.target.value}),className:"w-full h-11 px-5 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-rose-400 uppercase tracking-widest ml-1",children:"() "}),s.jsx("input",{type:"number",step:"0.1",value:w.defective_quantity,onChange:he=>j({...w,defective_quantity:he.target.value}),className:"w-full h-11 px-5 bg-rose-50/30 border-none rounded-2xl font-black text-sm ring-1 ring-rose-100 text-rose-600 text-right"})]}),s.jsxs("div",{className:"space-y-1 text-left",children:[s.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"/ "}),s.jsx("input",{type:"number",step:"0.1",value:w.loss_quantity,onChange:he=>j({...w,loss_quantity:he.target.value}),className:"w-full h-11 px-5 bg-slate-50 border-none rounded-2xl font-black text-sm ring-1 ring-slate-200 text-slate-400 text-right"})]})]}),!f&&s.jsxs("div",{className:"p-4 bg-indigo-50/50 rounded-2xl border border-indigo-100 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-600 flex items-center justify-center text-white",children:s.jsx($ae,{size:16})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-indigo-900",children:"  "}),s.jsx("p",{className:"text-[9px] text-indigo-400 font-bold",children:"   ?"})]})]}),s.jsx("button",{onClick:()=>T(!k),className:`w-10 h-5 rounded-full transition-all relative ${k?"bg-indigo-600":"bg-slate-200"}`,children:s.jsx("div",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full transition-all ${k?"left-5.5":"left-0.5"}`})})]}),s.jsxs("div",{className:"space-y-1 text-left",children:[s.jsx("label",{htmlFor:"memo",className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"/"}),s.jsx("textarea",{id:"memo",value:w.memo,onChange:he=>j({...w,memo:he.target.value}),className:"w-full h-20 p-4 bg-slate-50 border-none rounded-2xl font-bold text-sm ring-1 ring-slate-100 resize-none outline-none"})]})]}),s.jsxs("div",{className:"px-8 py-5 bg-slate-50 flex gap-3",children:[s.jsx("button",{onClick:()=>h(!1),className:"flex-1 h-12 rounded-2xl font-black text-sm text-slate-400",children:""}),s.jsx("button",{onClick:K,className:"flex-[2] h-12 bg-slate-900 rounded-2xl font-black text-sm text-white shadow-xl hover:bg-slate-800 transition-all active:scale-[0.98]",children:"    "})]})]})]}),E&&R&&s.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/80 backdrop-blur-sm"}),s.jsx("div",{className:"bg-white w-full max-w-sm rounded-[3rem] shadow-2xl relative z-10 overflow-hidden animate-in zoom-in-95 duration-200",children:s.jsxs("div",{className:"p-8 flex flex-col items-center",children:[s.jsx("div",{className:"w-20 h-20 bg-indigo-50 rounded-3xl flex items-center justify-center text-indigo-600 mb-6",children:s.jsx(M0,{size:40})}),s.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:"QR  "}),s.jsxs("p",{className:"text-xs font-bold text-slate-400 mb-8 text-center px-6",children:["    ",s.jsx("br",{})," ?"]}),s.jsxs("div",{className:"w-full bg-slate-50 rounded-[2.5rem] p-8 border border-slate-100 mb-8 flex flex-row items-center gap-6",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"bg-white p-2 rounded-xl border-2 border-slate-900 leading-[0]",children:s.jsx(vb,{value:R.qrValue,size:90,level:"M"})}),s.jsx("div",{className:"text-[9px] font-black border border-slate-900 px-1.5 py-0.5 bg-white whitespace-nowrap",children:"GAP  "})]}),s.jsxs("div",{className:"flex-1 flex flex-col justify-center min-w-0",children:[s.jsxs("div",{className:"border-t-2 border-slate-900 pt-2 pb-1 space-y-2",children:[s.jsxs("div",{className:"flex items-center text-[11px] leading-none",children:[s.jsx("span",{className:"font-black text-slate-900 w-12 shrink-0",children:":"}),s.jsx("span",{className:"font-black text-slate-900 truncate",children:R.title})]}),s.jsxs("div",{className:"flex items-center text-[11px] leading-none",children:[s.jsx("span",{className:"font-black text-slate-900 w-12 shrink-0",children:":"}),s.jsx("span",{className:"font-black text-slate-900 truncate",children:R.date})]}),s.jsxs("div",{className:"flex items-center text-[11px] leading-none",children:[s.jsx("span",{className:"font-black text-slate-900 w-12 shrink-0",children:":"}),s.jsx("span",{className:"font-black text-slate-900 truncate",children:R.producer})]})]}),s.jsx("div",{className:"text-[11px] font-black text-slate-900 pt-2 border-t-2 border-slate-900 mt-1 truncate",children:R.code}),s.jsx("div",{className:"text-[7px] font-bold text-slate-400 text-right mt-1 opacity-60",children:"Smart Mycelium Logic v3"})]})]}),s.jsxs("div",{className:"flex gap-3 w-full",children:[s.jsx("button",{onClick:()=>I(!1),className:"flex-1 h-14 rounded-2xl font-black text-slate-400 hover:bg-slate-50 transition-colors",children:""}),s.jsxs("button",{onClick:de,className:"flex-[2] h-14 bg-slate-900 rounded-2xl font-black text-white shadow-xl shadow-slate-200 flex items-center justify-center gap-2 hover:bg-slate-800 transition-all active:scale-[0.98]",children:[s.jsx("span",{className:"material-symbols-rounded text-[20px]",children:"print"}),"  "]})]})]})})]})]})},GV={plant:"/",water:"/",fertilize:"/",pesticide:"/",harvest:"/",process:"/",clean:"/",inspect:"/",education:"/"},qIe={all:"    ",chemical:"    ",sanitation:"    ",harvest:"    ",education:"     "},XIe={all:null,chemical:["pesticide","fertilize"],sanitation:["clean","inspect","water"],harvest:["harvest","process"],education:["education"]},ZIe=({startDate:a,endDate:e,includeAttachments:t,includeApproval:r,reportType:n="all",onClose:i})=>{const[l,o]=F.useState([]),[c,d]=F.useState(null),[u,h]=F.useState(!0),[f,p]=F.useState(!1),[g,b]=F.useState({}),w=async()=>{h(!0);try{let E=localStorage.getItem("API_BASE_URL")||"";E.endsWith("/")&&(E=E.slice(0,-1)),!E&&window.location.port==="5173"&&(E="http://localhost:3000");const[I,R]=await Promise.all([Ke("get_production_logs",{startDate:a,endDate:e,limit:1e3}),Ke("get_company_info")]);let P=I||[];const H=XIe[n];H&&(P=(I||[]).filter(U=>H.includes(U.work_type)));const G=[...P].reverse();o(G),d(R);const X=(U,te)=>{if(!U)return"";if(U.startsWith("http"))return U;let Z=U;U.includes("asset.localhost")&&(Z=U.replace(/https?:\/\/asset\.localhost\//,"").replace(/asset\.localhost\//,""));try{Z=decodeURIComponent(Z)}catch{}if(/^[a-zA-Z]:\\|^\\\\/.test(Z)||Z.includes("\\")){const B=Z.split(/[\\/]/).pop();return`${E}/api/production/media/${B}`}const J=Z.split(/[\\/]/).pop();return`${E}/api/production/media/${J}`};if(t){const U={};G.forEach(te=>{te.photos&&Array.isArray(te.photos)&&te.photos.forEach(Z=>{Z.path&&(U[Z.path]=X(Z.path,Z.displayPath))})}),b(U)}}catch(E){console.error("Report data load failed:",E)}finally{h(!1)}};F.useEffect(()=>{w()},[a,e,n,t]);const j=()=>{const E=document.getElementById("printable-report");if(!E){showAlert("","    .");return}const I=`
            <div id="printable-report" class="p-8 bg-white text-slate-900" style="background: white !important; color: #111827 !important;">
                ${E.innerHTML}
                <style>
                    @page { size: A4; margin: 15mm; }
                    #printable-report { font-family: 'Noto Sans KR', sans-serif; }
                    .bg-slate-800 { background-color: #1e293b !important; color: white !important; -webkit-print-color-adjust: exact; }
                    .text-white { color: white !important; }
                    .border-slate-800 { border-color: #1e293b !important; }
                    .bg-emerald-50 { background-color: #ecfdf5 !important; -webkit-print-color-adjust: exact; }
                    .text-emerald-600 { color: #059669 !important; }
                    .bg-indigo-600 { background-color: #4f46e5 !important; -webkit-print-color-adjust: exact; }
                    .bg-indigo-50 { background-color: #eef2ff !important; -webkit-print-color-adjust: exact; }
                    .text-indigo-700 { color: #4338ca !important; }
                    img { max-width: 100%; height: auto; }
                    .page-break { page-break-before: always; }
                    .break-inside-avoid { break-inside: avoid; }
                    * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
                </style>
            </div>
        `;oo(I)},{tableLogs:k,attachmentPhotos:T}=F.useMemo(()=>{let E=1;const I=[];return{tableLogs:l.map(P=>{const H=[];return P.photos&&Array.isArray(P.photos)&&P.photos.forEach(G=>{H.push(E),I.push({...G,globalIdx:E,log_date:P.log_date,work_type:P.work_type,log_id:P.log_id}),E++}),{...P,photoIndices:H}}),attachmentPhotos:I}},[l]);return u?s.jsx("div",{className:"fixed inset-0 z-[200] bg-white flex items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-indigo-100 border-t-indigo-600 rounded-full animate-spin"}),s.jsx("p",{className:"text-sm font-black text-slate-400",children:"   ..."})]})}):s.jsxs("div",{id:"report-modal-root",className:"fixed inset-0 z-[200] bg-slate-900/60 backdrop-blur-md flex items-center justify-center p-4 print:p-0 print:bg-white print:block print:relative print:z-0",children:[f&&s.jsxs("div",{className:"fixed inset-0 z-[300] flex items-center justify-center animate-in fade-in duration-300",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm"}),s.jsxs("div",{className:"relative bg-white p-12 rounded-[3.5rem] shadow-[0_35px_60px_-15px_rgba(0,0,0,0.3)] flex flex-col items-center gap-8 border-2 border-indigo-50 animate-in zoom-in-95 duration-500",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-24 h-24 border-8 border-indigo-50 rounded-full"}),s.jsx("div",{className:"absolute top-0 left-0 w-24 h-24 border-8 border-indigo-600 border-t-transparent rounded-full animate-spin"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx(FH,{className:"text-indigo-600 animate-bounce",size:32})})]}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("h3",{className:"text-2xl font-black text-slate-800 tracking-tight",children:"PDF   "}),s.jsxs("p",{className:"text-sm font-bold text-slate-400 max-w-[200px] leading-relaxed",children:["   ",s.jsx("br",{}),"   ."]})]})]})]}),s.jsxs("div",{className:"fixed top-8 right-8 flex flex-col gap-4 print:hidden z-[210]",children:[s.jsx("button",{onClick:i,className:"w-14 h-14 bg-white text-slate-400 rounded-2xl shadow-2xl hover:text-rose-500 hover:scale-110 active:scale-95 transition-all flex items-center justify-center group",title:"",children:s.jsx(Ri,{size:32,className:"group-hover:rotate-90 transition-transform duration-300"})}),s.jsx("div",{className:"h-px bg-white/20 w-full"}),s.jsxs("button",{onClick:j,className:"h-14 px-8 rounded-2xl font-black text-sm shadow-2xl transition-all flex items-center gap-3 bg-indigo-600 text-white shadow-indigo-500/30 hover:bg-indigo-700 hover:-translate-y-1 active:translate-y-0",children:[s.jsx(HH,{size:20}),"  / PDF "]})]}),s.jsx("div",{className:"w-full max-w-[210mm] max-h-[92vh] bg-white rounded-[3rem] shadow-[0_50px_100px_-20px_rgba(0,0,0,0.5)] overflow-y-auto custom-scrollbar print:max-h-none print:shadow-none print:rounded-none print:overflow-visible print:w-full relative",children:s.jsxs("div",{id:"printable-report",className:"p-[20mm] min-h-[297mm] bg-white text-slate-900 print:p-[10mm]",children:[s.jsxs("div",{className:"flex justify-between items-start mb-12",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("div",{className:"w-2 h-8 bg-indigo-600 rounded-full"}),s.jsx("h1",{className:"text-3xl font-black tracking-tighter text-slate-800",children:qIe[n]||"   "})]}),s.jsxs("p",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest pl-4",children:["GAP/HACCP Certification Records - ",n.toUpperCase()]}),s.jsx("div",{className:"pl-4",children:s.jsxs("span",{className:"inline-block px-3 py-1 bg-slate-100 rounded-lg text-xs font-black text-slate-500",children:[" : ",Wt(a).format("YYYY MM DD")," ~ ",Wt(e).format("YYYY MM DD")]})})]}),r&&s.jsxs("div",{className:"flex border-2 border-slate-200 rounded-xl overflow-hidden shrink-0",children:[s.jsx("div",{className:"w-8 bg-slate-50 border-r-2 border-slate-200 flex items-center justify-center py-2",children:s.jsx("p",{className:"text-[10px] font-black text-slate-400",style:{writingMode:"vertical-rl"},children:""})}),["","",""].map((E,I)=>s.jsxs("div",{className:`w-20 text-center ${I<2?"border-r-2 border-slate-200":""}`,children:[s.jsx("div",{className:"py-1 bg-slate-50 border-b-2 border-slate-200 text-[10px] font-black text-slate-500",children:E}),s.jsx("div",{className:"h-16"})]},E))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-px bg-slate-200 border-2 border-slate-200 rounded-2xl overflow-hidden mb-8 shadow-sm",children:[s.jsxs("div",{className:"bg-slate-50 p-4 flex",children:[s.jsx("span",{className:"w-24 text-[10px] font-black text-slate-400 uppercase tracking-wider shrink-0",children:"  "}),s.jsx("span",{className:"text-sm font-black text-slate-700",children:c?.company_name||"-"})]}),s.jsxs("div",{className:"bg-slate-50 p-4 flex",children:[s.jsx("span",{className:"w-24 text-[10px] font-black text-slate-400 uppercase tracking-wider shrink-0",children:"  "}),s.jsx("span",{className:"text-sm font-black text-slate-700",children:c?.representative_name||"-"})]}),s.jsxs("div",{className:"bg-white p-4 flex",children:[s.jsx("span",{className:"w-24 text-[10px] font-black text-slate-400 uppercase tracking-wider shrink-0",children:"GAP "}),s.jsx("span",{className:"text-sm font-black text-slate-700",children:c?.certification_info?.gap||"-"})]}),s.jsxs("div",{className:"bg-white p-4 flex",children:[s.jsx("span",{className:"w-24 text-[10px] font-black text-slate-400 uppercase tracking-wider shrink-0",children:"HACCP"}),s.jsx("span",{className:"text-sm font-black text-slate-700",children:c?.certification_info?.haccp||"-"})]})]}),s.jsx("div",{className:"border-2 border-slate-800 rounded-2xl overflow-hidden mb-12 shadow-md",children:s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-800 text-white",children:[s.jsx("th",{className:"p-3 text-[10px] font-black border-r border-slate-700 w-16 text-center",children:""}),s.jsx("th",{className:"p-3 text-[10px] font-black border-r border-slate-700 w-24 text-center",children:""}),s.jsx("th",{className:"p-3 text-[10px] font-black border-r border-slate-700 text-left",children:"  "}),s.jsx("th",{className:"p-3 text-[10px] font-black border-r border-slate-700 w-32 text-left",children:" "}),s.jsx("th",{className:"p-3 text-[10px] font-black border-r border-slate-700 w-20 text-center",children:""}),s.jsx("th",{className:"p-3 text-[10px] font-black w-20 text-center",children:""})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[k.map(E=>{const I=E.input_materials||[],R=E.env_data||{};return s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors break-inside-avoid",children:[s.jsx("td",{className:"p-3 text-xs font-black text-slate-500 border-r border-slate-100 text-center",children:Wt(E.log_date).format("MM-DD")}),s.jsx("td",{className:"p-3 text-center border-r border-slate-100",children:s.jsx("span",{className:"px-2 py-1 bg-indigo-50 text-indigo-700 rounded-lg text-[10px] font-black",children:GV[E.work_type]||E.work_type})}),s.jsxs("td",{className:"p-3 text-xs font-medium text-slate-700 leading-relaxed border-r border-slate-100",children:[E.work_content,E.photoIndices.length>0&&s.jsxs("div",{className:"mt-1 text-[10px] font-black text-emerald-600",children:["( ",E.photoIndices.join(", "),")"]})]}),s.jsx("td",{className:"p-3 text-[10px] font-bold text-slate-500 border-r border-slate-100",children:I.length>0?s.jsx("div",{className:"space-y-1",children:I.map((P,H)=>s.jsxs("div",{className:"flex justify-between border-b border-dotted border-slate-200 last:border-none pb-0.5",children:[s.jsx("span",{children:P.name}),s.jsxs("span",{className:"text-slate-400",children:[P.quantity,P.unit]})]},H))}):"-"}),s.jsxs("td",{className:"p-3 text-[10px] font-black text-slate-400 border-r border-slate-100 text-center leading-tight",children:[R.temp&&s.jsxs("div",{children:[R.temp,"C"]}),R.humidity&&s.jsxs("div",{children:[R.humidity,"%"]}),R.co2&&s.jsxs("div",{children:[R.co2,"ppm"]}),R.light&&s.jsxs("div",{children:[R.light,"lx"]})]}),s.jsx("td",{className:"p-3 text-xs font-black text-slate-700 text-center",children:E.worker_name===""?c?.representative_name||"":E.worker_name})]},E.log_id)}),l.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"py-20 text-center text-slate-400 font-bold italic",children:"  ."})})]})]})}),t&&l.some(E=>E.photos?.length>0)&&s.jsxs("div",{className:"page-break mt-12",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-8 border-b-2 border-slate-100 pb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-emerald-50 text-emerald-600 rounded-xl flex items-center justify-center",children:s.jsx(di,{size:24})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-black text-slate-800 tracking-tight",children:"  "}),s.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Visual Evidence Attachments"})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-8",children:T.map(E=>s.jsxs("div",{className:"bg-slate-50 rounded-2xl border-2 border-slate-100 p-4 break-inside-avoid shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"relative aspect-[4/3] rounded-xl overflow-hidden border border-slate-200 mb-4 bg-white",children:[s.jsx("img",{src:g[E.path]||(E.path?E.path.startsWith("http")?E.path:`${(localStorage.getItem("API_BASE_URL")||"").replace(/\/$/,"")}/api/production/media/${E.path.split(/[\\/]/).pop()}`:""),alt:E.label,className:"w-full h-full object-cover",onError:I=>{console.error("Image load failed for:",E.path),I.target.src!=="https://placehold.co/400x300?text=Image+Not+Found"&&(I.target.onerror=null,I.target.src="https://placehold.co/400x300?text=Image+Not+Found")}}),s.jsxs("div",{className:"absolute top-3 left-3 px-2 py-1 bg-black/60 backdrop-blur-md text-white text-[9px] font-black rounded-lg",children:[" ",E.globalIdx]})]}),s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-slate-400 mb-1",children:E.label||" "}),s.jsx("p",{className:"text-xs font-black text-slate-800",children:Wt(E.log_date).format("YYYY MM DD")})]}),s.jsx("div",{className:"text-right",children:s.jsx("span",{className:"text-[10px] font-bold text-indigo-600 px-2 py-1 bg-indigo-50 rounded-md",children:GV[E.work_type]||E.work_type})})]})]},`${E.log_id}-${E.globalIdx}`))})]}),s.jsx("div",{className:"mt-20 pt-8 border-t border-slate-100 text-center",children:s.jsx("p",{className:"text-[10px] font-black text-slate-300 italic",children:"Generated by Mycelium Smart Farm Integration System v2.0"})})]})}),s.jsx("style",{children:`
                .custom-scrollbar::-webkit-scrollbar { width: 6px; }
                `})]})},KIe=({initialTab:a="dashboard"})=>{const[e,t]=F.useState(a),{showAlert:r,showConfirm:n}=wa(),[i,l]=F.useState(!1),[o,c]=F.useState({activeBatches:0,todayLogs:0,harvestThisMonth:0,monthlyYield:0,pendingActions:0}),[d,u]=F.useState([]),[h,f]=F.useState([]),[p,g]=F.useState(!1),[b,w]=F.useState(!0),[j,k]=F.useState(!0),[T,E]=F.useState("all"),[I,R]=F.useState({start:Wt().startOf("month").format("YYYY-MM-DD"),end:Wt().endOf("month").format("YYYY-MM-DD")}),P=async()=>{try{const[X,U,te,Z]=await Promise.all([Ke("get_production_batches"),Ke("get_production_logs",{limit:100}),Ke("get_production_harvests",{limit:50}),Ke("get_production_spaces")]);f(Z),u(U.slice(0,5));const J=Wt().format("YYYY-MM-DD"),B=Wt().format("YYYY-MM"),W=te.filter(K=>K.harvest_date.startsWith(B)),$=W.reduce((K,ae)=>K+(parseFloat(ae.quantity)||0),0),Q=W.reduce((K,ae)=>K+(parseFloat(ae.defective_quantity)||0),0),ne=W.reduce((K,ae)=>K+(parseFloat(ae.loss_quantity)||0),0),re=$+Q+ne;c({activeBatches:X.filter(K=>K.status==="active"||K.status==="growing").length,todayLogs:U.filter(K=>K.log_date===J).length,harvestThisMonth:$,monthlyYield:re>0?($/re*100).toFixed(1):100,pendingActions:X.filter(K=>K.status==="growing"&&Wt(K.expected_harvest_date).isBefore(Wt().add(2,"day"))).length})}catch(X){console.error("Dashboard data load failed:",X)}};F.useEffect(()=>{t(a)},[a]),F.useEffect(()=>{e==="dashboard"&&P()},[e]);const H=[{id:"dashboard",label:" ",icon:l2},{id:"spaces",label:"/ ",icon:c2},{id:"batches",label:"/ ",icon:B_},{id:"logs",label:"(GAP/HACCP)",icon:no},{id:"harvest",label:"   ",icon:_v}],G=()=>{switch(e){case"spaces":return s.jsx(UIe,{});case"batches":return s.jsx(GIe,{});case"logs":return s.jsx(YIe,{});case"harvest":return s.jsx($Ie,{});default:return s.jsx(QIe,{stats:o,recentLogs:d,spaces:h})}};return s.jsxs("div",{className:"flex flex-col h-full bg-slate-50/50",children:[s.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 lg:px-8 min-[2000px]:px-12 pt-6 lg:pt-8 min-[2000px]:pt-12 pb-1 shadow-sm relative z-10",children:[s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"w-6 h-1 bg-indigo-600 rounded-full"}),s.jsx("span",{className:"text-[9px] font-black tracking-[0.2em] text-indigo-600 uppercase",children:"Certification Management System"})]}),s.jsxs("h1",{className:"text-3xl font-black text-slate-600 tracking-tighter",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["GAP/HACCP  ",s.jsx("span",{className:"text-slate-300 font-light ml-1 text-xl",children:"Certification"})]})]})}),s.jsxs("div",{className:"flex justify-end items-center gap-3 mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-slate-50 rounded-xl border border-slate-100",children:[s.jsx(Eo,{size:12,className:"text-slate-400"}),s.jsx("input",{type:"date",value:I.start,onChange:X=>R(U=>({...U,start:X.target.value})),className:"bg-transparent border-none text-[11px] font-black text-slate-600 focus:ring-0 p-0 w-36"}),s.jsx("span",{className:"text-slate-300 font-bold text-[10px]",children:"~"}),s.jsx("input",{type:"date",value:I.end,onChange:X=>R(U=>({...U,end:X.target.value})),className:"bg-transparent border-none text-[11px] font-black text-slate-600 focus:ring-0 p-0 w-36"})]}),s.jsxs("div",{className:"flex items-center gap-3 ml-2",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",checked:b,onChange:X=>w(X.target.checked),className:"w-3 h-3 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),s.jsx("span",{className:"text-[10px] font-black text-slate-500 group-hover:text-indigo-600 transition-colors uppercase tracking-wider whitespace-nowrap",children:""})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",checked:j,onChange:X=>k(X.target.checked),className:"w-3 h-3 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),s.jsx("span",{className:"text-[10px] font-black text-slate-500 group-hover:text-indigo-600 transition-colors uppercase tracking-wider whitespace-nowrap",children:""})]})]}),s.jsx("div",{className:"h-5 w-px bg-slate-200 mx-1"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wider whitespace-nowrap",children:""}),s.jsxs("select",{value:T,onChange:X=>E(X.target.value),className:"bg-slate-50 border-slate-200 text-[11px] font-black text-slate-700 rounded-xl focus:ring-indigo-500 py-0.5 min-w-[130px]",children:[s.jsx("option",{value:"all",children:" "}),s.jsx("option",{value:"chemical",children:"   "}),s.jsx("option",{value:"sanitation",children:"  "}),s.jsx("option",{value:"harvest",children:"   "}),s.jsx("option",{value:"education",children:"  "})]})]}),s.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-1.5 rounded-xl font-black text-[11px] bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-100 transition-all flex items-center gap-2",children:[s.jsx(cc,{size:14}),"  "]})]}),s.jsx("div",{className:"flex gap-1",children:H.map(X=>s.jsxs("button",{onClick:()=>t(X.id),className:`
                                flex items-center gap-2 px-5 py-1.5 rounded-t-lg font-bold text-xs transition-all
                                ${e===X.id?"bg-slate-50 text-indigo-600 border-t-2 border-indigo-600 -mb-[1px]":"text-slate-400 hover:bg-slate-50 hover:text-slate-600"}
                            `,children:[s.jsx(X.icon,{size:14}),X.label]},X.id))})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:G()}),p&&s.jsx("div",{className:"fixed inset-0 z-[999999] bg-slate-900/60 backdrop-blur-sm flex flex-col items-center justify-center animate-in fade-in duration-300",children:s.jsxs("div",{className:"bg-white p-10 rounded-[3rem] shadow-2xl flex flex-col items-center gap-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-20 h-20 border-4 border-indigo-100 rounded-full"}),s.jsx("div",{className:"absolute top-0 left-0 w-20 h-20 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-xl font-black text-slate-800 mb-1",children:"  ..."}),s.jsxs("p",{className:"text-xs font-bold text-slate-400 px-4",children:["       .",s.jsx("br",{}),"  ."]})]})]})}),i&&s.jsx(ZIe,{startDate:I.start,endDate:I.end,includeAttachments:b,includeApproval:j,reportType:T,onClose:()=>l(!1)})]})},QIe=({stats:a,recentLogs:e=[],spaces:t=[]})=>{const r={plant:{label:"/",color:"emerald"},water:{label:"/",color:"blue"},fertilize:{label:"/",color:"purple"},pesticide:{label:"/",color:"red"},harvest:{label:"/",color:"teal"},process:{label:"/",color:"indigo"},clean:{label:"/",color:"indigo"},inspect:{label:"/",color:"amber"},education:{label:"/",color:"slate"}};return s.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{label:" ",value:`${a.activeBatches}`,icon:B_,color:"blue"},{label:"  ",value:`${a.todayLogs}`,icon:xh,color:"indigo"},{label:" ",value:`${a.monthlyYield}% (${a.harvestThisMonth}kg)`,icon:_v,color:"teal"},{label:" ",value:`${a.pendingActions}`,icon:bb,color:"amber"}].map((n,i)=>s.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-100 flex items-center gap-5",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl bg-${n.color}-50 text-${n.color}-600 flex items-center justify-center`,children:s.jsx(n.icon,{size:28})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest mb-1",children:n.label}),s.jsx("p",{className:"text-2xl font-black text-slate-700",children:n.value})]})]},i))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 bg-white rounded-[2.5rem] shadow-xl shadow-slate-200/50 border border-slate-100 overflow-hidden",children:[s.jsx("div",{className:"p-8 border-b border-slate-50 flex justify-between items-center",children:s.jsxs("h3",{className:"text-lg font-black text-slate-700 flex items-center gap-2",children:[s.jsx(no,{className:"text-indigo-500",size:20}),"   "]})}),s.jsxs("div",{className:"divide-y divide-slate-50",children:[e.map(n=>{const i=t.find(o=>o.space_id===n.space_id),l=r[n.work_type]||r.plant;return s.jsxs("div",{className:"p-6 flex items-start gap-4 hover:bg-slate-50/80 transition-colors",children:[s.jsxs("div",{className:"w-12 h-12 rounded-xl bg-slate-100 flex flex-col items-center justify-center shrink-0",children:[s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:Wt(n.log_date).format("MMM")}),s.jsx("span",{className:"text-lg font-black text-slate-700 mt-[-4px]",children:Wt(n.log_date).format("DD")})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("h4",{className:"font-bold text-slate-700 text-sm",children:l.label}),s.jsx("span",{className:"px-2 py-0.5 rounded-md bg-blue-50 text-blue-600 text-[10px] font-bold",children:i?.space_name||" "})]}),s.jsx("p",{className:"text-xs text-slate-500 line-clamp-1",children:n.work_content}),s.jsxs("div",{className:"flex items-center gap-3 mt-2 text-[10px] font-bold text-slate-400",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(QA,{size:10})," ",n.worker_name]}),n.env_data?.temp&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(wb,{size:10})," ",n.env_data.temp,"C"]}),n.env_data?.humidity&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(x0,{size:10})," ",n.env_data.humidity,"%"]})]})]})]},n.log_id)}),e.length===0&&s.jsx("div",{className:"p-20 text-center",children:s.jsx("p",{className:"text-slate-400 font-bold",children:"   ."})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-slate-900 rounded-[2.5rem] p-8 text-white shadow-2xl shadow-slate-900/30 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-32 h-32 bg-indigo-500/20 blur-3xl rounded-full"}),s.jsxs("h3",{className:"text-lg font-black mb-6 flex items-center gap-2",children:[s.jsx(Eo,{size:20,className:"text-indigo-400"}),"   "]}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-1 h-12 rounded-full bg-teal-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-teal-400 uppercase tracking-widest",children:""}),s.jsx("p",{className:"font-bold text-sm",children:"GAP/HACCP  "})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-1 h-12 rounded-full bg-amber-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black text-amber-400 uppercase tracking-widest",children:""}),s.jsxs("p",{className:"font-bold text-sm",children:["   ",a.todayLogs===0?"":""]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 shadow-xl shadow-slate-200/50 border border-slate-100",children:[s.jsxs("h3",{className:"text-lg font-black text-slate-700 mb-6 flex items-center gap-2",children:[s.jsx(wv,{size:20,className:"text-teal-500"}),"   (HACCP)"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 rounded-2xl bg-slate-50 border border-slate-100",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-[11px] font-black text-slate-500",children:" "}),s.jsx("span",{className:"text-[11px] font-black text-teal-600",children:"  "})]}),s.jsx("div",{className:"w-full bg-slate-200 h-1.5 rounded-full overflow-hidden",children:s.jsx("div",{className:"bg-teal-500 h-full w-[100%]"})})]}),s.jsxs("div",{className:"p-4 rounded-2xl bg-slate-50 border border-slate-100",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-[11px] font-black text-slate-500",children:" "}),s.jsx("span",{className:"text-[11px] font-black text-indigo-600",children:""})]}),s.jsx("div",{className:"w-full bg-slate-200 h-1.5 rounded-full overflow-hidden",children:s.jsx("div",{className:"bg-indigo-500 h-full w-[100%]"})})]})]})]})]})]})]})},JIe=()=>{const[a,e]=F.useState("flowchart"),[t,r]=F.useState(""),n=[{id:"flowchart",label:" ",icon:s.jsx(VS,{size:18})},{id:"dashboard",label:"1. ",icon:s.jsx(l2,{size:18})},{id:"sales",label:"2.  ",icon:s.jsx(mx,{size:18})},{id:"customer",label:"3.  ",icon:s.jsx(gx,{size:18})},{id:"inventory_prod",label:"4. //",icon:s.jsx(mh,{size:18})},{id:"finance",label:"5. / ",icon:s.jsx(G8,{size:18})},{id:"intel",label:"6.  ",icon:s.jsx(U8,{size:18})},{id:"exp",label:"7.  ",icon:s.jsx(XH,{size:18})},{id:"schedule",label:"8.   ",icon:s.jsx(Eo,{size:18})},{id:"settings",label:"9.   ",icon:s.jsx(sx,{size:18})},{id:"rescue",label:"10.   ",icon:s.jsx(Y8,{size:18})}],i=h=>{e(h);const f=document.getElementById(h);f&&f.scrollIntoView({behavior:"smooth",block:"start"})},l=({title:h,children:f})=>s.jsxs("div",{className:"my-10 relative group",children:[s.jsx("div",{className:"absolute inset-0 bg-amber-400/5 rounded-3xl blur-xl group-hover:bg-amber-400/10 transition-colors"}),s.jsx("div",{className:"relative bg-[#fdfaf1] border-l-4 border-amber-400 rounded-2xl p-8 shadow-sm border border-amber-100",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center shrink-0",children:s.jsx(X8,{className:"text-amber-600 fill-amber-600",size:24})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-amber-900 font-black text-base mb-2",children:h||" "}),s.jsx("div",{className:"text-amber-800 text-[0.95rem] leading-relaxed font-medium space-y-2",children:f})]})]})})]}),o=({title:h,bg:f="bg-white",children:p})=>s.jsxs("div",{className:`${f} rounded-3xl border border-slate-200/60 p-6 shadow-sm hover:shadow-md transition-all duration-300 h-full`,children:[s.jsxs("h5",{className:"font-black text-slate-800 mb-3 flex items-center gap-2",children:[s.jsx(di,{size:16,className:"text-indigo-500"}),h]}),s.jsx("div",{className:"text-slate-500 text-sm leading-relaxed font-medium",children:p})]}),c=({title:h,children:f,color:p="indigo"})=>{const g={indigo:"bg-indigo-50/50 border-indigo-100 text-indigo-900 ring-indigo-500/10",rose:"bg-rose-50/50 border-rose-100 text-rose-900 ring-rose-500/10",emerald:"bg-emerald-50/50 border-emerald-100 text-emerald-900 ring-emerald-500/10",amber:"bg-amber-50/50 border-amber-100 text-amber-900 ring-amber-500/10",violet:"bg-violet-50/50 border-violet-100 text-violet-900 ring-violet-500/10"};return s.jsxs("div",{className:`${g[p]} border rounded-2xl p-6 my-6 ring-1`,children:[h&&s.jsxs("div",{className:"font-black text-sm mb-3 flex items-center gap-2",children:[s.jsx(yb,{size:16}),h]}),s.jsx("div",{className:"text-[0.92rem] leading-[1.8] opacity-90 font-medium whitespace-pre-line",children:f})]})},d=({number:h,title:f,id:p,icon:g})=>s.jsx("div",{id:p,className:"scroll-mt-16 mb-12",children:s.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[s.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl shadow-lg shadow-indigo-200 flex items-center justify-center text-white",children:g}),s.jsxs("div",{children:[s.jsxs("span",{className:"text-indigo-600 font-black text-xs uppercase tracking-widest block mb-1",children:["Chapter ",h]}),s.jsx("h2",{className:"text-2xl font-black text-slate-800 tracking-tighter",children:f})]})]})}),u=({number:h,title:f,children:p})=>s.jsxs("div",{className:"mb-16 last:mb-0",children:[s.jsxs("h3",{className:"text-lg font-black text-slate-800 mb-6 flex items-center gap-3",children:[s.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-slate-100 text-slate-500 text-xs font-black",children:h}),f]}),s.jsx("div",{className:"pl-11 space-y-6",children:p})]});return s.jsxs("div",{className:"flex h-full bg-[#f8fafc] overflow-hidden",children:[s.jsxs("div",{className:"w-80 border-r border-slate-200 bg-white flex flex-col shrink-0 shadow-[10px_0_30px_rgba(0,0,0,0.02)]",children:[s.jsxs("div",{className:"p-8 pb-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-10",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-tr from-indigo-600 to-violet-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-200 ring-4 ring-indigo-50",children:s.jsx(VS,{size:24})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-black text-slate-800 tracking-tighter",children:"Mycelium Guide"}),s.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Master Platform v2.0"})]})]}),s.jsxs("div",{className:"relative mb-8",children:[s.jsx(Sv,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:18}),s.jsx("input",{type:"text",placeholder:"  ...",className:"w-full h-12 pl-12 pr-4 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-medium focus:outline-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500/50 transition-all",value:t,onChange:h=>r(h.target.value)})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-6 space-y-1 custom-scrollbar pb-12",children:[n.map(h=>s.jsxs("button",{onClick:()=>i(h.id),className:`w-full flex items-center gap-4 px-5 py-4 rounded-2xl text-[0.88rem] font-black transition-all group ${a===h.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-200 scale-[1.02]":"text-slate-500 hover:bg-slate-50 hover:text-indigo-600"}`,children:[s.jsx("span",{className:`${a===h.id?"text-white":"text-slate-400 group-hover:text-indigo-500"}`,children:h.icon}),h.label,a===h.id&&s.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-white animate-pulse"})]},h.id)),s.jsxs("div",{className:"mt-10 pt-10 border-t border-slate-100 px-4",children:[s.jsx("div",{className:"text-[10px] font-black text-slate-300 uppercase tracking-[0.2em] mb-6",children:"Expert Support"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("button",{className:"flex items-center gap-3 text-sm font-black text-slate-500 hover:text-indigo-600 transition-colors w-full text-left",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 text-orange-500 flex items-center justify-center",children:s.jsx(jv,{size:16})})," 1:1  "]}),s.jsxs("button",{className:"flex items-center gap-3 text-sm font-black text-slate-500 hover:text-indigo-600 transition-colors w-full text-left",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 text-emerald-500 flex items-center justify-center",children:s.jsx(m0,{size:16})}),"   "]})]})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-slate-50/30 relative",children:[s.jsx("div",{className:"absolute top-0 right-0 w-[1000px] h-[1000px] bg-indigo-400/5 rounded-full blur-[150px] pointer-events-none"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-[800px] h-[800px] bg-sky-400/5 rounded-full blur-[150px] pointer-events-none"}),s.jsxs("div",{className:"max-w-5xl mx-auto py-24 px-16 relative z-10",children:[s.jsxs("div",{className:"mb-24 text-center",children:[s.jsxs("div",{className:"inline-flex items-center gap-3 px-4 py-2 rounded-full bg-indigo-50 text-indigo-600 text-[11px] font-black uppercase tracking-[0.2em] mb-10 border border-indigo-100/50 shadow-sm",children:[s.jsxs("span",{className:"relative flex h-2.5 w-2.5",children:[s.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"}),s.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-indigo-500"})]}),"Mycelium Enterprise Platform Guidance"]}),s.jsxs("h1",{className:"text-4xl font-black text-slate-900 tracking-tighter mb-8 leading-[1.05]",style:{fontFamily:'"Noto Sans KR", sans-serif'},children:["Mycelium   ,",s.jsx("br",{}),s.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-violet-600",children:" "})]}),s.jsx("p",{className:"text-xl text-slate-500 font-medium leading-relaxed max-w-3xl mx-auto",children:"Mycelium      AI      .     ."})]}),s.jsx("section",{id:"flowchart",className:"scroll-mt-24 mb-32",children:s.jsxs("div",{className:"bg-white rounded-[3.5rem] border border-slate-200/80 p-16 shadow-[0_30px_100px_rgba(0,0,0,0.04)] text-center relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-3 bg-gradient-to-r from-indigo-500 via-violet-500 to-sky-500"}),s.jsxs("div",{className:"topic-title mb-16 flex flex-col items-center",children:[s.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center text-slate-800 mb-6 group-hover:rotate-12 transition-transform duration-500",children:s.jsx(VS,{size:32})}),s.jsx("h2",{className:"text-2xl font-black text-slate-800 tracking-tighter",children:"Mycelium   "}),s.jsx("p",{className:"text-slate-400 font-bold mt-2",children:"Smart Farm Integrated Workflow"})]}),s.jsxs("div",{className:"relative flex flex-col items-center gap-12 max-w-4xl mx-auto",children:[s.jsx("div",{className:"flex items-center justify-center gap-8 w-full",children:s.jsxs("div",{className:"w-64 p-6 bg-emerald-50 rounded-2xl border-2 border-emerald-200 text-emerald-900 shadow-sm hover:translate-y-[-5px] transition-transform",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"font-black text-sm",children:"9.   "}),s.jsx("div",{className:"text-[11px] font-bold opacity-60 mt-1",children:"  /  /  "})]})}),s.jsx("div",{className:"text-slate-300",children:s.jsx(H8,{className:"rotate-45",size:40})}),s.jsxs("div",{className:"flex items-center justify-center gap-12 w-full",children:[s.jsxs("div",{className:"w-60 p-6 bg-sky-50 rounded-2xl border-2 border-sky-200 text-sky-900 shadow-sm hover:translate-y-[-5px] transition-transform",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"font-black text-sm",children:"3.   (CRM)"}),s.jsx("div",{className:"text-[11px] font-bold opacity-60 mt-1",children:"AI   /  "})]}),s.jsx("div",{className:"flex items-center text-slate-200",children:s.jsx(s2,{size:32})}),s.jsxs("div",{className:"w-80 p-8 bg-indigo-600 rounded-[2rem] border-4 border-indigo-100 text-white shadow-2xl shadow-indigo-200 hover:scale-[1.05] transition-all",children:[s.jsx("div",{className:"text-3xl mb-3",children:""}),s.jsx("div",{className:"font-black text-xl",children:"  CENTER"}),s.jsx("div",{className:"text-[12px] font-bold opacity-80 mt-2",children:"  /   "})]}),s.jsx("div",{className:"flex items-center text-slate-200",children:s.jsx(s2,{size:32})}),s.jsxs("div",{className:"w-60 p-6 bg-sky-50 rounded-2xl border-2 border-sky-200 text-sky-900 shadow-sm hover:translate-y-[-5px] transition-transform",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"font-black text-sm",children:"8.   "}),s.jsx("div",{className:"text-[11px] font-bold opacity-60 mt-1",children:" /   "})]})]}),s.jsx("div",{className:"text-slate-300",children:s.jsx(H8,{className:"rotate-45",size:40})}),s.jsxs("div",{className:"flex items-center justify-center gap-12 w-full",children:[s.jsxs("div",{className:"w-64 p-6 bg-rose-50 rounded-2xl border-2 border-rose-200 text-rose-900 shadow-sm hover:translate-y-[-5px] transition-transform",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"font-black text-sm",children:"6.  "}),s.jsx("div",{className:"text-[11px] font-bold opacity-60 mt-1",children:" / RFM /  "})]}),s.jsx("div",{className:"flex items-center text-slate-200 text-2xl",children:""}),s.jsxs("div",{className:"w-64 p-6 bg-rose-50 rounded-2xl border-2 border-rose-200 text-rose-900 shadow-sm hover:translate-y-[-5px] transition-transform",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"font-black text-sm",children:"1. "}),s.jsx("div",{className:"text-[11px] font-bold opacity-60 mt-1",children:"  / AI  "})]})]})]}),s.jsxs("p",{className:"mt-16 text-slate-400 font-bold text-sm",children:["*   ",s.jsx("span",{className:"text-indigo-600 font-black",children:" "}),"     ."]})]})}),s.jsx(d,{number:"01",title:" (Dashboard)",id:"dashboard",icon:s.jsx(l2,{size:28})}),s.jsxs("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm space-y-12 mb-32",children:[s.jsx("p",{className:"text-slate-500 font-medium leading-[1.8] text-lg",children:"       . AI         ."}),s.jsx(u,{number:"1.1",title:" AI  & ",children:s.jsxs(c,{color:"indigo",children:[s.jsx("b",{children:"  :"}),"      , ,    AI .",s.jsx("b",{children:" :"}),"    ,  ( ,   )     ."]})}),s.jsx(u,{number:"1.2",title:" 11  ",children:s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsx(o,{title:" /",children:"      ."}),s.jsx(o,{title:"/ ",children:"           ."}),s.jsx(o,{title:" /",children:"         ."}),s.jsx(o,{title:"/ ",children:"         ."})]})}),s.jsxs(l,{title:"  ",children:["     ",s.jsx("b",{children:"[/ ]"}),"  .           40%  !"]})]}),s.jsx(d,{number:"02",title:"  (Sales Control)",id:"sales",icon:s.jsx(mx,{size:28})}),s.jsxs("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm space-y-12 mb-32",children:[s.jsx(u,{number:"2.1",title:"    ",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-slate-500 font-medium leading-relaxed",children:", , (),     ."}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(o,{title:" ",children:"/ .      [ ]."}),s.jsx(o,{title:"  ",children:"   .      ."}),s.jsx(o,{title:"  ",children:"/         ."}),s.jsx(o,{title:"() ",children:"          ."})]})]})}),s.jsx(u,{number:"2.2",title:"   ",children:s.jsxs(c,{color:"indigo",children:[s.jsx("b",{children:"  :"}),"      ,         .",s.jsx("b",{children:" //:"}),"       .   ' '      ."]})}),s.jsx(u,{number:"2.3",title:"  ",children:s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsx(o,{title:"  ",children:"      ."}),s.jsx(o,{title:"  ",children:"      ."})]})})]}),s.jsx(d,{number:"03",title:"  (CRM)",id:"customer",icon:s.jsx(gx,{size:28})}),s.jsxs("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm space-y-12 mb-32",children:[s.jsxs(u,{number:"3.1",title:"   ",children:[s.jsx("p",{className:"text-slate-500 font-medium leading-relaxed",children:"   ,     ."}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsx(o,{title:" /",children:", ,    (,  ) ."}),s.jsx(o,{title:" (CRM)",children:"              ."}),s.jsx(o,{title:"  ",children:"              ."}),s.jsx(o,{title:"/ ",children:"VIP    ,        ."})]})]}),s.jsx(u,{number:"3.2",title:"   ",children:s.jsxs(c,{color:"rose",title:"  ",children:["         .",s.jsx("b",{children:" :"}),"         [ ]    ."]})})]}),s.jsx(d,{number:"04",title:"//",id:"inventory_prod",icon:s.jsx(mh,{size:28})}),s.jsxs("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm space-y-12 mb-32",children:[s.jsx(u,{number:"4.1",title:"   ",children:s.jsxs(c,{color:"violet",children:[s.jsx("b",{children:"/ :"})," ()     .",s.jsx("b",{children:"BOM(Recipe) :"}),"    ' ' ,  1     1,  1     ."]})}),s.jsx(u,{number:"4.2",title:"GAP / HACCP ",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-slate-500 font-medium leading-relaxed",children:"          ."}),s.jsx(o,{title:"  (Traceability)",children:"      ,          ."}),s.jsx(o,{title:" ",children:"        PDF   ."})]})})]}),s.jsx(d,{number:"05",title:"/ ",id:"finance",icon:s.jsx(G8,{size:28})}),s.jsxs("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm space-y-12 mb-32",children:[s.jsx(u,{number:"5.1",title:"  ",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(o,{title:" /",children:"  .  (/)      ."}),s.jsx(o,{title:"  ",children:", ,      ."}),s.jsx(o,{title:"/ ",children:"       ."}),s.jsx(o,{title:"/ ",children:"  /   .      ."})]})}),s.jsx(u,{number:"5.2",title:"  /   ",children:s.jsxs(c,{color:"amber",children:[s.jsx("b",{children:" :"})," () ()    .",s.jsx("b",{children:" :"}),"    [ ]           ."]})})]}),s.jsx(d,{number:"06",title:"  (AI)",id:"intel",icon:s.jsx(U8,{size:28})}),s.jsxs("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm space-y-12 mb-32",children:[s.jsx("p",{className:"text-slate-500 font-medium mb-6",children:"  AI     ."}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsx(o,{title:"  ",children:"        ."}),s.jsx(o,{title:"AI   ",children:"    ' '    ."}),s.jsx(o,{title:" ",children:"             ."}),s.jsx(o,{title:"  ",children:"       ."})]})]}),s.jsx(d,{number:"07",title:" ",id:"exp",icon:s.jsx(Eo,{size:28})}),s.jsx("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm space-y-12 mb-32",children:s.jsx(u,{number:"7.1",title:"   ",children:s.jsxs(c,{color:"emerald",children:[s.jsx("b",{children:" :"}),"  ,  , (/) .",s.jsx("b",{children:" :"}),"           ."]})})}),s.jsx(d,{number:"08",title:"  ",id:"schedule",icon:s.jsx(sx,{size:28})}),s.jsxs("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm space-y-12 mb-32",children:[s.jsx("p",{className:"text-slate-500 font-medium",children:", ,        ' '."}),s.jsx(o,{title:" ",children:"   [ ]       ."}),s.jsxs(l,{title:" ",children:["   ",s.jsx("b",{children:"[ ]"}),"  .           !"]})]}),s.jsx(d,{number:"09",title:"   (Setup)",id:"settings",icon:s.jsx(sx,{size:28})}),s.jsx("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm space-y-12 mb-32",children:s.jsx(u,{number:"9.1",title:"  ",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(o,{title:" ",children:" (/)    ."}),s.jsx(o,{title:"  ",children:"     , ,  ."}),s.jsx(o,{title:"/ ",children:"  . , , , BOM       ."}),s.jsx(o,{title:"  ",children:"      PIN    URL ."})]})})}),s.jsx(d,{number:"10",title:"   ",id:"rescue",icon:s.jsx(Y8,{size:28})}),s.jsxs("div",{className:"bg-white rounded-[3rem] border border-slate-200/80 p-12 shadow-sm mb-32",children:[s.jsxs("div",{className:"p-8 border-b border-slate-100 flex items-start gap-4 bg-rose-50/30 rounded-t-[3rem]",children:[s.jsx(bb,{className:"text-rose-500 shrink-0",size:24}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-black text-slate-800 mb-1",children:"    ?"}),s.jsx("p",{className:"text-sm font-bold text-slate-400",children:"     ."})]})]}),s.jsxs("div",{className:"p-12 space-y-8",children:[s.jsx(u,{number:"1",title:"   ",children:s.jsxs("p",{className:"text-sm font-medium text-slate-600 leading-relaxed",children:[" ",s.jsx("b",{children:"Ctrl + R"}),"  ",s.jsx("b",{children:"F5"}),"    .       ."]})}),s.jsx(u,{number:"2",title:"   !",children:s.jsx("p",{className:"text-sm font-medium text-slate-600 leading-relaxed",children:"[ >   ]      []     . Mycelium       ."})}),s.jsx(u,{number:"3",title:"     ",children:s.jsx("p",{className:"text-sm font-medium text-slate-600 leading-relaxed",children:"     .      ,     [ ]   .  'Day-0'     ."})})]})]}),s.jsxs("div",{className:"text-center pt-24 border-t border-slate-200",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-tr from-indigo-500 to-violet-500 rounded-3xl flex items-center justify-center text-white mx-auto mb-10 shadow-xl shadow-indigo-100 rotate-3",children:s.jsx(X8,{size:32})}),s.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-4",children:"  ,    "}),s.jsx("p",{className:"text-slate-400 font-bold text-sm mb-20",children:" 2026 Mycelium Enterprise Platform - User Instruction System v2.0"}),s.jsx("div",{className:"flex justify-center gap-4",children:s.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"px-6 py-3 bg-slate-800 text-white rounded-2xl font-black text-sm hover:bg-slate-700 transition-colors shadow-lg",children:"  "})})]})]})]}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                .custom-scrollbar::-webkit-scrollbar { width: 6px; }
                .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #cbd5e1; }
            `}})]})},e8e=()=>{const[a,e]=F.useState(navigator.onLine),[t,r]=F.useState(0),[n,i]=F.useState(!1),[l,o]=F.useState(null);F.useEffect(()=>{const u=()=>e(!0),h=()=>e(!1);window.addEventListener("online",u),window.addEventListener("offline",h),c();const f=setInterval(()=>{c()},3e4);return()=>{window.removeEventListener("online",u),window.removeEventListener("offline",h),clearInterval(f)}},[]),F.useEffect(()=>{a&&d()},[a]);const c=async()=>{const u=await R8();r(u.length)},d=async()=>{const u=await R8();if(u.length===0||n)return;i(!0),console.log(`PWA Sync: Starting sync for ${u.length} items...`);let h=0;for(const f of u)try{await qte(f.id);const p=await Ke(f.commandName,f.args);p&&p.success!==!1?(await Xte(f.id),h++):await L8(f.id)}catch(p){console.error(`PWA Sync: Failed to sync item ${f.id}`,p),await L8(f.id)}i(!1),c(),h>0&&(o("success"),setTimeout(()=>o(null),5e3))};return a?t>0||n||l?s.jsx("div",{className:"fixed bottom-24 left-4 z-[100] animate-in slide-in-from-left fade-in duration-500",children:s.jsxs("div",{className:"bg-white/80 backdrop-blur-xl px-5 py-3.5 rounded-[1.5rem] shadow-[0_12px_40px_rgba(0,0,0,0.08)] flex items-center gap-4 border border-white/40 min-w-[240px] group transition-all",children:[s.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center border transition-all ${n?"bg-indigo-50 border-indigo-100":l==="success"?"bg-emerald-50 border-emerald-100":"bg-slate-50 border-slate-100"}`,children:n?s.jsx(yi,{size:24,className:"text-indigo-600 animate-spin"}):l==="success"?s.jsx(YA,{size:24,className:"text-emerald-500 animate-in zoom-in-50 duration-300"}):s.jsx(kv,{size:24,className:"text-indigo-600"})}),s.jsxs("div",{className:"flex flex-col flex-1",children:[s.jsx("span",{className:"text-sm font-black text-slate-800 leading-tight",children:n?"  ":l==="success"?" ":` : ${t}`}),s.jsx("p",{className:"text-[10px] text-slate-400 font-bold tracking-tighter uppercase mt-0.5",children:n?"SYCHRONIZING WITH SERVER":l==="success"?"LEDGER UPDATED SUCCESSFULLY":"ONLINE & READY TO SYNC"})]}),!n&&t>0&&s.jsx("button",{onClick:d,className:"w-10 h-10 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-200 flex items-center justify-center hover:bg-indigo-700 active:scale-90 transition-all",children:s.jsx(yi,{size:18})})]})}):null:s.jsx("div",{className:"fixed bottom-24 left-4 z-[100] animate-in slide-in-from-left fade-in duration-500",children:s.jsxs("div",{className:"bg-slate-950/80 backdrop-blur-xl text-white px-5 py-3.5 rounded-[1.5rem] shadow-[0_8px_32px_rgba(0,0,0,0.3)] flex items-center gap-4 border border-white/10 relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-orange-500 shadow-[0_0_12px_rgba(249,115,22,0.6)]"}),s.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-500/20 flex items-center justify-center border border-orange-500/30 animate-pulse",children:s.jsx(Ine,{size:20,className:"text-orange-500"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm font-black tracking-tight text-white leading-tight",children:" "}),s.jsx("span",{className:"text-[10px] text-slate-400 font-bold tracking-tighter uppercase mt-0.5",children:"LOCAL PERSISTENCE ACTIVE"})]})]})})},t8e=()=>{const[a,e]=F.useState(null),[t,r]=F.useState(!1);return F.useEffect(()=>{(async()=>{try{const i=await Ke("get_update_status");i.update_available&&(e(i),setTimeout(()=>r(!0),2e3))}catch(i){console.warn("Update check failed",i)}})()},[]),!a||!t?null:s.jsx("div",{className:"fixed top-6 left-1/2 -translate-x-1/2 z-[9999] w-[90%] max-w-md animate-in slide-in-from-top duration-700",children:s.jsxs("div",{className:"bg-white/80 backdrop-blur-2xl border border-indigo-100 rounded-[2rem] p-6 shadow-2xl shadow-indigo-500/20 relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/5 blur-[40px] rounded-full -mr-16 -mt-16 group-hover:bg-indigo-500/10 transition-colors"}),s.jsx("button",{onClick:()=>r(!1),className:"absolute top-4 right-4 p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-all",children:s.jsx(Ri,{size:16})}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-2xl flex items-center justify-center shrink-0 shadow-lg shadow-indigo-200",children:s.jsx($re,{size:24,className:"text-white"})}),s.jsxs("div",{className:"flex-1 pr-6 text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"text-lg font-black text-slate-800 tracking-tight",children:" "}),s.jsxs("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-600 text-[10px] font-black rounded-full border border-indigo-100",children:["v",a.latest_version]})]}),s.jsx("p",{className:"text-slate-500 text-xs font-bold leading-relaxed mb-4",children:"  AI       ."}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("a",{href:a.release_url,target:"_blank",rel:"noreferrer",className:"flex-1 h-10 bg-indigo-600 hover:bg-slate-800 text-white rounded-xl text-[11px] font-black flex items-center justify-center gap-2 shadow-lg shadow-indigo-100 transition-all hover:scale-[1.02] active:scale-[0.98]",children:[s.jsx(FH,{size:14}),"   "]}),s.jsxs("button",{onClick:()=>r(!1),className:"flex-1 h-10 bg-slate-50 hover:bg-slate-100 text-slate-600 rounded-xl text-[11px] font-black flex items-center justify-center gap-2 transition-all",children:["  ",s.jsx(z_,{size:14})]})]})]})]})]})})},a8e=()=>{if(window.__MYCELIUM_MOBILE__!==void 0)return window.__MYCELIUM_MOBILE__;if(!!window.__TAURI__)return!1;const e=window.location.pathname.toLowerCase().startsWith("/mobile-"),t=navigator.userAgent,r=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t),n=/Macintosh/i.test(t)&&navigator.maxTouchPoints>0;return r||n||e},r8e=({isMobile:a})=>s.jsxs("div",{className:"flex flex-col h-full bg-slate-50 overflow-hidden",children:[!a&&s.jsx(oae,{}),s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsx(xx,{})})]}),n8e=()=>localStorage.getItem("userRole")!=="admin"?s.jsx(Ef,{to:"/",replace:!0}):s.jsx(xx,{});function i8e(){const{showConfirm:a}=wa(),e=F.useMemo(()=>a8e(),[]);F.useEffect(()=>{document.documentElement.classList.add(e?"is-mobile":"is-desktop"),document.documentElement.classList.remove(e?"is-desktop":"is-mobile")},[e]);const[t,r]=F.useState(null),[n,i]=F.useState(()=>localStorage.getItem("isLoggedIn")==="true"),[l,o]=F.useState(()=>localStorage.getItem("pin_verified")==="true"),[c,d]=F.useState(!1),[u,h]=F.useState(!0);F.useEffect(()=>{const p=async()=>{try{let g=localStorage.getItem("API_BASE_URL")||"";g.endsWith("/")&&(g=g.slice(0,-1));const b=await Ke("get_auth_status");r(e||b==="Configured");const w=await Ke("check_auth");d(w.mobile_auth_required),w.logged_in&&(i(!0),localStorage.setItem("isLoggedIn","true"),localStorage.getItem("pin_verified")==="true"&&o(!0),w.user&&(localStorage.setItem("userRole",w.user.role||"worker"),localStorage.setItem("username",w.user.username||"mobile_user")))}catch(g){console.error("App initialization failed",g),e?r(!0):setTimeout(()=>{p()},2e3)}finally{h(!1);const g=document.getElementById("app-spinner");g&&(g.style.opacity="0",setTimeout(()=>g.remove(),400))}};p()},[e]);const f=F.useMemo(()=>Mte(ste(s.jsxs(ha,{element:s.jsx(r8e,{isMobile:e}),children:[s.jsx(ha,{path:"/",element:e?s.jsx(Ef,{to:"/mobile-dashboard",replace:!0}):s.jsx(Ef,{to:"/dashboard",replace:!0})}),s.jsx(ha,{path:"setup",element:t&&localStorage.getItem("userRole")!=="admin"?s.jsx(Ef,{to:"/",replace:!0}):s.jsx(B8,{onComplete:()=>window.location.href="/"})}),s.jsx(ha,{path:"login",element:n?s.jsx(Ef,{to:"/",replace:!0}):s.jsx(F8,{})}),s.jsxs(ha,{element:e?s.jsx(Fne,{}):s.jsx(xx,{}),children:[s.jsx(ha,{path:"mobile-dashboard",element:s.jsx(_de,{})}),s.jsx(ha,{path:"mobile-reception",element:s.jsx(Nue,{})}),s.jsx(ha,{path:"mobile-event-sales",element:s.jsx(_ue,{})}),s.jsx(ha,{path:"mobile-worklog",element:s.jsx(uue,{})}),s.jsx(ha,{path:"mobile-harvest",element:s.jsx(hue,{})})]}),s.jsx(ha,{path:"dashboard",element:s.jsx(yde,{})}),s.jsx(ha,{path:"sales/reception",element:s.jsx(pIe,{})}),s.jsx(ha,{path:"sales/special",element:s.jsx(xIe,{})}),s.jsx(ha,{path:"sales",element:s.jsx(Ef,{to:"/sales/reception",replace:!0})}),s.jsx(ha,{path:"sales/online-sync",element:s.jsx(gIe,{})}),s.jsx(ha,{path:"sales/shipping",element:s.jsx(bIe,{})}),s.jsx(ha,{path:"sales/claims",element:s.jsx(yIe,{})}),s.jsx(ha,{path:"sales/daily-receipts",element:s.jsx(_Ie,{})}),s.jsx(ha,{path:"sales/daily",element:s.jsx(LIe,{})}),s.jsx(ha,{path:"sales/stock",element:s.jsx(DIe,{})}),s.jsx(ha,{path:"customer/register",element:s.jsx(jue,{})}),s.jsx(ha,{path:"customer/edit",element:s.jsx(Sue,{})}),s.jsx(ha,{path:"sales/ledger",element:s.jsx(IIe,{})}),s.jsx(ha,{path:"customer/batch",element:s.jsx(Aue,{})}),s.jsx(ha,{path:"customer/consultation",element:s.jsx(Cue,{})}),s.jsx(ha,{path:"customer/best",element:s.jsx(Tue,{})}),s.jsx(ha,{path:"customer/special-care",element:s.jsx(Mue,{})}),s.jsx(ha,{path:"finance/purchase",element:s.jsx(Due,{})}),s.jsx(ha,{path:"finance/expense",element:s.jsx(Iue,{})}),s.jsx(ha,{path:"finance/tax-report",element:s.jsx(Rue,{})}),s.jsx(ha,{path:"finance/analysis",element:s.jsx(Pue,{})}),s.jsx(ha,{path:"intel/sales",element:s.jsx(Bue,{})}),s.jsx(ha,{path:"intel/customer",element:s.jsx(Yue,{})}),s.jsx(ha,{path:"marketing/association",element:s.jsx(txe,{})}),s.jsx(ha,{path:"marketing/orm",element:s.jsx(HDe,{})}),s.jsx(ha,{path:"intel/region-analysis",element:s.jsx(VDe,{})}),s.jsx(ha,{path:"product/sales",element:s.jsx(OIe,{})}),s.jsx(ha,{path:"customer/sms",element:s.jsx(Eue,{})}),s.jsx(ha,{path:"exp/reservation-entry",element:s.jsx(zIe,{})}),s.jsx(ha,{path:"exp/reservation-status",element:s.jsx(BIe,{})}),s.jsxs(ha,{element:s.jsx(n8e,{}),children:[s.jsx(ha,{path:"exp/program-mgmt",element:s.jsx(PIe,{})}),s.jsx(ha,{path:"settings/product-list",element:s.jsx(UDe,{})}),s.jsx(ha,{path:"settings/user-list",element:s.jsx(GDe,{})}),s.jsx(ha,{path:"settings/sessions",element:s.jsx(tIe,{})}),s.jsx(ha,{path:"settings/security",element:s.jsx(aIe,{})}),s.jsx(ha,{path:"settings/audit-logs",element:s.jsx(nIe,{})}),s.jsx(ha,{path:"settings/sms-logs",element:s.jsx(rIe,{})}),s.jsx(ha,{path:"settings/backup",element:s.jsx($De,{})}),s.jsx(ha,{path:"settings/company-info",element:s.jsx(WDe,{})}),s.jsx(ha,{path:"settings/api-keys",element:s.jsx(YDe,{})}),s.jsx(ha,{path:"settings/template-mgmt",element:s.jsx(QDe,{})}),s.jsx(ha,{path:"settings/iot",element:s.jsx(eIe,{})}),s.jsx(ha,{path:"settings/mobile-sync",element:s.jsx(JDe,{})}),s.jsx(ha,{path:"settings/db-reset",element:s.jsx(ZDe,{})}),s.jsx(ha,{path:"settings/event-mgmt",element:s.jsx(kue,{})}),s.jsx(ha,{path:"settings/vendor-mgmt",element:s.jsx(Lue,{})})]}),s.jsx(ha,{path:"production",element:s.jsx(KIe,{initialTab:"dashboard"})}),s.jsx(ha,{path:"schedule",element:s.jsx(HIe,{})}),s.jsx(ha,{path:"manual",element:s.jsx(JIe,{})}),e&&s.jsx(ha,{path:"*",element:s.jsx(Ef,{to:"/mobile-dashboard",replace:!0})})]}))),[e,t,n,c,l]);return u||t===null?null:s.jsx("div",{id:"app-root",className:`fixed inset-0 overflow-hidden ${e?"bg-slate-50":"bg-slate-950"} font-sans`,children:t&&n&&(!e||!c||l)?s.jsx(Vte,{router:f}):!t&&!e?s.jsx(B8,{onComplete:()=>r(!0)}):e?s.jsx(zne,{onLoginSuccess:()=>{o(!0),i(!0)}}):s.jsx(F8,{onLoginSuccess:()=>i(!0)})})}function s8e(){return s.jsxs(Hte,{children:[s.jsx(i8e,{}),s.jsx(e8e,{}),s.jsx(t8e,{})]})}function l8e(a={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:n,onRegisteredSW:i,onRegisterError:l}=a;let o,c;const d=async(h=!0)=>{await c};async function u(){if("serviceWorker"in navigator){if(o=await tG(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{l?.(h)}),!o)return;o.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),o.addEventListener("installed",h=>{h.isUpdate||r?.()}),o.register({immediate:e}).then(h=>{i?i("/sw.js",h):n?.(h)}).catch(h=>{l?.(h)})}}return c=u(),d}class o8e extends or.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({errorInfo:t}),console.error("Uncaught error:",e,t)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-6",children:s.jsxs("div",{className:"max-w-md w-full bg-white rounded-[2.5rem] shadow-2xl border border-red-100 overflow-hidden relative",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1.5 bg-gradient-to-r from-red-400 via-orange-400 to-amber-400"}),s.jsxs("div",{className:"p-10 text-center",children:[s.jsx("div",{className:"w-20 h-20 mx-auto bg-red-50 rounded-full flex items-center justify-center mb-6 shadow-inner",children:s.jsx("span",{className:"material-symbols-rounded text-4xl text-red-500",children:"error"})}),s.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:" "}),s.jsx("p",{className:"text-slate-500 text-sm font-medium mb-8 leading-relaxed",children:"      .     ."}),s.jsx("div",{className:"bg-slate-50 rounded-2xl p-4 mb-8 text-left border border-slate-100 max-h-40 overflow-auto",children:s.jsx("p",{className:"text-[11px] font-mono text-slate-400 break-all leading-tight",children:this.state.error&&this.state.error.toString()})}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full h-12 bg-slate-900 text-white font-black rounded-xl hover:bg-slate-800 transition-all flex items-center justify-center gap-2",children:[s.jsx("span",{className:"material-symbols-rounded text-lg",children:"refresh"}),s.jsx("span",{children:" "})]}),s.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"w-full h-12 bg-white text-slate-500 font-black rounded-xl border border-slate-200 hover:bg-slate-50 transition-all",children:" "})]})]}),s.jsxs("div",{className:"px-10 py-4 bg-slate-50 border-t border-slate-100 flex items-center justify-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-teal-500/10 flex items-center justify-center",children:s.jsx("span",{className:"material-symbols-rounded text-teal-600 text-sm",children:"auto_awesome"})}),s.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Powered by AI Guide System"})]})]})}):this.props.children}}l8e({immediate:!0});mJ.createRoot(document.getElementById("root")).render(s.jsx(F.StrictMode,{children:s.jsx(o8e,{children:s.jsx(s8e,{})})}));export{c4 as C,bh as H,gT as W,sue as a};
